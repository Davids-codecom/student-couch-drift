var dx=e=>{throw TypeError(e)};var Vp=(e,t,n)=>t.has(e)||dx("Cannot "+n);var D=(e,t,n)=>(Vp(e,t,"read from private field"),n?n.call(e):t.get(e)),ke=(e,t,n)=>t.has(e)?dx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ve=(e,t,n,r)=>(Vp(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Be=(e,t,n)=>(Vp(e,t,"access private method"),n);var od=(e,t,n,r)=>({set _(s){ve(e,t,s,n)},get _(){return D(e,t,r)}});function QM(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var sr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function XM(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var W1={exports:{}},gf={},H1={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xu=Symbol.for("react.element"),JM=Symbol.for("react.portal"),e2=Symbol.for("react.fragment"),t2=Symbol.for("react.strict_mode"),n2=Symbol.for("react.profiler"),r2=Symbol.for("react.provider"),s2=Symbol.for("react.context"),i2=Symbol.for("react.forward_ref"),o2=Symbol.for("react.suspense"),a2=Symbol.for("react.memo"),l2=Symbol.for("react.lazy"),hx=Symbol.iterator;function c2(e){return e===null||typeof e!="object"?null:(e=hx&&e[hx]||e["@@iterator"],typeof e=="function"?e:null)}var V1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G1=Object.assign,q1={};function _l(e,t,n){this.props=e,this.context=t,this.refs=q1,this.updater=n||V1}_l.prototype.isReactComponent={};_l.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_l.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Y1(){}Y1.prototype=_l.prototype;function cy(e,t,n){this.props=e,this.context=t,this.refs=q1,this.updater=n||V1}var uy=cy.prototype=new Y1;uy.constructor=cy;G1(uy,_l.prototype);uy.isPureReactComponent=!0;var fx=Array.isArray,Z1=Object.prototype.hasOwnProperty,dy={current:null},K1={key:!0,ref:!0,__self:!0,__source:!0};function Q1(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)Z1.call(t,r)&&!K1.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:xu,type:e,key:i,ref:a,props:s,_owner:dy.current}}function u2(e,t){return{$$typeof:xu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function hy(e){return typeof e=="object"&&e!==null&&e.$$typeof===xu}function d2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var px=/\/+/g;function Gp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?d2(""+e.key):t.toString(36)}function Ud(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case xu:case JM:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Gp(a,0):r,fx(s)?(n="",e!=null&&(n=e.replace(px,"$&/")+"/"),Ud(s,t,n,"",function(h){return h})):s!=null&&(hy(s)&&(s=u2(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(px,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",fx(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Gp(i,l);a+=Ud(i,t,n,c,s)}else if(c=c2(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Gp(i,l++),a+=Ud(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ad(e,t,n){if(e==null)return e;var r=[],s=0;return Ud(e,r,"","",function(i){return t.call(n,i,s++)}),r}function h2(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Cn={current:null},zd={transition:null},f2={ReactCurrentDispatcher:Cn,ReactCurrentBatchConfig:zd,ReactCurrentOwner:dy};function X1(){throw Error("act(...) is not supported in production builds of React.")}qe.Children={map:ad,forEach:function(e,t,n){ad(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ad(e,function(){t++}),t},toArray:function(e){return ad(e,function(t){return t})||[]},only:function(e){if(!hy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};qe.Component=_l;qe.Fragment=e2;qe.Profiler=n2;qe.PureComponent=cy;qe.StrictMode=t2;qe.Suspense=o2;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f2;qe.act=X1;qe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=G1({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=dy.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Z1.call(t,c)&&!K1.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:xu,type:e.type,key:s,ref:i,props:r,_owner:a}};qe.createContext=function(e){return e={$$typeof:s2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:r2,_context:e},e.Consumer=e};qe.createElement=Q1;qe.createFactory=function(e){var t=Q1.bind(null,e);return t.type=e,t};qe.createRef=function(){return{current:null}};qe.forwardRef=function(e){return{$$typeof:i2,render:e}};qe.isValidElement=hy;qe.lazy=function(e){return{$$typeof:l2,_payload:{_status:-1,_result:e},_init:h2}};qe.memo=function(e,t){return{$$typeof:a2,type:e,compare:t===void 0?null:t}};qe.startTransition=function(e){var t=zd.transition;zd.transition={};try{e()}finally{zd.transition=t}};qe.unstable_act=X1;qe.useCallback=function(e,t){return Cn.current.useCallback(e,t)};qe.useContext=function(e){return Cn.current.useContext(e)};qe.useDebugValue=function(){};qe.useDeferredValue=function(e){return Cn.current.useDeferredValue(e)};qe.useEffect=function(e,t){return Cn.current.useEffect(e,t)};qe.useId=function(){return Cn.current.useId()};qe.useImperativeHandle=function(e,t,n){return Cn.current.useImperativeHandle(e,t,n)};qe.useInsertionEffect=function(e,t){return Cn.current.useInsertionEffect(e,t)};qe.useLayoutEffect=function(e,t){return Cn.current.useLayoutEffect(e,t)};qe.useMemo=function(e,t){return Cn.current.useMemo(e,t)};qe.useReducer=function(e,t,n){return Cn.current.useReducer(e,t,n)};qe.useRef=function(e){return Cn.current.useRef(e)};qe.useState=function(e){return Cn.current.useState(e)};qe.useSyncExternalStore=function(e,t,n){return Cn.current.useSyncExternalStore(e,t,n)};qe.useTransition=function(){return Cn.current.useTransition()};qe.version="18.3.1";H1.exports=qe;var g=H1.exports;const ie=mf(g),fy=QM({__proto__:null,default:ie},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2=g,m2=Symbol.for("react.element"),g2=Symbol.for("react.fragment"),v2=Object.prototype.hasOwnProperty,y2=p2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w2={key:!0,ref:!0,__self:!0,__source:!0};function J1(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)v2.call(t,r)&&!w2.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:m2,type:e,key:i,ref:a,props:s,_owner:y2.current}}gf.Fragment=g2;gf.jsx=J1;gf.jsxs=J1;W1.exports=gf;var d=W1.exports,eS={exports:{}},ar={},tS={exports:{}},nS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,$){var q=j.length;j.push($);e:for(;0<q;){var oe=q-1>>>1,B=j[oe];if(0<s(B,$))j[oe]=$,j[q]=B,q=oe;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var $=j[0],q=j.pop();if(q!==$){j[0]=q;e:for(var oe=0,B=j.length,ce=B>>>1;oe<ce;){var Q=2*(oe+1)-1,te=j[Q],Z=Q+1,re=j[Z];if(0>s(te,q))Z<B&&0>s(re,te)?(j[oe]=re,j[Z]=q,oe=Z):(j[oe]=te,j[Q]=q,oe=Q);else if(Z<B&&0>s(re,q))j[oe]=re,j[Z]=q,oe=Z;else break e}}return $}function s(j,$){var q=j.sortIndex-$.sortIndex;return q!==0?q:j.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],h=[],f=1,m=null,v=3,y=!1,S=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(j){for(var $=n(h);$!==null;){if($.callback===null)r(h);else if($.startTime<=j)r(h),$.sortIndex=$.expirationTime,t(c,$);else break;$=n(h)}}function k(j){if(x=!1,C(j),!S)if(n(c)!==null)S=!0,V(T);else{var $=n(h);$!==null&&Y(k,$.startTime-j)}}function T(j,$){S=!1,x&&(x=!1,E(A),A=-1),y=!0;var q=v;try{for(C($),m=n(c);m!==null&&(!(m.expirationTime>$)||j&&!X());){var oe=m.callback;if(typeof oe=="function"){m.callback=null,v=m.priorityLevel;var B=oe(m.expirationTime<=$);$=e.unstable_now(),typeof B=="function"?m.callback=B:m===n(c)&&r(c),C($)}else r(c);m=n(c)}if(m!==null)var ce=!0;else{var Q=n(h);Q!==null&&Y(k,Q.startTime-$),ce=!1}return ce}finally{m=null,v=q,y=!1}}var R=!1,O=null,A=-1,W=5,G=-1;function X(){return!(e.unstable_now()-G<W)}function H(){if(O!==null){var j=e.unstable_now();G=j;var $=!0;try{$=O(!0,j)}finally{$?U():(R=!1,O=null)}}else R=!1}var U;if(typeof _=="function")U=function(){_(H)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,ee=M.port2;M.port1.onmessage=H,U=function(){ee.postMessage(null)}}else U=function(){b(H,0)};function V(j){O=j,R||(R=!0,U())}function Y(j,$){A=b(function(){j(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){S||y||(S=!0,V(T))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(j){switch(v){case 1:case 2:case 3:var $=3;break;default:$=v}var q=v;v=$;try{return j()}finally{v=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,$){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var q=v;v=j;try{return $()}finally{v=q}},e.unstable_scheduleCallback=function(j,$,q){var oe=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?oe+q:oe):q=oe,j){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=q+B,j={id:f++,callback:$,priorityLevel:j,startTime:q,expirationTime:B,sortIndex:-1},q>oe?(j.sortIndex=q,t(h,j),n(c)===null&&j===n(h)&&(x?(E(A),A=-1):x=!0,Y(k,q-oe))):(j.sortIndex=B,t(c,j),S||y||(S=!0,V(T))),j},e.unstable_shouldYield=X,e.unstable_wrapCallback=function(j){var $=v;return function(){var q=v;v=$;try{return j.apply(this,arguments)}finally{v=q}}}})(nS);tS.exports=nS;var x2=tS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _2=g,ir=x2;function le(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rS=new Set,Uc={};function ea(e,t){al(e,t),al(e+"Capture",t)}function al(e,t){for(Uc[e]=t,e=0;e<t.length;e++)rS.add(t[e])}var Qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hg=Object.prototype.hasOwnProperty,b2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mx={},gx={};function S2(e){return hg.call(gx,e)?!0:hg.call(mx,e)?!1:b2.test(e)?gx[e]=!0:(mx[e]=!0,!1)}function E2(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function C2(e,t,n,r){if(t===null||typeof t>"u"||E2(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pn(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var sn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){sn[e]=new Pn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];sn[t]=new Pn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){sn[e]=new Pn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){sn[e]=new Pn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){sn[e]=new Pn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){sn[e]=new Pn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){sn[e]=new Pn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){sn[e]=new Pn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){sn[e]=new Pn(e,5,!1,e.toLowerCase(),null,!1,!1)});var py=/[\-:]([a-z])/g;function my(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(py,my);sn[t]=new Pn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(py,my);sn[t]=new Pn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(py,my);sn[t]=new Pn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){sn[e]=new Pn(e,1,!1,e.toLowerCase(),null,!1,!1)});sn.xlinkHref=new Pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){sn[e]=new Pn(e,1,!1,e.toLowerCase(),null,!0,!0)});function gy(e,t,n,r){var s=sn.hasOwnProperty(t)?sn[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(C2(t,n,s,r)&&(n=null),r||s===null?S2(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ri=_2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ld=Symbol.for("react.element"),ka=Symbol.for("react.portal"),Na=Symbol.for("react.fragment"),vy=Symbol.for("react.strict_mode"),fg=Symbol.for("react.profiler"),sS=Symbol.for("react.provider"),iS=Symbol.for("react.context"),yy=Symbol.for("react.forward_ref"),pg=Symbol.for("react.suspense"),mg=Symbol.for("react.suspense_list"),wy=Symbol.for("react.memo"),gi=Symbol.for("react.lazy"),oS=Symbol.for("react.offscreen"),vx=Symbol.iterator;function Ql(e){return e===null||typeof e!="object"?null:(e=vx&&e[vx]||e["@@iterator"],typeof e=="function"?e:null)}var Et=Object.assign,qp;function pc(e){if(qp===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);qp=t&&t[1]||""}return`
`+qp+e}var Yp=!1;function Zp(e,t){if(!e||Yp)return"";Yp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Yp=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?pc(e):""}function P2(e){switch(e.tag){case 5:return pc(e.type);case 16:return pc("Lazy");case 13:return pc("Suspense");case 19:return pc("SuspenseList");case 0:case 2:case 15:return e=Zp(e.type,!1),e;case 11:return e=Zp(e.type.render,!1),e;case 1:return e=Zp(e.type,!0),e;default:return""}}function gg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Na:return"Fragment";case ka:return"Portal";case fg:return"Profiler";case vy:return"StrictMode";case pg:return"Suspense";case mg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case iS:return(e.displayName||"Context")+".Consumer";case sS:return(e._context.displayName||"Context")+".Provider";case yy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wy:return t=e.displayName||null,t!==null?t:gg(e.type)||"Memo";case gi:t=e._payload,e=e._init;try{return gg(e(t))}catch{}}return null}function k2(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gg(t);case 8:return t===vy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function aS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function N2(e){var t=aS(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cd(e){e._valueTracker||(e._valueTracker=N2(e))}function lS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=aS(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ch(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vg(e,t){var n=t.checked;return Et({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function yx(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Vi(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function cS(e,t){t=t.checked,t!=null&&gy(e,"checked",t,!1)}function yg(e,t){cS(e,t);var n=Vi(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?wg(e,t.type,n):t.hasOwnProperty("defaultValue")&&wg(e,t.type,Vi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function wx(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function wg(e,t,n){(t!=="number"||ch(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var mc=Array.isArray;function $a(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Vi(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function xg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(le(91));return Et({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xx(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(le(92));if(mc(n)){if(1<n.length)throw Error(le(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Vi(n)}}function uS(e,t){var n=Vi(t.value),r=Vi(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _x(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _g(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ud,hS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ud=ud||document.createElement("div"),ud.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ud.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var bc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},T2=["Webkit","ms","Moz","O"];Object.keys(bc).forEach(function(e){T2.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bc[t]=bc[e]})});function fS(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||bc.hasOwnProperty(e)&&bc[e]?(""+t).trim():t+"px"}function pS(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=fS(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var j2=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bg(e,t){if(t){if(j2[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(le(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(le(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(le(61))}if(t.style!=null&&typeof t.style!="object")throw Error(le(62))}}function Sg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eg=null;function xy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Cg=null,Ua=null,za=null;function bx(e){if(e=Su(e)){if(typeof Cg!="function")throw Error(le(280));var t=e.stateNode;t&&(t=_f(t),Cg(e.stateNode,e.type,t))}}function mS(e){Ua?za?za.push(e):za=[e]:Ua=e}function gS(){if(Ua){var e=Ua,t=za;if(za=Ua=null,bx(e),t)for(e=0;e<t.length;e++)bx(t[e])}}function vS(e,t){return e(t)}function yS(){}var Kp=!1;function wS(e,t,n){if(Kp)return e(t,n);Kp=!0;try{return vS(e,t,n)}finally{Kp=!1,(Ua!==null||za!==null)&&(yS(),gS())}}function Bc(e,t){var n=e.stateNode;if(n===null)return null;var r=_f(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(le(231,t,typeof n));return n}var Pg=!1;if(Qs)try{var Xl={};Object.defineProperty(Xl,"passive",{get:function(){Pg=!0}}),window.addEventListener("test",Xl,Xl),window.removeEventListener("test",Xl,Xl)}catch{Pg=!1}function R2(e,t,n,r,s,i,a,l,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(f){this.onError(f)}}var Sc=!1,uh=null,dh=!1,kg=null,M2={onError:function(e){Sc=!0,uh=e}};function O2(e,t,n,r,s,i,a,l,c){Sc=!1,uh=null,R2.apply(M2,arguments)}function I2(e,t,n,r,s,i,a,l,c){if(O2.apply(this,arguments),Sc){if(Sc){var h=uh;Sc=!1,uh=null}else throw Error(le(198));dh||(dh=!0,kg=h)}}function ta(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function xS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Sx(e){if(ta(e)!==e)throw Error(le(188))}function A2(e){var t=e.alternate;if(!t){if(t=ta(e),t===null)throw Error(le(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Sx(s),e;if(i===r)return Sx(s),t;i=i.sibling}throw Error(le(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?e:t}function _S(e){return e=A2(e),e!==null?bS(e):null}function bS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bS(e);if(t!==null)return t;e=e.sibling}return null}var SS=ir.unstable_scheduleCallback,Ex=ir.unstable_cancelCallback,L2=ir.unstable_shouldYield,D2=ir.unstable_requestPaint,Mt=ir.unstable_now,F2=ir.unstable_getCurrentPriorityLevel,_y=ir.unstable_ImmediatePriority,ES=ir.unstable_UserBlockingPriority,hh=ir.unstable_NormalPriority,$2=ir.unstable_LowPriority,CS=ir.unstable_IdlePriority,vf=null,xs=null;function U2(e){if(xs&&typeof xs.onCommitFiberRoot=="function")try{xs.onCommitFiberRoot(vf,e,void 0,(e.current.flags&128)===128)}catch{}}var qr=Math.clz32?Math.clz32:W2,z2=Math.log,B2=Math.LN2;function W2(e){return e>>>=0,e===0?32:31-(z2(e)/B2|0)|0}var dd=64,hd=4194304;function gc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fh(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=gc(l):(i&=a,i!==0&&(r=gc(i)))}else a=n&~s,a!==0?r=gc(a):i!==0&&(r=gc(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-qr(t),s=1<<n,r|=e[n],t&=~s;return r}function H2(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V2(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-qr(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=H2(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Ng(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function PS(){var e=dd;return dd<<=1,!(dd&4194240)&&(dd=64),e}function Qp(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _u(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qr(t),e[t]=n}function G2(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-qr(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function by(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-qr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var at=0;function kS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var NS,Sy,TS,jS,RS,Tg=!1,fd=[],Li=null,Di=null,Fi=null,Wc=new Map,Hc=new Map,yi=[],q2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cx(e,t){switch(e){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":Di=null;break;case"mouseover":case"mouseout":Fi=null;break;case"pointerover":case"pointerout":Wc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hc.delete(t.pointerId)}}function Jl(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Su(t),t!==null&&Sy(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Y2(e,t,n,r,s){switch(t){case"focusin":return Li=Jl(Li,e,t,n,r,s),!0;case"dragenter":return Di=Jl(Di,e,t,n,r,s),!0;case"mouseover":return Fi=Jl(Fi,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Wc.set(i,Jl(Wc.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Hc.set(i,Jl(Hc.get(i)||null,e,t,n,r,s)),!0}return!1}function MS(e){var t=Co(e.target);if(t!==null){var n=ta(t);if(n!==null){if(t=n.tag,t===13){if(t=xS(n),t!==null){e.blockedOn=t,RS(e.priority,function(){TS(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=jg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Eg=r,n.target.dispatchEvent(r),Eg=null}else return t=Su(n),t!==null&&Sy(t),e.blockedOn=n,!1;t.shift()}return!0}function Px(e,t,n){Bd(e)&&n.delete(t)}function Z2(){Tg=!1,Li!==null&&Bd(Li)&&(Li=null),Di!==null&&Bd(Di)&&(Di=null),Fi!==null&&Bd(Fi)&&(Fi=null),Wc.forEach(Px),Hc.forEach(Px)}function ec(e,t){e.blockedOn===t&&(e.blockedOn=null,Tg||(Tg=!0,ir.unstable_scheduleCallback(ir.unstable_NormalPriority,Z2)))}function Vc(e){function t(s){return ec(s,e)}if(0<fd.length){ec(fd[0],e);for(var n=1;n<fd.length;n++){var r=fd[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Li!==null&&ec(Li,e),Di!==null&&ec(Di,e),Fi!==null&&ec(Fi,e),Wc.forEach(t),Hc.forEach(t),n=0;n<yi.length;n++)r=yi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<yi.length&&(n=yi[0],n.blockedOn===null);)MS(n),n.blockedOn===null&&yi.shift()}var Ba=ri.ReactCurrentBatchConfig,ph=!0;function K2(e,t,n,r){var s=at,i=Ba.transition;Ba.transition=null;try{at=1,Ey(e,t,n,r)}finally{at=s,Ba.transition=i}}function Q2(e,t,n,r){var s=at,i=Ba.transition;Ba.transition=null;try{at=4,Ey(e,t,n,r)}finally{at=s,Ba.transition=i}}function Ey(e,t,n,r){if(ph){var s=jg(e,t,n,r);if(s===null)am(e,t,r,mh,n),Cx(e,r);else if(Y2(s,e,t,n,r))r.stopPropagation();else if(Cx(e,r),t&4&&-1<q2.indexOf(e)){for(;s!==null;){var i=Su(s);if(i!==null&&NS(i),i=jg(e,t,n,r),i===null&&am(e,t,r,mh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else am(e,t,r,null,n)}}var mh=null;function jg(e,t,n,r){if(mh=null,e=xy(r),e=Co(e),e!==null)if(t=ta(e),t===null)e=null;else if(n=t.tag,n===13){if(e=xS(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return mh=e,null}function OS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(F2()){case _y:return 1;case ES:return 4;case hh:case $2:return 16;case CS:return 536870912;default:return 16}default:return 16}}var Ri=null,Cy=null,Wd=null;function IS(){if(Wd)return Wd;var e,t=Cy,n=t.length,r,s="value"in Ri?Ri.value:Ri.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return Wd=s.slice(e,1<r?1-r:void 0)}function Hd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function pd(){return!0}function kx(){return!1}function lr(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?pd:kx,this.isPropagationStopped=kx,this}return Et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),t}var bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Py=lr(bl),bu=Et({},bl,{view:0,detail:0}),X2=lr(bu),Xp,Jp,tc,yf=Et({},bu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ky,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tc&&(tc&&e.type==="mousemove"?(Xp=e.screenX-tc.screenX,Jp=e.screenY-tc.screenY):Jp=Xp=0,tc=e),Xp)},movementY:function(e){return"movementY"in e?e.movementY:Jp}}),Nx=lr(yf),J2=Et({},yf,{dataTransfer:0}),eO=lr(J2),tO=Et({},bu,{relatedTarget:0}),em=lr(tO),nO=Et({},bl,{animationName:0,elapsedTime:0,pseudoElement:0}),rO=lr(nO),sO=Et({},bl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),iO=lr(sO),oO=Et({},bl,{data:0}),Tx=lr(oO),aO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uO(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=cO[e])?!!t[e]:!1}function ky(){return uO}var dO=Et({},bu,{key:function(e){if(e.key){var t=aO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Hd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ky,charCode:function(e){return e.type==="keypress"?Hd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hO=lr(dO),fO=Et({},yf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jx=lr(fO),pO=Et({},bu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ky}),mO=lr(pO),gO=Et({},bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),vO=lr(gO),yO=Et({},yf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wO=lr(yO),xO=[9,13,27,32],Ny=Qs&&"CompositionEvent"in window,Ec=null;Qs&&"documentMode"in document&&(Ec=document.documentMode);var _O=Qs&&"TextEvent"in window&&!Ec,AS=Qs&&(!Ny||Ec&&8<Ec&&11>=Ec),Rx=" ",Mx=!1;function LS(e,t){switch(e){case"keyup":return xO.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ta=!1;function bO(e,t){switch(e){case"compositionend":return DS(t);case"keypress":return t.which!==32?null:(Mx=!0,Rx);case"textInput":return e=t.data,e===Rx&&Mx?null:e;default:return null}}function SO(e,t){if(Ta)return e==="compositionend"||!Ny&&LS(e,t)?(e=IS(),Wd=Cy=Ri=null,Ta=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return AS&&t.locale!=="ko"?null:t.data;default:return null}}var EO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ox(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!EO[e.type]:t==="textarea"}function FS(e,t,n,r){mS(r),t=gh(t,"onChange"),0<t.length&&(n=new Py("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Cc=null,Gc=null;function CO(e){ZS(e,0)}function wf(e){var t=Ma(e);if(lS(t))return e}function PO(e,t){if(e==="change")return t}var $S=!1;if(Qs){var tm;if(Qs){var nm="oninput"in document;if(!nm){var Ix=document.createElement("div");Ix.setAttribute("oninput","return;"),nm=typeof Ix.oninput=="function"}tm=nm}else tm=!1;$S=tm&&(!document.documentMode||9<document.documentMode)}function Ax(){Cc&&(Cc.detachEvent("onpropertychange",US),Gc=Cc=null)}function US(e){if(e.propertyName==="value"&&wf(Gc)){var t=[];FS(t,Gc,e,xy(e)),wS(CO,t)}}function kO(e,t,n){e==="focusin"?(Ax(),Cc=t,Gc=n,Cc.attachEvent("onpropertychange",US)):e==="focusout"&&Ax()}function NO(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wf(Gc)}function TO(e,t){if(e==="click")return wf(t)}function jO(e,t){if(e==="input"||e==="change")return wf(t)}function RO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zr=typeof Object.is=="function"?Object.is:RO;function qc(e,t){if(Zr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!hg.call(t,s)||!Zr(e[s],t[s]))return!1}return!0}function Lx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dx(e,t){var n=Lx(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lx(n)}}function zS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function BS(){for(var e=window,t=ch();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ch(e.document)}return t}function Ty(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function MO(e){var t=BS(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&zS(n.ownerDocument.documentElement,n)){if(r!==null&&Ty(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Dx(n,i);var a=Dx(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var OO=Qs&&"documentMode"in document&&11>=document.documentMode,ja=null,Rg=null,Pc=null,Mg=!1;function Fx(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mg||ja==null||ja!==ch(r)||(r=ja,"selectionStart"in r&&Ty(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pc&&qc(Pc,r)||(Pc=r,r=gh(Rg,"onSelect"),0<r.length&&(t=new Py("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ja)))}function md(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ra={animationend:md("Animation","AnimationEnd"),animationiteration:md("Animation","AnimationIteration"),animationstart:md("Animation","AnimationStart"),transitionend:md("Transition","TransitionEnd")},rm={},WS={};Qs&&(WS=document.createElement("div").style,"AnimationEvent"in window||(delete Ra.animationend.animation,delete Ra.animationiteration.animation,delete Ra.animationstart.animation),"TransitionEvent"in window||delete Ra.transitionend.transition);function xf(e){if(rm[e])return rm[e];if(!Ra[e])return e;var t=Ra[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in WS)return rm[e]=t[n];return e}var HS=xf("animationend"),VS=xf("animationiteration"),GS=xf("animationstart"),qS=xf("transitionend"),YS=new Map,$x="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xi(e,t){YS.set(e,t),ea(t,[e])}for(var sm=0;sm<$x.length;sm++){var im=$x[sm],IO=im.toLowerCase(),AO=im[0].toUpperCase()+im.slice(1);Xi(IO,"on"+AO)}Xi(HS,"onAnimationEnd");Xi(VS,"onAnimationIteration");Xi(GS,"onAnimationStart");Xi("dblclick","onDoubleClick");Xi("focusin","onFocus");Xi("focusout","onBlur");Xi(qS,"onTransitionEnd");al("onMouseEnter",["mouseout","mouseover"]);al("onMouseLeave",["mouseout","mouseover"]);al("onPointerEnter",["pointerout","pointerover"]);al("onPointerLeave",["pointerout","pointerover"]);ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ea("onBeforeInput",["compositionend","keypress","textInput","paste"]);ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LO=new Set("cancel close invalid load scroll toggle".split(" ").concat(vc));function Ux(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,I2(r,t,void 0,e),e.currentTarget=null}function ZS(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Ux(s,l,h),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,h=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Ux(s,l,h),i=c}}}if(dh)throw e=kg,dh=!1,kg=null,e}function vt(e,t){var n=t[Dg];n===void 0&&(n=t[Dg]=new Set);var r=e+"__bubble";n.has(r)||(KS(t,e,2,!1),n.add(r))}function om(e,t,n){var r=0;t&&(r|=4),KS(n,e,r,t)}var gd="_reactListening"+Math.random().toString(36).slice(2);function Yc(e){if(!e[gd]){e[gd]=!0,rS.forEach(function(n){n!=="selectionchange"&&(LO.has(n)||om(n,!1,e),om(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gd]||(t[gd]=!0,om("selectionchange",!1,t))}}function KS(e,t,n,r){switch(OS(t)){case 1:var s=K2;break;case 4:s=Q2;break;default:s=Ey}n=s.bind(null,t,n,e),s=void 0,!Pg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function am(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Co(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}wS(function(){var h=i,f=xy(n),m=[];e:{var v=YS.get(e);if(v!==void 0){var y=Py,S=e;switch(e){case"keypress":if(Hd(n)===0)break e;case"keydown":case"keyup":y=hO;break;case"focusin":S="focus",y=em;break;case"focusout":S="blur",y=em;break;case"beforeblur":case"afterblur":y=em;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Nx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=eO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=mO;break;case HS:case VS:case GS:y=rO;break;case qS:y=vO;break;case"scroll":y=X2;break;case"wheel":y=wO;break;case"copy":case"cut":case"paste":y=iO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=jx}var x=(t&4)!==0,b=!x&&e==="scroll",E=x?v!==null?v+"Capture":null:v;x=[];for(var _=h,C;_!==null;){C=_;var k=C.stateNode;if(C.tag===5&&k!==null&&(C=k,E!==null&&(k=Bc(_,E),k!=null&&x.push(Zc(_,k,C)))),b)break;_=_.return}0<x.length&&(v=new y(v,S,null,n,f),m.push({event:v,listeners:x}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",v&&n!==Eg&&(S=n.relatedTarget||n.fromElement)&&(Co(S)||S[Xs]))break e;if((y||v)&&(v=f.window===f?f:(v=f.ownerDocument)?v.defaultView||v.parentWindow:window,y?(S=n.relatedTarget||n.toElement,y=h,S=S?Co(S):null,S!==null&&(b=ta(S),S!==b||S.tag!==5&&S.tag!==6)&&(S=null)):(y=null,S=h),y!==S)){if(x=Nx,k="onMouseLeave",E="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(x=jx,k="onPointerLeave",E="onPointerEnter",_="pointer"),b=y==null?v:Ma(y),C=S==null?v:Ma(S),v=new x(k,_+"leave",y,n,f),v.target=b,v.relatedTarget=C,k=null,Co(f)===h&&(x=new x(E,_+"enter",S,n,f),x.target=C,x.relatedTarget=b,k=x),b=k,y&&S)t:{for(x=y,E=S,_=0,C=x;C;C=pa(C))_++;for(C=0,k=E;k;k=pa(k))C++;for(;0<_-C;)x=pa(x),_--;for(;0<C-_;)E=pa(E),C--;for(;_--;){if(x===E||E!==null&&x===E.alternate)break t;x=pa(x),E=pa(E)}x=null}else x=null;y!==null&&zx(m,v,y,x,!1),S!==null&&b!==null&&zx(m,b,S,x,!0)}}e:{if(v=h?Ma(h):window,y=v.nodeName&&v.nodeName.toLowerCase(),y==="select"||y==="input"&&v.type==="file")var T=PO;else if(Ox(v))if($S)T=jO;else{T=NO;var R=kO}else(y=v.nodeName)&&y.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(T=TO);if(T&&(T=T(e,h))){FS(m,T,n,f);break e}R&&R(e,v,h),e==="focusout"&&(R=v._wrapperState)&&R.controlled&&v.type==="number"&&wg(v,"number",v.value)}switch(R=h?Ma(h):window,e){case"focusin":(Ox(R)||R.contentEditable==="true")&&(ja=R,Rg=h,Pc=null);break;case"focusout":Pc=Rg=ja=null;break;case"mousedown":Mg=!0;break;case"contextmenu":case"mouseup":case"dragend":Mg=!1,Fx(m,n,f);break;case"selectionchange":if(OO)break;case"keydown":case"keyup":Fx(m,n,f)}var O;if(Ny)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Ta?LS(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(AS&&n.locale!=="ko"&&(Ta||A!=="onCompositionStart"?A==="onCompositionEnd"&&Ta&&(O=IS()):(Ri=f,Cy="value"in Ri?Ri.value:Ri.textContent,Ta=!0)),R=gh(h,A),0<R.length&&(A=new Tx(A,e,null,n,f),m.push({event:A,listeners:R}),O?A.data=O:(O=DS(n),O!==null&&(A.data=O)))),(O=_O?bO(e,n):SO(e,n))&&(h=gh(h,"onBeforeInput"),0<h.length&&(f=new Tx("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:h}),f.data=O))}ZS(m,t)})}function Zc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function gh(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Bc(e,n),i!=null&&r.unshift(Zc(e,i,s)),i=Bc(e,t),i!=null&&r.push(Zc(e,i,s))),e=e.return}return r}function pa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zx(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,s?(c=Bc(n,i),c!=null&&a.unshift(Zc(n,c,l))):s||(c=Bc(n,i),c!=null&&a.push(Zc(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var DO=/\r\n?/g,FO=/\u0000|\uFFFD/g;function Bx(e){return(typeof e=="string"?e:""+e).replace(DO,`
`).replace(FO,"")}function vd(e,t,n){if(t=Bx(t),Bx(e)!==t&&n)throw Error(le(425))}function vh(){}var Og=null,Ig=null;function Ag(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Lg=typeof setTimeout=="function"?setTimeout:void 0,$O=typeof clearTimeout=="function"?clearTimeout:void 0,Wx=typeof Promise=="function"?Promise:void 0,UO=typeof queueMicrotask=="function"?queueMicrotask:typeof Wx<"u"?function(e){return Wx.resolve(null).then(e).catch(zO)}:Lg;function zO(e){setTimeout(function(){throw e})}function lm(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Vc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Vc(t)}function $i(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Hx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Sl=Math.random().toString(36).slice(2),vs="__reactFiber$"+Sl,Kc="__reactProps$"+Sl,Xs="__reactContainer$"+Sl,Dg="__reactEvents$"+Sl,BO="__reactListeners$"+Sl,WO="__reactHandles$"+Sl;function Co(e){var t=e[vs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xs]||n[vs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Hx(e);e!==null;){if(n=e[vs])return n;e=Hx(e)}return t}e=n,n=e.parentNode}return null}function Su(e){return e=e[vs]||e[Xs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ma(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(le(33))}function _f(e){return e[Kc]||null}var Fg=[],Oa=-1;function Ji(e){return{current:e}}function yt(e){0>Oa||(e.current=Fg[Oa],Fg[Oa]=null,Oa--)}function ft(e,t){Oa++,Fg[Oa]=e.current,e.current=t}var Gi={},mn=Ji(Gi),zn=Ji(!1),zo=Gi;function ll(e,t){var n=e.type.contextTypes;if(!n)return Gi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Bn(e){return e=e.childContextTypes,e!=null}function yh(){yt(zn),yt(mn)}function Vx(e,t,n){if(mn.current!==Gi)throw Error(le(168));ft(mn,t),ft(zn,n)}function QS(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(le(108,k2(e)||"Unknown",s));return Et({},n,r)}function wh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gi,zo=mn.current,ft(mn,e),ft(zn,zn.current),!0}function Gx(e,t,n){var r=e.stateNode;if(!r)throw Error(le(169));n?(e=QS(e,t,zo),r.__reactInternalMemoizedMergedChildContext=e,yt(zn),yt(mn),ft(mn,e)):yt(zn),ft(zn,n)}var zs=null,bf=!1,cm=!1;function XS(e){zs===null?zs=[e]:zs.push(e)}function HO(e){bf=!0,XS(e)}function eo(){if(!cm&&zs!==null){cm=!0;var e=0,t=at;try{var n=zs;for(at=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}zs=null,bf=!1}catch(s){throw zs!==null&&(zs=zs.slice(e+1)),SS(_y,eo),s}finally{at=t,cm=!1}}return null}var Ia=[],Aa=0,xh=null,_h=0,br=[],Sr=0,Bo=null,Hs=1,Vs="";function yo(e,t){Ia[Aa++]=_h,Ia[Aa++]=xh,xh=e,_h=t}function JS(e,t,n){br[Sr++]=Hs,br[Sr++]=Vs,br[Sr++]=Bo,Bo=e;var r=Hs;e=Vs;var s=32-qr(r)-1;r&=~(1<<s),n+=1;var i=32-qr(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Hs=1<<32-qr(t)+s|n<<s|r,Vs=i+e}else Hs=1<<i|n<<s|r,Vs=e}function jy(e){e.return!==null&&(yo(e,1),JS(e,1,0))}function Ry(e){for(;e===xh;)xh=Ia[--Aa],Ia[Aa]=null,_h=Ia[--Aa],Ia[Aa]=null;for(;e===Bo;)Bo=br[--Sr],br[Sr]=null,Vs=br[--Sr],br[Sr]=null,Hs=br[--Sr],br[Sr]=null}var nr=null,tr=null,xt=!1,Hr=null;function eE(e,t){var n=Er(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function qx(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,nr=e,tr=$i(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,nr=e,tr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Bo!==null?{id:Hs,overflow:Vs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Er(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,nr=e,tr=null,!0):!1;default:return!1}}function $g(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ug(e){if(xt){var t=tr;if(t){var n=t;if(!qx(e,t)){if($g(e))throw Error(le(418));t=$i(n.nextSibling);var r=nr;t&&qx(e,t)?eE(r,n):(e.flags=e.flags&-4097|2,xt=!1,nr=e)}}else{if($g(e))throw Error(le(418));e.flags=e.flags&-4097|2,xt=!1,nr=e}}}function Yx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;nr=e}function yd(e){if(e!==nr)return!1;if(!xt)return Yx(e),xt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ag(e.type,e.memoizedProps)),t&&(t=tr)){if($g(e))throw tE(),Error(le(418));for(;t;)eE(e,t),t=$i(t.nextSibling)}if(Yx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(le(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){tr=$i(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}tr=null}}else tr=nr?$i(e.stateNode.nextSibling):null;return!0}function tE(){for(var e=tr;e;)e=$i(e.nextSibling)}function cl(){tr=nr=null,xt=!1}function My(e){Hr===null?Hr=[e]:Hr.push(e)}var VO=ri.ReactCurrentBatchConfig;function nc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,e))}return e}function wd(e,t){throw e=Object.prototype.toString.call(t),Error(le(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zx(e){var t=e._init;return t(e._payload)}function nE(e){function t(E,_){if(e){var C=E.deletions;C===null?(E.deletions=[_],E.flags|=16):C.push(_)}}function n(E,_){if(!e)return null;for(;_!==null;)t(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function s(E,_){return E=Wi(E,_),E.index=0,E.sibling=null,E}function i(E,_,C){return E.index=C,e?(C=E.alternate,C!==null?(C=C.index,C<_?(E.flags|=2,_):C):(E.flags|=2,_)):(E.flags|=1048576,_)}function a(E){return e&&E.alternate===null&&(E.flags|=2),E}function l(E,_,C,k){return _===null||_.tag!==6?(_=gm(C,E.mode,k),_.return=E,_):(_=s(_,C),_.return=E,_)}function c(E,_,C,k){var T=C.type;return T===Na?f(E,_,C.props.children,k,C.key):_!==null&&(_.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===gi&&Zx(T)===_.type)?(k=s(_,C.props),k.ref=nc(E,_,C),k.return=E,k):(k=Qd(C.type,C.key,C.props,null,E.mode,k),k.ref=nc(E,_,C),k.return=E,k)}function h(E,_,C,k){return _===null||_.tag!==4||_.stateNode.containerInfo!==C.containerInfo||_.stateNode.implementation!==C.implementation?(_=vm(C,E.mode,k),_.return=E,_):(_=s(_,C.children||[]),_.return=E,_)}function f(E,_,C,k,T){return _===null||_.tag!==7?(_=$o(C,E.mode,k,T),_.return=E,_):(_=s(_,C),_.return=E,_)}function m(E,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return _=gm(""+_,E.mode,C),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ld:return C=Qd(_.type,_.key,_.props,null,E.mode,C),C.ref=nc(E,null,_),C.return=E,C;case ka:return _=vm(_,E.mode,C),_.return=E,_;case gi:var k=_._init;return m(E,k(_._payload),C)}if(mc(_)||Ql(_))return _=$o(_,E.mode,C,null),_.return=E,_;wd(E,_)}return null}function v(E,_,C,k){var T=_!==null?_.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return T!==null?null:l(E,_,""+C,k);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ld:return C.key===T?c(E,_,C,k):null;case ka:return C.key===T?h(E,_,C,k):null;case gi:return T=C._init,v(E,_,T(C._payload),k)}if(mc(C)||Ql(C))return T!==null?null:f(E,_,C,k,null);wd(E,C)}return null}function y(E,_,C,k,T){if(typeof k=="string"&&k!==""||typeof k=="number")return E=E.get(C)||null,l(_,E,""+k,T);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ld:return E=E.get(k.key===null?C:k.key)||null,c(_,E,k,T);case ka:return E=E.get(k.key===null?C:k.key)||null,h(_,E,k,T);case gi:var R=k._init;return y(E,_,C,R(k._payload),T)}if(mc(k)||Ql(k))return E=E.get(C)||null,f(_,E,k,T,null);wd(_,k)}return null}function S(E,_,C,k){for(var T=null,R=null,O=_,A=_=0,W=null;O!==null&&A<C.length;A++){O.index>A?(W=O,O=null):W=O.sibling;var G=v(E,O,C[A],k);if(G===null){O===null&&(O=W);break}e&&O&&G.alternate===null&&t(E,O),_=i(G,_,A),R===null?T=G:R.sibling=G,R=G,O=W}if(A===C.length)return n(E,O),xt&&yo(E,A),T;if(O===null){for(;A<C.length;A++)O=m(E,C[A],k),O!==null&&(_=i(O,_,A),R===null?T=O:R.sibling=O,R=O);return xt&&yo(E,A),T}for(O=r(E,O);A<C.length;A++)W=y(O,E,A,C[A],k),W!==null&&(e&&W.alternate!==null&&O.delete(W.key===null?A:W.key),_=i(W,_,A),R===null?T=W:R.sibling=W,R=W);return e&&O.forEach(function(X){return t(E,X)}),xt&&yo(E,A),T}function x(E,_,C,k){var T=Ql(C);if(typeof T!="function")throw Error(le(150));if(C=T.call(C),C==null)throw Error(le(151));for(var R=T=null,O=_,A=_=0,W=null,G=C.next();O!==null&&!G.done;A++,G=C.next()){O.index>A?(W=O,O=null):W=O.sibling;var X=v(E,O,G.value,k);if(X===null){O===null&&(O=W);break}e&&O&&X.alternate===null&&t(E,O),_=i(X,_,A),R===null?T=X:R.sibling=X,R=X,O=W}if(G.done)return n(E,O),xt&&yo(E,A),T;if(O===null){for(;!G.done;A++,G=C.next())G=m(E,G.value,k),G!==null&&(_=i(G,_,A),R===null?T=G:R.sibling=G,R=G);return xt&&yo(E,A),T}for(O=r(E,O);!G.done;A++,G=C.next())G=y(O,E,A,G.value,k),G!==null&&(e&&G.alternate!==null&&O.delete(G.key===null?A:G.key),_=i(G,_,A),R===null?T=G:R.sibling=G,R=G);return e&&O.forEach(function(H){return t(E,H)}),xt&&yo(E,A),T}function b(E,_,C,k){if(typeof C=="object"&&C!==null&&C.type===Na&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case ld:e:{for(var T=C.key,R=_;R!==null;){if(R.key===T){if(T=C.type,T===Na){if(R.tag===7){n(E,R.sibling),_=s(R,C.props.children),_.return=E,E=_;break e}}else if(R.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===gi&&Zx(T)===R.type){n(E,R.sibling),_=s(R,C.props),_.ref=nc(E,R,C),_.return=E,E=_;break e}n(E,R);break}else t(E,R);R=R.sibling}C.type===Na?(_=$o(C.props.children,E.mode,k,C.key),_.return=E,E=_):(k=Qd(C.type,C.key,C.props,null,E.mode,k),k.ref=nc(E,_,C),k.return=E,E=k)}return a(E);case ka:e:{for(R=C.key;_!==null;){if(_.key===R)if(_.tag===4&&_.stateNode.containerInfo===C.containerInfo&&_.stateNode.implementation===C.implementation){n(E,_.sibling),_=s(_,C.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else t(E,_);_=_.sibling}_=vm(C,E.mode,k),_.return=E,E=_}return a(E);case gi:return R=C._init,b(E,_,R(C._payload),k)}if(mc(C))return S(E,_,C,k);if(Ql(C))return x(E,_,C,k);wd(E,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,_!==null&&_.tag===6?(n(E,_.sibling),_=s(_,C),_.return=E,E=_):(n(E,_),_=gm(C,E.mode,k),_.return=E,E=_),a(E)):n(E,_)}return b}var ul=nE(!0),rE=nE(!1),bh=Ji(null),Sh=null,La=null,Oy=null;function Iy(){Oy=La=Sh=null}function Ay(e){var t=bh.current;yt(bh),e._currentValue=t}function zg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Wa(e,t){Sh=e,Oy=La=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($n=!0),e.firstContext=null)}function Nr(e){var t=e._currentValue;if(Oy!==e)if(e={context:e,memoizedValue:t,next:null},La===null){if(Sh===null)throw Error(le(308));La=e,Sh.dependencies={lanes:0,firstContext:e}}else La=La.next=e;return t}var Po=null;function Ly(e){Po===null?Po=[e]:Po.push(e)}function sE(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Ly(t)):(n.next=s.next,s.next=n),t.interleaved=n,Js(e,r)}function Js(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var vi=!1;function Dy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ui(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,et&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Js(e,n)}return s=r.interleaved,s===null?(t.next=t,Ly(r)):(t.next=s.next,s.next=t),r.interleaved=t,Js(e,n)}function Vd(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,by(e,n)}}function Kx(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Eh(e,t,n,r){var s=e.updateQueue;vi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,h=c.next;c.next=null,a===null?i=h:a.next=h,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;a=0,f=h=c=null,l=i;do{var v=l.lane,y=l.eventTime;if((r&v)===v){f!==null&&(f=f.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var S=e,x=l;switch(v=t,y=n,x.tag){case 1:if(S=x.payload,typeof S=="function"){m=S.call(y,m,v);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=x.payload,v=typeof S=="function"?S.call(y,m,v):S,v==null)break e;m=Et({},m,v);break e;case 2:vi=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else y={eventTime:y,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=y,c=m):f=f.next=y,a|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(f===null&&(c=m),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Ho|=a,e.lanes=a,e.memoizedState=m}}function Qx(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(le(191,s));s.call(r)}}}var Eu={},_s=Ji(Eu),Qc=Ji(Eu),Xc=Ji(Eu);function ko(e){if(e===Eu)throw Error(le(174));return e}function Fy(e,t){switch(ft(Xc,t),ft(Qc,e),ft(_s,Eu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_g(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_g(t,e)}yt(_s),ft(_s,t)}function dl(){yt(_s),yt(Qc),yt(Xc)}function oE(e){ko(Xc.current);var t=ko(_s.current),n=_g(t,e.type);t!==n&&(ft(Qc,e),ft(_s,n))}function $y(e){Qc.current===e&&(yt(_s),yt(Qc))}var bt=Ji(0);function Ch(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var um=[];function Uy(){for(var e=0;e<um.length;e++)um[e]._workInProgressVersionPrimary=null;um.length=0}var Gd=ri.ReactCurrentDispatcher,dm=ri.ReactCurrentBatchConfig,Wo=0,St=null,Bt=null,Kt=null,Ph=!1,kc=!1,Jc=0,GO=0;function un(){throw Error(le(321))}function zy(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zr(e[n],t[n]))return!1;return!0}function By(e,t,n,r,s,i){if(Wo=i,St=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Gd.current=e===null||e.memoizedState===null?KO:QO,e=n(r,s),kc){i=0;do{if(kc=!1,Jc=0,25<=i)throw Error(le(301));i+=1,Kt=Bt=null,t.updateQueue=null,Gd.current=XO,e=n(r,s)}while(kc)}if(Gd.current=kh,t=Bt!==null&&Bt.next!==null,Wo=0,Kt=Bt=St=null,Ph=!1,t)throw Error(le(300));return e}function Wy(){var e=Jc!==0;return Jc=0,e}function hs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?St.memoizedState=Kt=e:Kt=Kt.next=e,Kt}function Tr(){if(Bt===null){var e=St.alternate;e=e!==null?e.memoizedState:null}else e=Bt.next;var t=Kt===null?St.memoizedState:Kt.next;if(t!==null)Kt=t,Bt=e;else{if(e===null)throw Error(le(310));Bt=e,e={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Kt===null?St.memoizedState=Kt=e:Kt=Kt.next=e}return Kt}function eu(e,t){return typeof t=="function"?t(e):t}function hm(e){var t=Tr(),n=t.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=e;var r=Bt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,h=i;do{var f=h.lane;if((Wo&f)===f)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var m={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,St.lanes|=f,Ho|=f}h=h.next}while(h!==null&&h!==i);c===null?a=r:c.next=l,Zr(r,t.memoizedState)||($n=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,St.lanes|=i,Ho|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function fm(e){var t=Tr(),n=t.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Zr(i,t.memoizedState)||($n=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function aE(){}function lE(e,t){var n=St,r=Tr(),s=t(),i=!Zr(r.memoizedState,s);if(i&&(r.memoizedState=s,$n=!0),r=r.queue,Hy(dE.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Kt!==null&&Kt.memoizedState.tag&1){if(n.flags|=2048,tu(9,uE.bind(null,n,r,s,t),void 0,null),Qt===null)throw Error(le(349));Wo&30||cE(n,t,s)}return s}function cE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=St.updateQueue,t===null?(t={lastEffect:null,stores:null},St.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function uE(e,t,n,r){t.value=n,t.getSnapshot=r,hE(t)&&fE(e)}function dE(e,t,n){return n(function(){hE(t)&&fE(e)})}function hE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zr(e,n)}catch{return!0}}function fE(e){var t=Js(e,1);t!==null&&Yr(t,e,1,-1)}function Xx(e){var t=hs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eu,lastRenderedState:e},t.queue=e,e=e.dispatch=ZO.bind(null,St,e),[t.memoizedState,e]}function tu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=St.updateQueue,t===null?(t={lastEffect:null,stores:null},St.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function pE(){return Tr().memoizedState}function qd(e,t,n,r){var s=hs();St.flags|=e,s.memoizedState=tu(1|t,n,void 0,r===void 0?null:r)}function Sf(e,t,n,r){var s=Tr();r=r===void 0?null:r;var i=void 0;if(Bt!==null){var a=Bt.memoizedState;if(i=a.destroy,r!==null&&zy(r,a.deps)){s.memoizedState=tu(t,n,i,r);return}}St.flags|=e,s.memoizedState=tu(1|t,n,i,r)}function Jx(e,t){return qd(8390656,8,e,t)}function Hy(e,t){return Sf(2048,8,e,t)}function mE(e,t){return Sf(4,2,e,t)}function gE(e,t){return Sf(4,4,e,t)}function vE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yE(e,t,n){return n=n!=null?n.concat([e]):null,Sf(4,4,vE.bind(null,t,e),n)}function Vy(){}function wE(e,t){var n=Tr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zy(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xE(e,t){var n=Tr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zy(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function _E(e,t,n){return Wo&21?(Zr(n,t)||(n=PS(),St.lanes|=n,Ho|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$n=!0),e.memoizedState=n)}function qO(e,t){var n=at;at=n!==0&&4>n?n:4,e(!0);var r=dm.transition;dm.transition={};try{e(!1),t()}finally{at=n,dm.transition=r}}function bE(){return Tr().memoizedState}function YO(e,t,n){var r=Bi(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},SE(e))EE(t,n);else if(n=sE(e,t,n,r),n!==null){var s=En();Yr(n,e,r,s),CE(n,t,r)}}function ZO(e,t,n){var r=Bi(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(SE(e))EE(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Zr(l,a)){var c=t.interleaved;c===null?(s.next=s,Ly(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=sE(e,t,s,r),n!==null&&(s=En(),Yr(n,e,r,s),CE(n,t,r))}}function SE(e){var t=e.alternate;return e===St||t!==null&&t===St}function EE(e,t){kc=Ph=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function CE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,by(e,n)}}var kh={readContext:Nr,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useInsertionEffect:un,useLayoutEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useMutableSource:un,useSyncExternalStore:un,useId:un,unstable_isNewReconciler:!1},KO={readContext:Nr,useCallback:function(e,t){return hs().memoizedState=[e,t===void 0?null:t],e},useContext:Nr,useEffect:Jx,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,qd(4194308,4,vE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qd(4194308,4,e,t)},useInsertionEffect:function(e,t){return qd(4,2,e,t)},useMemo:function(e,t){var n=hs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=hs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=YO.bind(null,St,e),[r.memoizedState,e]},useRef:function(e){var t=hs();return e={current:e},t.memoizedState=e},useState:Xx,useDebugValue:Vy,useDeferredValue:function(e){return hs().memoizedState=e},useTransition:function(){var e=Xx(!1),t=e[0];return e=qO.bind(null,e[1]),hs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=St,s=hs();if(xt){if(n===void 0)throw Error(le(407));n=n()}else{if(n=t(),Qt===null)throw Error(le(349));Wo&30||cE(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Jx(dE.bind(null,r,i,e),[e]),r.flags|=2048,tu(9,uE.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=hs(),t=Qt.identifierPrefix;if(xt){var n=Vs,r=Hs;n=(r&~(1<<32-qr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Jc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=GO++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},QO={readContext:Nr,useCallback:wE,useContext:Nr,useEffect:Hy,useImperativeHandle:yE,useInsertionEffect:mE,useLayoutEffect:gE,useMemo:xE,useReducer:hm,useRef:pE,useState:function(){return hm(eu)},useDebugValue:Vy,useDeferredValue:function(e){var t=Tr();return _E(t,Bt.memoizedState,e)},useTransition:function(){var e=hm(eu)[0],t=Tr().memoizedState;return[e,t]},useMutableSource:aE,useSyncExternalStore:lE,useId:bE,unstable_isNewReconciler:!1},XO={readContext:Nr,useCallback:wE,useContext:Nr,useEffect:Hy,useImperativeHandle:yE,useInsertionEffect:mE,useLayoutEffect:gE,useMemo:xE,useReducer:fm,useRef:pE,useState:function(){return fm(eu)},useDebugValue:Vy,useDeferredValue:function(e){var t=Tr();return Bt===null?t.memoizedState=e:_E(t,Bt.memoizedState,e)},useTransition:function(){var e=fm(eu)[0],t=Tr().memoizedState;return[e,t]},useMutableSource:aE,useSyncExternalStore:lE,useId:bE,unstable_isNewReconciler:!1};function $r(e,t){if(e&&e.defaultProps){t=Et({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Bg(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Et({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ef={isMounted:function(e){return(e=e._reactInternals)?ta(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=En(),s=Bi(e),i=Zs(r,s);i.payload=t,n!=null&&(i.callback=n),t=Ui(e,i,s),t!==null&&(Yr(t,e,s,r),Vd(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=En(),s=Bi(e),i=Zs(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ui(e,i,s),t!==null&&(Yr(t,e,s,r),Vd(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=En(),r=Bi(e),s=Zs(n,r);s.tag=2,t!=null&&(s.callback=t),t=Ui(e,s,r),t!==null&&(Yr(t,e,r,n),Vd(t,e,r))}};function e_(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!qc(n,r)||!qc(s,i):!0}function PE(e,t,n){var r=!1,s=Gi,i=t.contextType;return typeof i=="object"&&i!==null?i=Nr(i):(s=Bn(t)?zo:mn.current,r=t.contextTypes,i=(r=r!=null)?ll(e,s):Gi),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ef,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function t_(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ef.enqueueReplaceState(t,t.state,null)}function Wg(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Dy(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Nr(i):(i=Bn(t)?zo:mn.current,s.context=ll(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Bg(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ef.enqueueReplaceState(s,s.state,null),Eh(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function hl(e,t){try{var n="",r=t;do n+=P2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function pm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Hg(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var JO=typeof WeakMap=="function"?WeakMap:Map;function kE(e,t,n){n=Zs(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Th||(Th=!0,ev=r),Hg(e,t)},n}function NE(e,t,n){n=Zs(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Hg(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Hg(e,t),typeof r!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function n_(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new JO;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=fI.bind(null,e,t,n),t.then(e,e))}function r_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function s_(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Zs(-1,1),t.tag=2,Ui(n,t,1))),n.lanes|=1),e)}var eI=ri.ReactCurrentOwner,$n=!1;function _n(e,t,n,r){t.child=e===null?rE(t,null,n,r):ul(t,e.child,n,r)}function i_(e,t,n,r,s){n=n.render;var i=t.ref;return Wa(t,s),r=By(e,t,n,r,i,s),n=Wy(),e!==null&&!$n?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ei(e,t,s)):(xt&&n&&jy(t),t.flags|=1,_n(e,t,r,s),t.child)}function o_(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Jy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,TE(e,t,i,r,s)):(e=Qd(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:qc,n(a,r)&&e.ref===t.ref)return ei(e,t,s)}return t.flags|=1,e=Wi(i,r),e.ref=t.ref,e.return=t,t.child=e}function TE(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(qc(i,r)&&e.ref===t.ref)if($n=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&($n=!0);else return t.lanes=e.lanes,ei(e,t,s)}return Vg(e,t,n,r,s)}function jE(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(Fa,Jn),Jn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ft(Fa,Jn),Jn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ft(Fa,Jn),Jn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ft(Fa,Jn),Jn|=r;return _n(e,t,s,n),t.child}function RE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Vg(e,t,n,r,s){var i=Bn(n)?zo:mn.current;return i=ll(t,i),Wa(t,s),n=By(e,t,n,r,i,s),r=Wy(),e!==null&&!$n?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ei(e,t,s)):(xt&&r&&jy(t),t.flags|=1,_n(e,t,n,s),t.child)}function a_(e,t,n,r,s){if(Bn(n)){var i=!0;wh(t)}else i=!1;if(Wa(t,s),t.stateNode===null)Yd(e,t),PE(t,n,r),Wg(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Nr(h):(h=Bn(n)?zo:mn.current,h=ll(t,h));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==h)&&t_(t,a,r,h),vi=!1;var v=t.memoizedState;a.state=v,Eh(t,r,a,s),c=t.memoizedState,l!==r||v!==c||zn.current||vi?(typeof f=="function"&&(Bg(t,n,f,r),c=t.memoizedState),(l=vi||e_(t,n,l,r,v,c,h))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,iE(e,t),l=t.memoizedProps,h=t.type===t.elementType?l:$r(t.type,l),a.props=h,m=t.pendingProps,v=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Nr(c):(c=Bn(n)?zo:mn.current,c=ll(t,c));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||v!==c)&&t_(t,a,r,c),vi=!1,v=t.memoizedState,a.state=v,Eh(t,r,a,s);var S=t.memoizedState;l!==m||v!==S||zn.current||vi?(typeof y=="function"&&(Bg(t,n,y,r),S=t.memoizedState),(h=vi||e_(t,n,h,r,v,S,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,S,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,S,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=S),a.props=r,a.state=S,a.context=c,r=h):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return Gg(e,t,n,r,i,s)}function Gg(e,t,n,r,s,i){RE(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Gx(t,n,!1),ei(e,t,i);r=t.stateNode,eI.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ul(t,e.child,null,i),t.child=ul(t,null,l,i)):_n(e,t,l,i),t.memoizedState=r.state,s&&Gx(t,n,!0),t.child}function ME(e){var t=e.stateNode;t.pendingContext?Vx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vx(e,t.context,!1),Fy(e,t.containerInfo)}function l_(e,t,n,r,s){return cl(),My(s),t.flags|=256,_n(e,t,n,r),t.child}var qg={dehydrated:null,treeContext:null,retryLane:0};function Yg(e){return{baseLanes:e,cachePool:null,transitions:null}}function OE(e,t,n){var r=t.pendingProps,s=bt.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ft(bt,s&1),e===null)return Ug(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=kf(a,r,0,null),e=$o(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Yg(n),t.memoizedState=qg,e):Gy(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return tI(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Wi(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Wi(l,i):(i=$o(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Yg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=qg,r}return i=e.child,e=i.sibling,r=Wi(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Gy(e,t){return t=kf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xd(e,t,n,r){return r!==null&&My(r),ul(t,e.child,null,n),e=Gy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tI(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=pm(Error(le(422))),xd(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=kf({mode:"visible",children:r.children},s,0,null),i=$o(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ul(t,e.child,null,a),t.child.memoizedState=Yg(a),t.memoizedState=qg,i);if(!(t.mode&1))return xd(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(le(419)),r=pm(i,r,void 0),xd(e,t,a,r)}if(l=(a&e.childLanes)!==0,$n||l){if(r=Qt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Js(e,s),Yr(r,e,s,-1))}return Xy(),r=pm(Error(le(421))),xd(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=pI.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,tr=$i(s.nextSibling),nr=t,xt=!0,Hr=null,e!==null&&(br[Sr++]=Hs,br[Sr++]=Vs,br[Sr++]=Bo,Hs=e.id,Vs=e.overflow,Bo=t),t=Gy(t,r.children),t.flags|=4096,t)}function c_(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),zg(e.return,t,n)}function mm(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function IE(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(_n(e,t,r.children,n),r=bt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&c_(e,n,t);else if(e.tag===19)c_(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ft(bt,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ch(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),mm(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ch(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}mm(t,!0,n,null,i);break;case"together":mm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ei(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ho|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(le(153));if(t.child!==null){for(e=t.child,n=Wi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Wi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function nI(e,t,n){switch(t.tag){case 3:ME(t),cl();break;case 5:oE(t);break;case 1:Bn(t.type)&&wh(t);break;case 4:Fy(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ft(bh,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ft(bt,bt.current&1),t.flags|=128,null):n&t.child.childLanes?OE(e,t,n):(ft(bt,bt.current&1),e=ei(e,t,n),e!==null?e.sibling:null);ft(bt,bt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return IE(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ft(bt,bt.current),r)break;return null;case 22:case 23:return t.lanes=0,jE(e,t,n)}return ei(e,t,n)}var AE,Zg,LE,DE;AE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zg=function(){};LE=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ko(_s.current);var i=null;switch(n){case"input":s=vg(e,s),r=vg(e,r),i=[];break;case"select":s=Et({},s,{value:void 0}),r=Et({},r,{value:void 0}),i=[];break;case"textarea":s=xg(e,s),r=xg(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=vh)}bg(n,r);var a;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Uc.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Uc.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&vt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(t.updateQueue=h)&&(t.flags|=4)}};DE=function(e,t,n,r){n!==r&&(t.flags|=4)};function rc(e,t){if(!xt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rI(e,t,n){var r=t.pendingProps;switch(Ry(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(t),null;case 1:return Bn(t.type)&&yh(),dn(t),null;case 3:return r=t.stateNode,dl(),yt(zn),yt(mn),Uy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(yd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Hr!==null&&(rv(Hr),Hr=null))),Zg(e,t),dn(t),null;case 5:$y(t);var s=ko(Xc.current);if(n=t.type,e!==null&&t.stateNode!=null)LE(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(le(166));return dn(t),null}if(e=ko(_s.current),yd(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[vs]=t,r[Kc]=i,e=(t.mode&1)!==0,n){case"dialog":vt("cancel",r),vt("close",r);break;case"iframe":case"object":case"embed":vt("load",r);break;case"video":case"audio":for(s=0;s<vc.length;s++)vt(vc[s],r);break;case"source":vt("error",r);break;case"img":case"image":case"link":vt("error",r),vt("load",r);break;case"details":vt("toggle",r);break;case"input":yx(r,i),vt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},vt("invalid",r);break;case"textarea":xx(r,i),vt("invalid",r)}bg(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&vd(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&vd(r.textContent,l,e),s=["children",""+l]):Uc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&vt("scroll",r)}switch(n){case"input":cd(r),wx(r,i,!0);break;case"textarea":cd(r),_x(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=vh)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dS(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[vs]=t,e[Kc]=r,AE(e,t,!1,!1),t.stateNode=e;e:{switch(a=Sg(n,r),n){case"dialog":vt("cancel",e),vt("close",e),s=r;break;case"iframe":case"object":case"embed":vt("load",e),s=r;break;case"video":case"audio":for(s=0;s<vc.length;s++)vt(vc[s],e);s=r;break;case"source":vt("error",e),s=r;break;case"img":case"image":case"link":vt("error",e),vt("load",e),s=r;break;case"details":vt("toggle",e),s=r;break;case"input":yx(e,r),s=vg(e,r),vt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Et({},r,{value:void 0}),vt("invalid",e);break;case"textarea":xx(e,r),s=xg(e,r),vt("invalid",e);break;default:s=r}bg(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?pS(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&hS(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&zc(e,c):typeof c=="number"&&zc(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Uc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&vt("scroll",e):c!=null&&gy(e,i,c,a))}switch(n){case"input":cd(e),wx(e,r,!1);break;case"textarea":cd(e),_x(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Vi(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?$a(e,!!r.multiple,i,!1):r.defaultValue!=null&&$a(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=vh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dn(t),null;case 6:if(e&&t.stateNode!=null)DE(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(le(166));if(n=ko(Xc.current),ko(_s.current),yd(t)){if(r=t.stateNode,n=t.memoizedProps,r[vs]=t,(i=r.nodeValue!==n)&&(e=nr,e!==null))switch(e.tag){case 3:vd(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vd(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vs]=t,t.stateNode=r}return dn(t),null;case 13:if(yt(bt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xt&&tr!==null&&t.mode&1&&!(t.flags&128))tE(),cl(),t.flags|=98560,i=!1;else if(i=yd(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(le(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(le(317));i[vs]=t}else cl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dn(t),i=!1}else Hr!==null&&(rv(Hr),Hr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||bt.current&1?Ht===0&&(Ht=3):Xy())),t.updateQueue!==null&&(t.flags|=4),dn(t),null);case 4:return dl(),Zg(e,t),e===null&&Yc(t.stateNode.containerInfo),dn(t),null;case 10:return Ay(t.type._context),dn(t),null;case 17:return Bn(t.type)&&yh(),dn(t),null;case 19:if(yt(bt),i=t.memoizedState,i===null)return dn(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)rc(i,!1);else{if(Ht!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Ch(e),a!==null){for(t.flags|=128,rc(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ft(bt,bt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Mt()>fl&&(t.flags|=128,r=!0,rc(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ch(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),rc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!xt)return dn(t),null}else 2*Mt()-i.renderingStartTime>fl&&n!==1073741824&&(t.flags|=128,r=!0,rc(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Mt(),t.sibling=null,n=bt.current,ft(bt,r?n&1|2:n&1),t):(dn(t),null);case 22:case 23:return Qy(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Jn&1073741824&&(dn(t),t.subtreeFlags&6&&(t.flags|=8192)):dn(t),null;case 24:return null;case 25:return null}throw Error(le(156,t.tag))}function sI(e,t){switch(Ry(t),t.tag){case 1:return Bn(t.type)&&yh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return dl(),yt(zn),yt(mn),Uy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $y(t),null;case 13:if(yt(bt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(le(340));cl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return yt(bt),null;case 4:return dl(),null;case 10:return Ay(t.type._context),null;case 22:case 23:return Qy(),null;case 24:return null;default:return null}}var _d=!1,fn=!1,iI=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Da(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Nt(e,t,r)}else n.current=null}function Kg(e,t,n){try{n()}catch(r){Nt(e,t,r)}}var u_=!1;function oI(e,t){if(Og=ph,e=BS(),Ty(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,h=0,f=0,m=e,v=null;t:for(;;){for(var y;m!==n||s!==0&&m.nodeType!==3||(l=a+s),m!==i||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(y=m.firstChild)!==null;)v=m,m=y;for(;;){if(m===e)break t;if(v===n&&++h===s&&(l=a),v===i&&++f===r&&(c=a),(y=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ig={focusedElem:e,selectionRange:n},ph=!1,xe=t;xe!==null;)if(t=xe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xe=e;else for(;xe!==null;){t=xe;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var x=S.memoizedProps,b=S.memoizedState,E=t.stateNode,_=E.getSnapshotBeforeUpdate(t.elementType===t.type?x:$r(t.type,x),b);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(k){Nt(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,xe=e;break}xe=t.return}return S=u_,u_=!1,S}function Nc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Kg(t,n,i)}s=s.next}while(s!==r)}}function Cf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Qg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function FE(e){var t=e.alternate;t!==null&&(e.alternate=null,FE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vs],delete t[Kc],delete t[Dg],delete t[BO],delete t[WO])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $E(e){return e.tag===5||e.tag===3||e.tag===4}function d_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$E(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=vh));else if(r!==4&&(e=e.child,e!==null))for(Xg(e,t,n),e=e.sibling;e!==null;)Xg(e,t,n),e=e.sibling}function Jg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Jg(e,t,n),e=e.sibling;e!==null;)Jg(e,t,n),e=e.sibling}var nn=null,Br=!1;function li(e,t,n){for(n=n.child;n!==null;)UE(e,t,n),n=n.sibling}function UE(e,t,n){if(xs&&typeof xs.onCommitFiberUnmount=="function")try{xs.onCommitFiberUnmount(vf,n)}catch{}switch(n.tag){case 5:fn||Da(n,t);case 6:var r=nn,s=Br;nn=null,li(e,t,n),nn=r,Br=s,nn!==null&&(Br?(e=nn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):nn.removeChild(n.stateNode));break;case 18:nn!==null&&(Br?(e=nn,n=n.stateNode,e.nodeType===8?lm(e.parentNode,n):e.nodeType===1&&lm(e,n),Vc(e)):lm(nn,n.stateNode));break;case 4:r=nn,s=Br,nn=n.stateNode.containerInfo,Br=!0,li(e,t,n),nn=r,Br=s;break;case 0:case 11:case 14:case 15:if(!fn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Kg(n,t,a),s=s.next}while(s!==r)}li(e,t,n);break;case 1:if(!fn&&(Da(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Nt(n,t,l)}li(e,t,n);break;case 21:li(e,t,n);break;case 22:n.mode&1?(fn=(r=fn)||n.memoizedState!==null,li(e,t,n),fn=r):li(e,t,n);break;default:li(e,t,n)}}function h_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new iI),t.forEach(function(r){var s=mI.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ar(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:nn=l.stateNode,Br=!1;break e;case 3:nn=l.stateNode.containerInfo,Br=!0;break e;case 4:nn=l.stateNode.containerInfo,Br=!0;break e}l=l.return}if(nn===null)throw Error(le(160));UE(i,a,s),nn=null,Br=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){Nt(s,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zE(t,e),t=t.sibling}function zE(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ar(t,e),us(e),r&4){try{Nc(3,e,e.return),Cf(3,e)}catch(x){Nt(e,e.return,x)}try{Nc(5,e,e.return)}catch(x){Nt(e,e.return,x)}}break;case 1:Ar(t,e),us(e),r&512&&n!==null&&Da(n,n.return);break;case 5:if(Ar(t,e),us(e),r&512&&n!==null&&Da(n,n.return),e.flags&32){var s=e.stateNode;try{zc(s,"")}catch(x){Nt(e,e.return,x)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&cS(s,i),Sg(l,a);var h=Sg(l,i);for(a=0;a<c.length;a+=2){var f=c[a],m=c[a+1];f==="style"?pS(s,m):f==="dangerouslySetInnerHTML"?hS(s,m):f==="children"?zc(s,m):gy(s,f,m,h)}switch(l){case"input":yg(s,i);break;case"textarea":uS(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?$a(s,!!i.multiple,y,!1):v!==!!i.multiple&&(i.defaultValue!=null?$a(s,!!i.multiple,i.defaultValue,!0):$a(s,!!i.multiple,i.multiple?[]:"",!1))}s[Kc]=i}catch(x){Nt(e,e.return,x)}}break;case 6:if(Ar(t,e),us(e),r&4){if(e.stateNode===null)throw Error(le(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(x){Nt(e,e.return,x)}}break;case 3:if(Ar(t,e),us(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vc(t.containerInfo)}catch(x){Nt(e,e.return,x)}break;case 4:Ar(t,e),us(e);break;case 13:Ar(t,e),us(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Zy=Mt())),r&4&&h_(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(fn=(h=fn)||f,Ar(t,e),fn=h):Ar(t,e),us(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!f&&e.mode&1)for(xe=e,f=e.child;f!==null;){for(m=xe=f;xe!==null;){switch(v=xe,y=v.child,v.tag){case 0:case 11:case 14:case 15:Nc(4,v,v.return);break;case 1:Da(v,v.return);var S=v.stateNode;if(typeof S.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(x){Nt(r,n,x)}}break;case 5:Da(v,v.return);break;case 22:if(v.memoizedState!==null){p_(m);continue}}y!==null?(y.return=v,xe=y):p_(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=fS("display",a))}catch(x){Nt(e,e.return,x)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(x){Nt(e,e.return,x)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ar(t,e),us(e),r&4&&h_(e);break;case 21:break;default:Ar(t,e),us(e)}}function us(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if($E(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(zc(s,""),r.flags&=-33);var i=d_(e);Jg(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=d_(e);Xg(e,l,a);break;default:throw Error(le(161))}}catch(c){Nt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function aI(e,t,n){xe=e,BE(e)}function BE(e,t,n){for(var r=(e.mode&1)!==0;xe!==null;){var s=xe,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||_d;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||fn;l=_d;var h=fn;if(_d=a,(fn=c)&&!h)for(xe=s;xe!==null;)a=xe,c=a.child,a.tag===22&&a.memoizedState!==null?m_(s):c!==null?(c.return=a,xe=c):m_(s);for(;i!==null;)xe=i,BE(i),i=i.sibling;xe=s,_d=l,fn=h}f_(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,xe=i):f_(e)}}function f_(e){for(;xe!==null;){var t=xe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:fn||Cf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!fn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:$r(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Qx(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Qx(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Vc(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}fn||t.flags&512&&Qg(t)}catch(v){Nt(t,t.return,v)}}if(t===e){xe=null;break}if(n=t.sibling,n!==null){n.return=t.return,xe=n;break}xe=t.return}}function p_(e){for(;xe!==null;){var t=xe;if(t===e){xe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xe=n;break}xe=t.return}}function m_(e){for(;xe!==null;){var t=xe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Cf(4,t)}catch(c){Nt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Nt(t,s,c)}}var i=t.return;try{Qg(t)}catch(c){Nt(t,i,c)}break;case 5:var a=t.return;try{Qg(t)}catch(c){Nt(t,a,c)}}}catch(c){Nt(t,t.return,c)}if(t===e){xe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,xe=l;break}xe=t.return}}var lI=Math.ceil,Nh=ri.ReactCurrentDispatcher,qy=ri.ReactCurrentOwner,Pr=ri.ReactCurrentBatchConfig,et=0,Qt=null,Ft=null,rn=0,Jn=0,Fa=Ji(0),Ht=0,nu=null,Ho=0,Pf=0,Yy=0,Tc=null,Dn=null,Zy=0,fl=1/0,$s=null,Th=!1,ev=null,zi=null,bd=!1,Mi=null,jh=0,jc=0,tv=null,Zd=-1,Kd=0;function En(){return et&6?Mt():Zd!==-1?Zd:Zd=Mt()}function Bi(e){return e.mode&1?et&2&&rn!==0?rn&-rn:VO.transition!==null?(Kd===0&&(Kd=PS()),Kd):(e=at,e!==0||(e=window.event,e=e===void 0?16:OS(e.type)),e):1}function Yr(e,t,n,r){if(50<jc)throw jc=0,tv=null,Error(le(185));_u(e,n,r),(!(et&2)||e!==Qt)&&(e===Qt&&(!(et&2)&&(Pf|=n),Ht===4&&wi(e,rn)),Wn(e,r),n===1&&et===0&&!(t.mode&1)&&(fl=Mt()+500,bf&&eo()))}function Wn(e,t){var n=e.callbackNode;V2(e,t);var r=fh(e,e===Qt?rn:0);if(r===0)n!==null&&Ex(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ex(n),t===1)e.tag===0?HO(g_.bind(null,e)):XS(g_.bind(null,e)),UO(function(){!(et&6)&&eo()}),n=null;else{switch(kS(r)){case 1:n=_y;break;case 4:n=ES;break;case 16:n=hh;break;case 536870912:n=CS;break;default:n=hh}n=KE(n,WE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function WE(e,t){if(Zd=-1,Kd=0,et&6)throw Error(le(327));var n=e.callbackNode;if(Ha()&&e.callbackNode!==n)return null;var r=fh(e,e===Qt?rn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Rh(e,r);else{t=r;var s=et;et|=2;var i=VE();(Qt!==e||rn!==t)&&($s=null,fl=Mt()+500,Fo(e,t));do try{dI();break}catch(l){HE(e,l)}while(!0);Iy(),Nh.current=i,et=s,Ft!==null?t=0:(Qt=null,rn=0,t=Ht)}if(t!==0){if(t===2&&(s=Ng(e),s!==0&&(r=s,t=nv(e,s))),t===1)throw n=nu,Fo(e,0),wi(e,r),Wn(e,Mt()),n;if(t===6)wi(e,r);else{if(s=e.current.alternate,!(r&30)&&!cI(s)&&(t=Rh(e,r),t===2&&(i=Ng(e),i!==0&&(r=i,t=nv(e,i))),t===1))throw n=nu,Fo(e,0),wi(e,r),Wn(e,Mt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(le(345));case 2:wo(e,Dn,$s);break;case 3:if(wi(e,r),(r&130023424)===r&&(t=Zy+500-Mt(),10<t)){if(fh(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){En(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Lg(wo.bind(null,e,Dn,$s),t);break}wo(e,Dn,$s);break;case 4:if(wi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-qr(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=Mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lI(r/1960))-r,10<r){e.timeoutHandle=Lg(wo.bind(null,e,Dn,$s),r);break}wo(e,Dn,$s);break;case 5:wo(e,Dn,$s);break;default:throw Error(le(329))}}}return Wn(e,Mt()),e.callbackNode===n?WE.bind(null,e):null}function nv(e,t){var n=Tc;return e.current.memoizedState.isDehydrated&&(Fo(e,t).flags|=256),e=Rh(e,t),e!==2&&(t=Dn,Dn=n,t!==null&&rv(t)),e}function rv(e){Dn===null?Dn=e:Dn.push.apply(Dn,e)}function cI(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Zr(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wi(e,t){for(t&=~Yy,t&=~Pf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qr(t),r=1<<n;e[n]=-1,t&=~r}}function g_(e){if(et&6)throw Error(le(327));Ha();var t=fh(e,0);if(!(t&1))return Wn(e,Mt()),null;var n=Rh(e,t);if(e.tag!==0&&n===2){var r=Ng(e);r!==0&&(t=r,n=nv(e,r))}if(n===1)throw n=nu,Fo(e,0),wi(e,t),Wn(e,Mt()),n;if(n===6)throw Error(le(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wo(e,Dn,$s),Wn(e,Mt()),null}function Ky(e,t){var n=et;et|=1;try{return e(t)}finally{et=n,et===0&&(fl=Mt()+500,bf&&eo())}}function Vo(e){Mi!==null&&Mi.tag===0&&!(et&6)&&Ha();var t=et;et|=1;var n=Pr.transition,r=at;try{if(Pr.transition=null,at=1,e)return e()}finally{at=r,Pr.transition=n,et=t,!(et&6)&&eo()}}function Qy(){Jn=Fa.current,yt(Fa)}function Fo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,$O(n)),Ft!==null)for(n=Ft.return;n!==null;){var r=n;switch(Ry(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yh();break;case 3:dl(),yt(zn),yt(mn),Uy();break;case 5:$y(r);break;case 4:dl();break;case 13:yt(bt);break;case 19:yt(bt);break;case 10:Ay(r.type._context);break;case 22:case 23:Qy()}n=n.return}if(Qt=e,Ft=e=Wi(e.current,null),rn=Jn=t,Ht=0,nu=null,Yy=Pf=Ho=0,Dn=Tc=null,Po!==null){for(t=0;t<Po.length;t++)if(n=Po[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Po=null}return e}function HE(e,t){do{var n=Ft;try{if(Iy(),Gd.current=kh,Ph){for(var r=St.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ph=!1}if(Wo=0,Kt=Bt=St=null,kc=!1,Jc=0,qy.current=null,n===null||n.return===null){Ht=1,nu=t,Ft=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=rn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.lanes=v.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=r_(a);if(y!==null){y.flags&=-257,s_(y,a,l,i,t),y.mode&1&&n_(i,h,t),t=y,c=h;var S=t.updateQueue;if(S===null){var x=new Set;x.add(c),t.updateQueue=x}else S.add(c);break e}else{if(!(t&1)){n_(i,h,t),Xy();break e}c=Error(le(426))}}else if(xt&&l.mode&1){var b=r_(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),s_(b,a,l,i,t),My(hl(c,l));break e}}i=c=hl(c,l),Ht!==4&&(Ht=2),Tc===null?Tc=[i]:Tc.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var E=kE(i,c,t);Kx(i,E);break e;case 1:l=c;var _=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(zi===null||!zi.has(C)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=NE(i,l,t);Kx(i,k);break e}}i=i.return}while(i!==null)}qE(n)}catch(T){t=T,Ft===n&&n!==null&&(Ft=n=n.return);continue}break}while(!0)}function VE(){var e=Nh.current;return Nh.current=kh,e===null?kh:e}function Xy(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),Qt===null||!(Ho&268435455)&&!(Pf&268435455)||wi(Qt,rn)}function Rh(e,t){var n=et;et|=2;var r=VE();(Qt!==e||rn!==t)&&($s=null,Fo(e,t));do try{uI();break}catch(s){HE(e,s)}while(!0);if(Iy(),et=n,Nh.current=r,Ft!==null)throw Error(le(261));return Qt=null,rn=0,Ht}function uI(){for(;Ft!==null;)GE(Ft)}function dI(){for(;Ft!==null&&!L2();)GE(Ft)}function GE(e){var t=ZE(e.alternate,e,Jn);e.memoizedProps=e.pendingProps,t===null?qE(e):Ft=t,qy.current=null}function qE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=sI(n,t),n!==null){n.flags&=32767,Ft=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ht=6,Ft=null;return}}else if(n=rI(n,t,Jn),n!==null){Ft=n;return}if(t=t.sibling,t!==null){Ft=t;return}Ft=t=e}while(t!==null);Ht===0&&(Ht=5)}function wo(e,t,n){var r=at,s=Pr.transition;try{Pr.transition=null,at=1,hI(e,t,n,r)}finally{Pr.transition=s,at=r}return null}function hI(e,t,n,r){do Ha();while(Mi!==null);if(et&6)throw Error(le(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(le(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(G2(e,i),e===Qt&&(Ft=Qt=null,rn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bd||(bd=!0,KE(hh,function(){return Ha(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Pr.transition,Pr.transition=null;var a=at;at=1;var l=et;et|=4,qy.current=null,oI(e,n),zE(n,e),MO(Ig),ph=!!Og,Ig=Og=null,e.current=n,aI(n),D2(),et=l,at=a,Pr.transition=i}else e.current=n;if(bd&&(bd=!1,Mi=e,jh=s),i=e.pendingLanes,i===0&&(zi=null),U2(n.stateNode),Wn(e,Mt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Th)throw Th=!1,e=ev,ev=null,e;return jh&1&&e.tag!==0&&Ha(),i=e.pendingLanes,i&1?e===tv?jc++:(jc=0,tv=e):jc=0,eo(),null}function Ha(){if(Mi!==null){var e=kS(jh),t=Pr.transition,n=at;try{if(Pr.transition=null,at=16>e?16:e,Mi===null)var r=!1;else{if(e=Mi,Mi=null,jh=0,et&6)throw Error(le(331));var s=et;for(et|=4,xe=e.current;xe!==null;){var i=xe,a=i.child;if(xe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(xe=h;xe!==null;){var f=xe;switch(f.tag){case 0:case 11:case 15:Nc(8,f,i)}var m=f.child;if(m!==null)m.return=f,xe=m;else for(;xe!==null;){f=xe;var v=f.sibling,y=f.return;if(FE(f),f===h){xe=null;break}if(v!==null){v.return=y,xe=v;break}xe=y}}}var S=i.alternate;if(S!==null){var x=S.child;if(x!==null){S.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}xe=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,xe=a;else e:for(;xe!==null;){if(i=xe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Nc(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,xe=E;break e}xe=i.return}}var _=e.current;for(xe=_;xe!==null;){a=xe;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,xe=C;else e:for(a=_;xe!==null;){if(l=xe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Cf(9,l)}}catch(T){Nt(l,l.return,T)}if(l===a){xe=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,xe=k;break e}xe=l.return}}if(et=s,eo(),xs&&typeof xs.onPostCommitFiberRoot=="function")try{xs.onPostCommitFiberRoot(vf,e)}catch{}r=!0}return r}finally{at=n,Pr.transition=t}}return!1}function v_(e,t,n){t=hl(n,t),t=kE(e,t,1),e=Ui(e,t,1),t=En(),e!==null&&(_u(e,1,t),Wn(e,t))}function Nt(e,t,n){if(e.tag===3)v_(e,e,n);else for(;t!==null;){if(t.tag===3){v_(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zi===null||!zi.has(r))){e=hl(n,e),e=NE(t,e,1),t=Ui(t,e,1),e=En(),t!==null&&(_u(t,1,e),Wn(t,e));break}}t=t.return}}function fI(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=En(),e.pingedLanes|=e.suspendedLanes&n,Qt===e&&(rn&n)===n&&(Ht===4||Ht===3&&(rn&130023424)===rn&&500>Mt()-Zy?Fo(e,0):Yy|=n),Wn(e,t)}function YE(e,t){t===0&&(e.mode&1?(t=hd,hd<<=1,!(hd&130023424)&&(hd=4194304)):t=1);var n=En();e=Js(e,t),e!==null&&(_u(e,t,n),Wn(e,n))}function pI(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),YE(e,n)}function mI(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(t),YE(e,n)}var ZE;ZE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||zn.current)$n=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return $n=!1,nI(e,t,n);$n=!!(e.flags&131072)}else $n=!1,xt&&t.flags&1048576&&JS(t,_h,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Yd(e,t),e=t.pendingProps;var s=ll(t,mn.current);Wa(t,n),s=By(null,t,r,e,s,n);var i=Wy();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bn(r)?(i=!0,wh(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Dy(t),s.updater=Ef,t.stateNode=s,s._reactInternals=t,Wg(t,r,e,n),t=Gg(null,t,r,!0,i,n)):(t.tag=0,xt&&i&&jy(t),_n(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Yd(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=vI(r),e=$r(r,e),s){case 0:t=Vg(null,t,r,e,n);break e;case 1:t=a_(null,t,r,e,n);break e;case 11:t=i_(null,t,r,e,n);break e;case 14:t=o_(null,t,r,$r(r.type,e),n);break e}throw Error(le(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:$r(r,s),Vg(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:$r(r,s),a_(e,t,r,s,n);case 3:e:{if(ME(t),e===null)throw Error(le(387));r=t.pendingProps,i=t.memoizedState,s=i.element,iE(e,t),Eh(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=hl(Error(le(423)),t),t=l_(e,t,r,n,s);break e}else if(r!==s){s=hl(Error(le(424)),t),t=l_(e,t,r,n,s);break e}else for(tr=$i(t.stateNode.containerInfo.firstChild),nr=t,xt=!0,Hr=null,n=rE(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cl(),r===s){t=ei(e,t,n);break e}_n(e,t,r,n)}t=t.child}return t;case 5:return oE(t),e===null&&Ug(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,Ag(r,s)?a=null:i!==null&&Ag(r,i)&&(t.flags|=32),RE(e,t),_n(e,t,a,n),t.child;case 6:return e===null&&Ug(t),null;case 13:return OE(e,t,n);case 4:return Fy(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ul(t,null,r,n):_n(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:$r(r,s),i_(e,t,r,s,n);case 7:return _n(e,t,t.pendingProps,n),t.child;case 8:return _n(e,t,t.pendingProps.children,n),t.child;case 12:return _n(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,ft(bh,r._currentValue),r._currentValue=a,i!==null)if(Zr(i.value,a)){if(i.children===s.children&&!zn.current){t=ei(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Zs(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?c.next=c:(c.next=f.next,f.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),zg(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(le(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),zg(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}_n(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Wa(t,n),s=Nr(s),r=r(s),t.flags|=1,_n(e,t,r,n),t.child;case 14:return r=t.type,s=$r(r,t.pendingProps),s=$r(r.type,s),o_(e,t,r,s,n);case 15:return TE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:$r(r,s),Yd(e,t),t.tag=1,Bn(r)?(e=!0,wh(t)):e=!1,Wa(t,n),PE(t,r,s),Wg(t,r,s,n),Gg(null,t,r,!0,e,n);case 19:return IE(e,t,n);case 22:return jE(e,t,n)}throw Error(le(156,t.tag))};function KE(e,t){return SS(e,t)}function gI(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(e,t,n,r){return new gI(e,t,n,r)}function Jy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vI(e){if(typeof e=="function")return Jy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===yy)return 11;if(e===wy)return 14}return 2}function Wi(e,t){var n=e.alternate;return n===null?(n=Er(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Qd(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")Jy(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Na:return $o(n.children,s,i,t);case vy:a=8,s|=8;break;case fg:return e=Er(12,n,t,s|2),e.elementType=fg,e.lanes=i,e;case pg:return e=Er(13,n,t,s),e.elementType=pg,e.lanes=i,e;case mg:return e=Er(19,n,t,s),e.elementType=mg,e.lanes=i,e;case oS:return kf(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sS:a=10;break e;case iS:a=9;break e;case yy:a=11;break e;case wy:a=14;break e;case gi:a=16,r=null;break e}throw Error(le(130,e==null?e:typeof e,""))}return t=Er(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function $o(e,t,n,r){return e=Er(7,e,r,t),e.lanes=n,e}function kf(e,t,n,r){return e=Er(22,e,r,t),e.elementType=oS,e.lanes=n,e.stateNode={isHidden:!1},e}function gm(e,t,n){return e=Er(6,e,null,t),e.lanes=n,e}function vm(e,t,n){return t=Er(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yI(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qp(0),this.expirationTimes=Qp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function e0(e,t,n,r,s,i,a,l,c){return e=new yI(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Er(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dy(i),e}function wI(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ka,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function QE(e){if(!e)return Gi;e=e._reactInternals;e:{if(ta(e)!==e||e.tag!==1)throw Error(le(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(le(171))}if(e.tag===1){var n=e.type;if(Bn(n))return QS(e,n,t)}return t}function XE(e,t,n,r,s,i,a,l,c){return e=e0(n,r,!0,e,s,i,a,l,c),e.context=QE(null),n=e.current,r=En(),s=Bi(n),i=Zs(r,s),i.callback=t??null,Ui(n,i,s),e.current.lanes=s,_u(e,s,r),Wn(e,r),e}function Nf(e,t,n,r){var s=t.current,i=En(),a=Bi(s);return n=QE(n),t.context===null?t.context=n:t.pendingContext=n,t=Zs(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ui(s,t,a),e!==null&&(Yr(e,s,a,i),Vd(e,s,a)),a}function Mh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function y_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function t0(e,t){y_(e,t),(e=e.alternate)&&y_(e,t)}function xI(){return null}var JE=typeof reportError=="function"?reportError:function(e){console.error(e)};function n0(e){this._internalRoot=e}Tf.prototype.render=n0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(le(409));Nf(e,t,null,null)};Tf.prototype.unmount=n0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vo(function(){Nf(null,e,null,null)}),t[Xs]=null}};function Tf(e){this._internalRoot=e}Tf.prototype.unstable_scheduleHydration=function(e){if(e){var t=jS();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yi.length&&t!==0&&t<yi[n].priority;n++);yi.splice(n,0,e),n===0&&MS(e)}};function r0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function w_(){}function _I(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Mh(a);i.call(h)}}var a=XE(t,r,e,0,null,!1,!1,"",w_);return e._reactRootContainer=a,e[Xs]=a.current,Yc(e.nodeType===8?e.parentNode:e),Vo(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Mh(c);l.call(h)}}var c=e0(e,0,!1,null,null,!1,!1,"",w_);return e._reactRootContainer=c,e[Xs]=c.current,Yc(e.nodeType===8?e.parentNode:e),Vo(function(){Nf(t,c,n,r)}),c}function Rf(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Mh(a);l.call(c)}}Nf(t,a,e,s)}else a=_I(n,t,e,s,r);return Mh(a)}NS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=gc(t.pendingLanes);n!==0&&(by(t,n|1),Wn(t,Mt()),!(et&6)&&(fl=Mt()+500,eo()))}break;case 13:Vo(function(){var r=Js(e,1);if(r!==null){var s=En();Yr(r,e,1,s)}}),t0(e,1)}};Sy=function(e){if(e.tag===13){var t=Js(e,134217728);if(t!==null){var n=En();Yr(t,e,134217728,n)}t0(e,134217728)}};TS=function(e){if(e.tag===13){var t=Bi(e),n=Js(e,t);if(n!==null){var r=En();Yr(n,e,t,r)}t0(e,t)}};jS=function(){return at};RS=function(e,t){var n=at;try{return at=e,t()}finally{at=n}};Cg=function(e,t,n){switch(t){case"input":if(yg(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=_f(r);if(!s)throw Error(le(90));lS(r),yg(r,s)}}}break;case"textarea":uS(e,n);break;case"select":t=n.value,t!=null&&$a(e,!!n.multiple,t,!1)}};vS=Ky;yS=Vo;var bI={usingClientEntryPoint:!1,Events:[Su,Ma,_f,mS,gS,Ky]},sc={findFiberByHostInstance:Co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SI={bundleType:sc.bundleType,version:sc.version,rendererPackageName:sc.rendererPackageName,rendererConfig:sc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ri.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_S(e),e===null?null:e.stateNode},findFiberByHostInstance:sc.findFiberByHostInstance||xI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sd.isDisabled&&Sd.supportsFiber)try{vf=Sd.inject(SI),xs=Sd}catch{}}ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bI;ar.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!r0(t))throw Error(le(200));return wI(e,t,null,n)};ar.createRoot=function(e,t){if(!r0(e))throw Error(le(299));var n=!1,r="",s=JE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=e0(e,1,!1,null,null,n,!1,r,s),e[Xs]=t.current,Yc(e.nodeType===8?e.parentNode:e),new n0(t)};ar.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(le(188)):(e=Object.keys(e).join(","),Error(le(268,e)));return e=_S(t),e=e===null?null:e.stateNode,e};ar.flushSync=function(e){return Vo(e)};ar.hydrate=function(e,t,n){if(!jf(t))throw Error(le(200));return Rf(null,e,t,!0,n)};ar.hydrateRoot=function(e,t,n){if(!r0(e))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=JE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=XE(t,null,e,1,n??null,s,!1,i,a),e[Xs]=t.current,Yc(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Tf(t)};ar.render=function(e,t,n){if(!jf(t))throw Error(le(200));return Rf(null,e,t,!1,n)};ar.unmountComponentAtNode=function(e){if(!jf(e))throw Error(le(40));return e._reactRootContainer?(Vo(function(){Rf(null,null,e,!1,function(){e._reactRootContainer=null,e[Xs]=null})}),!0):!1};ar.unstable_batchedUpdates=Ky;ar.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!jf(n))throw Error(le(200));if(e==null||e._reactInternals===void 0)throw Error(le(38));return Rf(e,t,n,!1,r)};ar.version="18.3.1-next-f1338f8080-20240426";function eC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eC)}catch(e){console.error(e)}}eC(),eS.exports=ar;var to=eS.exports;const tC=mf(to);var nC,x_=to;nC=x_.createRoot,x_.hydrateRoot;const EI=1,CI=1e6;let ym=0;function PI(){return ym=(ym+1)%Number.MAX_SAFE_INTEGER,ym.toString()}const wm=new Map,__=e=>{if(wm.has(e))return;const t=setTimeout(()=>{wm.delete(e),Rc({type:"REMOVE_TOAST",toastId:e})},CI);wm.set(e,t)},kI=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,EI)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?__(n):e.toasts.forEach(r=>{__(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Xd=[];let Jd={toasts:[]};function Rc(e){Jd=kI(Jd,e),Xd.forEach(t=>{t(Jd)})}function NI({...e}){const t=PI(),n=s=>Rc({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>Rc({type:"DISMISS_TOAST",toastId:t});return Rc({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function Ps(){const[e,t]=g.useState(Jd);return g.useEffect(()=>(Xd.push(t),()=>{const n=Xd.indexOf(t);n>-1&&Xd.splice(n,1)}),[e]),{...e,toast:NI,dismiss:n=>Rc({type:"DISMISS_TOAST",toastId:n})}}function ue(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function b_(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Mf(...e){return t=>{let n=!1;const r=e.map(s=>{const i=b_(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():b_(e[s],null)}}}}function Ue(...e){return g.useCallback(Mf(...e),e)}function TI(e,t){const n=g.createContext(t),r=i=>{const{children:a,...l}=i,c=g.useMemo(()=>l,Object.values(l));return d.jsx(n.Provider,{value:c,children:a})};r.displayName=e+"Provider";function s(i){const a=g.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,s]}function Vn(e,t=[]){let n=[];function r(i,a){const l=g.createContext(a),c=n.length;n=[...n,a];const h=m=>{var E;const{scope:v,children:y,...S}=m,x=((E=v==null?void 0:v[e])==null?void 0:E[c])||l,b=g.useMemo(()=>S,Object.values(S));return d.jsx(x.Provider,{value:b,children:y})};h.displayName=i+"Provider";function f(m,v){var x;const y=((x=v==null?void 0:v[e])==null?void 0:x[c])||l,S=g.useContext(y);if(S)return S;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[h,f]}const s=()=>{const i=n.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[e])||i;return g.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,jI(s,...t)]}function jI(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:h})=>{const m=c(i)[`__scope${h}`];return{...l,...m}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function qi(e){const t=MI(e),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(II);if(c){const h=c.props.children,f=l.map(m=>m===c?g.Children.count(h)>1?g.Children.only(null):g.isValidElement(h)?h.props.children:null:m);return d.jsx(t,{...a,ref:s,children:g.isValidElement(h)?g.cloneElement(h,void 0,f):null})}return d.jsx(t,{...a,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}var RI=qi("Slot");function MI(e){const t=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=LI(s),l=AI(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Mf(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var rC=Symbol("radix.slottable");function OI(e){const t=({children:n})=>d.jsx(d.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=rC,t}function II(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===rC}function AI(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function LI(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Of(e){const t=e+"CollectionProvider",[n,r]=Vn(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:b,children:E}=x,_=ie.useRef(null),C=ie.useRef(new Map).current;return d.jsx(s,{scope:b,itemMap:C,collectionRef:_,children:E})};a.displayName=t;const l=e+"CollectionSlot",c=qi(l),h=ie.forwardRef((x,b)=>{const{scope:E,children:_}=x,C=i(l,E),k=Ue(b,C.collectionRef);return d.jsx(c,{ref:k,children:_})});h.displayName=l;const f=e+"CollectionItemSlot",m="data-radix-collection-item",v=qi(f),y=ie.forwardRef((x,b)=>{const{scope:E,children:_,...C}=x,k=ie.useRef(null),T=Ue(b,k),R=i(f,E);return ie.useEffect(()=>(R.itemMap.set(k,{ref:k,...C}),()=>void R.itemMap.delete(k))),d.jsx(v,{[m]:"",ref:T,children:_})});y.displayName=f;function S(x){const b=i(e+"CollectionConsumer",x);return ie.useCallback(()=>{const _=b.collectionRef.current;if(!_)return[];const C=Array.from(_.querySelectorAll(`[${m}]`));return Array.from(b.itemMap.values()).sort((R,O)=>C.indexOf(R.ref.current)-C.indexOf(O.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:h,ItemSlot:y},S,r]}var DI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ce=DI.reduce((e,t)=>{const n=qi(`Primitive.${t}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function s0(e,t){e&&to.flushSync(()=>e.dispatchEvent(t))}function Tt(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function FI(e,t=globalThis==null?void 0:globalThis.document){const n=Tt(e);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var $I="DismissableLayer",sv="dismissableLayer.update",UI="dismissableLayer.pointerDownOutside",zI="dismissableLayer.focusOutside",S_,sC=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),na=g.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=e,h=g.useContext(sC),[f,m]=g.useState(null),v=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=g.useState({}),S=Ue(t,O=>m(O)),x=Array.from(h.layers),[b]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),E=x.indexOf(b),_=f?x.indexOf(f):-1,C=h.layersWithOutsidePointerEventsDisabled.size>0,k=_>=E,T=WI(O=>{const A=O.target,W=[...h.branches].some(G=>G.contains(A));!k||W||(s==null||s(O),a==null||a(O),O.defaultPrevented||l==null||l())},v),R=HI(O=>{const A=O.target;[...h.branches].some(G=>G.contains(A))||(i==null||i(O),a==null||a(O),O.defaultPrevented||l==null||l())},v);return FI(O=>{_===h.layers.size-1&&(r==null||r(O),!O.defaultPrevented&&l&&(O.preventDefault(),l()))},v),g.useEffect(()=>{if(f)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(S_=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),E_(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=S_)}},[f,v,n,h]),g.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),E_())},[f,h]),g.useEffect(()=>{const O=()=>y({});return document.addEventListener(sv,O),()=>document.removeEventListener(sv,O)},[]),d.jsx(Ce.div,{...c,ref:S,style:{pointerEvents:C?k?"auto":"none":void 0,...e.style},onFocusCapture:ue(e.onFocusCapture,R.onFocusCapture),onBlurCapture:ue(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:ue(e.onPointerDownCapture,T.onPointerDownCapture)})});na.displayName=$I;var BI="DismissableLayerBranch",iC=g.forwardRef((e,t)=>{const n=g.useContext(sC),r=g.useRef(null),s=Ue(t,r);return g.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),d.jsx(Ce.div,{...e,ref:s})});iC.displayName=BI;function WI(e,t=globalThis==null?void 0:globalThis.document){const n=Tt(e),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){oC(UI,n,h,{discrete:!0})};const h={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function HI(e,t=globalThis==null?void 0:globalThis.document){const n=Tt(e),r=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!r.current&&oC(zI,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function E_(){const e=new CustomEvent(sv);document.dispatchEvent(e)}function oC(e,t,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?s0(s,i):s.dispatchEvent(i)}var VI=na,GI=iC,Ot=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},qI="Portal",El=g.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,i]=g.useState(!1);Ot(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?tC.createPortal(d.jsx(Ce.div,{...r,ref:t}),a):null});El.displayName=qI;function YI(e,t){return g.useReducer((n,r)=>t[n][r]??n,e)}var on=e=>{const{present:t,children:n}=e,r=ZI(t),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),i=Ue(r.ref,KI(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:i}):null};on.displayName="Presence";function ZI(e){const[t,n]=g.useState(),r=g.useRef(null),s=g.useRef(e),i=g.useRef("none"),a=e?"mounted":"unmounted",[l,c]=YI(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const h=Ed(r.current);i.current=l==="mounted"?h:"none"},[l]),Ot(()=>{const h=r.current,f=s.current;if(f!==e){const v=i.current,y=Ed(h);e?c("MOUNT"):y==="none"||(h==null?void 0:h.display)==="none"?c("UNMOUNT"):c(f&&v!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Ot(()=>{if(t){let h;const f=t.ownerDocument.defaultView??window,m=y=>{const x=Ed(r.current).includes(y.animationName);if(y.target===t&&x&&(c("ANIMATION_END"),!s.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",h=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},v=y=>{y.target===t&&(i.current=Ed(r.current))};return t.addEventListener("animationstart",v),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{f.clearTimeout(h),t.removeEventListener("animationstart",v),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function Ed(e){return(e==null?void 0:e.animationName)||"none"}function KI(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var QI=fy[" useInsertionEffect ".trim().toString()]||Ot;function Yi({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,i,a]=XI({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const f=g.useRef(e!==void 0);g.useEffect(()=>{const m=f.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const h=g.useCallback(f=>{var m;if(l){const v=JI(f)?f(e):f;v!==e&&((m=a.current)==null||m.call(a,v))}else i(f)},[l,e,i,a]);return[c,h]}function XI({defaultProp:e,onChange:t}){const[n,r]=g.useState(e),s=g.useRef(n),i=g.useRef(t);return QI(()=>{i.current=t},[t]),g.useEffect(()=>{var a;s.current!==n&&((a=i.current)==null||a.call(i,n),s.current=n)},[n,s]),[n,r,i]}function JI(e){return typeof e=="function"}var aC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),eA="VisuallyHidden",If=g.forwardRef((e,t)=>d.jsx(Ce.span,{...e,ref:t,style:{...aC,...e.style}}));If.displayName=eA;var tA=If,i0="ToastProvider",[o0,nA,rA]=Of("Toast"),[lC,iq]=Vn("Toast",[rA]),[sA,Af]=lC(i0),cC=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=e,[l,c]=g.useState(null),[h,f]=g.useState(0),m=g.useRef(!1),v=g.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${i0}\`. Expected non-empty \`string\`.`),d.jsx(o0.Provider,{scope:t,children:d.jsx(sA,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:h,viewport:l,onViewportChange:c,onToastAdd:g.useCallback(()=>f(y=>y+1),[]),onToastRemove:g.useCallback(()=>f(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:v,children:a})})};cC.displayName=i0;var uC="ToastViewport",iA=["F8"],iv="toast.viewportPause",ov="toast.viewportResume",dC=g.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=iA,label:s="Notifications ({hotkey})",...i}=e,a=Af(uC,n),l=nA(n),c=g.useRef(null),h=g.useRef(null),f=g.useRef(null),m=g.useRef(null),v=Ue(t,m,a.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=a.toastCount>0;g.useEffect(()=>{const b=E=>{var C;r.length!==0&&r.every(k=>E[k]||E.code===k)&&((C=m.current)==null||C.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),g.useEffect(()=>{const b=c.current,E=m.current;if(S&&b&&E){const _=()=>{if(!a.isClosePausedRef.current){const R=new CustomEvent(iv);E.dispatchEvent(R),a.isClosePausedRef.current=!0}},C=()=>{if(a.isClosePausedRef.current){const R=new CustomEvent(ov);E.dispatchEvent(R),a.isClosePausedRef.current=!1}},k=R=>{!b.contains(R.relatedTarget)&&C()},T=()=>{b.contains(document.activeElement)||C()};return b.addEventListener("focusin",_),b.addEventListener("focusout",k),b.addEventListener("pointermove",_),b.addEventListener("pointerleave",T),window.addEventListener("blur",_),window.addEventListener("focus",C),()=>{b.removeEventListener("focusin",_),b.removeEventListener("focusout",k),b.removeEventListener("pointermove",_),b.removeEventListener("pointerleave",T),window.removeEventListener("blur",_),window.removeEventListener("focus",C)}}},[S,a.isClosePausedRef]);const x=g.useCallback(({tabbingDirection:b})=>{const _=l().map(C=>{const k=C.ref.current,T=[k,...yA(k)];return b==="forwards"?T:T.reverse()});return(b==="forwards"?_.reverse():_).flat()},[l]);return g.useEffect(()=>{const b=m.current;if(b){const E=_=>{var T,R,O;const C=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!C){const A=document.activeElement,W=_.shiftKey;if(_.target===b&&W){(T=h.current)==null||T.focus();return}const H=x({tabbingDirection:W?"backwards":"forwards"}),U=H.findIndex(M=>M===A);xm(H.slice(U+1))?_.preventDefault():W?(R=h.current)==null||R.focus():(O=f.current)==null||O.focus()}};return b.addEventListener("keydown",E),()=>b.removeEventListener("keydown",E)}},[l,x]),d.jsxs(GI,{ref:c,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&d.jsx(av,{ref:h,onFocusFromOutsideViewport:()=>{const b=x({tabbingDirection:"forwards"});xm(b)}}),d.jsx(o0.Slot,{scope:n,children:d.jsx(Ce.ol,{tabIndex:-1,...i,ref:v})}),S&&d.jsx(av,{ref:f,onFocusFromOutsideViewport:()=>{const b=x({tabbingDirection:"backwards"});xm(b)}})]})});dC.displayName=uC;var hC="ToastFocusProxy",av=g.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,i=Af(hC,n);return d.jsx(If,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var h;const l=a.relatedTarget;!((h=i.viewport)!=null&&h.contains(l))&&r()}})});av.displayName=hC;var Cu="Toast",oA="toast.swipeStart",aA="toast.swipeMove",lA="toast.swipeCancel",cA="toast.swipeEnd",fC=g.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...a}=e,[l,c]=Yi({prop:r,defaultProp:s??!0,onChange:i,caller:Cu});return d.jsx(on,{present:n||l,children:d.jsx(hA,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:Tt(e.onPause),onResume:Tt(e.onResume),onSwipeStart:ue(e.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ue(e.onSwipeMove,h=>{const{x:f,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:ue(e.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ue(e.onSwipeEnd,h=>{const{x:f,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});fC.displayName=Cu;var[uA,dA]=lC(Cu,{onClose(){}}),hA=g.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:h,onSwipeStart:f,onSwipeMove:m,onSwipeCancel:v,onSwipeEnd:y,...S}=e,x=Af(Cu,n),[b,E]=g.useState(null),_=Ue(t,M=>E(M)),C=g.useRef(null),k=g.useRef(null),T=s||x.duration,R=g.useRef(0),O=g.useRef(T),A=g.useRef(0),{onToastAdd:W,onToastRemove:G}=x,X=Tt(()=>{var ee;(b==null?void 0:b.contains(document.activeElement))&&((ee=x.viewport)==null||ee.focus()),a()}),H=g.useCallback(M=>{!M||M===1/0||(window.clearTimeout(A.current),R.current=new Date().getTime(),A.current=window.setTimeout(X,M))},[X]);g.useEffect(()=>{const M=x.viewport;if(M){const ee=()=>{H(O.current),h==null||h()},V=()=>{const Y=new Date().getTime()-R.current;O.current=O.current-Y,window.clearTimeout(A.current),c==null||c()};return M.addEventListener(iv,V),M.addEventListener(ov,ee),()=>{M.removeEventListener(iv,V),M.removeEventListener(ov,ee)}}},[x.viewport,T,c,h,H]),g.useEffect(()=>{i&&!x.isClosePausedRef.current&&H(T)},[i,T,x.isClosePausedRef,H]),g.useEffect(()=>(W(),()=>G()),[W,G]);const U=g.useMemo(()=>b?xC(b):null,[b]);return x.viewport?d.jsxs(d.Fragment,{children:[U&&d.jsx(fA,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:U}),d.jsx(uA,{scope:n,onClose:X,children:to.createPortal(d.jsx(o0.ItemSlot,{scope:n,children:d.jsx(VI,{asChild:!0,onEscapeKeyDown:ue(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||X(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:d.jsx(Ce.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...S,ref:_,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ue(e.onKeyDown,M=>{M.key==="Escape"&&(l==null||l(M.nativeEvent),M.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,X()))}),onPointerDown:ue(e.onPointerDown,M=>{M.button===0&&(C.current={x:M.clientX,y:M.clientY})}),onPointerMove:ue(e.onPointerMove,M=>{if(!C.current)return;const ee=M.clientX-C.current.x,V=M.clientY-C.current.y,Y=!!k.current,j=["left","right"].includes(x.swipeDirection),$=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,q=j?$(0,ee):0,oe=j?0:$(0,V),B=M.pointerType==="touch"?10:2,ce={x:q,y:oe},Q={originalEvent:M,delta:ce};Y?(k.current=ce,Cd(aA,m,Q,{discrete:!1})):C_(ce,x.swipeDirection,B)?(k.current=ce,Cd(oA,f,Q,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(ee)>B||Math.abs(V)>B)&&(C.current=null)}),onPointerUp:ue(e.onPointerUp,M=>{const ee=k.current,V=M.target;if(V.hasPointerCapture(M.pointerId)&&V.releasePointerCapture(M.pointerId),k.current=null,C.current=null,ee){const Y=M.currentTarget,j={originalEvent:M,delta:ee};C_(ee,x.swipeDirection,x.swipeThreshold)?Cd(cA,y,j,{discrete:!0}):Cd(lA,v,j,{discrete:!0}),Y.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),fA=e=>{const{__scopeToast:t,children:n,...r}=e,s=Af(Cu,t),[i,a]=g.useState(!1),[l,c]=g.useState(!1);return gA(()=>a(!0)),g.useEffect(()=>{const h=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(h)},[]),l?null:d.jsx(El,{asChild:!0,children:d.jsx(If,{...r,children:i&&d.jsxs(d.Fragment,{children:[s.label," ",n]})})})},pA="ToastTitle",pC=g.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return d.jsx(Ce.div,{...r,ref:t})});pC.displayName=pA;var mA="ToastDescription",mC=g.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return d.jsx(Ce.div,{...r,ref:t})});mC.displayName=mA;var gC="ToastAction",vC=g.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?d.jsx(wC,{altText:n,asChild:!0,children:d.jsx(a0,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${gC}\`. Expected non-empty \`string\`.`),null)});vC.displayName=gC;var yC="ToastClose",a0=g.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=dA(yC,n);return d.jsx(wC,{asChild:!0,children:d.jsx(Ce.button,{type:"button",...r,ref:t,onClick:ue(e.onClick,s.onClose)})})});a0.displayName=yC;var wC=g.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return d.jsx(Ce.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function xC(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),vA(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...xC(r))}}),t}function Cd(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?s0(s,i):s.dispatchEvent(i)}var C_=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),i=r>s;return t==="left"||t==="right"?i&&r>n:!i&&s>n};function gA(e=()=>{}){const t=Tt(e);Ot(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function vA(e){return e.nodeType===e.ELEMENT_NODE}function yA(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function xm(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var wA=cC,_C=dC,bC=fC,SC=pC,EC=mC,CC=vC,PC=a0;function kC(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=kC(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function NC(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=kC(e))&&(r&&(r+=" "),r+=t);return r}const P_=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,k_=NC,Lf=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return k_(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=t,a=Object.keys(s).map(h=>{const f=n==null?void 0:n[h],m=i==null?void 0:i[h];if(f===null)return null;const v=P_(f)||P_(m);return s[h][v]}),l=n&&Object.entries(n).reduce((h,f)=>{let[m,v]=f;return v===void 0||(h[m]=v),h},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:m,className:v,...y}=f;return Object.entries(y).every(S=>{let[x,b]=S;return Array.isArray(b)?b.includes({...i,...l}[x]):{...i,...l}[x]===b})?[...h,m,v]:h},[]);return k_(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TC=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _A={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>g.createElement("svg",{ref:c,..._A,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:TC("lucide",s),...l},[...a.map(([h,f])=>g.createElement(h,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=(e,t)=>{const n=g.forwardRef(({className:r,...s},i)=>g.createElement(bA,{ref:i,iconNode:t,className:TC(`lucide-${xA(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=gn("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=gn("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=gn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=gn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=gn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=gn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=gn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=gn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=gn("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=gn("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=gn("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=gn("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=gn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=gn("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=gn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=gn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),d0="-",jA=e=>{const t=MA(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const l=a.split(d0);return l[0]===""&&l.length!==1&&l.shift(),IC(l,t)||RA(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},IC=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?IC(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(d0);return(a=t.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},N_=/^\[(.+)\]$/,RA=e=>{if(N_.test(e)){const t=N_.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},MA=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return IA(Object.entries(e.classGroups),n).forEach(([i,a])=>{lv(a,r,i,t)}),r},lv=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:T_(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(OA(s)){lv(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{lv(a,T_(t,i),n,r)})})},T_=(e,t)=>{let n=e;return t.split(d0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},OA=e=>e.isThemeGetter,IA=(e,t)=>t?e.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[t+a,l])):i);return[n,s]}):e,AA=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},AC="!",LA=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],i=t.length,a=l=>{const c=[];let h=0,f=0,m;for(let b=0;b<l.length;b++){let E=l[b];if(h===0){if(E===s&&(r||l.slice(b,b+i)===t)){c.push(l.slice(f,b)),f=b+i;continue}if(E==="/"){m=b;continue}}E==="["?h++:E==="]"&&h--}const v=c.length===0?l:l.substring(f),y=v.startsWith(AC),S=y?v.substring(1):v,x=m&&m>f?m-f:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:S,maybePostfixModifierPosition:x}};return n?l=>n({className:l,parseClassName:a}):a},DA=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},FA=e=>({cache:AA(e.cacheSize),parseClassName:LA(e),...jA(e)}),$A=/\s+/,UA=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,i=[],a=e.trim().split($A);let l="";for(let c=a.length-1;c>=0;c-=1){const h=a[c],{modifiers:f,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:y}=n(h);let S=!!y,x=r(S?v.substring(0,y):v);if(!x){if(!S){l=h+(l.length>0?" "+l:l);continue}if(x=r(v),!x){l=h+(l.length>0?" "+l:l);continue}S=!1}const b=DA(f).join(":"),E=m?b+AC:b,_=E+x;if(i.includes(_))continue;i.push(_);const C=s(x,S);for(let k=0;k<C.length;++k){const T=C[k];i.push(E+T)}l=h+(l.length>0?" "+l:l)}return l};function zA(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=LC(t))&&(r&&(r+=" "),r+=n);return r}const LC=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=LC(e[r]))&&(n&&(n+=" "),n+=t);return n};function BA(e,...t){let n,r,s,i=a;function a(c){const h=t.reduce((f,m)=>m(f),e());return n=FA(h),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const h=r(c);if(h)return h;const f=UA(c,n);return s(c,f),f}return function(){return i(zA.apply(null,arguments))}}const gt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},DC=/^\[(?:([a-z-]+):)?(.+)\]$/i,WA=/^\d+\/\d+$/,HA=new Set(["px","full","screen"]),VA=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,GA=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,qA=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,YA=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ZA=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ls=e=>Va(e)||HA.has(e)||WA.test(e),ci=e=>Cl(e,"length",rL),Va=e=>!!e&&!Number.isNaN(Number(e)),_m=e=>Cl(e,"number",Va),ic=e=>!!e&&Number.isInteger(Number(e)),KA=e=>e.endsWith("%")&&Va(e.slice(0,-1)),ze=e=>DC.test(e),ui=e=>VA.test(e),QA=new Set(["length","size","percentage"]),XA=e=>Cl(e,QA,FC),JA=e=>Cl(e,"position",FC),eL=new Set(["image","url"]),tL=e=>Cl(e,eL,iL),nL=e=>Cl(e,"",sL),oc=()=>!0,Cl=(e,t,n)=>{const r=DC.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},rL=e=>GA.test(e)&&!qA.test(e),FC=()=>!1,sL=e=>YA.test(e),iL=e=>ZA.test(e),oL=()=>{const e=gt("colors"),t=gt("spacing"),n=gt("blur"),r=gt("brightness"),s=gt("borderColor"),i=gt("borderRadius"),a=gt("borderSpacing"),l=gt("borderWidth"),c=gt("contrast"),h=gt("grayscale"),f=gt("hueRotate"),m=gt("invert"),v=gt("gap"),y=gt("gradientColorStops"),S=gt("gradientColorStopPositions"),x=gt("inset"),b=gt("margin"),E=gt("opacity"),_=gt("padding"),C=gt("saturate"),k=gt("scale"),T=gt("sepia"),R=gt("skew"),O=gt("space"),A=gt("translate"),W=()=>["auto","contain","none"],G=()=>["auto","hidden","clip","visible","scroll"],X=()=>["auto",ze,t],H=()=>[ze,t],U=()=>["",Ls,ci],M=()=>["auto",Va,ze],ee=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],j=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",ze],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],oe=()=>[Va,ze];return{cacheSize:500,separator:":",theme:{colors:[oc],spacing:[Ls,ci],blur:["none","",ui,ze],brightness:oe(),borderColor:[e],borderRadius:["none","","full",ui,ze],borderSpacing:H(),borderWidth:U(),contrast:oe(),grayscale:$(),hueRotate:oe(),invert:$(),gap:H(),gradientColorStops:[e],gradientColorStopPositions:[KA,ci],inset:X(),margin:X(),opacity:oe(),padding:H(),saturate:oe(),scale:oe(),sepia:$(),skew:oe(),space:H(),translate:H()},classGroups:{aspect:[{aspect:["auto","square","video",ze]}],container:["container"],columns:[{columns:[ui]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ee(),ze]}],overflow:[{overflow:G()}],"overflow-x":[{"overflow-x":G()}],"overflow-y":[{"overflow-y":G()}],overscroll:[{overscroll:W()}],"overscroll-x":[{"overscroll-x":W()}],"overscroll-y":[{"overscroll-y":W()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ic,ze]}],basis:[{basis:X()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ze]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",ic,ze]}],"grid-cols":[{"grid-cols":[oc]}],"col-start-end":[{col:["auto",{span:["full",ic,ze]},ze]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[oc]}],"row-start-end":[{row:["auto",{span:[ic,ze]},ze]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ze]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ze]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...j()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...j(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...j(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ze,t]}],"min-w":[{"min-w":[ze,t,"min","max","fit"]}],"max-w":[{"max-w":[ze,t,"none","full","min","max","fit","prose",{screen:[ui]},ui]}],h:[{h:[ze,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ze,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ze,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ze,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ui,ci]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_m]}],"font-family":[{font:[oc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ze]}],"line-clamp":[{"line-clamp":["none",Va,_m]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ls,ze]}],"list-image":[{"list-image":["none",ze]}],"list-style-type":[{list:["none","disc","decimal",ze]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ls,ci]}],"underline-offset":[{"underline-offset":["auto",Ls,ze]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ze]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ze]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ee(),JA]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",XA]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},tL]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:V()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[Ls,ze]}],"outline-w":[{outline:[Ls,ci]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Ls,ci]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ui,nL]}],"shadow-color":[{shadow:[oc]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ui,ze]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[m]}],saturate:[{saturate:[C]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ze]}],duration:[{duration:oe()}],ease:[{ease:["linear","in","out","in-out",ze]}],delay:[{delay:oe()}],animate:[{animate:["none","spin","ping","pulse","bounce",ze]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[ic,ze]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ze]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ze]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ze]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ls,ci,_m]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},aL=BA(oL);function Te(...e){return aL(NC(e))}const lL=wA,$C=g.forwardRef(({className:e,...t},n)=>d.jsx(_C,{ref:n,className:Te("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));$C.displayName=_C.displayName;const cL=Lf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),UC=g.forwardRef(({className:e,variant:t,...n},r)=>d.jsx(bC,{ref:r,className:Te(cL({variant:t}),e),...n}));UC.displayName=bC.displayName;const uL=g.forwardRef(({className:e,...t},n)=>d.jsx(CC,{ref:n,className:Te("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));uL.displayName=CC.displayName;const zC=g.forwardRef(({className:e,...t},n)=>d.jsx(PC,{ref:n,className:Te("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:d.jsx(OC,{className:"h-4 w-4"})}));zC.displayName=PC.displayName;const BC=g.forwardRef(({className:e,...t},n)=>d.jsx(SC,{ref:n,className:Te("text-sm font-semibold",e),...t}));BC.displayName=SC.displayName;const WC=g.forwardRef(({className:e,...t},n)=>d.jsx(EC,{ref:n,className:Te("text-sm opacity-90",e),...t}));WC.displayName=EC.displayName;function dL(){const{toasts:e}=Ps();return d.jsxs(lL,{children:[e.map(function({id:t,title:n,description:r,action:s,...i}){return d.jsxs(UC,{...i,children:[d.jsxs("div",{className:"grid gap-1",children:[n&&d.jsx(BC,{children:n}),r&&d.jsx(WC,{children:r})]}),s,d.jsx(zC,{})]},t)}),d.jsx($C,{})]})}var j_=["light","dark"],hL="(prefers-color-scheme: dark)",fL=g.createContext(void 0),pL={setTheme:e=>{},themes:[]},mL=()=>{var e;return(e=g.useContext(fL))!=null?e:pL};g.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:a,attrs:l,nonce:c})=>{let h=i==="system",f=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(S=>`'${S}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,m=s?j_.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(S,x=!1,b=!0)=>{let E=a?a[S]:S,_=x?S+"|| ''":`'${E}'`,C="";return s&&b&&!x&&j_.includes(S)&&(C+=`d.style.colorScheme = '${S}';`),n==="class"?x||E?C+=`c.add(${_})`:C+="null":E&&(C+=`d[s](n,${_})`),C},y=e?`!function(){${f}${v(e)}}()`:r?`!function(){try{${f}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${h})){var t='${hL}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${v(a?"x[e]":"e",!0)}}${h?"":"else{"+v(i,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${t}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${v(a?"x[e]":"e",!0)}}else{${v(i,!1,!1)};}${m}}catch(t){}}();`;return g.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:y}})});var gL=e=>{switch(e){case"success":return wL;case"info":return _L;case"warning":return xL;case"error":return bL;default:return null}},vL=Array(12).fill(0),yL=({visible:e,className:t})=>ie.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},ie.createElement("div",{className:"sonner-spinner"},vL.map((n,r)=>ie.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),wL=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),xL=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),_L=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),bL=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),SL=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ie.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ie.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),EL=()=>{let[e,t]=ie.useState(document.hidden);return ie.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},cv=1,CL=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:cv++,i=this.toasts.find(l=>l.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:n}),{...l,...e,id:s,dismissible:a,title:n}):l):this.addToast({title:n,...r,dismissible:a,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),s=n!==void 0,i,a=r.then(async c=>{if(i=["resolve",c],ie.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(kL(c)&&!c.ok){s=!1;let h=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,f=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:h,description:f})}else if(t.success!==void 0){s=!1;let h=typeof t.success=="function"?await t.success(c):t.success,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:h,description:f})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){s=!1;let h=typeof t.error=="function"?await t.error(c):t.error,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:h,description:f})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,h)=>a.then(()=>i[0]==="reject"?h(i[1]):c(i[1])).catch(h));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||cv++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ln=new CL,PL=(e,t)=>{let n=(t==null?void 0:t.id)||cv++;return Ln.addToast({title:e,...t,id:n}),n},kL=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",NL=PL,TL=()=>Ln.toasts,jL=()=>Ln.getActiveToasts();Object.assign(NL,{success:Ln.success,info:Ln.info,warning:Ln.warning,error:Ln.error,custom:Ln.custom,message:Ln.message,promise:Ln.promise,dismiss:Ln.dismiss,loading:Ln.loading},{getHistory:TL,getToasts:jL});function RL(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}RL(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Pd(e){return e.label!==void 0}var ML=3,OL="32px",IL="16px",R_=4e3,AL=356,LL=14,DL=20,FL=200;function Lr(...e){return e.filter(Boolean).join(" ")}function $L(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var UL=e=>{var t,n,r,s,i,a,l,c,h,f,m;let{invert:v,toast:y,unstyled:S,interacting:x,setHeights:b,visibleToasts:E,heights:_,index:C,toasts:k,expanded:T,removeToast:R,defaultRichColors:O,closeButton:A,style:W,cancelButtonStyle:G,actionButtonStyle:X,className:H="",descriptionClassName:U="",duration:M,position:ee,gap:V,loadingIcon:Y,expandByDefault:j,classNames:$,icons:q,closeButtonAriaLabel:oe="Close toast",pauseWhenPageIsHidden:B}=e,[ce,Q]=ie.useState(null),[te,Z]=ie.useState(null),[re,fe]=ie.useState(!1),[Pe,z]=ie.useState(!1),[ne,se]=ie.useState(!1),[Oe,rt]=ie.useState(!1),[jt,Vt]=ie.useState(!1),[Gt,Xt]=ie.useState(0),[cr,ns]=ie.useState(0),Nn=ie.useRef(y.duration||M||R_),Ut=ie.useRef(null),Jt=ie.useRef(null),rs=C===0,ur=C+1<=E,st=y.type,en=y.dismissible!==!1,dr=y.className||"",Mr=y.descriptionClassName||"",Rt=ie.useMemo(()=>_.findIndex(me=>me.toastId===y.id)||0,[_,y.id]),si=ie.useMemo(()=>{var me;return(me=y.closeButton)!=null?me:A},[y.closeButton,A]),Yn=ie.useMemo(()=>y.duration||M||R_,[y.duration,M]),ss=ie.useRef(0),Tn=ie.useRef(0),Ts=ie.useRef(0),an=ie.useRef(null),[Zn,lo]=ee.split("-"),js=ie.useMemo(()=>_.reduce((me,pe,Ie)=>Ie>=Rt?me:me+pe.height,0),[_,Rt]),is=EL(),Ee=y.invert||v,Ve=st==="loading";Tn.current=ie.useMemo(()=>Rt*V+js,[Rt,js]),ie.useEffect(()=>{Nn.current=Yn},[Yn]),ie.useEffect(()=>{fe(!0)},[]),ie.useEffect(()=>{let me=Jt.current;if(me){let pe=me.getBoundingClientRect().height;return ns(pe),b(Ie=>[{toastId:y.id,height:pe,position:y.position},...Ie]),()=>b(Ie=>Ie.filter(ct=>ct.toastId!==y.id))}},[b,y.id]),ie.useLayoutEffect(()=>{if(!re)return;let me=Jt.current,pe=me.style.height;me.style.height="auto";let Ie=me.getBoundingClientRect().height;me.style.height=pe,ns(Ie),b(ct=>ct.find(_t=>_t.toastId===y.id)?ct.map(_t=>_t.toastId===y.id?{..._t,height:Ie}:_t):[{toastId:y.id,height:Ie,position:y.position},...ct])},[re,y.title,y.description,b,y.id]);let We=ie.useCallback(()=>{z(!0),Xt(Tn.current),b(me=>me.filter(pe=>pe.toastId!==y.id)),setTimeout(()=>{R(y)},FL)},[y,R,b,Tn]);ie.useEffect(()=>{if(y.promise&&st==="loading"||y.duration===1/0||y.type==="loading")return;let me;return T||x||B&&is?(()=>{if(Ts.current<ss.current){let pe=new Date().getTime()-ss.current;Nn.current=Nn.current-pe}Ts.current=new Date().getTime()})():Nn.current!==1/0&&(ss.current=new Date().getTime(),me=setTimeout(()=>{var pe;(pe=y.onAutoClose)==null||pe.call(y,y),We()},Nn.current)),()=>clearTimeout(me)},[T,x,y,st,B,is,We]),ie.useEffect(()=>{y.delete&&We()},[We,y.delete]);function we(){var me,pe,Ie;return q!=null&&q.loading?ie.createElement("div",{className:Lr($==null?void 0:$.loader,(me=y==null?void 0:y.classNames)==null?void 0:me.loader,"sonner-loader"),"data-visible":st==="loading"},q.loading):Y?ie.createElement("div",{className:Lr($==null?void 0:$.loader,(pe=y==null?void 0:y.classNames)==null?void 0:pe.loader,"sonner-loader"),"data-visible":st==="loading"},Y):ie.createElement(yL,{className:Lr($==null?void 0:$.loader,(Ie=y==null?void 0:y.classNames)==null?void 0:Ie.loader),visible:st==="loading"})}return ie.createElement("li",{tabIndex:0,ref:Jt,className:Lr(H,dr,$==null?void 0:$.toast,(t=y==null?void 0:y.classNames)==null?void 0:t.toast,$==null?void 0:$.default,$==null?void 0:$[st],(n=y==null?void 0:y.classNames)==null?void 0:n[st]),"data-sonner-toast":"","data-rich-colors":(r=y.richColors)!=null?r:O,"data-styled":!(y.jsx||y.unstyled||S),"data-mounted":re,"data-promise":!!y.promise,"data-swiped":jt,"data-removed":Pe,"data-visible":ur,"data-y-position":Zn,"data-x-position":lo,"data-index":C,"data-front":rs,"data-swiping":ne,"data-dismissible":en,"data-type":st,"data-invert":Ee,"data-swipe-out":Oe,"data-swipe-direction":te,"data-expanded":!!(T||j&&re),style:{"--index":C,"--toasts-before":C,"--z-index":k.length-C,"--offset":`${Pe?Gt:Tn.current}px`,"--initial-height":j?"auto":`${cr}px`,...W,...y.style},onDragEnd:()=>{se(!1),Q(null),an.current=null},onPointerDown:me=>{Ve||!en||(Ut.current=new Date,Xt(Tn.current),me.target.setPointerCapture(me.pointerId),me.target.tagName!=="BUTTON"&&(se(!0),an.current={x:me.clientX,y:me.clientY}))},onPointerUp:()=>{var me,pe,Ie,ct;if(Oe||!en)return;an.current=null;let _t=Number(((me=Jt.current)==null?void 0:me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),qt=Number(((pe=Jt.current)==null?void 0:pe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Kn=new Date().getTime()-((Ie=Ut.current)==null?void 0:Ie.getTime()),Ct=ce==="x"?_t:qt,hr=Math.abs(Ct)/Kn;if(Math.abs(Ct)>=DL||hr>.11){Xt(Tn.current),(ct=y.onDismiss)==null||ct.call(y,y),Z(ce==="x"?_t>0?"right":"left":qt>0?"down":"up"),We(),rt(!0),Vt(!1);return}se(!1),Q(null)},onPointerMove:me=>{var pe,Ie,ct,_t;if(!an.current||!en||((pe=window.getSelection())==null?void 0:pe.toString().length)>0)return;let qt=me.clientY-an.current.y,Kn=me.clientX-an.current.x,Ct=(Ie=e.swipeDirections)!=null?Ie:$L(ee);!ce&&(Math.abs(Kn)>1||Math.abs(qt)>1)&&Q(Math.abs(Kn)>Math.abs(qt)?"x":"y");let hr={x:0,y:0};ce==="y"?(Ct.includes("top")||Ct.includes("bottom"))&&(Ct.includes("top")&&qt<0||Ct.includes("bottom")&&qt>0)&&(hr.y=qt):ce==="x"&&(Ct.includes("left")||Ct.includes("right"))&&(Ct.includes("left")&&Kn<0||Ct.includes("right")&&Kn>0)&&(hr.x=Kn),(Math.abs(hr.x)>0||Math.abs(hr.y)>0)&&Vt(!0),(ct=Jt.current)==null||ct.style.setProperty("--swipe-amount-x",`${hr.x}px`),(_t=Jt.current)==null||_t.style.setProperty("--swipe-amount-y",`${hr.y}px`)}},si&&!y.jsx?ie.createElement("button",{"aria-label":oe,"data-disabled":Ve,"data-close-button":!0,onClick:Ve||!en?()=>{}:()=>{var me;We(),(me=y.onDismiss)==null||me.call(y,y)},className:Lr($==null?void 0:$.closeButton,(s=y==null?void 0:y.classNames)==null?void 0:s.closeButton)},(i=q==null?void 0:q.close)!=null?i:SL):null,y.jsx||g.isValidElement(y.title)?y.jsx?y.jsx:typeof y.title=="function"?y.title():y.title:ie.createElement(ie.Fragment,null,st||y.icon||y.promise?ie.createElement("div",{"data-icon":"",className:Lr($==null?void 0:$.icon,(a=y==null?void 0:y.classNames)==null?void 0:a.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||we():null,y.type!=="loading"?y.icon||(q==null?void 0:q[st])||gL(st):null):null,ie.createElement("div",{"data-content":"",className:Lr($==null?void 0:$.content,(l=y==null?void 0:y.classNames)==null?void 0:l.content)},ie.createElement("div",{"data-title":"",className:Lr($==null?void 0:$.title,(c=y==null?void 0:y.classNames)==null?void 0:c.title)},typeof y.title=="function"?y.title():y.title),y.description?ie.createElement("div",{"data-description":"",className:Lr(U,Mr,$==null?void 0:$.description,(h=y==null?void 0:y.classNames)==null?void 0:h.description)},typeof y.description=="function"?y.description():y.description):null),g.isValidElement(y.cancel)?y.cancel:y.cancel&&Pd(y.cancel)?ie.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||G,onClick:me=>{var pe,Ie;Pd(y.cancel)&&en&&((Ie=(pe=y.cancel).onClick)==null||Ie.call(pe,me),We())},className:Lr($==null?void 0:$.cancelButton,(f=y==null?void 0:y.classNames)==null?void 0:f.cancelButton)},y.cancel.label):null,g.isValidElement(y.action)?y.action:y.action&&Pd(y.action)?ie.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||X,onClick:me=>{var pe,Ie;Pd(y.action)&&((Ie=(pe=y.action).onClick)==null||Ie.call(pe,me),!me.defaultPrevented&&We())},className:Lr($==null?void 0:$.actionButton,(m=y==null?void 0:y.classNames)==null?void 0:m.actionButton)},y.action.label):null))};function M_(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function zL(e,t){let n={};return[e,t].forEach((r,s)=>{let i=s===1,a=i?"--mobile-offset":"--offset",l=i?IL:OL;function c(h){["top","right","bottom","left"].forEach(f=>{n[`${a}-${f}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?n[`${a}-${h}`]=l:n[`${a}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):c(l)}),n}var BL=g.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:a,className:l,offset:c,mobileOffset:h,theme:f="light",richColors:m,duration:v,style:y,visibleToasts:S=ML,toastOptions:x,dir:b=M_(),gap:E=LL,loadingIcon:_,icons:C,containerAriaLabel:k="Notifications",pauseWhenPageIsHidden:T}=e,[R,O]=ie.useState([]),A=ie.useMemo(()=>Array.from(new Set([r].concat(R.filter(B=>B.position).map(B=>B.position)))),[R,r]),[W,G]=ie.useState([]),[X,H]=ie.useState(!1),[U,M]=ie.useState(!1),[ee,V]=ie.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Y=ie.useRef(null),j=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=ie.useRef(null),q=ie.useRef(!1),oe=ie.useCallback(B=>{O(ce=>{var Q;return(Q=ce.find(te=>te.id===B.id))!=null&&Q.delete||Ln.dismiss(B.id),ce.filter(({id:te})=>te!==B.id)})},[]);return ie.useEffect(()=>Ln.subscribe(B=>{if(B.dismiss){O(ce=>ce.map(Q=>Q.id===B.id?{...Q,delete:!0}:Q));return}setTimeout(()=>{tC.flushSync(()=>{O(ce=>{let Q=ce.findIndex(te=>te.id===B.id);return Q!==-1?[...ce.slice(0,Q),{...ce[Q],...B},...ce.slice(Q+1)]:[B,...ce]})})})}),[]),ie.useEffect(()=>{if(f!=="system"){V(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?V("dark"):V("light")),typeof window>"u")return;let B=window.matchMedia("(prefers-color-scheme: dark)");try{B.addEventListener("change",({matches:ce})=>{V(ce?"dark":"light")})}catch{B.addListener(({matches:Q})=>{try{V(Q?"dark":"light")}catch(te){console.error(te)}})}},[f]),ie.useEffect(()=>{R.length<=1&&H(!1)},[R]),ie.useEffect(()=>{let B=ce=>{var Q,te;s.every(Z=>ce[Z]||ce.code===Z)&&(H(!0),(Q=Y.current)==null||Q.focus()),ce.code==="Escape"&&(document.activeElement===Y.current||(te=Y.current)!=null&&te.contains(document.activeElement))&&H(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[s]),ie.useEffect(()=>{if(Y.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,q.current=!1)}},[Y.current]),ie.createElement("section",{ref:t,"aria-label":`${k} ${j}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((B,ce)=>{var Q;let[te,Z]=B.split("-");return R.length?ie.createElement("ol",{key:B,dir:b==="auto"?M_():b,tabIndex:-1,ref:Y,className:l,"data-sonner-toaster":!0,"data-theme":ee,"data-y-position":te,"data-lifted":X&&R.length>1&&!i,"data-x-position":Z,style:{"--front-toast-height":`${((Q=W[0])==null?void 0:Q.height)||0}px`,"--width":`${AL}px`,"--gap":`${E}px`,...y,...zL(c,h)},onBlur:re=>{q.current&&!re.currentTarget.contains(re.relatedTarget)&&(q.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:re=>{re.target instanceof HTMLElement&&re.target.dataset.dismissible==="false"||q.current||(q.current=!0,$.current=re.relatedTarget)},onMouseEnter:()=>H(!0),onMouseMove:()=>H(!0),onMouseLeave:()=>{U||H(!1)},onDragEnd:()=>H(!1),onPointerDown:re=>{re.target instanceof HTMLElement&&re.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},R.filter(re=>!re.position&&ce===0||re.position===B).map((re,fe)=>{var Pe,z;return ie.createElement(UL,{key:re.id,icons:C,index:fe,toast:re,defaultRichColors:m,duration:(Pe=x==null?void 0:x.duration)!=null?Pe:v,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:n,visibleToasts:S,closeButton:(z=x==null?void 0:x.closeButton)!=null?z:a,interacting:U,position:B,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,removeToast:oe,toasts:R.filter(ne=>ne.position==re.position),heights:W.filter(ne=>ne.position==re.position),setHeights:G,expandByDefault:i,gap:E,loadingIcon:_,expanded:X,pauseWhenPageIsHidden:T,swipeDirections:e.swipeDirections})})):null}))});const WL=({...e})=>{const{theme:t="system"}=mL();return d.jsx(BL,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var HL=fy[" useId ".trim().toString()]||(()=>{}),VL=0;function bs(e){const[t,n]=g.useState(HL());return Ot(()=>{n(r=>r??String(VL++))},[e]),t?`radix-${t}`:""}const GL=["top","right","bottom","left"],Zi=Math.min,er=Math.max,Ih=Math.round,kd=Math.floor,Ss=e=>({x:e,y:e}),qL={left:"right",right:"left",bottom:"top",top:"bottom"},YL={start:"end",end:"start"};function uv(e,t,n){return er(e,Zi(t,n))}function ti(e,t){return typeof e=="function"?e(t):e}function ni(e){return e.split("-")[0]}function Pl(e){return e.split("-")[1]}function h0(e){return e==="x"?"y":"x"}function f0(e){return e==="y"?"height":"width"}const ZL=new Set(["top","bottom"]);function ws(e){return ZL.has(ni(e))?"y":"x"}function p0(e){return h0(ws(e))}function KL(e,t,n){n===void 0&&(n=!1);const r=Pl(e),s=p0(e),i=f0(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=Ah(a)),[a,Ah(a)]}function QL(e){const t=Ah(e);return[dv(e),t,dv(t)]}function dv(e){return e.replace(/start|end/g,t=>YL[t])}const O_=["left","right"],I_=["right","left"],XL=["top","bottom"],JL=["bottom","top"];function eD(e,t,n){switch(e){case"top":case"bottom":return n?t?I_:O_:t?O_:I_;case"left":case"right":return t?XL:JL;default:return[]}}function tD(e,t,n,r){const s=Pl(e);let i=eD(ni(e),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),t&&(i=i.concat(i.map(dv)))),i}function Ah(e){return e.replace(/left|right|bottom|top/g,t=>qL[t])}function nD(e){return{top:0,right:0,bottom:0,left:0,...e}}function HC(e){return typeof e!="number"?nD(e):{top:e,right:e,bottom:e,left:e}}function Lh(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function A_(e,t,n){let{reference:r,floating:s}=e;const i=ws(t),a=p0(t),l=f0(a),c=ni(t),h=i==="y",f=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,v=r[l]/2-s[l]/2;let y;switch(c){case"top":y={x:f,y:r.y-s.height};break;case"bottom":y={x:f,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:m};break;case"left":y={x:r.x-s.width,y:m};break;default:y={x:r.x,y:r.y}}switch(Pl(t)){case"start":y[a]-=v*(n&&h?-1:1);break;case"end":y[a]+=v*(n&&h?-1:1);break}return y}const rD=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let h=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:m}=A_(h,r,c),v=r,y={},S=0;for(let x=0;x<l.length;x++){const{name:b,fn:E}=l[x],{x:_,y:C,data:k,reset:T}=await E({x:f,y:m,initialPlacement:r,placement:v,strategy:s,middlewareData:y,rects:h,platform:a,elements:{reference:e,floating:t}});f=_??f,m=C??m,y={...y,[b]:{...y[b],...k}},T&&S<=50&&(S++,typeof T=="object"&&(T.placement&&(v=T.placement),T.rects&&(h=T.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):T.rects),{x:f,y:m}=A_(h,v,c)),x=-1)}return{x:f,y:m,placement:v,strategy:s,middlewareData:y}};async function ru(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=e,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:v=!1,padding:y=0}=ti(t,e),S=HC(y),b=l[v?m==="floating"?"reference":"floating":m],E=Lh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:h,rootBoundary:f,strategy:c})),_=m==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),k=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},T=Lh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:_,offsetParent:C,strategy:c}):_);return{top:(E.top-T.top+S.top)/k.y,bottom:(T.bottom-E.bottom+S.bottom)/k.y,left:(E.left-T.left+S.left)/k.x,right:(T.right-E.right+S.right)/k.x}}const sD=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=t,{element:h,padding:f=0}=ti(e,t)||{};if(h==null)return{};const m=HC(f),v={x:n,y:r},y=p0(s),S=f0(y),x=await a.getDimensions(h),b=y==="y",E=b?"top":"left",_=b?"bottom":"right",C=b?"clientHeight":"clientWidth",k=i.reference[S]+i.reference[y]-v[y]-i.floating[S],T=v[y]-i.reference[y],R=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h));let O=R?R[C]:0;(!O||!await(a.isElement==null?void 0:a.isElement(R)))&&(O=l.floating[C]||i.floating[S]);const A=k/2-T/2,W=O/2-x[S]/2-1,G=Zi(m[E],W),X=Zi(m[_],W),H=G,U=O-x[S]-X,M=O/2-x[S]/2+A,ee=uv(H,M,U),V=!c.arrow&&Pl(s)!=null&&M!==ee&&i.reference[S]/2-(M<H?G:X)-x[S]/2<0,Y=V?M<H?M-H:M-U:0;return{[y]:v[y]+Y,data:{[y]:ee,centerOffset:M-ee-Y,...V&&{alignmentOffset:Y}},reset:V}}}),iD=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:h}=t,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:v,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:x=!0,...b}=ti(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=ni(s),_=ws(l),C=ni(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(h.floating)),T=v||(C||!x?[Ah(l)]:QL(l)),R=S!=="none";!v&&R&&T.push(...tD(l,x,S,k));const O=[l,...T],A=await ru(t,b),W=[];let G=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&W.push(A[E]),m){const M=KL(s,a,k);W.push(A[M[0]],A[M[1]])}if(G=[...G,{placement:s,overflows:W}],!W.every(M=>M<=0)){var X,H;const M=(((X=i.flip)==null?void 0:X.index)||0)+1,ee=O[M];if(ee&&(!(m==="alignment"?_!==ws(ee):!1)||G.every(j=>j.overflows[0]>0&&ws(j.placement)===_)))return{data:{index:M,overflows:G},reset:{placement:ee}};let V=(H=G.filter(Y=>Y.overflows[0]<=0).sort((Y,j)=>Y.overflows[1]-j.overflows[1])[0])==null?void 0:H.placement;if(!V)switch(y){case"bestFit":{var U;const Y=(U=G.filter(j=>{if(R){const $=ws(j.placement);return $===_||$==="y"}return!0}).map(j=>[j.placement,j.overflows.filter($=>$>0).reduce(($,q)=>$+q,0)]).sort((j,$)=>j[1]-$[1])[0])==null?void 0:U[0];Y&&(V=Y);break}case"initialPlacement":V=l;break}if(s!==V)return{reset:{placement:V}}}return{}}}};function L_(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function D_(e){return GL.some(t=>e[t]>=0)}const oD=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=ti(e,t);switch(r){case"referenceHidden":{const i=await ru(t,{...s,elementContext:"reference"}),a=L_(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:D_(a)}}}case"escaped":{const i=await ru(t,{...s,altBoundary:!0}),a=L_(i,n.floating);return{data:{escapedOffsets:a,escaped:D_(a)}}}default:return{}}}}},VC=new Set(["left","top"]);async function aD(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=ni(n),l=Pl(n),c=ws(n)==="y",h=VC.has(a)?-1:1,f=i&&c?-1:1,m=ti(t,e);let{mainAxis:v,crossAxis:y,alignmentAxis:S}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof S=="number"&&(y=l==="end"?S*-1:S),c?{x:y*f,y:v*h}:{x:v*h,y:y*f}}const lD=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=t,c=await aD(t,e);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},cD=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x:E,y:_}=b;return{x:E,y:_}}},...c}=ti(e,t),h={x:n,y:r},f=await ru(t,c),m=ws(ni(s)),v=h0(m);let y=h[v],S=h[m];if(i){const b=v==="y"?"top":"left",E=v==="y"?"bottom":"right",_=y+f[b],C=y-f[E];y=uv(_,y,C)}if(a){const b=m==="y"?"top":"left",E=m==="y"?"bottom":"right",_=S+f[b],C=S-f[E];S=uv(_,S,C)}const x=l.fn({...t,[v]:y,[m]:S});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[v]:i,[m]:a}}}}}},uD=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:h=!0}=ti(e,t),f={x:n,y:r},m=ws(s),v=h0(m);let y=f[v],S=f[m];const x=ti(l,t),b=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const C=v==="y"?"height":"width",k=i.reference[v]-i.floating[C]+b.mainAxis,T=i.reference[v]+i.reference[C]-b.mainAxis;y<k?y=k:y>T&&(y=T)}if(h){var E,_;const C=v==="y"?"width":"height",k=VC.has(ni(s)),T=i.reference[m]-i.floating[C]+(k&&((E=a.offset)==null?void 0:E[m])||0)+(k?0:b.crossAxis),R=i.reference[m]+i.reference[C]+(k?0:((_=a.offset)==null?void 0:_[m])||0)-(k?b.crossAxis:0);S<T?S=T:S>R&&(S=R)}return{[v]:y,[m]:S}}}},dD=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:i,platform:a,elements:l}=t,{apply:c=()=>{},...h}=ti(e,t),f=await ru(t,h),m=ni(s),v=Pl(s),y=ws(s)==="y",{width:S,height:x}=i.floating;let b,E;m==="top"||m==="bottom"?(b=m,E=v===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(E=m,b=v==="end"?"top":"bottom");const _=x-f.top-f.bottom,C=S-f.left-f.right,k=Zi(x-f[b],_),T=Zi(S-f[E],C),R=!t.middlewareData.shift;let O=k,A=T;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(A=C),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(O=_),R&&!v){const G=er(f.left,0),X=er(f.right,0),H=er(f.top,0),U=er(f.bottom,0);y?A=S-2*(G!==0||X!==0?G+X:er(f.left,f.right)):O=x-2*(H!==0||U!==0?H+U:er(f.top,f.bottom))}await c({...t,availableWidth:A,availableHeight:O});const W=await a.getDimensions(l.floating);return S!==W.width||x!==W.height?{reset:{rects:!0}}:{}}}};function Ff(){return typeof window<"u"}function kl(e){return GC(e)?(e.nodeName||"").toLowerCase():"#document"}function rr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ks(e){var t;return(t=(GC(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function GC(e){return Ff()?e instanceof Node||e instanceof rr(e).Node:!1}function Kr(e){return Ff()?e instanceof Element||e instanceof rr(e).Element:!1}function Es(e){return Ff()?e instanceof HTMLElement||e instanceof rr(e).HTMLElement:!1}function F_(e){return!Ff()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof rr(e).ShadowRoot}const hD=new Set(["inline","contents"]);function Pu(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Qr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!hD.has(s)}const fD=new Set(["table","td","th"]);function pD(e){return fD.has(kl(e))}const mD=[":popover-open",":modal"];function $f(e){return mD.some(t=>{try{return e.matches(t)}catch{return!1}})}const gD=["transform","translate","scale","rotate","perspective"],vD=["transform","translate","scale","rotate","perspective","filter"],yD=["paint","layout","strict","content"];function m0(e){const t=g0(),n=Kr(e)?Qr(e):e;return gD.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||vD.some(r=>(n.willChange||"").includes(r))||yD.some(r=>(n.contain||"").includes(r))}function wD(e){let t=Ki(e);for(;Es(t)&&!pl(t);){if(m0(t))return t;if($f(t))return null;t=Ki(t)}return null}function g0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const xD=new Set(["html","body","#document"]);function pl(e){return xD.has(kl(e))}function Qr(e){return rr(e).getComputedStyle(e)}function Uf(e){return Kr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ki(e){if(kl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||F_(e)&&e.host||ks(e);return F_(t)?t.host:t}function qC(e){const t=Ki(e);return pl(t)?e.ownerDocument?e.ownerDocument.body:e.body:Es(t)&&Pu(t)?t:qC(t)}function su(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=qC(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),a=rr(s);if(i){const l=hv(a);return t.concat(a,a.visualViewport||[],Pu(s)?s:[],l&&n?su(l):[])}return t.concat(s,su(s,[],n))}function hv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function YC(e){const t=Qr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Es(e),i=s?e.offsetWidth:n,a=s?e.offsetHeight:r,l=Ih(n)!==i||Ih(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function v0(e){return Kr(e)?e:e.contextElement}function Ga(e){const t=v0(e);if(!Es(t))return Ss(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=YC(t);let a=(i?Ih(n.width):n.width)/r,l=(i?Ih(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const _D=Ss(0);function ZC(e){const t=rr(e);return!g0()||!t.visualViewport?_D:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function bD(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==rr(e)?!1:t}function Go(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=v0(e);let a=Ss(1);t&&(r?Kr(r)&&(a=Ga(r)):a=Ga(e));const l=bD(i,n,r)?ZC(i):Ss(0);let c=(s.left+l.x)/a.x,h=(s.top+l.y)/a.y,f=s.width/a.x,m=s.height/a.y;if(i){const v=rr(i),y=r&&Kr(r)?rr(r):r;let S=v,x=hv(S);for(;x&&r&&y!==S;){const b=Ga(x),E=x.getBoundingClientRect(),_=Qr(x),C=E.left+(x.clientLeft+parseFloat(_.paddingLeft))*b.x,k=E.top+(x.clientTop+parseFloat(_.paddingTop))*b.y;c*=b.x,h*=b.y,f*=b.x,m*=b.y,c+=C,h+=k,S=rr(x),x=hv(S)}}return Lh({width:f,height:m,x:c,y:h})}function y0(e,t){const n=Uf(e).scrollLeft;return t?t.left+n:Go(ks(e)).left+n}function KC(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:y0(e,r)),i=r.top+t.scrollTop;return{x:s,y:i}}function SD(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",a=ks(r),l=t?$f(t.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},h=Ss(1);const f=Ss(0),m=Es(r);if((m||!m&&!i)&&((kl(r)!=="body"||Pu(a))&&(c=Uf(r)),Es(r))){const y=Go(r);h=Ga(r),f.x=y.x+r.clientLeft,f.y=y.y+r.clientTop}const v=a&&!m&&!i?KC(a,c,!0):Ss(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-c.scrollLeft*h.x+f.x+v.x,y:n.y*h.y-c.scrollTop*h.y+f.y+v.y}}function ED(e){return Array.from(e.getClientRects())}function CD(e){const t=ks(e),n=Uf(e),r=e.ownerDocument.body,s=er(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=er(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+y0(e);const l=-n.scrollTop;return Qr(r).direction==="rtl"&&(a+=er(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}function PD(e,t){const n=rr(e),r=ks(e),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const h=g0();(!h||h&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}const kD=new Set(["absolute","fixed"]);function ND(e,t){const n=Go(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=Es(e)?Ga(e):Ss(1),a=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,h=r*i.y;return{width:a,height:l,x:c,y:h}}function $_(e,t,n){let r;if(t==="viewport")r=PD(e,n);else if(t==="document")r=CD(ks(e));else if(Kr(t))r=ND(t,n);else{const s=ZC(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Lh(r)}function QC(e,t){const n=Ki(e);return n===t||!Kr(n)||pl(n)?!1:Qr(n).position==="fixed"||QC(n,t)}function TD(e,t){const n=t.get(e);if(n)return n;let r=su(e,[],!1).filter(l=>Kr(l)&&kl(l)!=="body"),s=null;const i=Qr(e).position==="fixed";let a=i?Ki(e):e;for(;Kr(a)&&!pl(a);){const l=Qr(a),c=m0(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&kD.has(s.position)||Pu(a)&&!c&&QC(e,a))?r=r.filter(f=>f!==a):s=l,a=Ki(a)}return t.set(e,r),r}function jD(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[...n==="clippingAncestors"?$f(t)?[]:TD(t,this._c):[].concat(n),r],l=a[0],c=a.reduce((h,f)=>{const m=$_(t,f,s);return h.top=er(m.top,h.top),h.right=Zi(m.right,h.right),h.bottom=Zi(m.bottom,h.bottom),h.left=er(m.left,h.left),h},$_(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function RD(e){const{width:t,height:n}=YC(e);return{width:t,height:n}}function MD(e,t,n){const r=Es(t),s=ks(t),i=n==="fixed",a=Go(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Ss(0);function h(){c.x=y0(s)}if(r||!r&&!i)if((kl(t)!=="body"||Pu(s))&&(l=Uf(t)),r){const y=Go(t,!0,i,t);c.x=y.x+t.clientLeft,c.y=y.y+t.clientTop}else s&&h();i&&!r&&s&&h();const f=s&&!r&&!i?KC(s,l):Ss(0),m=a.left+l.scrollLeft-c.x-f.x,v=a.top+l.scrollTop-c.y-f.y;return{x:m,y:v,width:a.width,height:a.height}}function bm(e){return Qr(e).position==="static"}function U_(e,t){if(!Es(e)||Qr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ks(e)===n&&(n=n.ownerDocument.body),n}function XC(e,t){const n=rr(e);if($f(e))return n;if(!Es(e)){let s=Ki(e);for(;s&&!pl(s);){if(Kr(s)&&!bm(s))return s;s=Ki(s)}return n}let r=U_(e,t);for(;r&&pD(r)&&bm(r);)r=U_(r,t);return r&&pl(r)&&bm(r)&&!m0(r)?n:r||wD(e)||n}const OD=async function(e){const t=this.getOffsetParent||XC,n=this.getDimensions,r=await n(e.floating);return{reference:MD(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function ID(e){return Qr(e).direction==="rtl"}const AD={convertOffsetParentRelativeRectToViewportRelativeRect:SD,getDocumentElement:ks,getClippingRect:jD,getOffsetParent:XC,getElementRects:OD,getClientRects:ED,getDimensions:RD,getScale:Ga,isElement:Kr,isRTL:ID};function JC(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function LD(e,t){let n=null,r;const s=ks(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const h=e.getBoundingClientRect(),{left:f,top:m,width:v,height:y}=h;if(l||t(),!v||!y)return;const S=kd(m),x=kd(s.clientWidth-(f+v)),b=kd(s.clientHeight-(m+y)),E=kd(f),C={rootMargin:-S+"px "+-x+"px "+-b+"px "+-E+"px",threshold:er(0,Zi(1,c))||1};let k=!0;function T(R){const O=R[0].intersectionRatio;if(O!==c){if(!k)return a();O?a(!1,O):r=setTimeout(()=>{a(!1,1e-7)},1e3)}O===1&&!JC(h,e.getBoundingClientRect())&&a(),k=!1}try{n=new IntersectionObserver(T,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(T,C)}n.observe(e)}return a(!0),i}function DD(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,h=v0(e),f=s||i?[...h?su(h):[],...su(t)]:[];f.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const m=h&&l?LD(h,n):null;let v=-1,y=null;a&&(y=new ResizeObserver(E=>{let[_]=E;_&&_.target===h&&y&&(y.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var C;(C=y)==null||C.observe(t)})),n()}),h&&!c&&y.observe(h),y.observe(t));let S,x=c?Go(e):null;c&&b();function b(){const E=Go(e);x&&!JC(x,E)&&n(),x=E,S=requestAnimationFrame(b)}return n(),()=>{var E;f.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),m==null||m(),(E=y)==null||E.disconnect(),y=null,c&&cancelAnimationFrame(S)}}const FD=lD,$D=cD,UD=iD,zD=dD,BD=oD,z_=sD,WD=uD,HD=(e,t,n)=>{const r=new Map,s={platform:AD,...n},i={...s.platform,_c:r};return rD(e,t,{...s,platform:i})};var VD=typeof document<"u",GD=function(){},eh=VD?g.useLayoutEffect:GD;function Dh(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Dh(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!Dh(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function eP(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function B_(e,t){const n=eP(e);return Math.round(t*n)/n}function Sm(e){const t=g.useRef(e);return eh(()=>{t.current=e}),t}function qD(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:h}=e,[f,m]=g.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[v,y]=g.useState(r);Dh(v,r)||y(r);const[S,x]=g.useState(null),[b,E]=g.useState(null),_=g.useCallback(j=>{j!==R.current&&(R.current=j,x(j))},[]),C=g.useCallback(j=>{j!==O.current&&(O.current=j,E(j))},[]),k=i||S,T=a||b,R=g.useRef(null),O=g.useRef(null),A=g.useRef(f),W=c!=null,G=Sm(c),X=Sm(s),H=Sm(h),U=g.useCallback(()=>{if(!R.current||!O.current)return;const j={placement:t,strategy:n,middleware:v};X.current&&(j.platform=X.current),HD(R.current,O.current,j).then($=>{const q={...$,isPositioned:H.current!==!1};M.current&&!Dh(A.current,q)&&(A.current=q,to.flushSync(()=>{m(q)}))})},[v,t,n,X,H]);eh(()=>{h===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,m(j=>({...j,isPositioned:!1})))},[h]);const M=g.useRef(!1);eh(()=>(M.current=!0,()=>{M.current=!1}),[]),eh(()=>{if(k&&(R.current=k),T&&(O.current=T),k&&T){if(G.current)return G.current(k,T,U);U()}},[k,T,U,G,W]);const ee=g.useMemo(()=>({reference:R,floating:O,setReference:_,setFloating:C}),[_,C]),V=g.useMemo(()=>({reference:k,floating:T}),[k,T]),Y=g.useMemo(()=>{const j={position:n,left:0,top:0};if(!V.floating)return j;const $=B_(V.floating,f.x),q=B_(V.floating,f.y);return l?{...j,transform:"translate("+$+"px, "+q+"px)",...eP(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:q}},[n,l,V.floating,f.x,f.y]);return g.useMemo(()=>({...f,update:U,refs:ee,elements:V,floatingStyles:Y}),[f,U,ee,V,Y])}const YD=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?z_({element:r.current,padding:s}).fn(n):{}:r?z_({element:r,padding:s}).fn(n):{}}}},ZD=(e,t)=>({...FD(e),options:[e,t]}),KD=(e,t)=>({...$D(e),options:[e,t]}),QD=(e,t)=>({...WD(e),options:[e,t]}),XD=(e,t)=>({...UD(e),options:[e,t]}),JD=(e,t)=>({...zD(e),options:[e,t]}),e3=(e,t)=>({...BD(e),options:[e,t]}),t3=(e,t)=>({...YD(e),options:[e,t]});var n3="Arrow",tP=g.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...i}=e;return d.jsx(Ce.svg,{...i,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});tP.displayName=n3;var r3=tP;function nP(e){const[t,n]=g.useState(void 0);return Ot(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,h=Array.isArray(c)?c[0]:c;a=h.inlineSize,l=h.blockSize}else a=e.offsetWidth,l=e.offsetHeight;n({width:a,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var w0="Popper",[rP,no]=Vn(w0),[s3,sP]=rP(w0),iP=e=>{const{__scopePopper:t,children:n}=e,[r,s]=g.useState(null);return d.jsx(s3,{scope:t,anchor:r,onAnchorChange:s,children:n})};iP.displayName=w0;var oP="PopperAnchor",aP=g.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,i=sP(oP,n),a=g.useRef(null),l=Ue(t,a);return g.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:d.jsx(Ce.div,{...s,ref:l})});aP.displayName=oP;var x0="PopperContent",[i3,o3]=rP(x0),lP=g.forwardRef((e,t)=>{var re,fe,Pe,z,ne,se;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:v=!1,updatePositionStrategy:y="optimized",onPlaced:S,...x}=e,b=sP(x0,n),[E,_]=g.useState(null),C=Ue(t,Oe=>_(Oe)),[k,T]=g.useState(null),R=nP(k),O=(R==null?void 0:R.width)??0,A=(R==null?void 0:R.height)??0,W=r+(i!=="center"?"-"+i:""),G=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},X=Array.isArray(h)?h:[h],H=X.length>0,U={padding:G,boundary:X.filter(l3),altBoundary:H},{refs:M,floatingStyles:ee,placement:V,isPositioned:Y,middlewareData:j}=qD({strategy:"fixed",placement:W,whileElementsMounted:(...Oe)=>DD(...Oe,{animationFrame:y==="always"}),elements:{reference:b.anchor},middleware:[ZD({mainAxis:s+A,alignmentAxis:a}),c&&KD({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?QD():void 0,...U}),c&&XD({...U}),JD({...U,apply:({elements:Oe,rects:rt,availableWidth:jt,availableHeight:Vt})=>{const{width:Gt,height:Xt}=rt.reference,cr=Oe.floating.style;cr.setProperty("--radix-popper-available-width",`${jt}px`),cr.setProperty("--radix-popper-available-height",`${Vt}px`),cr.setProperty("--radix-popper-anchor-width",`${Gt}px`),cr.setProperty("--radix-popper-anchor-height",`${Xt}px`)}}),k&&t3({element:k,padding:l}),c3({arrowWidth:O,arrowHeight:A}),v&&e3({strategy:"referenceHidden",...U})]}),[$,q]=dP(V),oe=Tt(S);Ot(()=>{Y&&(oe==null||oe())},[Y,oe]);const B=(re=j.arrow)==null?void 0:re.x,ce=(fe=j.arrow)==null?void 0:fe.y,Q=((Pe=j.arrow)==null?void 0:Pe.centerOffset)!==0,[te,Z]=g.useState();return Ot(()=>{E&&Z(window.getComputedStyle(E).zIndex)},[E]),d.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:Y?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[(z=j.transformOrigin)==null?void 0:z.x,(ne=j.transformOrigin)==null?void 0:ne.y].join(" "),...((se=j.hide)==null?void 0:se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:d.jsx(i3,{scope:n,placedSide:$,onArrowChange:T,arrowX:B,arrowY:ce,shouldHideArrow:Q,children:d.jsx(Ce.div,{"data-side":$,"data-align":q,...x,ref:C,style:{...x.style,animation:Y?void 0:"none"}})})})});lP.displayName=x0;var cP="PopperArrow",a3={top:"bottom",right:"left",bottom:"top",left:"right"},uP=g.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,i=o3(cP,r),a=a3[i.placedSide];return d.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:d.jsx(r3,{...s,ref:n,style:{...s.style,display:"block"}})})});uP.displayName=cP;function l3(e){return e!==null}var c3=e=>({name:"transformOrigin",options:e,fn(t){var b,E,_;const{placement:n,rects:r,middlewareData:s}=t,a=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[h,f]=dP(n),m={start:"0%",center:"50%",end:"100%"}[f],v=(((E=s.arrow)==null?void 0:E.x)??0)+l/2,y=(((_=s.arrow)==null?void 0:_.y)??0)+c/2;let S="",x="";return h==="bottom"?(S=a?m:`${v}px`,x=`${-c}px`):h==="top"?(S=a?m:`${v}px`,x=`${r.floating.height+c}px`):h==="right"?(S=`${-c}px`,x=a?m:`${y}px`):h==="left"&&(S=`${r.floating.width+c}px`,x=a?m:`${y}px`),{data:{x:S,y:x}}}});function dP(e){const[t,n="center"]=e.split("-");return[t,n]}var _0=iP,ku=aP,zf=lP,Bf=uP,[Wf,oq]=Vn("Tooltip",[no]),b0=no(),hP="TooltipProvider",u3=700,W_="tooltip.open",[d3,fP]=Wf(hP),pP=e=>{const{__scopeTooltip:t,delayDuration:n=u3,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=e,a=g.useRef(!0),l=g.useRef(!1),c=g.useRef(0);return g.useEffect(()=>{const h=c.current;return()=>window.clearTimeout(h)},[]),d.jsx(d3,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:g.useCallback(h=>{l.current=h},[]),disableHoverableContent:s,children:i})};pP.displayName=hP;var mP="Tooltip",[aq,Hf]=Wf(mP),fv="TooltipTrigger",h3=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Hf(fv,n),i=fP(fv,n),a=b0(n),l=g.useRef(null),c=Ue(t,l,s.onTriggerChange),h=g.useRef(!1),f=g.useRef(!1),m=g.useCallback(()=>h.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),d.jsx(ku,{asChild:!0,...a,children:d.jsx(Ce.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:ue(e.onPointerMove,v=>{v.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:ue(e.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:ue(e.onPointerDown,()=>{s.open&&s.onClose(),h.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:ue(e.onFocus,()=>{h.current||s.onOpen()}),onBlur:ue(e.onBlur,s.onClose),onClick:ue(e.onClick,s.onClose)})})});h3.displayName=fv;var f3="TooltipPortal",[lq,p3]=Wf(f3,{forceMount:void 0}),ml="TooltipContent",gP=g.forwardRef((e,t)=>{const n=p3(ml,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=e,a=Hf(ml,e.__scopeTooltip);return d.jsx(on,{present:r||a.open,children:a.disableHoverableContent?d.jsx(vP,{side:s,...i,ref:t}):d.jsx(m3,{side:s,...i,ref:t})})}),m3=g.forwardRef((e,t)=>{const n=Hf(ml,e.__scopeTooltip),r=fP(ml,e.__scopeTooltip),s=g.useRef(null),i=Ue(t,s),[a,l]=g.useState(null),{trigger:c,onClose:h}=n,f=s.current,{onPointerInTransitChange:m}=r,v=g.useCallback(()=>{l(null),m(!1)},[m]),y=g.useCallback((S,x)=>{const b=S.currentTarget,E={x:S.clientX,y:S.clientY},_=x3(E,b.getBoundingClientRect()),C=_3(E,_),k=b3(x.getBoundingClientRect()),T=E3([...C,...k]);l(T),m(!0)},[m]);return g.useEffect(()=>()=>v(),[v]),g.useEffect(()=>{if(c&&f){const S=b=>y(b,f),x=b=>y(b,c);return c.addEventListener("pointerleave",S),f.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",S),f.removeEventListener("pointerleave",x)}}},[c,f,y,v]),g.useEffect(()=>{if(a){const S=x=>{const b=x.target,E={x:x.clientX,y:x.clientY},_=(c==null?void 0:c.contains(b))||(f==null?void 0:f.contains(b)),C=!S3(E,a);_?v():C&&(v(),h())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[c,f,a,h,v]),d.jsx(vP,{...e,ref:i})}),[g3,v3]=Wf(mP,{isInside:!1}),y3=OI("TooltipContent"),vP=g.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=e,c=Hf(ml,n),h=b0(n),{onClose:f}=c;return g.useEffect(()=>(document.addEventListener(W_,f),()=>document.removeEventListener(W_,f)),[f]),g.useEffect(()=>{if(c.trigger){const m=v=>{const y=v.target;y!=null&&y.contains(c.trigger)&&f()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,f]),d.jsx(na,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:m=>m.preventDefault(),onDismiss:f,children:d.jsxs(zf,{"data-state":c.stateAttribute,...h,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[d.jsx(y3,{children:r}),d.jsx(g3,{scope:n,isInside:!0,children:d.jsx(tA,{id:c.contentId,role:"tooltip",children:s||r})})]})})});gP.displayName=ml;var yP="TooltipArrow",w3=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=b0(n);return v3(yP,n).isInside?null:d.jsx(Bf,{...s,...r,ref:t})});w3.displayName=yP;function x3(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function _3(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function b3(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function S3(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const l=t[i],c=t[a],h=l.x,f=l.y,m=c.x,v=c.y;f>r!=v>r&&n<(m-h)*(r-f)/(v-f)+h&&(s=!s)}return s}function E3(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),C3(t)}function C3(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const i=t[t.length-1],a=t[t.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var P3=pP,wP=gP;const k3=P3,N3=g.forwardRef(({className:e,sideOffset:t=4,...n},r)=>d.jsx(wP,{ref:r,sideOffset:t,className:Te("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));N3.displayName=wP.displayName;var Nl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},qo=typeof window>"u"||"Deno"in globalThis;function bn(){}function T3(e,t){return typeof e=="function"?e(t):e}function pv(e){return typeof e=="number"&&e>=0&&e!==1/0}function xP(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Hi(e,t){return typeof e=="function"?e(t):e}function _r(e,t){return typeof e=="function"?e(t):e}function H_(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:l}=e;if(a){if(r){if(t.queryHash!==S0(a,t.options))return!1}else if(!iu(t.queryKey,a))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function V_(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Yo(t.options.mutationKey)!==Yo(i))return!1}else if(!iu(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function S0(e,t){return((t==null?void 0:t.queryKeyHashFn)||Yo)(e)}function Yo(e){return JSON.stringify(e,(t,n)=>mv(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function iu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>iu(e[n],t[n])):!1}function _P(e,t){if(e===t)return e;const n=G_(e)&&G_(t);if(n||mv(e)&&mv(t)){const r=n?e:Object.keys(e),s=r.length,i=n?t:Object.keys(t),a=i.length,l=n?[]:{},c=new Set(r);let h=0;for(let f=0;f<a;f++){const m=n?f:i[f];(!n&&c.has(m)||n)&&e[m]===void 0&&t[m]===void 0?(l[m]=void 0,h++):(l[m]=_P(e[m],t[m]),l[m]===e[m]&&e[m]!==void 0&&h++)}return s===a&&h===s?e:l}return t}function Fh(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function G_(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function mv(e){if(!q_(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!q_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function q_(e){return Object.prototype.toString.call(e)==="[object Object]"}function j3(e){return new Promise(t=>{setTimeout(t,e)})}function gv(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?_P(e,t):t}function R3(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function M3(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var E0=Symbol();function bP(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===E0?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function SP(e,t){return typeof e=="function"?e(...t):!!e}var To,_i,Za,O1,O3=(O1=class extends Nl{constructor(){super();ke(this,To);ke(this,_i);ke(this,Za);ve(this,Za,t=>{if(!qo&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){D(this,_i)||this.setEventListener(D(this,Za))}onUnsubscribe(){var t;this.hasListeners()||((t=D(this,_i))==null||t.call(this),ve(this,_i,void 0))}setEventListener(t){var n;ve(this,Za,t),(n=D(this,_i))==null||n.call(this),ve(this,_i,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){D(this,To)!==t&&(ve(this,To,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof D(this,To)=="boolean"?D(this,To):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},To=new WeakMap,_i=new WeakMap,Za=new WeakMap,O1),C0=new O3,Ka,bi,Qa,I1,I3=(I1=class extends Nl{constructor(){super();ke(this,Ka,!0);ke(this,bi);ke(this,Qa);ve(this,Qa,t=>{if(!qo&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){D(this,bi)||this.setEventListener(D(this,Qa))}onUnsubscribe(){var t;this.hasListeners()||((t=D(this,bi))==null||t.call(this),ve(this,bi,void 0))}setEventListener(t){var n;ve(this,Qa,t),(n=D(this,bi))==null||n.call(this),ve(this,bi,t(this.setOnline.bind(this)))}setOnline(t){D(this,Ka)!==t&&(ve(this,Ka,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return D(this,Ka)}},Ka=new WeakMap,bi=new WeakMap,Qa=new WeakMap,I1),$h=new I3;function vv(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function A3(e){return Math.min(1e3*2**e,3e4)}function EP(e){return(e??"online")==="online"?$h.isOnline():!0}var CP=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Em(e){return e instanceof CP}function PP(e){let t=!1,n=0,r=!1,s;const i=vv(),a=x=>{var b;r||(v(new CP(x)),(b=e.abort)==null||b.call(e))},l=()=>{t=!0},c=()=>{t=!1},h=()=>C0.isFocused()&&(e.networkMode==="always"||$h.isOnline())&&e.canRun(),f=()=>EP(e.networkMode)&&e.canRun(),m=x=>{var b;r||(r=!0,(b=e.onSuccess)==null||b.call(e,x),s==null||s(),i.resolve(x))},v=x=>{var b;r||(r=!0,(b=e.onError)==null||b.call(e,x),s==null||s(),i.reject(x))},y=()=>new Promise(x=>{var b;s=E=>{(r||h())&&x(E)},(b=e.onPause)==null||b.call(e)}).then(()=>{var x;s=void 0,r||(x=e.onContinue)==null||x.call(e)}),S=()=>{if(r)return;let x;const b=n===0?e.initialPromise:void 0;try{x=b??e.fn()}catch(E){x=Promise.reject(E)}Promise.resolve(x).then(m).catch(E=>{var R;if(r)return;const _=e.retry??(qo?0:3),C=e.retryDelay??A3,k=typeof C=="function"?C(n,E):C,T=_===!0||typeof _=="number"&&n<_||typeof _=="function"&&_(n,E);if(t||!T){v(E);return}n++,(R=e.onFail)==null||R.call(e,n,E),j3(k).then(()=>h()?void 0:y()).then(()=>{t?v(E):S()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?S():y().then(S),i)}}var L3=e=>setTimeout(e,0);function D3(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=L3;const i=l=>{t?e.push(l):s(()=>{n(l)})},a=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Wt=D3(),jo,A1,kP=(A1=class{constructor(){ke(this,jo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),pv(this.gcTime)&&ve(this,jo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(qo?1/0:5*60*1e3))}clearGcTimeout(){D(this,jo)&&(clearTimeout(D(this,jo)),ve(this,jo,void 0))}},jo=new WeakMap,A1),Xa,Ro,xr,Mo,hn,gu,Oo,Ur,Fs,L1,F3=(L1=class extends kP{constructor(t){super();ke(this,Ur);ke(this,Xa);ke(this,Ro);ke(this,xr);ke(this,Mo);ke(this,hn);ke(this,gu);ke(this,Oo);ve(this,Oo,!1),ve(this,gu,t.defaultOptions),this.setOptions(t.options),this.observers=[],ve(this,Mo,t.client),ve(this,xr,D(this,Mo).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ve(this,Xa,$3(this.options)),this.state=t.state??D(this,Xa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=D(this,hn))==null?void 0:t.promise}setOptions(t){this.options={...D(this,gu),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&D(this,xr).remove(this)}setData(t,n){const r=gv(this.state.data,t,this.options);return Be(this,Ur,Fs).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Be(this,Ur,Fs).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=D(this,hn))==null?void 0:r.promise;return(s=D(this,hn))==null||s.cancel(t),n?n.then(bn).catch(bn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,Xa))}isActive(){return this.observers.some(t=>_r(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===E0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Hi(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!xP(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=D(this,hn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=D(this,hn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),D(this,xr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(D(this,hn)&&(D(this,Oo)?D(this,hn).cancel({revert:!0}):D(this,hn).cancelRetry()),this.scheduleGc()),D(this,xr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Be(this,Ur,Fs).call(this,{type:"invalidate"})}fetch(t,n){var h,f,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(D(this,hn))return D(this,hn).continueRetry(),D(this,hn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const v=this.observers.find(y=>y.options.queryFn);v&&this.setOptions(v.options)}const r=new AbortController,s=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(ve(this,Oo,!0),r.signal)})},i=()=>{const v=bP(this.options,n),S=(()=>{const x={client:D(this,Mo),queryKey:this.queryKey,meta:this.meta};return s(x),x})();return ve(this,Oo,!1),this.options.persister?this.options.persister(v,S,this):v(S)},l=(()=>{const v={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:D(this,Mo),state:this.state,fetchFn:i};return s(v),v})();(h=this.options.behavior)==null||h.onFetch(l,this),ve(this,Ro,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&Be(this,Ur,Fs).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta});const c=v=>{var y,S,x,b;Em(v)&&v.silent||Be(this,Ur,Fs).call(this,{type:"error",error:v}),Em(v)||((S=(y=D(this,xr).config).onError)==null||S.call(y,v,this),(b=(x=D(this,xr).config).onSettled)==null||b.call(x,this.state.data,v,this)),this.scheduleGc()};return ve(this,hn,PP({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:v=>{var y,S,x,b;if(v===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(v)}catch(E){c(E);return}(S=(y=D(this,xr).config).onSuccess)==null||S.call(y,v,this),(b=(x=D(this,xr).config).onSettled)==null||b.call(x,v,this.state.error,this),this.scheduleGc()},onError:c,onFail:(v,y)=>{Be(this,Ur,Fs).call(this,{type:"failed",failureCount:v,error:y})},onPause:()=>{Be(this,Ur,Fs).call(this,{type:"pause"})},onContinue:()=>{Be(this,Ur,Fs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),D(this,hn).start()}},Xa=new WeakMap,Ro=new WeakMap,xr=new WeakMap,Mo=new WeakMap,hn=new WeakMap,gu=new WeakMap,Oo=new WeakMap,Ur=new WeakSet,Fs=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...NP(r.data,this.options),fetchMeta:t.meta??null};case"success":return ve(this,Ro,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return Em(s)&&s.revert&&D(this,Ro)?{...D(this,Ro),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Wt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),D(this,xr).notify({query:this,type:"updated",action:t})})},L1);function NP(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:EP(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function $3(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ps,D1,U3=(D1=class extends Nl{constructor(t={}){super();ke(this,ps);this.config=t,ve(this,ps,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??S0(s,n);let a=this.get(i);return a||(a=new F3({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){D(this,ps).has(t.queryHash)||(D(this,ps).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=D(this,ps).get(t.queryHash);n&&(t.destroy(),n===t&&D(this,ps).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Wt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return D(this,ps).get(t)}getAll(){return[...D(this,ps).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>H_(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>H_(t,r)):n}notify(t){Wt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Wt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Wt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ps=new WeakMap,D1),ms,wn,Io,gs,fi,F1,z3=(F1=class extends kP{constructor(t){super();ke(this,gs);ke(this,ms);ke(this,wn);ke(this,Io);this.mutationId=t.mutationId,ve(this,wn,t.mutationCache),ve(this,ms,[]),this.state=t.state||TP(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){D(this,ms).includes(t)||(D(this,ms).push(t),this.clearGcTimeout(),D(this,wn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ve(this,ms,D(this,ms).filter(n=>n!==t)),this.scheduleGc(),D(this,wn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){D(this,ms).length||(this.state.status==="pending"?this.scheduleGc():D(this,wn).remove(this))}continue(){var t;return((t=D(this,Io))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,a,l,c,h,f,m,v,y,S,x,b,E,_,C,k,T,R,O,A;const n=()=>{Be(this,gs,fi).call(this,{type:"continue"})};ve(this,Io,PP({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(W,G)=>{Be(this,gs,fi).call(this,{type:"failed",failureCount:W,error:G})},onPause:()=>{Be(this,gs,fi).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>D(this,wn).canRun(this)}));const r=this.state.status==="pending",s=!D(this,Io).canStart();try{if(r)n();else{Be(this,gs,fi).call(this,{type:"pending",variables:t,isPaused:s}),await((a=(i=D(this,wn).config).onMutate)==null?void 0:a.call(i,t,this));const G=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));G!==this.state.context&&Be(this,gs,fi).call(this,{type:"pending",context:G,variables:t,isPaused:s})}const W=await D(this,Io).start();return await((f=(h=D(this,wn).config).onSuccess)==null?void 0:f.call(h,W,t,this.state.context,this)),await((v=(m=this.options).onSuccess)==null?void 0:v.call(m,W,t,this.state.context)),await((S=(y=D(this,wn).config).onSettled)==null?void 0:S.call(y,W,null,this.state.variables,this.state.context,this)),await((b=(x=this.options).onSettled)==null?void 0:b.call(x,W,null,t,this.state.context)),Be(this,gs,fi).call(this,{type:"success",data:W}),W}catch(W){try{throw await((_=(E=D(this,wn).config).onError)==null?void 0:_.call(E,W,t,this.state.context,this)),await((k=(C=this.options).onError)==null?void 0:k.call(C,W,t,this.state.context)),await((R=(T=D(this,wn).config).onSettled)==null?void 0:R.call(T,void 0,W,this.state.variables,this.state.context,this)),await((A=(O=this.options).onSettled)==null?void 0:A.call(O,void 0,W,t,this.state.context)),W}finally{Be(this,gs,fi).call(this,{type:"error",error:W})}}finally{D(this,wn).runNext(this)}}},ms=new WeakMap,wn=new WeakMap,Io=new WeakMap,gs=new WeakSet,fi=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Wt.batch(()=>{D(this,ms).forEach(r=>{r.onMutationUpdate(t)}),D(this,wn).notify({mutation:this,type:"updated",action:t})})},F1);function TP(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Bs,zr,vu,$1,B3=($1=class extends Nl{constructor(t={}){super();ke(this,Bs);ke(this,zr);ke(this,vu);this.config=t,ve(this,Bs,new Set),ve(this,zr,new Map),ve(this,vu,0)}build(t,n,r){const s=new z3({mutationCache:this,mutationId:++od(this,vu)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){D(this,Bs).add(t);const n=Nd(t);if(typeof n=="string"){const r=D(this,zr).get(n);r?r.push(t):D(this,zr).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(D(this,Bs).delete(t)){const n=Nd(t);if(typeof n=="string"){const r=D(this,zr).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&D(this,zr).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Nd(t);if(typeof n=="string"){const r=D(this,zr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Nd(t);if(typeof n=="string"){const s=(r=D(this,zr).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Wt.batch(()=>{D(this,Bs).forEach(t=>{this.notify({type:"removed",mutation:t})}),D(this,Bs).clear(),D(this,zr).clear()})}getAll(){return Array.from(D(this,Bs))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>V_(n,r))}findAll(t={}){return this.getAll().filter(n=>V_(t,n))}notify(t){Wt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Wt.batch(()=>Promise.all(t.map(n=>n.continue().catch(bn))))}},Bs=new WeakMap,zr=new WeakMap,vu=new WeakMap,$1);function Nd(e){var t;return(t=e.options.scope)==null?void 0:t.id}function Y_(e){return{onFetch:(t,n)=>{var f,m,v,y,S;const r=t.options,s=(v=(m=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:m.fetchMore)==null?void 0:v.direction,i=((y=t.state.data)==null?void 0:y.pages)||[],a=((S=t.state.data)==null?void 0:S.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const h=async()=>{let x=!1;const b=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},E=bP(t.options,t.fetchOptions),_=async(C,k,T)=>{if(x)return Promise.reject();if(k==null&&C.pages.length)return Promise.resolve(C);const O=(()=>{const X={client:t.client,queryKey:t.queryKey,pageParam:k,direction:T?"backward":"forward",meta:t.options.meta};return b(X),X})(),A=await E(O),{maxPages:W}=t.options,G=T?M3:R3;return{pages:G(C.pages,A,W),pageParams:G(C.pageParams,k,W)}};if(s&&i.length){const C=s==="backward",k=C?W3:Z_,T={pages:i,pageParams:a},R=k(r,T);l=await _(T,R,C)}else{const C=e??i.length;do{const k=c===0?a[0]??r.initialPageParam:Z_(r,l);if(c>0&&k==null)break;l=await _(l,k),c++}while(c<C)}return l};t.options.persister?t.fetchFn=()=>{var x,b;return(b=(x=t.options).persister)==null?void 0:b.call(x,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=h}}}function Z_(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function W3(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var kt,Si,Ei,Ja,el,Ci,tl,nl,U1,H3=(U1=class{constructor(e={}){ke(this,kt);ke(this,Si);ke(this,Ei);ke(this,Ja);ke(this,el);ke(this,Ci);ke(this,tl);ke(this,nl);ve(this,kt,e.queryCache||new U3),ve(this,Si,e.mutationCache||new B3),ve(this,Ei,e.defaultOptions||{}),ve(this,Ja,new Map),ve(this,el,new Map),ve(this,Ci,0)}mount(){od(this,Ci)._++,D(this,Ci)===1&&(ve(this,tl,C0.subscribe(async e=>{e&&(await this.resumePausedMutations(),D(this,kt).onFocus())})),ve(this,nl,$h.subscribe(async e=>{e&&(await this.resumePausedMutations(),D(this,kt).onOnline())})))}unmount(){var e,t;od(this,Ci)._--,D(this,Ci)===0&&((e=D(this,tl))==null||e.call(this),ve(this,tl,void 0),(t=D(this,nl))==null||t.call(this),ve(this,nl,void 0))}isFetching(e){return D(this,kt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return D(this,Si).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=D(this,kt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=D(this,kt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Hi(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return D(this,kt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=D(this,kt).get(r.queryHash),i=s==null?void 0:s.state.data,a=T3(t,i);if(a!==void 0)return D(this,kt).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return Wt.batch(()=>D(this,kt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=D(this,kt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=D(this,kt);Wt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=D(this,kt);return Wt.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Wt.batch(()=>D(this,kt).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(bn).catch(bn)}invalidateQueries(e,t={}){return Wt.batch(()=>(D(this,kt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Wt.batch(()=>D(this,kt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(bn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(bn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=D(this,kt).build(this,t);return n.isStaleByTime(Hi(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(bn).catch(bn)}fetchInfiniteQuery(e){return e.behavior=Y_(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(bn).catch(bn)}ensureInfiniteQueryData(e){return e.behavior=Y_(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return $h.isOnline()?D(this,Si).resumePausedMutations():Promise.resolve()}getQueryCache(){return D(this,kt)}getMutationCache(){return D(this,Si)}getDefaultOptions(){return D(this,Ei)}setDefaultOptions(e){ve(this,Ei,e)}setQueryDefaults(e,t){D(this,Ja).set(Yo(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...D(this,Ja).values()],n={};return t.forEach(r=>{iu(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){D(this,el).set(Yo(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...D(this,el).values()],n={};return t.forEach(r=>{iu(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...D(this,Ei).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=S0(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===E0&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...D(this,Ei).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){D(this,kt).clear(),D(this,Si).clear()}},kt=new WeakMap,Si=new WeakMap,Ei=new WeakMap,Ja=new WeakMap,el=new WeakMap,Ci=new WeakMap,tl=new WeakMap,nl=new WeakMap,U1),In,Ze,yu,xn,Ao,rl,Pi,ki,wu,sl,il,Lo,Do,Ni,ol,it,yc,yv,wv,xv,_v,bv,Sv,Ev,jP,z1,V3=(z1=class extends Nl{constructor(t,n){super();ke(this,it);ke(this,In);ke(this,Ze);ke(this,yu);ke(this,xn);ke(this,Ao);ke(this,rl);ke(this,Pi);ke(this,ki);ke(this,wu);ke(this,sl);ke(this,il);ke(this,Lo);ke(this,Do);ke(this,Ni);ke(this,ol,new Set);this.options=n,ve(this,In,t),ve(this,ki,null),ve(this,Pi,vv()),this.options.experimental_prefetchInRender||D(this,Pi).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,Ze).addObserver(this),K_(D(this,Ze),this.options)?Be(this,it,yc).call(this):this.updateResult(),Be(this,it,_v).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Cv(D(this,Ze),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Cv(D(this,Ze),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Be(this,it,bv).call(this),Be(this,it,Sv).call(this),D(this,Ze).removeObserver(this)}setOptions(t){const n=this.options,r=D(this,Ze);if(this.options=D(this,In).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof _r(this.options.enabled,D(this,Ze))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Be(this,it,Ev).call(this),D(this,Ze).setOptions(this.options),n._defaulted&&!Fh(this.options,n)&&D(this,In).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,Ze),observer:this});const s=this.hasListeners();s&&Q_(D(this,Ze),r,this.options,n)&&Be(this,it,yc).call(this),this.updateResult(),s&&(D(this,Ze)!==r||_r(this.options.enabled,D(this,Ze))!==_r(n.enabled,D(this,Ze))||Hi(this.options.staleTime,D(this,Ze))!==Hi(n.staleTime,D(this,Ze)))&&Be(this,it,yv).call(this);const i=Be(this,it,wv).call(this);s&&(D(this,Ze)!==r||_r(this.options.enabled,D(this,Ze))!==_r(n.enabled,D(this,Ze))||i!==D(this,Ni))&&Be(this,it,xv).call(this,i)}getOptimisticResult(t){const n=D(this,In).getQueryCache().build(D(this,In),t),r=this.createResult(n,t);return q3(this,r)&&(ve(this,xn,r),ve(this,rl,this.options),ve(this,Ao,D(this,Ze).state)),r}getCurrentResult(){return D(this,xn)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(t){D(this,ol).add(t)}getCurrentQuery(){return D(this,Ze)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=D(this,In).defaultQueryOptions(t),r=D(this,In).getQueryCache().build(D(this,In),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return Be(this,it,yc).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,xn)))}createResult(t,n){var W;const r=D(this,Ze),s=this.options,i=D(this,xn),a=D(this,Ao),l=D(this,rl),h=t!==r?t.state:D(this,yu),{state:f}=t;let m={...f},v=!1,y;if(n._optimisticResults){const G=this.hasListeners(),X=!G&&K_(t,n),H=G&&Q_(t,r,n,s);(X||H)&&(m={...m,...NP(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:S,errorUpdatedAt:x,status:b}=m;y=m.data;let E=!1;if(n.placeholderData!==void 0&&y===void 0&&b==="pending"){let G;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(G=i.data,E=!0):G=typeof n.placeholderData=="function"?n.placeholderData((W=D(this,il))==null?void 0:W.state.data,D(this,il)):n.placeholderData,G!==void 0&&(b="success",y=gv(i==null?void 0:i.data,G,n),v=!0)}if(n.select&&y!==void 0&&!E)if(i&&y===(a==null?void 0:a.data)&&n.select===D(this,wu))y=D(this,sl);else try{ve(this,wu,n.select),y=n.select(y),y=gv(i==null?void 0:i.data,y,n),ve(this,sl,y),ve(this,ki,null)}catch(G){ve(this,ki,G)}D(this,ki)&&(S=D(this,ki),y=D(this,sl),x=Date.now(),b="error");const _=m.fetchStatus==="fetching",C=b==="pending",k=b==="error",T=C&&_,R=y!==void 0,A={status:b,fetchStatus:m.fetchStatus,isPending:C,isSuccess:b==="success",isError:k,isInitialLoading:T,isLoading:T,data:y,dataUpdatedAt:m.dataUpdatedAt,error:S,errorUpdatedAt:x,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>h.dataUpdateCount||m.errorUpdateCount>h.errorUpdateCount,isFetching:_,isRefetching:_&&!C,isLoadingError:k&&!R,isPaused:m.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:k&&R,isStale:P0(t,n),refetch:this.refetch,promise:D(this,Pi),isEnabled:_r(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const G=U=>{A.status==="error"?U.reject(A.error):A.data!==void 0&&U.resolve(A.data)},X=()=>{const U=ve(this,Pi,A.promise=vv());G(U)},H=D(this,Pi);switch(H.status){case"pending":t.queryHash===r.queryHash&&G(H);break;case"fulfilled":(A.status==="error"||A.data!==H.value)&&X();break;case"rejected":(A.status!=="error"||A.error!==H.reason)&&X();break}}return A}updateResult(){const t=D(this,xn),n=this.createResult(D(this,Ze),this.options);if(ve(this,Ao,D(this,Ze).state),ve(this,rl,this.options),D(this,Ao).data!==void 0&&ve(this,il,D(this,Ze)),Fh(n,t))return;ve(this,xn,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!D(this,ol).size)return!0;const a=new Set(i??D(this,ol));return this.options.throwOnError&&a.add("error"),Object.keys(D(this,xn)).some(l=>{const c=l;return D(this,xn)[c]!==t[c]&&a.has(c)})};Be(this,it,jP).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Be(this,it,_v).call(this)}},In=new WeakMap,Ze=new WeakMap,yu=new WeakMap,xn=new WeakMap,Ao=new WeakMap,rl=new WeakMap,Pi=new WeakMap,ki=new WeakMap,wu=new WeakMap,sl=new WeakMap,il=new WeakMap,Lo=new WeakMap,Do=new WeakMap,Ni=new WeakMap,ol=new WeakMap,it=new WeakSet,yc=function(t){Be(this,it,Ev).call(this);let n=D(this,Ze).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(bn)),n},yv=function(){Be(this,it,bv).call(this);const t=Hi(this.options.staleTime,D(this,Ze));if(qo||D(this,xn).isStale||!pv(t))return;const r=xP(D(this,xn).dataUpdatedAt,t)+1;ve(this,Lo,setTimeout(()=>{D(this,xn).isStale||this.updateResult()},r))},wv=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,Ze)):this.options.refetchInterval)??!1},xv=function(t){Be(this,it,Sv).call(this),ve(this,Ni,t),!(qo||_r(this.options.enabled,D(this,Ze))===!1||!pv(D(this,Ni))||D(this,Ni)===0)&&ve(this,Do,setInterval(()=>{(this.options.refetchIntervalInBackground||C0.isFocused())&&Be(this,it,yc).call(this)},D(this,Ni)))},_v=function(){Be(this,it,yv).call(this),Be(this,it,xv).call(this,Be(this,it,wv).call(this))},bv=function(){D(this,Lo)&&(clearTimeout(D(this,Lo)),ve(this,Lo,void 0))},Sv=function(){D(this,Do)&&(clearInterval(D(this,Do)),ve(this,Do,void 0))},Ev=function(){const t=D(this,In).getQueryCache().build(D(this,In),this.options);if(t===D(this,Ze))return;const n=D(this,Ze);ve(this,Ze,t),ve(this,yu,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},jP=function(t){Wt.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(D(this,xn))}),D(this,In).getQueryCache().notify({query:D(this,Ze),type:"observerResultsUpdated"})})},z1);function G3(e,t){return _r(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function K_(e,t){return G3(e,t)||e.state.data!==void 0&&Cv(e,t,t.refetchOnMount)}function Cv(e,t,n){if(_r(t.enabled,e)!==!1&&Hi(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&P0(e,t)}return!1}function Q_(e,t,n,r){return(e!==t||_r(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&P0(e,n)}function P0(e,t){return _r(t.enabled,e)!==!1&&e.isStaleByTime(Hi(t.staleTime,e))}function q3(e,t){return!Fh(e.getCurrentResult(),t)}var Ti,ji,An,Ws,Ks,th,Pv,B1,Y3=(B1=class extends Nl{constructor(n,r){super();ke(this,Ks);ke(this,Ti);ke(this,ji);ke(this,An);ke(this,Ws);ve(this,Ti,n),this.setOptions(r),this.bindMethods(),Be(this,Ks,th).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=D(this,Ti).defaultMutationOptions(n),Fh(this.options,r)||D(this,Ti).getMutationCache().notify({type:"observerOptionsUpdated",mutation:D(this,An),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Yo(r.mutationKey)!==Yo(this.options.mutationKey)?this.reset():((s=D(this,An))==null?void 0:s.state.status)==="pending"&&D(this,An).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=D(this,An))==null||n.removeObserver(this)}onMutationUpdate(n){Be(this,Ks,th).call(this),Be(this,Ks,Pv).call(this,n)}getCurrentResult(){return D(this,ji)}reset(){var n;(n=D(this,An))==null||n.removeObserver(this),ve(this,An,void 0),Be(this,Ks,th).call(this),Be(this,Ks,Pv).call(this)}mutate(n,r){var s;return ve(this,Ws,r),(s=D(this,An))==null||s.removeObserver(this),ve(this,An,D(this,Ti).getMutationCache().build(D(this,Ti),this.options)),D(this,An).addObserver(this),D(this,An).execute(n)}},Ti=new WeakMap,ji=new WeakMap,An=new WeakMap,Ws=new WeakMap,Ks=new WeakSet,th=function(){var r;const n=((r=D(this,An))==null?void 0:r.state)??TP();ve(this,ji,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Pv=function(n){Wt.batch(()=>{var r,s,i,a,l,c,h,f;if(D(this,Ws)&&this.hasListeners()){const m=D(this,ji).variables,v=D(this,ji).context;(n==null?void 0:n.type)==="success"?((s=(r=D(this,Ws)).onSuccess)==null||s.call(r,n.data,m,v),(a=(i=D(this,Ws)).onSettled)==null||a.call(i,n.data,null,m,v)):(n==null?void 0:n.type)==="error"&&((c=(l=D(this,Ws)).onError)==null||c.call(l,n.error,m,v),(f=(h=D(this,Ws)).onSettled)==null||f.call(h,void 0,n.error,m,v))}this.listeners.forEach(m=>{m(D(this,ji))})})},B1),RP=g.createContext(void 0),Tl=e=>{const t=g.useContext(RP);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Z3=({client:e,children:t})=>(g.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),d.jsx(RP.Provider,{value:e,children:t})),MP=g.createContext(!1),K3=()=>g.useContext(MP);MP.Provider;function Q3(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var X3=g.createContext(Q3()),J3=()=>g.useContext(X3),e5=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},t5=e=>{g.useEffect(()=>{e.clearReset()},[e])},n5=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||SP(n,[e.error,r])),r5=e=>{if(e.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...r)=>t(n(...r)):t(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},s5=(e,t)=>e.isLoading&&e.isFetching&&!t,i5=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,X_=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function o5(e,t,n){var m,v,y,S,x;const r=K3(),s=J3(),i=Tl(),a=i.defaultQueryOptions(e);(v=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||v.call(m,a),a._optimisticResults=r?"isRestoring":"optimistic",r5(a),e5(a,s),t5(s);const l=!i.getQueryCache().get(a.queryHash),[c]=g.useState(()=>new t(i,a)),h=c.getOptimisticResult(a),f=!r&&e.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(b=>{const E=f?c.subscribe(Wt.batchCalls(b)):bn;return c.updateResult(),E},[c,f]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),g.useEffect(()=>{c.setOptions(a)},[a,c]),i5(a,h))throw X_(a,c,s);if(n5({result:h,errorResetBoundary:s,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw h.error;if((S=(y=i.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||S.call(y,a,h),a.experimental_prefetchInRender&&!qo&&s5(h,r)){const b=l?X_(a,c,s):(x=i.getQueryCache().get(a.queryHash))==null?void 0:x.promise;b==null||b.catch(bn).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?h:c.trackResult(h)}function Mc(e,t){return o5(e,V3)}function Oc(e,t){const n=Tl(),[r]=g.useState(()=>new Y3(n,e));g.useEffect(()=>{r.setOptions(e)},[r,e]);const s=g.useSyncExternalStore(g.useCallback(a=>r.subscribe(Wt.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=g.useCallback((a,l)=>{r.mutate(a,l).catch(bn)},[r]);if(s.error&&SP(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ou(){return ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ou.apply(this,arguments)}var Oi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Oi||(Oi={}));const J_="popstate";function a5(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:a,hash:l}=r.location;return kv("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:IP(s)}return c5(t,n,null,e)}function $t(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function OP(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function l5(){return Math.random().toString(36).substr(2,8)}function eb(e,t){return{usr:e.state,key:e.key,idx:t}}function kv(e,t,n,r){return n===void 0&&(n=null),ou({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?jl(t):t,{state:n,key:t&&t.key||r||l5()})}function IP(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function jl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function c5(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=Oi.Pop,c=null,h=f();h==null&&(h=0,a.replaceState(ou({},a.state,{idx:h}),""));function f(){return(a.state||{idx:null}).idx}function m(){l=Oi.Pop;let b=f(),E=b==null?null:b-h;h=b,c&&c({action:l,location:x.location,delta:E})}function v(b,E){l=Oi.Push;let _=kv(x.location,b,E);h=f()+1;let C=eb(_,h),k=x.createHref(_);try{a.pushState(C,"",k)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(k)}i&&c&&c({action:l,location:x.location,delta:1})}function y(b,E){l=Oi.Replace;let _=kv(x.location,b,E);h=f();let C=eb(_,h),k=x.createHref(_);a.replaceState(C,"",k),i&&c&&c({action:l,location:x.location,delta:0})}function S(b){let E=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof b=="string"?b:IP(b);return _=_.replace(/ $/,"%20"),$t(E,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,E)}let x={get action(){return l},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(J_,m),c=b,()=>{s.removeEventListener(J_,m),c=null}},createHref(b){return t(s,b)},createURL:S,encodeLocation(b){let E=S(b);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:y,go(b){return a.go(b)}};return x}var tb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(tb||(tb={}));function u5(e,t,n){return n===void 0&&(n="/"),d5(e,t,n,!1)}function d5(e,t,n,r){let s=typeof t=="string"?jl(t):t,i=DP(s.pathname||"/",n);if(i==null)return null;let a=AP(e);h5(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let h=S5(i);l=_5(a[c],h,r)}return l}function AP(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&($t(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let h=Uo([r,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&($t(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),AP(i.children,t,f,h)),!(i.path==null&&!i.index)&&t.push({path:h,score:w5(h,i.index),routesMeta:f})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of LP(i.path))s(i,a,c)}),t}function LP(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=LP(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function h5(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:x5(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const f5=/^:[\w-]+$/,p5=3,m5=2,g5=1,v5=10,y5=-2,nb=e=>e==="*";function w5(e,t){let n=e.split("/"),r=n.length;return n.some(nb)&&(r+=y5),t&&(r+=m5),n.filter(s=>!nb(s)).reduce((s,i)=>s+(f5.test(i)?p5:i===""?g5:v5),r)}function x5(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function _5(e,t,n){let{routesMeta:r}=e,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],h=l===r.length-1,f=i==="/"?t:t.slice(i.length)||"/",m=rb({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},f),v=c.route;if(!m&&h&&n&&!r[r.length-1].route.index&&(m=rb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:Uo([i,m.pathname]),pathnameBase:k5(Uo([i,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(i=Uo([i,m.pathnameBase]))}return a}function rb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=b5(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((h,f,m)=>{let{paramName:v,isOptional:y}=f;if(v==="*"){let x=l[m]||"";a=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const S=l[m];return y&&!S?h[v]=void 0:h[v]=(S||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:a,pattern:e}}function b5(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),OP(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function S5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return OP(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function DP(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function E5(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?jl(e):e;return{pathname:n?n.startsWith("/")?n:C5(n,t):t,search:N5(r),hash:T5(s)}}function C5(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Cm(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function P5(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function FP(e,t){let n=P5(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function $P(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=jl(e):(s=ou({},e),$t(!s.pathname||!s.pathname.includes("?"),Cm("?","pathname","search",s)),$t(!s.pathname||!s.pathname.includes("#"),Cm("#","pathname","hash",s)),$t(!s.search||!s.search.includes("#"),Cm("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let m=t.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),m-=1;s.pathname=v.join("/")}l=m>=0?t[m]:"/"}let c=E5(s,l),h=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||f)&&(c.pathname+="/"),c}const Uo=e=>e.join("/").replace(/\/\/+/g,"/"),k5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),N5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,T5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function j5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const UP=["post","put","patch","delete"];new Set(UP);const R5=["get",...UP];new Set(R5);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function au(){return au=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},au.apply(this,arguments)}const k0=g.createContext(null),M5=g.createContext(null),Nu=g.createContext(null),Vf=g.createContext(null),ro=g.createContext({outlet:null,matches:[],isDataRoute:!1}),zP=g.createContext(null);function Tu(){return g.useContext(Vf)!=null}function ra(){return Tu()||$t(!1),g.useContext(Vf).location}function BP(e){g.useContext(Nu).static||g.useLayoutEffect(e)}function es(){let{isDataRoute:e}=g.useContext(ro);return e?G5():O5()}function O5(){Tu()||$t(!1);let e=g.useContext(k0),{basename:t,future:n,navigator:r}=g.useContext(Nu),{matches:s}=g.useContext(ro),{pathname:i}=ra(),a=JSON.stringify(FP(s,n.v7_relativeSplatPath)),l=g.useRef(!1);return BP(()=>{l.current=!0}),g.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let m=$P(h,JSON.parse(a),i,f.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Uo([t,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[t,r,a,i,e])}function I5(){let{matches:e}=g.useContext(ro),t=e[e.length-1];return t?t.params:{}}function A5(e,t){return L5(e,t)}function L5(e,t,n,r){Tu()||$t(!1);let{navigator:s}=g.useContext(Nu),{matches:i}=g.useContext(ro),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let h=ra(),f;if(t){var m;let b=typeof t=="string"?jl(t):t;c==="/"||(m=b.pathname)!=null&&m.startsWith(c)||$t(!1),f=b}else f=h;let v=f.pathname||"/",y=v;if(c!=="/"){let b=c.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(b.length).join("/")}let S=u5(e,{pathname:y}),x=z5(S&&S.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Uo([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Uo([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return t&&x?g.createElement(Vf.Provider,{value:{location:au({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Oi.Pop}},x):x}function D5(){let e=V5(),t=j5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:s},n):null,null)}const F5=g.createElement(D5,null);class $5 extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?g.createElement(ro.Provider,{value:this.props.routeContext},g.createElement(zP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function U5(e){let{routeContext:t,match:n,children:r}=e,s=g.useContext(k0);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(ro.Provider,{value:t},r)}function z5(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||$t(!1),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let m=a[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=f),m.route.id){let{loaderData:v,errors:y}=n,S=m.route.loader&&v[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||S){c=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((f,m,v)=>{let y,S=!1,x=null,b=null;n&&(y=l&&m.route.id?l[m.route.id]:void 0,x=m.route.errorElement||F5,c&&(h<0&&v===0?(S=!0,b=null):h===v&&(S=!0,b=m.route.hydrateFallbackElement||null)));let E=t.concat(a.slice(0,v+1)),_=()=>{let C;return y?C=x:S?C=b:m.route.Component?C=g.createElement(m.route.Component,null):m.route.element?C=m.route.element:C=f,g.createElement(U5,{match:m,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:C})};return n&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?g.createElement($5,{location:n.location,revalidation:n.revalidation,component:x,error:y,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):_()},null)}var WP=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(WP||{}),Uh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Uh||{});function B5(e){let t=g.useContext(k0);return t||$t(!1),t}function W5(e){let t=g.useContext(M5);return t||$t(!1),t}function H5(e){let t=g.useContext(ro);return t||$t(!1),t}function HP(e){let t=H5(),n=t.matches[t.matches.length-1];return n.route.id||$t(!1),n.route.id}function V5(){var e;let t=g.useContext(zP),n=W5(Uh.UseRouteError),r=HP(Uh.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function G5(){let{router:e}=B5(WP.UseNavigateStable),t=HP(Uh.UseNavigateStable),n=g.useRef(!1);return BP(()=>{n.current=!0}),g.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,au({fromRouteId:t},i)))},[e,t])}function q5(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Y5(e){let{to:t,replace:n,state:r,relative:s}=e;Tu()||$t(!1);let{future:i,static:a}=g.useContext(Nu),{matches:l}=g.useContext(ro),{pathname:c}=ra(),h=es(),f=$P(t,FP(l,i.v7_relativeSplatPath),c,s==="path"),m=JSON.stringify(f);return g.useEffect(()=>h(JSON.parse(m),{replace:n,state:r,relative:s}),[h,m,s,n,r]),null}function On(e){$t(!1)}function Z5(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Oi.Pop,navigator:i,static:a=!1,future:l}=e;Tu()&&$t(!1);let c=t.replace(/^\/*/,"/"),h=g.useMemo(()=>({basename:c,navigator:i,static:a,future:au({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=jl(r));let{pathname:f="/",search:m="",hash:v="",state:y=null,key:S="default"}=r,x=g.useMemo(()=>{let b=DP(f,c);return b==null?null:{location:{pathname:b,search:m,hash:v,state:y,key:S},navigationType:s}},[c,f,m,v,y,S,s]);return x==null?null:g.createElement(Nu.Provider,{value:h},g.createElement(Vf.Provider,{children:n,value:x}))}function K5(e){let{children:t,location:n}=e;return A5(Nv(t),n)}new Promise(()=>{});function Nv(e,t){t===void 0&&(t=[]);let n=[];return g.Children.forEach(e,(r,s)=>{if(!g.isValidElement(r))return;let i=[...t,s];if(r.type===g.Fragment){n.push.apply(n,Nv(r.props.children,i));return}r.type!==On&&$t(!1),!r.props.index||!r.props.children||$t(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Nv(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Q5="6";try{window.__reactRouterVersion=Q5}catch{}const X5="startTransition",sb=fy[X5];function J5(e){let{basename:t,children:n,future:r,window:s}=e,i=g.useRef();i.current==null&&(i.current=a5({window:s,v5Compat:!0}));let a=i.current,[l,c]=g.useState({action:a.action,location:a.location}),{v7_startTransition:h}=r||{},f=g.useCallback(m=>{h&&sb?sb(()=>c(m)):c(m)},[c,h]);return g.useLayoutEffect(()=>a.listen(f),[a,f]),g.useEffect(()=>q5(r),[r]),g.createElement(Z5,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}var ib;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ib||(ib={}));var ob;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ob||(ob={}));const eF=()=>{const e=ra();return g.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),d.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),d.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),d.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},VP=g.createContext(void 0),jr=()=>{const e=g.useContext(VP);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Tv=Lf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Me=g.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},i)=>{const a=r?RI:"button";return d.jsx(a,{className:Te(Tv({variant:t,size:n,className:e})),ref:i,...s})});Me.displayName="Button";const Qi="/assets/couch1-BGAlCsaN.jpg",zh="/assets/couch2-2vc5v2hu.jpg",Bh="/assets/couch3-CguXBYH7.jpg",Wh="/assets/couch4-BALJ1tc6.jpg",Hh="/assets/couch5-BOhJO1Bo.jpg",Vh="/assets/couch6-C3DYZNsN.jpg";function Xe(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function or(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Sn(e,t){const n=Xe(e);return isNaN(t)?or(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Xr(e,t){const n=Xe(e);if(isNaN(t))return or(e,NaN);if(!t)return n;const r=n.getDate(),s=or(e,n.getTime());s.setMonth(n.getMonth()+t+1,0);const i=s.getDate();return r>=i?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const N0=6048e5,tF=864e5;let nF={};function ju(){return nF}function Cs(e,t){var l,c,h,f;const n=ju(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,s=Xe(e),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Zo(e){return Cs(e,{weekStartsOn:1})}function GP(e){const t=Xe(e),n=t.getFullYear(),r=or(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Zo(r),i=or(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const a=Zo(i);return t.getTime()>=s.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function pn(e){const t=Xe(e);return t.setHours(0,0,0,0),t}function Gh(e){const t=Xe(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Cr(e,t){const n=pn(e),r=pn(t),s=+n-Gh(n),i=+r-Gh(r);return Math.round((s-i)/tF)}function rF(e){const t=GP(e),n=or(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Zo(n)}function jv(e,t){const n=t*7;return Sn(e,n)}function sF(e,t){return Xr(e,t*12)}function iF(e){let t;return e.forEach(function(n){const r=Xe(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function oF(e){let t;return e.forEach(n=>{const r=Xe(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function Un(e,t){const n=pn(e),r=pn(t);return+n==+r}function T0(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function aF(e){if(!T0(e)&&typeof e!="number")return!1;const t=Xe(e);return!isNaN(Number(t))}function lu(e,t){const n=Xe(e),r=Xe(t),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function lF(e,t,n){const r=Cs(e,n),s=Cs(t,n),i=+r-Gh(r),a=+s-Gh(s);return Math.round((i-a)/N0)}function j0(e){const t=Xe(e);return t.setHours(23,59,59,999),t}function R0(e){const t=Xe(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Hn(e){const t=Xe(e);return t.setDate(1),t.setHours(0,0,0,0),t}function qP(e){const t=Xe(e),n=or(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function M0(e,t){var l,c,h,f;const n=ju(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,s=Xe(e),i=s.getDay(),a=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+a),s.setHours(23,59,59,999),s}function YP(e){return M0(e,{weekStartsOn:1})}const cF={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},uF=(e,t,n)=>{let r;const s=cF[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Pm(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const dF={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hF={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},fF={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pF={date:Pm({formats:dF,defaultWidth:"full"}),time:Pm({formats:hF,defaultWidth:"full"}),dateTime:Pm({formats:fF,defaultWidth:"full"})},mF={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},gF=(e,t,n,r)=>mF[e];function ac(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):a;s=e.formattingValues[l]||e.formattingValues[a]}else{const a=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[a]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const vF={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},yF={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wF={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},xF={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_F={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},SF=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},EF={ordinalNumber:SF,era:ac({values:vF,defaultWidth:"wide"}),quarter:ac({values:yF,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ac({values:wF,defaultWidth:"wide"}),day:ac({values:xF,defaultWidth:"wide"}),dayPeriod:ac({values:_F,defaultWidth:"wide",formattingValues:bF,defaultFormattingWidth:"wide"})};function lc(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const a=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?PF(l,m=>m.test(a)):CF(l,m=>m.test(a));let h;h=e.valueCallback?e.valueCallback(c):c,h=n.valueCallback?n.valueCallback(h):h;const f=t.slice(a.length);return{value:h,rest:f}}}function CF(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function PF(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function kF(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],i=t.match(e.parsePattern);if(!i)return null;let a=e.valueCallback?e.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const l=t.slice(s.length);return{value:a,rest:l}}}const NF=/^(\d+)(th|st|nd|rd)?/i,TF=/\d+/i,jF={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},RF={any:[/^b/i,/^(a|c)/i]},MF={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},OF={any:[/1/i,/2/i,/3/i,/4/i]},IF={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},AF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},LF={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},DF={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},FF={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$F={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},UF={ordinalNumber:kF({matchPattern:NF,parsePattern:TF,valueCallback:e=>parseInt(e,10)}),era:lc({matchPatterns:jF,defaultMatchWidth:"wide",parsePatterns:RF,defaultParseWidth:"any"}),quarter:lc({matchPatterns:MF,defaultMatchWidth:"wide",parsePatterns:OF,defaultParseWidth:"any",valueCallback:e=>e+1}),month:lc({matchPatterns:IF,defaultMatchWidth:"wide",parsePatterns:AF,defaultParseWidth:"any"}),day:lc({matchPatterns:LF,defaultMatchWidth:"wide",parsePatterns:DF,defaultParseWidth:"any"}),dayPeriod:lc({matchPatterns:FF,defaultMatchWidth:"any",parsePatterns:$F,defaultParseWidth:"any"})},ZP={code:"en-US",formatDistance:uF,formatLong:pF,formatRelative:gF,localize:EF,match:UF,options:{weekStartsOn:0,firstWeekContainsDate:1}};function zF(e){const t=Xe(e);return Cr(t,qP(t))+1}function KP(e){const t=Xe(e),n=+Zo(t)-+rF(t);return Math.round(n/N0)+1}function QP(e,t){var f,m,v,y;const n=Xe(e),r=n.getFullYear(),s=ju(),i=(t==null?void 0:t.firstWeekContainsDate)??((m=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((y=(v=s.locale)==null?void 0:v.options)==null?void 0:y.firstWeekContainsDate)??1,a=or(e,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const l=Cs(a,t),c=or(e,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const h=Cs(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=h.getTime()?r:r-1}function BF(e,t){var l,c,h,f;const n=ju(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,s=QP(e,t),i=or(e,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Cs(i,t)}function XP(e,t){const n=Xe(e),r=+Cs(n,t)-+BF(n,t);return Math.round(r/N0)+1}function ot(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const di={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return ot(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):ot(n+1,2)},d(e,t){return ot(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return ot(e.getHours()%12||12,t.length)},H(e,t){return ot(e.getHours(),t.length)},m(e,t){return ot(e.getMinutes(),t.length)},s(e,t){return ot(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return ot(s,t.length)}},ma={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ab={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return di.y(e,t)},Y:function(e,t,n,r){const s=QP(e,r),i=s>0?s:1-s;if(t==="YY"){const a=i%100;return ot(a,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):ot(i,t.length)},R:function(e,t){const n=GP(e);return ot(n,t.length)},u:function(e,t){const n=e.getFullYear();return ot(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return ot(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return ot(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return di.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return ot(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=XP(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):ot(s,t.length)},I:function(e,t,n){const r=KP(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):ot(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):di.d(e,t)},D:function(e,t,n){const r=zF(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ot(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return ot(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return ot(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return ot(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=ma.noon:r===0?s=ma.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=ma.evening:r>=12?s=ma.afternoon:r>=4?s=ma.morning:s=ma.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return di.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):di.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ot(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):ot(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):di.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):di.s(e,t)},S:function(e,t){return di.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return cb(r);case"XXXX":case"XX":return xo(r);case"XXXXX":case"XXX":default:return xo(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return cb(r);case"xxxx":case"xx":return xo(r);case"xxxxx":case"xxx":default:return xo(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+lb(r,":");case"OOOO":default:return"GMT"+xo(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+lb(r,":");case"zzzz":default:return"GMT"+xo(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return ot(r,t.length)},T:function(e,t,n){const r=e.getTime();return ot(r,t.length)}};function lb(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+t+ot(i,2)}function cb(e,t){return e%60===0?(e>0?"-":"+")+ot(Math.abs(e)/60,2):xo(e,t)}function xo(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=ot(Math.trunc(r/60),2),i=ot(r%60,2);return n+s+t+i}const ub=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},JP=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},WF=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return ub(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",ub(r,t)).replace("{{time}}",JP(s,t))},HF={p:JP,P:WF},VF=/^D+$/,GF=/^Y+$/,qF=["D","DD","YY","YYYY"];function YF(e){return VF.test(e)}function ZF(e){return GF.test(e)}function KF(e,t,n){const r=QF(e,t,n);if(console.warn(r),qF.includes(e))throw new RangeError(r)}function QF(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const XF=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,JF=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,e4=/^'([^]*?)'?$/,t4=/''/g,n4=/[a-zA-Z]/;function Je(e,t,n){var f,m,v,y,S,x,b,E;const r=ju(),s=(n==null?void 0:n.locale)??r.locale??ZP,i=(n==null?void 0:n.firstWeekContainsDate)??((m=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((y=(v=r.locale)==null?void 0:v.options)==null?void 0:y.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((x=(S=n==null?void 0:n.locale)==null?void 0:S.options)==null?void 0:x.weekStartsOn)??r.weekStartsOn??((E=(b=r.locale)==null?void 0:b.options)==null?void 0:E.weekStartsOn)??0,l=Xe(e);if(!aF(l))throw new RangeError("Invalid time value");let c=t.match(JF).map(_=>{const C=_[0];if(C==="p"||C==="P"){const k=HF[C];return k(_,s.formatLong)}return _}).join("").match(XF).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const C=_[0];if(C==="'")return{isToken:!1,value:r4(_)};if(ab[C])return{isToken:!0,value:_};if(C.match(n4))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:_}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const h={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return c.map(_=>{if(!_.isToken)return _.value;const C=_.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&ZF(C)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&YF(C))&&KF(C,t,String(e));const k=ab[C[0]];return k(l,C,s.localize,h)}).join("")}function r4(e){const t=e.match(e4);return t?t[1].replace(t4,"'"):e}function s4(e){const t=Xe(e),n=t.getFullYear(),r=t.getMonth(),s=or(e,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function i4(e){return Math.trunc(+Xe(e)/1e3)}function o4(e){const t=Xe(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function a4(e,t){return lF(o4(e),Hn(e),t)+1}function cu(e,t){const n=Xe(e),r=Xe(t);return n.getTime()>r.getTime()}function Ko(e,t){const n=Xe(e),r=Xe(t);return+n<+r}function O0(e,t){const n=Xe(e),r=Xe(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function l4(e,t){const n=Xe(e),r=Xe(t);return n.getFullYear()===r.getFullYear()}function km(e,t){return Sn(e,-t)}function Nm(e,t){const n=Xe(e),r=n.getFullYear(),s=n.getDate(),i=or(e,0);i.setFullYear(r,t,15),i.setHours(0,0,0,0);const a=s4(i);return n.setMonth(t,Math.min(s,a)),n}function db(e,t){const n=Xe(e);return isNaN(+n)?or(e,NaN):(n.setFullYear(t),n)}var Re=function(){return Re=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Re.apply(this,arguments)};function c4(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function ek(e,t,n){for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function Ru(e){return e.mode==="multiple"}function Mu(e){return e.mode==="range"}function Gf(e){return e.mode==="single"}var u4={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function d4(e,t){return Je(e,"LLLL y",t)}function h4(e,t){return Je(e,"d",t)}function f4(e,t){return Je(e,"LLLL",t)}function p4(e){return"".concat(e)}function m4(e,t){return Je(e,"cccccc",t)}function g4(e,t){return Je(e,"yyyy",t)}var v4=Object.freeze({__proto__:null,formatCaption:d4,formatDay:h4,formatMonthCaption:f4,formatWeekNumber:p4,formatWeekdayName:m4,formatYearCaption:g4}),y4=function(e,t,n){return Je(e,"do MMMM (EEEE)",n)},w4=function(){return"Month: "},x4=function(){return"Go to next month"},_4=function(){return"Go to previous month"},b4=function(e,t){return Je(e,"cccc",t)},S4=function(e){return"Week n. ".concat(e)},E4=function(){return"Year: "},C4=Object.freeze({__proto__:null,labelDay:y4,labelMonthDropdown:w4,labelNext:x4,labelPrevious:_4,labelWeekNumber:S4,labelWeekday:b4,labelYearDropdown:E4});function P4(){var e="buttons",t=u4,n=ZP,r={},s={},i=1,a={},l=new Date;return{captionLayout:e,classNames:t,formatters:v4,labels:C4,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:i,styles:a,today:l,mode:"default"}}function k4(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,s=e.toMonth,i=e.fromDate,a=e.toDate;return r?i=Hn(r):t&&(i=new Date(t,0,1)),s?a=R0(s):n&&(a=new Date(n,11,31)),{fromDate:i?pn(i):void 0,toDate:a?pn(a):void 0}}var tk=g.createContext(void 0);function N4(e){var t,n=e.initialProps,r=P4(),s=k4(n),i=s.fromDate,a=s.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!i||!a)&&(l="buttons");var c;(Gf(n)||Ru(n)||Mu(n))&&(c=n.onSelect);var h=Re(Re(Re({},r),n),{captionLayout:l,classNames:Re(Re({},r.classNames),n.classNames),components:Re({},n.components),formatters:Re(Re({},r.formatters),n.formatters),fromDate:i,labels:Re(Re({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Re(Re({},r.modifiers),n.modifiers),modifiersClassNames:Re(Re({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Re(Re({},r.styles),n.styles),toDate:a});return d.jsx(tk.Provider,{value:h,children:e.children})}function pt(){var e=g.useContext(tk);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function nk(e){var t=pt(),n=t.locale,r=t.classNames,s=t.styles,i=t.formatters.formatCaption;return d.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:n})})}function T4(e){return d.jsx("svg",Re({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:d.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function rk(e){var t,n,r=e.onChange,s=e.value,i=e.children,a=e.caption,l=e.className,c=e.style,h=pt(),f=(n=(t=h.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:T4;return d.jsxs("div",{className:l,style:c,children:[d.jsx("span",{className:h.classNames.vhidden,children:e["aria-label"]}),d.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:h.classNames.dropdown,style:h.styles.dropdown,value:s,onChange:r,children:i}),d.jsxs("div",{className:h.classNames.caption_label,style:h.styles.caption_label,"aria-hidden":"true",children:[a,d.jsx(f,{className:h.classNames.dropdown_icon,style:h.styles.dropdown_icon})]})]})}function j4(e){var t,n=pt(),r=n.fromDate,s=n.toDate,i=n.styles,a=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,h=n.components,f=n.labels.labelMonthDropdown;if(!r)return d.jsx(d.Fragment,{});if(!s)return d.jsx(d.Fragment,{});var m=[];if(l4(r,s))for(var v=Hn(r),y=r.getMonth();y<=s.getMonth();y++)m.push(Nm(v,y));else for(var v=Hn(new Date),y=0;y<=11;y++)m.push(Nm(v,y));var S=function(b){var E=Number(b.target.value),_=Nm(Hn(e.displayMonth),E);e.onChange(_)},x=(t=h==null?void 0:h.Dropdown)!==null&&t!==void 0?t:rk;return d.jsx(x,{name:"months","aria-label":f(),className:c.dropdown_month,style:i.dropdown_month,onChange:S,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:a}),children:m.map(function(b){return d.jsx("option",{value:b.getMonth(),children:l(b,{locale:a})},b.getMonth())})})}function R4(e){var t,n=e.displayMonth,r=pt(),s=r.fromDate,i=r.toDate,a=r.locale,l=r.styles,c=r.classNames,h=r.components,f=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,v=[];if(!s)return d.jsx(d.Fragment,{});if(!i)return d.jsx(d.Fragment,{});for(var y=s.getFullYear(),S=i.getFullYear(),x=y;x<=S;x++)v.push(db(qP(new Date),x));var b=function(_){var C=db(Hn(n),Number(_.target.value));e.onChange(C)},E=(t=h==null?void 0:h.Dropdown)!==null&&t!==void 0?t:rk;return d.jsx(E,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:b,value:n.getFullYear(),caption:f(n,{locale:a}),children:v.map(function(_){return d.jsx("option",{value:_.getFullYear(),children:f(_,{locale:a})},_.getFullYear())})})}function M4(e,t){var n=g.useState(e),r=n[0],s=n[1],i=t===void 0?r:t;return[i,s]}function O4(e){var t=e.month,n=e.defaultMonth,r=e.today,s=t||n||r||new Date,i=e.toDate,a=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(i&&lu(i,s)<0){var h=-1*(c-1);s=Xr(i,h)}return a&&lu(s,a)<0&&(s=a),Hn(s)}function I4(){var e=pt(),t=O4(e),n=M4(t,e.month),r=n[0],s=n[1],i=function(a){var l;if(!e.disableNavigation){var c=Hn(a);s(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,i]}function A4(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,s=Hn(e),i=Hn(Xr(s,r)),a=lu(i,s),l=[],c=0;c<a;c++){var h=Xr(s,c);l.push(h)}return n&&(l=l.reverse()),l}function L4(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,s=t.numberOfMonths,i=s===void 0?1:s,a=r?i:1,l=Hn(e);if(!n)return Xr(l,a);var c=lu(n,e);if(!(c<i))return Xr(l,a)}}function D4(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,s=t.numberOfMonths,i=s===void 0?1:s,a=r?i:1,l=Hn(e);if(!n)return Xr(l,-a);var c=lu(l,n);if(!(c<=0))return Xr(l,-a)}}var sk=g.createContext(void 0);function F4(e){var t=pt(),n=I4(),r=n[0],s=n[1],i=A4(r,t),a=L4(r,t),l=D4(r,t),c=function(m){return i.some(function(v){return O0(m,v)})},h=function(m,v){c(m)||(v&&Ko(m,v)?s(Xr(m,1+t.numberOfMonths*-1)):s(m))},f={currentMonth:r,displayMonths:i,goToMonth:s,goToDate:h,previousMonth:l,nextMonth:a,isDateDisplayed:c};return d.jsx(sk.Provider,{value:f,children:e.children})}function Ou(){var e=g.useContext(sk);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function hb(e){var t,n=pt(),r=n.classNames,s=n.styles,i=n.components,a=Ou().goToMonth,l=function(f){a(Xr(f,e.displayIndex?-e.displayIndex:0))},c=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:nk,h=d.jsx(c,{id:e.id,displayMonth:e.displayMonth});return d.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[d.jsx("div",{className:r.vhidden,children:h}),d.jsx(j4,{onChange:l,displayMonth:e.displayMonth}),d.jsx(R4,{onChange:l,displayMonth:e.displayMonth})]})}function $4(e){return d.jsx("svg",Re({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:d.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function U4(e){return d.jsx("svg",Re({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:d.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var qh=g.forwardRef(function(e,t){var n=pt(),r=n.classNames,s=n.styles,i=[r.button_reset,r.button];e.className&&i.push(e.className);var a=i.join(" "),l=Re(Re({},s.button_reset),s.button);return e.style&&Object.assign(l,e.style),d.jsx("button",Re({},e,{ref:t,type:"button",className:a,style:l}))});function z4(e){var t,n,r=pt(),s=r.dir,i=r.locale,a=r.classNames,l=r.styles,c=r.labels,h=c.labelPrevious,f=c.labelNext,m=r.components;if(!e.nextMonth&&!e.previousMonth)return d.jsx(d.Fragment,{});var v=h(e.previousMonth,{locale:i}),y=[a.nav_button,a.nav_button_previous].join(" "),S=f(e.nextMonth,{locale:i}),x=[a.nav_button,a.nav_button_next].join(" "),b=(t=m==null?void 0:m.IconRight)!==null&&t!==void 0?t:U4,E=(n=m==null?void 0:m.IconLeft)!==null&&n!==void 0?n:$4;return d.jsxs("div",{className:a.nav,style:l.nav,children:[!e.hidePrevious&&d.jsx(qh,{name:"previous-month","aria-label":v,className:y,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:s==="rtl"?d.jsx(b,{className:a.nav_icon,style:l.nav_icon}):d.jsx(E,{className:a.nav_icon,style:l.nav_icon})}),!e.hideNext&&d.jsx(qh,{name:"next-month","aria-label":S,className:x,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:s==="rtl"?d.jsx(E,{className:a.nav_icon,style:l.nav_icon}):d.jsx(b,{className:a.nav_icon,style:l.nav_icon})})]})}function fb(e){var t=pt().numberOfMonths,n=Ou(),r=n.previousMonth,s=n.nextMonth,i=n.goToMonth,a=n.displayMonths,l=a.findIndex(function(S){return O0(e.displayMonth,S)}),c=l===0,h=l===a.length-1,f=t>1&&(c||!h),m=t>1&&(h||!c),v=function(){r&&i(r)},y=function(){s&&i(s)};return d.jsx(z4,{displayMonth:e.displayMonth,hideNext:f,hidePrevious:m,nextMonth:s,previousMonth:r,onPreviousClick:v,onNextClick:y})}function B4(e){var t,n=pt(),r=n.classNames,s=n.disableNavigation,i=n.styles,a=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:nk,h;return s?h=d.jsx(c,{id:e.id,displayMonth:e.displayMonth}):a==="dropdown"?h=d.jsx(hb,{displayMonth:e.displayMonth,id:e.id}):a==="dropdown-buttons"?h=d.jsxs(d.Fragment,{children:[d.jsx(hb,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),d.jsx(fb,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):h=d.jsxs(d.Fragment,{children:[d.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),d.jsx(fb,{displayMonth:e.displayMonth,id:e.id})]}),d.jsx("div",{className:r.caption,style:i.caption,children:h})}function W4(e){var t=pt(),n=t.footer,r=t.styles,s=t.classNames.tfoot;return n?d.jsx("tfoot",{className:s,style:r.tfoot,children:d.jsx("tr",{children:d.jsx("td",{colSpan:8,children:n})})}):d.jsx(d.Fragment,{})}function H4(e,t,n){for(var r=n?Zo(new Date):Cs(new Date,{locale:e,weekStartsOn:t}),s=[],i=0;i<7;i++){var a=Sn(r,i);s.push(a)}return s}function V4(){var e=pt(),t=e.classNames,n=e.styles,r=e.showWeekNumber,s=e.locale,i=e.weekStartsOn,a=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,h=H4(s,i,a);return d.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&d.jsx("td",{style:n.head_cell,className:t.head_cell}),h.map(function(f,m){return d.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(f,{locale:s}),children:l(f,{locale:s})},m)})]})}function G4(){var e,t=pt(),n=t.classNames,r=t.styles,s=t.components,i=(e=s==null?void 0:s.HeadRow)!==null&&e!==void 0?e:V4;return d.jsx("thead",{style:r.head,className:n.head,children:d.jsx(i,{})})}function q4(e){var t=pt(),n=t.locale,r=t.formatters.formatDay;return d.jsx(d.Fragment,{children:r(e.date,{locale:n})})}var I0=g.createContext(void 0);function Y4(e){if(!Ru(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return d.jsx(I0.Provider,{value:t,children:e.children})}return d.jsx(Z4,{initialProps:e.initialProps,children:e.children})}function Z4(e){var t=e.initialProps,n=e.children,r=t.selected,s=t.min,i=t.max,a=function(h,f,m){var v,y;(v=t.onDayClick)===null||v===void 0||v.call(t,h,f,m);var S=!!(f.selected&&s&&(r==null?void 0:r.length)===s);if(!S){var x=!!(!f.selected&&i&&(r==null?void 0:r.length)===i);if(!x){var b=r?ek([],r):[];if(f.selected){var E=b.findIndex(function(_){return Un(h,_)});b.splice(E,1)}else b.push(h);(y=t.onSelect)===null||y===void 0||y.call(t,b,h,f,m)}}},l={disabled:[]};r&&l.disabled.push(function(h){var f=i&&r.length>i-1,m=r.some(function(v){return Un(v,h)});return!!(f&&!m)});var c={selected:r,onDayClick:a,modifiers:l};return d.jsx(I0.Provider,{value:c,children:n})}function A0(){var e=g.useContext(I0);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function K4(e,t){var n=t||{},r=n.from,s=n.to;return r&&s?Un(s,e)&&Un(r,e)?void 0:Un(s,e)?{from:s,to:void 0}:Un(r,e)?void 0:cu(r,e)?{from:e,to:s}:{from:r,to:e}:s?cu(e,s)?{from:s,to:e}:{from:e,to:s}:r?Ko(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var L0=g.createContext(void 0);function Q4(e){if(!Mu(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return d.jsx(L0.Provider,{value:t,children:e.children})}return d.jsx(X4,{initialProps:e.initialProps,children:e.children})}function X4(e){var t=e.initialProps,n=e.children,r=t.selected,s=r||{},i=s.from,a=s.to,l=t.min,c=t.max,h=function(y,S,x){var b,E;(b=t.onDayClick)===null||b===void 0||b.call(t,y,S,x);var _=K4(y,r);(E=t.onSelect)===null||E===void 0||E.call(t,_,y,S,x)},f={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(f.range_start=[i],a?(f.range_end=[a],Un(i,a)||(f.range_middle=[{after:i,before:a}])):f.range_end=[i]):a&&(f.range_start=[a],f.range_end=[a]),l&&(i&&!a&&f.disabled.push({after:km(i,l-1),before:Sn(i,l-1)}),i&&a&&f.disabled.push({after:i,before:Sn(i,l-1)}),!i&&a&&f.disabled.push({after:km(a,l-1),before:Sn(a,l-1)})),c){if(i&&!a&&(f.disabled.push({before:Sn(i,-c+1)}),f.disabled.push({after:Sn(i,c-1)})),i&&a){var m=Cr(a,i)+1,v=c-m;f.disabled.push({before:km(i,v)}),f.disabled.push({after:Sn(a,v)})}!i&&a&&(f.disabled.push({before:Sn(a,-c+1)}),f.disabled.push({after:Sn(a,c-1)}))}return d.jsx(L0.Provider,{value:{selected:r,onDayClick:h,modifiers:f},children:n})}function D0(){var e=g.useContext(L0);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function nh(e){return Array.isArray(e)?ek([],e):e!==void 0?[e]:[]}function J4(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],s=n[1];t[r]=nh(s)}),t}var Jr;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Jr||(Jr={}));var e$=Jr.Selected,Ds=Jr.Disabled,t$=Jr.Hidden,n$=Jr.Today,Tm=Jr.RangeEnd,jm=Jr.RangeMiddle,Rm=Jr.RangeStart,r$=Jr.Outside;function s$(e,t,n){var r,s=(r={},r[e$]=nh(e.selected),r[Ds]=nh(e.disabled),r[t$]=nh(e.hidden),r[n$]=[e.today],r[Tm]=[],r[jm]=[],r[Rm]=[],r[r$]=[],r);return e.fromDate&&s[Ds].push({before:e.fromDate}),e.toDate&&s[Ds].push({after:e.toDate}),Ru(e)?s[Ds]=s[Ds].concat(t.modifiers[Ds]):Mu(e)&&(s[Ds]=s[Ds].concat(n.modifiers[Ds]),s[Rm]=n.modifiers[Rm],s[jm]=n.modifiers[jm],s[Tm]=n.modifiers[Tm]),s}var ik=g.createContext(void 0);function i$(e){var t=pt(),n=A0(),r=D0(),s=s$(t,n,r),i=J4(t.modifiers),a=Re(Re({},s),i);return d.jsx(ik.Provider,{value:a,children:e.children})}function ok(){var e=g.useContext(ik);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function o$(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function a$(e){return!!(e&&typeof e=="object"&&"from"in e)}function l$(e){return!!(e&&typeof e=="object"&&"after"in e)}function c$(e){return!!(e&&typeof e=="object"&&"before"in e)}function u$(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function d$(e,t){var n,r=t.from,s=t.to;if(r&&s){var i=Cr(s,r)<0;i&&(n=[s,r],r=n[0],s=n[1]);var a=Cr(e,r)>=0&&Cr(s,e)>=0;return a}return s?Un(s,e):r?Un(r,e):!1}function h$(e){return T0(e)}function f$(e){return Array.isArray(e)&&e.every(T0)}function p$(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(h$(n))return Un(e,n);if(f$(n))return n.includes(e);if(a$(n))return d$(e,n);if(u$(n))return n.dayOfWeek.includes(e.getDay());if(o$(n)){var r=Cr(n.before,e),s=Cr(n.after,e),i=r>0,a=s<0,l=cu(n.before,n.after);return l?a&&i:i||a}return l$(n)?Cr(e,n.after)>0:c$(n)?Cr(n.before,e)>0:typeof n=="function"?n(e):!1})}function F0(e,t,n){var r=Object.keys(t).reduce(function(i,a){var l=t[a];return p$(e,l)&&i.push(a),i},[]),s={};return r.forEach(function(i){return s[i]=!0}),n&&!O0(e,n)&&(s.outside=!0),s}function m$(e,t){for(var n=Hn(e[0]),r=R0(e[e.length-1]),s,i,a=n;a<=r;){var l=F0(a,t),c=!l.disabled&&!l.hidden;if(!c){a=Sn(a,1);continue}if(l.selected)return a;l.today&&!i&&(i=a),s||(s=a),a=Sn(a,1)}return i||s}var g$=365;function ak(e,t){var n=t.moveBy,r=t.direction,s=t.context,i=t.modifiers,a=t.retry,l=a===void 0?{count:0,lastFocused:e}:a,c=s.weekStartsOn,h=s.fromDate,f=s.toDate,m=s.locale,v={day:Sn,week:jv,month:Xr,year:sF,startOfWeek:function(b){return s.ISOWeek?Zo(b):Cs(b,{locale:m,weekStartsOn:c})},endOfWeek:function(b){return s.ISOWeek?YP(b):M0(b,{locale:m,weekStartsOn:c})}},y=v[n](e,r==="after"?1:-1);r==="before"&&h?y=iF([h,y]):r==="after"&&f&&(y=oF([f,y]));var S=!0;if(i){var x=F0(y,i);S=!x.disabled&&!x.hidden}return S?y:l.count>g$?l.lastFocused:ak(y,{moveBy:n,direction:r,context:s,modifiers:i,retry:Re(Re({},l),{count:l.count+1})})}var lk=g.createContext(void 0);function v$(e){var t=Ou(),n=ok(),r=g.useState(),s=r[0],i=r[1],a=g.useState(),l=a[0],c=a[1],h=m$(t.displayMonths,n),f=s??(l&&t.isDateDisplayed(l))?l:h,m=function(){c(s),i(void 0)},v=function(b){i(b)},y=pt(),S=function(b,E){if(s){var _=ak(s,{moveBy:b,direction:E,context:y,modifiers:n});Un(s,_)||(t.goToDate(_,s),v(_))}},x={focusedDay:s,focusTarget:f,blur:m,focus:v,focusDayAfter:function(){return S("day","after")},focusDayBefore:function(){return S("day","before")},focusWeekAfter:function(){return S("week","after")},focusWeekBefore:function(){return S("week","before")},focusMonthBefore:function(){return S("month","before")},focusMonthAfter:function(){return S("month","after")},focusYearBefore:function(){return S("year","before")},focusYearAfter:function(){return S("year","after")},focusStartOfWeek:function(){return S("startOfWeek","before")},focusEndOfWeek:function(){return S("endOfWeek","after")}};return d.jsx(lk.Provider,{value:x,children:e.children})}function $0(){var e=g.useContext(lk);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function y$(e,t){var n=ok(),r=F0(e,n,t);return r}var U0=g.createContext(void 0);function w$(e){if(!Gf(e.initialProps)){var t={selected:void 0};return d.jsx(U0.Provider,{value:t,children:e.children})}return d.jsx(x$,{initialProps:e.initialProps,children:e.children})}function x$(e){var t=e.initialProps,n=e.children,r=function(i,a,l){var c,h,f;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,a,l),a.selected&&!t.required){(h=t.onSelect)===null||h===void 0||h.call(t,void 0,i,a,l);return}(f=t.onSelect)===null||f===void 0||f.call(t,i,i,a,l)},s={selected:t.selected,onDayClick:r};return d.jsx(U0.Provider,{value:s,children:n})}function ck(){var e=g.useContext(U0);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function _$(e,t){var n=pt(),r=ck(),s=A0(),i=D0(),a=$0(),l=a.focusDayAfter,c=a.focusDayBefore,h=a.focusWeekAfter,f=a.focusWeekBefore,m=a.blur,v=a.focus,y=a.focusMonthBefore,S=a.focusMonthAfter,x=a.focusYearBefore,b=a.focusYearAfter,E=a.focusStartOfWeek,_=a.focusEndOfWeek,C=function(Y){var j,$,q,oe;Gf(n)?(j=r.onDayClick)===null||j===void 0||j.call(r,e,t,Y):Ru(n)?($=s.onDayClick)===null||$===void 0||$.call(s,e,t,Y):Mu(n)?(q=i.onDayClick)===null||q===void 0||q.call(i,e,t,Y):(oe=n.onDayClick)===null||oe===void 0||oe.call(n,e,t,Y)},k=function(Y){var j;v(e),(j=n.onDayFocus)===null||j===void 0||j.call(n,e,t,Y)},T=function(Y){var j;m(),(j=n.onDayBlur)===null||j===void 0||j.call(n,e,t,Y)},R=function(Y){var j;(j=n.onDayMouseEnter)===null||j===void 0||j.call(n,e,t,Y)},O=function(Y){var j;(j=n.onDayMouseLeave)===null||j===void 0||j.call(n,e,t,Y)},A=function(Y){var j;(j=n.onDayPointerEnter)===null||j===void 0||j.call(n,e,t,Y)},W=function(Y){var j;(j=n.onDayPointerLeave)===null||j===void 0||j.call(n,e,t,Y)},G=function(Y){var j;(j=n.onDayTouchCancel)===null||j===void 0||j.call(n,e,t,Y)},X=function(Y){var j;(j=n.onDayTouchEnd)===null||j===void 0||j.call(n,e,t,Y)},H=function(Y){var j;(j=n.onDayTouchMove)===null||j===void 0||j.call(n,e,t,Y)},U=function(Y){var j;(j=n.onDayTouchStart)===null||j===void 0||j.call(n,e,t,Y)},M=function(Y){var j;(j=n.onDayKeyUp)===null||j===void 0||j.call(n,e,t,Y)},ee=function(Y){var j;switch(Y.key){case"ArrowLeft":Y.preventDefault(),Y.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":Y.preventDefault(),Y.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":Y.preventDefault(),Y.stopPropagation(),h();break;case"ArrowUp":Y.preventDefault(),Y.stopPropagation(),f();break;case"PageUp":Y.preventDefault(),Y.stopPropagation(),Y.shiftKey?x():y();break;case"PageDown":Y.preventDefault(),Y.stopPropagation(),Y.shiftKey?b():S();break;case"Home":Y.preventDefault(),Y.stopPropagation(),E();break;case"End":Y.preventDefault(),Y.stopPropagation(),_();break}(j=n.onDayKeyDown)===null||j===void 0||j.call(n,e,t,Y)},V={onClick:C,onFocus:k,onBlur:T,onKeyDown:ee,onKeyUp:M,onMouseEnter:R,onMouseLeave:O,onPointerEnter:A,onPointerLeave:W,onTouchCancel:G,onTouchEnd:X,onTouchMove:H,onTouchStart:U};return V}function b$(){var e=pt(),t=ck(),n=A0(),r=D0(),s=Gf(e)?t.selected:Ru(e)?n.selected:Mu(e)?r.selected:void 0;return s}function S$(e){return Object.values(Jr).includes(e)}function E$(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var s=e.modifiersClassNames[r];if(s)n.push(s);else if(S$(r)){var i=e.classNames["day_".concat(r)];i&&n.push(i)}}),n}function C$(e,t){var n=Re({},e.styles.day);return Object.keys(t).forEach(function(r){var s;n=Re(Re({},n),(s=e.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function P$(e,t,n){var r,s,i,a=pt(),l=$0(),c=y$(e,t),h=_$(e,c),f=b$(),m=!!(a.onDayClick||a.mode!=="default");g.useEffect(function(){var R;c.outside||l.focusedDay&&m&&Un(l.focusedDay,e)&&((R=n.current)===null||R===void 0||R.focus())},[l.focusedDay,e,n,m,c.outside]);var v=E$(a,c).join(" "),y=C$(a,c),S=!!(c.outside&&!a.showOutsideDays||c.hidden),x=(i=(s=a.components)===null||s===void 0?void 0:s.DayContent)!==null&&i!==void 0?i:q4,b=d.jsx(x,{date:e,displayMonth:t,activeModifiers:c}),E={style:y,className:v,children:b,role:"gridcell"},_=l.focusTarget&&Un(l.focusTarget,e)&&!c.outside,C=l.focusedDay&&Un(l.focusedDay,e),k=Re(Re(Re({},E),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=C||_?0:-1,r)),h),T={isButton:m,isHidden:S,activeModifiers:c,selectedDays:f,buttonProps:k,divProps:E};return T}function k$(e){var t=g.useRef(null),n=P$(e.date,e.displayMonth,t);return n.isHidden?d.jsx("div",{role:"gridcell"}):n.isButton?d.jsx(qh,Re({name:"day",ref:t},n.buttonProps)):d.jsx("div",Re({},n.divProps))}function N$(e){var t=e.number,n=e.dates,r=pt(),s=r.onWeekNumberClick,i=r.styles,a=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,h=r.formatters.formatWeekNumber,f=h(Number(t),{locale:l});if(!s)return d.jsx("span",{className:a.weeknumber,style:i.weeknumber,children:f});var m=c(Number(t),{locale:l}),v=function(y){s(t,n,y)};return d.jsx(qh,{name:"week-number","aria-label":m,className:a.weeknumber,style:i.weeknumber,onClick:v,children:f})}function T$(e){var t,n,r=pt(),s=r.styles,i=r.classNames,a=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:k$,h=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:N$,f;return a&&(f=d.jsx("td",{className:i.cell,style:s.cell,children:d.jsx(h,{number:e.weekNumber,dates:e.dates})})),d.jsxs("tr",{className:i.row,style:s.row,children:[f,e.dates.map(function(m){return d.jsx("td",{className:i.cell,style:s.cell,role:"presentation",children:d.jsx(c,{displayMonth:e.displayMonth,date:m})},i4(m))})]})}function pb(e,t,n){for(var r=n!=null&&n.ISOWeek?YP(t):M0(t,n),s=n!=null&&n.ISOWeek?Zo(e):Cs(e,n),i=Cr(r,s),a=[],l=0;l<=i;l++)a.push(Sn(s,l));var c=a.reduce(function(h,f){var m=n!=null&&n.ISOWeek?KP(f):XP(f,n),v=h.find(function(y){return y.weekNumber===m});return v?(v.dates.push(f),h):(h.push({weekNumber:m,dates:[f]}),h)},[]);return c}function j$(e,t){var n=pb(Hn(e),R0(e),t);if(t!=null&&t.useFixedWeeks){var r=a4(e,t);if(r<6){var s=n[n.length-1],i=s.dates[s.dates.length-1],a=jv(i,6-r),l=pb(jv(i,1),a,t);n.push.apply(n,l)}}return n}function R$(e){var t,n,r,s=pt(),i=s.locale,a=s.classNames,l=s.styles,c=s.hideHead,h=s.fixedWeeks,f=s.components,m=s.weekStartsOn,v=s.firstWeekContainsDate,y=s.ISOWeek,S=j$(e.displayMonth,{useFixedWeeks:!!h,ISOWeek:y,locale:i,weekStartsOn:m,firstWeekContainsDate:v}),x=(t=f==null?void 0:f.Head)!==null&&t!==void 0?t:G4,b=(n=f==null?void 0:f.Row)!==null&&n!==void 0?n:T$,E=(r=f==null?void 0:f.Footer)!==null&&r!==void 0?r:W4;return d.jsxs("table",{id:e.id,className:a.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&d.jsx(x,{}),d.jsx("tbody",{className:a.tbody,style:l.tbody,children:S.map(function(_){return d.jsx(b,{displayMonth:e.displayMonth,dates:_.dates,weekNumber:_.weekNumber},_.weekNumber)})}),d.jsx(E,{displayMonth:e.displayMonth})]})}function M$(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var O$=M$()?g.useLayoutEffect:g.useEffect,Mm=!1,I$=0;function mb(){return"react-day-picker-".concat(++I$)}function A$(e){var t,n=e??(Mm?mb():null),r=g.useState(n),s=r[0],i=r[1];return O$(function(){s===null&&i(mb())},[]),g.useEffect(function(){Mm===!1&&(Mm=!0)},[]),(t=e??s)!==null&&t!==void 0?t:void 0}function L$(e){var t,n,r=pt(),s=r.dir,i=r.classNames,a=r.styles,l=r.components,c=Ou().displayMonths,h=A$(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),f=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,m=[i.month],v=a.month,y=e.displayIndex===0,S=e.displayIndex===c.length-1,x=!y&&!S;s==="rtl"&&(t=[y,S],S=t[0],y=t[1]),y&&(m.push(i.caption_start),v=Re(Re({},v),a.caption_start)),S&&(m.push(i.caption_end),v=Re(Re({},v),a.caption_end)),x&&(m.push(i.caption_between),v=Re(Re({},v),a.caption_between));var b=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:B4;return d.jsxs("div",{className:m.join(" "),style:v,children:[d.jsx(b,{id:h,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),d.jsx(R$,{id:f,"aria-labelledby":h,displayMonth:e.displayMonth})]},e.displayIndex)}function D$(e){var t=pt(),n=t.classNames,r=t.styles;return d.jsx("div",{className:n.months,style:r.months,children:e.children})}function F$(e){var t,n,r=e.initialProps,s=pt(),i=$0(),a=Ou(),l=g.useState(!1),c=l[0],h=l[1];g.useEffect(function(){s.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),h(!0)))},[s.initialFocus,c,i.focus,i.focusTarget,i]);var f=[s.classNames.root,s.className];s.numberOfMonths>1&&f.push(s.classNames.multiple_months),s.showWeekNumber&&f.push(s.classNames.with_weeknumber);var m=Re(Re({},s.styles.root),s.style),v=Object.keys(r).filter(function(S){return S.startsWith("data-")}).reduce(function(S,x){var b;return Re(Re({},S),(b={},b[x]=r[x],b))},{}),y=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:D$;return d.jsx("div",Re({className:f.join(" "),style:m,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},v,{children:d.jsx(y,{children:a.displayMonths.map(function(S,x){return d.jsx(L$,{displayIndex:x,displayMonth:S},x)})})}))}function $$(e){var t=e.children,n=c4(e,["children"]);return d.jsx(N4,{initialProps:n,children:d.jsx(F4,{children:d.jsx(w$,{initialProps:n,children:d.jsx(Y4,{initialProps:n,children:d.jsx(Q4,{initialProps:n,children:d.jsx(i$,{children:d.jsx(v$,{children:t})})})})})})})}function U$(e){return d.jsx($$,Re({},e,{children:d.jsx(F$,{initialProps:e})}))}function Yh({className:e,classNames:t,showOutsideDays:n=!0,...r}){return d.jsx(U$,{showOutsideDays:n,className:Te("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Te(Tv({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:["h-9 w-9 text-center text-sm p-0 relative","[&:has([aria-selected].day-range-start)]:rounded-l-full","[&:has([aria-selected].day-range-end)]:rounded-r-full","[&:has([aria-selected].day-outside)]:bg-accent/50","[&:has([aria-selected])]:bg-accent","first:[&:has([aria-selected])]:rounded-l-full","last:[&:has([aria-selected])]:rounded-r-full","focus-within:relative focus-within:z-20"].join(" "),day:Te(Tv({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...s})=>d.jsx(RC,{className:"h-4 w-4"}),IconRight:({...s})=>d.jsx(c0,{className:"h-4 w-4"})},...r})}Yh.displayName="Calendar";var Om=0;function qf(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??gb()),document.body.insertAdjacentElement("beforeend",e[1]??gb()),Om++,()=>{Om===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Om--}},[])}function gb(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Im="focusScope.autoFocusOnMount",Am="focusScope.autoFocusOnUnmount",vb={bubbles:!1,cancelable:!0},z$="FocusScope",Iu=g.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=e,[l,c]=g.useState(null),h=Tt(s),f=Tt(i),m=g.useRef(null),v=Ue(t,x=>c(x)),y=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let x=function(C){if(y.paused||!l)return;const k=C.target;l.contains(k)?m.current=k:pi(m.current,{select:!0})},b=function(C){if(y.paused||!l)return;const k=C.relatedTarget;k!==null&&(l.contains(k)||pi(m.current,{select:!0}))},E=function(C){if(document.activeElement===document.body)for(const T of C)T.removedNodes.length>0&&pi(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",b);const _=new MutationObserver(E);return l&&_.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",b),_.disconnect()}}},[r,l,y.paused]),g.useEffect(()=>{if(l){wb.add(y);const x=document.activeElement;if(!l.contains(x)){const E=new CustomEvent(Im,vb);l.addEventListener(Im,h),l.dispatchEvent(E),E.defaultPrevented||(B$(q$(uk(l)),{select:!0}),document.activeElement===x&&pi(l))}return()=>{l.removeEventListener(Im,h),setTimeout(()=>{const E=new CustomEvent(Am,vb);l.addEventListener(Am,f),l.dispatchEvent(E),E.defaultPrevented||pi(x??document.body,{select:!0}),l.removeEventListener(Am,f),wb.remove(y)},0)}}},[l,h,f,y]);const S=g.useCallback(x=>{if(!n&&!r||y.paused)return;const b=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,E=document.activeElement;if(b&&E){const _=x.currentTarget,[C,k]=W$(_);C&&k?!x.shiftKey&&E===k?(x.preventDefault(),n&&pi(C,{select:!0})):x.shiftKey&&E===C&&(x.preventDefault(),n&&pi(k,{select:!0})):E===_&&x.preventDefault()}},[n,r,y.paused]);return d.jsx(Ce.div,{tabIndex:-1,...a,ref:v,onKeyDown:S})});Iu.displayName=z$;function B$(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(pi(r,{select:t}),document.activeElement!==n)return}function W$(e){const t=uk(e),n=yb(t,e),r=yb(t.reverse(),e);return[n,r]}function uk(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function yb(e,t){for(const n of e)if(!H$(n,{upTo:t}))return n}function H$(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function V$(e){return e instanceof HTMLInputElement&&"select"in e}function pi(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&V$(e)&&t&&e.select()}}var wb=G$();function G$(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=xb(e,t),e.unshift(t)},remove(t){var n;e=xb(e,t),(n=e[0])==null||n.resume()}}}function xb(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function q$(e){return e.filter(t=>t.tagName!=="A")}var Y$=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ga=new WeakMap,Td=new WeakMap,jd={},Lm=0,dk=function(e){return e&&(e.host||dk(e.parentNode))},Z$=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=dk(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},K$=function(e,t,n,r){var s=Z$(t,Array.isArray(e)?e:[e]);jd[n]||(jd[n]=new WeakMap);var i=jd[n],a=[],l=new Set,c=new Set(s),h=function(m){!m||l.has(m)||(l.add(m),h(m.parentNode))};s.forEach(h);var f=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(v){if(l.has(v))f(v);else try{var y=v.getAttribute(r),S=y!==null&&y!=="false",x=(ga.get(v)||0)+1,b=(i.get(v)||0)+1;ga.set(v,x),i.set(v,b),a.push(v),x===1&&S&&Td.set(v,!0),b===1&&v.setAttribute(n,"true"),S||v.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",v,E)}})};return f(t),l.clear(),Lm++,function(){a.forEach(function(m){var v=ga.get(m)-1,y=i.get(m)-1;ga.set(m,v),i.set(m,y),v||(Td.has(m)||m.removeAttribute(r),Td.delete(m)),y||m.removeAttribute(n)}),Lm--,Lm||(ga=new WeakMap,ga=new WeakMap,Td=new WeakMap,jd={})}},Yf=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=Y$(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),K$(r,s,n,"aria-hidden")):function(){return null}},ys=function(){return ys=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ys.apply(this,arguments)};function hk(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function Q$(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var rh="right-scroll-bar-position",sh="width-before-scroll-bar",X$="with-scroll-bars-hidden",J$="--removed-body-scroll-bar-size";function Dm(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function eU(e,t){var n=g.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var tU=typeof window<"u"?g.useLayoutEffect:g.useEffect,_b=new WeakMap;function nU(e,t){var n=eU(null,function(r){return e.forEach(function(s){return Dm(s,r)})});return tU(function(){var r=_b.get(n);if(r){var s=new Set(r),i=new Set(e),a=n.current;s.forEach(function(l){i.has(l)||Dm(l,null)}),i.forEach(function(l){s.has(l)||Dm(l,a)})}_b.set(n,e)},[e]),n}function rU(e){return e}function sU(e,t){t===void 0&&(t=rU);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var a=t(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var f=a;a=[],f.forEach(i)},h=function(){return Promise.resolve().then(c)};h(),n={push:function(f){a.push(f),h()},filter:function(f){return a=a.filter(f),n}}}};return s}function iU(e){e===void 0&&(e={});var t=sU(null);return t.options=ys({async:!0,ssr:!1},e),t}var fk=function(e){var t=e.sideCar,n=hk(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,ys({},n))};fk.isSideCarExport=!0;function oU(e,t){return e.useMedium(t),fk}var pk=iU(),Fm=function(){},Zf=g.forwardRef(function(e,t){var n=g.useRef(null),r=g.useState({onScrollCapture:Fm,onWheelCapture:Fm,onTouchMoveCapture:Fm}),s=r[0],i=r[1],a=e.forwardProps,l=e.children,c=e.className,h=e.removeScrollBar,f=e.enabled,m=e.shards,v=e.sideCar,y=e.noRelative,S=e.noIsolation,x=e.inert,b=e.allowPinchZoom,E=e.as,_=E===void 0?"div":E,C=e.gapMode,k=hk(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=v,R=nU([n,t]),O=ys(ys({},k),s);return g.createElement(g.Fragment,null,f&&g.createElement(T,{sideCar:pk,removeScrollBar:h,shards:m,noRelative:y,noIsolation:S,inert:x,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:C}),a?g.cloneElement(g.Children.only(l),ys(ys({},O),{ref:R})):g.createElement(_,ys({},O,{className:c,ref:R}),l))});Zf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zf.classNames={fullWidth:sh,zeroRight:rh};var aU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function lU(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=aU();return t&&e.setAttribute("nonce",t),e}function cU(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function uU(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var dU=function(){var e=0,t=null;return{add:function(n){e==0&&(t=lU())&&(cU(t,n),uU(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},hU=function(){var e=dU();return function(t,n){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},mk=function(){var e=hU(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},fU={left:0,top:0,right:0,gap:0},$m=function(e){return parseInt(e||"",10)||0},pU=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[$m(n),$m(r),$m(s)]},mU=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return fU;var t=pU(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},gU=mk(),qa="data-scroll-locked",vU=function(e,t,n,r){var s=e.left,i=e.top,a=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(X$,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(qa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(rh,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(sh,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(rh," .").concat(rh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(sh," .").concat(sh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(qa,`] {
    `).concat(J$,": ").concat(l,`px;
  }
`)},bb=function(){var e=parseInt(document.body.getAttribute(qa)||"0",10);return isFinite(e)?e:0},yU=function(){g.useEffect(function(){return document.body.setAttribute(qa,(bb()+1).toString()),function(){var e=bb()-1;e<=0?document.body.removeAttribute(qa):document.body.setAttribute(qa,e.toString())}},[])},wU=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;yU();var i=g.useMemo(function(){return mU(s)},[s]);return g.createElement(gU,{styles:vU(i,!t,s,n?"":"!important")})},Rv=!1;if(typeof window<"u")try{var Rd=Object.defineProperty({},"passive",{get:function(){return Rv=!0,!0}});window.addEventListener("test",Rd,Rd),window.removeEventListener("test",Rd,Rd)}catch{Rv=!1}var va=Rv?{passive:!1}:!1,xU=function(e){return e.tagName==="TEXTAREA"},gk=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!xU(e)&&n[t]==="visible")},_U=function(e){return gk(e,"overflowY")},bU=function(e){return gk(e,"overflowX")},Sb=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=vk(e,r);if(s){var i=yk(e,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},SU=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},EU=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},vk=function(e,t){return e==="v"?_U(t):bU(t)},yk=function(e,t){return e==="v"?SU(t):EU(t)},CU=function(e,t){return e==="h"&&t==="rtl"?-1:1},PU=function(e,t,n,r,s){var i=CU(e,window.getComputedStyle(t).direction),a=i*r,l=n.target,c=t.contains(l),h=!1,f=a>0,m=0,v=0;do{if(!l)break;var y=yk(e,l),S=y[0],x=y[1],b=y[2],E=x-b-i*S;(S||E)&&vk(e,l)&&(m+=E,v+=S);var _=l.parentNode;l=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(m)<1||!s)||!f&&(Math.abs(v)<1||!s))&&(h=!0),h},Md=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Eb=function(e){return[e.deltaX,e.deltaY]},Cb=function(e){return e&&"current"in e?e.current:e},kU=function(e,t){return e[0]===t[0]&&e[1]===t[1]},NU=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},TU=0,ya=[];function jU(e){var t=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(TU++)[0],i=g.useState(mk)[0],a=g.useRef(e);g.useEffect(function(){a.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var x=Q$([e.lockRef.current],(e.shards||[]).map(Cb),!0).filter(Boolean);return x.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=g.useCallback(function(x,b){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!a.current.allowPinchZoom;var E=Md(x),_=n.current,C="deltaX"in x?x.deltaX:_[0]-E[0],k="deltaY"in x?x.deltaY:_[1]-E[1],T,R=x.target,O=Math.abs(C)>Math.abs(k)?"h":"v";if("touches"in x&&O==="h"&&R.type==="range")return!1;var A=Sb(O,R);if(!A)return!0;if(A?T=O:(T=O==="v"?"h":"v",A=Sb(O,R)),!A)return!1;if(!r.current&&"changedTouches"in x&&(C||k)&&(r.current=T),!T)return!0;var W=r.current||T;return PU(W,b,x,W==="h"?C:k,!0)},[]),c=g.useCallback(function(x){var b=x;if(!(!ya.length||ya[ya.length-1]!==i)){var E="deltaY"in b?Eb(b):Md(b),_=t.current.filter(function(T){return T.name===b.type&&(T.target===b.target||b.target===T.shadowParent)&&kU(T.delta,E)})[0];if(_&&_.should){b.cancelable&&b.preventDefault();return}if(!_){var C=(a.current.shards||[]).map(Cb).filter(Boolean).filter(function(T){return T.contains(b.target)}),k=C.length>0?l(b,C[0]):!a.current.noIsolation;k&&b.cancelable&&b.preventDefault()}}},[]),h=g.useCallback(function(x,b,E,_){var C={name:x,delta:b,target:E,should:_,shadowParent:RU(E)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(k){return k!==C})},1)},[]),f=g.useCallback(function(x){n.current=Md(x),r.current=void 0},[]),m=g.useCallback(function(x){h(x.type,Eb(x),x.target,l(x,e.lockRef.current))},[]),v=g.useCallback(function(x){h(x.type,Md(x),x.target,l(x,e.lockRef.current))},[]);g.useEffect(function(){return ya.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:v}),document.addEventListener("wheel",c,va),document.addEventListener("touchmove",c,va),document.addEventListener("touchstart",f,va),function(){ya=ya.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,va),document.removeEventListener("touchmove",c,va),document.removeEventListener("touchstart",f,va)}},[]);var y=e.removeScrollBar,S=e.inert;return g.createElement(g.Fragment,null,S?g.createElement(i,{styles:NU(s)}):null,y?g.createElement(wU,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function RU(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const MU=oU(pk,jU);var Au=g.forwardRef(function(e,t){return g.createElement(Zf,ys({},e,{ref:t,sideCar:MU}))});Au.classNames=Zf.classNames;var Kf="Popover",[wk,uq]=Vn(Kf,[no]),Lu=no(),[OU,so]=wk(Kf),xk=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!1}=e,l=Lu(t),c=g.useRef(null),[h,f]=g.useState(!1),[m,v]=Yi({prop:r,defaultProp:s??!1,onChange:i,caller:Kf});return d.jsx(_0,{...l,children:d.jsx(OU,{scope:t,contentId:bs(),triggerRef:c,open:m,onOpenChange:v,onOpenToggle:g.useCallback(()=>v(y=>!y),[v]),hasCustomAnchor:h,onCustomAnchorAdd:g.useCallback(()=>f(!0),[]),onCustomAnchorRemove:g.useCallback(()=>f(!1),[]),modal:a,children:n})})};xk.displayName=Kf;var _k="PopoverAnchor",IU=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=so(_k,n),i=Lu(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return g.useEffect(()=>(a(),()=>l()),[a,l]),d.jsx(ku,{...i,...r,ref:t})});IU.displayName=_k;var bk="PopoverTrigger",Sk=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=so(bk,n),i=Lu(n),a=Ue(t,s.triggerRef),l=d.jsx(Ce.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Nk(s.open),...r,ref:a,onClick:ue(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:d.jsx(ku,{asChild:!0,...i,children:l})});Sk.displayName=bk;var z0="PopoverPortal",[AU,LU]=wk(z0,{forceMount:void 0}),Ek=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,i=so(z0,t);return d.jsx(AU,{scope:t,forceMount:n,children:d.jsx(on,{present:n||i.open,children:d.jsx(El,{asChild:!0,container:s,children:r})})})};Ek.displayName=z0;var gl="PopoverContent",Ck=g.forwardRef((e,t)=>{const n=LU(gl,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,i=so(gl,e.__scopePopover);return d.jsx(on,{present:r||i.open,children:i.modal?d.jsx(FU,{...s,ref:t}):d.jsx($U,{...s,ref:t})})});Ck.displayName=gl;var DU=qi("PopoverContent.RemoveScroll"),FU=g.forwardRef((e,t)=>{const n=so(gl,e.__scopePopover),r=g.useRef(null),s=Ue(t,r),i=g.useRef(!1);return g.useEffect(()=>{const a=r.current;if(a)return Yf(a)},[]),d.jsx(Au,{as:DU,allowPinchZoom:!0,children:d.jsx(Pk,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ue(e.onCloseAutoFocus,a=>{var l;a.preventDefault(),i.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ue(e.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,h=l.button===2||c;i.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:ue(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),$U=g.forwardRef((e,t)=>{const n=so(gl,e.__scopePopover),r=g.useRef(!1),s=g.useRef(!1);return d.jsx(Pk,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,h;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((h=n.triggerRef.current)==null?void 0:h.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),Pk=g.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:h,onInteractOutside:f,...m}=e,v=so(gl,n),y=Lu(n);return qf(),d.jsx(Iu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:d.jsx(na,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:h,onDismiss:()=>v.onOpenChange(!1),children:d.jsx(zf,{"data-state":Nk(v.open),role:"dialog",id:v.contentId,...y,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),kk="PopoverClose",UU=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=so(kk,n);return d.jsx(Ce.button,{type:"button",...r,ref:t,onClick:ue(e.onClick,()=>s.onOpenChange(!1))})});UU.displayName=kk;var zU="PopoverArrow",BU=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Lu(n);return d.jsx(Bf,{...s,...r,ref:t})});BU.displayName=zU;function Nk(e){return e?"open":"closed"}var WU=xk,HU=Sk,VU=Ek,Tk=Ck;const jk=WU,Rk=HU,B0=g.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},s)=>d.jsx(VU,{children:d.jsx(Tk,{ref:s,align:t,sideOffset:n,className:Te("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));B0.displayName=Tk.displayName;const wt=g.forwardRef(({className:e,type:t,...n},r)=>d.jsx("input",{type:t,className:Te("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));wt.displayName="Input";const Rl=g.forwardRef(({className:e,...t},n)=>d.jsx("textarea",{className:Te("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Rl.displayName="Textarea";var GU="Label",Mk=g.forwardRef((e,t)=>d.jsx(Ce.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Mk.displayName=GU;var Ok=Mk;const qU=Lf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),tt=g.forwardRef(({className:e,...t},n)=>d.jsx(Ok,{ref:n,className:Te(qU(),e),...t}));tt.displayName=Ok.displayName;const YU="modulepreload",ZU=function(e){return"/"+e},Pb={},Du=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=ZU(c),c in Pb)return;Pb[c]=!0;const h=c.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":YU,h||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),h)return new Promise((v,y)=>{m.addEventListener("load",v),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},KU=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Du(async()=>{const{default:r}=await Promise.resolve().then(()=>Ml);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class W0 extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class kb extends W0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Nb extends W0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Tb extends W0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Mv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Mv||(Mv={}));var QU=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};class XU{constructor(t,{headers:n={},customFetch:r,region:s=Mv.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=KU(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return QU(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:i,method:a,body:l,signal:c}=r;let h={},{region:f}=r;f||(f=this.region);const m=new URL(`${this.url}/${n}`);f&&f!=="any"&&(h["x-region"]=f,m.searchParams.set("forceFunctionRegion",f));let v;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=l):typeof l=="string"?(h["Content-Type"]="text/plain",v=l):typeof FormData<"u"&&l instanceof FormData?v=l:(h["Content-Type"]="application/json",v=JSON.stringify(l)));const y=yield this.fetch(m.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),i),body:v,signal:c}).catch(E=>{throw E.name==="AbortError"?E:new kb(E)}),S=y.headers.get("x-relay-error");if(S&&S==="true")throw new Nb(y);if(!y.ok)throw new Tb(y);let x=((s=y.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return x==="application/json"?b=yield y.json():x==="application/octet-stream"?b=yield y.blob():x==="text/event-stream"?b=y:x==="multipart/form-data"?b=yield y.formData():b=yield y.text(),{data:b,error:null,response:y}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new kb(i)}:{data:null,error:i,response:i instanceof Tb||i instanceof Nb?i.context:void 0}}})}}var Fn={},H0={},Qf={},Fu={},Xf={},Jf={},JU=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},vl=JU();const ez=vl.fetch,Ik=vl.fetch.bind(vl),Ak=vl.Headers,tz=vl.Request,nz=vl.Response,Ml=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ak,Request:tz,Response:nz,default:Ik,fetch:ez},Symbol.toStringTag,{value:"Module"})),rz=XM(Ml);var ep={};Object.defineProperty(ep,"__esModule",{value:!0});let sz=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};ep.default=sz;var Lk=sr&&sr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jf,"__esModule",{value:!0});const iz=Lk(rz),oz=Lk(ep);let az=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=iz.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c,h;let f=null,m=null,v=null,y=i.status,S=i.statusText;if(i.ok){if(this.method!=="HEAD"){const _=await i.text();_===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?m=_:m=JSON.parse(_))}const b=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),E=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&E&&E.length>1&&(v=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,v=null,y=406,S="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const b=await i.text();try{f=JSON.parse(b),Array.isArray(f)&&i.status===404&&(m=[],f=null,y=200,S="OK")}catch{i.status===404&&b===""?(y=204,S="No Content"):f={message:b}}if(f&&this.isMaybeSingle&&(!((h=f==null?void 0:f.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,y=200,S="OK"),f&&this.shouldThrowOnError)throw new oz.default(f)}return{error:f,data:m,count:v,status:y,statusText:S}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Jf.default=az;var lz=sr&&sr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xf,"__esModule",{value:!0});const cz=lz(Jf);let uz=class extends cz.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),h=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${h}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Xf.default=uz;var dz=sr&&sr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fu,"__esModule",{value:!0});const hz=dz(Xf);let fz=class extends hz.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Fu.default=fz;var pz=sr&&sr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qf,"__esModule",{value:!0});const cc=pz(Fu);let mz=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(t,n){const{head:r=!1,count:s}=n??{},i=r?"HEAD":"GET";let a=!1;const l=(t??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",l),s&&this.headers.append("Prefer",`count=${s}`),new cc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new cc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(c.length>0){const h=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new cc.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new cc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new cc.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Qf.default=mz;var Dk=sr&&sr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(H0,"__esModule",{value:!0});const gz=Dk(Qf),vz=Dk(Fu);let yz=class Fk{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new gz.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Fk(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${t}`);let h;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([m,v])=>v!==void 0).map(([m,v])=>[m,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([m,v])=>{c.searchParams.append(m,v)})):(l="POST",h=n);const f=new Headers(this.headers);return i&&f.set("Prefer",`count=${i}`),new vz.default({method:l,url:c,headers:f,schema:this.schemaName,body:h,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};H0.default=yz;var Ol=sr&&sr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.PostgrestError=Fn.PostgrestBuilder=Fn.PostgrestTransformBuilder=Fn.PostgrestFilterBuilder=Fn.PostgrestQueryBuilder=Fn.PostgrestClient=void 0;const $k=Ol(H0);Fn.PostgrestClient=$k.default;const Uk=Ol(Qf);Fn.PostgrestQueryBuilder=Uk.default;const zk=Ol(Fu);Fn.PostgrestFilterBuilder=zk.default;const Bk=Ol(Xf);Fn.PostgrestTransformBuilder=Bk.default;const Wk=Ol(Jf);Fn.PostgrestBuilder=Wk.default;const Hk=Ol(ep);Fn.PostgrestError=Hk.default;var wz=Fn.default={PostgrestClient:$k.default,PostgrestQueryBuilder:Uk.default,PostgrestFilterBuilder:zk.default,PostgrestTransformBuilder:Bk.default,PostgrestBuilder:Wk.default,PostgrestError:Hk.default};const{PostgrestClient:xz,PostgrestQueryBuilder:gq,PostgrestFilterBuilder:vq,PostgrestTransformBuilder:yq,PostgrestBuilder:wq,PostgrestError:xq}=wz;class _z{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const bz="2.75.0",Sz=`realtime-js/${bz}`,Ez="1.0.0",Ov=1e4,Cz=1e3,Pz=100;var Ic;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ic||(Ic={}));var zt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(zt||(zt={}));var Wr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Wr||(Wr={}));var Iv;(function(e){e.websocket="websocket"})(Iv||(Iv={}));var So;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(So||(So={}));class kz{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+s));a=a+s;const c=r.decode(t.slice(a,a+i));a=a+i;const h=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:h}}}class Vk{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ht;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ht||(ht={}));const jb=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,a)=>(i[a]=Nz(a,e,t,s),i),{}):{}},Nz=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=n[e];return i&&!r.includes(i)?Gk(i,a):Av(a)},Gk=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Mz(t,n)}switch(e){case ht.bool:return Tz(t);case ht.float4:case ht.float8:case ht.int2:case ht.int4:case ht.int8:case ht.numeric:case ht.oid:return jz(t);case ht.json:case ht.jsonb:return Rz(t);case ht.timestamp:return Oz(t);case ht.abstime:case ht.date:case ht.daterange:case ht.int4range:case ht.int8range:case ht.money:case ht.reltime:case ht.text:case ht.time:case ht.timestamptz:case ht.timetz:case ht.tsrange:case ht.tstzrange:return Av(t);default:return Av(t)}},Av=e=>e,Tz=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},jz=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Rz=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Mz=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const a=e.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Gk(t,l))}return e},Oz=e=>typeof e=="string"?e.replace(" ","T"):e,qk=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Um{constructor(t,n,r={},s=Ov){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Rb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Rb||(Rb={}));class Ac{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ac.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=Ac.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ac.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(i,(h,f)=>{a[h]||(c[h]=f)}),this.map(a,(h,f)=>{const m=i[h];if(m){const v=f.map(b=>b.presence_ref),y=m.map(b=>b.presence_ref),S=f.filter(b=>y.indexOf(b.presence_ref)<0),x=m.filter(b=>v.indexOf(b.presence_ref)<0);S.length>0&&(l[h]=S),x.length>0&&(c[h]=x)}else l[h]=f}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var h;const f=(h=t[l])!==null&&h!==void 0?h:[];if(t[l]=this.cloneDeep(c),f.length>0){const m=t[l].map(y=>y.presence_ref),v=f.filter(y=>m.indexOf(y.presence_ref)<0);t[l].unshift(...v)}r(l,f,c)}),this.map(a,(l,c)=>{let h=t[l];if(!h)return;const f=c.map(m=>m.presence_ref);h=h.filter(m=>f.indexOf(m.presence_ref)<0),t[l]=h,s(l,h,c),h.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Mb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Mb||(Mb={}));var Lc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Lc||(Lc={}));var Us;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Us||(Us={}));class V0{constructor(t,n={config:{}},r){var s,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Um(this,Wr.join,this.params,this.timeout),this.rejoinTimer=new Vk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Wr.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Ac(this),this.broadcastEndpointURL=qk(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==zt.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,h=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[Lc.PRESENCE]&&this.bindings[Lc.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,m={},v={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:h,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(Us.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(Us.CLOSED)),this.updateJoinPayload(Object.assign({config:v},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var S;if(this.socket.setAuth(),y===void 0){t==null||t(Us.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,b=(S=x==null?void 0:x.length)!==null&&S!==void 0?S:0,E=[];for(let _=0;_<b;_++){const C=x[_],{filter:{event:k,schema:T,table:R,filter:O}}=C,A=y&&y[_];if(A&&A.event===k&&A.schema===T&&A.table===R&&A.filter===O)E.push(Object.assign(Object.assign({},C),{id:A.id}));else{this.unsubscribe(),this.state=zt.errored,t==null||t(Us.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,t&&t(Us.SUBSCRIBED);return}}).receive("error",y=>{this.state=zt.errored,t==null||t(Us.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Us.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===zt.joined&&t===Lc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const h=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=zt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Wr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Um(this,Wr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=zt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Um(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Pz){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:h,join:f}=Wr;if(r&&[l,c,h,f].indexOf(a)>=0&&r!==this._joinRef())return;let v=this._onMessage(a,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var S,x,b;return((S=y.filter)===null||S===void 0?void 0:S.event)==="*"||((b=(x=y.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(y=>y.callback(v,r)):(i=this.bindings[a])===null||i===void 0||i.filter(y=>{var S,x,b,E,_,C;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in y){const k=y.id,T=(S=y.filter)===null||S===void 0?void 0:S.event;return k&&((x=n.ids)===null||x===void 0?void 0:x.includes(k))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const k=(_=(E=y==null?void 0:y.filter)===null||E===void 0?void 0:E.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return k==="*"||k===((C=n==null?void 0:n.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===a}).map(y=>{if(typeof v=="object"&&"ids"in v){const S=v.data,{schema:x,table:b,commit_timestamp:E,type:_,errors:C}=S;v=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:E,eventType:_,new:{},old:{},errors:C}),this._getPayloadRecords(S))}y.callback(v,r)})}_isClosed(){return this.state===zt.closed}_isJoined(){return this.state===zt.joined}_isJoining(){return this.state===zt.joining}_isLeaving(){return this.state===zt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&V0.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Wr.close,{},t)}_onError(t){this._on(Wr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=jb(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=jb(t.columns,t.old_record)),n}}const zm=()=>{},Od={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Iz=[1e3,2e3,5e3,1e4],Az=1e4,Lz=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Dz{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ov,this.transport=null,this.heartbeatIntervalMs=Od.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zm,this.ref=0,this.reconnectTimer=null,this.logger=zm,this.conn=null,this.sendBuffer=[],this.serializer=new kz,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>Du(async()=>{const{default:l}=await Promise.resolve().then(()=>Ml);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Iv.websocket}`,this.httpEndpoint=qk(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=_z.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ez}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ic.connecting:return So.Connecting;case Ic.open:return So.Open;case Ic.closing:return So.Closing;default:return So.Closed}}isConnected(){return this.connectionState()===So.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new V0(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Cz,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Od.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Wr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Lz],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:Sz};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Wr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Vk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Od.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,a,l,c,h,f;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Ov,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Od.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:zm,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:m=>Iz[m-1]||Az,this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(m,v)=>v(JSON.stringify(m)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class G0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Dt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Fz extends G0{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Lv extends G0{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var $z=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};const Yk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Du(async()=>{const{default:r}=await Promise.resolve().then(()=>Ml);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Uz=()=>$z(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Du(()=>Promise.resolve().then(()=>Ml),void 0)).Response:Response}),Dv=e=>{if(Array.isArray(e))return e.map(n=>Dv(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Dv(r)}),t},zz=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var sa=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};const Bm=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Bz=(e,t,n)=>sa(void 0,void 0,void 0,function*(){const r=yield Uz();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,a=(s==null?void 0:s.statusCode)||i+"";t(new Fz(Bm(s),i,a))}).catch(s=>{t(new Lv(Bm(s),s))}):t(new Lv(Bm(e),e))}),Wz=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(zz(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function $u(e,t,n,r,s,i){return sa(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,Wz(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>Bz(c,l,r))})})}function Zh(e,t,n,r){return sa(this,void 0,void 0,function*(){return $u(e,"GET",t,n,r)})}function fs(e,t,n,r,s){return sa(this,void 0,void 0,function*(){return $u(e,"POST",t,r,s,n)})}function Fv(e,t,n,r,s){return sa(this,void 0,void 0,function*(){return $u(e,"PUT",t,r,s,n)})}function Hz(e,t,n,r){return sa(this,void 0,void 0,function*(){return $u(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Zk(e,t,n,r,s){return sa(this,void 0,void 0,function*(){return $u(e,"DELETE",t,r,s,n)})}var Vz=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};class Gz{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Vz(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dt(t))return{data:null,error:t};throw t}})}}var qz=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};class Yz{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new Gz(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return qz(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dt(t))return{data:null,error:t};throw t}})}}var Mn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};const Zz={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ob={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Kz{constructor(t,n={},r,s){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=Yk(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,s){return Mn(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Ob),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const h=this._removeEmptyFolders(n),f=this._getFinalPath(h),m=yield(t=="PUT"?Fv:fs)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:h,id:m.Id,fullPath:m.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Dt(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Mn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Mn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const h=Object.assign({upsert:Ob.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",h.cacheControl)):(c=r,f["cache-control"]=`max-age=${h.cacheControl}`,f["content-type"]=h.contentType);const m=yield Fv(this.fetch,l.toString(),c,{headers:f});return{data:{path:i,fullPath:m.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Dt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Mn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield fs(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new G0("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Mn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Mn(this,void 0,void 0,function*(){try{return{data:yield fs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Mn(this,void 0,void 0,function*(){try{return{data:{path:(yield fs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Mn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield fs(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Mn(this,void 0,void 0,function*(){try{const s=yield fs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}})}download(t,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>Zh(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new Yz(c,this.shouldThrowOnError)}info(t){return Mn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Zh(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Dv(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}})}exists(t){return Mn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield Hz(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dt(r)&&r instanceof Lv){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${h}`)}}}remove(t){return Mn(this,void 0,void 0,function*(){try{return{data:yield Zk(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Mn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Zz),n),{prefix:t||""});return{data:yield fs(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}})}listV2(t,n){return Mn(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield fs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Qz="2.75.0",Xz={"X-Client-Info":`storage-js/${Qz}`};var wa=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};class Jz{constructor(t,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xz),n),this.fetch=Yk(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return wa(this,void 0,void 0,function*(){try{return{data:yield Zh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dt(t))return{data:null,error:t};throw t}})}getBucket(t){return wa(this,void 0,void 0,function*(){try{return{data:yield Zh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}createBucket(t){return wa(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield fs(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}})}updateBucket(t,n){return wa(this,void 0,void 0,function*(){try{return{data:yield Fv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return wa(this,void 0,void 0,function*(){try{return{data:yield fs(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return wa(this,void 0,void 0,function*(){try{return{data:yield Zk(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}}class eB extends Jz{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new Kz(this.url,this.headers,t,this.fetch)}}const tB="2.75.0";let wc="";typeof Deno<"u"?wc="deno":typeof document<"u"?wc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wc="react-native":wc="node";const nB={"X-Client-Info":`supabase-js-${wc}/${tB}`},rB={headers:nB},sB={schema:"public"},iB={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},oB={};var aB=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};const lB=e=>{let t;return e?t=e:typeof fetch>"u"?t=Ik:t=fetch,(...n)=>t(...n)},cB=()=>typeof Headers>"u"?Ak:Headers,uB=(e,t,n)=>{const r=lB(n),s=cB();return(i,a)=>aB(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let h=new s(a==null?void 0:a.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:h}))})};var dB=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};function hB(e){return e.endsWith("/")?e:e+"/"}function fB(e,t){var n,r;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:h,realtime:f,global:m}=t,v={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},h),i),realtime:Object.assign(Object.assign({},f),a),storage:{},global:Object.assign(Object.assign(Object.assign({},m),l),{headers:Object.assign(Object.assign({},(n=m==null?void 0:m.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>dB(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function pB(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(hB(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Kk="2.75.0",Ca=30*1e3,$v=3,Wm=$v*Ca,mB="http://localhost:9999",gB="supabase.auth.token",vB={"X-Client-Info":`gotrue-js/${Kk}`},Uv="X-Supabase-Api-Version",Qk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yB=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wB=10*60*1e3;class uu extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ne(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class xB extends uu{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function _B(e){return Ne(e)&&e.name==="AuthApiError"}class Eo extends uu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class io extends uu{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class mi extends io{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function bB(e){return Ne(e)&&e.name==="AuthSessionMissingError"}class xa extends io{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Id extends io{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ad extends io{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function SB(e){return Ne(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ib extends io{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zv extends io{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Hm(e){return Ne(e)&&e.name==="AuthRetryableFetchError"}class Ab extends io{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Bv extends io{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Kh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lb=` 	
\r=`.split(""),EB=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Lb.length;t+=1)e[Lb[t].charCodeAt(0)]=-2;for(let t=0;t<Kh.length;t+=1)e[Kh[t].charCodeAt(0)]=t;return e})();function Db(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Kh[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Kh[r]),t.queuedBits-=6}}function Xk(e,t,n){const r=EB[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Fb(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{kB(a,r,n)};for(let a=0;a<e.length;a+=1)Xk(e.charCodeAt(a),s,i);return t.join("")}function CB(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function PB(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}CB(r,t)}}function kB(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Ya(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Xk(e.charCodeAt(s),n,r);return new Uint8Array(t)}function NB(e){const t=[];return PB(e,n=>t.push(n)),new Uint8Array(t)}function No(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Db(s,n,r)),Db(null,n,r),t.join("")}function TB(e){return Math.round(Date.now()/1e3)+e}function jB(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Xn=()=>typeof window<"u"&&typeof document<"u",go={tested:!1,writable:!1},Jk=()=>{if(!Xn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(go.tested)return go.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),go.tested=!0,go.writable=!0}catch{go.tested=!0,go.writable=!1}return go.writable};function RB(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const eN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Du(async()=>{const{default:r}=await Promise.resolve().then(()=>Ml);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},MB=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Pa=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},vo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},hi=async(e,t)=>{await e.removeItem(t)};class tp{constructor(){this.promise=new tp.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}tp.promiseConstructor=Promise;function Vm(e){const t=e.split(".");if(t.length!==3)throw new Bv("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!yB.test(t[r]))throw new Bv("JWT not in base64url format");return{header:JSON.parse(Fb(t[0])),payload:JSON.parse(Fb(t[1])),signature:Ya(t[2]),raw:{header:t[0],payload:t[1]}}}async function OB(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function IB(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){r(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function AB(e){return("0"+e.toString(16)).substr(-2)}function LB(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,AB).join("")}async function DB(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function FB(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await DB(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _a(e,t,n=!1){const r=LB();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Pa(e,`${t}-code-verifier`,s);const i=await FB(r);return[i,r===i?"plain":"s256"]}const $B=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function UB(e){const t=e.headers.get(Uv);if(!t||!t.match($B))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function zB(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function BB(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const WB=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ba(e){if(!WB.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Gm(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function $b(e){return JSON.parse(JSON.stringify(e))}var HB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const _o=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),VB=[502,503,504];async function Ub(e){var t;if(!MB(e))throw new zv(_o(e),0);if(VB.includes(e.status))throw new zv(_o(e),e.status);let n;try{n=await e.json()}catch(i){throw new Eo(_o(i),i)}let r;const s=UB(e);if(s&&s.getTime()>=Qk["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ab(_o(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new mi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Ab(_o(n),e.status,n.weak_password.reasons);throw new xB(_o(n),e.status||500,r)}const GB=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function De(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Uv]||(i[Uv]=Qk["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await qB(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function qB(e,t,n,r,s,i){const a=GB(t,r,s,i);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new zv(_o(c),0)}if(l.ok||await Ub(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Ub(c)}}function Dr(e){var t;let n=null;KB(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=TB(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function zb(e){const t=Dr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function xi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function YB(e){return{data:e,error:null}}function ZB(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=HB(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function Bb(e){return e}function KB(e){return e.access_token&&e.refresh_token&&e.expires_in}const qm=["global","local","others"];var QB=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class XB{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=eN(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=qm[0]){if(qm.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qm.join(", ")}`);try{return await De(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await De(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:xi})}catch(r){if(Ne(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=QB(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await De(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:ZB,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ne(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await De(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:xi})}catch(n){if(Ne(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,a,l,c;try{const h={nextPage:null,lastPage:0,total:0},f=await De(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Bb});if(f.error)throw f.error;const m=await f.json(),v=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(S=>{const x=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(S.split(";")[1].split("=")[1]);h[`${b}Page`]=x}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(Ne(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){ba(t);try{return await De(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:xi})}catch(n){if(Ne(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ba(t);try{return await De(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:xi})}catch(r){if(Ne(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){ba(t);try{return await De(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:xi})}catch(r){if(Ne(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){ba(t.userId);try{const{data:n,error:r}=await De(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ba(t.userId),ba(t.id);try{return{data:await De(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,i,a,l,c;try{const h={nextPage:null,lastPage:0,total:0},f=await De(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Bb});if(f.error)throw f.error;const m=await f.json(),v=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(S=>{const x=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(S.split(";")[1].split("=")[1]);h[`${b}Page`]=x}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(Ne(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(t){try{return await De(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await De(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await De(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await De(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}}}function Wb(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Sa={debug:!!(globalThis&&Jk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class JB extends tN{}async function e6(e,t,n){Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new JB(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Sa.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function t6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function nN(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function n6(e){return parseInt(e,16)}function r6(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function s6(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:l,requestId:c,resources:h,scheme:f,uri:m,version:v}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=nN(e.address),S=f?`${f}://${r}`:r,x=e.statement?`${e.statement}
`:"",b=`${S} wants you to sign in with your Ethereum account:
${y}

${x}`;let E=`URI: ${m}
Version: ${v}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(E+=`
Expiration Time: ${s.toISOString()}`),l&&(E+=`
Not Before: ${l.toISOString()}`),c&&(E+=`
Request ID: ${c}`),h){let _=`
Resources:`;for(const C of h){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);_+=`
- ${C}`}E+=_}return`${b}
${E}`}class Lt extends Error{constructor({message:t,code:n,cause:r,name:s}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Qh extends Lt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function i6({error:e,options:t}){var n,r,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Lt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Lt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Lt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Lt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Lt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Lt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Lt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Lt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(sN(a)){if(i.rp.id!==a)return new Lt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Lt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Lt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Lt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Lt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function o6({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Lt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Lt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(sN(r)){if(n.rpId!==r)return new Lt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Lt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Lt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Lt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var rN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class a6{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const l6=new a6;function c6(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=rN(e,["challenge","user","excludeCredentials"]),i=Ya(t).buffer,a=Object.assign(Object.assign({},n),{id:Ya(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:a});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const h=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},h),{id:Ya(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return l}function u6(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=rN(e,["challenge","allowCredentials"]),s=Ya(t).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const l=n[a];i.allowCredentials[a]=Object.assign(Object.assign({},l),{id:Ya(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function d6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:No(new Uint8Array(e.response.attestationObject)),clientDataJSON:No(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function h6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:No(new Uint8Array(s.authenticatorData)),clientDataJSON:No(new Uint8Array(s.clientDataJSON)),signature:No(new Uint8Array(s.signature)),userHandle:s.userHandle?No(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function sN(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Hb(){var e,t;return!!(Xn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function f6(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qh("Browser returned unexpected credential type",t)}:{data:null,error:new Qh("Empty credential response",t)}}catch(t){return{data:null,error:i6({error:t,options:e})}}}async function p6(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qh("Browser returned unexpected credential type",t)}:{data:null,error:new Qh("Empty credential response",t)}}catch(t){return{data:null,error:o6({error:t,options:e})}}}const m6={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},g6={userVerification:"preferred",hints:["security-key"]};function Xh(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))r[i]=a;else if(n(a))r[i]=a;else if(t(a)){const l=r[i];t(l)?r[i]=Xh(l,a):r[i]=Xh(a)}else r[i]=a}return r}function v6(e,t){return Xh(m6,e,t||{})}function y6(e,t){return Xh(g6,e,t||{})}class w6{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},i){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:l};const c=s??l6.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:h}=a.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${r}`),h.displayName||(h.displayName=h.name)}switch(a.webauthn.type){case"create":{const h=v6(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:m}=await f6({publicKey:h,signal:c});return f?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:f}},error:null}:{data:null,error:m}}case"request":{const h=y6(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:m}=await p6(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:h,signal:c}));return f?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:f}},error:null}:{data:null,error:m}}}}catch(a){return Ne(a)?{data:null,error:a}:{data:null,error:new Eo("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!n)return{data:null,error:new uu("rpId is required for WebAuthn authentication")};try{if(!Hb())return{data:null,error:new Eo("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!a)return{data:null,error:l};const{webauthn:c}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(a){return Ne(a)?{data:null,error:a}:{data:null,error:new Eo("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!n)return{data:null,error:new uu("rpId is required for WebAuthn registration")};try{if(!Hb())return{data:null,error:new Eo("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(f=>{var m;return(m=f.data)===null||m===void 0?void 0:m.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:l};const{data:c,error:h}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:h}}catch(a){return Ne(a)?{data:null,error:a}:{data:null,error:new Eo("Unexpected error in register",a)}}}}t6();const x6={url:mB,storageKey:gB,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vB,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Vb(e,t,n){return await n()}const Ea={};class du{get jwks(){var t,n;return(n=(t=Ea[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Ea[this.storageKey]=Object.assign(Object.assign({},Ea[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Ea[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ea[this.storageKey]=Object.assign(Object.assign({},Ea[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=du.nextInstanceID,du.nextInstanceID+=1,this.instanceID>0&&Xn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},x6),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new XB({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=eN(s.fetch),this.lock=s.lock||Vb,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Xn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=e6:this.lock=Vb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new w6(this)},this.persistSession?(s.storage?this.storage=s.storage:Jk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Wb(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Wb(this.memoryStorage)),Xn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Kk}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=RB(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Xn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),SB(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ne(n)?{error:n}:{error:new Eo("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Dr}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(i){if(Ne(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:f,password:m,options:v}=t;let y=null,S=null;this.flowType==="pkce"&&([y,S]=await _a(this.storage,this.storageKey)),i=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:f,password:m,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:y,code_challenge_method:S},xform:Dr})}else if("phone"in t){const{phone:f,password:m,options:v}=t;i=await De(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:m,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(s=v==null?void 0:v.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Dr})}else throw new Id("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(i){if(Ne(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:a,options:l}=t;n=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:zb})}else if("phone"in t){const{phone:i,password:a,options:l}=t;n=await De(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:zb})}else throw new Id("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new xa}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ne(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,a,l,c,h,f,m,v;let y,S;if("message"in t)y=t.message,S=t.signature;else{const{chain:x,wallet:b,statement:E,options:_}=t;let C;if(Xn())if(typeof b=="object")C=b;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")C=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=b}const k=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href),T=await C.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=nN(T[0]);let O=(r=_==null?void 0:_.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!O){const W=await C.request({method:"eth_chainId"});O=n6(W)}const A={domain:k.host,address:R,statement:E,uri:k.href,version:"1",chainId:O,nonce:(s=_==null?void 0:_.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=_==null?void 0:_.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=_==null?void 0:_.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(h=_==null?void 0:_.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(f=_==null?void 0:_.signInWithEthereum)===null||f===void 0?void 0:f.resources};y=s6(A),S=await C.request({method:"personal_sign",params:[r6(y),R]})}try{const{data:x,error:b}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:S},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Dr});if(b)throw b;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new xa}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:b})}catch(x){if(Ne(x))return{data:{user:null,session:null},error:x};throw x}}async signInWithSolana(t){var n,r,s,i,a,l,c,h,f,m,v,y;let S,x;if("message"in t)S=t.message,x=t.signature;else{const{chain:b,wallet:E,statement:_,options:C}=t;let k;if(Xn())if(typeof E=="object")k=E;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))k=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=E}const T=new URL((n=C==null?void 0:C.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const R=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),_?{statement:_}:null));let O;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")O=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)O=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)S=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),x=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${T.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(s=(r=C==null?void 0:C.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=C==null?void 0:C.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((a=C==null?void 0:C.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((c=C==null?void 0:C.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((h=C==null?void 0:C.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((m=(f=C==null?void 0:C.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||m===void 0)&&m.length?["Resources",...C.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const R=await k.signMessage(new TextEncoder().encode(S),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=R}}try{const{data:b,error:E}=await De(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:No(x)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Dr});if(E)throw E;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new xa}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:E})}catch(b){if(Ne(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const n=await vo(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await De(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Dr});if(await hi(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new xa}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(Ne(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=t,l=await De(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Dr}),{data:c,error:h}=l;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new xa}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(n){if(Ne(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let h=null,f=null;this.flowType==="pkce"&&([h,f]=await _a(this.storage,this.storageKey));const{error:m}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:h,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:l,options:c}=t,{data:h,error:f}=await De(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:f}}throw new Id("You must provide either an email or phone number.")}catch(l){if(Ne(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await De(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Dr});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,h=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(s){if(Ne(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await _a(this.storage,this.storageKey)),await De(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:YB})}catch(i){if(Ne(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new mi;const{error:s}=await De(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Ne(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:a}=await De(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:a,error:l}=await De(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Id("You must provide either an email or phone number and a type")}catch(n){if(Ne(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await vo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Wm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await vo(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=Gm()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,h,f)=>(!a&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,h,f))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:xi}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new mi}:await De(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:xi})})}catch(n){if(Ne(n))return bB(n)&&(await this._removeSession(),await hi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new mi;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await _a(this.storage,this.storageKey));const{data:h,error:f}=await De(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:xi});if(f)throw f;return a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Ne(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new mi;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=Vm(t.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Ne(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new mi;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ne(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Xn())throw new Ad("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ad(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ib("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ad("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ib("No code detected.");const{data:_,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:h}=t;if(!i||!l||!a||!h)throw new Ad("No session defined in URL");const f=Math.round(Date.now()/1e3),m=parseInt(l);let v=f+m;c&&(v=parseInt(c));const y=v-f;y*1e3<=Ca&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${m}s`);const S=v-m;f-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,v,f):f-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,v,f);const{data:x,error:b}=await this._getUser(i);if(b)throw b;const E={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:m,expires_at:v,refresh_token:a,token_type:h,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:t.type},error:null}}catch(r){if(Ne(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await vo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(_B(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await hi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=jB(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await _a(this.storage,this.storageKey,!0));try{return await De(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Ne(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,h,f;const{data:m,error:v}=i;if(v)throw v;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await De(this.fetch,"GET",y,{headers:this.headers,jwt:(f=(h=m.session)===null||h===void 0?void 0:h.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return Xn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ne(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:a,provider:l,token:c,access_token:h,nonce:f}=t,m=await De(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:h,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Dr}),{data:v,error:y}=m;return y?{data:{user:null,session:null},error:y}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new xa}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:y})}catch(s){if(Ne(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await De(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await IB(async s=>(s>0&&await OB(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await De(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Dr})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Hm(i)&&Date.now()+a-r<Ca})}catch(r){if(this._debug(n,"error",r),Ne(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Xn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await vo(this.storage,this.storageKey);if(s&&this.userStorage){let a=await vo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Pa(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:Gm()}else if(s&&!s.user&&!s.user){const a=await vo(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await hi(this.storage,this.storageKey+"-user"),await Pa(this.storage,this.storageKey,s)):s.user=Gm()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Wm;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Wm}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Hm(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new mi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new tp;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new mi;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Ne(i)){const a={data:null,error:i};return Hm(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Pa(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=$b(s);await Pa(this.storage,this.storageKey,i)}else{const s=$b(n);await Pa(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await hi(this.storage,this.storageKey),await hi(this.storage,this.storageKey+"-code-verifier"),await hi(this.storage,this.storageKey+"-user"),this.userStorage&&await hi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Xn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ca);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Ca);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ca}ms, refresh threshold is ${$v} ticks`),s<=$v&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof tN)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await _a(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await De(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:h}=await De(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?d6(t.webauthn.credential_response):h6(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await De(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const a=await De(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:c6(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:u6(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ne(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Vm(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const f=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+wB>s)return r;const{data:i,error:a}=await De(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:y,error:S}=await this.getSession();if(S||!y.session)return{data:null,error:S};r=y.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Vm(r);n!=null&&n.allowExpired||zB(i.exp);const h=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:i,header:s,signature:a},error:null}}const f=BB(s.alg),m=await crypto.subtle.importKey("jwk",h,f,!0,["verify"]);if(!await crypto.subtle.verify(f,m,a,NB(`${l}.${c}`)))throw new Bv("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}}}du.nextInstanceID=0;const _6=du;class b6 extends _6{constructor(t){super(t)}}var S6=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};class E6{constructor(t,n,r){var s,i,a;this.supabaseUrl=t,this.supabaseKey=n;const l=pB(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:sB,realtime:oB,auth:Object.assign(Object.assign({},iB),{storageKey:c}),global:rB},f=fB(r??{},h);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=f.auth)!==null&&a!==void 0?a:{},this.headers,f.global.fetch),this.fetch=uB(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new xz(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new eB(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new XU(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return S6(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:a,flowType:l,lock:c,debug:h},f,m){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new b6({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),f),storageKey:a,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:l,lock:c,debug:h,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Dz(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const iN=(e,t,n)=>new E6(e,t,n);function C6(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}C6()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const P6="https://mmrmjmgezsuanxccjkgv.supabase.co",k6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1tcm1qbWdlenN1YW54Y2Nqa2d2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1Mjk1OTEsImV4cCI6MjA3NTEwNTU5MX0.EqnbVp3o2DV1DT7yGiGZNEnjUiHyDxuyJLxWh-2oXxQ",be=iN(P6,k6),Dc="user_wishlist",oN=e=>{var n;const t={...e.snapshot,id:((n=e.snapshot)==null?void 0:n.id)??e.couch_id};return{id:e.id,userKey:e.user_key,couchId:t.id,storageId:e.couch_id,snapshot:t,createdAt:e.created_at}},aN=e=>e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)?e:null,N6=e=>{const t=typeof TextEncoder<"u"?new TextEncoder:null,n=t?Array.from(t.encode(e)):Array.from(e).map(i=>i.charCodeAt(0)&255);if(!n.length)return"00000000-0000-0000-0000-000000000000";const r=n.map(i=>i.toString(16).padStart(2,"0")).join(""),s=(r.length>=32?r.slice(0,32):r.padEnd(32,"0")).toLowerCase();return`${s.slice(0,8)}-${s.slice(8,12)}-${s.slice(12,16)}-${s.slice(16,20)}-${s.slice(20,32)}`},q0=e=>{const t=aN(e);return t||N6(e)},Jh=q0,T6=20,Y0=(e,t)=>{var s,i;const n=((s=t==null?void 0:t.user)==null?void 0:s.id)??(e==null?void 0:e.id)??null,r=aN(n);return r||(((i=t==null?void 0:t.user)==null?void 0:i.email)??(e==null?void 0:e.email)??null)},ef=async e=>{if(!e)return[];try{const{data:t,error:n}=await be.from(Dc).select("*").eq("user_key",e).order("created_at",{ascending:!1});if(n)throw n;return(t??[]).map(oN)}catch(t){throw console.error("Failed to fetch wishlist from Supabase",t),t}},lN=async(e,t,n)=>{if(!e)return null;const r=q0(t),{data:s,error:i}=await be.from(Dc).select("*").eq("user_key",e).eq("couch_id",r).maybeSingle();if(i)throw i;if(s)throw new Error("This couch is already in your wishlist.");const{count:a,error:l}=await be.from(Dc).select("id",{count:"exact",head:!0}).eq("user_key",e);if(l)throw console.error("Failed to count wishlist items",l),l;if((a??0)>=T6)throw new Error("You can save up to 20 couches. Remove one to add more.");const c={user_key:e,couch_id:r,snapshot:n};try{const{data:h,error:f}=await be.from(Dc).insert(c).select("*").single();if(f)throw f;const m=oN(h);return m.snapshot.id||(m.snapshot.id=t),m.couchId=m.snapshot.id,typeof window<"u"&&window.dispatchEvent(new Event("wishlist-updated")),m}catch(h){throw console.error("Supabase wishlist upsert failed",h),h}},Z0=async(e,t)=>{if(!e)return;const n=q0(t);try{const{error:r}=await be.from(Dc).delete().eq("user_key",e).eq("couch_id",n);if(r)throw r}catch(r){throw console.error("Supabase wishlist remove failed",r),r}typeof window<"u"&&window.dispatchEvent(new Event("wishlist-updated"))},ih=new Map,cN="geocode:",j6=(e,t)=>{try{if(typeof window>"u")return;window.localStorage.setItem(cN+e,JSON.stringify(t))}catch(n){console.warn("Unable to persist geocode cache",n)}},R6=e=>{if(ih.has(e))return ih.get(e)??null;try{if(typeof window>"u")return null;const t=window.localStorage.getItem(cN+e);if(!t)return null;const n=JSON.parse(t);if(n&&typeof n.lat=="number"&&typeof n.lng=="number"&&typeof n.displayName=="string")return ih.set(e,n),n}catch(t){console.warn("Unable to read geocode cache",t)}return null},M6=e=>e.trim().toLowerCase(),uN=async(e,t)=>{const n=await fetch(e,{headers:{"Accept-Language":"en","User-Agent":"student-couch-app/1.0 (support@studentcouch.example)"},...t});if(!n.ok)throw new Error(`Geocoding request failed (${n.status})`);return n.json()},O6=async e=>{if(!(e!=null&&e.trim()))return null;const t=M6(e),n=R6(t);if(n)return n;const r=new URLSearchParams({q:e,format:"json",addressdetails:"1",limit:"1"}),s=await uN(`https://nominatim.openstreetmap.org/search?${r.toString()}`);if(!Array.isArray(s)||s.length===0)return null;const i=s[0],a=Number.parseFloat(i.lat),l=Number.parseFloat(i.lon);if(Number.isNaN(a)||Number.isNaN(l))return null;const c={lat:a,lng:l,displayName:i.display_name};return ih.set(t,c),j6(t,c),c},I6=async(e,{signal:t}={})=>{const n=e.trim();if(!n)return[];const r=new URLSearchParams({q:n,format:"json",addressdetails:"1",limit:"5",autocomplete:"1"}),s=await uN(`https://nominatim.openstreetmap.org/search?${r.toString()}`,{signal:t});return Array.isArray(s)?s.map(i=>{const a=Number.parseFloat(i.lat),l=Number.parseFloat(i.lon);return Number.isNaN(a)||Number.isNaN(l)?null:{lat:a,lng:l,displayName:i.display_name}}).filter(i=>!!i):[]},A6="https://mmrmjmgezsuanxccjkgv.supabase.co",L6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1tcm1qbWdlenN1YW54Y2Nqa2d2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1Mjk1OTEsImV4cCI6MjA3NTEwNTU5MX0.EqnbVp3o2DV1DT7yGiGZNEnjUiHyDxuyJLxWh-2oXxQ",dN=iN(A6,L6,{auth:{persistSession:!1,autoRefreshToken:!1}}),Gs=e=>{var t,n;return{id:e.id,hostId:e.host_id,hostName:((t=e.availability_json)==null?void 0:t.hostName)??null,hostEmail:((n=e.availability_json)==null?void 0:n.hostEmail)??null,title:e.title??"New Listing",image:e.image_url,price:e.price_per_night,location:e.location,description:e.description,availability:e.availability_json??null,createdAt:e.created_at}},Gb=e=>{if(!e)return!1;const t=e.trim();return t?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t):!1},Ld=()=>dN.from("user_listings").select("*").order("created_at",{ascending:!1}),Ym=e=>{if(!e)return null;const t=e.trim();return t.length?t:null},D6=async()=>{const{data:e,error:t}=await dN.from("user_listings").select("*").order("created_at",{ascending:!1});if(t)throw t;return(e??[]).map(Gs)},F6=async e=>{const{data:t,error:n}=await be.from("user_listings").select("*").eq("id",e).maybeSingle();if(n)throw n;return t?Gs(t):null},Zm=async({listingId:e,hostEmail:t,hostName:n})=>{const r=Ym(e),s=Ym(t),i=Ym(n);if(r&&Gb(r)){const a=await F6(r);if(a)return a}if(r&&!Gb(r))try{const{data:a,error:l}=await Ld().eq("id",r).limit(1).maybeSingle();if(l)throw l;if(a)return Gs(a)}catch(a){console.warn("Failed to fetch listing by non-uuid id",a)}if(s){const a=await Ld().eq("availability_json->>hostEmail",s).limit(1).maybeSingle();if(a.error)throw a.error;if(a.data)return Gs(a.data);const l=await Ld().ilike("availability_json->>hostEmail",`%${s}%`).limit(1).maybeSingle();if(l.error)throw l.error;if(l.data)return Gs(l.data)}if(i){const{data:a,error:l}=await Ld().ilike("availability_json->>hostName",`%${i}%`).limit(1).maybeSingle();if(l)throw l;if(a)return Gs(a)}return null},$6=async e=>{const{data:t,error:n}=await be.from("user_listings").select("*").eq("host_id",e).order("created_at",{ascending:!1});if(n)throw n;return(t??[]).map(Gs)},Wv=async e=>{const t={id:e.id,host_id:e.hostId,title:e.title,image_url:e.imageUrl,price_per_night:e.pricePerNight,location:e.location,description:e.description,availability_json:{...e.availability,hostName:e.hostName,hostEmail:e.hostEmail}},{data:n,error:r}=await be.from("user_listings").upsert(t,{onConflict:"id"}).select("*").single();if(r)throw r;return Gs(n)},U6=async(e,t)=>{const{data:n,error:r}=await be.from("user_listings").select("*").eq("id",e).single();if(r)throw r;if(!n)throw new Error("Listing not found.");const s={...n.availability_json??{},published:t},{data:i,error:a}=await be.from("user_listings").update({availability_json:s}).eq("id",e).select("*").single();if(a)throw a;return Gs(i)},uc={countries:["Switzerland"],citiesByCountry:{Switzerland:["Zurich","Geneva","Lausanne","Basel","Bern","Winterthur","Lucerne","St. Gallen","Lugano","Biel/Bienne","Thun","La Chaux-de-Fonds"]}},z6={lausanne:["lausanne","renens","crissier","ecublens","epalinges","pully","lutry","morges","prilly","romanel","savigny","bussigny","oreges","st-sulpice"]};function Hv(e,[t,n]){return Math.min(n,Math.max(t,e))}var B6=g.createContext(void 0);function Uu(e){const t=g.useContext(B6);return e||t||"ltr"}function hN(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var W6=[" ","Enter","ArrowUp","ArrowDown"],H6=[" ","Enter"],Qo="Select",[np,rp,V6]=Of(Qo),[Il,_q]=Vn(Qo,[V6,no]),sp=no(),[G6,oo]=Il(Qo),[q6,Y6]=Il(Qo),fN=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:h,name:f,autoComplete:m,disabled:v,required:y,form:S}=e,x=sp(t),[b,E]=g.useState(null),[_,C]=g.useState(null),[k,T]=g.useState(!1),R=Uu(h),[O,A]=Yi({prop:r,defaultProp:s??!1,onChange:i,caller:Qo}),[W,G]=Yi({prop:a,defaultProp:l,onChange:c,caller:Qo}),X=g.useRef(null),H=b?S||!!b.closest("form"):!0,[U,M]=g.useState(new Set),ee=Array.from(U).map(V=>V.props.value).join(";");return d.jsx(_0,{...x,children:d.jsxs(G6,{required:y,scope:t,trigger:b,onTriggerChange:E,valueNode:_,onValueNodeChange:C,valueNodeHasChildren:k,onValueNodeHasChildrenChange:T,contentId:bs(),value:W,onValueChange:G,open:O,onOpenChange:A,dir:R,triggerPointerDownPosRef:X,disabled:v,children:[d.jsx(np.Provider,{scope:t,children:d.jsx(q6,{scope:e.__scopeSelect,onNativeOptionAdd:g.useCallback(V=>{M(Y=>new Set(Y).add(V))},[]),onNativeOptionRemove:g.useCallback(V=>{M(Y=>{const j=new Set(Y);return j.delete(V),j})},[]),children:n})}),H?d.jsxs(DN,{"aria-hidden":!0,required:y,tabIndex:-1,name:f,autoComplete:m,value:W,onChange:V=>G(V.target.value),disabled:v,form:S,children:[W===void 0?d.jsx("option",{value:""}):null,Array.from(U)]},ee):null]})})};fN.displayName=Qo;var pN="SelectTrigger",mN=g.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,i=sp(n),a=oo(pN,n),l=a.disabled||r,c=Ue(t,a.onTriggerChange),h=rp(n),f=g.useRef("touch"),[m,v,y]=$N(x=>{const b=h().filter(C=>!C.disabled),E=b.find(C=>C.value===a.value),_=UN(b,x,E);_!==void 0&&a.onValueChange(_.value)}),S=x=>{l||(a.onOpenChange(!0),y()),x&&(a.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return d.jsx(ku,{asChild:!0,...i,children:d.jsx(Ce.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":FN(a.value)?"":void 0,...s,ref:c,onClick:ue(s.onClick,x=>{x.currentTarget.focus(),f.current!=="mouse"&&S(x)}),onPointerDown:ue(s.onPointerDown,x=>{f.current=x.pointerType;const b=x.target;b.hasPointerCapture(x.pointerId)&&b.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(S(x),x.preventDefault())}),onKeyDown:ue(s.onKeyDown,x=>{const b=m.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&v(x.key),!(b&&x.key===" ")&&W6.includes(x.key)&&(S(),x.preventDefault())})})})});mN.displayName=pN;var gN="SelectValue",vN=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=e,c=oo(gN,n),{onValueNodeHasChildrenChange:h}=c,f=i!==void 0,m=Ue(t,c.onValueNodeChange);return Ot(()=>{h(f)},[h,f]),d.jsx(Ce.span,{...l,ref:m,style:{pointerEvents:"none"},children:FN(c.value)?d.jsx(d.Fragment,{children:a}):i})});vN.displayName=gN;var Z6="SelectIcon",yN=g.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return d.jsx(Ce.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});yN.displayName=Z6;var K6="SelectPortal",wN=e=>d.jsx(El,{asChild:!0,...e});wN.displayName=K6;var Xo="SelectContent",xN=g.forwardRef((e,t)=>{const n=oo(Xo,e.__scopeSelect),[r,s]=g.useState();if(Ot(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?to.createPortal(d.jsx(_N,{scope:e.__scopeSelect,children:d.jsx(np.Slot,{scope:e.__scopeSelect,children:d.jsx("div",{children:e.children})})}),i):null}return d.jsx(bN,{...e,ref:t})});xN.displayName=Xo;var Fr=10,[_N,ao]=Il(Xo),Q6="SelectContentImpl",X6=qi("SelectContent.RemoveScroll"),bN=g.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:v,collisionPadding:y,sticky:S,hideWhenDetached:x,avoidCollisions:b,...E}=e,_=oo(Xo,n),[C,k]=g.useState(null),[T,R]=g.useState(null),O=Ue(t,re=>k(re)),[A,W]=g.useState(null),[G,X]=g.useState(null),H=rp(n),[U,M]=g.useState(!1),ee=g.useRef(!1);g.useEffect(()=>{if(C)return Yf(C)},[C]),qf();const V=g.useCallback(re=>{const[fe,...Pe]=H().map(se=>se.ref.current),[z]=Pe.slice(-1),ne=document.activeElement;for(const se of re)if(se===ne||(se==null||se.scrollIntoView({block:"nearest"}),se===fe&&T&&(T.scrollTop=0),se===z&&T&&(T.scrollTop=T.scrollHeight),se==null||se.focus(),document.activeElement!==ne))return},[H,T]),Y=g.useCallback(()=>V([A,C]),[V,A,C]);g.useEffect(()=>{U&&Y()},[U,Y]);const{onOpenChange:j,triggerPointerDownPosRef:$}=_;g.useEffect(()=>{if(C){let re={x:0,y:0};const fe=z=>{var ne,se;re={x:Math.abs(Math.round(z.pageX)-(((ne=$.current)==null?void 0:ne.x)??0)),y:Math.abs(Math.round(z.pageY)-(((se=$.current)==null?void 0:se.y)??0))}},Pe=z=>{re.x<=10&&re.y<=10?z.preventDefault():C.contains(z.target)||j(!1),document.removeEventListener("pointermove",fe),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",fe),document.addEventListener("pointerup",Pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",fe),document.removeEventListener("pointerup",Pe,{capture:!0})}}},[C,j,$]),g.useEffect(()=>{const re=()=>j(!1);return window.addEventListener("blur",re),window.addEventListener("resize",re),()=>{window.removeEventListener("blur",re),window.removeEventListener("resize",re)}},[j]);const[q,oe]=$N(re=>{const fe=H().filter(ne=>!ne.disabled),Pe=fe.find(ne=>ne.ref.current===document.activeElement),z=UN(fe,re,Pe);z&&setTimeout(()=>z.ref.current.focus())}),B=g.useCallback((re,fe,Pe)=>{const z=!ee.current&&!Pe;(_.value!==void 0&&_.value===fe||z)&&(W(re),z&&(ee.current=!0))},[_.value]),ce=g.useCallback(()=>C==null?void 0:C.focus(),[C]),Q=g.useCallback((re,fe,Pe)=>{const z=!ee.current&&!Pe;(_.value!==void 0&&_.value===fe||z)&&X(re)},[_.value]),te=r==="popper"?Vv:SN,Z=te===Vv?{side:l,sideOffset:c,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:v,collisionPadding:y,sticky:S,hideWhenDetached:x,avoidCollisions:b}:{};return d.jsx(_N,{scope:n,content:C,viewport:T,onViewportChange:R,itemRefCallback:B,selectedItem:A,onItemLeave:ce,itemTextRefCallback:Q,focusSelectedItem:Y,selectedItemText:G,position:r,isPositioned:U,searchRef:q,children:d.jsx(Au,{as:X6,allowPinchZoom:!0,children:d.jsx(Iu,{asChild:!0,trapped:_.open,onMountAutoFocus:re=>{re.preventDefault()},onUnmountAutoFocus:ue(s,re=>{var fe;(fe=_.trigger)==null||fe.focus({preventScroll:!0}),re.preventDefault()}),children:d.jsx(na,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:re=>re.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:d.jsx(te,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:re=>re.preventDefault(),...E,...Z,onPlaced:()=>M(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:ue(E.onKeyDown,re=>{const fe=re.ctrlKey||re.altKey||re.metaKey;if(re.key==="Tab"&&re.preventDefault(),!fe&&re.key.length===1&&oe(re.key),["ArrowUp","ArrowDown","Home","End"].includes(re.key)){let z=H().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);if(["ArrowUp","End"].includes(re.key)&&(z=z.slice().reverse()),["ArrowUp","ArrowDown"].includes(re.key)){const ne=re.target,se=z.indexOf(ne);z=z.slice(se+1)}setTimeout(()=>V(z)),re.preventDefault()}})})})})})})});bN.displayName=Q6;var J6="SelectItemAlignedPosition",SN=g.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,i=oo(Xo,n),a=ao(Xo,n),[l,c]=g.useState(null),[h,f]=g.useState(null),m=Ue(t,O=>f(O)),v=rp(n),y=g.useRef(!1),S=g.useRef(!0),{viewport:x,selectedItem:b,selectedItemText:E,focusSelectedItem:_}=a,C=g.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&h&&x&&b&&E){const O=i.trigger.getBoundingClientRect(),A=h.getBoundingClientRect(),W=i.valueNode.getBoundingClientRect(),G=E.getBoundingClientRect();if(i.dir!=="rtl"){const ne=G.left-A.left,se=W.left-ne,Oe=O.left-se,rt=O.width+Oe,jt=Math.max(rt,A.width),Vt=window.innerWidth-Fr,Gt=Hv(se,[Fr,Math.max(Fr,Vt-jt)]);l.style.minWidth=rt+"px",l.style.left=Gt+"px"}else{const ne=A.right-G.right,se=window.innerWidth-W.right-ne,Oe=window.innerWidth-O.right-se,rt=O.width+Oe,jt=Math.max(rt,A.width),Vt=window.innerWidth-Fr,Gt=Hv(se,[Fr,Math.max(Fr,Vt-jt)]);l.style.minWidth=rt+"px",l.style.right=Gt+"px"}const X=v(),H=window.innerHeight-Fr*2,U=x.scrollHeight,M=window.getComputedStyle(h),ee=parseInt(M.borderTopWidth,10),V=parseInt(M.paddingTop,10),Y=parseInt(M.borderBottomWidth,10),j=parseInt(M.paddingBottom,10),$=ee+V+U+j+Y,q=Math.min(b.offsetHeight*5,$),oe=window.getComputedStyle(x),B=parseInt(oe.paddingTop,10),ce=parseInt(oe.paddingBottom,10),Q=O.top+O.height/2-Fr,te=H-Q,Z=b.offsetHeight/2,re=b.offsetTop+Z,fe=ee+V+re,Pe=$-fe;if(fe<=Q){const ne=X.length>0&&b===X[X.length-1].ref.current;l.style.bottom="0px";const se=h.clientHeight-x.offsetTop-x.offsetHeight,Oe=Math.max(te,Z+(ne?ce:0)+se+Y),rt=fe+Oe;l.style.height=rt+"px"}else{const ne=X.length>0&&b===X[0].ref.current;l.style.top="0px";const Oe=Math.max(Q,ee+x.offsetTop+(ne?B:0)+Z)+Pe;l.style.height=Oe+"px",x.scrollTop=fe-Q+x.offsetTop}l.style.margin=`${Fr}px 0`,l.style.minHeight=q+"px",l.style.maxHeight=H+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[v,i.trigger,i.valueNode,l,h,x,b,E,i.dir,r]);Ot(()=>C(),[C]);const[k,T]=g.useState();Ot(()=>{h&&T(window.getComputedStyle(h).zIndex)},[h]);const R=g.useCallback(O=>{O&&S.current===!0&&(C(),_==null||_(),S.current=!1)},[C,_]);return d.jsx(tW,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:R,children:d.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:d.jsx(Ce.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});SN.displayName=J6;var eW="SelectPopperPosition",Vv=g.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Fr,...i}=e,a=sp(n);return d.jsx(zf,{...a,...i,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Vv.displayName=eW;var[tW,K0]=Il(Xo,{}),Gv="SelectViewport",EN=g.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,i=ao(Gv,n),a=K0(Gv,n),l=Ue(t,i.onViewportChange),c=g.useRef(0);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),d.jsx(np.Slot,{scope:n,children:d.jsx(Ce.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ue(s.onScroll,h=>{const f=h.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:v}=a;if(v!=null&&v.current&&m){const y=Math.abs(c.current-f.scrollTop);if(y>0){const S=window.innerHeight-Fr*2,x=parseFloat(m.style.minHeight),b=parseFloat(m.style.height),E=Math.max(x,b);if(E<S){const _=E+y,C=Math.min(S,_),k=_-C;m.style.height=C+"px",m.style.bottom==="0px"&&(f.scrollTop=k>0?k:0,m.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});EN.displayName=Gv;var CN="SelectGroup",[nW,rW]=Il(CN),sW=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=bs();return d.jsx(nW,{scope:n,id:s,children:d.jsx(Ce.div,{role:"group","aria-labelledby":s,...r,ref:t})})});sW.displayName=CN;var PN="SelectLabel",kN=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=rW(PN,n);return d.jsx(Ce.div,{id:s.id,...r,ref:t})});kN.displayName=PN;var tf="SelectItem",[iW,NN]=Il(tf),TN=g.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=e,l=oo(tf,n),c=ao(tf,n),h=l.value===r,[f,m]=g.useState(i??""),[v,y]=g.useState(!1),S=Ue(t,_=>{var C;return(C=c.itemRefCallback)==null?void 0:C.call(c,_,r,s)}),x=bs(),b=g.useRef("touch"),E=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return d.jsx(iW,{scope:n,value:r,disabled:s,textId:x,isSelected:h,onItemTextChange:g.useCallback(_=>{m(C=>C||((_==null?void 0:_.textContent)??"").trim())},[]),children:d.jsx(np.ItemSlot,{scope:n,value:r,disabled:s,textValue:f,children:d.jsx(Ce.div,{role:"option","aria-labelledby":x,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:S,onFocus:ue(a.onFocus,()=>y(!0)),onBlur:ue(a.onBlur,()=>y(!1)),onClick:ue(a.onClick,()=>{b.current!=="mouse"&&E()}),onPointerUp:ue(a.onPointerUp,()=>{b.current==="mouse"&&E()}),onPointerDown:ue(a.onPointerDown,_=>{b.current=_.pointerType}),onPointerMove:ue(a.onPointerMove,_=>{var C;b.current=_.pointerType,s?(C=c.onItemLeave)==null||C.call(c):b.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ue(a.onPointerLeave,_=>{var C;_.currentTarget===document.activeElement&&((C=c.onItemLeave)==null||C.call(c))}),onKeyDown:ue(a.onKeyDown,_=>{var k;((k=c.searchRef)==null?void 0:k.current)!==""&&_.key===" "||(H6.includes(_.key)&&E(),_.key===" "&&_.preventDefault())})})})})});TN.displayName=tf;var xc="SelectItemText",jN=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...i}=e,a=oo(xc,n),l=ao(xc,n),c=NN(xc,n),h=Y6(xc,n),[f,m]=g.useState(null),v=Ue(t,E=>m(E),c.onItemTextChange,E=>{var _;return(_=l.itemTextRefCallback)==null?void 0:_.call(l,E,c.value,c.disabled)}),y=f==null?void 0:f.textContent,S=g.useMemo(()=>d.jsx("option",{value:c.value,disabled:c.disabled,children:y},c.value),[c.disabled,c.value,y]),{onNativeOptionAdd:x,onNativeOptionRemove:b}=h;return Ot(()=>(x(S),()=>b(S)),[x,b,S]),d.jsxs(d.Fragment,{children:[d.jsx(Ce.span,{id:c.textId,...i,ref:v}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?to.createPortal(i.children,a.valueNode):null]})});jN.displayName=xc;var RN="SelectItemIndicator",MN=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return NN(RN,n).isSelected?d.jsx(Ce.span,{"aria-hidden":!0,...r,ref:t}):null});MN.displayName=RN;var qv="SelectScrollUpButton",ON=g.forwardRef((e,t)=>{const n=ao(qv,e.__scopeSelect),r=K0(qv,e.__scopeSelect),[s,i]=g.useState(!1),a=Ue(t,r.onScrollButtonChange);return Ot(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=c.scrollTop>0;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?d.jsx(AN,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});ON.displayName=qv;var Yv="SelectScrollDownButton",IN=g.forwardRef((e,t)=>{const n=ao(Yv,e.__scopeSelect),r=K0(Yv,e.__scopeSelect),[s,i]=g.useState(!1),a=Ue(t,r.onScrollButtonChange);return Ot(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<h;i(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?d.jsx(AN,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});IN.displayName=Yv;var AN=g.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,i=ao("SelectScrollButton",n),a=g.useRef(null),l=rp(n),c=g.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),Ot(()=>{var f;const h=l().find(m=>m.ref.current===document.activeElement);(f=h==null?void 0:h.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),d.jsx(Ce.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:ue(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:ue(s.onPointerMove,()=>{var h;(h=i.onItemLeave)==null||h.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:ue(s.onPointerLeave,()=>{c()})})}),oW="SelectSeparator",LN=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return d.jsx(Ce.div,{"aria-hidden":!0,...r,ref:t})});LN.displayName=oW;var Zv="SelectArrow",aW=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=sp(n),i=oo(Zv,n),a=ao(Zv,n);return i.open&&a.position==="popper"?d.jsx(Bf,{...s,...r,ref:t}):null});aW.displayName=Zv;var lW="SelectBubbleInput",DN=g.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=g.useRef(null),i=Ue(r,s),a=hN(t);return g.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==t&&f){const m=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(m)}},[a,t]),d.jsx(Ce.select,{...n,style:{...aC,...n.style},ref:i,defaultValue:t})});DN.displayName=lW;function FN(e){return e===""||e===void 0}function $N(e){const t=Tt(e),n=g.useRef(""),r=g.useRef(0),s=g.useCallback(a=>{const l=n.current+a;t(l),function c(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function UN(e,t,n){const s=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let a=cW(e,Math.max(i,0));s.length===1&&(a=a.filter(h=>h!==n));const c=a.find(h=>h.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function cW(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var uW=fN,zN=mN,dW=vN,hW=yN,fW=wN,BN=xN,pW=EN,WN=kN,HN=TN,mW=jN,gW=MN,VN=ON,GN=IN,qN=LN;const Ii=uW,Ai=dW,qs=g.forwardRef(({className:e,children:t,...n},r)=>d.jsxs(zN,{ref:r,className:Te("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,d.jsx(hW,{asChild:!0,children:d.jsx(Df,{className:"h-4 w-4 opacity-50"})})]}));qs.displayName=zN.displayName;const YN=g.forwardRef(({className:e,...t},n)=>d.jsx(VN,{ref:n,className:Te("flex cursor-default items-center justify-center py-1",e),...t,children:d.jsx(CA,{className:"h-4 w-4"})}));YN.displayName=VN.displayName;const ZN=g.forwardRef(({className:e,...t},n)=>d.jsx(GN,{ref:n,className:Te("flex cursor-default items-center justify-center py-1",e),...t,children:d.jsx(Df,{className:"h-4 w-4"})}));ZN.displayName=GN.displayName;const Ys=g.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>d.jsx(fW,{children:d.jsxs(BN,{ref:s,className:Te("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[d.jsx(YN,{}),d.jsx(pW,{className:Te("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),d.jsx(ZN,{})]})}));Ys.displayName=BN.displayName;const vW=g.forwardRef(({className:e,...t},n)=>d.jsx(WN,{ref:n,className:Te("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));vW.displayName=WN.displayName;const Vr=g.forwardRef(({className:e,children:t,...n},r)=>d.jsxs(HN,{ref:r,className:Te("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(gW,{children:d.jsx(jC,{className:"h-4 w-4"})})}),d.jsx(mW,{children:t})]}));Vr.displayName=HN.displayName;const yW=g.forwardRef(({className:e,...t},n)=>d.jsx(qN,{ref:n,className:Te("-mx-1 my-1 h-px bg-muted",e),...t}));yW.displayName=qN.displayName;function KN(e,t){const n=g.useRef(t);g.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function wW(e,t,n){t.center!==n.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==n.radius&&e.setRadius(t.radius)}const xW=1;function _W(e){return Object.freeze({__version:xW,map:e})}function QN(e,t){return Object.freeze({...e,...t})}const XN=g.createContext(null),JN=XN.Provider;function Q0(){const e=g.useContext(XN);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function eT(e){function t(n,r){const{instance:s,context:i}=e(n).current;return g.useImperativeHandle(r,()=>s),n.children==null?null:ie.createElement(JN,{value:i},n.children)}return g.forwardRef(t)}function bW(e){function t(n,r){const[s,i]=g.useState(!1),{instance:a}=e(n,i).current;g.useImperativeHandle(r,()=>a),g.useEffect(function(){s&&a.update()},[a,s,n.children]);const l=a._contentNode;return l?to.createPortal(n.children,l):null}return g.forwardRef(t)}function SW(e){function t(n,r){const{instance:s}=e(n).current;return g.useImperativeHandle(r,()=>s),null}return g.forwardRef(t)}function X0(e,t){const n=g.useRef();g.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function ip(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function EW(e,t){return function(r,s){const i=Q0(),a=e(ip(r,i),i);return KN(i.map,r.attribution),X0(a.current,r.eventHandlers),t(a.current,i,r,s),a}}var Kv={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(sr,function(n){var r="1.9.4";function s(o){var u,p,w,P;for(p=1,w=arguments.length;p<w;p++){P=arguments[p];for(u in P)o[u]=P[u]}return o}var i=Object.create||function(){function o(){}return function(u){return o.prototype=u,new o}}();function a(o,u){var p=Array.prototype.slice;if(o.bind)return o.bind.apply(o,p.call(arguments,1));var w=p.call(arguments,2);return function(){return o.apply(u,w.length?w.concat(p.call(arguments)):arguments)}}var l=0;function c(o){return"_leaflet_id"in o||(o._leaflet_id=++l),o._leaflet_id}function h(o,u,p){var w,P,N,I;return I=function(){w=!1,P&&(N.apply(p,P),P=!1)},N=function(){w?P=arguments:(o.apply(p,arguments),setTimeout(I,u),w=!0)},N}function f(o,u,p){var w=u[1],P=u[0],N=w-P;return o===w&&p?o:((o-P)%N+N)%N+P}function m(){return!1}function v(o,u){if(u===!1)return o;var p=Math.pow(10,u===void 0?6:u);return Math.round(o*p)/p}function y(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function S(o){return y(o).split(/\s+/)}function x(o,u){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?i(o.options):{});for(var p in u)o.options[p]=u[p];return o.options}function b(o,u,p){var w=[];for(var P in o)w.push(encodeURIComponent(p?P.toUpperCase():P)+"="+encodeURIComponent(o[P]));return(!u||u.indexOf("?")===-1?"?":"&")+w.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function _(o,u){return o.replace(E,function(p,w){var P=u[w];if(P===void 0)throw new Error("No value provided for variable "+p);return typeof P=="function"&&(P=P(u)),P})}var C=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function k(o,u){for(var p=0;p<o.length;p++)if(o[p]===u)return p;return-1}var T="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function R(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var O=0;function A(o){var u=+new Date,p=Math.max(0,16-(u-O));return O=u+p,window.setTimeout(o,p)}var W=window.requestAnimationFrame||R("RequestAnimationFrame")||A,G=window.cancelAnimationFrame||R("CancelAnimationFrame")||R("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function X(o,u,p){if(p&&W===A)o.call(u);else return W.call(window,a(o,u))}function H(o){o&&G.call(window,o)}var U={__proto__:null,extend:s,create:i,bind:a,get lastId(){return l},stamp:c,throttle:h,wrapNum:f,falseFn:m,formatNum:v,trim:y,splitWords:S,setOptions:x,getParamString:b,template:_,isArray:C,indexOf:k,emptyImageUrl:T,requestFn:W,cancelFn:G,requestAnimFrame:X,cancelAnimFrame:H};function M(){}M.extend=function(o){var u=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=u.__super__=this.prototype,w=i(p);w.constructor=u,u.prototype=w;for(var P in this)Object.prototype.hasOwnProperty.call(this,P)&&P!=="prototype"&&P!=="__super__"&&(u[P]=this[P]);return o.statics&&s(u,o.statics),o.includes&&(ee(o.includes),s.apply(null,[w].concat(o.includes))),s(w,o),delete w.statics,delete w.includes,w.options&&(w.options=p.options?i(p.options):{},s(w.options,o.options)),w._initHooks=[],w.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var N=0,I=w._initHooks.length;N<I;N++)w._initHooks[N].call(this)}},u},M.include=function(o){var u=this.prototype.options;return s(this.prototype,o),o.options&&(this.prototype.options=u,this.mergeOptions(o.options)),this},M.mergeOptions=function(o){return s(this.prototype.options,o),this},M.addInitHook=function(o){var u=Array.prototype.slice.call(arguments,1),p=typeof o=="function"?o:function(){this[o].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function ee(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=C(o)?o:[o];for(var u=0;u<o.length;u++)o[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var V={on:function(o,u,p){if(typeof o=="object")for(var w in o)this._on(w,o[w],u);else{o=S(o);for(var P=0,N=o.length;P<N;P++)this._on(o[P],u,p)}return this},off:function(o,u,p){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var w in o)this._off(w,o[w],u);else{o=S(o);for(var P=arguments.length===1,N=0,I=o.length;N<I;N++)P?this._off(o[N]):this._off(o[N],u,p)}return this},_on:function(o,u,p,w){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(o,u,p)===!1){p===this&&(p=void 0);var P={fn:u,ctx:p};w&&(P.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(P)}},_off:function(o,u,p){var w,P,N;if(this._events&&(w=this._events[o],!!w)){if(arguments.length===1){if(this._firingCount)for(P=0,N=w.length;P<N;P++)w[P].fn=m;delete this._events[o];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var I=this._listens(o,u,p);if(I!==!1){var K=w[I];this._firingCount&&(K.fn=m,this._events[o]=w=w.slice()),w.splice(I,1)}}},fire:function(o,u,p){if(!this.listens(o,p))return this;var w=s({},u,{type:o,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var P=this._events[o];if(P){this._firingCount=this._firingCount+1||1;for(var N=0,I=P.length;N<I;N++){var K=P[N],J=K.fn;K.once&&this.off(o,J,K.ctx),J.call(K.ctx||this,w)}this._firingCount--}}return p&&this._propagateEvent(w),this},listens:function(o,u,p,w){typeof o!="string"&&console.warn('"string" type argument expected');var P=u;typeof u!="function"&&(w=!!u,P=void 0,p=void 0);var N=this._events&&this._events[o];if(N&&N.length&&this._listens(o,P,p)!==!1)return!0;if(w){for(var I in this._eventParents)if(this._eventParents[I].listens(o,u,p,w))return!0}return!1},_listens:function(o,u,p){if(!this._events)return!1;var w=this._events[o]||[];if(!u)return!!w.length;p===this&&(p=void 0);for(var P=0,N=w.length;P<N;P++)if(w[P].fn===u&&w[P].ctx===p)return P;return!1},once:function(o,u,p){if(typeof o=="object")for(var w in o)this._on(w,o[w],u,!0);else{o=S(o);for(var P=0,N=o.length;P<N;P++)this._on(o[P],u,p,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[c(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[c(o)],this},_propagateEvent:function(o){for(var u in this._eventParents)this._eventParents[u].fire(o.type,s({layer:o.target,propagatedFrom:o.target},o),!0)}};V.addEventListener=V.on,V.removeEventListener=V.clearAllEventListeners=V.off,V.addOneTimeEventListener=V.once,V.fireEvent=V.fire,V.hasEventListeners=V.listens;var Y=M.extend(V);function j(o,u,p){this.x=p?Math.round(o):o,this.y=p?Math.round(u):u}var $=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};j.prototype={clone:function(){return new j(this.x,this.y)},add:function(o){return this.clone()._add(q(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(q(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new j(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new j(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=$(this.x),this.y=$(this.y),this},distanceTo:function(o){o=q(o);var u=o.x-this.x,p=o.y-this.y;return Math.sqrt(u*u+p*p)},equals:function(o){return o=q(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=q(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function q(o,u,p){return o instanceof j?o:C(o)?new j(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new j(o.x,o.y):new j(o,u,p)}function oe(o,u){if(o)for(var p=u?[o,u]:o,w=0,P=p.length;w<P;w++)this.extend(p[w])}oe.prototype={extend:function(o){var u,p;if(!o)return this;if(o instanceof j||typeof o[0]=="number"||"x"in o)u=p=q(o);else if(o=B(o),u=o.min,p=o.max,!u||!p)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=p.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(o){return q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return q(this.min.x,this.max.y)},getTopRight:function(){return q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var u,p;return typeof o[0]=="number"||o instanceof j?o=q(o):o=B(o),o instanceof oe?(u=o.min,p=o.max):u=p=o,u.x>=this.min.x&&p.x<=this.max.x&&u.y>=this.min.y&&p.y<=this.max.y},intersects:function(o){o=B(o);var u=this.min,p=this.max,w=o.min,P=o.max,N=P.x>=u.x&&w.x<=p.x,I=P.y>=u.y&&w.y<=p.y;return N&&I},overlaps:function(o){o=B(o);var u=this.min,p=this.max,w=o.min,P=o.max,N=P.x>u.x&&w.x<p.x,I=P.y>u.y&&w.y<p.y;return N&&I},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var u=this.min,p=this.max,w=Math.abs(u.x-p.x)*o,P=Math.abs(u.y-p.y)*o;return B(q(u.x-w,u.y-P),q(p.x+w,p.y+P))},equals:function(o){return o?(o=B(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function B(o,u){return!o||o instanceof oe?o:new oe(o,u)}function ce(o,u){if(o)for(var p=u?[o,u]:o,w=0,P=p.length;w<P;w++)this.extend(p[w])}ce.prototype={extend:function(o){var u=this._southWest,p=this._northEast,w,P;if(o instanceof te)w=o,P=o;else if(o instanceof ce){if(w=o._southWest,P=o._northEast,!w||!P)return this}else return o?this.extend(Z(o)||Q(o)):this;return!u&&!p?(this._southWest=new te(w.lat,w.lng),this._northEast=new te(P.lat,P.lng)):(u.lat=Math.min(w.lat,u.lat),u.lng=Math.min(w.lng,u.lng),p.lat=Math.max(P.lat,p.lat),p.lng=Math.max(P.lng,p.lng)),this},pad:function(o){var u=this._southWest,p=this._northEast,w=Math.abs(u.lat-p.lat)*o,P=Math.abs(u.lng-p.lng)*o;return new ce(new te(u.lat-w,u.lng-P),new te(p.lat+w,p.lng+P))},getCenter:function(){return new te((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new te(this.getNorth(),this.getWest())},getSouthEast:function(){return new te(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof te||"lat"in o?o=Z(o):o=Q(o);var u=this._southWest,p=this._northEast,w,P;return o instanceof ce?(w=o.getSouthWest(),P=o.getNorthEast()):w=P=o,w.lat>=u.lat&&P.lat<=p.lat&&w.lng>=u.lng&&P.lng<=p.lng},intersects:function(o){o=Q(o);var u=this._southWest,p=this._northEast,w=o.getSouthWest(),P=o.getNorthEast(),N=P.lat>=u.lat&&w.lat<=p.lat,I=P.lng>=u.lng&&w.lng<=p.lng;return N&&I},overlaps:function(o){o=Q(o);var u=this._southWest,p=this._northEast,w=o.getSouthWest(),P=o.getNorthEast(),N=P.lat>u.lat&&w.lat<p.lat,I=P.lng>u.lng&&w.lng<p.lng;return N&&I},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,u){return o?(o=Q(o),this._southWest.equals(o.getSouthWest(),u)&&this._northEast.equals(o.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Q(o,u){return o instanceof ce?o:new ce(o,u)}function te(o,u,p){if(isNaN(o)||isNaN(u))throw new Error("Invalid LatLng object: ("+o+", "+u+")");this.lat=+o,this.lng=+u,p!==void 0&&(this.alt=+p)}te.prototype={equals:function(o,u){if(!o)return!1;o=Z(o);var p=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return p<=(u===void 0?1e-9:u)},toString:function(o){return"LatLng("+v(this.lat,o)+", "+v(this.lng,o)+")"},distanceTo:function(o){return fe.distance(this,Z(o))},wrap:function(){return fe.wrapLatLng(this)},toBounds:function(o){var u=180*o/40075017,p=u/Math.cos(Math.PI/180*this.lat);return Q([this.lat-u,this.lng-p],[this.lat+u,this.lng+p])},clone:function(){return new te(this.lat,this.lng,this.alt)}};function Z(o,u,p){return o instanceof te?o:C(o)&&typeof o[0]!="object"?o.length===3?new te(o[0],o[1],o[2]):o.length===2?new te(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new te(o.lat,"lng"in o?o.lng:o.lon,o.alt):u===void 0?null:new te(o,u,p)}var re={latLngToPoint:function(o,u){var p=this.projection.project(o),w=this.scale(u);return this.transformation._transform(p,w)},pointToLatLng:function(o,u){var p=this.scale(u),w=this.transformation.untransform(o,p);return this.projection.unproject(w)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var u=this.projection.bounds,p=this.scale(o),w=this.transformation.transform(u.min,p),P=this.transformation.transform(u.max,p);return new oe(w,P)},infinite:!1,wrapLatLng:function(o){var u=this.wrapLng?f(o.lng,this.wrapLng,!0):o.lng,p=this.wrapLat?f(o.lat,this.wrapLat,!0):o.lat,w=o.alt;return new te(p,u,w)},wrapLatLngBounds:function(o){var u=o.getCenter(),p=this.wrapLatLng(u),w=u.lat-p.lat,P=u.lng-p.lng;if(w===0&&P===0)return o;var N=o.getSouthWest(),I=o.getNorthEast(),K=new te(N.lat-w,N.lng-P),J=new te(I.lat-w,I.lng-P);return new ce(K,J)}},fe=s({},re,{wrapLng:[-180,180],R:6371e3,distance:function(o,u){var p=Math.PI/180,w=o.lat*p,P=u.lat*p,N=Math.sin((u.lat-o.lat)*p/2),I=Math.sin((u.lng-o.lng)*p/2),K=N*N+Math.cos(w)*Math.cos(P)*I*I,J=2*Math.atan2(Math.sqrt(K),Math.sqrt(1-K));return this.R*J}}),Pe=6378137,z={R:Pe,MAX_LATITUDE:85.0511287798,project:function(o){var u=Math.PI/180,p=this.MAX_LATITUDE,w=Math.max(Math.min(p,o.lat),-p),P=Math.sin(w*u);return new j(this.R*o.lng*u,this.R*Math.log((1+P)/(1-P))/2)},unproject:function(o){var u=180/Math.PI;return new te((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*u,o.x*u/this.R)},bounds:function(){var o=Pe*Math.PI;return new oe([-o,-o],[o,o])}()};function ne(o,u,p,w){if(C(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=u,this._c=p,this._d=w}ne.prototype={transform:function(o,u){return this._transform(o.clone(),u)},_transform:function(o,u){return u=u||1,o.x=u*(this._a*o.x+this._b),o.y=u*(this._c*o.y+this._d),o},untransform:function(o,u){return u=u||1,new j((o.x/u-this._b)/this._a,(o.y/u-this._d)/this._c)}};function se(o,u,p,w){return new ne(o,u,p,w)}var Oe=s({},fe,{code:"EPSG:3857",projection:z,transformation:function(){var o=.5/(Math.PI*z.R);return se(o,.5,-o,.5)}()}),rt=s({},Oe,{code:"EPSG:900913"});function jt(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Vt(o,u){var p="",w,P,N,I,K,J;for(w=0,N=o.length;w<N;w++){for(K=o[w],P=0,I=K.length;P<I;P++)J=K[P],p+=(P?"L":"M")+J.x+" "+J.y;p+=u?Se.svg?"z":"x":""}return p||"M0 0"}var Gt=document.documentElement.style,Xt="ActiveXObject"in window,cr=Xt&&!document.addEventListener,ns="msLaunchUri"in navigator&&!("documentMode"in document),Nn=fr("webkit"),Ut=fr("android"),Jt=fr("android 2")||fr("android 3"),rs=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ur=Ut&&fr("Google")&&rs<537&&!("AudioNode"in window),st=!!window.opera,en=!ns&&fr("chrome"),dr=fr("gecko")&&!Nn&&!st&&!Xt,Mr=!en&&fr("safari"),Rt=fr("phantom"),si="OTransition"in Gt,Yn=navigator.platform.indexOf("Win")===0,ss=Xt&&"transition"in Gt,Tn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Jt,Ts="MozPerspective"in Gt,an=!window.L_DISABLE_3D&&(ss||Tn||Ts)&&!si&&!Rt,Zn=typeof orientation<"u"||fr("mobile"),lo=Zn&&Nn,js=Zn&&Tn,is=!window.PointerEvent&&window.MSPointerEvent,Ee=!!(window.PointerEvent||is),Ve="ontouchstart"in window||!!window.TouchEvent,We=!window.L_NO_TOUCH&&(Ve||Ee),we=Zn&&st,me=Zn&&dr,pe=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ie=function(){var o=!1;try{var u=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",m,u),window.removeEventListener("testPassiveEventSupport",m,u)}catch{}return o}(),ct=function(){return!!document.createElement("canvas").getContext}(),_t=!!(document.createElementNS&&jt("svg").createSVGRect),qt=!!_t&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Kn=!_t&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var u=o.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),Ct=navigator.platform.indexOf("Mac")===0,hr=navigator.platform.indexOf("Linux")===0;function fr(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Se={ie:Xt,ielt9:cr,edge:ns,webkit:Nn,android:Ut,android23:Jt,androidStock:ur,opera:st,chrome:en,gecko:dr,safari:Mr,phantom:Rt,opera12:si,win:Yn,ie3d:ss,webkit3d:Tn,gecko3d:Ts,any3d:an,mobile:Zn,mobileWebkit:lo,mobileWebkit3d:js,msPointer:is,pointer:Ee,touch:We,touchNative:Ve,mobileOpera:we,mobileGecko:me,retina:pe,passiveEvents:Ie,canvas:ct,svg:_t,vml:Kn,inlineSvg:qt,mac:Ct,linux:hr},Dl=Se.msPointer?"MSPointerDown":"pointerdown",Fl=Se.msPointer?"MSPointerMove":"pointermove",$l=Se.msPointer?"MSPointerUp":"pointerup",Hu=Se.msPointer?"MSPointerCancel":"pointercancel",co={touchstart:Dl,touchmove:Fl,touchend:$l,touchcancel:Hu},os={touchstart:_e,touchmove:Ke,touchend:Ke,touchcancel:Ke},Rs={},Ul=!1;function bp(o,u,p){return u==="touchstart"&&de(),os[u]?(p=os[u].bind(this,p),o.addEventListener(co[u],p,!1),p):(console.warn("wrong event specified:",u),m)}function Ew(o,u,p){if(!co[u]){console.warn("wrong event specified:",u);return}o.removeEventListener(co[u],p,!1)}function F(o){Rs[o.pointerId]=o}function he(o){Rs[o.pointerId]&&(Rs[o.pointerId]=o)}function ye(o){delete Rs[o.pointerId]}function de(){Ul||(document.addEventListener(Dl,F,!0),document.addEventListener(Fl,he,!0),document.addEventListener($l,ye,!0),document.addEventListener(Hu,ye,!0),Ul=!0)}function Ke(o,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var p in Rs)u.touches.push(Rs[p]);u.changedTouches=[u],o(u)}}function _e(o,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&tn(u),Ke(o,u)}function Ae(o){var u={},p,w;for(w in o)p=o[w],u[w]=p&&p.bind?p.bind(o):p;return o=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var nt=200;function pr(o,u){o.addEventListener("dblclick",u);var p=0,w;function P(N){if(N.detail!==1){w=N.detail;return}if(!(N.pointerType==="mouse"||N.sourceCapabilities&&!N.sourceCapabilities.firesTouchEvents)){var I=kw(N);if(!(I.some(function(J){return J instanceof HTMLLabelElement&&J.attributes.for})&&!I.some(function(J){return J instanceof HTMLInputElement||J instanceof HTMLSelectElement}))){var K=Date.now();K-p<=nt?(w++,w===2&&u(Ae(N))):w=1,p=K}}}return o.addEventListener("click",P),{dblclick:u,simDblclick:P}}function mr(o,u){o.removeEventListener("dblclick",u.dblclick),o.removeEventListener("click",u.simDblclick)}var gr=Vu(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ln=Vu(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),mt=ln==="webkitTransition"||ln==="OTransition"?ln+"End":"transitionend";function Qn(o){return typeof o=="string"?document.getElementById(o):o}function Pt(o,u){var p=o.style[u]||o.currentStyle&&o.currentStyle[u];if((!p||p==="auto")&&document.defaultView){var w=document.defaultView.getComputedStyle(o,null);p=w?w[u]:null}return p==="auto"?null:p}function Le(o,u,p){var w=document.createElement(o);return w.className=u||"",p&&p.appendChild(w),w}function Ye(o){var u=o.parentNode;u&&u.removeChild(o)}function Yt(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function cn(o){var u=o.parentNode;u&&u.lastChild!==o&&u.appendChild(o)}function Ge(o){var u=o.parentNode;u&&u.firstChild!==o&&u.insertBefore(o,u.firstChild)}function jn(o,u){if(o.classList!==void 0)return o.classList.contains(u);var p=aa(o);return p.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(p)}function Fe(o,u){if(o.classList!==void 0)for(var p=S(u),w=0,P=p.length;w<P;w++)o.classList.add(p[w]);else if(!jn(o,u)){var N=aa(o);ii(o,(N?N+" ":"")+u)}}function ut(o,u){o.classList!==void 0?o.classList.remove(u):ii(o,y((" "+aa(o)+" ").replace(" "+u+" "," ")))}function ii(o,u){o.className.baseVal===void 0?o.className=u:o.className.baseVal=u}function aa(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function vr(o,u){"opacity"in o.style?o.style.opacity=u:"filter"in o.style&&nM(o,u)}function nM(o,u){var p=!1,w="DXImageTransform.Microsoft.Alpha";try{p=o.filters.item(w)}catch{if(u===1)return}u=Math.round(u*100),p?(p.Enabled=u!==100,p.Opacity=u):o.style.filter+=" progid:"+w+"(opacity="+u+")"}function Vu(o){for(var u=document.documentElement.style,p=0;p<o.length;p++)if(o[p]in u)return o[p];return!1}function uo(o,u,p){var w=u||new j(0,0);o.style[gr]=(Se.ie3d?"translate("+w.x+"px,"+w.y+"px)":"translate3d("+w.x+"px,"+w.y+"px,0)")+(p?" scale("+p+")":"")}function It(o,u){o._leaflet_pos=u,Se.any3d?uo(o,u):(o.style.left=u.x+"px",o.style.top=u.y+"px")}function ho(o){return o._leaflet_pos||new j(0,0)}var zl,Bl,Sp;if("onselectstart"in document)zl=function(){$e(window,"selectstart",tn)},Bl=function(){dt(window,"selectstart",tn)};else{var Wl=Vu(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);zl=function(){if(Wl){var o=document.documentElement.style;Sp=o[Wl],o[Wl]="none"}},Bl=function(){Wl&&(document.documentElement.style[Wl]=Sp,Sp=void 0)}}function Ep(){$e(window,"dragstart",tn)}function Cp(){dt(window,"dragstart",tn)}var Gu,Pp;function kp(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(qu(),Gu=o,Pp=o.style.outlineStyle,o.style.outlineStyle="none",$e(window,"keydown",qu))}function qu(){Gu&&(Gu.style.outlineStyle=Pp,Gu=void 0,Pp=void 0,dt(window,"keydown",qu))}function Cw(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Np(o){var u=o.getBoundingClientRect();return{x:u.width/o.offsetWidth||1,y:u.height/o.offsetHeight||1,boundingClientRect:u}}var rM={__proto__:null,TRANSFORM:gr,TRANSITION:ln,TRANSITION_END:mt,get:Qn,getStyle:Pt,create:Le,remove:Ye,empty:Yt,toFront:cn,toBack:Ge,hasClass:jn,addClass:Fe,removeClass:ut,setClass:ii,getClass:aa,setOpacity:vr,testProp:Vu,setTransform:uo,setPosition:It,getPosition:ho,get disableTextSelection(){return zl},get enableTextSelection(){return Bl},disableImageDrag:Ep,enableImageDrag:Cp,preventOutline:kp,restoreOutline:qu,getSizedParentNode:Cw,getScale:Np};function $e(o,u,p,w){if(u&&typeof u=="object")for(var P in u)jp(o,P,u[P],p);else{u=S(u);for(var N=0,I=u.length;N<I;N++)jp(o,u[N],p,w)}return this}var as="_leaflet_events";function dt(o,u,p,w){if(arguments.length===1)Pw(o),delete o[as];else if(u&&typeof u=="object")for(var P in u)Rp(o,P,u[P],p);else if(u=S(u),arguments.length===2)Pw(o,function(K){return k(u,K)!==-1});else for(var N=0,I=u.length;N<I;N++)Rp(o,u[N],p,w);return this}function Pw(o,u){for(var p in o[as]){var w=p.split(/\d/)[0];(!u||u(w))&&Rp(o,w,null,null,p)}}var Tp={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function jp(o,u,p,w){var P=u+c(p)+(w?"_"+c(w):"");if(o[as]&&o[as][P])return this;var N=function(K){return p.call(w||o,K||window.event)},I=N;!Se.touchNative&&Se.pointer&&u.indexOf("touch")===0?N=bp(o,u,N):Se.touch&&u==="dblclick"?N=pr(o,N):"addEventListener"in o?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?o.addEventListener(Tp[u]||u,N,Se.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(N=function(K){K=K||window.event,Op(o,K)&&I(K)},o.addEventListener(Tp[u],N,!1)):o.addEventListener(u,I,!1):o.attachEvent("on"+u,N),o[as]=o[as]||{},o[as][P]=N}function Rp(o,u,p,w,P){P=P||u+c(p)+(w?"_"+c(w):"");var N=o[as]&&o[as][P];if(!N)return this;!Se.touchNative&&Se.pointer&&u.indexOf("touch")===0?Ew(o,u,N):Se.touch&&u==="dblclick"?mr(o,N):"removeEventListener"in o?o.removeEventListener(Tp[u]||u,N,!1):o.detachEvent("on"+u,N),o[as][P]=null}function fo(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Mp(o){return jp(o,"wheel",fo),this}function Hl(o){return $e(o,"mousedown touchstart dblclick contextmenu",fo),o._leaflet_disable_click=!0,this}function tn(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function po(o){return tn(o),fo(o),this}function kw(o){if(o.composedPath)return o.composedPath();for(var u=[],p=o.target;p;)u.push(p),p=p.parentNode;return u}function Nw(o,u){if(!u)return new j(o.clientX,o.clientY);var p=Np(u),w=p.boundingClientRect;return new j((o.clientX-w.left)/p.x-u.clientLeft,(o.clientY-w.top)/p.y-u.clientTop)}var sM=Se.linux&&Se.chrome?window.devicePixelRatio:Se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Tw(o){return Se.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/sM:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Op(o,u){var p=u.relatedTarget;if(!p)return!0;try{for(;p&&p!==o;)p=p.parentNode}catch{return!1}return p!==o}var iM={__proto__:null,on:$e,off:dt,stopPropagation:fo,disableScrollPropagation:Mp,disableClickPropagation:Hl,preventDefault:tn,stop:po,getPropagationPath:kw,getMousePosition:Nw,getWheelDelta:Tw,isExternalTarget:Op,addListener:$e,removeListener:dt},jw=Y.extend({run:function(o,u,p,w){this.stop(),this._el=o,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(w||.5,.2),this._startPos=ho(o),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=X(this._animate,this),this._step()},_step:function(o){var u=+new Date-this._startTime,p=this._duration*1e3;u<p?this._runFrame(this._easeOut(u/p),o):(this._runFrame(1),this._complete())},_runFrame:function(o,u){var p=this._startPos.add(this._offset.multiplyBy(o));u&&p._round(),It(this._el,p),this.fire("step")},_complete:function(){H(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Qe=Y.extend({options:{crs:Oe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,u){u=x(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(Z(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ln&&Se.any3d&&!Se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),$e(this._proxy,mt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,u,p){if(u=u===void 0?this._zoom:this._limitZoom(u),o=this._limitCenter(Z(o),u,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=s({animate:p.animate},p.zoom),p.pan=s({animate:p.animate,duration:p.duration},p.pan));var w=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,u,p.zoom):this._tryAnimatedPan(o,p.pan);if(w)return clearTimeout(this._sizeTimer),this}return this._resetView(o,u,p.pan&&p.pan.noMoveStart),this},setZoom:function(o,u){return this._loaded?this.setView(this.getCenter(),o,{zoom:u}):(this._zoom=o,this)},zoomIn:function(o,u){return o=o||(Se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,u)},zoomOut:function(o,u){return o=o||(Se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,u)},setZoomAround:function(o,u,p){var w=this.getZoomScale(u),P=this.getSize().divideBy(2),N=o instanceof j?o:this.latLngToContainerPoint(o),I=N.subtract(P).multiplyBy(1-1/w),K=this.containerPointToLatLng(P.add(I));return this.setView(K,u,{zoom:p})},_getBoundsCenterZoom:function(o,u){u=u||{},o=o.getBounds?o.getBounds():Q(o);var p=q(u.paddingTopLeft||u.padding||[0,0]),w=q(u.paddingBottomRight||u.padding||[0,0]),P=this.getBoundsZoom(o,!1,p.add(w));if(P=typeof u.maxZoom=="number"?Math.min(u.maxZoom,P):P,P===1/0)return{center:o.getCenter(),zoom:P};var N=w.subtract(p).divideBy(2),I=this.project(o.getSouthWest(),P),K=this.project(o.getNorthEast(),P),J=this.unproject(I.add(K).divideBy(2).add(N),P);return{center:J,zoom:P}},fitBounds:function(o,u){if(o=Q(o),!o.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(o,u);return this.setView(p.center,p.zoom,u)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,u){return this.setView(o,this._zoom,{pan:u})},panBy:function(o,u){if(o=q(o).round(),u=u||{},!o.x&&!o.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new jw,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){Fe(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,p,u.duration||.25,u.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,u,p){if(p=p||{},p.animate===!1||!Se.any3d)return this.setView(o,u,p);this._stop();var w=this.project(this.getCenter()),P=this.project(o),N=this.getSize(),I=this._zoom;o=Z(o),u=u===void 0?I:u;var K=Math.max(N.x,N.y),J=K*this.getZoomScale(I,u),ae=P.distanceTo(w)||1,ge=1.42,je=ge*ge;function He(At){var id=At?-1:1,qM=At?J:K,YM=J*J-K*K+id*je*je*ae*ae,ZM=2*qM*je*ae,Hp=YM/ZM,ux=Math.sqrt(Hp*Hp+1)-Hp,KM=ux<1e-9?-18:Math.log(ux);return KM}function vn(At){return(Math.exp(At)-Math.exp(-At))/2}function Zt(At){return(Math.exp(At)+Math.exp(-At))/2}function wr(At){return vn(At)/Zt(At)}var Rn=He(0);function fa(At){return K*(Zt(Rn)/Zt(Rn+ge*At))}function WM(At){return K*(Zt(Rn)*wr(Rn+ge*At)-vn(Rn))/je}function HM(At){return 1-Math.pow(1-At,1.5)}var VM=Date.now(),lx=(He(1)-Rn)/ge,GM=p.duration?1e3*p.duration:1e3*lx*.8;function cx(){var At=(Date.now()-VM)/GM,id=HM(At)*lx;At<=1?(this._flyToFrame=X(cx,this),this._move(this.unproject(w.add(P.subtract(w).multiplyBy(WM(id)/ae)),I),this.getScaleZoom(K/fa(id),I),{flyTo:!0})):this._move(o,u)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),cx.call(this),this},flyToBounds:function(o,u){var p=this._getBoundsCenterZoom(o,u);return this.flyTo(p.center,p.zoom,u)},setMaxBounds:function(o){return o=Q(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var u=this.options.minZoom;return this.options.minZoom=o,this._loaded&&u!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var u=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&u!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,u){this._enforcingBounds=!0;var p=this.getCenter(),w=this._limitCenter(p,this._zoom,Q(o));return p.equals(w)||this.panTo(w,u),this._enforcingBounds=!1,this},panInside:function(o,u){u=u||{};var p=q(u.paddingTopLeft||u.padding||[0,0]),w=q(u.paddingBottomRight||u.padding||[0,0]),P=this.project(this.getCenter()),N=this.project(o),I=this.getPixelBounds(),K=B([I.min.add(p),I.max.subtract(w)]),J=K.getSize();if(!K.contains(N)){this._enforcingBounds=!0;var ae=N.subtract(K.getCenter()),ge=K.extend(N).getSize().subtract(J);P.x+=ae.x<0?-ge.x:ge.x,P.y+=ae.y<0?-ge.y:ge.y,this.panTo(this.unproject(P),u),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=s({animate:!1,pan:!0},o===!0?{animate:!0}:o);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),w=u.divideBy(2).round(),P=p.divideBy(2).round(),N=w.subtract(P);return!N.x&&!N.y?this:(o.animate&&o.pan?this.panBy(N):(o.pan&&this._rawPanBy(N),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=s({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=a(this._handleGeolocationResponse,this),p=a(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,p,o):navigator.geolocation.getCurrentPosition(u,p,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var u=o.code,p=o.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var u=o.coords.latitude,p=o.coords.longitude,w=new te(u,p),P=w.toBounds(o.coords.accuracy*2),N=this._locateOptions;if(N.setView){var I=this.getBoundsZoom(P);this.setView(w,N.maxZoom?Math.min(I,N.maxZoom):I)}var K={latlng:w,bounds:P,timestamp:o.timestamp};for(var J in o.coords)typeof o.coords[J]=="number"&&(K[J]=o.coords[J]);this.fire("locationfound",K)}},addHandler:function(o,u){if(!u)return this;var p=this[o]=new u(this);return this._handlers.push(p),this.options[o]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ye(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(H(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Ye(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,u){var p="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),w=Le("div",p,u||this._mapPane);return o&&(this._panes[o]=w),w},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),u=this.unproject(o.getBottomLeft()),p=this.unproject(o.getTopRight());return new ce(u,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,u,p){o=Q(o),p=q(p||[0,0]);var w=this.getZoom()||0,P=this.getMinZoom(),N=this.getMaxZoom(),I=o.getNorthWest(),K=o.getSouthEast(),J=this.getSize().subtract(p),ae=B(this.project(K,w),this.project(I,w)).getSize(),ge=Se.any3d?this.options.zoomSnap:1,je=J.x/ae.x,He=J.y/ae.y,vn=u?Math.max(je,He):Math.min(je,He);return w=this.getScaleZoom(vn,w),ge&&(w=Math.round(w/(ge/100))*(ge/100),w=u?Math.ceil(w/ge)*ge:Math.floor(w/ge)*ge),Math.max(P,Math.min(N,w))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new j(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,u){var p=this._getTopLeftPoint(o,u);return new oe(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,u){var p=this.options.crs;return u=u===void 0?this._zoom:u,p.scale(o)/p.scale(u)},getScaleZoom:function(o,u){var p=this.options.crs;u=u===void 0?this._zoom:u;var w=p.zoom(o*p.scale(u));return isNaN(w)?1/0:w},project:function(o,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(Z(o),u)},unproject:function(o,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(q(o),u)},layerPointToLatLng:function(o){var u=q(o).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(o){var u=this.project(Z(o))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(Z(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(Q(o))},distance:function(o,u){return this.options.crs.distance(Z(o),Z(u))},containerPointToLayerPoint:function(o){return q(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return q(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var u=this.containerPointToLayerPoint(q(o));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Z(o)))},mouseEventToContainerPoint:function(o){return Nw(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var u=this._container=Qn(o);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");$e(u,"scroll",this._onScroll,this),this._containerId=c(u)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Se.any3d,Fe(o,"leaflet-container"+(Se.touch?" leaflet-touch":"")+(Se.retina?" leaflet-retina":"")+(Se.ielt9?" leaflet-oldie":"")+(Se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=Pt(o,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),It(this._mapPane,new j(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Fe(o.markerPane,"leaflet-zoom-hide"),Fe(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,u,p){It(this._mapPane,new j(0,0));var w=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var P=this._zoom!==u;this._moveStart(P,p)._move(o,u)._moveEnd(P),this.fire("viewreset"),w&&this.fire("load")},_moveStart:function(o,u){return o&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(o,u,p,w){u===void 0&&(u=this._zoom);var P=this._zoom!==u;return this._zoom=u,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),w?p&&p.pinch&&this.fire("zoom",p):((P||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return H(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){It(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[c(this._container)]=this;var u=o?dt:$e;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Se.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){H(this._resizeRequest),this._resizeRequest=X(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,u){for(var p=[],w,P=u==="mouseout"||u==="mouseover",N=o.target||o.srcElement,I=!1;N;){if(w=this._targets[c(N)],w&&(u==="click"||u==="preclick")&&this._draggableMoved(w)){I=!0;break}if(w&&w.listens(u,!0)&&(P&&!Op(N,o)||(p.push(w),P))||N===this._container)break;N=N.parentNode}return!p.length&&!I&&!P&&this.listens(u,!0)&&(p=[this]),p},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var u=o.target||o.srcElement;if(!(!this._loaded||u._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(u))){var p=o.type;p==="mousedown"&&kp(u),this._fireDOMEvent(o,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,u,p){if(o.type==="click"){var w=s({},o);w.type="preclick",this._fireDOMEvent(w,w.type,p)}var P=this._findEventTargets(o,u);if(p){for(var N=[],I=0;I<p.length;I++)p[I].listens(u,!0)&&N.push(p[I]);P=N.concat(P)}if(P.length){u==="contextmenu"&&tn(o);var K=P[0],J={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var ae=K.getLatLng&&(!K._radius||K._radius<=10);J.containerPoint=ae?this.latLngToContainerPoint(K.getLatLng()):this.mouseEventToContainerPoint(o),J.layerPoint=this.containerPointToLayerPoint(J.containerPoint),J.latlng=ae?K.getLatLng():this.layerPointToLatLng(J.layerPoint)}for(I=0;I<P.length;I++)if(P[I].fire(u,J,!0),J.originalEvent._stopped||P[I].options.bubblingMouseEvents===!1&&k(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,u=this._handlers.length;o<u;o++)this._handlers[o].disable()},whenReady:function(o,u){return this._loaded?o.call(u||this,{target:this}):this.on("load",o,u),this},_getMapPanePos:function(){return ho(this._mapPane)||new j(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,u){var p=o&&u!==void 0?this._getNewPixelOrigin(o,u):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,u){var p=this.getSize()._divideBy(2);return this.project(o,u)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,u,p){var w=this._getNewPixelOrigin(p,u);return this.project(o,u)._subtract(w)},_latLngBoundsToNewLayerBounds:function(o,u,p){var w=this._getNewPixelOrigin(p,u);return B([this.project(o.getSouthWest(),u)._subtract(w),this.project(o.getNorthWest(),u)._subtract(w),this.project(o.getSouthEast(),u)._subtract(w),this.project(o.getNorthEast(),u)._subtract(w)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,u,p){if(!p)return o;var w=this.project(o,u),P=this.getSize().divideBy(2),N=new oe(w.subtract(P),w.add(P)),I=this._getBoundsOffset(N,p,u);return Math.abs(I.x)<=1&&Math.abs(I.y)<=1?o:this.unproject(w.add(I),u)},_limitOffset:function(o,u){if(!u)return o;var p=this.getPixelBounds(),w=new oe(p.min.add(o),p.max.add(o));return o.add(this._getBoundsOffset(w,u))},_getBoundsOffset:function(o,u,p){var w=B(this.project(u.getNorthEast(),p),this.project(u.getSouthWest(),p)),P=w.min.subtract(o.min),N=w.max.subtract(o.max),I=this._rebound(P.x,-N.x),K=this._rebound(P.y,-N.y);return new j(I,K)},_rebound:function(o,u){return o+u>0?Math.round(o-u)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(u))},_limitZoom:function(o){var u=this.getMinZoom(),p=this.getMaxZoom(),w=Se.any3d?this.options.zoomSnap:1;return w&&(o=Math.round(o/w)*w),Math.max(u,Math.min(p,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ut(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,u){var p=this._getCenterOffset(o)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,u),!0)},_createAnimProxy:function(){var o=this._proxy=Le("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(u){var p=gr,w=this._proxy.style[p];uo(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),w===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ye(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),u=this.getZoom();uo(this._proxy,this.project(o,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,u,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var w=this.getZoomScale(u),P=this._getCenterOffset(o)._divideBy(1-1/w);return p.animate!==!0&&!this.getSize().contains(P)?!1:(X(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(o,u,!0)},this),!0)},_animateZoom:function(o,u,p,w){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=u,Fe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:u,noUpdate:w}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ut(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function oM(o,u){return new Qe(o,u)}var Or=M.extend({options:{position:"topright"},initialize:function(o){x(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var u=this._map;return u&&u.removeControl(this),this.options.position=o,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var u=this._container=this.onAdd(o),p=this.getPosition(),w=o._controlCorners[p];return Fe(u,"leaflet-control"),p.indexOf("bottom")!==-1?w.insertBefore(u,w.firstChild):w.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ye(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Vl=function(o){return new Or(o)};Qe.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},u="leaflet-",p=this._controlContainer=Le("div",u+"control-container",this._container);function w(P,N){var I=u+P+" "+u+N;o[P+N]=Le("div",I,p)}w("top","left"),w("top","right"),w("bottom","left"),w("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Ye(this._controlCorners[o]);Ye(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Rw=Or.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,u,p,w){return p<w?-1:w<p?1:0}},initialize:function(o,u,p){x(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var w in o)this._addLayer(o[w],w);for(w in u)this._addLayer(u[w],w,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return Or.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,u){return this._addLayer(o,u),this._map?this._update():this},addOverlay:function(o,u){return this._addLayer(o,u,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var u=this._getLayer(c(o));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){Fe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(Fe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):ut(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ut(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",u=this._container=Le("div",o),p=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Hl(u),Mp(u);var w=this._section=Le("section",o+"-list");p&&(this._map.on("click",this.collapse,this),$e(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var P=this._layersLink=Le("a",o+"-toggle",u);P.href="#",P.title="Layers",P.setAttribute("role","button"),$e(P,{keydown:function(N){N.keyCode===13&&this._expandSafely()},click:function(N){tn(N),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=Le("div",o+"-base",w),this._separator=Le("div",o+"-separator",w),this._overlaysList=Le("div",o+"-overlays",w),u.appendChild(w)},_getLayer:function(o){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&c(this._layers[u].layer)===o)return this._layers[u]},_addLayer:function(o,u,p){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:u,overlay:p}),this.options.sortLayers&&this._layers.sort(a(function(w,P){return this.options.sortFunction(w.layer,P.layer,w.name,P.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Yt(this._baseLayersList),Yt(this._overlaysList),this._layerControlInputs=[];var o,u,p,w,P=0;for(p=0;p<this._layers.length;p++)w=this._layers[p],this._addItem(w),u=u||w.overlay,o=o||!w.overlay,P+=w.overlay?0:1;return this.options.hideSingleBase&&(o=o&&P>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=u&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var u=this._getLayer(c(o.target)),p=u.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;p&&this._map.fire(p,u)},_createRadioElement:function(o,u){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(u?' checked="checked"':"")+"/>",w=document.createElement("div");return w.innerHTML=p,w.firstChild},_addItem:function(o){var u=document.createElement("label"),p=this._map.hasLayer(o.layer),w;o.overlay?(w=document.createElement("input"),w.type="checkbox",w.className="leaflet-control-layers-selector",w.defaultChecked=p):w=this._createRadioElement("leaflet-base-layers_"+c(this),p),this._layerControlInputs.push(w),w.layerId=c(o.layer),$e(w,"click",this._onInputClick,this);var P=document.createElement("span");P.innerHTML=" "+o.name;var N=document.createElement("span");u.appendChild(N),N.appendChild(w),N.appendChild(P);var I=o.overlay?this._overlaysList:this._baseLayersList;return I.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,u,p,w=[],P=[];this._handlingClick=!0;for(var N=o.length-1;N>=0;N--)u=o[N],p=this._getLayer(u.layerId).layer,u.checked?w.push(p):u.checked||P.push(p);for(N=0;N<P.length;N++)this._map.hasLayer(P[N])&&this._map.removeLayer(P[N]);for(N=0;N<w.length;N++)this._map.hasLayer(w[N])||this._map.addLayer(w[N]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,u,p,w=this._map.getZoom(),P=o.length-1;P>=0;P--)u=o[P],p=this._getLayer(u.layerId).layer,u.disabled=p.options.minZoom!==void 0&&w<p.options.minZoom||p.options.maxZoom!==void 0&&w>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,$e(o,"click",tn),this.expand();var u=this;setTimeout(function(){dt(o,"click",tn),u._preventClick=!1})}}),aM=function(o,u,p){return new Rw(o,u,p)},Ip=Or.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var u="leaflet-control-zoom",p=Le("div",u+" leaflet-bar"),w=this.options;return this._zoomInButton=this._createButton(w.zoomInText,w.zoomInTitle,u+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(w.zoomOutText,w.zoomOutTitle,u+"-out",p,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,u,p,w,P){var N=Le("a",p,w);return N.innerHTML=o,N.href="#",N.title=u,N.setAttribute("role","button"),N.setAttribute("aria-label",u),Hl(N),$e(N,"click",po),$e(N,"click",P,this),$e(N,"click",this._refocusOnMap,this),N},_updateDisabled:function(){var o=this._map,u="leaflet-disabled";ut(this._zoomInButton,u),ut(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(Fe(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(Fe(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});Qe.mergeOptions({zoomControl:!0}),Qe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ip,this.addControl(this.zoomControl))});var lM=function(o){return new Ip(o)},Mw=Or.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var u="leaflet-control-scale",p=Le("div",u),w=this.options;return this._addScales(w,u+"-line",p),o.on(w.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),p},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,u,p){o.metric&&(this._mScale=Le("div",u,p)),o.imperial&&(this._iScale=Le("div",u,p))},_update:function(){var o=this._map,u=o.getSize().y/2,p=o.distance(o.containerPointToLatLng([0,u]),o.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(p)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var u=this._getRoundNum(o),p=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,p,u/o)},_updateImperial:function(o){var u=o*3.2808399,p,w,P;u>5280?(p=u/5280,w=this._getRoundNum(p),this._updateScale(this._iScale,w+" mi",w/p)):(P=this._getRoundNum(u),this._updateScale(this._iScale,P+" ft",P/u))},_updateScale:function(o,u,p){o.style.width=Math.round(this.options.maxWidth*p)+"px",o.innerHTML=u},_getRoundNum:function(o){var u=Math.pow(10,(Math.floor(o)+"").length-1),p=o/u;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,u*p}}),cM=function(o){return new Mw(o)},uM='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ap=Or.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Se.inlineSvg?uM+" ":"")+"Leaflet</a>"},initialize:function(o){x(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Le("div","leaflet-control-attribution"),Hl(this._container);for(var u in o._layers)o._layers[u].getAttribution&&this.addAttribution(o._layers[u].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var u in this._attributions)this._attributions[u]&&o.push(u);var p=[];this.options.prefix&&p.push(this.options.prefix),o.length&&p.push(o.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});Qe.mergeOptions({attributionControl:!0}),Qe.addInitHook(function(){this.options.attributionControl&&new Ap().addTo(this)});var dM=function(o){return new Ap(o)};Or.Layers=Rw,Or.Zoom=Ip,Or.Scale=Mw,Or.Attribution=Ap,Vl.layers=aM,Vl.zoom=lM,Vl.scale=cM,Vl.attribution=dM;var ls=M.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ls.addTo=function(o,u){return o.addHandler(u,this),this};var hM={Events:V},Ow=Se.touch?"touchstart mousedown":"mousedown",oi=Y.extend({options:{clickTolerance:3},initialize:function(o,u,p,w){x(this,w),this._element=o,this._dragStartTarget=u||o,this._preventOutline=p},enable:function(){this._enabled||($e(this._dragStartTarget,Ow,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(oi._dragging===this&&this.finishDrag(!0),dt(this._dragStartTarget,Ow,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!jn(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){oi._dragging===this&&this.finishDrag();return}if(!(oi._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(oi._dragging=this,this._preventOutline&&kp(this._element),Ep(),zl(),!this._moving)){this.fire("down");var u=o.touches?o.touches[0]:o,p=Cw(this._element);this._startPoint=new j(u.clientX,u.clientY),this._startPos=ho(this._element),this._parentScale=Np(p);var w=o.type==="mousedown";$e(document,w?"mousemove":"touchmove",this._onMove,this),$e(document,w?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var u=o.touches&&o.touches.length===1?o.touches[0]:o,p=new j(u.clientX,u.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,tn(o),this._moved||(this.fire("dragstart"),this._moved=!0,Fe(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Fe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),It(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){ut(document.body,"leaflet-dragging"),this._lastTarget&&(ut(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),dt(document,"mousemove touchmove",this._onMove,this),dt(document,"mouseup touchend touchcancel",this._onUp,this),Cp(),Bl();var u=this._moved&&this._moving;this._moving=!1,oi._dragging=!1,u&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function Iw(o,u,p){var w,P=[1,4,2,8],N,I,K,J,ae,ge,je,He;for(N=0,ge=o.length;N<ge;N++)o[N]._code=mo(o[N],u);for(K=0;K<4;K++){for(je=P[K],w=[],N=0,ge=o.length,I=ge-1;N<ge;I=N++)J=o[N],ae=o[I],J._code&je?ae._code&je||(He=Yu(ae,J,je,u,p),He._code=mo(He,u),w.push(He)):(ae._code&je&&(He=Yu(ae,J,je,u,p),He._code=mo(He,u),w.push(He)),w.push(J));o=w}return o}function Aw(o,u){var p,w,P,N,I,K,J,ae,ge;if(!o||o.length===0)throw new Error("latlngs not passed");yr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var je=Z([0,0]),He=Q(o),vn=He.getNorthWest().distanceTo(He.getSouthWest())*He.getNorthEast().distanceTo(He.getNorthWest());vn<1700&&(je=Lp(o));var Zt=o.length,wr=[];for(p=0;p<Zt;p++){var Rn=Z(o[p]);wr.push(u.project(Z([Rn.lat-je.lat,Rn.lng-je.lng])))}for(K=J=ae=0,p=0,w=Zt-1;p<Zt;w=p++)P=wr[p],N=wr[w],I=P.y*N.x-N.y*P.x,J+=(P.x+N.x)*I,ae+=(P.y+N.y)*I,K+=I*3;K===0?ge=wr[0]:ge=[J/K,ae/K];var fa=u.unproject(q(ge));return Z([fa.lat+je.lat,fa.lng+je.lng])}function Lp(o){for(var u=0,p=0,w=0,P=0;P<o.length;P++){var N=Z(o[P]);u+=N.lat,p+=N.lng,w++}return Z([u/w,p/w])}var fM={__proto__:null,clipPolygon:Iw,polygonCenter:Aw,centroid:Lp};function Lw(o,u){if(!u||!o.length)return o.slice();var p=u*u;return o=gM(o,p),o=mM(o,p),o}function Dw(o,u,p){return Math.sqrt(Gl(o,u,p,!0))}function pM(o,u,p){return Gl(o,u,p)}function mM(o,u){var p=o.length,w=typeof Uint8Array<"u"?Uint8Array:Array,P=new w(p);P[0]=P[p-1]=1,Dp(o,P,u,0,p-1);var N,I=[];for(N=0;N<p;N++)P[N]&&I.push(o[N]);return I}function Dp(o,u,p,w,P){var N=0,I,K,J;for(K=w+1;K<=P-1;K++)J=Gl(o[K],o[w],o[P],!0),J>N&&(I=K,N=J);N>p&&(u[I]=1,Dp(o,u,p,w,I),Dp(o,u,p,I,P))}function gM(o,u){for(var p=[o[0]],w=1,P=0,N=o.length;w<N;w++)vM(o[w],o[P])>u&&(p.push(o[w]),P=w);return P<N-1&&p.push(o[N-1]),p}var Fw;function $w(o,u,p,w,P){var N=w?Fw:mo(o,p),I=mo(u,p),K,J,ae;for(Fw=I;;){if(!(N|I))return[o,u];if(N&I)return!1;K=N||I,J=Yu(o,u,K,p,P),ae=mo(J,p),K===N?(o=J,N=ae):(u=J,I=ae)}}function Yu(o,u,p,w,P){var N=u.x-o.x,I=u.y-o.y,K=w.min,J=w.max,ae,ge;return p&8?(ae=o.x+N*(J.y-o.y)/I,ge=J.y):p&4?(ae=o.x+N*(K.y-o.y)/I,ge=K.y):p&2?(ae=J.x,ge=o.y+I*(J.x-o.x)/N):p&1&&(ae=K.x,ge=o.y+I*(K.x-o.x)/N),new j(ae,ge,P)}function mo(o,u){var p=0;return o.x<u.min.x?p|=1:o.x>u.max.x&&(p|=2),o.y<u.min.y?p|=4:o.y>u.max.y&&(p|=8),p}function vM(o,u){var p=u.x-o.x,w=u.y-o.y;return p*p+w*w}function Gl(o,u,p,w){var P=u.x,N=u.y,I=p.x-P,K=p.y-N,J=I*I+K*K,ae;return J>0&&(ae=((o.x-P)*I+(o.y-N)*K)/J,ae>1?(P=p.x,N=p.y):ae>0&&(P+=I*ae,N+=K*ae)),I=o.x-P,K=o.y-N,w?I*I+K*K:new j(P,N)}function yr(o){return!C(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function Uw(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),yr(o)}function zw(o,u){var p,w,P,N,I,K,J,ae;if(!o||o.length===0)throw new Error("latlngs not passed");yr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var ge=Z([0,0]),je=Q(o),He=je.getNorthWest().distanceTo(je.getSouthWest())*je.getNorthEast().distanceTo(je.getNorthWest());He<1700&&(ge=Lp(o));var vn=o.length,Zt=[];for(p=0;p<vn;p++){var wr=Z(o[p]);Zt.push(u.project(Z([wr.lat-ge.lat,wr.lng-ge.lng])))}for(p=0,w=0;p<vn-1;p++)w+=Zt[p].distanceTo(Zt[p+1])/2;if(w===0)ae=Zt[0];else for(p=0,N=0;p<vn-1;p++)if(I=Zt[p],K=Zt[p+1],P=I.distanceTo(K),N+=P,N>w){J=(N-w)/P,ae=[K.x-J*(K.x-I.x),K.y-J*(K.y-I.y)];break}var Rn=u.unproject(q(ae));return Z([Rn.lat+ge.lat,Rn.lng+ge.lng])}var yM={__proto__:null,simplify:Lw,pointToSegmentDistance:Dw,closestPointOnSegment:pM,clipSegment:$w,_getEdgeIntersection:Yu,_getBitCode:mo,_sqClosestPointOnSegment:Gl,isFlat:yr,_flat:Uw,polylineCenter:zw},Fp={project:function(o){return new j(o.lng,o.lat)},unproject:function(o){return new te(o.y,o.x)},bounds:new oe([-180,-90],[180,90])},$p={R:6378137,R_MINOR:6356752314245179e-9,bounds:new oe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var u=Math.PI/180,p=this.R,w=o.lat*u,P=this.R_MINOR/p,N=Math.sqrt(1-P*P),I=N*Math.sin(w),K=Math.tan(Math.PI/4-w/2)/Math.pow((1-I)/(1+I),N/2);return w=-p*Math.log(Math.max(K,1e-10)),new j(o.lng*u*p,w)},unproject:function(o){for(var u=180/Math.PI,p=this.R,w=this.R_MINOR/p,P=Math.sqrt(1-w*w),N=Math.exp(-o.y/p),I=Math.PI/2-2*Math.atan(N),K=0,J=.1,ae;K<15&&Math.abs(J)>1e-7;K++)ae=P*Math.sin(I),ae=Math.pow((1-ae)/(1+ae),P/2),J=Math.PI/2-2*Math.atan(N*ae)-I,I+=J;return new te(I*u,o.x*u/p)}},wM={__proto__:null,LonLat:Fp,Mercator:$p,SphericalMercator:z},xM=s({},fe,{code:"EPSG:3395",projection:$p,transformation:function(){var o=.5/(Math.PI*$p.R);return se(o,.5,-o,.5)}()}),Bw=s({},fe,{code:"EPSG:4326",projection:Fp,transformation:se(1/180,1,-1/180,.5)}),_M=s({},re,{projection:Fp,transformation:se(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,u){var p=u.lng-o.lng,w=u.lat-o.lat;return Math.sqrt(p*p+w*w)},infinite:!0});re.Earth=fe,re.EPSG3395=xM,re.EPSG3857=Oe,re.EPSG900913=rt,re.EPSG4326=Bw,re.Simple=_M;var Ir=Y.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[c(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[c(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var u=o.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var p=this.getEvents();u.on(p,this),this.once("remove",function(){u.off(p,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});Qe.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var u=c(o);return this._layers[u]?this:(this._layers[u]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var u=c(o);return this._layers[u]?(this._loaded&&o.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return c(o)in this._layers},eachLayer:function(o,u){for(var p in this._layers)o.call(u,this._layers[p]);return this},_addLayers:function(o){o=o?C(o)?o:[o]:[];for(var u=0,p=o.length;u<p;u++)this.addLayer(o[u])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[c(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var u=c(o);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,u=-1/0,p=this._getZoomSpan();for(var w in this._zoomBoundLayers){var P=this._zoomBoundLayers[w].options;o=P.minZoom===void 0?o:Math.min(o,P.minZoom),u=P.maxZoom===void 0?u:Math.max(u,P.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=o===1/0?void 0:o,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var la=Ir.extend({initialize:function(o,u){x(this,u),this._layers={};var p,w;if(o)for(p=0,w=o.length;p<w;p++)this.addLayer(o[p])},addLayer:function(o){var u=this.getLayerId(o);return this._layers[u]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var u=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(o){var u=typeof o=="number"?o:this.getLayerId(o);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var u=Array.prototype.slice.call(arguments,1),p,w;for(p in this._layers)w=this._layers[p],w[o]&&w[o].apply(w,u);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,u){for(var p in this._layers)o.call(u,this._layers[p]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return c(o)}}),bM=function(o,u){return new la(o,u)},Ms=la.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),la.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),la.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new ce;for(var u in this._layers){var p=this._layers[u];o.extend(p.getBounds?p.getBounds():p.getLatLng())}return o}}),SM=function(o,u){return new Ms(o,u)},ca=M.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){x(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,u){var p=this._getIconUrl(o);if(!p){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var w=this._createImg(p,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(w,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),w},_setIconStyles:function(o,u){var p=this.options,w=p[u+"Size"];typeof w=="number"&&(w=[w,w]);var P=q(w),N=q(u==="shadow"&&p.shadowAnchor||p.iconAnchor||P&&P.divideBy(2,!0));o.className="leaflet-marker-"+u+" "+(p.className||""),N&&(o.style.marginLeft=-N.x+"px",o.style.marginTop=-N.y+"px"),P&&(o.style.width=P.x+"px",o.style.height=P.y+"px")},_createImg:function(o,u){return u=u||document.createElement("img"),u.src=o,u},_getIconUrl:function(o){return Se.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function EM(o){return new ca(o)}var ql=ca.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof ql.imagePath!="string"&&(ql.imagePath=this._detectIconPath()),(this.options.imagePath||ql.imagePath)+ca.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var u=function(p,w,P){var N=w.exec(p);return N&&N[P]};return o=u(o,/^url\((['"])?(.+)\1\)$/,2),o&&u(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Le("div","leaflet-default-icon-path",document.body),u=Pt(o,"background-image")||Pt(o,"backgroundImage");if(document.body.removeChild(o),u=this._stripUrl(u),u)return u;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),Ww=ls.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new oi(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Fe(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ut(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var u=this._marker,p=u._map,w=this._marker.options.autoPanSpeed,P=this._marker.options.autoPanPadding,N=ho(u._icon),I=p.getPixelBounds(),K=p.getPixelOrigin(),J=B(I.min._subtract(K).add(P),I.max._subtract(K).subtract(P));if(!J.contains(N)){var ae=q((Math.max(J.max.x,N.x)-J.max.x)/(I.max.x-J.max.x)-(Math.min(J.min.x,N.x)-J.min.x)/(I.min.x-J.min.x),(Math.max(J.max.y,N.y)-J.max.y)/(I.max.y-J.max.y)-(Math.min(J.min.y,N.y)-J.min.y)/(I.min.y-J.min.y)).multiplyBy(w);p.panBy(ae,{animate:!1}),this._draggable._newPos._add(ae),this._draggable._startPos._add(ae),It(u._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=X(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(H(this._panRequest),this._panRequest=X(this._adjustPan.bind(this,o)))},_onDrag:function(o){var u=this._marker,p=u._shadow,w=ho(u._icon),P=u._map.layerPointToLatLng(w);p&&It(p,w),u._latlng=P,o.latlng=P,o.oldLatLng=this._oldLatLng,u.fire("move",o).fire("drag",o)},_onDragEnd:function(o){H(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Zu=Ir.extend({options:{icon:new ql,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,u){x(this,u),this._latlng=Z(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var u=this._latlng;return this._latlng=Z(o),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=o.icon.createIcon(this._icon),w=!1;p!==this._icon&&(this._icon&&this._removeIcon(),w=!0,o.title&&(p.title=o.title),p.tagName==="IMG"&&(p.alt=o.alt||"")),Fe(p,u),o.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$e(p,"focus",this._panOnFocus,this);var P=o.icon.createShadow(this._shadow),N=!1;P!==this._shadow&&(this._removeShadow(),N=!0),P&&(Fe(P,u),P.alt=""),this._shadow=P,o.opacity<1&&this._updateOpacity(),w&&this.getPane().appendChild(this._icon),this._initInteraction(),P&&N&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&dt(this._icon,"focus",this._panOnFocus,this),Ye(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ye(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&It(this._icon,o),this._shadow&&It(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var u=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(Fe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ww)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ww(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&vr(this._icon,o),this._shadow&&vr(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var u=this.options.icon.options,p=u.iconSize?q(u.iconSize):q(0,0),w=u.iconAnchor?q(u.iconAnchor):q(0,0);o.panInside(this._latlng,{paddingTopLeft:w,paddingBottomRight:p.subtract(w)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function CM(o,u){return new Zu(o,u)}var ai=Ir.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return x(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ku=ai.extend({options:{fill:!0,radius:10},initialize:function(o,u){x(this,u),this._latlng=Z(o),this._radius=this.options.radius},setLatLng:function(o){var u=this._latlng;return this._latlng=Z(o),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var u=o&&o.radius||this._radius;return ai.prototype.setStyle.call(this,o),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,u=this._radiusY||o,p=this._clickTolerance(),w=[o+p,u+p];this._pxBounds=new oe(this._point.subtract(w),this._point.add(w))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function PM(o,u){return new Ku(o,u)}var Up=Ku.extend({initialize:function(o,u,p){if(typeof u=="number"&&(u=s({},p,{radius:u})),x(this,u),this._latlng=Z(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new ce(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:ai.prototype.setStyle,_project:function(){var o=this._latlng.lng,u=this._latlng.lat,p=this._map,w=p.options.crs;if(w.distance===fe.distance){var P=Math.PI/180,N=this._mRadius/fe.R/P,I=p.project([u+N,o]),K=p.project([u-N,o]),J=I.add(K).divideBy(2),ae=p.unproject(J).lat,ge=Math.acos((Math.cos(N*P)-Math.sin(u*P)*Math.sin(ae*P))/(Math.cos(u*P)*Math.cos(ae*P)))/P;(isNaN(ge)||ge===0)&&(ge=N/Math.cos(Math.PI/180*u)),this._point=J.subtract(p.getPixelOrigin()),this._radius=isNaN(ge)?0:J.x-p.project([ae,o-ge]).x,this._radiusY=J.y-I.y}else{var je=w.unproject(w.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(je).x}this._updateBounds()}});function kM(o,u,p){return new Up(o,u,p)}var Os=ai.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,u){x(this,u),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var u=1/0,p=null,w=Gl,P,N,I=0,K=this._parts.length;I<K;I++)for(var J=this._parts[I],ae=1,ge=J.length;ae<ge;ae++){P=J[ae-1],N=J[ae];var je=w(o,P,N,!0);je<u&&(u=je,p=w(o,P,N))}return p&&(p.distance=Math.sqrt(u)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zw(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,u){return u=u||this._defaultShape(),o=Z(o),u.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new ce,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return yr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var u=[],p=yr(o),w=0,P=o.length;w<P;w++)p?(u[w]=Z(o[w]),this._bounds.extend(u[w])):u[w]=this._convertLatLngs(o[w]);return u},_project:function(){var o=new oe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),u=new j(o,o);this._rawPxBounds&&(this._pxBounds=new oe([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(o,u,p){var w=o[0]instanceof te,P=o.length,N,I;if(w){for(I=[],N=0;N<P;N++)I[N]=this._map.latLngToLayerPoint(o[N]),p.extend(I[N]);u.push(I)}else for(N=0;N<P;N++)this._projectLatlngs(o[N],u,p)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,p,w,P,N,I,K,J;for(p=0,P=0,N=this._rings.length;p<N;p++)for(J=this._rings[p],w=0,I=J.length;w<I-1;w++)K=$w(J[w],J[w+1],o,w,!0),K&&(u[P]=u[P]||[],u[P].push(K[0]),(K[1]!==J[w+1]||w===I-2)&&(u[P].push(K[1]),P++))}},_simplifyPoints:function(){for(var o=this._parts,u=this.options.smoothFactor,p=0,w=o.length;p<w;p++)o[p]=Lw(o[p],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,u){var p,w,P,N,I,K,J=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(p=0,N=this._parts.length;p<N;p++)for(K=this._parts[p],w=0,I=K.length,P=I-1;w<I;P=w++)if(!(!u&&w===0)&&Dw(o,K[P],K[w])<=J)return!0;return!1}});function NM(o,u){return new Os(o,u)}Os._flat=Uw;var ua=Os.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Aw(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var u=Os.prototype._convertLatLngs.call(this,o),p=u.length;return p>=2&&u[0]instanceof te&&u[0].equals(u[p-1])&&u.pop(),u},_setLatLngs:function(o){Os.prototype._setLatLngs.call(this,o),yr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return yr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,u=this.options.weight,p=new j(u,u);if(o=new oe(o.min.subtract(p),o.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var w=0,P=this._rings.length,N;w<P;w++)N=Iw(this._rings[w],o,!0),N.length&&this._parts.push(N)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var u=!1,p,w,P,N,I,K,J,ae;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(N=0,J=this._parts.length;N<J;N++)for(p=this._parts[N],I=0,ae=p.length,K=ae-1;I<ae;K=I++)w=p[I],P=p[K],w.y>o.y!=P.y>o.y&&o.x<(P.x-w.x)*(o.y-w.y)/(P.y-w.y)+w.x&&(u=!u);return u||Os.prototype._containsPoint.call(this,o,!0)}});function TM(o,u){return new ua(o,u)}var Is=Ms.extend({initialize:function(o,u){x(this,u),this._layers={},o&&this.addData(o)},addData:function(o){var u=C(o)?o:o.features,p,w,P;if(u){for(p=0,w=u.length;p<w;p++)P=u[p],(P.geometries||P.geometry||P.features||P.coordinates)&&this.addData(P);return this}var N=this.options;if(N.filter&&!N.filter(o))return this;var I=Qu(o,N);return I?(I.feature=ed(o),I.defaultOptions=I.options,this.resetStyle(I),N.onEachFeature&&N.onEachFeature(o,I),this.addLayer(I)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=s({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(u){this._setLayerStyle(u,o)},this)},_setLayerStyle:function(o,u){o.setStyle&&(typeof u=="function"&&(u=u(o.feature)),o.setStyle(u))}});function Qu(o,u){var p=o.type==="Feature"?o.geometry:o,w=p?p.coordinates:null,P=[],N=u&&u.pointToLayer,I=u&&u.coordsToLatLng||zp,K,J,ae,ge;if(!w&&!p)return null;switch(p.type){case"Point":return K=I(w),Hw(N,o,K,u);case"MultiPoint":for(ae=0,ge=w.length;ae<ge;ae++)K=I(w[ae]),P.push(Hw(N,o,K,u));return new Ms(P);case"LineString":case"MultiLineString":return J=Xu(w,p.type==="LineString"?0:1,I),new Os(J,u);case"Polygon":case"MultiPolygon":return J=Xu(w,p.type==="Polygon"?1:2,I),new ua(J,u);case"GeometryCollection":for(ae=0,ge=p.geometries.length;ae<ge;ae++){var je=Qu({geometry:p.geometries[ae],type:"Feature",properties:o.properties},u);je&&P.push(je)}return new Ms(P);case"FeatureCollection":for(ae=0,ge=p.features.length;ae<ge;ae++){var He=Qu(p.features[ae],u);He&&P.push(He)}return new Ms(P);default:throw new Error("Invalid GeoJSON object.")}}function Hw(o,u,p,w){return o?o(u,p):new Zu(p,w&&w.markersInheritOptions&&w)}function zp(o){return new te(o[1],o[0],o[2])}function Xu(o,u,p){for(var w=[],P=0,N=o.length,I;P<N;P++)I=u?Xu(o[P],u-1,p):(p||zp)(o[P]),w.push(I);return w}function Bp(o,u){return o=Z(o),o.alt!==void 0?[v(o.lng,u),v(o.lat,u),v(o.alt,u)]:[v(o.lng,u),v(o.lat,u)]}function Ju(o,u,p,w){for(var P=[],N=0,I=o.length;N<I;N++)P.push(u?Ju(o[N],yr(o[N])?0:u-1,p,w):Bp(o[N],w));return!u&&p&&P.length>0&&P.push(P[0].slice()),P}function da(o,u){return o.feature?s({},o.feature,{geometry:u}):ed(u)}function ed(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var Wp={toGeoJSON:function(o){return da(this,{type:"Point",coordinates:Bp(this.getLatLng(),o)})}};Zu.include(Wp),Up.include(Wp),Ku.include(Wp),Os.include({toGeoJSON:function(o){var u=!yr(this._latlngs),p=Ju(this._latlngs,u?1:0,!1,o);return da(this,{type:(u?"Multi":"")+"LineString",coordinates:p})}}),ua.include({toGeoJSON:function(o){var u=!yr(this._latlngs),p=u&&!yr(this._latlngs[0]),w=Ju(this._latlngs,p?2:u?1:0,!0,o);return u||(w=[w]),da(this,{type:(p?"Multi":"")+"Polygon",coordinates:w})}}),la.include({toMultiPoint:function(o){var u=[];return this.eachLayer(function(p){u.push(p.toGeoJSON(o).geometry.coordinates)}),da(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(o){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(o);var p=u==="GeometryCollection",w=[];return this.eachLayer(function(P){if(P.toGeoJSON){var N=P.toGeoJSON(o);if(p)w.push(N.geometry);else{var I=ed(N);I.type==="FeatureCollection"?w.push.apply(w,I.features):w.push(I)}}}),p?da(this,{geometries:w,type:"GeometryCollection"}):{type:"FeatureCollection",features:w}}});function Vw(o,u){return new Is(o,u)}var jM=Vw,td=Ir.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,u,p){this._url=o,this._bounds=Q(u),x(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Fe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ye(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&cn(this._image),this},bringToBack:function(){return this._map&&Ge(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=Q(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",u=this._image=o?this._url:Le("img");if(Fe(u,"leaflet-image-layer"),this._zoomAnimated&&Fe(u,"leaflet-zoom-animated"),this.options.className&&Fe(u,this.options.className),u.onselectstart=m,u.onmousemove=m,u.onload=a(this.fire,this,"load"),u.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(o){var u=this._map.getZoomScale(o.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;uo(this._image,p,u)},_reset:function(){var o=this._image,u=new oe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=u.getSize();It(o,u.min),o.style.width=p.x+"px",o.style.height=p.y+"px"},_updateOpacity:function(){vr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),RM=function(o,u,p){return new td(o,u,p)},Gw=td.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",u=this._image=o?this._url:Le("video");if(Fe(u,"leaflet-image-layer"),this._zoomAnimated&&Fe(u,"leaflet-zoom-animated"),this.options.className&&Fe(u,this.options.className),u.onselectstart=m,u.onmousemove=m,u.onloadeddata=a(this.fire,this,"load"),o){for(var p=u.getElementsByTagName("source"),w=[],P=0;P<p.length;P++)w.push(p[P].src);this._url=p.length>0?w:[u.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var N=0;N<this._url.length;N++){var I=Le("source");I.src=this._url[N],u.appendChild(I)}}});function MM(o,u,p){return new Gw(o,u,p)}var qw=td.extend({_initImage:function(){var o=this._image=this._url;Fe(o,"leaflet-image-layer"),this._zoomAnimated&&Fe(o,"leaflet-zoom-animated"),this.options.className&&Fe(o,this.options.className),o.onselectstart=m,o.onmousemove=m}});function OM(o,u,p){return new qw(o,u,p)}var cs=Ir.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,u){o&&(o instanceof te||C(o))?(this._latlng=Z(o),x(this,u)):(x(this,o),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&vr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&vr(this._container,1),this.bringToFront(),this.options.interactive&&(Fe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(vr(this._container,0),this._removeTimeout=setTimeout(a(Ye,void 0,this._container),200)):Ye(this._container),this.options.interactive&&(ut(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=Z(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&cn(this._container),this},bringToBack:function(){return this._map&&Ge(this._container),this},_prepareOpen:function(o){var u=this._source;if(!u._map)return!1;if(u instanceof Ms){u=null;var p=this._source._layers;for(var w in p)if(p[w]._map){u=p[w];break}if(!u)return!1;this._source=u}if(!o)if(u.getCenter)o=u.getCenter();else if(u.getLatLng)o=u.getLatLng();else if(u.getBounds)o=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")o.innerHTML=u;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),u=q(this.options.offset),p=this._getAnchor();this._zoomAnimated?It(this._container,o.add(p)):u=u.add(o).add(p);var w=this._containerBottom=-u.y,P=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=w+"px",this._container.style.left=P+"px"}},_getAnchor:function(){return[0,0]}});Qe.include({_initOverlay:function(o,u,p,w){var P=u;return P instanceof o||(P=new o(w).setContent(u)),p&&P.setLatLng(p),P}}),Ir.include({_initOverlay:function(o,u,p,w){var P=p;return P instanceof o?(x(P,w),P._source=this):(P=u&&!w?u:new o(w,this),P.setContent(p)),P}});var nd=cs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,cs.prototype.openOn.call(this,o)},onAdd:function(o){cs.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ai||this._source.on("preclick",fo))},onRemove:function(o){cs.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ai||this._source.off("preclick",fo))},getEvents:function(){var o=cs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",u=this._container=Le("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=Le("div",o+"-content-wrapper",u);if(this._contentNode=Le("div",o+"-content",p),Hl(u),Mp(this._contentNode),$e(u,"contextmenu",fo),this._tipContainer=Le("div",o+"-tip-container",u),this._tip=Le("div",o+"-tip",this._tipContainer),this.options.closeButton){var w=this._closeButton=Le("a",o+"-close-button",u);w.setAttribute("role","button"),w.setAttribute("aria-label","Close popup"),w.href="#close",w.innerHTML='<span aria-hidden="true">&#215;</span>',$e(w,"click",function(P){tn(P),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,u=o.style;u.width="",u.whiteSpace="nowrap";var p=o.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),u.width=p+1+"px",u.whiteSpace="",u.height="";var w=o.offsetHeight,P=this.options.maxHeight,N="leaflet-popup-scrolled";P&&w>P?(u.height=P+"px",Fe(o,N)):ut(o,N),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var u=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),p=this._getAnchor();It(this._container,u.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,u=parseInt(Pt(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+u,w=this._containerWidth,P=new j(this._containerLeft,-p-this._containerBottom);P._add(ho(this._container));var N=o.layerPointToContainerPoint(P),I=q(this.options.autoPanPadding),K=q(this.options.autoPanPaddingTopLeft||I),J=q(this.options.autoPanPaddingBottomRight||I),ae=o.getSize(),ge=0,je=0;N.x+w+J.x>ae.x&&(ge=N.x+w-ae.x+J.x),N.x-ge-K.x<0&&(ge=N.x-K.x),N.y+p+J.y>ae.y&&(je=N.y+p-ae.y+J.y),N.y-je-K.y<0&&(je=N.y-K.y),(ge||je)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([ge,je]))}},_getAnchor:function(){return q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),IM=function(o,u){return new nd(o,u)};Qe.mergeOptions({closePopupOnClick:!0}),Qe.include({openPopup:function(o,u,p){return this._initOverlay(nd,o,u,p).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),Ir.include({bindPopup:function(o,u){return this._popup=this._initOverlay(nd,this._popup,o,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof Ms||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){po(o);var u=o.layer||o.target;if(this._popup._source===u&&!(u instanceof ai)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=u,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var rd=cs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){cs.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){cs.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=cs.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",u=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Le("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var u,p,w=this._map,P=this._container,N=w.latLngToContainerPoint(w.getCenter()),I=w.layerPointToContainerPoint(o),K=this.options.direction,J=P.offsetWidth,ae=P.offsetHeight,ge=q(this.options.offset),je=this._getAnchor();K==="top"?(u=J/2,p=ae):K==="bottom"?(u=J/2,p=0):K==="center"?(u=J/2,p=ae/2):K==="right"?(u=0,p=ae/2):K==="left"?(u=J,p=ae/2):I.x<N.x?(K="right",u=0,p=ae/2):(K="left",u=J+(ge.x+je.x)*2,p=ae/2),o=o.subtract(q(u,p,!0)).add(ge).add(je),ut(P,"leaflet-tooltip-right"),ut(P,"leaflet-tooltip-left"),ut(P,"leaflet-tooltip-top"),ut(P,"leaflet-tooltip-bottom"),Fe(P,"leaflet-tooltip-"+K),It(P,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&vr(this._container,o)},_animateZoom:function(o){var u=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(u)},_getAnchor:function(){return q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),AM=function(o,u){return new rd(o,u)};Qe.include({openTooltip:function(o,u,p){return this._initOverlay(rd,o,u,p).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),Ir.include({bindTooltip:function(o,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(rd,this._tooltip,o,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var u=o?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[u](p),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof Ms||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var u=typeof o.getElement=="function"&&o.getElement();u&&($e(u,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),$e(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var u=typeof o.getElement=="function"&&o.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var u=o.latlng,p,w;this._tooltip.options.sticky&&o.originalEvent&&(p=this._map.mouseEventToContainerPoint(o.originalEvent),w=this._map.containerPointToLayerPoint(p),u=this._map.layerPointToLatLng(w)),this._tooltip.setLatLng(u)}});var Yw=ca.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var u=o&&o.tagName==="DIV"?o:document.createElement("div"),p=this.options;if(p.html instanceof Element?(Yt(u),u.appendChild(p.html)):u.innerHTML=p.html!==!1?p.html:"",p.bgPos){var w=q(p.bgPos);u.style.backgroundPosition=-w.x+"px "+-w.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function LM(o){return new Yw(o)}ca.Default=ql;var Yl=Ir.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){x(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Ye(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(cn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ge(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof j?o:new j(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var u=this.getPane().children,p=-o(-1/0,1/0),w=0,P=u.length,N;w<P;w++)N=u[w].style.zIndex,u[w]!==this._container&&N&&(p=o(p,+N));isFinite(p)&&(this.options.zIndex=p+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Se.ielt9){vr(this._container,this.options.opacity);var o=+new Date,u=!1,p=!1;for(var w in this._tiles){var P=this._tiles[w];if(!(!P.current||!P.loaded)){var N=Math.min(1,(o-P.loaded)/200);vr(P.el,N),N<1?u=!0:(P.active?p=!0:this._onOpaqueTile(P),P.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),u&&(H(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=Le("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,u=this.options.maxZoom;if(o!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===o?(this._levels[p].el.style.zIndex=u-Math.abs(o-p),this._onUpdateLevel(p)):(Ye(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var w=this._levels[o],P=this._map;return w||(w=this._levels[o]={},w.el=Le("div","leaflet-tile-container leaflet-zoom-animated",this._container),w.el.style.zIndex=u,w.origin=P.project(P.unproject(P.getPixelOrigin()),o).round(),w.zoom=o,this._setZoomTransform(w,P.getCenter(),P.getZoom()),m(w.el.offsetWidth),this._onCreateLevel(w)),this._level=w,w}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var o,u,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)u=this._tiles[o],u.retain=u.current;for(o in this._tiles)if(u=this._tiles[o],u.current&&!u.active){var w=u.coords;this._retainParent(w.x,w.y,w.z,w.z-5)||this._retainChildren(w.x,w.y,w.z,w.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var u in this._tiles)this._tiles[u].coords.z===o&&this._removeTile(u)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Ye(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,u,p,w){var P=Math.floor(o/2),N=Math.floor(u/2),I=p-1,K=new j(+P,+N);K.z=+I;var J=this._tileCoordsToKey(K),ae=this._tiles[J];return ae&&ae.active?(ae.retain=!0,!0):(ae&&ae.loaded&&(ae.retain=!0),I>w?this._retainParent(P,N,I,w):!1)},_retainChildren:function(o,u,p,w){for(var P=2*o;P<2*o+2;P++)for(var N=2*u;N<2*u+2;N++){var I=new j(P,N);I.z=p+1;var K=this._tileCoordsToKey(I),J=this._tiles[K];if(J&&J.active){J.retain=!0;continue}else J&&J.loaded&&(J.retain=!0);p+1<w&&this._retainChildren(P,N,p+1,w)}},_resetView:function(o){var u=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var u=this.options;return u.minNativeZoom!==void 0&&o<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<o?u.maxNativeZoom:o},_setView:function(o,u,p,w){var P=Math.round(u);this.options.maxZoom!==void 0&&P>this.options.maxZoom||this.options.minZoom!==void 0&&P<this.options.minZoom?P=void 0:P=this._clampZoom(P);var N=this.options.updateWhenZooming&&P!==this._tileZoom;(!w||N)&&(this._tileZoom=P,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),P!==void 0&&this._update(o),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(o,u)},_setZoomTransforms:function(o,u){for(var p in this._levels)this._setZoomTransform(this._levels[p],o,u)},_setZoomTransform:function(o,u,p){var w=this._map.getZoomScale(p,o.zoom),P=o.origin.multiplyBy(w).subtract(this._map._getNewPixelOrigin(u,p)).round();Se.any3d?uo(o.el,P,w):It(o.el,P)},_resetGrid:function(){var o=this._map,u=o.options.crs,p=this._tileSize=this.getTileSize(),w=this._tileZoom,P=this._map.getPixelWorldBounds(this._tileZoom);P&&(this._globalTileRange=this._pxBoundsToTileRange(P)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,u.wrapLng[0]],w).x/p.x),Math.ceil(o.project([0,u.wrapLng[1]],w).x/p.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([u.wrapLat[0],0],w).y/p.x),Math.ceil(o.project([u.wrapLat[1],0],w).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var u=this._map,p=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),w=u.getZoomScale(p,this._tileZoom),P=u.project(o,this._tileZoom).floor(),N=u.getSize().divideBy(w*2);return new oe(P.subtract(N),P.add(N))},_update:function(o){var u=this._map;if(u){var p=this._clampZoom(u.getZoom());if(o===void 0&&(o=u.getCenter()),this._tileZoom!==void 0){var w=this._getTiledPixelBounds(o),P=this._pxBoundsToTileRange(w),N=P.getCenter(),I=[],K=this.options.keepBuffer,J=new oe(P.getBottomLeft().subtract([K,-K]),P.getTopRight().add([K,-K]));if(!(isFinite(P.min.x)&&isFinite(P.min.y)&&isFinite(P.max.x)&&isFinite(P.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ae in this._tiles){var ge=this._tiles[ae].coords;(ge.z!==this._tileZoom||!J.contains(new j(ge.x,ge.y)))&&(this._tiles[ae].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(o,p);return}for(var je=P.min.y;je<=P.max.y;je++)for(var He=P.min.x;He<=P.max.x;He++){var vn=new j(He,je);if(vn.z=this._tileZoom,!!this._isValidTile(vn)){var Zt=this._tiles[this._tileCoordsToKey(vn)];Zt?Zt.current=!0:I.push(vn)}}if(I.sort(function(Rn,fa){return Rn.distanceTo(N)-fa.distanceTo(N)}),I.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var wr=document.createDocumentFragment();for(He=0;He<I.length;He++)this._addTile(I[He],wr);this._level.el.appendChild(wr)}}}},_isValidTile:function(o){var u=this._map.options.crs;if(!u.infinite){var p=this._globalTileRange;if(!u.wrapLng&&(o.x<p.min.x||o.x>p.max.x)||!u.wrapLat&&(o.y<p.min.y||o.y>p.max.y))return!1}if(!this.options.bounds)return!0;var w=this._tileCoordsToBounds(o);return Q(this.options.bounds).overlaps(w)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var u=this._map,p=this.getTileSize(),w=o.scaleBy(p),P=w.add(p),N=u.unproject(w,o.z),I=u.unproject(P,o.z);return[N,I]},_tileCoordsToBounds:function(o){var u=this._tileCoordsToNwSe(o),p=new ce(u[0],u[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var u=o.split(":"),p=new j(+u[0],+u[1]);return p.z=+u[2],p},_removeTile:function(o){var u=this._tiles[o];u&&(Ye(u.el),delete this._tiles[o],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){Fe(o,"leaflet-tile");var u=this.getTileSize();o.style.width=u.x+"px",o.style.height=u.y+"px",o.onselectstart=m,o.onmousemove=m,Se.ielt9&&this.options.opacity<1&&vr(o,this.options.opacity)},_addTile:function(o,u){var p=this._getTilePos(o),w=this._tileCoordsToKey(o),P=this.createTile(this._wrapCoords(o),a(this._tileReady,this,o));this._initTile(P),this.createTile.length<2&&X(a(this._tileReady,this,o,null,P)),It(P,p),this._tiles[w]={el:P,coords:o,current:!0},u.appendChild(P),this.fire("tileloadstart",{tile:P,coords:o})},_tileReady:function(o,u,p){u&&this.fire("tileerror",{error:u,tile:p,coords:o});var w=this._tileCoordsToKey(o);p=this._tiles[w],p&&(p.loaded=+new Date,this._map._fadeAnimated?(vr(p.el,0),H(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),u||(Fe(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Se.ielt9||!this._map._fadeAnimated?X(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var u=new j(this._wrapX?f(o.x,this._wrapX):o.x,this._wrapY?f(o.y,this._wrapY):o.y);return u.z=o.z,u},_pxBoundsToTileRange:function(o){var u=this.getTileSize();return new oe(o.min.unscaleBy(u).floor(),o.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function DM(o){return new Yl(o)}var ha=Yl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,u){this._url=o,u=x(this,u),u.detectRetina&&Se.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,u){return this._url===o&&u===void 0&&(u=!0),this._url=o,u||this.redraw(),this},createTile:function(o,u){var p=document.createElement("img");return $e(p,"load",a(this._tileOnLoad,this,u,p)),$e(p,"error",a(this._tileOnError,this,u,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(o),p},getTileUrl:function(o){var u={r:Se.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-o.y;this.options.tms&&(u.y=p),u["-y"]=p}return _(this._url,s(u,this.options))},_tileOnLoad:function(o,u){Se.ielt9?setTimeout(a(o,this,null,u),0):o(null,u)},_tileOnError:function(o,u,p){var w=this.options.errorTileUrl;w&&u.getAttribute("src")!==w&&(u.src=w),o(p,u)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,u=this.options.maxZoom,p=this.options.zoomReverse,w=this.options.zoomOffset;return p&&(o=u-o),o+w},_getSubdomain:function(o){var u=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var o,u;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(u=this._tiles[o].el,u.onload=m,u.onerror=m,!u.complete)){u.src=T;var p=this._tiles[o].coords;Ye(u),delete this._tiles[o],this.fire("tileabort",{tile:u,coords:p})}},_removeTile:function(o){var u=this._tiles[o];if(u)return u.el.setAttribute("src",T),Yl.prototype._removeTile.call(this,o)},_tileReady:function(o,u,p){if(!(!this._map||p&&p.getAttribute("src")===T))return Yl.prototype._tileReady.call(this,o,u,p)}});function Zw(o,u){return new ha(o,u)}var Kw=ha.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,u){this._url=o;var p=s({},this.defaultWmsParams);for(var w in u)w in this.options||(p[w]=u[w]);u=x(this,u);var P=u.detectRetina&&Se.retina?2:1,N=this.getTileSize();p.width=N.x*P,p.height=N.y*P,this.wmsParams=p},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,ha.prototype.onAdd.call(this,o)},getTileUrl:function(o){var u=this._tileCoordsToNwSe(o),p=this._crs,w=B(p.project(u[0]),p.project(u[1])),P=w.min,N=w.max,I=(this._wmsVersion>=1.3&&this._crs===Bw?[P.y,P.x,N.y,N.x]:[P.x,P.y,N.x,N.y]).join(","),K=ha.prototype.getTileUrl.call(this,o);return K+b(this.wmsParams,K,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+I},setParams:function(o,u){return s(this.wmsParams,o),u||this.redraw(),this}});function FM(o,u){return new Kw(o,u)}ha.WMS=Kw,Zw.wms=FM;var As=Ir.extend({options:{padding:.1},initialize:function(o){x(this,o),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Fe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,u){var p=this._map.getZoomScale(u,this._zoom),w=this._map.getSize().multiplyBy(.5+this.options.padding),P=this._map.project(this._center,u),N=w.multiplyBy(-p).add(P).subtract(this._map._getNewPixelOrigin(o,u));Se.any3d?uo(this._container,N,p):It(this._container,N)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,u=this._map.getSize(),p=this._map.containerPointToLayerPoint(u.multiplyBy(-o)).round();this._bounds=new oe(p,p.add(u.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Qw=As.extend({options:{tolerance:0},getEvents:function(){var o=As.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){As.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");$e(o,"mousemove",this._onMouseMove,this),$e(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),$e(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){H(this._redrawRequest),delete this._ctx,Ye(this._container),dt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var u in this._layers)o=this._layers[u],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){As.prototype._update.call(this);var o=this._bounds,u=this._container,p=o.getSize(),w=Se.retina?2:1;It(u,o.min),u.width=w*p.x,u.height=w*p.y,u.style.width=p.x+"px",u.style.height=p.y+"px",Se.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){As.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[c(o)]=o;var u=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var u=o._order,p=u.next,w=u.prev;p?p.prev=w:this._drawLast=w,w?w.next=p:this._drawFirst=p,delete o._order,delete this._layers[c(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var u=o.options.dashArray.split(/[, ]+/),p=[],w,P;for(P=0;P<u.length;P++){if(w=Number(u[P]),isNaN(w))return;p.push(w)}o.options._dashArray=p}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||X(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var u=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new oe,this._redrawBounds.extend(o._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(o._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var u=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,u=this._redrawBounds;if(this._ctx.save(),u){var p=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var w=this._drawFirst;w;w=w.next)o=w.layer,(!u||o._pxBounds&&o._pxBounds.intersects(u))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,u){if(this._drawing){var p,w,P,N,I=o._parts,K=I.length,J=this._ctx;if(K){for(J.beginPath(),p=0;p<K;p++){for(w=0,P=I[p].length;w<P;w++)N=I[p][w],J[w?"lineTo":"moveTo"](N.x,N.y);u&&J.closePath()}this._fillStroke(J,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var u=o._point,p=this._ctx,w=Math.max(Math.round(o._radius),1),P=(Math.max(Math.round(o._radiusY),1)||w)/w;P!==1&&(p.save(),p.scale(1,P)),p.beginPath(),p.arc(u.x,u.y/P,w,0,Math.PI*2,!1),P!==1&&p.restore(),this._fillStroke(p,o)}},_fillStroke:function(o,u){var p=u.options;p.fill&&(o.globalAlpha=p.fillOpacity,o.fillStyle=p.fillColor||p.color,o.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(o.setLineDash&&o.setLineDash(u.options&&u.options._dashArray||[]),o.globalAlpha=p.opacity,o.lineWidth=p.weight,o.strokeStyle=p.color,o.lineCap=p.lineCap,o.lineJoin=p.lineJoin,o.stroke())},_onClick:function(o){for(var u=this._map.mouseEventToLayerPoint(o),p,w,P=this._drawFirst;P;P=P.next)p=P.layer,p.options.interactive&&p._containsPoint(u)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(p))&&(w=p);this._fireEvent(w?[w]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,u)}},_handleMouseOut:function(o){var u=this._hoveredLayer;u&&(ut(this._container,"leaflet-interactive"),this._fireEvent([u],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,u){if(!this._mouseHoverThrottled){for(var p,w,P=this._drawFirst;P;P=P.next)p=P.layer,p.options.interactive&&p._containsPoint(u)&&(w=p);w!==this._hoveredLayer&&(this._handleMouseOut(o),w&&(Fe(this._container,"leaflet-interactive"),this._fireEvent([w],o,"mouseover"),this._hoveredLayer=w)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,u,p){this._map._fireDOMEvent(u,p||u.type,o)},_bringToFront:function(o){var u=o._order;if(u){var p=u.next,w=u.prev;if(p)p.prev=w;else return;w?w.next=p:p&&(this._drawFirst=p),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(o)}},_bringToBack:function(o){var u=o._order;if(u){var p=u.next,w=u.prev;if(w)w.next=p;else return;p?p.prev=w:w&&(this._drawLast=w),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(o)}}});function Xw(o){return Se.canvas?new Qw(o):null}var Zl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),$M={_initContainer:function(){this._container=Le("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(As.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var u=o._container=Zl("shape");Fe(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",o._path=Zl("path"),u.appendChild(o._path),this._updateStyle(o),this._layers[c(o)]=o},_addPath:function(o){var u=o._container;this._container.appendChild(u),o.options.interactive&&o.addInteractiveTarget(u)},_removePath:function(o){var u=o._container;Ye(u),o.removeInteractiveTarget(u),delete this._layers[c(o)]},_updateStyle:function(o){var u=o._stroke,p=o._fill,w=o.options,P=o._container;P.stroked=!!w.stroke,P.filled=!!w.fill,w.stroke?(u||(u=o._stroke=Zl("stroke")),P.appendChild(u),u.weight=w.weight+"px",u.color=w.color,u.opacity=w.opacity,w.dashArray?u.dashStyle=C(w.dashArray)?w.dashArray.join(" "):w.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=w.lineCap.replace("butt","flat"),u.joinstyle=w.lineJoin):u&&(P.removeChild(u),o._stroke=null),w.fill?(p||(p=o._fill=Zl("fill")),P.appendChild(p),p.color=w.fillColor||w.color,p.opacity=w.fillOpacity):p&&(P.removeChild(p),o._fill=null)},_updateCircle:function(o){var u=o._point.round(),p=Math.round(o._radius),w=Math.round(o._radiusY||p);this._setPath(o,o._empty()?"M0 0":"AL "+u.x+","+u.y+" "+p+","+w+" 0,"+65535*360)},_setPath:function(o,u){o._path.v=u},_bringToFront:function(o){cn(o._container)},_bringToBack:function(o){Ge(o._container)}},sd=Se.vml?Zl:jt,Kl=As.extend({_initContainer:function(){this._container=sd("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=sd("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ye(this._container),dt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){As.prototype._update.call(this);var o=this._bounds,u=o.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,p.setAttribute("width",u.x),p.setAttribute("height",u.y)),It(p,o.min),p.setAttribute("viewBox",[o.min.x,o.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(o){var u=o._path=sd("path");o.options.className&&Fe(u,o.options.className),o.options.interactive&&Fe(u,"leaflet-interactive"),this._updateStyle(o),this._layers[c(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Ye(o._path),o.removeInteractiveTarget(o._path),delete this._layers[c(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var u=o._path,p=o.options;u&&(p.stroke?(u.setAttribute("stroke",p.color),u.setAttribute("stroke-opacity",p.opacity),u.setAttribute("stroke-width",p.weight),u.setAttribute("stroke-linecap",p.lineCap),u.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?u.setAttribute("stroke-dasharray",p.dashArray):u.removeAttribute("stroke-dasharray"),p.dashOffset?u.setAttribute("stroke-dashoffset",p.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),p.fill?(u.setAttribute("fill",p.fillColor||p.color),u.setAttribute("fill-opacity",p.fillOpacity),u.setAttribute("fill-rule",p.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(o,u){this._setPath(o,Vt(o._parts,u))},_updateCircle:function(o){var u=o._point,p=Math.max(Math.round(o._radius),1),w=Math.max(Math.round(o._radiusY),1)||p,P="a"+p+","+w+" 0 1,0 ",N=o._empty()?"M0 0":"M"+(u.x-p)+","+u.y+P+p*2+",0 "+P+-p*2+",0 ";this._setPath(o,N)},_setPath:function(o,u){o._path.setAttribute("d",u)},_bringToFront:function(o){cn(o._path)},_bringToBack:function(o){Ge(o._path)}});Se.vml&&Kl.include($M);function Jw(o){return Se.svg||Se.vml?new Kl(o):null}Qe.include({getRenderer:function(o){var u=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var u=this._paneRenderers[o];return u===void 0&&(u=this._createRenderer({pane:o}),this._paneRenderers[o]=u),u},_createRenderer:function(o){return this.options.preferCanvas&&Xw(o)||Jw(o)}});var ex=ua.extend({initialize:function(o,u){ua.prototype.initialize.call(this,this._boundsToLatLngs(o),u)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=Q(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function UM(o,u){return new ex(o,u)}Kl.create=sd,Kl.pointsToPath=Vt,Is.geometryToLayer=Qu,Is.coordsToLatLng=zp,Is.coordsToLatLngs=Xu,Is.latLngToCoords=Bp,Is.latLngsToCoords=Ju,Is.getFeature=da,Is.asFeature=ed,Qe.mergeOptions({boxZoom:!0});var tx=ls.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){$e(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){dt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ye(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),zl(),Ep(),this._startPoint=this._map.mouseEventToContainerPoint(o),$e(document,{contextmenu:po,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Le("div","leaflet-zoom-box",this._container),Fe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var u=new oe(this._point,this._startPoint),p=u.getSize();It(this._box,u.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(Ye(this._box),ut(this._container,"leaflet-crosshair")),Bl(),Cp(),dt(document,{contextmenu:po,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var u=new ce(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Qe.addInitHook("addHandler","boxZoom",tx),Qe.mergeOptions({doubleClickZoom:!0});var nx=ls.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var u=this._map,p=u.getZoom(),w=u.options.zoomDelta,P=o.originalEvent.shiftKey?p-w:p+w;u.options.doubleClickZoom==="center"?u.setZoom(P):u.setZoomAround(o.containerPoint,P)}});Qe.addInitHook("addHandler","doubleClickZoom",nx),Qe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var rx=ls.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new oi(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}Fe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ut(this._map._container,"leaflet-grab"),ut(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=Q(this._map.options.maxBounds);this._offsetLimit=B(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var u=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(u),this._prunePositions(u)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,u){return o-(o-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;o.x<u.min.x&&(o.x=this._viscousLimit(o.x,u.min.x)),o.y<u.min.y&&(o.y=this._viscousLimit(o.y,u.min.y)),o.x>u.max.x&&(o.x=this._viscousLimit(o.x,u.max.x)),o.y>u.max.y&&(o.y=this._viscousLimit(o.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,u=Math.round(o/2),p=this._initialWorldOffset,w=this._draggable._newPos.x,P=(w-u+p)%o+u-p,N=(w+u+p)%o-u-p,I=Math.abs(P+p)<Math.abs(N+p)?P:N;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=I},_onDragEnd:function(o){var u=this._map,p=u.options,w=!p.inertia||o.noInertia||this._times.length<2;if(u.fire("dragend",o),w)u.fire("moveend");else{this._prunePositions(+new Date);var P=this._lastPos.subtract(this._positions[0]),N=(this._lastTime-this._times[0])/1e3,I=p.easeLinearity,K=P.multiplyBy(I/N),J=K.distanceTo([0,0]),ae=Math.min(p.inertiaMaxSpeed,J),ge=K.multiplyBy(ae/J),je=ae/(p.inertiaDeceleration*I),He=ge.multiplyBy(-je/2).round();!He.x&&!He.y?u.fire("moveend"):(He=u._limitOffset(He,u.options.maxBounds),X(function(){u.panBy(He,{duration:je,easeLinearity:I,noMoveStart:!0,animate:!0})}))}}});Qe.addInitHook("addHandler","dragging",rx),Qe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var sx=ls.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),$e(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),dt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,u=document.documentElement,p=o.scrollTop||u.scrollTop,w=o.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(w,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var u=this._panKeys={},p=this.keyCodes,w,P;for(w=0,P=p.left.length;w<P;w++)u[p.left[w]]=[-1*o,0];for(w=0,P=p.right.length;w<P;w++)u[p.right[w]]=[o,0];for(w=0,P=p.down.length;w<P;w++)u[p.down[w]]=[0,o];for(w=0,P=p.up.length;w<P;w++)u[p.up[w]]=[0,-1*o]},_setZoomDelta:function(o){var u=this._zoomKeys={},p=this.keyCodes,w,P;for(w=0,P=p.zoomIn.length;w<P;w++)u[p.zoomIn[w]]=o;for(w=0,P=p.zoomOut.length;w<P;w++)u[p.zoomOut[w]]=-o},_addHooks:function(){$e(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){dt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var u=o.keyCode,p=this._map,w;if(u in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(w=this._panKeys[u],o.shiftKey&&(w=q(w).multiplyBy(3)),p.options.maxBounds&&(w=p._limitOffset(q(w),p.options.maxBounds)),p.options.worldCopyJump){var P=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(w)));p.panTo(P)}else p.panBy(w)}else if(u in this._zoomKeys)p.setZoom(p.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;po(o)}}});Qe.addInitHook("addHandler","keyboard",sx),Qe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ix=ls.extend({addHooks:function(){$e(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){dt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var u=Tw(o),p=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var w=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),w),po(o)},_performZoom:function(){var o=this._map,u=o.getZoom(),p=this._map.options.zoomSnap||0;o._stop();var w=this._delta/(this._map.options.wheelPxPerZoomLevel*4),P=4*Math.log(2/(1+Math.exp(-Math.abs(w))))/Math.LN2,N=p?Math.ceil(P/p)*p:P,I=o._limitZoom(u+(this._delta>0?N:-N))-u;this._delta=0,this._startTime=null,I&&(o.options.scrollWheelZoom==="center"?o.setZoom(u+I):o.setZoomAround(this._lastMousePos,u+I))}});Qe.addInitHook("addHandler","scrollWheelZoom",ix);var zM=600;Qe.mergeOptions({tapHold:Se.touchNative&&Se.safari&&Se.mobile,tapTolerance:15});var ox=ls.extend({addHooks:function(){$e(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){dt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var u=o.touches[0];this._startPos=this._newPos=new j(u.clientX,u.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&($e(document,"touchend",tn),$e(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),zM),$e(document,"touchend touchcancel contextmenu",this._cancel,this),$e(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){dt(document,"touchend",tn),dt(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),dt(document,"touchend touchcancel contextmenu",this._cancel,this),dt(document,"touchmove",this._onMove,this)},_onMove:function(o){var u=o.touches[0];this._newPos=new j(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,u){var p=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});p._simulated=!0,u.target.dispatchEvent(p)}});Qe.addInitHook("addHandler","tapHold",ox),Qe.mergeOptions({touchZoom:Se.touch,bounceAtZoomLimits:!0});var ax=ls.extend({addHooks:function(){Fe(this._map._container,"leaflet-touch-zoom"),$e(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ut(this._map._container,"leaflet-touch-zoom"),dt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var u=this._map;if(!(!o.touches||o.touches.length!==2||u._animatingZoom||this._zooming)){var p=u.mouseEventToContainerPoint(o.touches[0]),w=u.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(p.add(w)._divideBy(2))),this._startDist=p.distanceTo(w),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),$e(document,"touchmove",this._onTouchMove,this),$e(document,"touchend touchcancel",this._onTouchEnd,this),tn(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var u=this._map,p=u.mouseEventToContainerPoint(o.touches[0]),w=u.mouseEventToContainerPoint(o.touches[1]),P=p.distanceTo(w)/this._startDist;if(this._zoom=u.getScaleZoom(P,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&P<1||this._zoom>u.getMaxZoom()&&P>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,P===1)return}else{var N=p._add(w)._divideBy(2)._subtract(this._centerPoint);if(P===1&&N.x===0&&N.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(N),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),H(this._animRequest);var I=a(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=X(I,this,!0),tn(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,H(this._animRequest),dt(document,"touchmove",this._onTouchMove,this),dt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Qe.addInitHook("addHandler","touchZoom",ax),Qe.BoxZoom=tx,Qe.DoubleClickZoom=nx,Qe.Drag=rx,Qe.Keyboard=sx,Qe.ScrollWheelZoom=ix,Qe.TapHold=ox,Qe.TouchZoom=ax,n.Bounds=oe,n.Browser=Se,n.CRS=re,n.Canvas=Qw,n.Circle=Up,n.CircleMarker=Ku,n.Class=M,n.Control=Or,n.DivIcon=Yw,n.DivOverlay=cs,n.DomEvent=iM,n.DomUtil=rM,n.Draggable=oi,n.Evented=Y,n.FeatureGroup=Ms,n.GeoJSON=Is,n.GridLayer=Yl,n.Handler=ls,n.Icon=ca,n.ImageOverlay=td,n.LatLng=te,n.LatLngBounds=ce,n.Layer=Ir,n.LayerGroup=la,n.LineUtil=yM,n.Map=Qe,n.Marker=Zu,n.Mixin=hM,n.Path=ai,n.Point=j,n.PolyUtil=fM,n.Polygon=ua,n.Polyline=Os,n.Popup=nd,n.PosAnimation=jw,n.Projection=wM,n.Rectangle=ex,n.Renderer=As,n.SVG=Kl,n.SVGOverlay=qw,n.TileLayer=ha,n.Tooltip=rd,n.Transformation=ne,n.Util=U,n.VideoOverlay=Gw,n.bind=a,n.bounds=B,n.canvas=Xw,n.circle=kM,n.circleMarker=PM,n.control=Vl,n.divIcon=LM,n.extend=s,n.featureGroup=SM,n.geoJSON=Vw,n.geoJson=jM,n.gridLayer=DM,n.icon=EM,n.imageOverlay=RM,n.latLng=Z,n.latLngBounds=Q,n.layerGroup=bM,n.map=oM,n.marker=CM,n.point=q,n.polygon=TM,n.polyline=NM,n.popup=IM,n.rectangle=UM,n.setOptions=x,n.stamp=c,n.svg=Jw,n.svgOverlay=OM,n.tileLayer=Zw,n.tooltip=AM,n.transformation=se,n.version=r,n.videoOverlay=MM;var BM=window.L;n.noConflict=function(){return window.L=BM,this},window.L=n})})(Kv,Kv.exports);var Al=Kv.exports;const CW=mf(Al);function op(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function ap(e,t){return t==null?function(r,s){const i=g.useRef();return i.current||(i.current=e(r,s)),i}:function(r,s){const i=g.useRef();i.current||(i.current=e(r,s));const a=g.useRef(r),{instance:l}=i.current;return g.useEffect(function(){a.current!==r&&(t(l,r,a.current),a.current=r)},[l,r,s]),i}}function tT(e,t){g.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var i;(i=t.layerContainer)==null||i.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function nT(e){return function(n){const r=Q0(),s=e(ip(n,r),r);return KN(r.map,n.attribution),X0(s.current,n.eventHandlers),tT(s.current,r),s}}function PW(e,t){const n=g.useRef();g.useEffect(function(){if(t.pathOptions!==n.current){const s=t.pathOptions??{};e.instance.setStyle(s),n.current=s}},[e,t])}function kW(e){return function(n){const r=Q0(),s=e(ip(n,r),r);return X0(s.current,n.eventHandlers),tT(s.current,r),PW(s.current,n),s}}function NW(e,t){const n=ap(e,t),r=nT(n);return eT(r)}function TW(e,t){const n=ap(e),r=EW(n,t);return bW(r)}function jW(e,t){const n=ap(e,t),r=kW(n);return eT(r)}function RW(e,t){const n=ap(e,t),r=nT(n);return SW(r)}function MW(e,t,n){const{opacity:r,zIndex:s}=t;r!=null&&r!==n.opacity&&e.setOpacity(r),s!=null&&s!==n.zIndex&&e.setZIndex(s)}const OW=jW(function({center:t,children:n,...r},s){const i=new Al.Circle(t,r);return op(i,QN(s,{overlayContainer:i}))},wW);function Qv(){return Qv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qv.apply(this,arguments)}function IW({bounds:e,boundsOptions:t,center:n,children:r,className:s,id:i,placeholder:a,style:l,whenReady:c,zoom:h,...f},m){const[v]=g.useState({className:s,id:i,style:l}),[y,S]=g.useState(null);g.useImperativeHandle(m,()=>(y==null?void 0:y.map)??null,[y]);const x=g.useCallback(E=>{if(E!==null&&y===null){const _=new Al.Map(E,f);n!=null&&h!=null?_.setView(n,h):e!=null&&_.fitBounds(e,t),c!=null&&_.whenReady(c),S(_W(_))}},[]);g.useEffect(()=>()=>{y==null||y.map.remove()},[y]);const b=y?ie.createElement(JN,{value:y},r):a??null;return ie.createElement("div",Qv({},v,{ref:x}),b)}const AW=g.forwardRef(IW),LW=NW(function({position:t,...n},r){const s=new Al.Marker(t,n);return op(s,QN(r,{overlayContainer:s}))},function(t,n,r){n.position!==r.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),DW=TW(function(t,n){const r=new Al.Popup(t,n.overlayContainer);return op(r,n)},function(t,n,{position:r},s){g.useEffect(function(){const{instance:a}=t;function l(h){h.popup===a&&(a.update(),s(!0))}function c(h){h.popup===a&&s(!1)}return n.map.on({popupopen:l,popupclose:c}),n.overlayContainer==null?(r!=null&&a.setLatLng(r),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var f;n.map.off({popupopen:l,popupclose:c}),(f=n.overlayContainer)==null||f.unbindPopup(),n.map.removeLayer(a)}},[t,n,s,r])}),FW=RW(function({url:t,...n},r){const s=new Al.TileLayer(t,ip(n,r));return op(s,r)},function(t,n,r){MW(t,n,r);const{url:s}=n;s!=null&&s!==r.url&&t.setUrl(s)}),$W=[46.5197,6.6323],UW=13,zW=Qi,BW=({listings:e,userLocation:t,isLoading:n=!1,onSelect:r})=>{const s=typeof window<"u",i=c=>CW.divIcon({className:"listing-marker",html:`
        <div style="width:72px;height:72px;border-radius:16px;overflow:hidden;box-shadow:0 8px 16px rgba(15,23,42,0.25);position:relative;background:#fff;">
          <img src="${(c.image??zW).replace(/"/g,"&quot;")}" alt="${c.title.replace(/"/g,"&quot;")}" style="width:100%;height:100%;object-fit:cover;" />
          <div style="position:absolute;bottom:6px;left:6px;padding:2px 8px;border-radius:9999px;background:rgba(15,23,42,0.85);color:#fff;font-size:12px;font-weight:600;line-height:1;">
            ${c.price}
          </div>
        </div>
      `,iconAnchor:[36,72],popupAnchor:[0,-72]}),a=g.useMemo(()=>{const c=e.find(h=>{const{lat:f,lng:m}=h.coordinates;return Number.isFinite(f)&&Number.isFinite(m)&&f!==0&&m!==0});return c?[c.coordinates.lat,c.coordinates.lng]:t?[t.lat,t.lng]:$W},[e,t]),l=t?13:e.length>1?12:UW;return s?d.jsxs("div",{className:"relative mx-auto h-[70vh] w-full max-w-5xl",children:[d.jsxs(AW,{center:a,zoom:l,scrollWheelZoom:!0,className:"h-full w-full overflow-hidden rounded-lg shadow-sm",children:[d.jsx(FW,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t&&d.jsx(OW,{center:[t.lat,t.lng],radius:300,pathOptions:{color:"#2563eb",fillColor:"#60a5fa",fillOpacity:.25}}),e.map(c=>d.jsx(LW,{position:[c.coordinates.lat,c.coordinates.lng],icon:i(c),eventHandlers:{click:()=>{r==null||r(c.id)}},children:d.jsx(DW,{children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold",children:c.title}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.price,"  ",c.location]}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Host: ",c.host]})]}),d.jsx(Me,{size:"sm",className:"w-full",onClick:()=>r==null?void 0:r(c.id),children:"View details"})]})})},c.id))]},`${a.toString()}-${l}`),n&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/70 text-sm text-muted-foreground",children:"Updating map"})]}):null},rT=e=>({id:e.id,image:e.image,price:e.price,title:e.title,host:e.host,hostEmail:e.hostEmail??null,location:e.location,availableDates:e.availableDates,description:e.description,hostId:e.hostId??null,availability:e.availability??null,coordinates:e.coordinates??null});var lp="Dialog",[sT,bq]=Vn(lp),[WW,ts]=sT(lp),iT=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=e,l=g.useRef(null),c=g.useRef(null),[h,f]=Yi({prop:r,defaultProp:s??!1,onChange:i,caller:lp});return d.jsx(WW,{scope:t,triggerRef:l,contentRef:c,contentId:bs(),titleId:bs(),descriptionId:bs(),open:h,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(m=>!m),[f]),modal:a,children:n})};iT.displayName=lp;var oT="DialogTrigger",HW=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ts(oT,n),i=Ue(t,s.triggerRef);return d.jsx(Ce.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":tw(s.open),...r,ref:i,onClick:ue(e.onClick,s.onOpenToggle)})});HW.displayName=oT;var J0="DialogPortal",[VW,aT]=sT(J0,{forceMount:void 0}),lT=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,i=ts(J0,t);return d.jsx(VW,{scope:t,forceMount:n,children:g.Children.map(r,a=>d.jsx(on,{present:n||i.open,children:d.jsx(El,{asChild:!0,container:s,children:a})}))})};lT.displayName=J0;var nf="DialogOverlay",cT=g.forwardRef((e,t)=>{const n=aT(nf,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=ts(nf,e.__scopeDialog);return i.modal?d.jsx(on,{present:r||i.open,children:d.jsx(qW,{...s,ref:t})}):null});cT.displayName=nf;var GW=qi("DialogOverlay.RemoveScroll"),qW=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ts(nf,n);return d.jsx(Au,{as:GW,allowPinchZoom:!0,shards:[s.contentRef],children:d.jsx(Ce.div,{"data-state":tw(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Jo="DialogContent",uT=g.forwardRef((e,t)=>{const n=aT(Jo,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=ts(Jo,e.__scopeDialog);return d.jsx(on,{present:r||i.open,children:i.modal?d.jsx(YW,{...s,ref:t}):d.jsx(ZW,{...s,ref:t})})});uT.displayName=Jo;var YW=g.forwardRef((e,t)=>{const n=ts(Jo,e.__scopeDialog),r=g.useRef(null),s=Ue(t,n.contentRef,r);return g.useEffect(()=>{const i=r.current;if(i)return Yf(i)},[]),d.jsx(dT,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ue(e.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ue(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:ue(e.onFocusOutside,i=>i.preventDefault())})}),ZW=g.forwardRef((e,t)=>{const n=ts(Jo,e.__scopeDialog),r=g.useRef(!1),s=g.useRef(!1);return d.jsx(dT,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,h;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((h=n.triggerRef.current)==null?void 0:h.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),dT=g.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=e,l=ts(Jo,n),c=g.useRef(null),h=Ue(t,c);return qf(),d.jsxs(d.Fragment,{children:[d.jsx(Iu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:d.jsx(na,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":tw(l.open),...a,ref:h,onDismiss:()=>l.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(KW,{titleId:l.titleId}),d.jsx(XW,{contentRef:c,descriptionId:l.descriptionId})]})]})}),ew="DialogTitle",hT=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ts(ew,n);return d.jsx(Ce.h2,{id:s.titleId,...r,ref:t})});hT.displayName=ew;var fT="DialogDescription",pT=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ts(fT,n);return d.jsx(Ce.p,{id:s.descriptionId,...r,ref:t})});pT.displayName=fT;var mT="DialogClose",gT=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ts(mT,n);return d.jsx(Ce.button,{type:"button",...r,ref:t,onClick:ue(e.onClick,()=>s.onOpenChange(!1))})});gT.displayName=mT;function tw(e){return e?"open":"closed"}var vT="DialogTitleWarning",[Sq,yT]=TI(vT,{contentName:Jo,titleName:ew,docsSlug:"dialog"}),KW=({titleId:e})=>{const t=yT(vT),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},QW="DialogDescriptionWarning",XW=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${yT(QW).contentName}}.`;return g.useEffect(()=>{var i;const s=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},JW=iT,e8=lT,wT=cT,xT=uT,_T=hT,bT=pT,t8=gT;const nw=JW,n8=e8,ST=g.forwardRef(({className:e,...t},n)=>d.jsx(wT,{ref:n,className:Te("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));ST.displayName=wT.displayName;const cp=g.forwardRef(({className:e,children:t,...n},r)=>d.jsxs(n8,{children:[d.jsx(ST,{}),d.jsxs(xT,{ref:r,className:Te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,d.jsxs(t8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[d.jsx(OC,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));cp.displayName=xT.displayName;const up=({className:e,...t})=>d.jsx("div",{className:Te("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});up.displayName="DialogHeader";const rw=({className:e,...t})=>d.jsx("div",{className:Te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});rw.displayName="DialogFooter";const dp=g.forwardRef(({className:e,...t},n)=>d.jsx(_T,{ref:n,className:Te("text-lg font-semibold leading-none tracking-tight",e),...t}));dp.displayName=_T.displayName;const hp=g.forwardRef(({className:e,...t},n)=>d.jsx(bT,{ref:n,className:Te("text-sm text-muted-foreground",e),...t}));hp.displayName=bT.displayName;const r8=async e=>{const{data:t,error:n}=await be.from("user_profiles").select("id, email, avatar_url, full_name, user_role, bio, university, program_name, program_year, program_type").eq("id",e).maybeSingle();if(n)throw n;return t??null},ET=async e=>{if(!e.length)return[];const{data:t,error:n}=await be.from("user_profiles").select("id, email, avatar_url, full_name, user_role, bio, university, program_name, program_year, program_type").in("id",e);if(n)throw n;return t??[]},qb=e=>{var r,s;const t=(r=e.city)==null?void 0:r.trim(),n=(s=e.country)==null?void 0:s.trim();return t&&n?`${t}, ${n}`:t||n||e.location},bo=e=>{if(!(e!=null&&e.start)||!(e!=null&&e.end))return"Flexible availability";const t=new Date(e.start),n=new Date(e.end);if(Number.isNaN(t.getTime())||Number.isNaN(n.getTime()))return"Flexible availability";const r=t.getMonth()===n.getMonth(),s=Je(t,"MMM d"),i=r?Je(n,"d"):Je(n,"MMM d");return`${s}-${i}`},CT=70,s8=(e,t=CT)=>{if(!e)return"";const n=e.trim();return n.length<=t?n:`${n.slice(0,t).trimEnd()}`},Fc="e.g. Left street 15",rf="Calm neighborhood",sf="Cozy couch and a kitchen to share",hu="30",Yb=e=>{var n,r;if((n=e.gallery)!=null&&n.length)return e.gallery;const t=(r=e.availability)==null?void 0:r.photos;return Array.isArray(t)&&t.length?t:e.image?[e.image]:[]},i8={bsc:"Bachelor (BSc)",msc:"Master (MSc)",phd:"Doctorate (PhD)",other:"Other program"},o8=[{id:"static-1",image:Qi,gallery:[Qi],price:"$25",title:"Leather Corner Couch",host:"Sarah M.",hostEmail:null,location:"Downtown Campus",country:"Latvia",city:"Riga",addressLine:"Downtown Campus",coordinates:{lat:56.9496,lng:24.1052},availability:{start:"2024-10-15T00:00:00.000Z",end:"2024-10-25T23:59:59.000Z"},availableDates:bo({start:"2024-10-15T00:00:00.000Z",end:"2024-10-25T23:59:59.000Z"}),description:"Comfortable leather couch with plants and natural lighting. Perfect for studying or relaxing near campus.",hostId:null},{id:"static-2",image:zh,gallery:[zh],price:"$18",title:"Cozy Beige Sectional",host:"Mike T.",hostEmail:null,location:"North Dorms",country:"Latvia",city:"Riga",addressLine:"North Dorms",coordinates:{lat:56.9578,lng:24.1173},availability:{start:"2024-10-20T00:00:00.000Z",end:"2024-10-30T23:59:59.000Z"},availableDates:bo({start:"2024-10-20T00:00:00.000Z",end:"2024-10-30T23:59:59.000Z"}),description:"Spacious sectional with great natural light. Great for overnight stays during exam week.",hostId:null},{id:"static-3",image:Bh,gallery:[Bh],price:"$22",title:"Modern Grey Sectional",host:"Emma K.",hostEmail:null,location:"Library District",country:"Latvia",city:"Riga",addressLine:"Library District",coordinates:{lat:56.9461,lng:24.1177},availability:{start:"2024-10-18T00:00:00.000Z",end:"2024-10-28T23:59:59.000Z"},availableDates:bo({start:"2024-10-18T00:00:00.000Z",end:"2024-10-28T23:59:59.000Z"}),description:"Perfect spot for late night study sessions. Close to the library and quiet.",hostId:null},{id:"static-4",image:Wh,gallery:[Wh],price:"$28",title:"Green Corduroy Sectional",host:"Alex R.",hostEmail:null,location:"Student Village",country:"Latvia",city:"Riga",addressLine:"Student Village",coordinates:{lat:56.9423,lng:24.0998},availability:{start:"2024-10-16T00:00:00.000Z",end:"2024-10-26T23:59:59.000Z"},availableDates:bo({start:"2024-10-16T00:00:00.000Z",end:"2024-10-26T23:59:59.000Z"}),description:"Unique green sectional with plants and cozy vibes. Great for extended stays.",hostId:null},{id:"static-5",image:Hh,gallery:[Hh],price:"$32",title:"Modular Beige Sofa",host:"Jamie L.",hostEmail:null,location:"Arts Quarter",country:"Latvia",city:"Riga",addressLine:"Arts Quarter",coordinates:{lat:56.9521,lng:24.108},availability:{start:"2024-10-22T00:00:00.000Z",end:"2024-11-01T23:59:59.000Z"},availableDates:bo({start:"2024-10-22T00:00:00.000Z",end:"2024-11-01T23:59:59.000Z"}),description:"Spacious modular sofa in bright apartment. Perfect for creative students.",hostId:null},{id:"static-6",image:Vh,gallery:[Vh],price:"$35",title:"Designer Grey Sectional",host:"Taylor B.",hostEmail:null,location:"Campus Heights",country:"Latvia",city:"Riga",addressLine:"Campus Heights",coordinates:{lat:56.9448,lng:24.1312},availability:{start:"2024-10-19T00:00:00.000Z",end:"2024-10-29T23:59:59.000Z"},availableDates:bo({start:"2024-10-19T00:00:00.000Z",end:"2024-10-29T23:59:59.000Z"}),description:"Modern designer couch in beautiful apartment with exposed beams. Premium comfort.",hostId:null}],Zb="couch-photos",a8=e=>{const t=e.name.split(".").pop();return`${typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2)}`}${t?`.${t}`:""}`},l8=async(e,t)=>{const n=a8(e),r=`${t}/${n}`,{error:s}=await be.storage.from(Zb).upload(r,e,{cacheControl:"3600",upsert:!0});if(s)throw new Error(s.message??"Failed to upload listing photo.");const{data:i}=be.storage.from(Zb).getPublicUrl(r);if(!(i!=null&&i.publicUrl))throw new Error("Unable to fetch uploaded listing photo URL.");return i.publicUrl},Kb=()=>({title:"",price:hu,description:sf,location:rf,country:"Switzerland",city:"",addressLine:Fc,checkInTime:""}),c8=e=>{var t,n,r,s;return{title:e.title??"",price:(e.price??`$${hu}`).replace(/[^0-9.]/g,"")||hu,description:e.description??sf,location:e.location??rf,country:e.country??((t=e.availability)==null?void 0:t.country)??"Switzerland",city:e.city??((n=e.availability)==null?void 0:n.city)??"",addressLine:e.addressLine??((r=e.availability)==null?void 0:r.addressLine)??Fc,checkInTime:((s=e.availability)==null?void 0:s.checkInTime)??""}},Km=e=>{if(!e)return"$0";const t=e.trim();return t?t.startsWith("$")?t:`$${t}`:"$0"},u8=e=>{const t=Number(e.replace(/[^0-9.]/g,""));return Number.isFinite(t)?t:0},d8=e=>e.reduce((t,n)=>{t[n.couchId]=n,n.storageId&&(t[n.storageId]=n);const r=Jh(n.couchId);return t[r]=n,t},{}),h8=()=>{const e=es(),n=ra().state??null,{signOut:r,profile:s,session:i}=jr(),{toast:a}=Ps(),l=Y0(s,i),c=(s==null?void 0:s.user_role)==="host",[h,f]=g.useState({}),m=g.useMemo(()=>new Set(Object.keys(h)),[h]),[v,y]=g.useState([]),[S,x]=g.useState(!1),[b,E]=g.useState("list"),[_,C]=g.useState(null),[k,T]=g.useState(!1),[R,O]=g.useState(""),[A,W]=g.useState("all"),[G,X]=g.useState("all"),[H,U]=g.useState(""),[M,ee]=g.useState(""),[V,Y]=g.useState(),[j,$]=g.useState("all"),[q,oe]=g.useState(!1),[B,ce]=g.useState(null),[Q,te]=g.useState([]),[Z,re]=g.useState([]),[fe,Pe]=g.useState(!1),[z,ne]=g.useState(!1),[se,Oe]=g.useState(()=>Kb()),[rt,jt]=g.useState({}),[Vt,Gt]=g.useState({}),[Xt,cr]=g.useState({}),[ns,Nn]=g.useState({}),[Ut,Jt]=g.useState(""),[rs,ur]=g.useState([]),[st,en]=g.useState(null),[dr,Mr]=g.useState(!1),Rt=g.useMemo(()=>V!=null&&V.from&&(V!=null&&V.to)?`${Je(V.from,"MMM d")} - ${Je(V.to,"MMM d")}`:V!=null&&V.from?`Starting ${Je(V.from,"MMM d")}`:"Select date range",[V]),si=R.trim().length>0||A!=="all"||G!=="all"||H.trim().length>0||M.trim().length>0||!!(V!=null&&V.from||V!=null&&V.to);g.useEffect(()=>{n!=null&&n.listingScope&&j!==n.listingScope&&$(n.listingScope)},[j,n==null?void 0:n.listingScope]);const Yn=g.useCallback((F,he)=>{Oe(ye=>({...ye,[F]:he}))},[]),ss=g.useCallback(F=>{Oe(he=>({...he,country:F,city:he.city&&(uc.citiesByCountry[F]??[]).includes(he.city)?he.city:""}))},[]),Tn=g.useCallback(F=>{jt(he=>({...he,[F]:!he[F]}))},[]),Ts=g.useCallback((F,he)=>{Gt(ye=>({...ye,[F]:he}))},[]),an=g.useCallback(()=>{oe(!1),ce(null),te([]),re([]),Pe(!1),Oe(Kb()),Jt(""),en(null),ur([])},[]),Zn=g.useCallback(F=>{if(!F||F.length===0){re([]);return}const he=Math.max(0,7-Q.length);if(he<=0){a({title:"Gallery is full",description:"You can upload up to 7 photos.",variant:"destructive"});return}const ye=Array.from(F).slice(0,he);if(ye.length===0){a({title:"Too many photos",description:"You can only have up to 7 photos total.",variant:"destructive"});return}re(ye)},[Q.length,a]),lo=g.useCallback(F=>{te(he=>he.filter(ye=>ye!==F))},[]),js=g.useCallback(F=>{F.preventDefault(),Zn(F.dataTransfer.files)},[Zn]),is=g.useCallback(F=>{var he;if(!(s!=null&&s.id)){a({title:"Sign in to edit",description:"Hosts must be signed in to update a listing.",variant:"destructive"});return}if(F.hostId&&F.hostId!==s.id){a({title:"Can't edit this listing",description:"Switch to My listing to edit your space.",variant:"destructive"});return}ce(F),te(((he=F.gallery)==null?void 0:he.slice(0,3))??(F.image?[F.image]:[])),re([]),Oe(c8(F)),Jt(F.addressLine??F.location??Fc),en(null),ur([]),oe(!0)},[s==null?void 0:s.id,a]),Ee=g.useCallback(async F=>{var de,Ke,_e,Ae,nt,pr,mr,gr,ln;if(F.preventDefault(),!B)return;if(!(s!=null&&s.id)){a({title:"Sign in to edit",description:"Hosts must be signed in to update a listing.",variant:"destructive"});return}if(B.hostId&&B.hostId!==s.id){a({title:"Can't edit this listing",description:"Switch to My listing to edit your space.",variant:"destructive"});return}const he=se.title.trim();if(!he){a({title:"Add a title",description:"Give your listing a short name before saving.",variant:"destructive"});return}let ye=se.location.trim();if(ye||(ye=rf),!ye){a({title:"Add your location",description:"Let renters know where they'll be staying.",variant:"destructive"});return}if(!Q.length&&!Z.length){a({title:"Add a photo",description:"Upload at least one photo of your couch.",variant:"destructive"});return}Pe(!0);try{let mt=[...Q];if(Z.length){const Fe=Math.max(0,7-mt.length),ut=Z.slice(0,Fe);for(const ii of ut){const aa=await l8(ii,s.id);mt.push(aa)}}if(!mt.length)throw new Error("At least one photo is required.");mt=mt.slice(0,7);const Qn=mt[0]??B.image,Pt=Km(se.price.trim()||B.price||hu),Le=se.description.trim()||B.description||sf,Ye=se.city.trim(),Yt=(se.country.trim()||"Switzerland").trim(),cn=Ut.trim()||B.addressLine||((de=B.availability)==null?void 0:de.addressLine)||Fc,Ge=se.checkInTime.trim(),jn={start:((Ke=B.availability)==null?void 0:Ke.start)??null,end:((_e=B.availability)==null?void 0:_e.end)??null,checkInTime:(Ge||((Ae=B.availability)==null?void 0:Ae.checkInTime))??null,country:Yt||B.country||((nt=B.availability)==null?void 0:nt.country)||null,city:Ye||B.city||((pr=B.availability)==null?void 0:pr.city)||null,addressLine:cn||B.addressLine||((mr=B.availability)==null?void 0:mr.addressLine)||null,coordinates:st??((gr=B.availability)==null?void 0:gr.coordinates)??(B.coordinates?{lat:B.coordinates.lat,lng:B.coordinates.lng}:null),photos:mt,published:typeof((ln=B.availability)==null?void 0:ln.published)=="boolean"?B.availability.published:B.isPublished??!1};await Wv({id:B.id,hostId:s.id,hostName:s.full_name??s.email??B.host??"Host",hostEmail:s.email??(i==null?void 0:i.user.email)??B.hostEmail??null,title:he,imageUrl:Qn,pricePerNight:Pt,location:ye,description:Le,availability:jn}),a({title:"Listing updated",description:"Your couch details have been saved."}),window.dispatchEvent(new Event("listings-updated")),an()}catch(mt){console.error("Failed to update listing",mt),a({title:"Unable to update listing",description:mt instanceof Error?mt.message:"Please try again in a moment.",variant:"destructive"})}finally{Pe(!1)}},[an,se,Q,Z,B,s,i,a]),Ve=()=>{O(""),W("all"),X("all"),U(""),ee(""),Y(void 0)},We=g.useCallback(async()=>{if(!l){f({});return}try{const F=await ef(l);f(d8(F))}catch(F){console.warn("Failed to load wishlist",F)}},[l]);g.useEffect(()=>{We()},[We]),g.useEffect(()=>{if(typeof window>"u")return;const F=()=>We();return window.addEventListener("wishlist-updated",F),()=>window.removeEventListener("wishlist-updated",F)},[We]);const we=g.useCallback(F=>{W(F),F==="all"&&X("all")},[]),me=g.useCallback(F=>{X(F)},[]),pe=g.useCallback((F,he)=>{he!=null&&he.defaultPrevented||e(`/couch/${F.id}`,{state:{couch:F}})},[e]),Ie=g.useCallback(async(F,he)=>{if(F.stopPropagation(),F.preventDefault(),!l){a({title:"Sign in to save couches",description:"Create an account or sign in to build your wishlist.",variant:"destructive"});return}const ye=Jh(he.id),de=h[he.id]??h[ye];try{if(de){await Z0(l,he.id),f(Ae=>{const nt={...Ae};return delete nt[he.id],delete nt[ye],nt}),a({title:"Removed from wishlist",description:`${he.title} is no longer saved.`});return}const Ke=rT(he),_e=await lN(l,he.id,Ke);_e&&(f(Ae=>({...Ae,[_e.couchId]:_e,[_e.storageId]:_e,[Jh(_e.couchId)]:_e})),a({title:"Saved to wishlist",description:`${he.title} was added for later.`}))}catch(Ke){console.error("Wishlist toggle failed",Ke),a({title:"Unable to update wishlist",description:"Please try again in a moment.",variant:"destructive"})}},[a,l,h]),ct=g.useRef(new Set),_t=g.useRef(!1),qt=g.useRef(new Set),Kn=g.useRef({}),Ct=g.useCallback(async()=>{try{x(!0);const F=await D6(),he=[Qi,zh,Bh,Wh,Hh,Vh],ye=F.map((de,Ke)=>{var Le,Ye,Yt,cn;const _e=de.availability?{start:de.availability.start??null,end:de.availability.end??null,checkInTime:de.availability.checkInTime??null,published:typeof de.availability.published=="boolean"?de.availability.published:null,country:de.availability.country??null,city:de.availability.city??null,addressLine:de.availability.addressLine??null,photos:Array.isArray(de.availability.photos)?de.availability.photos.filter(Ge=>typeof Ge=="string"&&Ge.trim().length>0):null,coordinates:de.availability.coordinates&&typeof de.availability.coordinates.lat=="number"&&typeof de.availability.coordinates.lng=="number"?{lat:de.availability.coordinates.lat,lng:de.availability.coordinates.lng,displayName:de.availability.coordinates.displayName??null}:null}:null,Ae=(_e==null?void 0:_e.start)&&(_e==null?void 0:_e.end),nt=typeof(_e==null?void 0:_e.published)=="boolean"?_e.published:!1,pr=Array.isArray(_e==null?void 0:_e.photos)?_e.photos:[],mr=de.image??pr[0]??he[Ke%he.length],gr=((Le=_e==null?void 0:_e.country)==null?void 0:Le.trim())||null,ln=((Ye=_e==null?void 0:_e.city)==null?void 0:Ye.trim())||null,mt=((Yt=_e==null?void 0:_e.addressLine)==null?void 0:Yt.trim())||((cn=de.location)==null?void 0:cn.trim())||null,Qn=_e!=null&&_e.coordinates&&typeof _e.coordinates.lat=="number"&&typeof _e.coordinates.lng=="number"?{lat:_e.coordinates.lat,lng:_e.coordinates.lng}:null,Pt=Ae?bo(_e):_e!=null&&_e.checkInTime?`Check-in after ${_e.checkInTime}`:"Flexible availability";return{id:de.id,image:mr,price:Km(de.price??"0"),title:de.title??`Community couch ${Ke+1}`,host:de.hostName??"Community host",hostEmail:de.hostEmail??null,location:de.location??"Address shared after booking",country:gr,city:ln,addressLine:mt,availableDates:Pt,description:de.description??(de.createdAt?`Listing published on ${new Date(de.createdAt).toLocaleDateString()}`:"Listing added by our host community."),hostId:de.hostId,availability:_e,coordinates:Qn,gallery:pr.length?pr:mr?[mr]:[],hostBio:null,isPublished:nt}});y(ye)}catch(F){console.error("Failed to fetch listings",F)}finally{x(!1)}},[]);g.useEffect(()=>{typeof window>"u"||!("geolocation"in navigator)||navigator.geolocation.getCurrentPosition(F=>{C({lat:F.coords.latitude,lng:F.coords.longitude})},F=>{_t.current||(console.warn("Unable to determine user location",F),_t.current=!0)},{enableHighAccuracy:!1,timeout:5e3})},[]),g.useEffect(()=>{Ct()},[Ct]),g.useEffect(()=>{const F=Ut.trim();if(!F||F.length<3){ur([]),Mr(!1);return}if(st&&st.displayName===F){ur([]),Mr(!1);return}const he=new AbortController;Mr(!0);const ye=setTimeout(async()=>{try{const de=await I6(F,{signal:he.signal});ur(de)}catch(de){de instanceof DOMException&&de.name==="AbortError"||console.warn("Address lookup failed",de)}finally{Mr(!1)}},250);return()=>{he.abort(),clearTimeout(ye)}},[Ut,st]);const hr=g.useCallback(async(F,he)=>{if(F.id){Nn(ye=>({...ye,[F.id]:!0}));try{await U6(F.id,he),y(ye=>ye.map(de=>de.id===F.id?{...de,isPublished:he,availability:{...de.availability,published:he}}:de)),await Ct(),a({title:he?"Listing published":"Listing unpublished",description:he?"Your listing is live and visible to renters.":"Your listing is hidden until you publish it again."}),he&&j==="all"&&$("all")}catch(ye){console.error("Failed to toggle listing visibility",ye),a({title:"Unable to update listing",description:ye instanceof Error?ye.message:"Please try again in a moment.",variant:"destructive"})}finally{Nn(ye=>{const de={...ye};return delete de[F.id],de})}}},[Ct,a]),fr=g.useCallback(async()=>{if(!(s!=null&&s.id)){a({title:"Sign in required",description:"Hosts need to sign in before creating a listing.",variant:"destructive"});return}ne(!0);try{const F=typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${s.id}-${Date.now()}`;await Wv({id:F,hostId:s.id,hostName:s.full_name??s.email??"Host",hostEmail:s.email??(i==null?void 0:i.user.email)??null,title:s.full_name?`${s.full_name}'s couch`:"Hosted couch",imageUrl:null,pricePerNight:Km(hu),location:rf,description:sf,availability:{start:null,end:null,checkInTime:null,country:null,city:null,addressLine:Fc,coordinates:null,published:!1}}),await Ct(),$("mine"),a({title:"Listing created",description:"Open Edit listing to add your address, couch photos, and description."})}catch(F){console.error("Failed to create placeholder listing",F),a({title:"Unable to create listing",description:F instanceof Error?F.message:"Please try again in a moment.",variant:"destructive"})}finally{ne(!1)}},[Ct,s==null?void 0:s.email,s==null?void 0:s.full_name,s==null?void 0:s.id,i==null?void 0:i.user.email,a]);g.useEffect(()=>{const F=v.map(de=>de.hostId).filter(de=>!!de&&!qt.current.has(de));if(!F.length)return;let he=!1;return(async()=>{try{const de=await ET(Array.from(new Set(F)));if(he)return;cr(Ke=>{const _e={...Ke};return de.forEach(Ae=>{qt.current.add(Ae.id),_e[Ae.id]={bio:Ae.bio??null,university:Ae.university??null,programName:Ae.program_name??null,programYear:Ae.program_year??null,programType:Ae.program_type??null,avatarUrl:Ae.avatar_url??null}}),_e})}catch(de){console.warn("Failed to load host bios",de)}})(),()=>{he=!0}},[v]),g.useEffect(()=>{Gt(F=>{let he=!1;const ye={...F};return v.forEach(de=>{const Ke=Yb(de);if(!Ke.length){de.id in ye&&(delete ye[de.id],he=!0);return}(ye[de.id]??0)>=Ke.length&&(ye[de.id]=0,he=!0)}),he?ye:F})},[v]),g.useEffect(()=>{if(typeof window>"u")return;const F=()=>{Ct()};return window.addEventListener("listings-updated",F),()=>window.removeEventListener("listings-updated",F)},[Ct]),g.useEffect(()=>{const F=v.filter(de=>!de.coordinates&&!!de.location&&!ct.current.has(de.id));if(!F.length){T(!1);return}let he=!1;return T(!0),(async()=>{for(const de of F){ct.current.add(de.id);try{const Ke=await O6(de.location);if(!Ke||he)continue;y(_e=>_e.map(Ae=>Ae.id===de.id?{...Ae,coordinates:Ke}:Ae))}catch(Ke){console.warn("Unable to geocode address",Ke)}}he||T(!1)})(),()=>{he=!0}},[v]);const Se=g.useMemo(()=>v.length>0?v:o8,[v]),Dl=g.useMemo(()=>s!=null&&s.id?v.filter(F=>F.hostId===s.id):[],[s==null?void 0:s.id,v]),Fl=g.useMemo(()=>j==="mine"?Dl:Se,[Se,j,Dl]),$l=uc.countries,Hu=g.useMemo(()=>A==="all"?[]:uc.citiesByCountry[A]??[],[A]),co=g.useMemo(()=>{const F=se.country.trim()||"Switzerland";return uc.citiesByCountry[F]??[]},[se.country]);g.useEffect(()=>{if(A==="all"){X("all");return}const F=uc.citiesByCountry[A]??[];G!=="all"&&(F.includes(G)||X("all"))},[G,A]);const os=g.useMemo(()=>{const F=R.trim().toLowerCase(),he=A==="all"?null:A.toLowerCase(),ye=G==="all"?null:G.toLowerCase(),de=H.trim()?Number(H):null,Ke=M.trim()?Number(M):null,_e=de!==null&&Number.isFinite(de),Ae=Ke!==null&&Number.isFinite(Ke);return Fl.filter(nt=>{const pr=F?[nt.title,nt.location,nt.host,nt.city,nt.country,nt.addressLine].filter(Boolean).some(Pt=>Pt.toLowerCase().includes(F)):!0,mr=j==="mine"?!0:nt.isPublished!==!1,gr=(()=>{const Pt=u8(nt.price);return!(_e&&Pt<de||Ae&&Pt>Ke)})(),ln=!0,mt=(()=>{var Ye,Yt;if(!he)return!0;const Pt=(Ye=nt.country)==null?void 0:Ye.trim().toLowerCase();return Pt?Pt===he:(((Yt=nt.location)==null?void 0:Yt.toLowerCase())??"").includes(he)})(),Qn=(()=>{var Yt;if(!ye)return!0;const Pt=(Yt=nt.city)==null?void 0:Yt.trim().toLowerCase();if(Pt&&Pt===ye)return!0;const Le=[nt.city,nt.addressLine,nt.location].filter(Boolean).join(" ").toLowerCase();if(Le.includes(ye))return!0;const Ye=z6[ye]??[];return Ye.length&&Le?Ye.some(cn=>Le.includes(cn)):!1})();return pr&&mr&&gr&&ln&&mt&&Qn})},[Fl,G,A,V,M,H,R,j]),Rs=g.useMemo(()=>os.filter(F=>!!F.coordinates),[os]),Ul=g.useMemo(()=>Rs.map(F=>({id:F.id,title:F.title,price:F.price,coordinates:F.coordinates,location:qb(F),host:F.host,image:F.image})),[Rs]),bp=os.length===1?"stay":"stays";return d.jsxs("div",{className:"relative min-h-screen overflow-hidden dreamy-bg text-slate-900",children:[d.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[d.jsx("div",{className:"absolute -top-32 right-0 h-72 w-72 rounded-full bg-blue-200/40 blur-[140px]"}),d.jsx("div",{className:"absolute bottom-0 left-[-10%] h-80 w-80 rounded-full bg-indigo-200/30 blur-[160px]"})]}),d.jsxs("main",{className:"relative z-10 mx-auto w-full max-w-6xl px-4 py-12 sm:px-6 lg:px-8",children:[d.jsxs("header",{className:"mb-10 space-y-6",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-slate-500",children:"Welcome back"}),d.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Find calming couches near campus"}),d.jsxs("p",{className:"text-sm text-slate-500",children:["Showing ",d.jsx("span",{className:"font-semibold text-slate-800",children:os.length})," ",bp,R?` for "${R}"`:"","."]})]}),d.jsx("div",{className:"flex flex-wrap items-center gap-3 text-sm text-slate-500",children:d.jsxs("span",{children:["Signed in as ",d.jsx("span",{className:"font-semibold text-slate-800",children:(s==null?void 0:s.full_name)??"student"})]})})]}),d.jsxs("section",{className:"mb-8 space-y-4 rounded-[2rem] border border-white/50 bg-white/85 p-5 shadow-2xl backdrop-blur-xl",children:[d.jsx("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center",children:d.jsxs("div",{className:"flex flex-1 items-center gap-3 rounded-full border border-slate-100 bg-white px-4 py-2 shadow-sm",children:[d.jsx(kA,{className:"h-5 w-5 text-slate-400"}),d.jsx("input",{type:"search",value:R,onChange:F=>O(F.target.value),placeholder:"Search by host, city, or address",className:"w-full bg-transparent text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none"})]})}),d.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[d.jsx("div",{className:"w-full",children:d.jsxs(Ii,{value:A,onValueChange:we,children:[d.jsx(qs,{className:"w-full rounded-full border border-slate-100 bg-white px-4 py-2 text-left text-sm font-medium text-slate-600",children:d.jsx(Ai,{placeholder:"Country"})}),d.jsxs(Ys,{children:[d.jsx(Vr,{value:"all",children:"All countries"}),$l.map(F=>d.jsx(Vr,{value:F,children:F},F))]})]})}),d.jsx("div",{className:"w-full",children:d.jsxs(Ii,{value:G,onValueChange:me,disabled:A==="all",children:[d.jsx(qs,{className:"w-full rounded-full border border-slate-100 bg-white px-4 py-2 text-left text-sm font-medium text-slate-600",disabled:A==="all",children:d.jsx(Ai,{placeholder:A==="all"?"Choose Switzerland first":"City"})}),d.jsxs(Ys,{children:[d.jsx(Vr,{value:"all",children:"All cities in Switzerland"}),Hu.map(F=>d.jsx(Vr,{value:F,children:F},F))]})]})})]}),d.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[d.jsxs("div",{className:"grid w-full gap-3 sm:grid-cols-2",children:[d.jsxs("div",{className:"w-full rounded-[1.5rem] border border-slate-100 bg-white/90 p-4 shadow-sm",children:[d.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Price range"}),d.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[d.jsx(wt,{type:"number",inputMode:"numeric",min:"0",placeholder:"Min",value:H,onChange:F=>U(F.target.value),className:"rounded-full border-slate-200 bg-slate-50 text-sm"}),d.jsx("span",{className:"text-xs text-slate-400",children:"to"}),d.jsx(wt,{type:"number",inputMode:"numeric",min:"0",placeholder:"Max",value:M,onChange:F=>ee(F.target.value),className:"rounded-full border-slate-200 bg-slate-50 text-sm"})]}),d.jsx("p",{className:"mt-2 text-xs text-slate-400",children:"Set any minimum or maximum nightly rate."})]}),d.jsxs("div",{className:"w-full rounded-[1.5rem] border border-slate-100 bg-white/90 p-4 shadow-sm",children:[d.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Stay dates"}),d.jsxs(jk,{children:[d.jsx(Rk,{asChild:!0,children:d.jsxs("button",{type:"button",className:"mt-3 flex w-full items-center justify-between rounded-full border border-slate-200 bg-slate-50 px-4 py-2 text-left text-sm font-medium text-slate-600 transition hover:border-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-200",children:[d.jsx("span",{children:Rt}),d.jsx(l0,{className:"h-4 w-4 text-slate-400"})]})}),d.jsxs(B0,{className:"w-auto rounded-2xl border bg-white p-4 shadow-xl",align:"start",children:[d.jsx(Yh,{mode:"range",numberOfMonths:2,selected:V,onSelect:F=>Y(F),initialFocus:!0}),d.jsxs("div",{className:"mt-3 flex justify-between border-t pt-3",children:[d.jsx("p",{className:"text-xs text-slate-400",children:"Select a start and end date."}),d.jsx(Me,{type:"button",variant:"ghost",size:"sm",className:"text-xs text-slate-600",onClick:()=>Y(void 0),children:"Clear"})]})]})]})]})]}),d.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[si&&d.jsx("button",{type:"button",onClick:Ve,className:"text-xs font-medium text-slate-500 underline underline-offset-4",children:"Clear filters"}),d.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-slate-200 bg-white/80 p-1 text-sm font-medium text-slate-600",children:[d.jsx("button",{type:"button",onClick:()=>E("list"),className:`rounded-full px-4 py-1.5 transition ${b==="list"?"bg-slate-900 text-white shadow":"text-slate-500"}`,children:"List view"}),d.jsx("button",{type:"button",onClick:()=>E("map"),className:`rounded-full px-4 py-1.5 transition ${b==="map"?"bg-slate-900 text-white shadow":"text-slate-500"}`,children:"Map view"})]})]})]})]}),b==="map"?Ul.length>0?d.jsx(BW,{listings:Ul,userLocation:_,isLoading:k||S,onSelect:F=>{const he=os.find(ye=>ye.id===F);he&&pe(he)}}):d.jsx("div",{className:"rounded-[2rem] border border-dashed border-slate-200 bg-white/70 p-8 text-center text-sm text-slate-500",children:k||S?"Locating calming couches near you":"No plotted couches for the current filters. Try switching back to the list view or clearing filters."}):d.jsxs("section",{className:"space-y-6",children:[(S||k)&&d.jsx("p",{className:"text-center text-sm text-slate-500",children:S?"Loading the latest couches":"Pinning couch locations"}),!os.length&&!(S||k)?j==="mine"?d.jsxs("div",{className:"rounded-[2rem] border border-dashed border-slate-200 bg-white/80 p-10 text-center space-y-3",children:[d.jsx("p",{className:"text-base font-semibold text-slate-900",children:"You haven't published a listing yet."}),d.jsx("p",{className:"text-sm text-slate-500",children:"Create your listing shell and then use Edit listing to add your address, couch photos, and description."}),d.jsx(Me,{className:"rounded-full",disabled:z,onClick:fr,children:z?"Creating...":"Create my listing"})]}):d.jsxs("div",{className:"rounded-[2rem] border border-dashed border-slate-200 bg-white/80 p-10 text-center",children:[d.jsx("p",{className:"text-base font-semibold text-slate-900",children:"No calming stays match that search"}),d.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Try clearing filters or searching a nearby neighborhood."})]}):d.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:os.map(F=>{var Yt,cn;const he=qb(F),ye=F.addressLine&&F.addressLine!==he?F.addressLine:null,de=rt[F.id]??!1,Ke=!!ye&&ye.length>CT,_e=de||!ye?ye:s8(ye),Ae=F.hostId?Xt[F.hostId]??null:null,nt=((Yt=Ae==null?void 0:Ae.university)==null?void 0:Yt.trim())||null,pr=((cn=Ae==null?void 0:Ae.programName)==null?void 0:cn.trim())||null,mr=Ae!=null&&Ae.programType?i8[Ae.programType]??Ae.programType:null,gr=Ae!=null&&Ae.programYear?`Year ${Ae.programYear}`:null,ln=[pr,mr,gr].filter(Boolean).join("  "),mt=Yb(F),Qn=Vt[F.id]??0,Pt=mt[Qn]??F.image,Le=mt.length>1,Ye=Ge=>{if(!Le)return;const jn=Ge==="prev"?(Qn-1+mt.length)%mt.length:(Qn+1)%mt.length;Ts(F.id,jn)};return d.jsxs("article",{role:"button",tabIndex:0,onClick:Ge=>pe(F,Ge),onKeyDown:Ge=>{(Ge.key==="Enter"||Ge.key===" ")&&(Ge.preventDefault(),pe(F,Ge))},className:"group cursor-pointer rounded-[1.75rem] border border-white/60 bg-white/80 shadow-xl shadow-blue-100/60 backdrop-blur transition duration-300 hover:-translate-y-1.5 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-300",children:[d.jsxs("div",{className:"relative h-64 overflow-hidden rounded-[1.5rem]",onTouchStart:Ge=>{var jn;Kn.current[F.id]=((jn=Ge.touches[0])==null?void 0:jn.clientX)??0},onTouchEnd:Ge=>{var ii;const jn=Kn.current[F.id];if(typeof jn!="number")return;const ut=(((ii=Ge.changedTouches[0])==null?void 0:ii.clientX)??jn)-jn;Math.abs(ut)>40&&(Ge.stopPropagation(),Ye(ut>0?"prev":"next")),delete Kn.current[F.id]},children:[l&&d.jsx("button",{className:`absolute right-4 top-4 z-10 rounded-full bg-white/90 p-2 text-slate-600 shadow transition hover:scale-105 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-400 ${m.has(F.id)?"text-rose-500":""}`,"aria-label":m.has(F.id)?"Remove from wishlist":"Save to wishlist",onClick:Ge=>Ie(Ge,F),children:d.jsx(Oh,{className:`h-5 w-5 ${m.has(F.id)?"fill-rose-500":""}`})}),d.jsx("img",{src:Pt??F.image,alt:F.title,className:"h-full w-full object-cover"}),Le&&d.jsxs("div",{className:"absolute bottom-4 left-1/2 hidden -translate-x-1/2 rounded-full bg-black/50 px-3 py-1 text-xs font-semibold text-white sm:flex",children:["Photo ",Qn+1," / ",mt.length]}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/70 via-slate-900/10"}),d.jsxs("div",{className:"absolute bottom-4 left-4 right-4 flex items-center justify-between text-white",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-lg font-semibold",children:F.price}),d.jsx("p",{className:"text-xs text-white/80",children:"per night"})]}),d.jsxs("p",{className:"text-xs text-white/80",children:["Hosted by ",F.host]})]})]}),d.jsxs("div",{className:"space-y-3 p-5",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:F.title}),d.jsx("span",{className:"text-sm font-semibold text-slate-700",children:F.price})]}),c&&j==="mine"&&F.hostId===(s==null?void 0:s.id)&&d.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${F.isPublished===!1?"text-amber-600":"text-emerald-600"}`,children:F.isPublished===!1?"Draft  Not published":"Published"}),(nt||ln)&&d.jsxs("div",{className:"space-y-0.5 text-xs text-slate-500",children:[nt&&d.jsx("p",{className:"font-semibold text-slate-700",children:nt}),ln&&d.jsx("p",{children:ln})]}),d.jsxs("p",{className:"flex items-center gap-2 text-sm text-slate-500",children:[d.jsx(u0,{className:"h-4 w-4"}),d.jsxs("span",{className:"flex flex-wrap items-center gap-1",children:[he,ye&&d.jsxs("span",{className:"ml-1 text-xs text-slate-400",children:[" ",_e,Ke&&d.jsx("button",{type:"button",className:"ml-1 rounded-full px-2 py-0.5 text-[10px] font-semibold text-blue-600 hover:underline",onClick:Ge=>{Ge.stopPropagation(),Ge.preventDefault(),Tn(F.id)},children:de?"Hide":"Full address"})]})]})]}),d.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:d.jsxs("div",{className:"flex items-center gap-2",children:[c&&j==="mine"&&F.hostId===(s==null?void 0:s.id)&&d.jsx(Me,{size:"sm",className:"rounded-full bg-blue-600 text-xs text-white shadow hover:bg-blue-500",onClick:Ge=>{Ge.stopPropagation(),is(F)},children:"Edit listing"}),c&&j==="mine"&&F.hostId===(s==null?void 0:s.id)&&d.jsx(Me,{size:"sm",variant:F.isPublished!==!1?"outline":"default",className:"rounded-full text-xs",disabled:!!ns[F.id],onClick:Ge=>{Ge.stopPropagation(),hr(F,F.isPublished===!1)},children:ns[F.id]?"Saving...":F.isPublished===!1?"Publish listing":"Unpublish"}),d.jsx(Me,{variant:"ghost",size:"sm",className:"rounded-full bg-slate-800 text-white hover:bg-slate-700",onClick:Ge=>{Ge.stopPropagation(),pe(F,Ge)},children:"View stay"})]})})]})]},F.id)})})]})]}),d.jsx(nw,{open:q,onOpenChange:F=>{F||an()},children:d.jsxs(cp,{className:"max-w-2xl",children:[d.jsxs(up,{children:[d.jsx(dp,{children:"Edit listing"}),d.jsx(hp,{children:"Fine-tune your couch details. Updates go live immediately."})]}),B?d.jsxs("form",{onSubmit:Ee,className:"space-y-5",children:[d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"edit-title",children:"Listing title"}),d.jsx(wt,{id:"edit-title",value:se.title,onChange:F=>Yn("title",F.target.value),disabled:fe})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"edit-price",children:"Price per night"}),d.jsx(wt,{id:"edit-price",value:se.price,onChange:F=>Yn("price",F.target.value),placeholder:"25",disabled:fe})]})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{children:"Country"}),d.jsxs(Ii,{value:se.country||"Switzerland",onValueChange:ss,disabled:fe,children:[d.jsx(qs,{className:"rounded-2xl border-slate-200 bg-white",children:d.jsx(Ai,{placeholder:"Select country"})}),d.jsx(Ys,{children:$l.map(F=>d.jsx(Vr,{value:F,children:F},F))})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{children:"City"}),d.jsxs(Ii,{value:se.city||void 0,onValueChange:F=>Yn("city",F),disabled:fe||!co.length,children:[d.jsx(qs,{className:"rounded-2xl border-slate-200 bg-white",children:d.jsx(Ai,{placeholder:co.length?"Select city":"Choose country first"})}),d.jsx(Ys,{children:co.map(F=>d.jsx(Vr,{value:F,children:F},F))})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"edit-address",children:"Street address"}),d.jsx(wt,{id:"edit-address",value:Ut,onChange:F=>{Jt(F.target.value),en(null)},placeholder:"Enter your street",disabled:fe}),d.jsx("p",{className:"text-xs text-slate-500",children:"Exact details stay private until you approve a booking."}),Ut.trim().length>=3&&(dr||rs.length>0||!st)?d.jsxs("div",{className:"max-h-36 overflow-y-auto rounded-2xl border border-slate-200 bg-white",children:[dr&&d.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"Searching addresses"}),!dr&&rs.length===0&&!st&&d.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches yet. Keep typing."}),rs.map(ye=>d.jsx("button",{type:"button",className:`block w-full px-3 py-2 text-left text-sm transition hover:bg-blue-50 ${(st==null?void 0:st.displayName)===ye.displayName?"bg-blue-50":""}`,onClick:()=>{en(ye),Jt(ye.displayName),ur([])},children:ye.displayName},`${ye.lat}-${ye.lng}`))]}):null,st&&d.jsx("p",{className:"text-xs font-medium text-emerald-600",children:"Address confirmed "})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"edit-location",children:"Location description"}),d.jsx(wt,{id:"edit-location",value:se.location,onChange:F=>Yn("location",F.target.value),placeholder:"Near Downtown Campus",disabled:fe})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"edit-description",children:"Description"}),d.jsx(Rl,{id:"edit-description",value:se.description,onChange:F=>Yn("description",F.target.value),rows:4,disabled:fe})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"edit-checkin",children:"Check-in time"}),d.jsx(wt,{id:"edit-checkin",type:"time",value:se.checkInTime,onChange:F=>Yn("checkInTime",F.target.value),disabled:fe})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(tt,{children:"Photos (up to 7)"}),d.jsxs("span",{className:"text-xs text-slate-500",children:[Q.length,"/7 uploaded"]})]}),d.jsxs("div",{className:"flex flex-wrap gap-3",children:[Q.length===0&&d.jsx("p",{className:"text-xs text-slate-500",children:"Add at least one photo so renters can see your couch."}),d.jsx("div",{className:"grid grid-cols-3 gap-3",children:Q.map((F,he)=>d.jsxs("div",{className:"relative h-20 w-full cursor-move overflow-hidden rounded-xl border",draggable:!0,onDragStart:ye=>{ye.dataTransfer.setData("text/plain",he.toString())},onDragOver:ye=>ye.preventDefault(),onDrop:ye=>{ye.preventDefault();const de=Number(ye.dataTransfer.getData("text/plain")),Ke=he;Number.isNaN(de)||Number.isNaN(Ke)||de===Ke||te(_e=>{const Ae=[..._e],[nt]=Ae.splice(de,1);return Ae.splice(Ke,0,nt),Ae})},children:[d.jsx("img",{src:F,alt:"Listing gallery",className:"h-full w-full object-cover"}),d.jsx("button",{type:"button",className:"absolute right-1 top-1 rounded-full bg-white/90 px-2 text-[10px] font-semibold text-slate-700 shadow",onClick:()=>lo(F),disabled:fe,children:"Remove"})]},F))})]}),d.jsxs("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-slate-50/80 p-4 text-center",onDragOver:F=>F.preventDefault(),onDrop:js,children:[d.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Drag and drop photos here"}),d.jsx("p",{className:"text-xs text-slate-500",children:"or click to browse files (PNG/JPG)"}),d.jsx(wt,{id:"edit-photos",type:"file",accept:"image/*",multiple:!0,className:"mt-2 cursor-pointer",disabled:fe||Q.length>=7,onChange:F=>Zn(F.target.files)})]}),Z.length>0&&d.jsxs("p",{className:"text-xs text-slate-500",children:["Ready to upload: ",Z.map(F=>F.name).join(", ")]}),d.jsx("p",{className:"text-xs text-slate-500",children:"Upload up to 7 photos. Drag tiles to reorder; the first one becomes your cover image."})]}),d.jsxs(rw,{children:[d.jsx(Me,{type:"button",variant:"ghost",onClick:an,disabled:fe,children:"Cancel"}),d.jsx(Me,{type:"submit",disabled:fe,children:fe?"Saving...":"Save changes"})]})]}):d.jsx("p",{className:"text-sm text-slate-500",children:"Select a listing to edit."})]})})]})};var PT={exports:{}},kT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yl=g;function f8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var p8=typeof Object.is=="function"?Object.is:f8,m8=yl.useState,g8=yl.useEffect,v8=yl.useLayoutEffect,y8=yl.useDebugValue;function w8(e,t){var n=t(),r=m8({inst:{value:n,getSnapshot:t}}),s=r[0].inst,i=r[1];return v8(function(){s.value=n,s.getSnapshot=t,Qm(s)&&i({inst:s})},[e,n,t]),g8(function(){return Qm(s)&&i({inst:s}),e(function(){Qm(s)&&i({inst:s})})},[e]),y8(n),n}function Qm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!p8(e,n)}catch{return!0}}function x8(e,t){return t()}var _8=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x8:w8;kT.useSyncExternalStore=yl.useSyncExternalStore!==void 0?yl.useSyncExternalStore:_8;PT.exports=kT;var b8=PT.exports;function S8(){return b8.useSyncExternalStore(E8,()=>!0,()=>!1)}function E8(){return()=>{}}var sw="Avatar",[C8,Eq]=Vn(sw),[P8,NT]=C8(sw),TT=g.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,i]=g.useState("idle");return d.jsx(P8,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:d.jsx(Ce.span,{...r,ref:t})})});TT.displayName=sw;var jT="AvatarImage",RT=g.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=e,a=NT(jT,n),l=k8(r,i),c=Tt(h=>{s(h),a.onImageLoadingStatusChange(h)});return Ot(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?d.jsx(Ce.img,{...i,ref:t,src:r}):null});RT.displayName=jT;var MT="AvatarFallback",OT=g.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,i=NT(MT,n),[a,l]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&i.imageLoadingStatus!=="loaded"?d.jsx(Ce.span,{...s,ref:t}):null});OT.displayName=MT;function Qb(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function k8(e,{referrerPolicy:t,crossOrigin:n}){const r=S8(),s=g.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=g.useState(()=>Qb(i,e));return Ot(()=>{l(Qb(i,e))},[i,e]),Ot(()=>{const c=m=>()=>{l(m)};if(!i)return;const h=c("loaded"),f=c("error");return i.addEventListener("load",h),i.addEventListener("error",f),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",h),i.removeEventListener("error",f)}},[i,n,t]),a}var IT=TT,AT=RT,LT=OT;const DT=g.forwardRef(({className:e,...t},n)=>d.jsx(IT,{ref:n,className:Te("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));DT.displayName=IT.displayName;const FT=g.forwardRef(({className:e,...t},n)=>d.jsx(AT,{ref:n,className:Te("aspect-square h-full w-full",e),...t}));FT.displayName=AT.displayName;const $T=g.forwardRef(({className:e,...t},n)=>d.jsx(LT,{ref:n,className:Te("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));$T.displayName=LT.displayName;const N8=8,Ll=e=>({id:e.id,couchId:e.couch_id,couchTitle:e.couch_title,hostId:e.host_id,hostName:e.host_name,renterId:e.renter_id,renterName:e.renter_name,stayStart:e.stay_start,stayEnd:e.stay_end,nights:e.nights,pricePerNight:e.price_per_night,status:e.status??"pending",createdAt:e.created_at,paymentStatus:e.payment_status,paymentDueAt:e.payment_due_at,paymentIntentId:e.payment_intent_id,paymentClientSecret:e.payment_client_secret}),fu=e=>e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)?e:null,UT=e=>{if(!e)return[];const t=new Set;return e.forEach(n=>{if(!n)return;const r=n.trim();r&&t.add(r)}),Array.from(t)},Xv=e=>e.replace(/[%_]/g,t=>`\\${t}`).replace(/,/g,"\\,"),T8=e=>{if(!e)return[];const t=new Set;return e.forEach(n=>{if(!n)return;const r=n.trim();r&&t.add(r)}),Array.from(t)},j8=24*60*60*1e3,Jv=e=>{const t=new Date(e);if(Number.isNaN(t.getTime())){const n=new Date;return new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime()}return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()},Xb=(e,t)=>{const n=Jv(e);return n>t?n:t+j8},zT=async e=>{const t={couch_id:e.couchId,couch_title:e.couchTitle,host_id:fu(e.hostId),host_name:e.hostEmail??e.hostName,renter_id:fu(e.renterId),renter_name:e.renterName,stay_start:e.stayStart,stay_end:e.stayEnd,nights:e.nights,price_per_night:e.pricePerNight,status:e.status??"pending"};e.createdAt&&(t.created_at=e.createdAt);const{data:n,error:r}=await be.from("booking_requests").insert(t).select("*").single();if(r)throw r;return Ll(n)},fp=async(e,t)=>{const n=fu(e),r=UT(t);if(!n&&!r.length)return[];let s=be.from("booking_requests").select("*").order("created_at",{ascending:!1});const i=[];n&&i.push(`renter_id.eq.${n}`),r.forEach(c=>{i.push(`renter_name.ilike.%${Xv(c)}%`)}),i.length===1&&i[0].startsWith("renter_id.eq.")?s=s.eq("renter_id",n):i.length>0&&(s=s.or(i.join(",")));const{data:a,error:l}=await s;if(l)throw l;return(a??[]).map(Ll)},R8=async(e,t,n)=>{const r=fu(e),s=UT(t),i=T8(n);if(!r&&!s.length&&!i.length)return[];let a=be.from("booking_requests").select("*").order("created_at",{ascending:!1});const l=[];r&&l.push(`host_id.eq.${r}`),s.forEach(f=>{l.push(`host_name.ilike.%${Xv(f)}%`)}),i.forEach(f=>{l.push(`couch_id.eq.${Xv(f)}`)}),l.length===1&&l[0].startsWith("host_id.eq.")?a=a.eq("host_id",r):l.length>0&&(a=a.or(l.join(",")));const{data:c,error:h}=await a;if(h)throw h;return(c??[]).map(Ll)},M8=async(e,t)=>{const{data:n,error:r}=await be.from("booking_requests").select("*").eq("id",e).single();if(r)throw r;if(!n)throw new Error("Booking request not found.");if(t==="approved"&&n.couch_id&&n.stay_start&&n.stay_end){const{data:l,error:c}=await be.from("booking_requests").select("id, stay_start, stay_end").eq("couch_id",n.couch_id).eq("status","approved").neq("id",e);if(c)throw c;const h=Jv(n.stay_start),f=Xb(n.stay_end,h);if((l??[]).some(v=>{const y=Jv(v.stay_start),S=Xb(v.stay_end,y);return h<S&&f>y}))throw new Error("Another booking has already been approved for this listing during the selected dates.")}const s={status:t};if(t==="approved"){const l=new Date(Date.now()+N8*60*60*1e3).toISOString();s.payment_status="pending",s.payment_due_at=l}else n.payment_status!=="paid"&&(s.payment_status=null,s.payment_due_at=null);const{data:i,error:a}=await be.from("booking_requests").update(s).eq("id",e).select("*").single();if(a)throw a;return Ll(i)},O8=async(e,t)=>{if(!fu(t))throw new Error("Sign in to cancel your booking request.");const{data:r,error:s}=await be.functions.invoke("cancel-booking",{body:{requestId:e}});if(s)throw s;if(!(r!=null&&r.booking))throw new Error("Unable to cancel booking request.");return Ll(r.booking)},BT=async(e,t)=>{const{data:n,error:r}=await be.from("direct_messages").select("id, sender_id, receiver_id, content, created_at").or(`and(sender_id.eq.${e},receiver_id.eq.${t}),and(sender_id.eq.${t},receiver_id.eq.${e})`).order("created_at",{ascending:!0});if(r)throw r;return n??[]},WT=async(e,t,n)=>{const{data:r,error:s}=await be.from("direct_messages").insert({sender_id:e,receiver_id:t,content:n}).select().single();if(s)throw s;return r??null},I8=async e=>{const{data:t,error:n}=await be.from("direct_messages").select("id, sender_id, receiver_id, content, created_at").or(`sender_id.eq.${e},receiver_id.eq.${e}`).order("created_at",{ascending:!1}).limit(200);if(n)throw n;const r=new Map;return(t??[]).forEach(s=>{const i=s.sender_id===e?s.receiver_id:s.sender_id;r.has(i)||r.set(i,s)}),Array.from(r.entries()).map(([s,i])=>({otherUserId:s,lastMessage:i}))},A8={bsc:"Bachelor (BSc)",msc:"Master (MSc)",phd:"Doctorate (PhD)",other:"Other program"},L8=e=>{if(!(e!=null&&e.start)||!(e!=null&&e.end))return null;const t=pn(new Date(e.start)),n=j0(new Date(e.end));return Number.isNaN(t.getTime())||Number.isNaN(n.getTime())?null:{start:t,end:n}},Jb=(e,t)=>{if(!(e!=null&&e.from)||!(e!=null&&e.to))return!1;const n=pn(new Date),r=pn(e.from),s=j0(e.to);return Ko(r,n)?!1:t?!Ko(r,t.start)&&!cu(s,t.end):!0},e1=(e,t)=>{const n=pn(e),r=pn(new Date);return Ko(n,r)?!0:t?Ko(n,t.start)||cu(n,t.end):!1},D8=[Qi,zh,Bh,Wh,Hh,Vh],F8=e=>{if(!(e!=null&&e.start)||!(e!=null&&e.end))return"Flexible availability";const t=new Date(e.start),n=new Date(e.end);if(Number.isNaN(t.getTime())||Number.isNaN(n.getTime()))return"Flexible availability";const r=t.getMonth()===n.getMonth(),s=Je(t,"MMM d"),i=r?Je(n,"d"):Je(n,"MMM d");return`${s}-${i}`},$8=e=>{if(!e)return"$0";const t=e.trim();return t?t.startsWith("$")?t:`$${t}`:"$0"},Xm=e=>e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)?e:null,U8=()=>{var js,is;const e=es(),t=ra(),n=I5(),r=(js=t.state)==null?void 0:js.couch,{toast:s}=Ps(),{profile:i,session:a}=jr(),l=Y0(i,a),[c,h]=g.useState(),[f,m]=g.useState(!1),[v,y]=g.useState(r??null),[S,x]=g.useState(!r),[b,E]=g.useState(null),[_,C]=g.useState(null),[k,T]=g.useState(null),[R,O]=g.useState([]),[A,W]=g.useState(!1),[G,X]=g.useState(null),[H,U]=g.useState(""),[M,ee]=g.useState(!1),[V,Y]=g.useState(!1),[j,$]=g.useState(!1),[q,oe]=g.useState(!1),[B,ce]=g.useState(!1),[Q,te]=g.useState(0),Z=v,re=Z?L8(Z.availability):null,fe=(c==null?void 0:c.from)&&(c==null?void 0:c.to),Pe=fe?Jb(c,re):!1,z=fe?Math.max(1,Cr(pn(c.to),pn(c.from))):0,ne=g.useCallback(async()=>{if(_!=null&&_.hostId)return _;if(!Z)throw new Error("Listing details are not available yet.");const Ee=Z.host??"Host",Ve=Z.hostEmail??null,We=Xm(Z.hostId??null);if(We)return{hostId:We,hostName:Ee,hostEmail:Ve};const we=await Zm({listingId:Z.id,hostEmail:Ve,hostName:Ee});if(we!=null&&we.hostId){const me=Xm(we.hostId);if(me)return{hostId:me,hostName:we.hostName??Ee,hostEmail:we.hostEmail??Ve}}throw new Error("Unable to determine host details for this listing.")},[Z,_]);if(g.useEffect(()=>{if(r){y(r),x(!1);return}const Ee=n.id;if(!Ee){E("Missing listing identifier."),x(!1);return}let Ve=!0;return(async()=>{try{x(!0);const{data:we,error:me}=await be.from("listings").select("id, user_id, host_name, host_email, address, property_type, price_per_night, check_in_time, availability_start, availability_end, photos, documents, created_at").eq("id",Ee).maybeSingle();if(me)throw me;if(!we)throw new Error("Listing not found.");const pe=we.availability_start&&we.availability_end?{start:we.availability_start,end:we.availability_end}:null,Ie=Array.isArray(we.photos)?we.photos:[],ct=Ie[0]??D8[0],_t=we.property_type?`${we.property_type==="house"?"House":"Flat"} couch`:"Community couch",qt={id:we.id,image:ct,price:$8(we.price_per_night?String(we.price_per_night):"$0"),title:_t,host:we.host_name??"Community host",hostEmail:we.host_email??null,location:we.address??"Address shared after booking",country:null,city:null,addressLine:we.address??null,availableDates:pe?F8(pe):we.check_in_time?`Check-in after ${we.check_in_time}`:"Flexible availability",description:we.created_at?`Listing published on ${new Date(we.created_at).toLocaleDateString()}`:"Listing added by our host community.",hostId:we.user_id??null,availability:pe,coordinates:null,gallery:Ie.length?Ie:ct?[ct]:[]};Ve&&(y(qt),E(null))}catch(we){if(!Ve)return;const me=we instanceof Error?we.message:"Unable to load listing.";E(me),y(null)}finally{Ve&&x(!1)}})(),()=>{Ve=!1}},[r,n.id]),g.useEffect(()=>{b&&s({title:"Listing unavailable",description:b,variant:"destructive"})},[b,s]),g.useEffect(()=>{if(typeof window>"u")return;let Ee=!0;const Ve=async()=>{if(!l||!(Z!=null&&Z.id)){Ee&&Y(!1);return}$(!0);try{const we=await ef(l);if(!Ee)return;const me=Jh(Z.id),pe=we.some(Ie=>Ie.couchId===Z.id||Ie.storageId===me);Y(pe)}catch(we){Ee&&(console.warn("Unable to sync wishlist state",we),Y(!1))}finally{Ee&&$(!1)}};Ve();const We=()=>Ve();return window.addEventListener("wishlist-updated",We),()=>{Ee=!1,window.removeEventListener("wishlist-updated",We)}},[Z==null?void 0:Z.id,l]),g.useEffect(()=>{if(!Z)return;let Ee=!0;return(async()=>{var We;try{const we=await ne();if(!Ee)return;C(we);try{const pe=await r8(we.hostId);if(!Ee)return;T({name:(We=pe==null?void 0:pe.full_name)!=null&&We.trim()?pe.full_name:(pe==null?void 0:pe.email)??we.hostName,role:(pe==null?void 0:pe.user_role)??null,university:(pe==null?void 0:pe.university)??null,programName:(pe==null?void 0:pe.program_name)??null,programType:(pe==null?void 0:pe.program_type)??null,programYear:(pe==null?void 0:pe.program_year)??null,avatarUrl:(pe==null?void 0:pe.avatar_url)??null})}catch(pe){console.warn("Failed to fetch host profile",pe),Ee&&T({name:we.hostName,role:null,university:null,programName:null,programType:null,programYear:null,avatarUrl:null})}if(!(i!=null&&i.id))return;W(!0);const me=await BT(i.id,we.hostId);if(!Ee)return;O(me),X(null)}catch(we){if(!Ee)return;const me=we instanceof Error?we.message:"Unable to load conversation.";X(me)}finally{Ee&&W(!1)}})(),()=>{Ee=!1}},[Z,i==null?void 0:i.id,ne]),g.useEffect(()=>{if(!(i!=null&&i.id)||!(_!=null&&_.hostId))return;const Ee=be.channel(`direct-messages-${i.id}-${_.hostId}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"direct_messages"},Ve=>{const We=Ve.new;(We.sender_id===i.id&&We.receiver_id===_.hostId||We.sender_id===_.hostId&&We.receiver_id===i.id)&&O(we=>we.some(me=>me.id===We.id)?we:[...we,We])}).subscribe();return()=>{be.removeChannel(Ee)}},[i==null?void 0:i.id,_==null?void 0:_.hostId]),S)return d.jsx("main",{className:"min-h-screen flex items-center justify-center bg-background",children:d.jsx("p",{className:"text-muted-foreground",children:"Loading listing"})});if(!Z)return d.jsx("main",{className:"min-h-screen flex items-center justify-center bg-background",children:d.jsxs("div",{className:"text-center space-y-3",children:[d.jsx("h1",{className:"text-2xl font-semibold",children:"Listing not available"}),d.jsx("p",{className:"text-muted-foreground text-sm",children:b??"We couldn't find that couch."}),d.jsx(Me,{variant:"outline",onClick:()=>e("/listings",{replace:!0}),children:"Back to listings"})]})});const se=80,Oe=Z.location.length>se,rt=Oe&&!B?`${Z.location.slice(0,se).trimEnd()}`:Z.location,jt=Ee=>{if(!Oe)return null;const Ve=Ee==="light"?"text-xs font-semibold text-white underline underline-offset-4":"text-xs font-semibold text-sketch-blue underline underline-offset-4";return d.jsx("button",{type:"button",className:`ml-2 ${Ve}`,onClick:()=>ce(We=>!We),children:B?"Hide full address":"Show full address"})},Vt=async()=>{var me,pe;if(!(c!=null&&c.from)||!(c!=null&&c.to)){s({title:"Select stay dates",description:"Pick your check-in and check-out dates before requesting a booking.",variant:"destructive"});return}if(!Jb(c,re)){s({title:"Dates unavailable",description:"Please choose dates within the host's availability window.",variant:"destructive"});return}if(!(i!=null&&i.id)){s({title:"Sign in required",description:"Sign in to request a booking.",variant:"destructive"});return}const Ee=pn(new Date),Ve=pn(c.from);if(Ko(Ve,Ee)){s({title:"Choose future dates",description:"Bookings can only be requested for future stays.",variant:"destructive"});return}m(!0);const We=pn(c.from).toISOString(),we=j0(c.to).toISOString();try{const Ie=_??await Zm({listingId:Z.id,hostEmail:Z.hostEmail??null,hostName:Z.host});if(!Ie||!Ie.hostId)throw new Error("We couldn't find a host for this listing. Try refreshing the listings page.");const ct=_??{hostId:Ie.hostId,hostName:Ie.hostName??Z.host??"Host",hostEmail:Ie.hostEmail??Z.hostEmail??null},_t=(me=i.id)==null?void 0:me.trim(),qt=(pe=ct.hostId)==null?void 0:pe.trim();if(_t&&qt&&_t===qt){s({title:"This is your couch",description:"Hosts can't request bookings for their own listings.",variant:"destructive"});return}_||C(ct),await zT({couchId:Z.id,couchTitle:Z.title,hostId:ct.hostId,hostName:ct.hostName,hostEmail:ct.hostEmail??void 0,renterId:Xm(i.id),renterName:i.full_name??i.email??"Guest renter",stayStart:We,stayEnd:we,nights:z,pricePerNight:Z.price,status:"pending",createdAt:new Date().toISOString()}),s({title:"Booking request sent",description:"We'll share your booking request with the host."}),h(void 0)}catch(Ie){console.error("Failed to create booking request",Ie),s({title:"Request failed",description:Ie instanceof Error?Ie.message:"We couldn't share your request. Please try again.",variant:"destructive"})}finally{m(!1)}},Gt=async Ee=>{if(Ee.preventDefault(),!(i!=null&&i.id)){X("Sign in to message the host.");return}let Ve=_;if(!Ve){const we=await Zm({listingId:Z.id,hostEmail:Z.hostEmail??null,hostName:Z.host});if(!we||!we.hostId){X("Unable to load host details.");return}Ve={hostId:we.hostId,hostName:we.hostName??Z.host??"Host",hostEmail:we.hostEmail??Z.hostEmail??null},C(Ve)}if(!Ve)return;if(i.id===Ve.hostId){X("You cannot message yourself as the host.");return}const We=H.trim();if(!We){X("Please enter a message.");return}ee(!0),X(null);try{const we=await WT(i.id,Ve.hostId,We);we&&O(me=>[...me,we]),U("")}catch(we){const me=we instanceof Error?we.message:"Failed to send message.";X(me)}finally{ee(!1)}},Xt=fe?`${Je(c.from,"MMM d, yyyy")}  ${Je(c.to,"MMM d, yyyy")}`:"Select stay dates",cr=c!=null&&c.from?Je(c.from,"EEE, MMM d"):"Pick a start date",ns=c!=null&&c.to?Je(c.to,"EEE, MMM d"):c!=null&&c.from?"Select an end date":"Pick an end date",Nn=Pe?`${z}`:"",Ut=(is=k==null?void 0:k.name)!=null&&is.trim()?k.name:Z.host,Jt=Ut?Ut.charAt(0).toUpperCase():"H",rs=(k==null?void 0:k.role)??"Community host",ur=(k==null?void 0:k.avatarUrl)??null,st=(k==null?void 0:k.university)??null,en=(k==null?void 0:k.programName)??null,dr=k!=null&&k.programType?A8[k.programType]??k.programType:null,Mr=k!=null&&k.programYear?`Year ${k.programYear}`:null;Z.availability;const Rt=g.useMemo(()=>{var Ve;if(!Z)return[];if(Array.isArray(Z.gallery)&&Z.gallery.length)return Z.gallery;const Ee=(Ve=Z.availability)==null?void 0:Ve.photos;return Array.isArray(Ee)&&Ee.length?Ee:Z.image?[Z.image]:[]},[Z]),si=Rt.length>1,Yn=Rt[Q]??(Z==null?void 0:Z.image)??Qi;g.useEffect(()=>{te(0)},[Z==null?void 0:Z.id,Rt.length]);const ss=g.useCallback(()=>{te(Ee=>Rt.length?(Ee-1+Rt.length)%Rt.length:0)},[Rt.length]),Tn=g.useCallback(()=>{te(Ee=>Rt.length?(Ee+1)%Rt.length:0)},[Rt.length]),Ts=!!(_!=null&&_.hostId&&(i!=null&&i.id)&&i.id!==_.hostId),an=!!(_!=null&&_.hostId&&(i!=null&&i.id)&&i.id===_.hostId),Zn=()=>h(void 0),lo=async()=>{if(Z){if(!l){s({title:"Sign in to save couches",description:"Create an account or sign in to keep a wishlist.",variant:"destructive"});return}oe(!0);try{V?(await Z0(l,Z.id),Y(!1),s({title:"Removed from wishlist",description:`${Z.title} is no longer saved.`})):(await lN(l,Z.id,rT(Z)),Y(!0),s({title:"Saved to wishlist",description:`${Z.title} was added for later.`}))}catch(Ee){console.error("Wishlist update failed",Ee),s({title:"Unable to update wishlist",description:"Please try again shortly.",variant:"destructive"})}finally{oe(!1)}}};return d.jsxs("main",{className:"dreamy-bg min-h-screen",children:[d.jsx("header",{className:"border-b border-sketch/70 bg-white/90 backdrop-blur-sm",children:d.jsxs("div",{className:"mx-auto flex max-w-6xl items-center gap-3 px-4 py-3",children:[d.jsxs(Me,{variant:"ghost",size:"icon",onClick:()=>e("/listings"),className:"rounded-full border border-transparent hover:border-sketch/70",children:[d.jsx(SA,{className:"h-5 w-5 text-sketch-blue"}),d.jsx("span",{className:"sr-only",children:"Back to listings"})]}),d.jsx("p",{className:"hidden text-sm text-muted-foreground sm:block",children:"Browse more community couches"})]})}),d.jsxs("div",{className:"mx-auto max-w-6xl space-y-10 px-4 py-8",children:[d.jsx("section",{className:"overflow-hidden rounded-[32px] border-2 border-sketch bg-white shadow-[0_25px_80px_rgba(30,64,175,0.12)]",children:d.jsxs("div",{className:"relative h-[260px] sm:h-[360px]",children:[d.jsx("img",{src:Yn,alt:Z.title,className:"h-full w-full object-cover"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/75 via-black/10 to-transparent"}),si&&d.jsxs(d.Fragment,{children:[d.jsxs("button",{type:"button",onClick:ss,className:"absolute left-4 top-1/2 hidden -translate-y-1/2 rounded-full border border-white/50 bg-white/70 p-2 text-slate-700 shadow-md transition hover:bg-white sm:flex",children:[d.jsx("span",{className:"sr-only",children:"Previous photo"}),d.jsx(RC,{className:"h-4 w-4"})]}),d.jsxs("button",{type:"button",onClick:Tn,className:"absolute right-4 top-1/2 hidden -translate-y-1/2 rounded-full border border-white/50 bg-white/70 p-2 text-slate-700 shadow-md transition hover:bg-white sm:flex",children:[d.jsx("span",{className:"sr-only",children:"Next photo"}),d.jsx(c0,{className:"h-4 w-4"})]}),d.jsxs("div",{className:"absolute bottom-4 left-1/2 flex -translate-x-1/2 gap-2 rounded-full bg-black/40 px-3 py-1 text-xs font-medium text-white",children:[d.jsxs("span",{children:["Photo ",Q+1]}),d.jsxs("span",{className:"opacity-70",children:["/ ",Rt.length]})]})]}),d.jsx("div",{className:"absolute right-5 top-5 flex gap-2",children:d.jsxs("button",{type:"button",onClick:lo,disabled:q||j,className:`rounded-full border border-white/50 bg-black/30 p-3 text-white backdrop-blur transition hover:bg-black/50 ${V?"text-rose-400":""}`,children:[d.jsx(Oh,{className:`h-5 w-5 ${V?"fill-rose-400":""}`}),d.jsx("span",{className:"sr-only",children:V?"Remove from wishlist":"Save to wishlist"})]})}),d.jsxs("div",{className:"absolute inset-x-0 bottom-0 space-y-6 px-6 pb-6 pt-10 text-white sm:px-10",children:[d.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/70",children:"Community stay"}),d.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:Z.title})]}),d.jsxs("div",{className:"text-4xl font-bold",children:[Z.price,d.jsx("span",{className:"ml-1 text-sm font-normal text-white/80",children:"/night"})]})]}),d.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-white/40 bg-white/10 px-4 py-1.5 font-medium backdrop-blur",children:[d.jsx(u0,{className:"h-4 w-4"}),d.jsxs("span",{className:"flex items-center gap-2",children:[rt,jt("light")]})]}),Ut&&d.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-white/40 bg-white/10 px-4 py-1.5 font-medium backdrop-blur",children:[d.jsx(TA,{className:"h-4 w-4"}),"Hosted by ",Ut]})]})]})]})}),d.jsxs("div",{className:"grid gap-8 lg:grid-cols-[1.7fr,1fr]",children:[d.jsxs("section",{className:"space-y-6",children:[d.jsxs("div",{className:"space-y-6 rounded-[28px] border-2 border-sketch bg-white/95 p-6 shadow-sm",children:[d.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs(DT,{className:"h-14 w-14 border border-sketch/30",children:[d.jsx(FT,{src:ur??void 0,alt:`${Ut} profile photo`,className:"h-full w-full object-cover"}),d.jsx($T,{className:"bg-sketch-blue/10 text-xl font-semibold text-sketch-blue",children:Jt})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Host"}),d.jsx("p",{className:"text-xl font-semibold text-sketch-dark",children:Ut}),rs&&d.jsx("p",{className:"text-sm text-muted-foreground",children:rs})]})]})}),d.jsxs("div",{className:"space-y-1 text-sm",children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Location"}),d.jsxs("p",{className:"text-base font-semibold text-sketch-dark",children:[rt,jt("dark")]}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Exact address shared after booking"})]}),d.jsxs("div",{className:"rounded-2xl border border-dashed border-sketch/60 p-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Price"}),d.jsx("p",{className:"text-lg font-semibold text-sketch-dark",children:Z.price}),d.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Per night"})]}),(st||en||dr)&&d.jsxs("div",{className:"rounded-2xl border border-dashed border-sketch/60 p-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Student profile"}),d.jsx("p",{className:"text-lg font-semibold text-sketch-dark",children:st??"University not shared yet"}),d.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:[en??"Program details coming soon",dr&&`  ${dr}`,Mr&&`  ${Mr}`]})]})]}),d.jsxs("div",{className:"rounded-[28px] border-2 border-sketch bg-white p-6 space-y-3",children:[d.jsx("h3",{className:"text-lg font-semibold text-sketch-dark",children:"About this couch"}),d.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:Z.description})]})]}),d.jsxs("section",{className:"space-y-6",children:[d.jsxs("div",{className:"space-y-5 rounded-[28px] border-2 border-sketch bg-white p-6 shadow-lg shadow-sketch-blue/5",children:[d.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Request a stay"}),d.jsx("h3",{className:"text-2xl font-semibold text-sketch-dark",children:"Plan your visit"})]}),d.jsx("p",{className:"text-sm text-muted-foreground",children:Pe&&fe?`${z} night${z===1?"":"s"}`:"Flexible"})]}),d.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[d.jsx("p",{children:"Select a start and end date for your stay."}),fe&&d.jsx("button",{type:"button",onClick:Zn,className:"text-xs font-medium uppercase tracking-wide text-sketch-blue hover:underline",children:"Clear"})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("div",{className:"sm:hidden",children:d.jsxs(jk,{children:[d.jsx(Rk,{asChild:!0,children:d.jsx(Me,{variant:"outline",className:"w-full justify-between text-left font-normal",children:d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsx(l0,{className:"h-4 w-4"}),Xt]})})}),d.jsx(B0,{align:"start",className:"p-0",children:d.jsx(Yh,{initialFocus:!0,mode:"range",numberOfMonths:1,selected:c,onSelect:h,disabled:Ee=>e1(Ee,re)})})]})}),d.jsx("div",{className:"hidden rounded-2xl border border-dashed border-sketch/60 bg-muted/40 p-3 sm:block",children:d.jsx(Yh,{initialFocus:!0,mode:"range",numberOfMonths:2,selected:c,onSelect:h,disabled:Ee=>e1(Ee,re)})})]}),d.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[d.jsxs("div",{className:"rounded-2xl border border-dashed border-sketch/60 p-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Check-in"}),d.jsx("p",{className:"text-base font-semibold text-sketch-dark",children:cr})]}),d.jsxs("div",{className:"rounded-2xl border border-dashed border-sketch/60 p-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Check-out"}),d.jsx("p",{className:"text-base font-semibold text-sketch-dark",children:ns})]}),d.jsxs("div",{className:"rounded-2xl border border-dashed border-sketch/60 p-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Nights"}),d.jsx("p",{className:"text-3xl font-semibold text-sketch-dark",children:Nn})]})]}),fe&&Pe&&d.jsxs("div",{className:"rounded-2xl bg-muted/40 px-4 py-2 text-sm text-muted-foreground",children:["You're requesting ",z," night",z===1?"":"s"," from ",Je(c.from,"MMM d")," to ",Je(c.to,"MMM d"),"."]}),fe&&!Pe&&d.jsx("div",{className:"rounded-2xl border border-destructive/40 bg-destructive/10 px-4 py-2 text-sm text-destructive",children:"The selected dates are outside the host's availability."}),d.jsx(Me,{className:"w-full rounded-full text-base font-semibold",size:"lg",onClick:Vt,disabled:!Pe||f,children:f?"Sending request...":"Request booking"})]}),d.jsxs("section",{className:"space-y-4 rounded-[28px] border-2 border-sketch bg-white p-6",children:[d.jsxs("header",{className:"space-y-1",children:[d.jsxs("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:["Chat with ",Ut]}),d.jsx("h3",{className:"text-xl font-semibold text-sketch-dark",children:"Coordinate details"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Start a direct conversation with the host to make sure the stay fits what you need."})]}),!(_!=null&&_.hostId)&&d.jsx("p",{className:"text-sm text-muted-foreground",children:"Messaging is unavailable for this listing."}),an&&d.jsx("p",{className:"text-sm text-muted-foreground",children:"You are viewing your own listing. Guests will be able to message you here."}),Ts&&d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"h-64 space-y-3 overflow-y-auto rounded-2xl border border-dashed border-sketch/60 bg-muted/40 p-3",children:[A&&d.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading conversation"}),!A&&R.length===0&&d.jsx("p",{className:"text-sm text-muted-foreground",children:"No messages yet. Say hello!"}),R.map(Ee=>d.jsxs("div",{className:`max-w-[80%] rounded-2xl px-3 py-2 text-sm shadow-sm ${Ee.sender_id===i.id?"ml-auto bg-primary text-primary-foreground":"mr-auto bg-card"}`,children:[d.jsx("p",{className:"whitespace-pre-line break-words",children:Ee.content}),d.jsx("p",{className:"mt-1 text-[11px] opacity-70",children:Je(new Date(Ee.created_at),"MMM d, yyyy  h:mm a")})]},Ee.id))]}),d.jsxs("form",{onSubmit:Gt,className:"space-y-2",children:[d.jsx(Rl,{value:H,onChange:Ee=>{U(Ee.target.value),G&&X(null)},placeholder:"Write a message to the host",rows:3}),G&&d.jsx("p",{className:"text-sm text-destructive",children:G}),d.jsx(Me,{type:"submit",disabled:M||!H.trim(),children:M?"Sending":"Send message"})]})]}),!(i!=null&&i.id)&&(_==null?void 0:_.hostId)&&!an&&d.jsx("p",{className:"text-sm text-destructive",children:"Sign in to start a conversation with this host."})]})]})]})]})]})},iw=g.forwardRef(({className:e,...t},n)=>d.jsx("div",{ref:n,className:Te("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));iw.displayName="Card";const HT=g.forwardRef(({className:e,...t},n)=>d.jsx("div",{ref:n,className:Te("flex flex-col space-y-1.5 p-6",e),...t}));HT.displayName="CardHeader";const ow=g.forwardRef(({className:e,...t},n)=>d.jsx("h3",{ref:n,className:Te("text-2xl font-semibold leading-none tracking-tight",e),...t}));ow.displayName="CardTitle";const aw=g.forwardRef(({className:e,...t},n)=>d.jsx("p",{ref:n,className:Te("text-sm text-muted-foreground",e),...t}));aw.displayName="CardDescription";const VT=g.forwardRef(({className:e,...t},n)=>d.jsx("div",{ref:n,className:Te("p-6 pt-0",e),...t}));VT.displayName="CardContent";const z8=g.forwardRef(({className:e,...t},n)=>d.jsx("div",{ref:n,className:Te("flex items-center p-6 pt-0",e),...t}));z8.displayName="CardFooter";var Jm="rovingFocusGroup.onEntryFocus",B8={bubbles:!1,cancelable:!0},zu="RovingFocusGroup",[ey,GT,W8]=Of(zu),[H8,pp]=Vn(zu,[W8]),[V8,G8]=H8(zu),qT=g.forwardRef((e,t)=>d.jsx(ey.Provider,{scope:e.__scopeRovingFocusGroup,children:d.jsx(ey.Slot,{scope:e.__scopeRovingFocusGroup,children:d.jsx(q8,{...e,ref:t})})}));qT.displayName=zu;var q8=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...m}=e,v=g.useRef(null),y=Ue(t,v),S=Uu(i),[x,b]=Yi({prop:a,defaultProp:l??null,onChange:c,caller:zu}),[E,_]=g.useState(!1),C=Tt(h),k=GT(n),T=g.useRef(!1),[R,O]=g.useState(0);return g.useEffect(()=>{const A=v.current;if(A)return A.addEventListener(Jm,C),()=>A.removeEventListener(Jm,C)},[C]),d.jsx(V8,{scope:n,orientation:r,dir:S,loop:s,currentTabStopId:x,onItemFocus:g.useCallback(A=>b(A),[b]),onItemShiftTab:g.useCallback(()=>_(!0),[]),onFocusableItemAdd:g.useCallback(()=>O(A=>A+1),[]),onFocusableItemRemove:g.useCallback(()=>O(A=>A-1),[]),children:d.jsx(Ce.div,{tabIndex:E||R===0?-1:0,"data-orientation":r,...m,ref:y,style:{outline:"none",...e.style},onMouseDown:ue(e.onMouseDown,()=>{T.current=!0}),onFocus:ue(e.onFocus,A=>{const W=!T.current;if(A.target===A.currentTarget&&W&&!E){const G=new CustomEvent(Jm,B8);if(A.currentTarget.dispatchEvent(G),!G.defaultPrevented){const X=k().filter(V=>V.focusable),H=X.find(V=>V.active),U=X.find(V=>V.id===x),ee=[H,U,...X].filter(Boolean).map(V=>V.ref.current);KT(ee,f)}}T.current=!1}),onBlur:ue(e.onBlur,()=>_(!1))})})}),YT="RovingFocusGroupItem",ZT=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...l}=e,c=bs(),h=i||c,f=G8(YT,n),m=f.currentTabStopId===h,v=GT(n),{onFocusableItemAdd:y,onFocusableItemRemove:S,currentTabStopId:x}=f;return g.useEffect(()=>{if(r)return y(),()=>S()},[r,y,S]),d.jsx(ey.ItemSlot,{scope:n,id:h,focusable:r,active:s,children:d.jsx(Ce.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:ue(e.onMouseDown,b=>{r?f.onItemFocus(h):b.preventDefault()}),onFocus:ue(e.onFocus,()=>f.onItemFocus(h)),onKeyDown:ue(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){f.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const E=K8(b,f.orientation,f.dir);if(E!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let C=v().filter(k=>k.focusable).map(k=>k.ref.current);if(E==="last")C.reverse();else if(E==="prev"||E==="next"){E==="prev"&&C.reverse();const k=C.indexOf(b.currentTarget);C=f.loop?Q8(C,k+1):C.slice(k+1)}setTimeout(()=>KT(C))}}),children:typeof a=="function"?a({isCurrentTabStop:m,hasTabStop:x!=null}):a})})});ZT.displayName=YT;var Y8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Z8(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function K8(e,t,n){const r=Z8(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Y8[r]}function KT(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Q8(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var QT=qT,XT=ZT,lw="Radio",[X8,JT]=Vn(lw),[J8,eH]=X8(lw),ej=g.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:i,disabled:a,value:l="on",onCheck:c,form:h,...f}=e,[m,v]=g.useState(null),y=Ue(t,b=>v(b)),S=g.useRef(!1),x=m?h||!!m.closest("form"):!0;return d.jsxs(J8,{scope:n,checked:s,disabled:a,children:[d.jsx(Ce.button,{type:"button",role:"radio","aria-checked":s,"data-state":sj(s),"data-disabled":a?"":void 0,disabled:a,value:l,...f,ref:y,onClick:ue(e.onClick,b=>{s||c==null||c(),x&&(S.current=b.isPropagationStopped(),S.current||b.stopPropagation())})}),x&&d.jsx(rj,{control:m,bubbles:!S.current,name:r,value:l,checked:s,required:i,disabled:a,form:h,style:{transform:"translateX(-100%)"}})]})});ej.displayName=lw;var tj="RadioIndicator",nj=g.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,i=eH(tj,n);return d.jsx(on,{present:r||i.checked,children:d.jsx(Ce.span,{"data-state":sj(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})})});nj.displayName=tj;var tH="RadioBubbleInput",rj=g.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},i)=>{const a=g.useRef(null),l=Ue(a,i),c=hN(n),h=nP(t);return g.useEffect(()=>{const f=a.current;if(!f)return;const m=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&y){const S=new Event("click",{bubbles:r});y.call(f,n),f.dispatchEvent(S)}},[c,n,r]),d.jsx(Ce.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});rj.displayName=tH;function sj(e){return e?"checked":"unchecked"}var nH=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],mp="RadioGroup",[rH,Cq]=Vn(mp,[pp,JT]),ij=pp(),oj=JT(),[sH,iH]=rH(mp),aj=g.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:i,required:a=!1,disabled:l=!1,orientation:c,dir:h,loop:f=!0,onValueChange:m,...v}=e,y=ij(n),S=Uu(h),[x,b]=Yi({prop:i,defaultProp:s??null,onChange:m,caller:mp});return d.jsx(sH,{scope:n,name:r,required:a,disabled:l,value:x,onValueChange:b,children:d.jsx(QT,{asChild:!0,...y,orientation:c,dir:S,loop:f,children:d.jsx(Ce.div,{role:"radiogroup","aria-required":a,"aria-orientation":c,"data-disabled":l?"":void 0,dir:S,...v,ref:t})})})});aj.displayName=mp;var lj="RadioGroupItem",cj=g.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,i=iH(lj,n),a=i.disabled||r,l=ij(n),c=oj(n),h=g.useRef(null),f=Ue(t,h),m=i.value===s.value,v=g.useRef(!1);return g.useEffect(()=>{const y=x=>{nH.includes(x.key)&&(v.current=!0)},S=()=>v.current=!1;return document.addEventListener("keydown",y),document.addEventListener("keyup",S),()=>{document.removeEventListener("keydown",y),document.removeEventListener("keyup",S)}},[]),d.jsx(XT,{asChild:!0,...l,focusable:!a,active:m,children:d.jsx(ej,{disabled:a,required:i.required,checked:m,...c,...s,name:i.name,ref:f,onCheck:()=>i.onValueChange(s.value),onKeyDown:ue(y=>{y.key==="Enter"&&y.preventDefault()}),onFocus:ue(s.onFocus,()=>{var y;v.current&&((y=h.current)==null||y.click())})})})});cj.displayName=lj;var oH="RadioGroupIndicator",uj=g.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=oj(n);return d.jsx(nj,{...s,...r,ref:t})});uj.displayName=oH;var dj=aj,hj=cj,aH=uj;const cw=g.forwardRef(({className:e,...t},n)=>d.jsx(dj,{className:Te("grid gap-2",e),...t,ref:n}));cw.displayName=dj.displayName;const of=g.forwardRef(({className:e,...t},n)=>d.jsx(hj,{ref:n,className:Te("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:d.jsx(aH,{className:"flex items-center justify-center",children:d.jsx(MC,{className:"h-2.5 w-2.5 fill-current text-current"})})}));of.displayName=hj.displayName;const fj=g.createContext(void 0),uw=()=>{const e=g.useContext(fj);if(!e)throw new Error("useSession must be used within a SessionProvider");return e},pj=e=>({id:e.id,email:e.email,full_name:e.full_name,user_role:e.user_role??"renter",avatar_url:e.avatar_url,bio:e.bio,student_id_url:e.student_id_url,university:e.university,program_name:e.program_name,program_year:e.program_year,program_type:e.program_type,created_at:e.created_at,updated_at:e.updated_at}),mj=async e=>{const{data:t,error:n}=await be.from("user_profiles").select("*").eq("id",e).maybeSingle();if(n)throw n;return t?pj(t):null},dw=async e=>{const t={id:e.id,email:e.email,full_name:e.full_name??null,user_role:e.user_role??"renter",avatar_url:e.avatar_url??null,bio:e.bio??null,student_id_url:e.student_id_url??null,university:e.university??null,program_name:e.program_name??null,program_year:e.program_year??null,program_type:e.program_type??null,updated_at:new Date().toISOString()},{data:n,error:r}=await be.from("user_profiles").upsert(t,{onConflict:"id"}).select("*").single();if(r)throw r;return pj(n)};function $c(e){let t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function ty(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function lH(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function t1(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function n1(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function cH(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function uH(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function eg(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function dH(e,t){let n=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(n*n+r*r+s*s)}function hH(e,t){let n=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return n*n+r*r+s*s}function r1(e){let t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function fH(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function pH(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function ny(e,t){let n=t[0],r=t[1],s=t[2],i=n*n+r*r+s*s;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function gj(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function s1(e,t,n){let r=t[0],s=t[1],i=t[2],a=n[0],l=n[1],c=n[2];return e[0]=s*c-i*l,e[1]=i*a-r*c,e[2]=r*l-s*a,e}function mH(e,t,n,r){let s=t[0],i=t[1],a=t[2];return e[0]=s+r*(n[0]-s),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e}function gH(e,t,n,r,s){const i=Math.exp(-r*s);let a=t[0],l=t[1],c=t[2];return e[0]=n[0]+(a-n[0])*i,e[1]=n[1]+(l-n[1])*i,e[2]=n[2]+(c-n[2])*i,e}function vH(e,t,n){let r=t[0],s=t[1],i=t[2],a=n[3]*r+n[7]*s+n[11]*i+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*s+n[8]*i+n[12])/a,e[1]=(n[1]*r+n[5]*s+n[9]*i+n[13])/a,e[2]=(n[2]*r+n[6]*s+n[10]*i+n[14])/a,e}function yH(e,t,n){let r=t[0],s=t[1],i=t[2],a=n[3]*r+n[7]*s+n[11]*i+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*s+n[8]*i)/a,e[1]=(n[1]*r+n[5]*s+n[9]*i)/a,e[2]=(n[2]*r+n[6]*s+n[10]*i)/a,e}function wH(e,t,n){let r=t[0],s=t[1],i=t[2];return e[0]=r*n[0]+s*n[3]+i*n[6],e[1]=r*n[1]+s*n[4]+i*n[7],e[2]=r*n[2]+s*n[5]+i*n[8],e}function xH(e,t,n){let r=t[0],s=t[1],i=t[2],a=n[0],l=n[1],c=n[2],h=n[3],f=l*i-c*s,m=c*r-a*i,v=a*s-l*r,y=l*v-c*m,S=c*f-a*v,x=a*m-l*f,b=h*2;return f*=b,m*=b,v*=b,y*=2,S*=2,x*=2,e[0]=r+f+y,e[1]=s+m+S,e[2]=i+v+x,e}const _H=function(){const e=[0,0,0],t=[0,0,0];return function(n,r){ty(e,n),ty(t,r),ny(e,e),ny(t,t);let s=gj(e,t);return s>1?0:s<-1?Math.PI:Math.acos(s)}}();function bH(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}class Gr extends Array{constructor(t=0,n=t,r=t){return super(t,n,r),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this[0]=t}set y(t){this[1]=t}set z(t){this[2]=t}set(t,n=t,r=t){return t.length?this.copy(t):(lH(this,t,n,r),this)}copy(t){return ty(this,t),this}add(t,n){return n?t1(this,t,n):t1(this,this,t),this}sub(t,n){return n?n1(this,t,n):n1(this,this,t),this}multiply(t){return t.length?cH(this,this,t):eg(this,this,t),this}divide(t){return t.length?uH(this,this,t):eg(this,this,1/t),this}inverse(t=this){return pH(this,t),this}len(){return $c(this)}distance(t){return t?dH(this,t):$c(this)}squaredLen(){return r1(this)}squaredDistance(t){return t?hH(this,t):r1(this)}negate(t=this){return fH(this,t),this}cross(t,n){return n?s1(this,t,n):s1(this,this,t),this}scale(t){return eg(this,this,t),this}normalize(){return ny(this,this),this}dot(t){return gj(this,t)}equals(t){return bH(this,t)}applyMatrix3(t){return wH(this,this,t),this}applyMatrix4(t){return vH(this,this,t),this}scaleRotateMatrix4(t){return yH(this,this,t),this}applyQuaternion(t){return xH(this,this,t),this}angle(t){return _H(this,t)}lerp(t,n){return mH(this,this,t,n),this}smoothLerp(t,n,r){return gH(this,this,t,n,r),this}clone(){return new Gr(this[0],this[1],this[2])}fromArray(t,n=0){return this[0]=t[n],this[1]=t[n+1],this[2]=t[n+2],this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t}transformDirection(t){const n=this[0],r=this[1],s=this[2];return this[0]=t[0]*n+t[4]*r+t[8]*s,this[1]=t[1]*n+t[5]*r+t[9]*s,this[2]=t[2]*n+t[6]*r+t[10]*s,this.normalize()}}const i1=new Gr;let SH=1,EH=1,o1=!1;class CH{constructor(t,n={}){t.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=t,this.attributes=n,this.id=SH++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let r in n)this.addAttribute(r,n[r])}addAttribute(t,n){if(this.attributes[t]=n,n.id=EH++,n.size=n.size||1,n.type=n.type||(n.data.constructor===Float32Array?this.gl.FLOAT:n.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),n.target=t==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,n.normalized=n.normalized||!1,n.stride=n.stride||0,n.offset=n.offset||0,n.count=n.count||(n.stride?n.data.byteLength/n.stride:n.data.length/n.size),n.divisor=n.instanced||0,n.needsUpdate=!1,n.usage=n.usage||this.gl.STATIC_DRAW,n.buffer||this.updateAttribute(n),n.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==n.count*n.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,n.count*n.divisor);this.instancedCount=n.count*n.divisor}else t==="index"?this.drawRange.count=n.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,n.count))}updateAttribute(t){const n=!t.buffer;n&&(t.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==t.buffer&&(this.gl.bindBuffer(t.target,t.buffer),this.glState.boundBuffer=t.buffer),n?this.gl.bufferData(t.target,t.data,t.usage):this.gl.bufferSubData(t.target,0,t.data),t.needsUpdate=!1}setIndex(t){this.addAttribute("index",t)}setDrawRange(t,n){this.drawRange.start=t,this.drawRange.count=n}setInstancedCount(t){this.instancedCount=t}createVAO(t){this.VAOs[t.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.bindAttributes(t)}bindAttributes(t){t.attributeLocations.forEach((n,{name:r,type:s})=>{if(!this.attributes[r]){console.warn(`active attribute ${r} not being supplied`);return}const i=this.attributes[r];this.gl.bindBuffer(i.target,i.buffer),this.glState.boundBuffer=i.buffer;let a=1;s===35674&&(a=2),s===35675&&(a=3),s===35676&&(a=4);const l=i.size/a,c=a===1?0:a*a*4,h=a===1?0:a*4;for(let f=0;f<a;f++)this.gl.vertexAttribPointer(n+f,l,i.type,i.normalized,i.stride+c,i.offset+f*h),this.gl.enableVertexAttribArray(n+f),this.gl.renderer.vertexAttribDivisor(n+f,i.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:t,mode:n=this.gl.TRIANGLES}){var s;this.gl.renderer.currentGeometry!==`${this.id}_${t.attributeOrder}`&&(this.VAOs[t.attributeOrder]||this.createVAO(t),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${t.attributeOrder}`),t.attributeLocations.forEach((i,{name:a})=>{const l=this.attributes[a];l.needsUpdate&&this.updateAttribute(l)});let r=2;((s=this.attributes.index)==null?void 0:s.type)===this.gl.UNSIGNED_INT&&(r=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*r,this.instancedCount):this.gl.renderer.drawArraysInstanced(n,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*r):this.gl.drawArrays(n,this.drawRange.start,this.drawRange.count)}getPosition(){const t=this.attributes.position;if(t.data)return t;if(!o1)return console.warn("No position buffer data found to compute bounds"),o1=!0}computeBoundingBox(t){t||(t=this.getPosition());const n=t.data,r=t.size;this.bounds||(this.bounds={min:new Gr,max:new Gr,center:new Gr,scale:new Gr,radius:1/0});const s=this.bounds.min,i=this.bounds.max,a=this.bounds.center,l=this.bounds.scale;s.set(1/0),i.set(-1/0);for(let c=0,h=n.length;c<h;c+=r){const f=n[c],m=n[c+1],v=n[c+2];s.x=Math.min(f,s.x),s.y=Math.min(m,s.y),s.z=Math.min(v,s.z),i.x=Math.max(f,i.x),i.y=Math.max(m,i.y),i.z=Math.max(v,i.z)}l.sub(i,s),a.add(s,i).divide(2)}computeBoundingSphere(t){t||(t=this.getPosition());const n=t.data,r=t.size;this.bounds||this.computeBoundingBox(t);let s=0;for(let i=0,a=n.length;i<a;i+=r)i1.fromArray(n,i),s=Math.max(s,this.bounds.center.squaredDistance(i1));this.bounds.radius=Math.sqrt(s)}remove(){for(let t in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[t]),delete this.VAOs[t];for(let t in this.attributes)this.gl.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]}}let PH=1;const a1={};class kH{constructor(t,{vertex:n,fragment:r,uniforms:s={},transparent:i=!1,cullFace:a=t.BACK,frontFace:l=t.CCW,depthTest:c=!0,depthWrite:h=!0,depthFunc:f=t.LEQUAL}={}){t.canvas||console.error("gl not passed as first argument to Program"),this.gl=t,this.uniforms=s,this.id=PH++,n||console.warn("vertex shader not supplied"),r||console.warn("fragment shader not supplied"),this.transparent=i,this.cullFace=a,this.frontFace=l,this.depthTest=c,this.depthWrite=h,this.depthFunc=f,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=t.createShader(t.VERTEX_SHADER),this.fragmentShader=t.createShader(t.FRAGMENT_SHADER),this.program=t.createProgram(),t.attachShader(this.program,this.vertexShader),t.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:n,fragment:r})}setShaders({vertex:t,fragment:n}){if(t&&(this.gl.shaderSource(this.vertexShader,t),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${l1(t)}`)),n&&(this.gl.shaderSource(this.fragmentShader,n),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${l1(n)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let r=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let a=0;a<r;a++){let l=this.gl.getActiveUniform(this.program,a);this.uniformLocations.set(l,this.gl.getUniformLocation(this.program,l.name));const c=l.name.match(/(\w+)/g);l.uniformName=c[0],l.nameComponents=c.slice(1)}this.attributeLocations=new Map;const s=[],i=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let a=0;a<i;a++){const l=this.gl.getActiveAttrib(this.program,a),c=this.gl.getAttribLocation(this.program,l.name);c!==-1&&(s[c]=l.name,this.attributeLocations.set(l,c))}this.attributeOrder=s.join("")}setBlendFunc(t,n,r,s){this.blendFunc.src=t,this.blendFunc.dst=n,this.blendFunc.srcAlpha=r,this.blendFunc.dstAlpha=s,t&&(this.transparent=!0)}setBlendEquation(t,n){this.blendEquation.modeRGB=t,this.blendEquation.modeAlpha=n}setStencilFunc(t,n,r){this.stencilRef=n,this.stencilFunc.func=t,this.stencilFunc.ref=n,this.stencilFunc.mask=r}setStencilOp(t,n,r){this.stencilOp.stencilFail=t,this.stencilOp.depthFail=n,this.stencilOp.depthPass=r}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:t=!1}={}){let n=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((s,i)=>{let a=this.uniforms[i.uniformName];for(const l of i.nameComponents){if(!a)break;if(l in a)a=a[l];else{if(Array.isArray(a.value))break;a=void 0;break}}if(!a)return c1(`Active uniform ${i.name} has not been supplied`);if(a&&a.value===void 0)return c1(`${i.name} uniform is missing a value parameter`);if(a.value.texture)return n=n+1,a.value.update(n),tg(this.gl,i.type,s,n);if(a.value.length&&a.value[0].texture){const l=[];return a.value.forEach(c=>{n=n+1,c.update(n),l.push(n)}),tg(this.gl,i.type,s,l)}tg(this.gl,i.type,s,a.value)}),this.applyState(),t&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function tg(e,t,n,r){r=r.length?NH(r):r;const s=e.renderer.state.uniformLocations.get(n);if(r.length)if(s===void 0||s.length!==r.length)e.renderer.state.uniformLocations.set(n,r.slice(0));else{if(TH(s,r))return;s.set?s.set(r):jH(s,r),e.renderer.state.uniformLocations.set(n,s)}else{if(s===r)return;e.renderer.state.uniformLocations.set(n,r)}switch(t){case 5126:return r.length?e.uniform1fv(n,r):e.uniform1f(n,r);case 35664:return e.uniform2fv(n,r);case 35665:return e.uniform3fv(n,r);case 35666:return e.uniform4fv(n,r);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return r.length?e.uniform1iv(n,r):e.uniform1i(n,r);case 35671:case 35667:return e.uniform2iv(n,r);case 35672:case 35668:return e.uniform3iv(n,r);case 35673:case 35669:return e.uniform4iv(n,r);case 35674:return e.uniformMatrix2fv(n,!1,r);case 35675:return e.uniformMatrix3fv(n,!1,r);case 35676:return e.uniformMatrix4fv(n,!1,r)}}function l1(e){let t=e.split(`
`);for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join(`
`)}function NH(e){const t=e.length,n=e[0].length;if(n===void 0)return e;const r=t*n;let s=a1[r];s||(a1[r]=s=new Float32Array(r));for(let i=0;i<t;i++)s.set(e[i],i*n);return s}function TH(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function jH(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t[n]}let ng=0;function c1(e){ng>100||(console.warn(e),ng++,ng>100&&console.warn("More than 100 program warnings - stopping logs."))}const rg=new Gr;let RH=1;class MH{constructor({canvas:t=document.createElement("canvas"),width:n=300,height:r=150,dpr:s=1,alpha:i=!1,depth:a=!0,stencil:l=!1,antialias:c=!1,premultipliedAlpha:h=!1,preserveDrawingBuffer:f=!1,powerPreference:m="default",autoClear:v=!0,webgl:y=2}={}){const S={alpha:i,depth:a,stencil:l,antialias:c,premultipliedAlpha:h,preserveDrawingBuffer:f,powerPreference:m};this.dpr=s,this.alpha=i,this.color=!0,this.depth=a,this.stencil=l,this.premultipliedAlpha=h,this.autoClear=v,this.id=RH++,y===2&&(this.gl=t.getContext("webgl2",S)),this.isWebgl2=!!this.gl,this.gl||(this.gl=t.getContext("webgl",S)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(n,r),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(t,n){this.width=t,this.height=n,this.gl.canvas.width=t*this.dpr,this.gl.canvas.height=n*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:t+"px",height:n+"px"})}setViewport(t,n,r=0,s=0){this.state.viewport.width===t&&this.state.viewport.height===n||(this.state.viewport.width=t,this.state.viewport.height=n,this.state.viewport.x=r,this.state.viewport.y=s,this.gl.viewport(r,s,t,n))}setScissor(t,n,r=0,s=0){this.gl.scissor(r,s,t,n)}enable(t){this.state[t]!==!0&&(this.gl.enable(t),this.state[t]=!0)}disable(t){this.state[t]!==!1&&(this.gl.disable(t),this.state[t]=!1)}setBlendFunc(t,n,r,s){this.state.blendFunc.src===t&&this.state.blendFunc.dst===n&&this.state.blendFunc.srcAlpha===r&&this.state.blendFunc.dstAlpha===s||(this.state.blendFunc.src=t,this.state.blendFunc.dst=n,this.state.blendFunc.srcAlpha=r,this.state.blendFunc.dstAlpha=s,r!==void 0?this.gl.blendFuncSeparate(t,n,r,s):this.gl.blendFunc(t,n))}setBlendEquation(t,n){t=t||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===t&&this.state.blendEquation.modeAlpha===n)&&(this.state.blendEquation.modeRGB=t,this.state.blendEquation.modeAlpha=n,n!==void 0?this.gl.blendEquationSeparate(t,n):this.gl.blendEquation(t))}setCullFace(t){this.state.cullFace!==t&&(this.state.cullFace=t,this.gl.cullFace(t))}setFrontFace(t){this.state.frontFace!==t&&(this.state.frontFace=t,this.gl.frontFace(t))}setDepthMask(t){this.state.depthMask!==t&&(this.state.depthMask=t,this.gl.depthMask(t))}setDepthFunc(t){this.state.depthFunc!==t&&(this.state.depthFunc=t,this.gl.depthFunc(t))}setStencilMask(t){this.state.stencilMask!==t&&(this.state.stencilMask=t,this.gl.stencilMask(t))}setStencilFunc(t,n,r){this.state.stencilFunc===t&&this.state.stencilRef===n&&this.state.stencilFuncMask===r||(this.state.stencilFunc=t||this.gl.ALWAYS,this.state.stencilRef=n||0,this.state.stencilFuncMask=r||0,this.gl.stencilFunc(t||this.gl.ALWAYS,n||0,r||0))}setStencilOp(t,n,r){this.state.stencilFail===t&&this.state.stencilDepthFail===n&&this.state.stencilDepthPass===r||(this.state.stencilFail=t,this.state.stencilDepthFail=n,this.state.stencilDepthPass=r,this.gl.stencilOp(t,n,r))}activeTexture(t){this.state.activeTextureUnit!==t&&(this.state.activeTextureUnit=t,this.gl.activeTexture(this.gl.TEXTURE0+t))}bindFramebuffer({target:t=this.gl.FRAMEBUFFER,buffer:n=null}={}){this.state.framebuffer!==n&&(this.state.framebuffer=n,this.gl.bindFramebuffer(t,n))}getExtension(t,n,r){return n&&this.gl[n]?this.gl[n].bind(this.gl):(this.extensions[t]||(this.extensions[t]=this.gl.getExtension(t)),n?this.extensions[t]?this.extensions[t][r].bind(this.extensions[t]):null:this.extensions[t])}sortOpaque(t,n){return t.renderOrder!==n.renderOrder?t.renderOrder-n.renderOrder:t.program.id!==n.program.id?t.program.id-n.program.id:t.zDepth!==n.zDepth?t.zDepth-n.zDepth:n.id-t.id}sortTransparent(t,n){return t.renderOrder!==n.renderOrder?t.renderOrder-n.renderOrder:t.zDepth!==n.zDepth?n.zDepth-t.zDepth:n.id-t.id}sortUI(t,n){return t.renderOrder!==n.renderOrder?t.renderOrder-n.renderOrder:t.program.id!==n.program.id?t.program.id-n.program.id:n.id-t.id}getRenderList({scene:t,camera:n,frustumCull:r,sort:s}){let i=[];if(n&&r&&n.updateFrustum(),t.traverse(a=>{if(!a.visible)return!0;a.draw&&(r&&a.frustumCulled&&n&&!n.frustumIntersectsMesh(a)||i.push(a))}),s){const a=[],l=[],c=[];i.forEach(h=>{h.program.transparent?h.program.depthTest?l.push(h):c.push(h):a.push(h),h.zDepth=0,!(h.renderOrder!==0||!h.program.depthTest||!n)&&(h.worldMatrix.getTranslation(rg),rg.applyMatrix4(n.projectionViewMatrix),h.zDepth=rg.z)}),a.sort(this.sortOpaque),l.sort(this.sortTransparent),c.sort(this.sortUI),i=a.concat(l,c)}return i}render({scene:t,camera:n,target:r=null,update:s=!0,sort:i=!0,frustumCull:a=!0,clear:l}){r===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(r),this.setViewport(r.width,r.height)),(l||this.autoClear&&l!==!1)&&(this.depth&&(!r||r.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!r||r.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),s&&t.updateMatrixWorld(),n&&n.updateMatrixWorld(),this.getRenderList({scene:t,camera:n,frustumCull:a,sort:i}).forEach(h=>{h.draw({camera:n})})}}function OH(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function IH(e,t,n,r,s){return e[0]=t,e[1]=n,e[2]=r,e[3]=s,e}function AH(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=n*n+r*r+s*s+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=s*a,e[3]=i*a,e}function LH(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function DH(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function FH(e,t,n){n=n*.5;let r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function u1(e,t,n){let r=t[0],s=t[1],i=t[2],a=t[3],l=n[0],c=n[1],h=n[2],f=n[3];return e[0]=r*f+a*l+s*h-i*c,e[1]=s*f+a*c+i*l-r*h,e[2]=i*f+a*h+r*c-s*l,e[3]=a*f-r*l-s*c-i*h,e}function $H(e,t,n){n*=.5;let r=t[0],s=t[1],i=t[2],a=t[3],l=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*l,e[1]=s*c+i*l,e[2]=i*c-s*l,e[3]=a*c-r*l,e}function UH(e,t,n){n*=.5;let r=t[0],s=t[1],i=t[2],a=t[3],l=Math.sin(n),c=Math.cos(n);return e[0]=r*c-i*l,e[1]=s*c+a*l,e[2]=i*c+r*l,e[3]=a*c-s*l,e}function zH(e,t,n){n*=.5;let r=t[0],s=t[1],i=t[2],a=t[3],l=Math.sin(n),c=Math.cos(n);return e[0]=r*c+s*l,e[1]=s*c-r*l,e[2]=i*c+a*l,e[3]=a*c-i*l,e}function BH(e,t,n,r){let s=t[0],i=t[1],a=t[2],l=t[3],c=n[0],h=n[1],f=n[2],m=n[3],v,y,S,x,b;return y=s*c+i*h+a*f+l*m,y<0&&(y=-y,c=-c,h=-h,f=-f,m=-m),1-y>1e-6?(v=Math.acos(y),S=Math.sin(v),x=Math.sin((1-r)*v)/S,b=Math.sin(r*v)/S):(x=1-r,b=r),e[0]=x*s+b*c,e[1]=x*i+b*h,e[2]=x*a+b*f,e[3]=x*l+b*m,e}function WH(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=n*n+r*r+s*s+i*i,l=a?1/a:0;return e[0]=-n*l,e[1]=-r*l,e[2]=-s*l,e[3]=i*l,e}function HH(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function VH(e,t){let n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{let s=0;t[4]>t[0]&&(s=1),t[8]>t[s*3+s]&&(s=2);let i=(s+1)%3,a=(s+2)%3;r=Math.sqrt(t[s*3+s]-t[i*3+i]-t[a*3+a]+1),e[s]=.5*r,r=.5/r,e[3]=(t[i*3+a]-t[a*3+i])*r,e[i]=(t[i*3+s]+t[s*3+i])*r,e[a]=(t[a*3+s]+t[s*3+a])*r}return e}function GH(e,t,n="YXZ"){let r=Math.sin(t[0]*.5),s=Math.cos(t[0]*.5),i=Math.sin(t[1]*.5),a=Math.cos(t[1]*.5),l=Math.sin(t[2]*.5),c=Math.cos(t[2]*.5);return n==="XYZ"?(e[0]=r*a*c+s*i*l,e[1]=s*i*c-r*a*l,e[2]=s*a*l+r*i*c,e[3]=s*a*c-r*i*l):n==="YXZ"?(e[0]=r*a*c+s*i*l,e[1]=s*i*c-r*a*l,e[2]=s*a*l-r*i*c,e[3]=s*a*c+r*i*l):n==="ZXY"?(e[0]=r*a*c-s*i*l,e[1]=s*i*c+r*a*l,e[2]=s*a*l+r*i*c,e[3]=s*a*c-r*i*l):n==="ZYX"?(e[0]=r*a*c-s*i*l,e[1]=s*i*c+r*a*l,e[2]=s*a*l-r*i*c,e[3]=s*a*c+r*i*l):n==="YZX"?(e[0]=r*a*c+s*i*l,e[1]=s*i*c+r*a*l,e[2]=s*a*l-r*i*c,e[3]=s*a*c-r*i*l):n==="XZY"&&(e[0]=r*a*c-s*i*l,e[1]=s*i*c-r*a*l,e[2]=s*a*l+r*i*c,e[3]=s*a*c+r*i*l),e}const qH=OH,YH=IH,ZH=LH,KH=AH;class QH extends Array{constructor(t=0,n=0,r=0,s=1){super(t,n,r,s),this.onChange=()=>{},this._target=this;const i=["0","1","2","3"];return new Proxy(this,{set(a,l){const c=Reflect.set(...arguments);return c&&i.includes(l)&&a.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(t){this._target[0]=t,this.onChange()}set y(t){this._target[1]=t,this.onChange()}set z(t){this._target[2]=t,this.onChange()}set w(t){this._target[3]=t,this.onChange()}identity(){return DH(this._target),this.onChange(),this}set(t,n,r,s){return t.length?this.copy(t):(YH(this._target,t,n,r,s),this.onChange(),this)}rotateX(t){return $H(this._target,this._target,t),this.onChange(),this}rotateY(t){return UH(this._target,this._target,t),this.onChange(),this}rotateZ(t){return zH(this._target,this._target,t),this.onChange(),this}inverse(t=this._target){return WH(this._target,t),this.onChange(),this}conjugate(t=this._target){return HH(this._target,t),this.onChange(),this}copy(t){return qH(this._target,t),this.onChange(),this}normalize(t=this._target){return KH(this._target,t),this.onChange(),this}multiply(t,n){return n?u1(this._target,t,n):u1(this._target,this._target,t),this.onChange(),this}dot(t){return ZH(this._target,t)}fromMatrix3(t){return VH(this._target,t),this.onChange(),this}fromEuler(t,n){return GH(this._target,t,t.order),n||this.onChange(),this}fromAxisAngle(t,n){return FH(this._target,t,n),this.onChange(),this}slerp(t,n){return BH(this._target,this._target,t,n),this.onChange(),this}fromArray(t,n=0){return this._target[0]=t[n],this._target[1]=t[n+1],this._target[2]=t[n+2],this._target[3]=t[n+3],this.onChange(),this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t[n+3]=this[3],t}}const XH=1e-6;function JH(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function e9(e,t,n,r,s,i,a,l,c,h,f,m,v,y,S,x,b){return e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i,e[5]=a,e[6]=l,e[7]=c,e[8]=h,e[9]=f,e[10]=m,e[11]=v,e[12]=y,e[13]=S,e[14]=x,e[15]=b,e}function t9(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function n9(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=t[9],v=t[10],y=t[11],S=t[12],x=t[13],b=t[14],E=t[15],_=n*l-r*a,C=n*c-s*a,k=n*h-i*a,T=r*c-s*l,R=r*h-i*l,O=s*h-i*c,A=f*x-m*S,W=f*b-v*S,G=f*E-y*S,X=m*b-v*x,H=m*E-y*x,U=v*E-y*b,M=_*U-C*H+k*X+T*G-R*W+O*A;return M?(M=1/M,e[0]=(l*U-c*H+h*X)*M,e[1]=(s*H-r*U-i*X)*M,e[2]=(x*O-b*R+E*T)*M,e[3]=(v*R-m*O-y*T)*M,e[4]=(c*G-a*U-h*W)*M,e[5]=(n*U-s*G+i*W)*M,e[6]=(b*k-S*O-E*C)*M,e[7]=(f*O-v*k+y*C)*M,e[8]=(a*H-l*G+h*A)*M,e[9]=(r*G-n*H-i*A)*M,e[10]=(S*R-x*k+E*_)*M,e[11]=(m*k-f*R-y*_)*M,e[12]=(l*W-a*X-c*A)*M,e[13]=(n*X-r*W+s*A)*M,e[14]=(x*C-S*T-b*_)*M,e[15]=(f*T-m*C+v*_)*M,e):null}function vj(e){let t=e[0],n=e[1],r=e[2],s=e[3],i=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=e[9],m=e[10],v=e[11],y=e[12],S=e[13],x=e[14],b=e[15],E=t*a-n*i,_=t*l-r*i,C=t*c-s*i,k=n*l-r*a,T=n*c-s*a,R=r*c-s*l,O=h*S-f*y,A=h*x-m*y,W=h*b-v*y,G=f*x-m*S,X=f*b-v*S,H=m*b-v*x;return E*H-_*X+C*G+k*W-T*A+R*O}function d1(e,t,n){let r=t[0],s=t[1],i=t[2],a=t[3],l=t[4],c=t[5],h=t[6],f=t[7],m=t[8],v=t[9],y=t[10],S=t[11],x=t[12],b=t[13],E=t[14],_=t[15],C=n[0],k=n[1],T=n[2],R=n[3];return e[0]=C*r+k*l+T*m+R*x,e[1]=C*s+k*c+T*v+R*b,e[2]=C*i+k*h+T*y+R*E,e[3]=C*a+k*f+T*S+R*_,C=n[4],k=n[5],T=n[6],R=n[7],e[4]=C*r+k*l+T*m+R*x,e[5]=C*s+k*c+T*v+R*b,e[6]=C*i+k*h+T*y+R*E,e[7]=C*a+k*f+T*S+R*_,C=n[8],k=n[9],T=n[10],R=n[11],e[8]=C*r+k*l+T*m+R*x,e[9]=C*s+k*c+T*v+R*b,e[10]=C*i+k*h+T*y+R*E,e[11]=C*a+k*f+T*S+R*_,C=n[12],k=n[13],T=n[14],R=n[15],e[12]=C*r+k*l+T*m+R*x,e[13]=C*s+k*c+T*v+R*b,e[14]=C*i+k*h+T*y+R*E,e[15]=C*a+k*f+T*S+R*_,e}function r9(e,t,n){let r=n[0],s=n[1],i=n[2],a,l,c,h,f,m,v,y,S,x,b,E;return t===e?(e[12]=t[0]*r+t[4]*s+t[8]*i+t[12],e[13]=t[1]*r+t[5]*s+t[9]*i+t[13],e[14]=t[2]*r+t[6]*s+t[10]*i+t[14],e[15]=t[3]*r+t[7]*s+t[11]*i+t[15]):(a=t[0],l=t[1],c=t[2],h=t[3],f=t[4],m=t[5],v=t[6],y=t[7],S=t[8],x=t[9],b=t[10],E=t[11],e[0]=a,e[1]=l,e[2]=c,e[3]=h,e[4]=f,e[5]=m,e[6]=v,e[7]=y,e[8]=S,e[9]=x,e[10]=b,e[11]=E,e[12]=a*r+f*s+S*i+t[12],e[13]=l*r+m*s+x*i+t[13],e[14]=c*r+v*s+b*i+t[14],e[15]=h*r+y*s+E*i+t[15]),e}function s9(e,t,n){let r=n[0],s=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function i9(e,t,n,r){let s=r[0],i=r[1],a=r[2],l=Math.hypot(s,i,a),c,h,f,m,v,y,S,x,b,E,_,C,k,T,R,O,A,W,G,X,H,U,M,ee;return Math.abs(l)<XH?null:(l=1/l,s*=l,i*=l,a*=l,c=Math.sin(n),h=Math.cos(n),f=1-h,m=t[0],v=t[1],y=t[2],S=t[3],x=t[4],b=t[5],E=t[6],_=t[7],C=t[8],k=t[9],T=t[10],R=t[11],O=s*s*f+h,A=i*s*f+a*c,W=a*s*f-i*c,G=s*i*f-a*c,X=i*i*f+h,H=a*i*f+s*c,U=s*a*f+i*c,M=i*a*f-s*c,ee=a*a*f+h,e[0]=m*O+x*A+C*W,e[1]=v*O+b*A+k*W,e[2]=y*O+E*A+T*W,e[3]=S*O+_*A+R*W,e[4]=m*G+x*X+C*H,e[5]=v*G+b*X+k*H,e[6]=y*G+E*X+T*H,e[7]=S*G+_*X+R*H,e[8]=m*U+x*M+C*ee,e[9]=v*U+b*M+k*ee,e[10]=y*U+E*M+T*ee,e[11]=S*U+_*M+R*ee,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function o9(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function yj(e,t){let n=t[0],r=t[1],s=t[2],i=t[4],a=t[5],l=t[6],c=t[8],h=t[9],f=t[10];return e[0]=Math.hypot(n,r,s),e[1]=Math.hypot(i,a,l),e[2]=Math.hypot(c,h,f),e}function a9(e){let t=e[0],n=e[1],r=e[2],s=e[4],i=e[5],a=e[6],l=e[8],c=e[9],h=e[10];const f=t*t+n*n+r*r,m=s*s+i*i+a*a,v=l*l+c*c+h*h;return Math.sqrt(Math.max(f,m,v))}const wj=function(){const e=[1,1,1];return function(t,n){let r=e;yj(r,n);let s=1/r[0],i=1/r[1],a=1/r[2],l=n[0]*s,c=n[1]*i,h=n[2]*a,f=n[4]*s,m=n[5]*i,v=n[6]*a,y=n[8]*s,S=n[9]*i,x=n[10]*a,b=l+m+x,E=0;return b>0?(E=Math.sqrt(b+1)*2,t[3]=.25*E,t[0]=(v-S)/E,t[1]=(y-h)/E,t[2]=(c-f)/E):l>m&&l>x?(E=Math.sqrt(1+l-m-x)*2,t[3]=(v-S)/E,t[0]=.25*E,t[1]=(c+f)/E,t[2]=(y+h)/E):m>x?(E=Math.sqrt(1+m-l-x)*2,t[3]=(y-h)/E,t[0]=(c+f)/E,t[1]=.25*E,t[2]=(v+S)/E):(E=Math.sqrt(1+x-l-m)*2,t[3]=(c-f)/E,t[0]=(y+h)/E,t[1]=(v+S)/E,t[2]=.25*E),t}}();function l9(e,t,n,r){let s=$c([e[0],e[1],e[2]]);const i=$c([e[4],e[5],e[6]]),a=$c([e[8],e[9],e[10]]);vj(e)<0&&(s=-s),n[0]=e[12],n[1]=e[13],n[2]=e[14];const c=e.slice(),h=1/s,f=1/i,m=1/a;c[0]*=h,c[1]*=h,c[2]*=h,c[4]*=f,c[5]*=f,c[6]*=f,c[8]*=m,c[9]*=m,c[10]*=m,wj(t,c),r[0]=s,r[1]=i,r[2]=a}function c9(e,t,n,r){const s=e,i=t[0],a=t[1],l=t[2],c=t[3],h=i+i,f=a+a,m=l+l,v=i*h,y=i*f,S=i*m,x=a*f,b=a*m,E=l*m,_=c*h,C=c*f,k=c*m,T=r[0],R=r[1],O=r[2];return s[0]=(1-(x+E))*T,s[1]=(y+k)*T,s[2]=(S-C)*T,s[3]=0,s[4]=(y-k)*R,s[5]=(1-(v+E))*R,s[6]=(b+_)*R,s[7]=0,s[8]=(S+C)*O,s[9]=(b-_)*O,s[10]=(1-(v+x))*O,s[11]=0,s[12]=n[0],s[13]=n[1],s[14]=n[2],s[15]=1,s}function u9(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=n+n,l=r+r,c=s+s,h=n*a,f=r*a,m=r*l,v=s*a,y=s*l,S=s*c,x=i*a,b=i*l,E=i*c;return e[0]=1-m-S,e[1]=f+E,e[2]=v-b,e[3]=0,e[4]=f-E,e[5]=1-h-S,e[6]=y+x,e[7]=0,e[8]=v+b,e[9]=y-x,e[10]=1-h-m,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function d9(e,t,n,r,s){let i=1/Math.tan(t/2),a=1/(r-s);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(s+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*s*r*a,e[15]=0,e}function h9(e,t,n,r,s,i,a){let l=1/(t-n),c=1/(r-s),h=1/(i-a);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*h,e[11]=0,e[12]=(t+n)*l,e[13]=(s+r)*c,e[14]=(a+i)*h,e[15]=1,e}function f9(e,t,n,r){let s=t[0],i=t[1],a=t[2],l=r[0],c=r[1],h=r[2],f=s-n[0],m=i-n[1],v=a-n[2],y=f*f+m*m+v*v;y===0?v=1:(y=1/Math.sqrt(y),f*=y,m*=y,v*=y);let S=c*v-h*m,x=h*f-l*v,b=l*m-c*f;return y=S*S+x*x+b*b,y===0&&(h?l+=1e-6:c?h+=1e-6:c+=1e-6,S=c*v-h*m,x=h*f-l*v,b=l*m-c*f,y=S*S+x*x+b*b),y=1/Math.sqrt(y),S*=y,x*=y,b*=y,e[0]=S,e[1]=x,e[2]=b,e[3]=0,e[4]=m*b-v*x,e[5]=v*S-f*b,e[6]=f*x-m*S,e[7]=0,e[8]=f,e[9]=m,e[10]=v,e[11]=0,e[12]=s,e[13]=i,e[14]=a,e[15]=1,e}function h1(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function f1(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function p9(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}class af extends Array{constructor(t=1,n=0,r=0,s=0,i=0,a=1,l=0,c=0,h=0,f=0,m=1,v=0,y=0,S=0,x=0,b=1){return super(t,n,r,s,i,a,l,c,h,f,m,v,y,S,x,b),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(t){this[12]=t}set y(t){this[13]=t}set z(t){this[14]=t}set w(t){this[15]=t}set(t,n,r,s,i,a,l,c,h,f,m,v,y,S,x,b){return t.length?this.copy(t):(e9(this,t,n,r,s,i,a,l,c,h,f,m,v,y,S,x,b),this)}translate(t,n=this){return r9(this,n,t),this}rotate(t,n,r=this){return i9(this,r,t,n),this}scale(t,n=this){return s9(this,n,typeof t=="number"?[t,t,t]:t),this}add(t,n){return n?h1(this,t,n):h1(this,this,t),this}sub(t,n){return n?f1(this,t,n):f1(this,this,t),this}multiply(t,n){return t.length?n?d1(this,t,n):d1(this,this,t):p9(this,this,t),this}identity(){return t9(this),this}copy(t){return JH(this,t),this}fromPerspective({fov:t,aspect:n,near:r,far:s}={}){return d9(this,t,n,r,s),this}fromOrthogonal({left:t,right:n,bottom:r,top:s,near:i,far:a}){return h9(this,t,n,r,s,i,a),this}fromQuaternion(t){return u9(this,t),this}setPosition(t){return this.x=t[0],this.y=t[1],this.z=t[2],this}inverse(t=this){return n9(this,t),this}compose(t,n,r){return c9(this,t,n,r),this}decompose(t,n,r){return l9(this,t,n,r),this}getRotation(t){return wj(t,this),this}getTranslation(t){return o9(t,this),this}getScaling(t){return yj(t,this),this}getMaxScaleOnAxis(){return a9(this)}lookAt(t,n,r){return f9(this,t,n,r),this}determinant(){return vj(this)}fromArray(t,n=0){return this[0]=t[n],this[1]=t[n+1],this[2]=t[n+2],this[3]=t[n+3],this[4]=t[n+4],this[5]=t[n+5],this[6]=t[n+6],this[7]=t[n+7],this[8]=t[n+8],this[9]=t[n+9],this[10]=t[n+10],this[11]=t[n+11],this[12]=t[n+12],this[13]=t[n+13],this[14]=t[n+14],this[15]=t[n+15],this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t[n+3]=this[3],t[n+4]=this[4],t[n+5]=this[5],t[n+6]=this[6],t[n+7]=this[7],t[n+8]=this[8],t[n+9]=this[9],t[n+10]=this[10],t[n+11]=this[11],t[n+12]=this[12],t[n+13]=this[13],t[n+14]=this[14],t[n+15]=this[15],t}}function m9(e,t,n="YXZ"){return n==="XYZ"?(e[1]=Math.asin(Math.min(Math.max(t[8],-1),1)),Math.abs(t[8])<.99999?(e[0]=Math.atan2(-t[9],t[10]),e[2]=Math.atan2(-t[4],t[0])):(e[0]=Math.atan2(t[6],t[5]),e[2]=0)):n==="YXZ"?(e[0]=Math.asin(-Math.min(Math.max(t[9],-1),1)),Math.abs(t[9])<.99999?(e[1]=Math.atan2(t[8],t[10]),e[2]=Math.atan2(t[1],t[5])):(e[1]=Math.atan2(-t[2],t[0]),e[2]=0)):n==="ZXY"?(e[0]=Math.asin(Math.min(Math.max(t[6],-1),1)),Math.abs(t[6])<.99999?(e[1]=Math.atan2(-t[2],t[10]),e[2]=Math.atan2(-t[4],t[5])):(e[1]=0,e[2]=Math.atan2(t[1],t[0]))):n==="ZYX"?(e[1]=Math.asin(-Math.min(Math.max(t[2],-1),1)),Math.abs(t[2])<.99999?(e[0]=Math.atan2(t[6],t[10]),e[2]=Math.atan2(t[1],t[0])):(e[0]=0,e[2]=Math.atan2(-t[4],t[5]))):n==="YZX"?(e[2]=Math.asin(Math.min(Math.max(t[1],-1),1)),Math.abs(t[1])<.99999?(e[0]=Math.atan2(-t[9],t[5]),e[1]=Math.atan2(-t[2],t[0])):(e[0]=0,e[1]=Math.atan2(t[8],t[10]))):n==="XZY"&&(e[2]=Math.asin(-Math.min(Math.max(t[4],-1),1)),Math.abs(t[4])<.99999?(e[0]=Math.atan2(t[6],t[5]),e[1]=Math.atan2(t[8],t[0])):(e[0]=Math.atan2(-t[9],t[10]),e[1]=0)),e}const p1=new af;class g9 extends Array{constructor(t=0,n=t,r=t,s="YXZ"){super(t,n,r),this.order=s,this.onChange=()=>{},this._target=this;const i=["0","1","2"];return new Proxy(this,{set(a,l){const c=Reflect.set(...arguments);return c&&i.includes(l)&&a.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this._target[0]=t,this.onChange()}set y(t){this._target[1]=t,this.onChange()}set z(t){this._target[2]=t,this.onChange()}set(t,n=t,r=t){return t.length?this.copy(t):(this._target[0]=t,this._target[1]=n,this._target[2]=r,this.onChange(),this)}copy(t){return this._target[0]=t[0],this._target[1]=t[1],this._target[2]=t[2],this.onChange(),this}reorder(t){return this._target.order=t,this.onChange(),this}fromRotationMatrix(t,n=this.order){return m9(this._target,t,n),this.onChange(),this}fromQuaternion(t,n=this.order,r){return p1.fromQuaternion(t),this._target.fromRotationMatrix(p1,n),r||this.onChange(),this}fromArray(t,n=0){return this._target[0]=t[n],this._target[1]=t[n+1],this._target[2]=t[n+2],this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t}}class v9{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new af,this.worldMatrix=new af,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new Gr,this.quaternion=new QH,this.scale=new Gr(1),this.rotation=new g9,this.up=new Gr(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(t,n=!0){this.parent&&t!==this.parent&&this.parent.removeChild(this,!1),this.parent=t,n&&t&&t.addChild(this,!1)}addChild(t,n=!0){~this.children.indexOf(t)||this.children.push(t),n&&t.setParent(this,!1)}removeChild(t,n=!0){~this.children.indexOf(t)&&this.children.splice(this.children.indexOf(t),1),n&&t.setParent(null,!1)}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||t)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,t=!0);for(let n=0,r=this.children.length;n<r;n++)this.children[n].updateMatrixWorld(t)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(t){if(!t(this))for(let n=0,r=this.children.length;n<r;n++)this.children[n].traverse(t)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(t,n=!1){n?this.matrix.lookAt(this.position,t,this.up):this.matrix.lookAt(t,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}function y9(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function w9(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=n+n,l=r+r,c=s+s,h=n*a,f=r*a,m=r*l,v=s*a,y=s*l,S=s*c,x=i*a,b=i*l,E=i*c;return e[0]=1-m-S,e[3]=f-E,e[6]=v+b,e[1]=f+E,e[4]=1-h-S,e[7]=y-x,e[2]=v-b,e[5]=y+x,e[8]=1-h-m,e}function x9(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function _9(e,t,n,r,s,i,a,l,c,h){return e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i,e[5]=a,e[6]=l,e[7]=c,e[8]=h,e}function b9(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function S9(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=f*a-l*h,v=-f*i+l*c,y=h*i-a*c,S=n*m+r*v+s*y;return S?(S=1/S,e[0]=m*S,e[1]=(-f*r+s*h)*S,e[2]=(l*r-s*a)*S,e[3]=v*S,e[4]=(f*n-s*c)*S,e[5]=(-l*n+s*i)*S,e[6]=y*S,e[7]=(-h*n+r*c)*S,e[8]=(a*n-r*i)*S,e):null}function m1(e,t,n){let r=t[0],s=t[1],i=t[2],a=t[3],l=t[4],c=t[5],h=t[6],f=t[7],m=t[8],v=n[0],y=n[1],S=n[2],x=n[3],b=n[4],E=n[5],_=n[6],C=n[7],k=n[8];return e[0]=v*r+y*a+S*h,e[1]=v*s+y*l+S*f,e[2]=v*i+y*c+S*m,e[3]=x*r+b*a+E*h,e[4]=x*s+b*l+E*f,e[5]=x*i+b*c+E*m,e[6]=_*r+C*a+k*h,e[7]=_*s+C*l+k*f,e[8]=_*i+C*c+k*m,e}function E9(e,t,n){let r=t[0],s=t[1],i=t[2],a=t[3],l=t[4],c=t[5],h=t[6],f=t[7],m=t[8],v=n[0],y=n[1];return e[0]=r,e[1]=s,e[2]=i,e[3]=a,e[4]=l,e[5]=c,e[6]=v*r+y*a+h,e[7]=v*s+y*l+f,e[8]=v*i+y*c+m,e}function C9(e,t,n){let r=t[0],s=t[1],i=t[2],a=t[3],l=t[4],c=t[5],h=t[6],f=t[7],m=t[8],v=Math.sin(n),y=Math.cos(n);return e[0]=y*r+v*a,e[1]=y*s+v*l,e[2]=y*i+v*c,e[3]=y*a-v*r,e[4]=y*l-v*s,e[5]=y*c-v*i,e[6]=h,e[7]=f,e[8]=m,e}function P9(e,t,n){let r=n[0],s=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function k9(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=t[9],v=t[10],y=t[11],S=t[12],x=t[13],b=t[14],E=t[15],_=n*l-r*a,C=n*c-s*a,k=n*h-i*a,T=r*c-s*l,R=r*h-i*l,O=s*h-i*c,A=f*x-m*S,W=f*b-v*S,G=f*E-y*S,X=m*b-v*x,H=m*E-y*x,U=v*E-y*b,M=_*U-C*H+k*X+T*G-R*W+O*A;return M?(M=1/M,e[0]=(l*U-c*H+h*X)*M,e[1]=(c*G-a*U-h*W)*M,e[2]=(a*H-l*G+h*A)*M,e[3]=(s*H-r*U-i*X)*M,e[4]=(n*U-s*G+i*W)*M,e[5]=(r*G-n*H-i*A)*M,e[6]=(x*O-b*R+E*T)*M,e[7]=(b*k-S*O-E*C)*M,e[8]=(S*R-x*k+E*_)*M,e):null}class N9 extends Array{constructor(t=1,n=0,r=0,s=0,i=1,a=0,l=0,c=0,h=1){return super(t,n,r,s,i,a,l,c,h),this}set(t,n,r,s,i,a,l,c,h){return t.length?this.copy(t):(_9(this,t,n,r,s,i,a,l,c,h),this)}translate(t,n=this){return E9(this,n,t),this}rotate(t,n=this){return C9(this,n,t),this}scale(t,n=this){return P9(this,n,t),this}multiply(t,n){return n?m1(this,t,n):m1(this,this,t),this}identity(){return b9(this),this}copy(t){return x9(this,t),this}fromMatrix4(t){return y9(this,t),this}fromQuaternion(t){return w9(this,t),this}fromBasis(t,n,r){return this.set(t[0],t[1],t[2],n[0],n[1],n[2],r[0],r[1],r[2]),this}inverse(t=this){return S9(this,t),this}getNormalMatrix(t){return k9(this,t),this}}let T9=0;class j9 extends v9{constructor(t,{geometry:n,program:r,mode:s=t.TRIANGLES,frustumCulled:i=!0,renderOrder:a=0}={}){super(),t.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=t,this.id=T9++,this.geometry=n,this.program=r,this.mode=s,this.frustumCulled=i,this.renderOrder=a,this.modelViewMatrix=new af,this.normalMatrix=new N9,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(t){return this.beforeRenderCallbacks.push(t),this}onAfterRender(t){return this.afterRenderCallbacks.push(t),this}draw({camera:t}={}){t&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=t.projectionMatrix,this.program.uniforms.cameraPosition.value=t.worldPosition,this.program.uniforms.viewMatrix.value=t.viewMatrix,this.modelViewMatrix.multiply(t.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(r=>r&&r({mesh:this,camera:t}));let n=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:n}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(r=>r&&r({mesh:this,camera:t}))}}const g1={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#00ff00",blue:"#0000ff",fuchsia:"#ff00ff",cyan:"#00ffff",yellow:"#ffff00",orange:"#ff8000"};function v1(e){e.length===4&&(e=e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t||console.warn(`Unable to convert hex string ${e} to rgb values`),[parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255]}function R9(e){return e=parseInt(e),[(e>>16&255)/255,(e>>8&255)/255,(e&255)/255]}function y1(e){return e===void 0?[0,0,0]:arguments.length===3?arguments:isNaN(e)?e[0]==="#"?v1(e):g1[e.toLowerCase()]?v1(g1[e.toLowerCase()]):(console.warn("Color format not recognised"),[0,0,0]):R9(e)}class sg extends Array{constructor(t){return Array.isArray(t)?super(...t):super(...y1(...arguments))}get r(){return this[0]}get g(){return this[1]}get b(){return this[2]}set r(t){this[0]=t}set g(t){this[1]=t}set b(t){this[2]=t}set(t){return Array.isArray(t)?this.copy(t):this.copy(y1(...arguments))}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this}}class M9 extends CH{constructor(t,{attributes:n={}}={}){Object.assign(n,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(t,n)}}const O9=`
attribute vec2 uv;
attribute vec2 position;

varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = vec4(position, 0.0, 1.0);
}
`,I9=`
precision highp float;

uniform float uTime;
uniform vec3 uColor;
uniform vec3 uResolution;
uniform vec2 uMouse;
uniform float uAmplitude;
uniform float uSpeed;

varying vec2 vUv;

void main() {
  float mr = min(uResolution.x, uResolution.y);
  vec2 uv = (vUv.xy * 2.0 - 1.0) * uResolution.xy / mr;

  uv += (uMouse - vec2(0.5)) * uAmplitude;

  float d = -uTime * 0.5 * uSpeed;
  float a = 0.0;
  for (float i = 0.0; i < 8.0; ++i) {
    a += cos(i - d - a * uv.x);
    d += sin(uv.y * i + a);
  }
  d += uTime * 0.5 * uSpeed;
  vec3 col = vec3(cos(uv * vec2(d, a)) * 0.6 + 0.4, cos(a + d) * 0.5 + 0.5);
  col = cos(col * cos(vec3(d, a, 2.5)) * 0.5 + 0.5) * uColor;
  gl_FragColor = vec4(col, 1.0);
}
`,ry=({color:e=[1,1,1],speed:t=1,amplitude:n=.1,mouseReact:r=!0,...s})=>{const i=g.useRef(null),a=g.useRef({x:.5,y:.5});return g.useEffect(()=>{const l=i.current;if(!l)return;let c=null;try{c=new MH}catch(E){console.warn("Iridescence background unavailable",E);return}const h=c.gl;h.clearColor(0,0,0,0);let f=0,m=null,v=null;const y=new M9(h),S=()=>{c==null||c.setSize(l.offsetWidth*1,l.offsetHeight*1),m&&(m.uniforms.uResolution.value=new sg(h.canvas.width,h.canvas.height,h.canvas.width/h.canvas.height))};window.addEventListener("resize",S),S(),m=new kH(h,{vertex:O9,fragment:I9,uniforms:{uTime:{value:0},uColor:{value:new sg(...e)},uResolution:{value:new sg(h.canvas.width,h.canvas.height,h.canvas.width/h.canvas.height)},uMouse:{value:new Float32Array([a.current.x,a.current.y])},uAmplitude:{value:n},uSpeed:{value:t}}}),v=new j9(h,{geometry:y,program:m});const x=E=>{f=requestAnimationFrame(x),!(!m||!c||!v)&&(m.uniforms.uTime.value=E*.001,c.render({scene:v}))};f=requestAnimationFrame(x),l.appendChild(h.canvas);const b=E=>{const _=l.getBoundingClientRect(),C=(E.clientX-_.left)/_.width,k=1-(E.clientY-_.top)/_.height;a.current={x:C,y:k},m&&(m.uniforms.uMouse.value[0]=C,m.uniforms.uMouse.value[1]=k)};return r&&l.addEventListener("mousemove",b),()=>{if(cancelAnimationFrame(f),window.removeEventListener("resize",S),r&&l.removeEventListener("mousemove",b),c){try{h.canvas.parentNode===l&&l.removeChild(h.canvas)}catch(E){console.warn("Failed to remove canvas",E)}c=null}}},[e,t,n,r]),d.jsx("div",{ref:i,className:"iridescence-container",...s})},A9=["Harvard University","Stanford University","Massachusetts Institute of Technology","University of Cambridge","University of Oxford","Columbia University","University of California, Berkeley","University of Chicago","Princeton University","Yale University","University of Pennsylvania","California Institute of Technology","University of California, Los Angeles","Imperial College London","University College London","ETH Zrich","cole Polytechnique Fdrale de Lausanne","University of Toronto","McGill University","University of British Columbia","University of Melbourne","Australian National University","University of Sydney","University of New South Wales","National University of Singapore","Nanyang Technological University","Peking University","Tsinghua University","University of Tokyo","Kyoto University","Seoul National University","University of Hong Kong","University of Michigan","University of Washington","New York University","University of Illinois Urbana-Champaign","University of WisconsinMadison","University of Texas at Austin","Duke University","Johns Hopkins University","Cornell University","Carnegie Mellon University","Georgia Institute of Technology","University of Edinburgh","University of Manchester","University of Bristol","University of Glasgow","University of Warwick","University of Leeds","Trinity College Dublin","University of Copenhagen","University of Helsinki","University of Oslo","University of Stockholm","University of Amsterdam","Leiden University","University of Groningen","KU Leuven","Ghent University","Ludwig Maximilian University of Munich","Technical University of Munich","University of Heidelberg","University of Freiburg","University of Bonn","Sorbonne University","Universit PSL","cole Polytechnique","University of Barcelona","University of Madrid (Complutense)","University of Lisbon","University of Porto","University of So Paulo","Pontifical Catholic University of Chile","University of Buenos Aires","University of Cape Town","American University in Cairo","King Saud University","University of Zurich","University of Geneva","University of Bern","University of St. Gallen","University of Basel","University of Lausanne","University of Fribourg","University of Neuchtel"],xj=(e,t=6)=>{const n=e.trim().toLowerCase();return n?A9.filter(r=>r.toLowerCase().includes(n)).slice(0,t):[]},lf="profile-photos",L9="student-ids",D9="selfies",_j=e=>{const t=e.name.split(".").pop();return`${typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(36).slice(2)}${t?`.${t}`:""}`},bj=async(e,t)=>{const n=_j(t),r=`${e}/${L9}/${n}`,{error:s}=await be.storage.from(lf).upload(r,t,{cacheControl:"3600",upsert:!0});if(s)throw new Error(s.message??"Failed to upload student ID.");const{data:i}=be.storage.from(lf).getPublicUrl(r);if(!(i!=null&&i.publicUrl))throw new Error("Unable to fetch uploaded student ID URL.");return i.publicUrl},F9=async(e,t)=>{const n=_j(t),r=`${e}/${D9}/${n}`,{error:s}=await be.storage.from(lf).upload(r,t,{cacheControl:"3600",upsert:!0});if(s)throw new Error(s.message??"Failed to upload selfie.");const{data:i}=be.storage.from(lf).getPublicUrl(r);if(!(i!=null&&i.publicUrl))throw new Error("Unable to fetch uploaded selfie URL.");return i.publicUrl},ig="focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-900/40",$9=`
  @keyframes auroraFloat {
    0% { transform: translate3d(0,0,0) scale(1); }
    50% { transform: translate3d(0,-18px,0) scale(1.05); }
    100% { transform: translate3d(0,0,0) scale(1); }
  }

  @keyframes softDrift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
`,U9=[{top:"10%",left:"5%",size:220,opacity:.35,delay:"0s"},{top:"60%",left:"70%",size:260,opacity:.25,delay:"-3s"},{top:"75%",left:"20%",size:180,opacity:.3,delay:"-5s"}],z9=[{value:"bsc",label:"Bachelor (BSc)"},{value:"msc",label:"Master (MSc)"},{value:"phd",label:"Doctorate (PhD)"},{value:"other",label:"Other program"}],B9=["1","2","3","4","5"],W9=()=>{const e=es(),{toast:t}=Ps(),{user:n,loading:r,signOut:s}=uw(),{refreshUser:i}=jr(),[a,l]=g.useState("signin"),[c,h]=g.useState(""),[f,m]=g.useState(""),[v,y]=g.useState(""),[S,x]=g.useState("renter"),[b,E]=g.useState(null),[_,C]=g.useState(null),[k,T]=g.useState(!1),[R,O]=g.useState(""),[A,W]=g.useState(""),[G,X]=g.useState(""),[H,U]=g.useState(""),[M,ee]=g.useState(null),[V,Y]=g.useState(null),j=g.useMemo(()=>a==="signup"?xj(R):[],[a,R]),$=g.useMemo(()=>a==="signin"?"Welcome back":"Create calm travel",[a]),q=async()=>{await s(),t({title:"Signed out"})},oe=async B=>{B.preventDefault(),T(!0),E(null),C(null);try{if(a==="signup"){if(f.length<6){C("Password must be at least 6 characters long."),T(!1);return}if(!M){C("Upload a photo of your government ID to continue."),T(!1);return}if(!V){C("Upload a selfie to continue."),T(!1);return}const Q=R.trim();if(!Q){C("Add your university."),T(!1);return}const te=A.trim();if(!te){C("Enter your program name."),T(!1);return}if(!G){C("Select your program type."),T(!1);return}if(!H){C("Select your year in the program."),T(!1);return}const Z=Number(H),re=G;if(!Number.isFinite(Z)||Z<1||Z>5){C("Choose a valid program year."),T(!1);return}const{data:fe,error:Pe}=await be.auth.signUp({email:c,password:f,options:{data:{full_name:v,user_role:S}}});if(Pe)throw Pe;const z=fe.user;if(z){const ne=await bj(z.id,M),se=await F9(z.id,V);await dw({id:z.id,email:z.email??c,full_name:v||null,user_role:S,avatar_url:se,bio:null,student_id_url:ne,university:Q,program_name:te,program_year:Z,program_type:re})}await i(),E("Account created and signed in."),t({title:"Welcome!",description:"Your account is ready."}),e("/listings",{replace:!0});return}const{error:ce}=await be.auth.signInWithPassword({email:c,password:f});if(ce)throw ce;await i(),E("Signed in successfully."),t({title:"Signed in"}),e("/listings",{replace:!0})}catch(ce){const Q=ce instanceof Error?ce.message:"Authentication failed.";C(Q)}finally{T(!1)}};return g.useEffect(()=>{!r&&n&&e("/listings",{replace:!0})},[r,n,e]),r?d.jsxs("div",{className:"relative min-h-screen flex items-center justify-center bg-gradient-to-br from-[#dbe8ff] to-white",children:[d.jsx(ry,{color:[1.2,1.35,1.5],mouseReact:!1,amplitude:.4,speed:1.2,className:"pointer-events-none"}),d.jsx("p",{className:"text-sm text-slate-500",children:"Loading session"})]}):d.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-[#cfdcff] via-[#e0eafe] to-[#c5d8ff] text-slate-900",children:[d.jsx("style",{children:$9}),d.jsx(ry,{color:[1.4,1.15,1.65],mouseReact:!0,amplitude:.4,speed:1.2,className:"pointer-events-none opacity-70 mix-blend-screen"}),d.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[d.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{background:"linear-gradient(130deg, rgba(147,197,253,0.35), rgba(219,234,254,0.45), rgba(191,219,254,0.35))",backgroundSize:"200% 200%",animation:"softDrift 36s ease-in-out infinite"}}),U9.map(B=>d.jsx("span",{className:"absolute rounded-full bg-gradient-to-br from-white/80 via-blue-50/70 to-blue-200/40",style:{top:B.top,left:B.left,width:B.size,height:B.size,opacity:B.opacity,animation:"auroraFloat 20s ease-in-out infinite",animationDelay:B.delay}},`${B.top}-${B.left}`))]}),d.jsx("main",{className:"relative z-10 mx-auto flex min-h-screen w-full max-w-3xl flex-col justify-center px-4 py-12 sm:px-6 lg:px-8",children:d.jsxs("section",{className:"relative rounded-[2rem] border border-white/60 bg-white/95 p-6 shadow-2xl backdrop-blur-xl",children:[d.jsxs("div",{className:"absolute -top-4 right-6 inline-flex items-center gap-2 rounded-full border border-blue-200/80 bg-blue-50/90 px-4 py-1 text-xs font-medium text-blue-600 shadow",children:[d.jsx(NA,{className:"h-3.5 w-3.5"})," Calm account flow"]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-500",children:$}),d.jsx(ow,{className:"text-3xl mt-1",children:a==="signin"?"Sign in":"Create account"}),d.jsx(aw,{className:"mt-1 text-sm",children:a==="signin"?"Enter your credentials to pick up where you left off.":"A few calm fields and you are in."})]}),d.jsx("div",{className:"flex gap-2",children:["signin","signup"].map(B=>d.jsx("button",{type:"button",onClick:()=>l(B),className:`rounded-full px-4 py-2 text-sm font-semibold transition ${a===B?"bg-slate-900 text-white shadow-lg":"border border-slate-200 text-slate-500 hover:border-slate-400"} ${ig}`,children:B==="signin"?"Sign in":"Sign up"},B))})]}),n?d.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-100 bg-slate-50/70 p-6",children:[d.jsxs("p",{className:"text-sm",children:["Signed in as ",d.jsx("span",{className:"font-semibold",children:n.email})]}),d.jsx(Me,{onClick:q,variant:"destructive",className:`w-full ${ig}`,children:"Sign out"})]}):d.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"email",children:"Email"}),d.jsx(wt,{id:"email",type:"email",value:c,onChange:B=>h(B.target.value),placeholder:"you@example.com",required:!0,className:"h-11 rounded-2xl border-slate-200 bg-white/80"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"password",children:"Password"}),d.jsx(wt,{id:"password",type:"password",value:f,onChange:B=>m(B.target.value),placeholder:"",required:!0,className:"h-11 rounded-2xl border-slate-200 bg-white/80"})]}),a==="signup"&&d.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-100 bg-blue-50/40 p-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"fullName",children:"Full name"}),d.jsx(wt,{id:"fullName",value:v,onChange:B=>y(B.target.value),placeholder:"Jane Doe",className:"h-11 rounded-2xl border-slate-200 bg-white"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{children:"User role"}),d.jsx(cw,{value:S,onValueChange:B=>x(B),className:"flex gap-3 rounded-full bg-white/70 p-1",children:[{id:"role-renter",label:"Renter",value:"renter"},{id:"role-host",label:"Host",value:"host"}].map(B=>d.jsxs("div",{className:"flex flex-1 items-center justify-center",children:[d.jsx(of,{value:B.value,id:B.id,className:"peer sr-only","aria-label":B.label}),d.jsx("label",{htmlFor:B.id,className:`w-full cursor-pointer rounded-full px-3 py-2 text-center text-sm font-medium transition ${S===B.value?"bg-slate-900 text-white":"text-slate-500"}`,children:B.label})]},B.value))})]}),d.jsxs("div",{className:"space-y-3 rounded-2xl border border-slate-100 bg-white/80 p-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Student verification"}),d.jsx("p",{className:"text-xs text-slate-500",children:"Every account must belong to an active student community."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"universitySignup",children:"University"}),d.jsx(wt,{id:"universitySignup",value:R,onChange:B=>O(B.target.value),placeholder:"Start typing your university",autoComplete:"off",className:"h-11 rounded-2xl border-slate-200 bg-white"}),(()=>{const B=R.trim();return!B||!j.length||j.some(Q=>Q.toLowerCase()===B.toLowerCase())&&j.length===1?null:d.jsx("div",{className:"max-h-32 overflow-y-auto rounded-2xl border border-slate-200 bg-white",children:j.map(Q=>d.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-sm transition hover:bg-blue-50",onClick:()=>O(Q),children:Q},Q))})})()]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"programNameSignup",children:"Program"}),d.jsx(wt,{id:"programNameSignup",value:A,onChange:B=>W(B.target.value),placeholder:"e.g. Computer Science",className:"h-11 rounded-2xl border-slate-200 bg-white"})]}),d.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{children:"Program type"}),d.jsxs(Ii,{value:G,onValueChange:B=>X(B),children:[d.jsx(qs,{className:"rounded-2xl border-slate-200 bg-white",children:d.jsx(Ai,{placeholder:"Select type"})}),d.jsx(Ys,{children:z9.map(B=>d.jsx(Vr,{value:B.value,children:B.label},B.value))})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{children:"Program year"}),d.jsxs(Ii,{value:H,onValueChange:B=>U(B),children:[d.jsx(qs,{className:"rounded-2xl border-slate-200 bg-white",children:d.jsx(Ai,{placeholder:"Select year"})}),d.jsx(Ys,{children:B9.map(B=>d.jsxs(Vr,{value:B,children:["Year ",B]},B))})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"studentId",children:"Government-issued ID"}),d.jsx(wt,{id:"studentId",type:"file",accept:"image/*,.pdf",onChange:B=>{var ce;return ee(((ce=B.target.files)==null?void 0:ce[0])??null)},className:"cursor-pointer rounded-2xl border-slate-200 bg-white"}),d.jsx("p",{className:"text-xs text-slate-500",children:"We only share this with adminsnever with other users."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"selfiePhoto",children:"Selfie"}),d.jsx(wt,{id:"selfiePhoto",type:"file",accept:"image/*",onChange:B=>{var ce;return Y(((ce=B.target.files)==null?void 0:ce[0])??null)},className:"cursor-pointer rounded-2xl border-slate-200 bg-white"}),d.jsx("p",{className:"text-xs text-slate-500",children:"We use this to help hosts and renters verify your identity."})]})]})]}),d.jsx(Me,{type:"submit",className:`w-full rounded-full text-base ${ig}`,disabled:k,children:k?"Please wait":a==="signin"?"Sign in":"Create account"}),d.jsx("div",{className:"rounded-2xl border border-slate-100 bg-white/70 p-4 text-xs text-slate-500",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(PA,{className:"h-4 w-4"})," Encrypted authentication  No spam"]})}),b&&d.jsx("p",{className:"text-sm text-emerald-600 text-center",children:b}),_&&d.jsx("p",{className:"text-sm text-rose-500 text-center",children:_})]})]})]})})]})},H9=async()=>{try{const{error:e}=await be.from("notes").select("id",{count:"exact",head:!0});return e?`Supabase error: ${e.message}`:"Supabase connected & RLS OK"}catch(e){return`Supabase error: ${e instanceof Error?e.message:String(e)}`}},og="focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-400/60",V9=[{title:"Student exclusive",copy:"Access for students only"},{title:"Security",copy:"Users, hosts are verified students"},{title:"Student prices",copy:"A break from housing crisis"}],G9=`
  @keyframes floatyOrb {
    0% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-18px) scale(1.08); }
    100% { transform: translateY(0) scale(1); }
  }

  @keyframes auroraPulse {
    0% { opacity: 0.25; filter: blur(36px); }
    50% { opacity: 0.6; filter: blur(46px); }
    100% { opacity: 0.25; filter: blur(36px); }
  }

  @keyframes backgroundDrift {
    0% {
      background-position: 0% 50%;
      transform: translate3d(0,0,0);
    }
    50% {
      background-position: 100% 50%;
      transform: translate3d(0,-8px,0);
    }
    100% {
      background-position: 0% 50%;
      transform: translate3d(0,0,0);
    }
  }
`,q9=[{top:"15%",left:"10%",size:"220px",opacity:.35,delay:"0s"},{top:"45%",left:"75%",size:"260px",opacity:.25,delay:"-4s"},{top:"70%",left:"20%",size:"180px",opacity:.3,delay:"-2s"},{top:"30%",left:"55%",size:"150px",opacity:.2,delay:"-6s"}],Y9=()=>{const e=es(),{user:t,loading:n}=jr(),[r,s]=g.useState(null),[i,a]=g.useState(!0),l=!n,c=l&&!t;return g.useEffect(()=>{(async()=>{a(!0);const f=await H9();s(f),a(!1)})()},[]),d.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-[#cfdcff] via-[#dfe9ff] to-[#c5d8ff] text-slate-900",children:[d.jsx("style",{children:G9}),d.jsx(ry,{color:[1.4,1.18,1.65],mouseReact:!0,amplitude:.45,speed:1.4,className:"pointer-events-none opacity-80 mix-blend-screen"}),d.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[d.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{background:"linear-gradient(125deg, rgba(99,179,237,0.35), rgba(191,219,254,0.45), rgba(147,197,253,0.35))",backgroundSize:"200% 200%",animation:"backgroundDrift 45s ease-in-out infinite"}}),d.jsx("div",{className:"absolute inset-x-0 -top-32 h-72 bg-gradient-to-b from-[#7fb3ff]/40 via-transparent to-transparent blur-[80px]"}),d.jsx("div",{className:"absolute bottom-0 left-0 h-96 w-96 rounded-full bg-gradient-to-br from-[#60a5fa]/40 via-[#93c5fd]/30 to-transparent blur-[160px]"}),q9.map(h=>d.jsx("span",{className:"absolute rounded-full bg-gradient-to-br from-white/80 via-[#e0f2ff]/60 to-[#93c5fd]/40",style:{top:h.top,left:h.left,width:h.size,height:h.size,opacity:h.opacity,animation:"floatyOrb 18s ease-in-out infinite",animationDelay:h.delay}},`${h.top}-${h.left}`)),d.jsx("div",{className:"absolute top-1/3 right-10 h-48 w-48 rounded-full bg-gradient-to-br from-[#bfdbfe]/70 via-[#c7d2fe]/60 to-transparent",style:{animation:"auroraPulse 14s ease-in-out infinite"}})]}),d.jsx("header",{className:"relative z-10 border-b border-white/50 bg-gradient-to-r from-white/80 via-blue-50/70 to-white/80 backdrop-blur-2xl",children:d.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-5 flex flex-wrap items-center justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-slate-500",children:"COUCH-SHARING"}),d.jsx("p",{className:"text-sm text-slate-500",children:"Student-Student Exclusive"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[d.jsx("span",{className:"inline-flex h-2 w-2 rounded-full bg-emerald-400","aria-hidden":!0}),i?"Connecting to Supabase":r??"Supabase connected"]})]})}),d.jsx("main",{className:"relative z-10 px-4 sm:px-6 lg:px-8 py-16",children:d.jsxs("section",{className:"max-w-3xl mx-auto space-y-8 text-center",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.6em] text-slate-500",children:"Made in Switzerland"}),d.jsx("h1",{className:"text-4xl md:text-5xl font-semibold tracking-tight text-slate-900",children:"Housing built by students"}),d.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"Couch-share is a trusted, student-only platform where students help students find affordable places to stay  from couches and floor spots to entire rooms and apartments. Simple, safe, and made for student budgets."})]}),d.jsxs("div",{className:"rounded-[36px] border border-white/60 bg-gradient-to-br from-white/80 via-blue-50/70 to-white/70 px-12 py-8 text-left shadow-2xl backdrop-blur-2xl",children:[d.jsx("p",{className:"text-base uppercase tracking-[0.55em] text-slate-500",children:"What you get"}),d.jsx("ul",{className:"mt-4 space-y-4",children:V9.map(h=>d.jsxs("li",{className:"space-y-1 border-l border-blue-200/50 pl-4",children:[d.jsx("p",{className:"text-lg font-semibold text-slate-900",children:h.title}),d.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:h.copy})]},h.title))})]}),d.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[d.jsx(Me,{className:`rounded-full bg-gradient-to-r from-[#2563eb] via-[#3b82f6] to-[#6366f1] px-10 py-3 text-base font-semibold shadow-lg shadow-blue-500/30 transition hover:shadow-blue-500/50 ${og}`,disabled:n,onClick:()=>e(t?"/dashboard":"/auth"),children:t?"Enter CouchStay":"Sign in"}),c&&d.jsxs(Me,{variant:"outline",className:`rounded-full border-blue-200/70 bg-white/70 px-8 py-3 text-base text-slate-600 shadow-inner shadow-blue-100 ${og}`,onClick:()=>e("/auth"),children:["Create account ",d.jsx(EA,{className:"ml-2 h-4 w-4"})]}),d.jsx(Me,{variant:"ghost",className:`rounded-full text-base text-slate-600 ${og}`,onClick:()=>e("/listings"),children:"Browse listings"})]}),!l&&d.jsx("p",{className:"text-xs text-slate-500",children:"Checking your account"})]})})]})};var Sj={exports:{}},Z9="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",K9=Z9,Q9=K9;function Ej(){}function Cj(){}Cj.resetWarningCache=Ej;var X9=function(){function e(r,s,i,a,l,c){if(c!==Q9){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Cj,resetWarningCache:Ej};return n.PropTypes=n,n};Sj.exports=X9();var J9=Sj.exports;const lt=mf(J9);function w1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function x1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w1(Object(n),!0).forEach(function(r){Pj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oh(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?oh=function(t){return typeof t}:oh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oh(e)}function Pj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e7(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function t7(e,t){if(e==null)return{};var n=e7(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kj(e,t){return n7(e)||r7(e,t)||s7(e,t)||i7()}function n7(e){if(Array.isArray(e))return e}function r7(e,t){var n=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(n!=null){var r=[],s=!0,i=!1,a,l;try{for(n=n.call(e);!(s=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));s=!0);}catch(c){i=!0,l=c}finally{try{!s&&n.return!=null&&n.return()}finally{if(i)throw l}}return r}}function s7(e,t){if(e){if(typeof e=="string")return _1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _1(e,t)}}function _1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var yn=function(t,n,r){var s=!!r,i=ie.useRef(r);ie.useEffect(function(){i.current=r},[r]),ie.useEffect(function(){if(!s||!t)return function(){};var a=function(){i.current&&i.current.apply(i,arguments)};return t.on(n,a),function(){t.off(n,a)}},[s,n,t,i])},sy=function(t){var n=ie.useRef(t);return ie.useEffect(function(){n.current=t},[t]),n.current},wl=function(t){return t!==null&&oh(t)==="object"},o7=function(t){return wl(t)&&typeof t.then=="function"},a7=function(t){return wl(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},b1="[object Object]",l7=function e(t,n){if(!wl(t)||!wl(n))return t===n;var r=Array.isArray(t),s=Array.isArray(n);if(r!==s)return!1;var i=Object.prototype.toString.call(t)===b1,a=Object.prototype.toString.call(n)===b1;if(i!==a)return!1;if(!i&&!r)return t===n;var l=Object.keys(t),c=Object.keys(n);if(l.length!==c.length)return!1;for(var h={},f=0;f<l.length;f+=1)h[l[f]]=!0;for(var m=0;m<c.length;m+=1)h[c[m]]=!0;var v=Object.keys(h);if(v.length!==l.length)return!1;var y=t,S=n,x=function(E){return e(y[E],S[E])};return v.every(x)},Nj=function(t,n,r){return wl(t)?Object.keys(t).reduce(function(s,i){var a=!wl(n)||!l7(t[i],n[i]);return r.includes(i)?(a&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),s):a?x1(x1({},s||{}),{},Pj({},i,t[i])):s},null):null},Tj="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",S1=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Tj;if(t===null||a7(t))return t;throw new Error(n)},c7=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Tj;if(o7(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(s){return S1(s,n)})};var r=S1(t,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},u7=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"5.4.1"}),t.registerAppInfo({name:"react-stripe-js",version:"5.4.1",url:"https://stripe.com/docs/stripe-js/react"}))},gp=ie.createContext(null);gp.displayName="ElementsContext";var jj=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t},Rj=function(t){var n=t.stripe,r=t.options,s=t.children,i=ie.useMemo(function(){return c7(n)},[n]),a=ie.useState(function(){return{stripe:i.tag==="sync"?i.stripe:null,elements:i.tag==="sync"?i.stripe.elements(r):null}}),l=kj(a,2),c=l[0],h=l[1];ie.useEffect(function(){var v=!0,y=function(x){h(function(b){return b.stripe?b:{stripe:x,elements:x.elements(r)}})};return i.tag==="async"&&!c.stripe?i.stripePromise.then(function(S){S&&v&&y(S)}):i.tag==="sync"&&!c.stripe&&y(i.stripe),function(){v=!1}},[i,c,r]);var f=sy(n);ie.useEffect(function(){f!==null&&f!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[f,n]);var m=sy(r);return ie.useEffect(function(){if(c.elements){var v=Nj(r,m,["clientSecret","fonts"]);v&&c.elements.update(v)}},[r,m,c.elements]),ie.useEffect(function(){u7(c.stripe)},[c.stripe]),ie.createElement(gp.Provider,{value:c},s)};Rj.propTypes={stripe:lt.any,options:lt.object};var d7=function(t){var n=ie.useContext(gp);return jj(n,t)},h7=function(){var t=d7("calls useElements()"),n=t.elements;return n};lt.func.isRequired;var Mj=ie.createContext(null);Mj.displayName="CheckoutContext";lt.any,lt.shape({clientSecret:lt.oneOfType([lt.string,lt.instanceOf(Promise)]).isRequired,elementsOptions:lt.object}).isRequired;var iy=function(t){var n=ie.useContext(Mj),r=ie.useContext(gp);if(n){if(r)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return n}else return jj(r,t)},f7=["mode"],p7=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Gn=function(t,n){var r="".concat(p7(t),"Element"),s=function(c){var h=c.id,f=c.className,m=c.options,v=m===void 0?{}:m,y=c.onBlur,S=c.onFocus,x=c.onReady,b=c.onChange,E=c.onEscape,_=c.onClick,C=c.onLoadError,k=c.onLoaderStart,T=c.onNetworksChange,R=c.onConfirm,O=c.onCancel,A=c.onShippingAddressChange,W=c.onShippingRateChange,G=c.onSavedPaymentMethodRemove,X=c.onSavedPaymentMethodUpdate,H=iy("mounts <".concat(r,">")),U="elements"in H?H.elements:null,M="checkoutState"in H?H.checkoutState:null,ee=(M==null?void 0:M.type)==="success"||(M==null?void 0:M.type)==="loading"?M.sdk:null,V=ie.useState(null),Y=kj(V,2),j=Y[0],$=Y[1],q=ie.useRef(null),oe=ie.useRef(null);yn(j,"blur",y),yn(j,"focus",S),yn(j,"escape",E),yn(j,"click",_),yn(j,"loaderror",C),yn(j,"loaderstart",k),yn(j,"networkschange",T),yn(j,"confirm",R),yn(j,"cancel",O),yn(j,"shippingaddresschange",A),yn(j,"shippingratechange",W),yn(j,"savedpaymentmethodremove",G),yn(j,"savedpaymentmethodupdate",X),yn(j,"change",b);var B;x&&(t==="expressCheckout"?B=x:B=function(){x(j)}),yn(j,"ready",B),ie.useLayoutEffect(function(){if(q.current===null&&oe.current!==null&&(U||ee)){var Q=null;if(ee)switch(t){case"paymentForm":Q=ee.createPaymentFormElement();break;case"payment":Q=ee.createPaymentElement(v);break;case"address":if("mode"in v){var te=v.mode,Z=t7(v,f7);if(te==="shipping")Q=ee.createShippingAddressElement(Z);else if(te==="billing")Q=ee.createBillingAddressElement(Z);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":Q=ee.createExpressCheckoutElement(v);break;case"currencySelector":Q=ee.createCurrencySelectorElement();break;case"taxId":Q=ee.createTaxIdElement(v);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else U&&(Q=U.create(t,v));q.current=Q,$(Q),Q&&Q.mount(oe.current)}},[U,ee,v]);var ce=sy(v);return ie.useEffect(function(){if(q.current){var Q=Nj(v,ce,["paymentRequest"]);Q&&"update"in q.current&&q.current.update(Q)}},[v,ce]),ie.useLayoutEffect(function(){return function(){if(q.current&&typeof q.current.destroy=="function")try{q.current.destroy(),q.current=null}catch{}}},[]),ie.createElement("div",{id:h,className:f,ref:oe})},i=function(c){iy("mounts <".concat(r,">"));var h=c.id,f=c.className;return ie.createElement("div",{id:h,className:f})},a=n?i:s;return a.propTypes={id:lt.string,className:lt.string,onChange:lt.func,onBlur:lt.func,onFocus:lt.func,onReady:lt.func,onEscape:lt.func,onClick:lt.func,onLoadError:lt.func,onLoaderStart:lt.func,onNetworksChange:lt.func,onConfirm:lt.func,onCancel:lt.func,onShippingAddressChange:lt.func,onShippingRateChange:lt.func,onSavedPaymentMethodRemove:lt.func,onSavedPaymentMethodUpdate:lt.func,options:lt.object},a.displayName=r,a.__elementType=t,a},qn=typeof window>"u",m7=ie.createContext(null);m7.displayName="EmbeddedCheckoutProviderContext";var g7=function(){var t=iy("calls useStripe()"),n=t.stripe;return n};Gn("auBankAccount",qn);Gn("card",qn);Gn("cardNumber",qn);Gn("cardExpiry",qn);Gn("cardCvc",qn);Gn("iban",qn);var v7=Gn("payment",qn);Gn("expressCheckout",qn);Gn("paymentRequestButton",qn);Gn("linkAuthentication",qn);Gn("address",qn);Gn("shippingAddress",qn);Gn("paymentMethodMessaging",qn);Gn("taxId",qn);var Oj="clover",y7=function(t){return t===3?"v3":t},Ij="https://js.stripe.com",w7="".concat(Ij,"/").concat(Oj,"/stripe.js"),x7=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,_7=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,E1="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",b7=function(t){return x7.test(t)||_7.test(t)},S7=function(){for(var t=document.querySelectorAll('script[src^="'.concat(Ij,'"]')),n=0;n<t.length;n++){var r=t[n];if(b7(r.src))return r}return null},C1=function(t){var n="",r=document.createElement("script");r.src="".concat(w7).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},E7=function(t,n){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"8.5.3",startTime:n})},dc=null,Dd=null,Fd=null,C7=function(t){return function(n){t(new Error("Failed to load Stripe.js",{cause:n}))}},P7=function(t,n){return function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))}},k7=function(t){return dc!==null?dc:(dc=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&t&&console.warn(E1),window.Stripe){n(window.Stripe);return}try{var s=S7();if(s&&t)console.warn(E1);else if(!s)s=C1(t);else if(s&&Fd!==null&&Dd!==null){var i;s.removeEventListener("load",Fd),s.removeEventListener("error",Dd),(i=s.parentNode)===null||i===void 0||i.removeChild(s),s=C1(t)}Fd=P7(n,r),Dd=C7(r),s.addEventListener("load",Fd),s.addEventListener("error",Dd)}catch(a){r(a);return}}),dc.catch(function(n){return dc=null,Promise.reject(n)}))},N7=function(t,n,r){if(t===null)return null;var s=n[0],i=s.match(/^pk_test/),a=y7(t.version),l=Oj;i&&a!==l&&console.warn("Stripe.js@".concat(a," was loaded on the page, but @stripe/stripe-js@").concat("8.5.3"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=t.apply(void 0,n);return E7(c,r),c},hc,Aj=!1,Lj=function(){return hc||(hc=k7(null).catch(function(t){return hc=null,Promise.reject(t)}),hc)};Promise.resolve().then(function(){return Lj()}).catch(function(e){Aj||console.warn(e)});var T7=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Aj=!0;var s=Date.now();return Lj().then(function(i){return N7(i,n,s)})};const Dj="pk_test_51SbObe1iaTLobM1h9AqE3AcfCfUEPeJvWO7ZreHNy6DIDXLDZMEF17qlduSZAzNouH393aUJQy9aU0Plix7p24a900ijJeqax6";let ag=null;const j7=()=>typeof window>"u"?null:(ag||(ag=T7(Dj)),ag),R7=!!Dj,M7=({amountLabel:e,paymentDueLabel:t,onPaymentSuccess:n})=>{const r=g7(),s=h7(),[i,a]=g.useState(!1),[l,c]=g.useState(null),h=async f=>{var v;if(f.preventDefault(),!r||!s)return;a(!0),c(null);const m=typeof window<"u"?`${window.location.origin}/renter-dashboard`:void 0;try{const y=await r.confirmPayment({elements:s,confirmParams:m?{return_url:m}:void 0,redirect:"if_required"});y.error?c(y.error.message??"The payment could not be completed."):((v=y.paymentIntent)==null?void 0:v.status)==="succeeded"?(c("Payment successful! You're all set."),await(n==null?void 0:n())):c("Your payment is processing. We'll update you shortly.")}catch(y){const S=y instanceof Error?y.message:"Unexpected issue while confirming the payment.";c(S)}finally{a(!1)}};return d.jsxs("form",{onSubmit:h,className:"space-y-4",children:[d.jsxs("div",{className:"rounded-md border border-dashed border-muted-foreground/40 bg-muted/20 p-3 text-sm text-muted-foreground",children:[d.jsxs("p",{className:"font-semibold text-sketch-dark text-base text-left",children:["Total due: ",e]}),t&&d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Pay before ",t," to keep your approved stay."]})]}),d.jsx(v7,{options:{layout:"tabs"}}),d.jsx(Me,{type:"submit",className:"w-full",disabled:!r||i,children:i?"Processing":`Pay ${e}`}),l&&d.jsx("p",{className:"text-sm text-muted-foreground text-center",children:l})]})},Fj=({open:e,onOpenChange:t,booking:n,clientSecret:r,amountLabel:s,paymentDueAt:i,onPaymentSuccess:a})=>{const l=j7(),c=g.useMemo(()=>{if(!i)return null;const y=new Date(i);return Number.isNaN(y.getTime())?null:Je(y,"MMM d, yyyy HH:mm")},[i]),h=!!(e&&n&&r&&l),f=n?`Pay ${n.couchTitle??"for your stay"}`:"Complete payment";let m=null;R7?e&&!r&&(m="We couldn't create a payment session. Close this window and try again."):m="Stripe is not configured in this environment. Add VITE_STRIPE_PUBLISHABLE_KEY to your environment variables.";const v=h?{clientSecret:r,appearance:{theme:"stripe",labels:"floating"}}:void 0;return d.jsx(nw,{open:e,onOpenChange:y=>{t(y)},children:d.jsxs(cp,{className:"max-w-md",children:[d.jsxs(up,{children:[d.jsx(dp,{children:f}),d.jsx(hp,{children:"Complete payment to confirm your approved stay. We only charge after the host accepts your request."})]}),!h||m?d.jsx("div",{className:"rounded-md border border-dashed border-muted-foreground/40 bg-muted/30 p-4 text-sm text-muted-foreground",children:m??"Preparing checkout"}):d.jsx(Rj,{stripe:l,options:v,children:d.jsx(M7,{amountLabel:s,paymentDueLabel:c,onPaymentSuccess:a})},r)]})})},$j=async e=>{if(!e.bookingId)throw new Error("Booking request is missing");const t=Number(e.amount);if(!Number.isFinite(t)||t<=0)throw new Error("A positive payment amount is required");const{data:n,error:r}=await be.functions.invoke("create-payment-intent",{body:{bookingId:e.bookingId,amount:t,renterEmail:e.renterEmail??void 0}});if(r)throw r;if(!(n!=null&&n.clientSecret))throw new Error("We couldn't start checkout. Please try again.");return n},lg="CHF",O7=e=>{if(!e)return null;const t=e.trim();if(!t)return null;const n=t.replace(/[^0-9.,-]/g,"");if(!n)return null;const r=n.includes(","),s=n.includes(".");let i=n;r&&s?i=i.replace(/,/g,""):r&&!s&&(i=i.replace(/,/g,"."));const a=Number(i);return!Number.isFinite(a)||a<=0?null:a},I7=e=>{if(!e)return lg;const t=e.trim();if(!t)return lg;const n=t.match(/^[^0-9-]+/),r=n?n[0].trim():"";return r||(t.startsWith("$")?"$":lg)},A7=(e,t)=>{const n=I7(e),r=/[A-Za-z]/.test(n)&&n.length>1;return`${n?`${n}${r?" ":""}`:""}${t.toFixed(2)}`},cf=(e,t)=>{const n=O7(e);if(!n)return null;const r=typeof t=="number"?t:Number(t??0),s=Math.max(1,Number.isFinite(r)?r:1),i=n*s;return{nightlyRate:n,nights:s,totalDue:i,amountLabel:A7(e,i)}},L7=(e,t)=>{const n={text:e??"",senderRole:"renter",senderName:t.renterName??t.hostName??null,senderId:null,hostName:t.hostName??null,hostEmail:null,renterName:t.renterName??null,renterEmail:null};if(!e)return{...n,rawBody:""};try{const r=JSON.parse(e);if(typeof r!="object"||r===null)return{...n,rawBody:e};const s=typeof r.text=="string"?r.text:n.text,i=r.senderRole==="host"?"host":"renter",a=typeof r.senderName=="string"?r.senderName:n.senderName,l=typeof r.senderId=="string"?r.senderId:null,c=typeof r.hostName=="string"?r.hostName:n.hostName,h=typeof r.hostEmail=="string"?r.hostEmail:null,f=typeof r.renterName=="string"?r.renterName:n.renterName,m=typeof r.renterEmail=="string"?r.renterEmail:null;return{text:s,senderRole:i,senderName:a,senderId:l,hostName:c,hostEmail:h,renterName:f,renterEmail:m,rawBody:e}}catch{return{...n,rawBody:e}}},hw=e=>{const t=L7(e.body,{hostName:e.host_name,renterName:e.renter_name});return{id:e.id,couchId:e.couch_id,hostId:e.host_id,hostName:t.hostName,hostEmail:t.hostEmail,renterId:e.renter_id,renterName:t.renterName,renterEmail:t.renterEmail,text:t.text,rawBody:t.rawBody??e.body??"",senderRole:t.senderRole,senderName:t.senderName,senderId:t.senderId,sentAt:e.sent_at??e.created_at??new Date().toISOString()}},ah=e=>e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)?e:null,D7=e=>{if(!e)return[];const t=new Set;return e.forEach(n=>{if(!n)return;const r=n.trim();r&&t.add(r)}),Array.from(t)},F7=e=>e.replace(/[%_]/g,t=>`\\${t}`).replace(/,/g,"\\,"),Uj=async e=>{var c;const t=e.senderRole??"renter",n=e.senderName??(t==="host"?e.hostEmail??e.hostName:e.renterName),r=ah(e.senderId),s={version:1,text:e.body,senderRole:t,senderName:n,senderId:r,hostName:e.hostEmail??e.hostName,hostEmail:e.hostEmail??null,renterName:e.renterName,renterEmail:e.renterEmail??((c=e.renterName)!=null&&c.includes("@")?e.renterName:null)},i={couch_id:e.couchId,host_id:ah(e.hostId),host_name:e.hostEmail??e.hostName,renter_id:ah(e.renterId),renter_name:e.renterName,body:JSON.stringify(s),sent_at:e.sentAt??new Date().toISOString()},{data:a,error:l}=await be.from("messages").insert(i).select().single();if(l)throw l;return hw(a)},zj=async(e,t)=>{const n=ah(e),r=D7(t),s=[];if(n&&s.push(`renter_id.eq.${n}`),r.forEach(c=>{s.push(`renter_name.ilike.%${F7(c)}%`)}),s.length===0)return[];let i=be.from("messages").select("*").order("sent_at",{ascending:!0});s.length===1&&s[0].startsWith("renter_id.eq.")?i=i.eq("renter_id",n):i=i.or(s.join(","));const{data:a,error:l}=await i;if(l)throw l;return(a??[]).map(hw)};function $7(e,t){return g.useReducer((n,r)=>t[n][r]??n,e)}var fw="ScrollArea",[Bj,Pq]=Vn(fw),[U7,Rr]=Bj(fw),Wj=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=e,[l,c]=g.useState(null),[h,f]=g.useState(null),[m,v]=g.useState(null),[y,S]=g.useState(null),[x,b]=g.useState(null),[E,_]=g.useState(0),[C,k]=g.useState(0),[T,R]=g.useState(!1),[O,A]=g.useState(!1),W=Ue(t,X=>c(X)),G=Uu(s);return d.jsx(U7,{scope:n,type:r,dir:G,scrollHideDelay:i,scrollArea:l,viewport:h,onViewportChange:f,content:m,onContentChange:v,scrollbarX:y,onScrollbarXChange:S,scrollbarXEnabled:T,onScrollbarXEnabledChange:R,scrollbarY:x,onScrollbarYChange:b,scrollbarYEnabled:O,onScrollbarYEnabledChange:A,onCornerWidthChange:_,onCornerHeightChange:k,children:d.jsx(Ce.div,{dir:G,...a,ref:W,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});Wj.displayName=fw;var Hj="ScrollAreaViewport",Vj=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=e,a=Rr(Hj,n),l=g.useRef(null),c=Ue(t,l,a.onViewportChange);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),d.jsx(Ce.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:d.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Vj.displayName=Hj;var Ns="ScrollAreaScrollbar",pw=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Rr(Ns,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,l=e.orientation==="horizontal";return g.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),s.type==="hover"?d.jsx(z7,{...r,ref:t,forceMount:n}):s.type==="scroll"?d.jsx(B7,{...r,ref:t,forceMount:n}):s.type==="auto"?d.jsx(Gj,{...r,ref:t,forceMount:n}):s.type==="always"?d.jsx(mw,{...r,ref:t}):null});pw.displayName=Ns;var z7=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Rr(Ns,e.__scopeScrollArea),[i,a]=g.useState(!1);return g.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const h=()=>{window.clearTimeout(c),a(!0)},f=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),d.jsx(on,{present:n||i,children:d.jsx(Gj,{"data-state":i?"visible":"hidden",...r,ref:t})})}),B7=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Rr(Ns,e.__scopeScrollArea),i=e.orientation==="horizontal",a=yp(()=>c("SCROLL_END"),100),[l,c]=$7("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(l==="idle"){const h=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(h)}},[l,s.scrollHideDelay,c]),g.useEffect(()=>{const h=s.viewport,f=i?"scrollLeft":"scrollTop";if(h){let m=h[f];const v=()=>{const y=h[f];m!==y&&(c("SCROLL"),a()),m=y};return h.addEventListener("scroll",v),()=>h.removeEventListener("scroll",v)}},[s.viewport,i,c,a]),d.jsx(on,{present:n||l!=="hidden",children:d.jsx(mw,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:ue(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ue(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Gj=g.forwardRef((e,t)=>{const n=Rr(Ns,e.__scopeScrollArea),{forceMount:r,...s}=e,[i,a]=g.useState(!1),l=e.orientation==="horizontal",c=yp(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?h:f)}},10);return xl(n.viewport,c),xl(n.content,c),d.jsx(on,{present:r||i,children:d.jsx(mw,{"data-state":i?"visible":"hidden",...s,ref:t})})}),mw=g.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=Rr(Ns,e.__scopeScrollArea),i=g.useRef(null),a=g.useRef(0),[l,c]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=Qj(l.viewport,l.content),f={...r,sizes:l,onSizesChange:c,hasThumb:h>0&&h<1,onThumbChange:v=>i.current=v,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:v=>a.current=v};function m(v,y){return Y7(v,a.current,l,y)}return n==="horizontal"?d.jsx(W7,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const v=s.viewport.scrollLeft,y=P1(v,l,s.dir);i.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollLeft=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollLeft=m(v,s.dir))}}):n==="vertical"?d.jsx(H7,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const v=s.viewport.scrollTop,y=P1(v,l);i.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollTop=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollTop=m(v))}}):null}),W7=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=Rr(Ns,e.__scopeScrollArea),[a,l]=g.useState(),c=g.useRef(null),h=Ue(t,c,i.onScrollbarXChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),d.jsx(Yj,{"data-orientation":"horizontal",...s,ref:h,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":vp(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(i.viewport){const v=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(v),Jj(v,m)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:df(a.paddingLeft),paddingEnd:df(a.paddingRight)}})}})}),H7=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=Rr(Ns,e.__scopeScrollArea),[a,l]=g.useState(),c=g.useRef(null),h=Ue(t,c,i.onScrollbarYChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),d.jsx(Yj,{"data-orientation":"vertical",...s,ref:h,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":vp(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(i.viewport){const v=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(v),Jj(v,m)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:df(a.paddingTop),paddingEnd:df(a.paddingBottom)}})}})}),[V7,qj]=Bj(Ns),Yj=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:h,onWheelScroll:f,onResize:m,...v}=e,y=Rr(Ns,n),[S,x]=g.useState(null),b=Ue(t,W=>x(W)),E=g.useRef(null),_=g.useRef(""),C=y.viewport,k=r.content-r.viewport,T=Tt(f),R=Tt(c),O=yp(m,10);function A(W){if(E.current){const G=W.clientX-E.current.left,X=W.clientY-E.current.top;h({x:G,y:X})}}return g.useEffect(()=>{const W=G=>{const X=G.target;(S==null?void 0:S.contains(X))&&T(G,k)};return document.addEventListener("wheel",W,{passive:!1}),()=>document.removeEventListener("wheel",W,{passive:!1})},[C,S,k,T]),g.useEffect(R,[r,R]),xl(S,O),xl(y.content,O),d.jsx(V7,{scope:n,scrollbar:S,hasThumb:s,onThumbChange:Tt(i),onThumbPointerUp:Tt(a),onThumbPositionChange:R,onThumbPointerDown:Tt(l),children:d.jsx(Ce.div,{...v,ref:b,style:{position:"absolute",...v.style},onPointerDown:ue(e.onPointerDown,W=>{W.button===0&&(W.target.setPointerCapture(W.pointerId),E.current=S.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),A(W))}),onPointerMove:ue(e.onPointerMove,A),onPointerUp:ue(e.onPointerUp,W=>{const G=W.target;G.hasPointerCapture(W.pointerId)&&G.releasePointerCapture(W.pointerId),document.body.style.webkitUserSelect=_.current,y.viewport&&(y.viewport.style.scrollBehavior=""),E.current=null})})})}),uf="ScrollAreaThumb",Zj=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=qj(uf,e.__scopeScrollArea);return d.jsx(on,{present:n||s.hasThumb,children:d.jsx(G7,{ref:t,...r})})}),G7=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,i=Rr(uf,n),a=qj(uf,n),{onThumbPositionChange:l}=a,c=Ue(t,m=>a.onThumbChange(m)),h=g.useRef(void 0),f=yp(()=>{h.current&&(h.current(),h.current=void 0)},100);return g.useEffect(()=>{const m=i.viewport;if(m){const v=()=>{if(f(),!h.current){const y=Z7(m,l);h.current=y,l()}};return l(),m.addEventListener("scroll",v),()=>m.removeEventListener("scroll",v)}},[i.viewport,f,l]),d.jsx(Ce.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ue(e.onPointerDownCapture,m=>{const y=m.target.getBoundingClientRect(),S=m.clientX-y.left,x=m.clientY-y.top;a.onThumbPointerDown({x:S,y:x})}),onPointerUp:ue(e.onPointerUp,a.onThumbPointerUp)})});Zj.displayName=uf;var gw="ScrollAreaCorner",Kj=g.forwardRef((e,t)=>{const n=Rr(gw,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?d.jsx(q7,{...e,ref:t}):null});Kj.displayName=gw;var q7=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=Rr(gw,n),[i,a]=g.useState(0),[l,c]=g.useState(0),h=!!(i&&l);return xl(s.scrollbarX,()=>{var m;const f=((m=s.scrollbarX)==null?void 0:m.offsetHeight)||0;s.onCornerHeightChange(f),c(f)}),xl(s.scrollbarY,()=>{var m;const f=((m=s.scrollbarY)==null?void 0:m.offsetWidth)||0;s.onCornerWidthChange(f),a(f)}),h?d.jsx(Ce.div,{...r,ref:t,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function df(e){return e?parseInt(e,10):0}function Qj(e,t){const n=e/t;return isNaN(n)?0:n}function vp(e){const t=Qj(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Y7(e,t,n,r="ltr"){const s=vp(n),i=s/2,a=t||i,l=s-a,c=n.scrollbar.paddingStart+a,h=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,m=r==="ltr"?[0,f]:[f*-1,0];return Xj([c,h],m)(e)}function P1(e,t,n="ltr"){const r=vp(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,a=t.content-t.viewport,l=i-r,c=n==="ltr"?[0,a]:[a*-1,0],h=Hv(e,c);return Xj([0,a],[0,l])(h)}function Xj(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Jj(e,t){return e>0&&e<t}var Z7=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},a=n.left!==i.left,l=n.top!==i.top;(a||l)&&t(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function yp(e,t){const n=Tt(e),r=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),g.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function xl(e,t){const n=Tt(t);Ot(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var eR=Wj,K7=Vj,Q7=Kj;const tR=g.forwardRef(({className:e,children:t,...n},r)=>d.jsxs(eR,{ref:r,className:Te("relative overflow-hidden",e),...n,children:[d.jsx(K7,{className:"h-full w-full rounded-[inherit]",children:t}),d.jsx(nR,{}),d.jsx(Q7,{})]}));tR.displayName=eR.displayName;const nR=g.forwardRef(({className:e,orientation:t="vertical",...n},r)=>d.jsx(pw,{ref:r,orientation:t,className:Te("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:d.jsx(Zj,{className:"relative flex-1 rounded-full bg-border"})}));nR.displayName=pw.displayName;const X7=({open:e,onOpenChange:t,thread:n,currentUserRole:r,onSendMessage:s,sending:i=!1})=>{const[a,l]=g.useState(""),c=g.useMemo(()=>n?[...n.messages].sort((m,v)=>new Date(m.sentAt).getTime()-new Date(v.sentAt).getTime()):[],[n]),h=async()=>{a.trim()&&(await s(a.trim()),l(""))},f=g.useMemo(()=>n?`Chat with ${r==="host"?n.renterName??"Guest":n.hostName??"Host"}`:"Conversation",[n,r]);return d.jsx(nw,{open:e,onOpenChange:m=>{l(""),t(m)},children:d.jsxs(cp,{className:"max-w-lg",children:[d.jsxs(up,{children:[d.jsx(dp,{children:f}),(n==null?void 0:n.couchId)&&d.jsxs(hp,{className:"text-xs text-muted-foreground",children:["Couch reference: ",n.couchId]})]}),d.jsx(tR,{className:"max-h-80 rounded-md border border-sketch p-3 bg-background/50",children:d.jsxs("div",{className:"space-y-3",children:[c.map(m=>{const v=m.senderRole===r;return d.jsxs("div",{className:`flex flex-col ${v?"items-end":"items-start"}`,children:[d.jsx("div",{className:`max-w-[85%] rounded-lg px-3 py-2 text-sm shadow-sm ${v?"bg-sketch-blue text-white":"bg-muted"}`,children:d.jsx("p",{className:"whitespace-pre-line leading-relaxed",children:m.text})}),d.jsxs("span",{className:"mt-1 text-[10px] uppercase tracking-wide text-muted-foreground",children:[v?"You":m.senderName??(v?"You":"Partner")," "," ",Je(new Date(m.sentAt),"MMM d, yyyy HH:mm")]})]},m.id)}),!c.length&&d.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Start the conversation by sending a message."})]})}),d.jsxs(rw,{className:"flex flex-col gap-3 sm:flex-col",children:[d.jsx(Rl,{value:a,onChange:m=>l(m.target.value),placeholder:"Type your message...",rows:3}),d.jsx(Me,{onClick:h,disabled:i||!a.trim(),children:i?"Sending...":"Send message"})]})]})})},J7=({queryKey:e,matcher:t})=>{const n=Tl(),r=JSON.stringify(e);g.useEffect(()=>{const s=`messages-${r}-${Math.random().toString(36).slice(2)}`,i=be.channel(s),a=l=>{const c=l.new;if(!c)return;const h=hw(c);t(h)&&n.invalidateQueries({queryKey:e})};return i.on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},a).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages"},a).subscribe(),()=>{be.removeChannel(i)}},[r,t,n,e])},oy=({queryKey:e,matcher:t})=>{const n=Tl(),r=JSON.stringify(e);g.useEffect(()=>{const s=`booking-requests-${r}-${Math.random().toString(36).slice(2)}`,i=be.channel(s),a=l=>{if(!l.new)return;const c=Ll(l.new);t(c)&&n.invalidateQueries({queryKey:e})};return i.on("postgres_changes",{event:"INSERT",schema:"public",table:"booking_requests"},a).on("postgres_changes",{event:"UPDATE",schema:"public",table:"booking_requests"},a).subscribe(),()=>{be.removeChannel(i)}},[r,t,n,e])},eV=()=>{const{profile:e}=jr(),t=es(),n=Tl(),{toast:r}=Ps(),s=(e==null?void 0:e.id)??null,i=g.useMemo(()=>{const U=new Set,M=ee=>{if(!ee)return;const V=ee.trim();V&&U.add(V)};return M(e==null?void 0:e.full_name),e!=null&&e.full_name&&M(e.full_name.split(" ")[0]),M(e==null?void 0:e.email),e!=null&&e.email&&M(e.email.split("@")[0]),Array.from(U)},[e==null?void 0:e.full_name,e==null?void 0:e.email]),a=i.join("|"),l=g.useMemo(()=>i.map(U=>U.toLowerCase()),[i]),c=g.useCallback(U=>{const M=s&&U.renterId&&U.renterId===s,ee=(U.renterName??"").toLowerCase(),V=(U.renterEmail??"").toLowerCase(),Y=l.some(j=>ee.includes(j)||V.includes(j));return!!(M||Y)},[s,l]),h=g.useCallback(U=>{const M=s&&U.renterId&&U.renterId===s,ee=(U.renterName??"").toLowerCase(),V=l.some(Y=>ee.includes(Y));return!!(M||V)},[s,l]),f=Mc({queryKey:["booking-requests",s,a],queryFn:()=>fp(s,i),enabled:!!(s||i.length)}),m=Mc({queryKey:["messages",s,a],queryFn:()=>zj(s,i),enabled:!!(s||i.length)});J7({queryKey:["messages",s,a],matcher:c}),oy({queryKey:["booking-requests",s,a],matcher:h});const[v,y]=g.useState(null),[S,x]=g.useState(!1),[b,E]=g.useState(!1),[_,C]=g.useState({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null}),k=Oc({mutationFn:async({thread:U,text:M})=>{const ee=U.hostName??"Host",V=(e==null?void 0:e.full_name)??(e==null?void 0:e.email)??U.renterName??"You";await Uj({couchId:U.couchId??`thread-${U.threadKey}`,hostId:U.hostId,hostName:ee,hostEmail:U.hostEmail??null,renterId:e==null?void 0:e.id,renterName:V,renterEmail:(e==null?void 0:e.email)??null,body:M,senderRole:"renter",senderId:e==null?void 0:e.id,senderName:V})},onSuccess:()=>{n.invalidateQueries({queryKey:["messages",s,a]})},onError:U=>{console.error("Failed to send message",U),r({title:"Unable to send",description:"We couldn't deliver your message. Please try again.",variant:"destructive"})}}),T=Oc({mutationFn:async({request:U,summary:M})=>{if(U.paymentStatus==="paid")throw new Error("This stay has already been paid for.");return U.paymentClientSecret&&U.paymentStatus!=="expired"?{clientSecret:U.paymentClientSecret,paymentDue:U.paymentDueAt??void 0}:$j({bookingId:U.id,amount:M.totalDue,renterEmail:(e==null?void 0:e.email)??null})},onSuccess:(U,M)=>{C({booking:M.request,clientSecret:U.clientSecret,amountLabel:M.summary.amountLabel,paymentDueAt:U.paymentDue??M.request.paymentDueAt??null}),E(!0),n.invalidateQueries({queryKey:["booking-requests",s,a]})},onError:U=>{const M=U instanceof Error?U.message:"We couldn't start checkout.";r({title:"Payment unavailable",description:M,variant:"destructive"})}}),R=g.useMemo(()=>f.data??[],[f.data]),O=g.useMemo(()=>m.data??[],[m.data]),A=g.useMemo(()=>{const U=new Map;return O.forEach(M=>{const ee=M.hostName??"Host",V=M.renterName??(e==null?void 0:e.full_name)??"You",j=[M.couchId??"general",ee??"host",V??"you"].join("::"),$=U.get(j);$?$.messages.push(M):U.set(j,{threadKey:j,couchId:M.couchId,hostId:M.hostId,hostName:ee,hostEmail:M.hostEmail,renterId:(e==null?void 0:e.id)??M.renterId,renterName:V,renterEmail:M.renterEmail??(e==null?void 0:e.email)??null,messages:[M]})}),Array.from(U.values()).sort((M,ee)=>{const V=M.messages[M.messages.length-1],Y=ee.messages[ee.messages.length-1];return new Date(Y.sentAt).getTime()-new Date(V.sentAt).getTime()})},[O,e==null?void 0:e.full_name,e==null?void 0:e.email,e==null?void 0:e.id]),W=U=>{y(U),x(!0)},G=async U=>{v&&await k.mutateAsync({thread:v,text:U})},X=g.useCallback(U=>{if(U.status!=="approved"){r({title:"Host approval pending",description:"Your host needs to approve the stay before you can pay."});return}if(U.paymentStatus==="paid"){r({title:"Already paid",description:"Thanks! We've already received payment for this stay."});return}if(U.paymentStatus==="expired"){r({title:"Payment window expired",description:"Ask your host to re-approve the booking to reopen payment.",variant:"destructive"});return}const M=cf(U.pricePerNight??null,U.nights);if(!M){r({title:"Payment unavailable",description:"We couldn't calculate the total for this stay yet. Please check with your host.",variant:"destructive"});return}T.mutate({request:U,summary:M})},[T,r]),H=(U,M)=>{const ee=U?new Date(U):null;return!ee||Number.isNaN(ee.getTime())?"Unknown date":Je(ee,M)};return d.jsxs("main",{className:"dreamy-bg min-h-screen px-4 py-6",children:[d.jsxs("header",{className:"mb-8 flex items-center justify-between gap-3",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-sketch-dark",children:"Your dashboard"}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"Track booking status and keep conversations going with hosts."})]}),d.jsx("div",{className:"flex gap-2",children:d.jsx(Me,{variant:"outline",size:"sm",onClick:()=>t("/listings"),children:"Back to listings"})})]}),!s&&d.jsx("div",{className:"sketch-card p-4 text-center text-sm text-muted-foreground",children:"Sign in as a renter to view your requests and messages."}),s&&d.jsxs("div",{className:"space-y-6",children:[d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-sketch-dark",children:"Booking requests"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending stays you've requested from hosts."})]}),f.isLoading&&d.jsx("div",{className:"sketch-card p-4 text-sm text-muted-foreground",children:"Loading your booking requests..."}),f.isError&&d.jsx("div",{className:"sketch-card p-4 text-sm text-destructive",children:"Unable to load booking requests right now. Please refresh the page."}),!f.isLoading&&!f.isError&&R.length===0&&d.jsx("div",{className:"sketch-card p-4 text-sm text-muted-foreground",children:"You haven't sent any booking requests yet."}),!f.isLoading&&!f.isError&&R.length>0&&d.jsx("div",{className:"space-y-3",children:R.map(U=>{var oe;const M=cf(U.pricePerNight??null,U.nights),ee=U.paymentDueAt?H(U.paymentDueAt,"MMM d, yyyy HH:mm"):null,V=U.paymentStatus,Y=T.isPending&&((oe=T.variables)==null?void 0:oe.request.id)===U.id,j=V==="paid",$=U.status==="approved"&&!j,q=V==="paid"?"Payment received. You're all set!":V==="failed"?"Your last payment attempt failed. Try again when you're ready.":V==="pending"?ee?`Finish payment by ${ee} to keep this reservation.`:"Finish payment to confirm your stay.":V==="expired"?"Payment window expired. Ask your host to reopen it.":"Complete payment to confirm your approved stay.";return d.jsxs("div",{className:"sketch-card p-4 grid gap-2",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-base font-semibold text-sketch-dark",children:U.couchTitle??"Couch request"}),d.jsx("span",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:U.status})]}),d.jsx("p",{className:"text-sm text-muted-foreground",children:U.hostName?`Host: ${U.hostName}`:"Host details pending"}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[H(U.stayStart,"MMM d, yyyy"),"  ",H(U.stayEnd,"MMM d, yyyy"),"  ",U.nights??"?"," night",U.nights===1?"":"s"]}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Requested on ",H(U.createdAt,"MMM d, yyyy")]}),($||j)&&d.jsxs("div",{className:"rounded-xl border border-emerald-200/70 bg-emerald-50/40 p-4 space-y-3",children:[d.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-semibold text-emerald-900",children:j?"Payment complete":"Payment required"}),d.jsx("p",{className:"text-xs text-emerald-800",children:q}),j&&d.jsxs("p",{className:"text-xs font-medium text-emerald-900",children:["Reserved for ",H(U.stayStart,"MMM d, yyyy"),"  Arrival ",H(U.stayStart,"HH:mm")]})]}),M&&d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-base font-semibold text-emerald-900",children:M.amountLabel}),d.jsxs("p",{className:"text-xs text-emerald-800",children:[M.nights," night",M.nights===1?"":"s"," at ",U.pricePerNight??""]})]})]}),$&&M&&d.jsx("div",{className:"flex flex-wrap gap-2",children:d.jsx(Me,{size:"sm",className:"rounded-full",disabled:Y,onClick:()=>X(U),children:Y?"Preparing checkout":"Pay now"})}),!M&&d.jsx("p",{className:"text-xs text-emerald-800",children:"The host hasn't set a nightly rate yet, so we can't calculate the total."}),V==="expired"&&d.jsx("p",{className:"text-xs text-rose-700",children:"Payment window expired. Ask the host to re-approve the request to try again."}),V==="failed"&&d.jsx("p",{className:"text-xs text-rose-700",children:"Payment failed. Double-check your card or try another method."})]})]},U.id)})})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-sketch-dark",children:"Conversations"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Chat with hosts in real time."})]}),m.isLoading&&d.jsx("div",{className:"sketch-card p-4 text-sm text-muted-foreground",children:"Loading your messages..."}),m.isError&&d.jsx("div",{className:"sketch-card p-4 text-sm text-destructive",children:"Unable to load your messages right now. Please refresh the page."}),!m.isLoading&&!m.isError&&A.length===0&&d.jsx("div",{className:"sketch-card p-4 text-sm text-muted-foreground",children:"Send a note from a couch detail page to start a conversation."}),!m.isLoading&&!m.isError&&A.length>0&&d.jsx("div",{className:"space-y-3",children:A.map(U=>{const M=U.messages[U.messages.length-1],ee=M.senderRole==="renter"?"You:":`${U.hostName??"Host"}:`;return d.jsx("button",{onClick:()=>W(U),className:"w-full text-left sketch-card p-4 hover:bg-sketch-light transition",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-sketch-dark text-sm",children:U.hostName??"Host"}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:[ee," ",M.text]})]}),d.jsx("span",{className:"text-xs text-muted-foreground",children:Je(new Date(M.sentAt),"MMM d, HH:mm")})]})},U.threadKey)})})]})]}),d.jsx(X7,{open:S,onOpenChange:U=>{x(U),U||y(null)},thread:v,currentUserRole:"renter",onSendMessage:G,sending:k.isPending}),d.jsx(Fj,{open:b,onOpenChange:U=>{E(U),U||C({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null})},booking:_.booking,clientSecret:_.clientSecret,amountLabel:_.amountLabel,paymentDueAt:_.paymentDueAt,onPaymentSuccess:async()=>{var M;const U=(M=_.booking)==null?void 0:M.id;if(U){const ee=V=>Array.isArray(V)?V.map(Y=>Y.id===U?{...Y,paymentStatus:"paid",status:"approved"}:Y):V;n.setQueryData(["booking-requests",s,a],ee),n.setQueryData(["host-manage-renter",s,a],ee)}r({title:"Payment successful",description:"Your stay is confirmedcheck your email for the receipt."}),E(!1),C({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null})}})]})},tV=[{value:"bsc",label:"Bachelor (BSc)"},{value:"msc",label:"Master (MSc)"},{value:"phd",label:"Doctorate (PhD)"},{value:"other",label:"Other program"}],nV={bsc:"Bachelor (BSc)",msc:"Master (MSc)",phd:"Doctorate (PhD)",other:"Other program"},rV=["1","2","3","4","5"],k1="couch-photos",sV=e=>{const t=e.name.split(".").pop();return`${typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(36).slice(2)}${t?`.${t}`:""}`},iV=async(e,t)=>{const n=sV(t),r=`avatars/${e}/${n}`,{error:s}=await be.storage.from(k1).upload(r,t,{cacheControl:"3600",upsert:!0});if(s)throw new Error(s.message??"Failed to upload profile photo.");const{data:i}=be.storage.from(k1).getPublicUrl(r);if(!(i!=null&&i.publicUrl))throw new Error("Unable to fetch uploaded profile photo URL.");return i.publicUrl},oV=()=>{var $,q,oe,B,ce;const{profile:e,refreshUser:t}=jr(),n=es(),{toast:r}=Ps(),[s,i]=g.useState({fullName:"",userRole:"renter",avatarUrl:"",bio:"",university:"",programName:"",programYear:"",programType:"",studentIdUrl:""}),[a,l]=g.useState(!0),[c,h]=g.useState(!1),[f,m]=g.useState(null),[v,y]=g.useState(null),[S,x]=g.useState(""),b=g.useRef(null),E=(e==null?void 0:e.email)??"",_=!!(e!=null&&e.user_role);g.useEffect(()=>{(async()=>{if(!(e!=null&&e.id)){l(!1);return}try{const te=await mj(e.id).catch(()=>null),Z=(te==null?void 0:te.program_year)??e.program_year??null,re={fullName:(te==null?void 0:te.full_name)??e.full_name??"",userRole:(te==null?void 0:te.user_role)??e.user_role??"renter",avatarUrl:(te==null?void 0:te.avatar_url)??e.avatar_url??"",bio:(te==null?void 0:te.bio)??"",university:(te==null?void 0:te.university)??e.university??"",programName:(te==null?void 0:te.program_name)??e.program_name??"",programYear:Z?String(Z):"",programType:(te==null?void 0:te.program_type)??e.program_type??"",studentIdUrl:(te==null?void 0:te.student_id_url)??e.student_id_url??""};i(re),x(re.avatarUrl??""),m(null),b.current&&(URL.revokeObjectURL(b.current),b.current=null)}catch(te){console.warn("Failed to fetch profile",te),(e.full_name||e.avatar_url)&&(i({fullName:e.full_name??"",userRole:e.user_role??"renter",avatarUrl:e.avatar_url??"",bio:e.bio??"",university:e.university??"",programName:e.program_name??"",programYear:e.program_year?String(e.program_year):"",programType:e.program_type??"",studentIdUrl:e.student_id_url??""}),x(e.avatar_url??""),m(null))}finally{l(!1)}})()},[e==null?void 0:e.avatar_url,e==null?void 0:e.bio,e==null?void 0:e.full_name,e==null?void 0:e.id,e==null?void 0:e.user_role]),g.useEffect(()=>()=>{b.current&&URL.revokeObjectURL(b.current)},[]);const C=g.useMemo(()=>e?(s.fullName??"")!==(e.full_name??"")||s.userRole!==(e.user_role??"renter")||(s.avatarUrl??"")!==(e.avatar_url??"")||(s.bio??"")!==(e.bio??"")||(s.university??"")!==(e.university??"")||(s.programName??"")!==(e.program_name??"")||(s.programYear??"")!==(e.program_year?String(e.program_year):"")||(s.programType??"")!==(e.program_type??"")||(s.studentIdUrl??"")!==(e.student_id_url??"")||!!f||!!v:!0,[s,e,f,v]),k=(Q,te)=>{i(Z=>({...Z,[Q]:te}))},T=async Q=>{if(Q.preventDefault(),!!e){h(!0);try{let te=s.avatarUrl;f&&(te=await iV(e.id,f));let Z=s.studentIdUrl;v&&(Z=await bj(e.id,v));const re=_?e.user_role??s.userRole:s.userRole,fe=s.programYear?Number(s.programYear):null,Pe=fe&&Number.isFinite(fe)?fe:null,z=s.university.trim(),ne=s.programName.trim(),se=await dw({id:e.id,email:e.email,full_name:s.fullName||null,user_role:re,avatar_url:te||null,bio:s.bio?s.bio.slice(0,100):null,student_id_url:Z||null,university:z||null,program_name:ne||null,program_year:Pe??null,program_type:s.programType||null});i({fullName:se.full_name??"",userRole:se.user_role,avatarUrl:se.avatar_url??"",bio:se.bio??"",university:se.university??"",programName:se.program_name??"",programYear:se.program_year?String(se.program_year):"",programType:se.program_type??"",studentIdUrl:se.student_id_url??""}),m(null),y(null),b.current&&(URL.revokeObjectURL(b.current),b.current=null),x(se.avatar_url??""),await t(),r({title:"Profile updated",description:"Your information is now up to date."})}catch(te){console.error("Failed to update profile",te),r({title:"Update failed",description:"We couldn't save your changes. Please try again.",variant:"destructive"})}finally{h(!1)}}},R=Q=>{var re;const te=(re=Q.target.files)==null?void 0:re[0];if(!te)return;m(te),b.current&&(URL.revokeObjectURL(b.current),b.current=null);const Z=URL.createObjectURL(te);b.current=Z,x(Z)},O=Q=>{var Z;const te=((Z=Q.target.files)==null?void 0:Z[0])??null;y(te)},A=()=>{y(null)},W=()=>{b.current&&(URL.revokeObjectURL(b.current),b.current=null),m(null),x(s.avatarUrl||(e==null?void 0:e.avatar_url)||"")},X=(_?(e==null?void 0:e.user_role)??s.userRole:s.userRole)==="host"?"Host":"Renter",H=((($=s.fullName)==null?void 0:$.trim())||((q=e==null?void 0:e.full_name)==null?void 0:q.trim())||E||"Student").trim(),U=H.charAt(0).toUpperCase()||"S",M=[!!((oe=s.fullName)!=null&&oe.trim()),!!S,!!((B=s.bio)!=null&&B.trim()),!!((ce=s.university)!=null&&ce.trim())],ee=Math.round(M.filter(Boolean).length/M.length*100),V=g.useMemo(()=>xj(s.university),[s.university]),Y=s.programType?nV[s.programType]:"Add your program",j=s.programYear?`Year ${s.programYear}`:"Add your year";return e?d.jsx("main",{className:"dreamy-bg min-h-screen px-4 py-10",children:d.jsxs("div",{className:"mx-auto flex w-full max-w-5xl flex-col gap-6",children:[d.jsx(Me,{variant:"ghost",className:"w-fit rounded-full bg-white/70 px-4 py-2 text-sm text-slate-600 shadow-sm",onClick:()=>n(-1),children:" Back to dashboard"}),d.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr,1.5fr]",children:[d.jsxs("div",{className:"rounded-[2rem] border border-white/60 bg-white/85 p-6 shadow-2xl shadow-blue-100/50 backdrop-blur",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"h-16 w-16 overflow-hidden rounded-full border-4 border-white shadow-lg shadow-blue-100",children:S?d.jsx("img",{src:S,alt:"Profile",className:"h-full w-full object-cover",onError:()=>x("")}):d.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gradient-to-br from-blue-200 to-indigo-300 text-2xl font-semibold text-white",children:U})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Profile overview"}),d.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:H}),d.jsx("p",{className:"text-sm text-slate-500",children:E})]})]}),d.jsxs("div",{className:"mt-6 rounded-[1.5rem] border border-slate-100 bg-slate-50/80 p-4",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm font-medium text-slate-600",children:[d.jsx("span",{children:"Profile completeness"}),d.jsxs("span",{children:[ee,"%"]})]}),d.jsx("div",{className:"mt-2 h-2 rounded-full bg-white/70",children:d.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-500 to-indigo-500",style:{width:`${ee}%`}})}),d.jsx("p",{className:"mt-2 text-xs text-slate-400",children:"Finish your name, photo, and bio to help students recognize you faster."})]}),d.jsxs("dl",{className:"mt-6 grid gap-4 text-sm text-slate-600",children:[d.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-100 bg-white/70 px-4 py-3",children:[d.jsxs("div",{children:[d.jsx("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"User role"}),d.jsx("dd",{className:"text-base font-semibold text-slate-900",children:X})]}),d.jsx("span",{className:"rounded-full bg-indigo-50 px-3 py-1 text-xs font-semibold text-indigo-500",children:X==="Host"?"Hosting couches":"Seeking couches"})]}),d.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white/70 px-4 py-3",children:[d.jsx("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"University"}),d.jsx("dd",{className:"mt-1 text-base font-semibold text-slate-900",children:s.university.trim()||"Add your university"})]}),d.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white/70 px-4 py-3",children:[d.jsx("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Program"}),d.jsxs("dd",{className:"mt-1 space-y-1 text-sm text-slate-600",children:[d.jsx("p",{className:"font-semibold text-slate-900",children:s.programName.trim()||"Add your program"}),d.jsxs("p",{className:"text-xs text-slate-500",children:[s.programType?Y:"Choose program type","  ",s.programYear?j:"Select your year"]})]})]}),d.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white/70 px-4 py-3",children:[d.jsx("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Student ID"}),d.jsxs("dd",{className:"mt-1 flex items-center justify-between text-sm text-slate-600",children:[d.jsx("span",{children:s.studentIdUrl?"Uploaded":"Waiting for upload"}),s.studentIdUrl&&d.jsx("a",{href:s.studentIdUrl,target:"_blank",rel:"noreferrer",className:"text-xs font-semibold text-indigo-600 underline",children:"View"})]})]}),d.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white/70 px-4 py-3",children:[d.jsx("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Tips"}),d.jsxs("dd",{className:"mt-2 space-y-2 text-sm",children:[d.jsx("p",{children:" Add a friendly bio so hosts know how to welcome you."}),d.jsx("p",{children:" Upload a clear profile photo to build trust."})]})]})]})]}),d.jsxs(iw,{className:"rounded-[2rem] border border-white/70 bg-white/95 shadow-2xl shadow-blue-100/60",children:[d.jsxs(HT,{className:"pb-4",children:[d.jsx(ow,{className:"text-2xl font-semibold text-slate-900",children:"Edit your profile"}),d.jsx(aw,{className:"text-sm text-slate-500",children:"Update how other students see you. Your email stays the same for sign in."})]}),d.jsx(VT,{children:a?d.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading your profile"}):d.jsxs("form",{className:"space-y-8",onSubmit:T,children:[d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Account"}),d.jsx("p",{className:"text-sm text-slate-500",children:"We use this info to keep your account secure."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"email",children:"Email"}),d.jsx(wt,{id:"email",value:E,disabled:!0,className:"bg-slate-50 text-slate-500"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Email can't be changed."})]})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Public profile"}),d.jsx("p",{className:"text-sm text-slate-500",children:"These details are visible when students connect with you."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"fullName",children:"Full name"}),d.jsx(wt,{id:"fullName",value:s.fullName,placeholder:"Your full name",onChange:Q=>k("fullName",Q.target.value)})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{children:"User type"}),_?d.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-slate-50/80 px-4 py-3 text-sm text-slate-600",children:[d.jsx("p",{className:"font-semibold text-slate-900",children:X}),d.jsx("p",{className:"text-xs text-slate-500",children:"Contact support if you need to change this later."})]}):d.jsxs(cw,{value:s.userRole,onValueChange:Q=>k("userRole",Q),className:"flex flex-wrap gap-4 rounded-2xl border border-slate-100 bg-slate-50/80 p-3",children:[d.jsxs("div",{className:"flex items-center space-x-2 rounded-full bg-white px-3 py-2 shadow-sm",children:[d.jsx(of,{id:"role-renter",value:"renter"}),d.jsx(tt,{htmlFor:"role-renter",className:"text-sm",children:"Renter"})]}),d.jsxs("div",{className:"flex items-center space-x-2 rounded-full bg-white px-3 py-2 shadow-sm",children:[d.jsx(of,{id:"role-host",value:"host"}),d.jsx(tt,{htmlFor:"role-host",className:"text-sm",children:"Host"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx(tt,{htmlFor:"profilePhoto",children:"Profile photo"}),d.jsxs("div",{className:"flex flex-col gap-4 rounded-2xl border border-slate-100 bg-slate-50/80 p-4 sm:flex-row sm:items-center",children:[d.jsx("div",{className:"h-16 w-16 overflow-hidden rounded-full border border-white shadow",children:S?d.jsx("img",{src:S,alt:"Profile preview",className:"h-full w-full object-cover"}):d.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gradient-to-br from-blue-200 to-indigo-300 text-xl font-semibold text-white",children:U})}),d.jsxs("div",{className:"flex-1 space-y-2",children:[d.jsx(wt,{id:"profilePhoto",type:"file",accept:"image/*",onChange:R,className:"cursor-pointer bg-white"}),d.jsx("p",{className:"text-xs text-slate-500",children:"Upload a clear square image (PNG or JPG)."}),f&&d.jsx(Me,{type:"button",variant:"ghost",size:"sm",className:"px-0 text-xs text-slate-600",onClick:W,children:"Remove selected photo"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Student verification"}),d.jsx("p",{className:"text-sm text-slate-500",children:"Add your university details so hosts know you're an active student."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"university",children:"University"}),d.jsx(wt,{id:"university",value:s.university,onChange:Q=>k("university",Q.target.value),placeholder:"Start typing your university name",autoComplete:"off",className:"h-11 rounded-2xl border-slate-200 bg-white"}),(()=>{const Q=s.university.trim();return!Q||!V.length||V.some(Z=>Z.toLowerCase()===Q.toLowerCase())&&V.length===1?null:d.jsx("div",{className:"max-h-36 overflow-y-auto rounded-2xl border border-slate-200 bg-white",children:V.map(Z=>d.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-sm transition hover:bg-blue-50",onClick:()=>k("university",Z),children:Z},Z))})})()]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"programName",children:"Program name"}),d.jsx(wt,{id:"programName",value:s.programName,onChange:Q=>k("programName",Q.target.value),placeholder:"e.g. Computer Science",className:"h-11 rounded-2xl border-slate-200 bg-white"})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{children:"Program type"}),d.jsxs(Ii,{value:s.programType,onValueChange:Q=>k("programType",Q),children:[d.jsx(qs,{className:"rounded-2xl border-slate-200 bg-white",children:d.jsx(Ai,{placeholder:"Select type"})}),d.jsx(Ys,{children:tV.map(Q=>d.jsx(Vr,{value:Q.value,children:Q.label},Q.value))})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{children:"Year in program"}),d.jsxs(Ii,{value:s.programYear,onValueChange:Q=>k("programYear",Q),children:[d.jsx(qs,{className:"rounded-2xl border-slate-200 bg-white",children:d.jsx(Ai,{placeholder:"Select year"})}),d.jsx(Ys,{children:rV.map(Q=>d.jsxs(Vr,{value:Q,children:["Year ",Q]},Q))})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"studentIdUpload",children:"Student ID"}),d.jsxs("div",{className:"space-y-2 rounded-2xl border border-slate-100 bg-slate-50/80 p-4",children:[d.jsx(wt,{id:"studentIdUpload",type:"file",accept:"image/*,.pdf",onChange:O,className:"cursor-pointer bg-white"}),d.jsx("p",{className:"text-xs text-slate-500",children:"Upload updated, new student ID."}),v&&d.jsx(Me,{type:"button",variant:"ghost",size:"sm",className:"px-0 text-xs text-slate-600",onClick:A,children:"Remove selected document"})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(tt,{htmlFor:"bio",children:"Bio"}),d.jsx(Rl,{id:"bio",rows:4,value:s.bio,placeholder:"Share a bit about yourself",maxLength:100,onChange:Q=>k("bio",Q.target.value),className:"rounded-2xl"}),d.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[d.jsx("p",{children:"Keep it friendlyother students will see this when they interact with you."}),d.jsxs("span",{children:[s.bio.length,"/100"]})]})]})]}),d.jsxs("div",{className:"flex flex-col gap-3 border-t border-slate-100 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[d.jsx(Me,{type:"button",variant:"outline",onClick:()=>n(-1),className:"rounded-full px-6",children:"Cancel"}),d.jsx(Me,{type:"submit",disabled:c||!C,className:"rounded-full px-6",children:c?"Saving":"Save changes"})]})]})})]})]})]})}):d.jsxs("main",{className:"min-h-screen flex flex-col items-center justify-center gap-4",children:[d.jsx("p",{className:"text-muted-foreground",children:"Sign in to edit your profile."}),d.jsx(Me,{onClick:()=>n("/auth"),children:"Go to sign in"})]})},aV=()=>{const{profile:e,session:t}=jr(),n=es(),{toast:r}=Ps(),s=Y0(e,t),[i,a]=g.useState([]),[l,c]=g.useState(!0);g.useEffect(()=>{(async()=>{c(!0);try{const x=await ef(s);a(x)}finally{c(!1)}})()},[s]),g.useEffect(()=>{if(typeof window>"u")return;const S=()=>{s&&ef(s).then(a).catch(()=>{})};return window.addEventListener("wishlist-updated",S),()=>window.removeEventListener("wishlist-updated",S)},[s]);const h=async S=>{if(s){a(x=>x.filter(b=>b.couchId!==S.couchId));try{await Z0(s,S.couchId)}catch(x){console.error("Failed to remove wishlist item",x),r({title:"Couldn't remove",description:"Please try again.",variant:"destructive"}),a(b=>[S,...b])}}},f=g.useMemo(()=>i.map(S=>{const x=S.snapshot??{id:S.couchId,image:Qi,price:"$0",title:"Saved couch",host:"Community host",hostEmail:null,location:"Location shared after booking",availableDates:"Flexible availability",description:"",hostId:null,availability:null,coordinates:null};return{...S,snapshot:{...x,id:x.id??S.couchId,image:x.image||Qi,title:x.title||"Saved couch",price:x.price||"$0",host:x.host||"Community host",location:x.location||"Location shared after booking",availableDates:x.availableDates||"Flexible availability",description:x.description??""}}}).filter(S=>{var x;return!!((x=S.snapshot)!=null&&x.id)}),[i]),m=g.useMemo(()=>!l&&f.length===0,[l,f]);if(!s)return d.jsxs("main",{className:"min-h-screen flex flex-col items-center justify-center gap-3",children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Sign in to build your wishlist."}),d.jsx(Me,{onClick:()=>n("/auth"),children:"Go to sign in"})]});const v=()=>d.jsx("div",{className:"grid gap-6 sm:grid-cols-2",children:Array.from({length:4}).map((S,x)=>d.jsxs("div",{className:"animate-pulse rounded-[2rem] border border-white/70 bg-white/60 p-4 shadow-lg shadow-blue-100/30",children:[d.jsx("div",{className:"h-48 rounded-2xl bg-slate-200"}),d.jsx("div",{className:"mt-4 h-4 rounded bg-slate-200"}),d.jsx("div",{className:"mt-2 h-3 rounded bg-slate-200"})]},`wishlist-skeleton-${x}`))}),y=()=>d.jsxs("div",{className:"rounded-[2.5rem] border border-dashed border-white/70 bg-white/70 p-10 text-center shadow-xl shadow-blue-100/50",children:[d.jsx("div",{className:"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-blue-50 text-blue-500",children:d.jsx(Oh,{className:"h-8 w-8"})}),d.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Start building your wishlist"}),d.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Tap the heart icon on any couch to keep it handy. Well sync them across all your devices."}),d.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-3",children:[d.jsx(Me,{className:"rounded-full px-6",onClick:()=>n("/listings"),children:"Browse calming couches"}),d.jsx(Me,{variant:"outline",className:"rounded-full px-6",onClick:()=>n("/profile"),children:"Update profile"})]})]});return d.jsx("main",{className:"dreamy-bg min-h-screen px-4 py-10",children:d.jsxs("div",{className:"mx-auto flex w-full max-w-5xl flex-col gap-8",children:[d.jsxs("section",{className:"rounded-[2.5rem] border border-white/60 bg-white/85 p-6 backdrop-blur-lg shadow-2xl shadow-blue-100/50",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-slate-500",children:"Collection"}),d.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Your wishlist"}),d.jsx("p",{className:"text-sm text-slate-500",children:"Save cozy couches as you browse. You can come back anytime to compare and decide."})]}),d.jsx("div",{className:"mt-6",children:d.jsx(Me,{variant:"outline",className:"rounded-full border-white/70 bg-white/90",onClick:()=>n("/profile"),children:"Update profile"})})]}),l&&v(),m&&!l&&y(),!l&&f.length>0&&d.jsx("div",{className:"grid gap-6 sm:grid-cols-2",children:f.map(S=>d.jsxs(iw,{className:"group relative overflow-hidden rounded-[2.5rem] border border-white/70 bg-white/95 shadow-2xl shadow-blue-100/40 transition hover:-translate-y-1.5",children:[d.jsxs("button",{type:"button",onClick:()=>h(S),className:"absolute right-4 top-4 z-10 rounded-full bg-white/90 p-2 text-rose-500 shadow",children:[d.jsx(Oh,{className:"h-5 w-5 fill-rose-500"}),d.jsx("span",{className:"sr-only",children:"Remove from wishlist"})]}),d.jsxs("div",{className:"relative h-48 overflow-hidden",children:[d.jsx("img",{src:S.snapshot.image,alt:S.snapshot.title,className:"h-full w-full object-cover transition duration-500 group-hover:scale-105"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/0"}),d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex items-center justify-between px-5 pb-4 text-white",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-lg font-semibold",children:S.snapshot.price}),d.jsx("p",{className:"text-xs text-white/70",children:S.snapshot.host})]}),d.jsx("span",{className:"rounded-full bg-white/90 px-3 py-1 text-xs font-semibold text-slate-800",children:"Saved couch"})]})]}),d.jsxs("div",{className:"space-y-4 p-5",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:S.snapshot.title}),d.jsxs("p",{className:"mt-1 flex items-center gap-2 text-sm text-slate-500",children:[d.jsx(u0,{className:"h-4 w-4"}),S.snapshot.location]})]}),d.jsxs("div",{className:"flex flex-wrap gap-2 text-xs font-medium text-slate-600",children:[d.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 px-3 py-1",children:[d.jsx(l0,{className:"h-3 w-3"})," ",S.snapshot.availableDates]}),S.snapshot.description&&d.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 px-3 py-1",children:[S.snapshot.description.slice(0,32),S.snapshot.description.length>32?"":""]})]}),d.jsx(Me,{className:"flex-1 rounded-full",onClick:()=>n(`/couch/${S.snapshot.id}`,{state:{couch:S.snapshot}}),children:"View details"})]})]},S.id))})]})})},lV=Lf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function rR({className:e,variant:t,...n}){return d.jsx("div",{className:Te(lV({variant:t}),e),...n})}const cV=[{label:"All",value:"all"},{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Declined",value:"declined"},{label:"Cancelled",value:"cancelled"}],uV={pending:"bg-amber-100 text-amber-700",approved:"bg-emerald-100 text-emerald-700",declined:"bg-rose-100 text-rose-700",cancelled:"bg-slate-100 text-slate-500"},$d=4,dV=()=>{var fe,Pe;const{profile:e,session:t}=jr(),n=es(),r=Tl(),{toast:s}=Ps(),i=((fe=t==null?void 0:t.user)==null?void 0:fe.id)??(e==null?void 0:e.id)??null,a=((Pe=t==null?void 0:t.user)==null?void 0:Pe.id)??(e==null?void 0:e.id)??null,l=Mc({queryKey:["host-requests-listings",i],queryFn:()=>i?$6(i):[],enabled:!!i,staleTime:1e3*30}),c=g.useMemo(()=>l.data??[],[l.data]),h=g.useMemo(()=>{const z=new Set,ne=se=>{if(!se)return;const Oe=se.trim();Oe&&z.add(Oe)};return ne(e==null?void 0:e.full_name),e!=null&&e.full_name&&ne(e.full_name.split(" ")[0]),ne(e==null?void 0:e.email),e!=null&&e.email&&ne(e.email.split("@")[0]),c.forEach(se=>{ne(se.hostName),ne(se.hostEmail)}),Array.from(z)},[c,e==null?void 0:e.email,e==null?void 0:e.full_name]),f=g.useMemo(()=>{const z=new Set;return c.forEach(ne=>{ne.id&&z.add(ne.id)}),Array.from(z)},[c]),m=h.join("|"),v=f.join("|"),y=g.useMemo(()=>h.map(z=>z.toLowerCase()),[h]),S=g.useMemo(()=>new Set(f.filter(Boolean)),[f]),x=g.useMemo(()=>{const z=new Set,ne=se=>{if(!se)return;const Oe=se.trim();Oe&&z.add(Oe)};return ne(e==null?void 0:e.full_name),e!=null&&e.full_name&&ne(e.full_name.split(" ")[0]),ne(e==null?void 0:e.email),e!=null&&e.email&&ne(e.email.split("@")[0]),Array.from(z)},[e==null?void 0:e.email,e==null?void 0:e.full_name]),b=x.join("|"),E=g.useMemo(()=>x.map(z=>z.toLowerCase()),[x]),_=Mc({queryKey:["host-manage-requests",i,m,v],queryFn:()=>R8(i,h,f),enabled:!!(i||h.length||f.length)}),C=Mc({queryKey:["host-manage-renter",a,b],queryFn:()=>fp(a,x),enabled:!!(a||x.length)}),k=g.useCallback(z=>{const ne=i&&z.hostId&&z.hostId===i,se=(z.hostName??"").toLowerCase(),Oe=y.some(jt=>se.includes(jt)),rt=z.couchId?S.has(z.couchId):!1;return!!(ne||Oe||rt)},[i,y,S]),T=g.useCallback(z=>{const ne=a&&z.renterId&&z.renterId===a,se=(z.renterName??"").toLowerCase(),Oe=E.some(rt=>se.includes(rt));return!!(ne||Oe)},[a,E]);oy({queryKey:["host-manage-requests",i,m,v],matcher:k}),oy({queryKey:["host-manage-renter",a,b],matcher:T});const R=Oc({mutationFn:({id:z,status:ne})=>M8(z,ne),onSuccess:(z,ne)=>{r.invalidateQueries({queryKey:["host-manage-requests",i,m,v]}),s({title:"Request updated",description:`Marked request as ${ne.status}.`})},onError:z=>{console.error("Failed to update booking request",z);const ne=z instanceof Error&&/approved for this listing during the selected dates/i.test(z.message);s({title:ne?"Booking dates overlap":"Update failed",description:ne?"Another reservation has already been approved for these dates. Choose a different request or adjust the stay.":"We couldn't change that booking request. Please try again.",variant:"destructive"})}}),O=Oc({mutationFn:z=>O8(z,a),onSuccess:z=>{r.setQueryData(["host-manage-renter",a,b],ne=>Array.isArray(ne)?ne.map(se=>se.id===z.id?z:se):ne),r.setQueryData(["host-manage-requests",i,m,v],ne=>Array.isArray(ne)?ne.map(se=>se.id===z.id?z:se):ne),s({title:"Request cancelled",description:"This booking request was cancelled."})},onError:z=>{console.error("Failed to cancel booking request",z),s({title:"Unable to cancel",description:"We couldn't cancel that request. Please refresh and try again.",variant:"destructive"})}}),A=Oc({mutationFn:async({request:z,summary:ne})=>{if(z.paymentStatus==="paid")throw new Error("This stay has already been paid for.");return z.paymentClientSecret&&z.paymentStatus!=="expired"?{clientSecret:z.paymentClientSecret,paymentDue:z.paymentDueAt??void 0}:$j({bookingId:z.id,amount:ne.totalDue,renterEmail:(e==null?void 0:e.email)??null})},onSuccess:(z,ne)=>{$({booking:ne.request,clientSecret:z.clientSecret,amountLabel:ne.summary.amountLabel,paymentDueAt:z.paymentDue??ne.request.paymentDueAt??null}),Y(!0),r.invalidateQueries({queryKey:["host-manage-renter",a,b]}),r.invalidateQueries({queryKey:["booking-requests",a,b]})},onError:z=>{const ne=z instanceof Error?z.message:"We couldn't start checkout.";s({title:"Payment unavailable",description:ne,variant:"destructive"})}}),[W,G]=g.useState("pending"),X=!!i&&(e==null?void 0:e.user_role)==="host",[H,U]=g.useState(X?"host":"renter"),[M,ee]=g.useState({host:$d,renter:$d}),[V,Y]=g.useState(!1),[j,$]=g.useState({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null});g.useEffect(()=>{X||U("renter")},[X]);const q=X?[{label:"Received",value:"host"},{label:"Sent",value:"renter"}]:[{label:"Your requests",value:"renter"}],oe=g.useMemo(()=>_.data??[],[_.data]),B=g.useMemo(()=>oe.filter(z=>{const ne=i&&z.hostId===i,se=z.couchId?S.has(z.couchId):!1;return!!(ne||se)}),[oe,S,i]),ce=g.useMemo(()=>C.data??[],[C.data]);g.useEffect(()=>{ee(z=>({...z,[H]:$d}))},[H,W,B.length,ce.length]);const Q=g.useMemo(()=>{const z=H==="host"?B:ce;return W==="all"?z:z.filter(ne=>ne.status===W)},[B,ce,W,H]),te=g.useCallback((z,ne)=>{if(H!=="host"){if(ne!=="cancelled"||z.status==="cancelled"||O.isPending)return;O.mutate(z.id);return}if(z.status==="declined"&&ne==="approved"){s({title:"Can't approve a declined request",description:"Declined bookings stay closed. Ask the renter to submit a new request if plans change."});return}const se=z.status==="approved"&&ne==="declined"?"cancelled":ne;z.status!==se&&R.mutate({id:z.id,status:se})},[O,s,R,H]),Z=g.useCallback(z=>{if(z.status!=="approved"){s({title:"Host approval pending",description:"Your host needs to approve the stay before you can pay."});return}if(z.paymentStatus==="paid"){s({title:"Already paid",description:"Thanks! We've already received payment for this stay."});return}if(z.paymentStatus==="expired"){s({title:"Payment window expired",description:"Ask your host to re-approve the booking to reopen payment.",variant:"destructive"});return}const ne=cf(z.pricePerNight??null,z.nights);if(!ne){s({title:"Payment unavailable",description:"We couldn't calculate the total for this stay yet. Please check with your host.",variant:"destructive"});return}A.mutate({request:z,summary:ne})},[A,s]),re=(z,ne)=>{const se=new Date(z);return Number.isNaN(se.getTime())?"Unknown":Je(se,ne)};return i?d.jsxs("main",{className:"dreamy-bg min-h-screen px-4 py-10",children:[d.jsxs("div",{className:"mx-auto flex w-full max-w-5xl flex-col gap-6",children:[d.jsx("header",{className:"rounded-[2rem] border border-white/60 bg-white/85 p-6 shadow-lg shadow-blue-100/50",children:d.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-muted-foreground",children:"Manage"}),d.jsx("h1",{className:"text-3xl font-semibold text-sketch-dark",children:"Booking requests"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Review every booking in one place and respond when you're ready."})]})})}),d.jsxs("section",{className:"rounded-[2rem] border border-white/60 bg-white/80 p-6 shadow-xl shadow-blue-100/40 space-y-4",children:[d.jsx("div",{className:"flex flex-wrap gap-2",children:q.map(z=>{const ne=H===z.value;return d.jsx("button",{type:"button",onClick:()=>U(z.value),className:`rounded-full px-4 py-1.5 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-400 ${ne?"bg-slate-900 text-white shadow-lg shadow-blue-200/60":"border border-slate-200/80 bg-white/80 text-slate-600"}`,children:z.label},z.value)})}),d.jsx("div",{className:"flex flex-wrap gap-2",children:cV.map(z=>{const ne=W===z.value;return d.jsx("button",{type:"button",onClick:()=>G(z.value),className:`rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-wide transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-400 ${ne?"bg-blue-600 text-white shadow":"border border-slate-200/70 bg-white/80 text-slate-500"}`,children:z.label},z.value)})})]}),!X&&d.jsx("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-5 text-sm text-slate-600 shadow",children:"Only approved hosts can manage booking requests from this page. If you need hosting enabled on your account, reach out to our team."}),X&&l.isSuccess&&c.length===0&&d.jsxs("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-5 text-sm text-slate-600 shadow space-y-3",children:[d.jsx("p",{children:"You haven't published a couch yet. Add one so renters can get in touch."}),d.jsx(Me,{variant:"outline",size:"sm",className:"rounded-full",onClick:()=>n("/listings",{state:{listingScope:"mine"}}),children:"Go to your listing"})]}),H==="host"&&_.isLoading&&d.jsx("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-5 text-sm text-slate-600 shadow",children:"Loading your booking requests"}),H==="renter"&&C.isLoading&&d.jsx("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-5 text-sm text-slate-600 shadow",children:"Loading your sent requests"}),H==="host"&&_.isError&&d.jsx("div",{className:"rounded-[1.75rem] border border-rose-200 bg-white/90 p-5 text-sm text-rose-600 shadow",children:"We couldn't load booking requests. Please refresh and try again."}),H==="renter"&&C.isError&&d.jsx("div",{className:"rounded-[1.75rem] border border-rose-200 bg-white/90 p-5 text-sm text-rose-600 shadow",children:"We couldn't load your reservations. Please refresh and try again."}),!_.isLoading&&!_.isError&&!C.isLoading&&!C.isError&&Q.length===0&&d.jsx("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-5 text-sm text-slate-600 shadow",children:H==="host"?W==="pending"?"You're all caught up! New booking requests will appear here.":"No requests match this filter.":W==="pending"?"You haven't sent any booking requests yet.":"No sent requests match this filter."}),!_.isLoading&&!_.isError&&!C.isLoading&&!C.isError&&Q.length>0&&d.jsxs("div",{className:"space-y-4",children:[Q.slice(0,M[H]).map(z=>d.jsxs("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-6 shadow-lg shadow-blue-100/40 space-y-4",children:[d.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-muted-foreground",children:H==="host"?"Host booking":"Sent booking"}),d.jsx("h3",{className:"text-lg font-semibold text-sketch-dark",children:z.couchTitle??"Couch request"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:H==="host"?`Requested by ${z.renterName??"Unknown renter"}`:`Hosted by ${z.hostName??"Unknown host"}`})]}),d.jsx(rR,{className:`rounded-full px-3 py-1 text-xs uppercase tracking-wide ${uV[z.status]}`,children:z.status})]}),d.jsxs("div",{className:"grid gap-2 text-sm text-muted-foreground sm:grid-cols-2",children:[d.jsxs("span",{children:["Price per night: ",z.pricePerNight??""]}),d.jsxs("span",{children:["Submitted: ",re(z.createdAt,"MMM d, yyyy HH:mm")]}),d.jsxs("span",{children:["Stay: ",re(z.stayStart,"MMM d, yyyy"),"  ",re(z.stayEnd,"MMM d, yyyy"),z.nights?`  ${z.nights} night${z.nights===1?"":"s"}`:""]}),d.jsx("span",{children:H==="host"?`Host: ${z.hostName??"You"}`:`Host: ${z.hostName??"Unknown"}`}),H==="renter"&&d.jsxs("span",{children:["Renter: ",z.renterName??"You"]})]}),H==="renter"&&(()=>{var Xt;const ne=cf(z.pricePerNight??null,z.nights),se=z.paymentStatus,Oe=z.paymentDueAt?re(z.paymentDueAt,"MMM d, yyyy HH:mm"):null,rt=A.isPending&&((Xt=A.variables)==null?void 0:Xt.request.id)===z.id,jt=se==="paid",Vt=z.status==="approved"&&!jt;if(!Vt&&!jt)return null;const Gt=se==="paid"?"Payment received. You're all set!":se==="failed"?"Your last payment attempt failed. Try again when you're ready.":se==="pending"?Oe?`Finish payment by ${Oe} to keep this reservation.`:"Finish payment to confirm your stay.":se==="expired"?"Payment window expired. Ask your host to reopen it.":"Complete payment to confirm your approved stay.";return d.jsxs("div",{className:"rounded-xl border border-emerald-200/70 bg-emerald-50/40 p-4 space-y-3",children:[d.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-semibold text-emerald-900",children:jt?"Payment complete":"Payment required"}),d.jsx("p",{className:"text-xs text-emerald-800",children:Gt}),se==="paid"&&d.jsxs("p",{className:"text-xs font-medium text-emerald-900",children:["Reserved for ",re(z.stayStart,"MMM d, yyyy"),"  Arrival ",re(z.stayStart,"HH:mm")]})]}),ne&&d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-base font-semibold text-emerald-900",children:ne.amountLabel}),d.jsxs("p",{className:"text-xs text-emerald-800",children:[ne.nights," night",ne.nights===1?"":"s"," at ",z.pricePerNight??""]})]})]}),Vt&&ne&&d.jsx("div",{className:"flex flex-wrap gap-2",children:d.jsx(Me,{size:"sm",className:"rounded-full",disabled:rt,onClick:()=>Z(z),children:rt?"Preparing checkout":"Pay now"})}),!ne&&d.jsx("p",{className:"text-xs text-emerald-800",children:"The host hasn't set a nightly rate yet, so we can't calculate the total."}),se==="expired"&&d.jsx("p",{className:"text-xs text-rose-700",children:"Payment window expired. Ask the host to re-approve the request to try again."}),se==="failed"&&d.jsx("p",{className:"text-xs text-rose-700",children:"Payment failed. Double-check your card or try another method."})]})})(),H==="host"?d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsx(Me,{size:"sm",className:"rounded-full",disabled:z.status==="approved"||z.status==="declined"||z.status==="cancelled"||R.isPending,onClick:()=>te(z,"approved"),children:"Approve"}),d.jsx(Me,{size:"sm",variant:"outline",className:"rounded-full",disabled:z.status==="declined"||z.status==="cancelled"||R.isPending,onClick:()=>te(z,"declined"),children:"Decline"})]}):d.jsx("div",{className:"flex flex-wrap gap-2",children:d.jsx(Me,{size:"sm",variant:"outline",className:"rounded-full",disabled:z.status!=="pending"||O.isPending,onClick:()=>te(z,"cancelled"),children:"Cancel request"})})]},z.id)),M[H]<Q.length&&d.jsx("div",{className:"pt-2 text-center",children:d.jsx(Me,{variant:"outline",size:"sm",onClick:()=>ee(z=>({...z,[H]:Math.min(z[H]+$d,Q.length)})),children:"Show more"})})]})]}),d.jsx(Fj,{open:V,onOpenChange:z=>{Y(z),z||$({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null})},booking:j.booking,clientSecret:j.clientSecret,amountLabel:j.amountLabel,paymentDueAt:j.paymentDueAt,onPaymentSuccess:async()=>{var ne;const z=(ne=j.booking)==null?void 0:ne.id;if(z){const se=Oe=>Array.isArray(Oe)?Oe.map(rt=>rt.id===z?{...rt,paymentStatus:"paid",status:"approved"}:rt):Oe;r.setQueryData(["host-manage-renter",a,b],se),r.setQueryData(["host-manage-requests",i,m,v],se),r.setQueryData(["booking-requests",a,b],se)}s({title:"Payment successful",description:"Your stay is confirmedcheck your email for the receipt."}),Y(!1),$({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null})}})]}):d.jsxs("main",{className:"min-h-screen flex flex-col items-center justify-center gap-4",children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Sign in to manage booking requests."}),d.jsx(Me,{onClick:()=>n("/auth"),children:"Go to sign in"})]})},hV=async e=>{const{data:t,error:n}=await be.functions.invoke("transform-note",{body:{content:e}});if(n)throw n;return t},fV=()=>{const{user:e,loading:t}=uw(),[n,r]=g.useState([]),[s,i]=g.useState(""),[a,l]=g.useState(null),[c,h]=g.useState(null),[f,m]=g.useState(null),[v,y]=g.useState(!1),[S,x]=g.useState(!1),b=g.useCallback(async()=>{if(!e){r([]);return}y(!0),l(null);const{data:C,error:k}=await be.from("notes").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(20);k?(l(k.message),r([])):r(C??[]),y(!1)},[e]);g.useEffect(()=>{t||b()},[t,b]);const E=async C=>{if(C.preventDefault(),!e){h("You must be signed in to add a note.");return}const k=s.trim();if(!k){h("Please enter some text before adding a note.");return}x(!0),h(null),m(null);try{const T=await hV(k);m(T.message??"Note added successfully."),i(""),T.note?r(R=>[T.note,...R].slice(0,20)):await b()}catch(T){const R=T instanceof Error?T.message:"Failed to add note";h(R)}x(!1)},_=g.useMemo(()=>n.map(C=>({...C,formattedDate:new Date(C.created_at).toLocaleString()})),[n]);return t?d.jsx("main",{className:"dreamy-bg min-h-screen flex items-center justify-center",children:d.jsx("p",{className:"text-muted-foreground",children:"Checking session"})}):e?d.jsx("main",{className:"dreamy-bg min-h-screen px-4 py-8",children:d.jsxs("div",{className:"mx-auto w-full max-w-2xl space-y-8",children:[d.jsxs("header",{className:"space-y-2",children:[d.jsx("h1",{className:"text-3xl font-bold text-sketch-dark",children:"Notes demo"}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"Add personal notes stored in Supabase. Only you can see your entries."})]}),d.jsxs("form",{onSubmit:E,className:"space-y-3",children:[d.jsxs("div",{className:"flex gap-3",children:[d.jsx(wt,{value:s,onChange:C=>i(C.target.value),placeholder:"Write a note",className:"flex-1"}),d.jsx(Me,{type:"submit",disabled:S,children:S?"Adding":"Add note"})]}),c&&d.jsx("p",{className:"text-sm text-destructive",children:c}),f&&d.jsx("p",{className:"text-sm text-emerald-600",children:f})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h2",{className:"text-lg font-semibold",children:"Latest notes"}),d.jsx(Me,{variant:"outline",size:"sm",onClick:b,disabled:v,children:v?"Refreshing":"Refresh"})]}),a&&d.jsx("p",{className:"text-sm text-destructive",children:a}),!a&&_.length===0&&d.jsx("p",{className:"text-sm text-muted-foreground",children:"No notes yet. Add your first one above!"}),d.jsx("ul",{className:"space-y-3",children:_.map(C=>d.jsxs("li",{className:"sketch-card p-4",children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:C.formattedDate}),d.jsx("p",{className:"text-base text-sketch-dark whitespace-pre-line break-words",children:C.content})]},C.id))})]})]})}):d.jsx("main",{className:"dreamy-bg min-h-screen flex items-center justify-center",children:d.jsxs("div",{className:"text-center space-y-3",children:[d.jsx("h1",{className:"text-2xl font-semibold",children:"Sign in required"}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"Visit the sign-in page to receive a magic link, then return to test notes."})]})})},cg=e=>{if(!e)return"Member";if(e.name)return e.name;if(e.email){const[t]=e.email.split("@");return t||"Member"}return"Member"},pV=()=>{var U;const{user:e,loading:t}=uw(),[n,r]=g.useState([]),[s,i]=g.useState({}),[a,l]=g.useState(!1),[c,h]=g.useState(null),[f,m]=g.useState(null),[v,y]=g.useState([]),[S,x]=g.useState(!1),[b,E]=g.useState(null),[_,C]=g.useState(""),[k,T]=g.useState(!1),[R,O]=g.useState(""),A=(e==null?void 0:e.id)??null,W=(f==null?void 0:f.otherUserId)??null;g.useEffect(()=>{if(!A){r([]),i({});return}let M=!0;return(async()=>{try{l(!0);const V=await I8(A);if(!M)return;r(V);const Y=V.map(j=>j.otherUserId);if(Y.length){const j=await ET(Y);if(!M)return;i(j.reduce(($,q)=>($[q.id]={id:q.id,name:q.full_name??"",role:q.user_role??null,email:q.email??null},$),{}))}m(j=>j??V[0]??null),h(null)}catch(V){const Y=V instanceof Error?V.message:"Unable to load conversations.";h(Y)}finally{M&&l(!1)}})(),()=>{M=!1}},[A]),g.useEffect(()=>{if(!A||!W){y([]);return}let M=!0;(async()=>{try{x(!0);const Y=await BT(A,W);if(!M)return;y(Y),E(null)}catch(Y){const j=Y instanceof Error?Y.message:"Unable to load messages.";M&&(E(j),y([]))}finally{M&&x(!1)}})();const V=be.channel(`dm-center-${A}-${W}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"direct_messages"},Y=>{const j=Y.new;(j.sender_id===A&&j.receiver_id===W||j.sender_id===W&&j.receiver_id===A)&&y($=>$.some(q=>q.id===j.id)?$:[...$,j])}).subscribe();return()=>{M=!1,be.removeChannel(V)}},[W,A]);const G=g.useMemo(()=>{const M=R.trim().toLowerCase();return M?n.filter(ee=>{var $;const V=s[ee.otherUserId];if(!V)return!1;const Y=cg(V).toLowerCase(),j=(($=V.role)==null?void 0:$.toLowerCase())??"";return Y.includes(M)||j.includes(M)}):n},[n,s,R]),X=M=>{m(M),E(null),C("")},H=async M=>{if(M.preventDefault(),!e||!f)return;const ee=_.trim();if(!ee){E("Please enter a message.");return}T(!0),E(null);try{const V=await WT(e.id,f.otherUserId,ee);V&&y(Y=>[...Y,V]),C("")}catch(V){const Y=V instanceof Error?V.message:"Failed to send message.";E(Y)}finally{T(!1)}};return t?d.jsx("main",{className:"min-h-screen flex items-center justify-center bg-background",children:d.jsx("p",{className:"text-muted-foreground",children:"Loading session"})}):e?d.jsx("main",{className:"dreamy-bg min-h-screen px-4 py-10",children:d.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-8",children:[d.jsxs("section",{className:"rounded-[2.5rem] border border-white/60 bg-white/85 p-6 backdrop-blur-lg shadow-2xl shadow-blue-100/50",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-slate-500",children:"Conversations"}),d.jsx("h1",{className:"mt-2 text-3xl font-semibold text-slate-900",children:"Message center"}),d.jsx("p",{className:"text-sm text-slate-500",children:"Keep calm chats organized. Search your hosts, continue planning, and never lose a thread."})]}),d.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row",children:[d.jsxs("aside",{className:"w-full rounded-[2rem] border border-white/70 bg-white/95 p-5 shadow-xl shadow-blue-100/40 lg:max-w-xs",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsx(wt,{value:R,onChange:M=>O(M.target.value),placeholder:"Search by name",className:"rounded-full bg-slate-50 text-sm"}),c&&d.jsx("p",{className:"text-sm text-destructive",children:c})]}),d.jsxs("ul",{className:"mt-4 space-y-2 overflow-y-auto pr-1",style:{maxHeight:"70vh"},children:[a&&d.jsx("li",{className:"text-sm text-muted-foreground",children:"Loading conversations"}),!a&&G.length===0&&d.jsx("li",{className:"text-sm text-muted-foreground",children:"No conversations yet."}),G.map(M=>{const ee=s[M.otherUserId],V=M.lastMessage,Y=V.content.length>60?`${V.content.slice(0,57)}`:V.content,j=Je(new Date(V.created_at),"MMM d, h:mm a"),$=(f==null?void 0:f.otherUserId)===M.otherUserId;return d.jsx("li",{children:d.jsxs("button",{type:"button",onClick:()=>X(M),className:`w-full rounded-2xl border px-4 py-3 text-left transition hover:border-blue-200 hover:bg-blue-50 ${$?"border-blue-400 bg-blue-50":"border-white/80 bg-white"}`,children:[d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-semibold text-slate-900",children:cg(ee)}),(ee==null?void 0:ee.role)&&d.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:ee.role})]}),d.jsx("span",{className:"text-[11px] text-slate-400",children:j})]}),d.jsx("p",{className:"mt-1 text-xs text-slate-500",children:Y})]})},M.otherUserId)})]})]}),d.jsx("section",{className:"flex-1",children:f?d.jsxs("div",{className:"flex h-full flex-col rounded-[2rem] border border-white/70 bg-white/95 p-6 shadow-2xl shadow-blue-100/40",children:[d.jsxs("header",{className:"mb-4 flex flex-wrap items-center justify-between gap-3 border-b pb-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400",children:"Chatting with"}),d.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:cg(s[f.otherUserId])}),d.jsx("p",{className:"text-sm text-slate-500",children:((U=s[f.otherUserId])==null?void 0:U.role)??"Community member"})]}),d.jsx("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-500",children:"Direct messages"})]}),d.jsxs("div",{className:"flex-1 space-y-3 overflow-y-auto pr-2",children:[S&&d.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading messages"}),!S&&v.length===0&&d.jsx("p",{className:"text-sm text-muted-foreground",children:"No messages yet. Start the conversation!"}),v.map(M=>d.jsxs("div",{className:`max-w-[75%] rounded-2xl px-4 py-2 text-sm shadow-sm ${M.sender_id===e.id?"ml-auto bg-blue-600 text-white":"mr-auto bg-slate-100 text-slate-800"}`,children:[d.jsx("p",{className:"whitespace-pre-line break-words",children:M.content}),d.jsx("p",{className:"mt-1 text-[11px] opacity-70",children:Je(new Date(M.created_at),"MMM d, yyyy  h:mm a")})]},M.id))]}),d.jsxs("form",{onSubmit:H,className:"mt-4 space-y-2",children:[d.jsx(Rl,{value:_,onChange:M=>{C(M.target.value),b&&E(null)},placeholder:"Write your message",rows:3,className:"rounded-2xl"}),b&&d.jsx("p",{className:"text-sm text-destructive",children:b}),d.jsx(Me,{type:"submit",disabled:k||!_.trim(),className:"rounded-full px-6",children:k?"Sending":"Send message"})]})]}):d.jsx("div",{className:"flex h-full items-center justify-center rounded-[2rem] border border-dashed border-white/70 bg-white/80 p-10 text-center shadow-2xl shadow-blue-100/30",children:d.jsx("p",{className:"text-sm text-slate-500",children:"Select a conversation on the left to view messages."})})})]})]})}):d.jsx("main",{className:"min-h-screen flex items-center justify-center bg-background",children:d.jsxs("div",{className:"text-center space-y-3",children:[d.jsx("h1",{className:"text-2xl font-semibold",children:"Sign in required"}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"Visit the sign-in page to view your conversations."})]})})},hf="couch-photos",sR="checkins",iR=(e,t)=>`${sR}/${e}/${t}`,mV=async(e,t)=>{const n=(()=>{const l=t.name.split("."),c=l.length>1?l.pop():null;return c?c.toLowerCase():"jpg"})(),r=`${Date.now()}-${Math.random().toString(36).slice(2)}.${n}`,s=iR(e,r),{error:i}=await be.storage.from(hf).upload(s,t,{cacheControl:"3600",upsert:!1,contentType:t.type||"image/jpeg"});if(i)throw i;const{data:a}=be.storage.from(hf).getPublicUrl(s);if(!(a!=null&&a.publicUrl))throw new Error("Unable to resolve uploaded photo URL.");return a.publicUrl},gV=async e=>{const t=`${sR}/${e}`,{data:n,error:r}=await be.storage.from(hf).list(t,{limit:50,offset:0,sortBy:{column:"created_at",order:"desc"}});if(r){if(r.status===404)return[];throw r}return(n??[]).filter(s=>s.name).map(s=>be.storage.from(hf).getPublicUrl(iR(e,s.name)).data.publicUrl).filter(s=>!!s)},vV={pending:"bg-amber-100 text-amber-700",approved:"bg-emerald-100 text-emerald-700",declined:"bg-rose-100 text-rose-700",cancelled:"bg-muted text-muted-foreground"},yV=e=>{const[t,n]=g.useState([]),[r,s]=g.useState(!1),i=g.useCallback(async()=>{if(e){s(!0);try{const a=await gV(e);n(a)}catch(a){console.warn("Failed to load check-in photos",a)}finally{s(!1)}}},[e]);return g.useEffect(()=>{i()},[i]),{photos:t,loading:r,refresh:i}},N1=({photos:e,loading:t,emptyLabel:n})=>d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"text-sm font-medium text-sketch-dark",children:"Check-in photos"}),t?d.jsx("p",{className:"text-xs text-muted-foreground",children:"Loading check-in photos"}):e.length===0?d.jsx("p",{className:"text-xs text-muted-foreground",children:n}):d.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.map(r=>d.jsx("a",{href:r,target:"_blank",rel:"noreferrer",className:"block overflow-hidden rounded-md border",children:d.jsx("img",{src:r,alt:"Check-in",className:"h-32 w-full object-cover"})},r))})]}),wV=({request:e})=>{const{toast:t}=Ps(),{photos:n,loading:r,refresh:s}=yV(e.id),[i,a]=g.useState(!1),[l,c]=g.useState(!1),h=new Date(e.stayStart),f=new Date(e.stayEnd),m=e.status==="approved",v=g.useMemo(()=>{var b;const S=(b=e.hostName)==null?void 0:b.trim();if(!S)return"Community host";if(/\S+@\S+\.\S+/.test(S)){const E=S.split("@")[0].split(".")[0];return E.charAt(0).toUpperCase()+E.slice(1)}return S.split(" ")[0]},[e.hostName]),y=async S=>{var b;const x=(b=S.target.files)==null?void 0:b[0];if(x)try{a(!0),await mV(e.id,x),t({title:"Photo uploaded",description:"Thanks for checking in!"}),s()}catch(E){const _=E instanceof Error?E.message:"We couldn't upload that photo.";t({title:"Upload failed",description:_,variant:"destructive"})}finally{a(!1),S.target.value=""}};return d.jsxs("div",{className:"rounded-2xl border border-white/60 bg-gradient-to-br from-white/80 via-blue-50/80 to-white/70 p-4 shadow-sm shadow-blue-100/70 space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-lg font-semibold text-sketch-dark",children:e.couchTitle??"Couch request"}),d.jsx(rR,{className:vV[e.status],children:e.status.toUpperCase()})]}),d.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[d.jsxs("p",{children:["Host: ",v]}),d.jsxs("p",{children:["Stay: ",Je(h,"MMM d, yyyy"),"  ",Je(f,"MMM d, yyyy")]}),d.jsxs("p",{className:"text-xs",children:["Requested ",Je(new Date(e.createdAt),"MMM d, yyyy h:mm a")]})]}),d.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[d.jsx("p",{children:m?"Check-in photos available":"Waiting for host approval"}),d.jsxs("button",{type:"button",className:"flex items-center gap-1 rounded-full px-3 py-1 text-sm font-medium text-slate-600",onClick:()=>c(S=>!S),children:["Details",d.jsx(Df,{className:`h-4 w-4 transition-transform ${l?"rotate-180":""}`})]})]}),l&&m&&d.jsxs("div",{className:"space-y-2 rounded-md border border-dashed border-muted-foreground/40 p-3",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"text-sm font-medium text-sketch-dark",children:"Upload a check-in photo"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Snap a quick photo once you're at the couch. Hosts will see it instantly."}),d.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:y,disabled:i}),i&&d.jsx("p",{className:"text-xs text-muted-foreground",children:"Uploading"})]}),d.jsx(N1,{photos:n,loading:r,emptyLabel:"No check-in photos uploaded yet."})]}),l&&!m&&d.jsx(N1,{photos:n,loading:r,emptyLabel:"Check-in photos become available once the host approves your stay."})]})},ug=4,T1=()=>{var E;const{profile:e,session:t}=jr(),n=es(),[r,s]=g.useState([]),[i,a]=g.useState(!1),[l,c]=g.useState(null),[h,f]=g.useState(ug),m=((E=t==null?void 0:t.user)==null?void 0:E.id)??(e==null?void 0:e.id)??null,v=(e==null?void 0:e.user_role)==="host",y=g.useMemo(()=>[(e==null?void 0:e.full_name)??"",(e==null?void 0:e.email)??""],[e==null?void 0:e.full_name,e==null?void 0:e.email]),S=g.useCallback(async()=>{if(!m){s([]);return}a(!0);try{const _=await fp(m,y);s(_),f(ug),c(null)}catch(_){const C=_ instanceof Error?_.message:"Unable to load requests.";c(C)}finally{a(!1)}},[y,m]);if(g.useEffect(()=>{S()},[S]),g.useEffect(()=>{v&&n("/host-requests",{replace:!0})},[v,n]),v)return null;const x=g.useMemo(()=>{if(!m)return d.jsx("p",{className:"text-sm text-muted-foreground",children:"Sign in as a renter to view your requests."});if(i)return d.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading your requests"});if(l)return d.jsx("p",{className:"text-sm text-destructive",children:l});if(!r.length)return d.jsx("p",{className:"text-sm text-muted-foreground",children:"You have not submitted any booking requests yet."});const _=r.slice(0,h),C=h<r.length;return d.jsxs("div",{className:"space-y-3",children:[_.map(k=>d.jsx(wV,{request:k},k.id)),C&&d.jsx("div",{className:"pt-2 text-center",children:d.jsx(Me,{variant:"outline",size:"sm",onClick:()=>f(k=>Math.min(k+ug,r.length)),children:"Show more"})})]})},[l,i,m,r,h]);return d.jsx("main",{className:"dreamy-bg min-h-screen px-4 py-8",children:d.jsxs("div",{className:"mx-auto w-full max-w-4xl space-y-6",children:[d.jsx("header",{className:"space-y-4 rounded-2xl border bg-card/70 p-6 shadow-sm",children:d.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-muted-foreground",children:"Welcome back"}),d.jsx("h1",{className:"text-2xl font-bold text-sketch-dark",children:"Reservations"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Track every request and know when hosts approve your stay."})]})})}),d.jsxs("section",{className:"rounded-xl border bg-card/60 p-4 shadow-sm",children:[d.jsx("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-2",children:d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-semibold text-sketch-dark",children:"Your bookings"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Track every request and share check-in photos with hosts."})]})}),x]})]})})},fc="booking_requests",xV="messages_",oR="legacy-sync-v1",j1="listing_",aR="legacy-listings-v1",_V=async()=>{const e=["booking_requests","messages","user_listings"],t=[];return await Promise.all(e.map(async n=>{const{error:r}=await be.from(n).select("id").limit(1);r&&t.push({table:n,error:r.message??"Unknown error"})})),{ok:t.length===0,issues:t}},bV=e=>localStorage.getItem(`${oR}-${e}`)==="complete",SV=e=>{localStorage.setItem(`${oR}-${e}`,"complete")},EV=e=>localStorage.getItem(`${aR}-${e}`)==="complete",R1=e=>{localStorage.setItem(`${aR}-${e}`,"complete")},lh=e=>{if(!e)return new Date().toISOString();const t=new Date(e);return Number.isNaN(t.getTime())?new Date().toISOString():t.toISOString()},CV=e=>new Set(e.map(t=>`${t.couchId??""}|${t.stayStart}|${t.stayEnd}|${t.status}`)),PV=e=>new Set(e.map(t=>`${t.hostId??""}|${t.sentAt}|${t.text}`)),kV=async e=>{const t=localStorage.getItem(fc);if(!t)return 0;let n=[];try{const l=JSON.parse(t);n=Array.isArray(l)?l:[]}catch(l){return console.error("Failed to parse legacy booking requests",l),localStorage.removeItem(fc),0}if(!Array.isArray(n)||n.length===0)return localStorage.removeItem(fc),0;let r=[];try{r=await fp(e.id,[e.full_name??void 0,e.email??void 0])}catch(l){console.warn("Unable to load existing booking requests from Supabase",l),r=[]}const s=CV(r);let i=0;const a=[];for(const l of n){if(l!=null&&l.renterId&&l.renterId!==e.id)continue;const c=lh((l==null?void 0:l.stayStart)??(l==null?void 0:l.start)??(l==null?void 0:l.checkIn)),h=lh((l==null?void 0:l.stayEnd)??(l==null?void 0:l.end)??(l==null?void 0:l.checkOut)??(l==null?void 0:l.checkout)),f=`${(l==null?void 0:l.couchId)??""}|${c}|${h}|${(l==null?void 0:l.status)??"pending"}`;if(s.has(f))continue;const m=(l==null?void 0:l.nights)??Math.max(1,Cr(new Date(h),new Date(c)));try{await zT({couchId:(l==null?void 0:l.couchId)??"legacy-couch",couchTitle:(l==null?void 0:l.couchTitle)??(l==null?void 0:l.title)??"Couch booking",hostId:(l==null?void 0:l.hostId)??null,hostName:(l==null?void 0:l.hostEmail)??(l==null?void 0:l.hostName)??"Community Host",hostEmail:(l==null?void 0:l.hostEmail)??null,renterId:e.id,renterName:(l==null?void 0:l.renterName)??e.full_name??e.email??"Renter",stayStart:c,stayEnd:h,nights:m,pricePerNight:(l==null?void 0:l.pricePerNight)??(l==null?void 0:l.price)??"$0",status:(l==null?void 0:l.status)??"pending",createdAt:lh((l==null?void 0:l.createdAt)??(l==null?void 0:l.created_at)??(l==null?void 0:l.submittedAt))}),s.add(f),i+=1}catch(v){console.error("Failed to migrate legacy booking request",v),a.push(l)}}return a.length?localStorage.setItem(fc,JSON.stringify(a)):localStorage.removeItem(fc),i},NV=async e=>{const t=[];for(let i=0;i<localStorage.length;i++){const a=localStorage.key(i);a&&a.startsWith(xV)&&t.push(a)}if(!t.length)return 0;const n=await zj(e.id,[e.full_name??void 0,e.email??void 0]),r=PV(n);let s=0;for(const i of t){const a=localStorage.getItem(i);if(!a)continue;let l=[];try{const h=JSON.parse(a);l=Array.isArray(h)?h:[]}catch(h){console.error("Failed to parse legacy messages",h),localStorage.removeItem(i);continue}if(!Array.isArray(l)||l.length===0){localStorage.removeItem(i);continue}const c=[];for(const h of l){if(h!=null&&h.renterId&&h.renterId!==e.id){c.push(h);continue}const f=lh((h==null?void 0:h.sentAt)??(h==null?void 0:h.sent_at)??(h==null?void 0:h.created_at)),m=`${(h==null?void 0:h.hostId)??""}|${f}|${(h==null?void 0:h.text)??(h==null?void 0:h.body)??""}`;if(!r.has(m))try{await Uj({couchId:(h==null?void 0:h.couchId)??"legacy-couch",hostId:(h==null?void 0:h.hostId)??null,hostName:(h==null?void 0:h.hostEmail)??(h==null?void 0:h.hostName)??"Community Host",hostEmail:(h==null?void 0:h.hostEmail)??null,renterId:e.id,renterName:(h==null?void 0:h.renterName)??e.full_name??e.email??"Renter",body:(h==null?void 0:h.text)??(h==null?void 0:h.body)??"",sentAt:f,senderRole:(h==null?void 0:h.senderRole)??"renter",senderId:(h==null?void 0:h.senderId)??e.id,senderName:(h==null?void 0:h.senderName)??((h==null?void 0:h.senderRole)==="host"?(h==null?void 0:h.hostName)??"Host":(h==null?void 0:h.renterName)??e.full_name??e.email??"Renter")}),r.add(m),s+=1}catch(v){console.error("Failed to migrate legacy message",v)}}c.length?localStorage.setItem(i,JSON.stringify(c)):localStorage.removeItem(i)}return s},TV=async e=>{if(typeof window>"u")return{bookings:0,messages:0};if(bV(e.id))return{bookings:0,messages:0};let t=0,n=0,r=!0;try{t=await kV(e)}catch(s){r=!1,console.error("Legacy booking migration failed",s)}try{n=await NV(e)}catch(s){r=!1,console.error("Legacy message migration failed",s)}return r&&SV(e.id),{bookings:t,messages:n}},jV=e=>{if(!e)return"$0";const t=e.toString().trim();return t?t.startsWith("$")?t:`$${t}`:"$0"},RV=(e,t)=>{var c,h,f;const n=t.propertyType==="house"?"House":"Flat",r=e.full_name?`${e.full_name.split(" ")[0]||"Host"}'s ${n} couch`:`${n} couch`,s=t.title??(t.address?`${n} couch at ${t.address}`:null),i=t.uploadedAt?`Listing added on ${new Date(t.uploadedAt).toLocaleDateString()}`:null,a=t.checkInTime??((c=t.availability)==null?void 0:c.checkInTime)??null,l=a?`${e.full_name??"Your host"} welcomes you. Check-in after ${a}.`:`${e.full_name??"Your host"} welcomes you.`;return{id:t.listingId&&typeof t.listingId=="string"?t.listingId:void 0,hostId:e.id,hostName:e.full_name,hostEmail:e.email,title:s??r,imageUrl:t.imageUrl??null,pricePerNight:jV(t.pricePerNight??t.price),location:t.address??t.location??"Address shared after booking",description:t.description??i??l,availability:{start:((h=t.availability)==null?void 0:h.start)??null,end:((f=t.availability)==null?void 0:f.end)??null,checkInTime:a,country:t.country??null,city:t.city??null,addressLine:t.address??t.location??null}}},MV=async e=>{if(typeof window>"u")return{listings:0};if(!e.id)return{listings:0};if(EV(e.id))return{listings:0};const t=[];for(let s=0;s<localStorage.length;s++){const i=localStorage.key(s);i&&i.startsWith(j1)&&t.push(i)}if(!t.length)return R1(e.id),{listings:0};let n=0,r=!0;for(const s of t)try{const i=localStorage.getItem(s);if(!i)continue;const a=JSON.parse(i);if(!a||typeof a!="object")continue;const l=a,c=(l==null?void 0:l.userId)??s.replace(j1,"");if(c&&c!==e.id)continue;const h=RV(e,l??{});await Wv(h)&&(n+=1,localStorage.removeItem(s))}catch(i){r=!1,console.error("Failed to migrate legacy listing",{key:s,error:i})}return r&&R1(e.id),typeof window<"u"&&n>0&&window.dispatchEvent(new Event("listings-updated")),{listings:n}},OV=()=>{const{profile:e}=jr(),{toast:t}=Ps(),n=g.useRef(null);return g.useEffect(()=>{if(typeof window>"u")return;if(!(e!=null&&e.id)){n.current=null;return}if(n.current===e.id)return;n.current=e.id;let r=!0;return(async()=>{try{const i=await _V();if(!i.ok){if(!r)return;t({title:"Supabase setup required",description:i.issues.map(c=>`${c.table}: ${c.error}`).join(`
`),variant:"destructive"}),console.warn("Supabase table verification issues",i.issues);return}const a=await TV({id:e.id,full_name:e.full_name,email:e.email});if(!r)return;if(a.bookings||a.messages){const c=[];a.bookings&&c.push(`${a.bookings} booking request${a.bookings===1?"":"s"}`),a.messages&&c.push(`${a.messages} message${a.messages===1?"":"s"}`),t({title:"Legacy requests synced",description:`Moved ${c.join(" and ")} into Supabase.`})}const l=await MV({id:e.id,full_name:e.full_name,email:e.email});if(!r)return;l.listings&&t({title:"Legacy listing published",description:`Moved ${l.listings} offline listing${l.listings===1?"":"s"} into Supabase.`})}catch(i){if(!r)return;console.error("Legacy data sync failed",i),t({title:"Legacy sync failed",description:"We couldn't move your past data into Supabase. Please retry later.",variant:"destructive"})}})(),()=>{r=!1}},[e==null?void 0:e.id,e==null?void 0:e.full_name,e==null?void 0:e.email,e==null?void 0:e.user_role,t]),null},dg=async(e,t=15e3,n="Request timed out")=>{let r;const s=new Promise((i,a)=>{r=setTimeout(()=>a(new Error(n)),t)});try{return await Promise.race([e,s])}finally{clearTimeout(r)}},IV=({children:e})=>{const[t,n]=g.useState(null),[r,s]=g.useState(null),[i,a]=g.useState(!0),[l,c]=g.useState(null),h=async y=>{var S,x;if(!(y!=null&&y.user)){s(null),c(null),a(!1);return}try{a(!0),c(null);const b=await dg(mj(y.user.id),12e3,"Timed out loading profile");if(b)s(b);else{const E=await dw({id:y.user.id,email:y.user.email??"",full_name:((S=y.user.user_metadata)==null?void 0:S.full_name)??null,user_role:((x=y.user.user_metadata)==null?void 0:x.user_role)??"renter",avatar_url:null,bio:null,student_id_url:null,university:null,program_name:null,program_year:null,program_type:null});s(E)}}catch(b){console.error("Failed to load profile",b),s(null),c(b instanceof Error?b.message:"Unable to load profile.")}finally{a(!1)}};g.useEffect(()=>{let y=null,S=!0;return(async()=>{var b;try{const{data:E,error:_}=await dg(be.auth.getSession(),15e3,"Timed out loading auth session");if(!S)return;if(_)throw _;n(E.session??null),await h(E.session??null),y=((b=be.auth.onAuthStateChange((k,T)=>{S&&(n(T),h(T))}).data)==null?void 0:b.subscription)??null}catch(E){console.error("Failed to initialise auth session",E),S&&(n(null),s(null),c(E instanceof Error?E.message:"Unable to connect to Supabase."),a(!1))}})(),()=>{S=!1,y==null||y.unsubscribe()}},[]);const v={user:r,session:t,profile:r,loading:i,authError:l,signOut:async()=>{await be.auth.signOut(),n(null),s(null),c(null)},refreshUser:async()=>{const{data:y}=await dg(be.auth.getSession(),15e3,"Timed out refreshing auth session");n(y.session??null),await h(y.session??null)}};return d.jsx(VP.Provider,{value:v,children:e})},AV=async(e,t=5e3,n="Request timed out")=>{let r;const s=new Promise((i,a)=>{r=setTimeout(()=>a(new Error(n)),t)});try{return await Promise.race([e,s])}finally{clearTimeout(r)}},LV=({children:e})=>{const[t,n]=g.useState(null),[r,s]=g.useState(!0);g.useEffect(()=>{let a=!0;(async()=>{try{const{data:h,error:f}=await AV(be.auth.getSession(),6e3,"Timed out loading session");if(!a)return;if(f)throw f;n(h.session??null)}catch(h){console.error("Failed to load Supabase session",h),a&&n(null)}finally{a&&s(!1)}})();const{data:c}=be.auth.onAuthStateChange((h,f)=>{a&&(n(f),s(!1))});return()=>{a=!1,c.subscription.unsubscribe()}},[]);const i=g.useMemo(()=>({session:t,user:(t==null?void 0:t.user)??null,loading:r,signOut:()=>be.auth.signOut()}),[t,r]);return d.jsx(fj.Provider,{value:i,children:e})},ds=({children:e})=>{const{user:t,loading:n,authError:r}=jr();return n?d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 to-secondary/10 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),d.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})}):r?d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-primary/10 to-secondary/10 px-4 text-center",children:d.jsxs("div",{className:"max-w-md space-y-3 rounded-3xl border border-white/50 bg-white/90 p-6 shadow-lg",children:[d.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"Unable to reach Supabase"}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[r,d.jsx("br",{}),"Check that ",d.jsx("code",{className:"font-mono",children:"VITE_SUPABASE_URL"})," and ",d.jsx("code",{className:"font-mono",children:"VITE_SUPABASE_ANON_KEY"})," are set in your ",d.jsx("code",{children:".env"})," file or that the Supabase service is reachable, then refresh the page."]})]})}):t?d.jsx(d.Fragment,{children:e}):d.jsx(Y5,{to:"/auth",replace:!0})};var ay=["Enter"," "],DV=["ArrowDown","PageUp","Home"],lR=["ArrowUp","PageDown","End"],FV=[...DV,...lR],$V={ltr:[...ay,"ArrowRight"],rtl:[...ay,"ArrowLeft"]},UV={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Bu="Menu",[pu,zV,BV]=Of(Bu),[ia,cR]=Vn(Bu,[BV,no,pp]),wp=no(),uR=pp(),[WV,oa]=ia(Bu),[HV,Wu]=ia(Bu),dR=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:i,modal:a=!0}=e,l=wp(t),[c,h]=g.useState(null),f=g.useRef(!1),m=Tt(i),v=Uu(s);return g.useEffect(()=>{const y=()=>{f.current=!0,document.addEventListener("pointerdown",S,{capture:!0,once:!0}),document.addEventListener("pointermove",S,{capture:!0,once:!0})},S=()=>f.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",S,{capture:!0}),document.removeEventListener("pointermove",S,{capture:!0})}},[]),d.jsx(_0,{...l,children:d.jsx(WV,{scope:t,open:n,onOpenChange:m,content:c,onContentChange:h,children:d.jsx(HV,{scope:t,onClose:g.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:f,dir:v,modal:a,children:r})})})};dR.displayName=Bu;var VV="MenuAnchor",vw=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=wp(n);return d.jsx(ku,{...s,...r,ref:t})});vw.displayName=VV;var yw="MenuPortal",[GV,hR]=ia(yw,{forceMount:void 0}),fR=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,i=oa(yw,t);return d.jsx(GV,{scope:t,forceMount:n,children:d.jsx(on,{present:n||i.open,children:d.jsx(El,{asChild:!0,container:s,children:r})})})};fR.displayName=yw;var kr="MenuContent",[qV,ww]=ia(kr),pR=g.forwardRef((e,t)=>{const n=hR(kr,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=oa(kr,e.__scopeMenu),a=Wu(kr,e.__scopeMenu);return d.jsx(pu.Provider,{scope:e.__scopeMenu,children:d.jsx(on,{present:r||i.open,children:d.jsx(pu.Slot,{scope:e.__scopeMenu,children:a.modal?d.jsx(YV,{...s,ref:t}):d.jsx(ZV,{...s,ref:t})})})})}),YV=g.forwardRef((e,t)=>{const n=oa(kr,e.__scopeMenu),r=g.useRef(null),s=Ue(t,r);return g.useEffect(()=>{const i=r.current;if(i)return Yf(i)},[]),d.jsx(xw,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ue(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),ZV=g.forwardRef((e,t)=>{const n=oa(kr,e.__scopeMenu);return d.jsx(xw,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),KV=qi("MenuContent.ScrollLock"),xw=g.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:v,onDismiss:y,disableOutsideScroll:S,...x}=e,b=oa(kr,n),E=Wu(kr,n),_=wp(n),C=uR(n),k=zV(n),[T,R]=g.useState(null),O=g.useRef(null),A=Ue(t,O,b.onContentChange),W=g.useRef(0),G=g.useRef(""),X=g.useRef(0),H=g.useRef(null),U=g.useRef("right"),M=g.useRef(0),ee=S?Au:g.Fragment,V=S?{as:KV,allowPinchZoom:!0}:void 0,Y=$=>{var re,fe;const q=G.current+$,oe=k().filter(Pe=>!Pe.disabled),B=document.activeElement,ce=(re=oe.find(Pe=>Pe.ref.current===B))==null?void 0:re.textValue,Q=oe.map(Pe=>Pe.textValue),te=lG(Q,q,ce),Z=(fe=oe.find(Pe=>Pe.textValue===te))==null?void 0:fe.ref.current;(function Pe(z){G.current=z,window.clearTimeout(W.current),z!==""&&(W.current=window.setTimeout(()=>Pe(""),1e3))})(q),Z&&setTimeout(()=>Z.focus())};g.useEffect(()=>()=>window.clearTimeout(W.current),[]),qf();const j=g.useCallback($=>{var oe,B;return U.current===((oe=H.current)==null?void 0:oe.side)&&uG($,(B=H.current)==null?void 0:B.area)},[]);return d.jsx(qV,{scope:n,searchRef:G,onItemEnter:g.useCallback($=>{j($)&&$.preventDefault()},[j]),onItemLeave:g.useCallback($=>{var q;j($)||((q=O.current)==null||q.focus(),R(null))},[j]),onTriggerLeave:g.useCallback($=>{j($)&&$.preventDefault()},[j]),pointerGraceTimerRef:X,onPointerGraceIntentChange:g.useCallback($=>{H.current=$},[]),children:d.jsx(ee,{...V,children:d.jsx(Iu,{asChild:!0,trapped:s,onMountAutoFocus:ue(i,$=>{var q;$.preventDefault(),(q=O.current)==null||q.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:d.jsx(na,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:v,onDismiss:y,children:d.jsx(QT,{asChild:!0,...C,dir:E.dir,orientation:"vertical",loop:r,currentTabStopId:T,onCurrentTabStopIdChange:R,onEntryFocus:ue(c,$=>{E.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:d.jsx(zf,{role:"menu","aria-orientation":"vertical","data-state":jR(b.open),"data-radix-menu-content":"",dir:E.dir,..._,...x,ref:A,style:{outline:"none",...x.style},onKeyDown:ue(x.onKeyDown,$=>{const oe=$.target.closest("[data-radix-menu-content]")===$.currentTarget,B=$.ctrlKey||$.altKey||$.metaKey,ce=$.key.length===1;oe&&($.key==="Tab"&&$.preventDefault(),!B&&ce&&Y($.key));const Q=O.current;if($.target!==Q||!FV.includes($.key))return;$.preventDefault();const Z=k().filter(re=>!re.disabled).map(re=>re.ref.current);lR.includes($.key)&&Z.reverse(),oG(Z)}),onBlur:ue(e.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(W.current),G.current="")}),onPointerMove:ue(e.onPointerMove,mu($=>{const q=$.target,oe=M.current!==$.clientX;if($.currentTarget.contains(q)&&oe){const B=$.clientX>M.current?"right":"left";U.current=B,M.current=$.clientX}}))})})})})})})});pR.displayName=kr;var QV="MenuGroup",_w=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return d.jsx(Ce.div,{role:"group",...r,ref:t})});_w.displayName=QV;var XV="MenuLabel",mR=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return d.jsx(Ce.div,{...r,ref:t})});mR.displayName=XV;var ff="MenuItem",M1="menu.itemSelect",xp=g.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,i=g.useRef(null),a=Wu(ff,e.__scopeMenu),l=ww(ff,e.__scopeMenu),c=Ue(t,i),h=g.useRef(!1),f=()=>{const m=i.current;if(!n&&m){const v=new CustomEvent(M1,{bubbles:!0,cancelable:!0});m.addEventListener(M1,y=>r==null?void 0:r(y),{once:!0}),s0(m,v),v.defaultPrevented?h.current=!1:a.onClose()}};return d.jsx(gR,{...s,ref:c,disabled:n,onClick:ue(e.onClick,f),onPointerDown:m=>{var v;(v=e.onPointerDown)==null||v.call(e,m),h.current=!0},onPointerUp:ue(e.onPointerUp,m=>{var v;h.current||(v=m.currentTarget)==null||v.click()}),onKeyDown:ue(e.onKeyDown,m=>{const v=l.searchRef.current!=="";n||v&&m.key===" "||ay.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});xp.displayName=ff;var gR=g.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=e,a=ww(ff,n),l=uR(n),c=g.useRef(null),h=Ue(t,c),[f,m]=g.useState(!1),[v,y]=g.useState("");return g.useEffect(()=>{const S=c.current;S&&y((S.textContent??"").trim())},[i.children]),d.jsx(pu.ItemSlot,{scope:n,disabled:r,textValue:s??v,children:d.jsx(XT,{asChild:!0,...l,focusable:!r,children:d.jsx(Ce.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:h,onPointerMove:ue(e.onPointerMove,mu(S=>{r?a.onItemLeave(S):(a.onItemEnter(S),S.defaultPrevented||S.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ue(e.onPointerLeave,mu(S=>a.onItemLeave(S))),onFocus:ue(e.onFocus,()=>m(!0)),onBlur:ue(e.onBlur,()=>m(!1))})})})}),JV="MenuCheckboxItem",vR=g.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return d.jsx(bR,{scope:e.__scopeMenu,checked:n,children:d.jsx(xp,{role:"menuitemcheckbox","aria-checked":pf(n)?"mixed":n,...s,ref:t,"data-state":Sw(n),onSelect:ue(s.onSelect,()=>r==null?void 0:r(pf(n)?!0:!n),{checkForDefaultPrevented:!1})})})});vR.displayName=JV;var yR="MenuRadioGroup",[eG,tG]=ia(yR,{value:void 0,onValueChange:()=>{}}),wR=g.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,i=Tt(r);return d.jsx(eG,{scope:e.__scopeMenu,value:n,onValueChange:i,children:d.jsx(_w,{...s,ref:t})})});wR.displayName=yR;var xR="MenuRadioItem",_R=g.forwardRef((e,t)=>{const{value:n,...r}=e,s=tG(xR,e.__scopeMenu),i=n===s.value;return d.jsx(bR,{scope:e.__scopeMenu,checked:i,children:d.jsx(xp,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":Sw(i),onSelect:ue(r.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,n)},{checkForDefaultPrevented:!1})})})});_R.displayName=xR;var bw="MenuItemIndicator",[bR,nG]=ia(bw,{checked:!1}),SR=g.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,i=nG(bw,n);return d.jsx(on,{present:r||pf(i.checked)||i.checked===!0,children:d.jsx(Ce.span,{...s,ref:t,"data-state":Sw(i.checked)})})});SR.displayName=bw;var rG="MenuSeparator",ER=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return d.jsx(Ce.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});ER.displayName=rG;var sG="MenuArrow",CR=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=wp(n);return d.jsx(Bf,{...s,...r,ref:t})});CR.displayName=sG;var iG="MenuSub",[kq,PR]=ia(iG),_c="MenuSubTrigger",kR=g.forwardRef((e,t)=>{const n=oa(_c,e.__scopeMenu),r=Wu(_c,e.__scopeMenu),s=PR(_c,e.__scopeMenu),i=ww(_c,e.__scopeMenu),a=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,h={__scopeMenu:e.__scopeMenu},f=g.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return g.useEffect(()=>f,[f]),g.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),c(null)}},[l,c]),d.jsx(vw,{asChild:!0,...h,children:d.jsx(gR,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":jR(n.open),...e,ref:Mf(t,s.onTriggerChange),onClick:m=>{var v;(v=e.onClick)==null||v.call(e,m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ue(e.onPointerMove,mu(m=>{i.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!n.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:ue(e.onPointerLeave,mu(m=>{var y,S;f();const v=(y=n.content)==null?void 0:y.getBoundingClientRect();if(v){const x=(S=n.content)==null?void 0:S.dataset.side,b=x==="right",E=b?-5:5,_=v[b?"left":"right"],C=v[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+E,y:m.clientY},{x:_,y:v.top},{x:C,y:v.top},{x:C,y:v.bottom},{x:_,y:v.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ue(e.onKeyDown,m=>{var y;const v=i.searchRef.current!=="";e.disabled||v&&m.key===" "||$V[r.dir].includes(m.key)&&(n.onOpenChange(!0),(y=n.content)==null||y.focus(),m.preventDefault())})})})});kR.displayName=_c;var NR="MenuSubContent",TR=g.forwardRef((e,t)=>{const n=hR(kr,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=oa(kr,e.__scopeMenu),a=Wu(kr,e.__scopeMenu),l=PR(NR,e.__scopeMenu),c=g.useRef(null),h=Ue(t,c);return d.jsx(pu.Provider,{scope:e.__scopeMenu,children:d.jsx(on,{present:r||i.open,children:d.jsx(pu.Slot,{scope:e.__scopeMenu,children:d.jsx(xw,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:h,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var m;a.isUsingKeyboardRef.current&&((m=c.current)==null||m.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:ue(e.onFocusOutside,f=>{f.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ue(e.onEscapeKeyDown,f=>{a.onClose(),f.preventDefault()}),onKeyDown:ue(e.onKeyDown,f=>{var y;const m=f.currentTarget.contains(f.target),v=UV[a.dir].includes(f.key);m&&v&&(i.onOpenChange(!1),(y=l.trigger)==null||y.focus(),f.preventDefault())})})})})})});TR.displayName=NR;function jR(e){return e?"open":"closed"}function pf(e){return e==="indeterminate"}function Sw(e){return pf(e)?"indeterminate":e?"checked":"unchecked"}function oG(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function aG(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function lG(e,t,n){const s=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let a=aG(e,Math.max(i,0));s.length===1&&(a=a.filter(h=>h!==n));const c=a.find(h=>h.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function cG(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const l=t[i],c=t[a],h=l.x,f=l.y,m=c.x,v=c.y;f>r!=v>r&&n<(m-h)*(r-f)/(v-f)+h&&(s=!s)}return s}function uG(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return cG(n,t)}function mu(e){return t=>t.pointerType==="mouse"?e(t):void 0}var dG=dR,hG=vw,fG=fR,pG=pR,mG=_w,gG=mR,vG=xp,yG=vR,wG=wR,xG=_R,_G=SR,bG=ER,SG=CR,EG=kR,CG=TR,_p="DropdownMenu",[PG,Nq]=Vn(_p,[cR]),kn=cR(),[kG,RR]=PG(_p),MR=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:a,modal:l=!0}=e,c=kn(t),h=g.useRef(null),[f,m]=Yi({prop:s,defaultProp:i??!1,onChange:a,caller:_p});return d.jsx(kG,{scope:t,triggerId:bs(),triggerRef:h,contentId:bs(),open:f,onOpenChange:m,onOpenToggle:g.useCallback(()=>m(v=>!v),[m]),modal:l,children:d.jsx(dG,{...c,open:f,onOpenChange:m,dir:r,modal:l,children:n})})};MR.displayName=_p;var OR="DropdownMenuTrigger",IR=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,i=RR(OR,n),a=kn(n);return d.jsx(hG,{asChild:!0,...a,children:d.jsx(Ce.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Mf(t,i.triggerRef),onPointerDown:ue(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:ue(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});IR.displayName=OR;var NG="DropdownMenuPortal",AR=e=>{const{__scopeDropdownMenu:t,...n}=e,r=kn(t);return d.jsx(fG,{...r,...n})};AR.displayName=NG;var LR="DropdownMenuContent",DR=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=RR(LR,n),i=kn(n),a=g.useRef(!1);return d.jsx(pG,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:t,onCloseAutoFocus:ue(e.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:ue(e.onInteractOutside,l=>{const c=l.detail.originalEvent,h=c.button===0&&c.ctrlKey===!0,f=c.button===2||h;(!s.modal||f)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DR.displayName=LR;var TG="DropdownMenuGroup",jG=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=kn(n);return d.jsx(mG,{...s,...r,ref:t})});jG.displayName=TG;var RG="DropdownMenuLabel",FR=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=kn(n);return d.jsx(gG,{...s,...r,ref:t})});FR.displayName=RG;var MG="DropdownMenuItem",$R=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=kn(n);return d.jsx(vG,{...s,...r,ref:t})});$R.displayName=MG;var OG="DropdownMenuCheckboxItem",UR=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=kn(n);return d.jsx(yG,{...s,...r,ref:t})});UR.displayName=OG;var IG="DropdownMenuRadioGroup",AG=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=kn(n);return d.jsx(wG,{...s,...r,ref:t})});AG.displayName=IG;var LG="DropdownMenuRadioItem",zR=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=kn(n);return d.jsx(xG,{...s,...r,ref:t})});zR.displayName=LG;var DG="DropdownMenuItemIndicator",BR=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=kn(n);return d.jsx(_G,{...s,...r,ref:t})});BR.displayName=DG;var FG="DropdownMenuSeparator",WR=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=kn(n);return d.jsx(bG,{...s,...r,ref:t})});WR.displayName=FG;var $G="DropdownMenuArrow",UG=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=kn(n);return d.jsx(SG,{...s,...r,ref:t})});UG.displayName=$G;var zG="DropdownMenuSubTrigger",HR=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=kn(n);return d.jsx(EG,{...s,...r,ref:t})});HR.displayName=zG;var BG="DropdownMenuSubContent",VR=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=kn(n);return d.jsx(CG,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});VR.displayName=BG;var WG=MR,HG=IR,VG=AR,GR=DR,qR=FR,YR=$R,ZR=UR,KR=zR,QR=BR,XR=WR,JR=HR,eM=VR;const GG=WG,qG=HG,YG=g.forwardRef(({className:e,inset:t,children:n,...r},s)=>d.jsxs(JR,{ref:s,className:Te("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...r,children:[n,d.jsx(c0,{className:"ml-auto h-4 w-4"})]}));YG.displayName=JR.displayName;const ZG=g.forwardRef(({className:e,...t},n)=>d.jsx(eM,{ref:n,className:Te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));ZG.displayName=eM.displayName;const tM=g.forwardRef(({className:e,sideOffset:t=4,...n},r)=>d.jsx(VG,{children:d.jsx(GR,{ref:r,sideOffset:t,className:Te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));tM.displayName=GR.displayName;const ly=g.forwardRef(({className:e,inset:t,...n},r)=>d.jsx(YR,{ref:r,className:Te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...n}));ly.displayName=YR.displayName;const KG=g.forwardRef(({className:e,children:t,checked:n,...r},s)=>d.jsxs(ZR,{ref:s,className:Te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:n,...r,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(QR,{children:d.jsx(jC,{className:"h-4 w-4"})})}),t]}));KG.displayName=ZR.displayName;const QG=g.forwardRef(({className:e,children:t,...n},r)=>d.jsxs(KR,{ref:r,className:Te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(QR,{children:d.jsx(MC,{className:"h-2 w-2 fill-current"})})}),t]}));QG.displayName=KR.displayName;const XG=g.forwardRef(({className:e,inset:t,...n},r)=>d.jsx(qR,{ref:r,className:Te("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));XG.displayName=qR.displayName;const JG=g.forwardRef(({className:e,...t},n)=>d.jsx(XR,{ref:n,className:Te("-mx-1 my-1 h-px bg-muted",e),...t}));JG.displayName=XR.displayName;const eq=[{label:"Reservations",path:"/dashboard"},{label:"Listings",path:"/listings"},{label:"Wishlist",path:"/wishlist"},{label:"Messages",path:"/messages"},{label:"Profile",path:"/profile"}],tq=()=>{const e=es(),t=ra(),{signOut:n,profile:r}=jr(),s=(r==null?void 0:r.user_role)==="host",i=(a,l)=>{e("/listings",{state:{listingScope:a,triggerEdit:!1}})};return t.pathname==="/auth"||t.pathname==="/"?null:d.jsxs("div",{className:"pointer-events-none fixed right-4 top-4 z-40 flex flex-col items-end gap-3",children:[d.jsx("div",{className:"pointer-events-auto flex flex-wrap justify-end gap-2",children:eq.map(a=>a.path==="/listings"&&s?d.jsxs(GG,{children:[d.jsx(qG,{asChild:!0,children:d.jsxs(Me,{size:"sm",variant:t.pathname.startsWith(a.path)?"default":"outline",className:"rounded-full border-white/70 bg-white/90 text-slate-700 shadow",children:["Listings",d.jsx(Df,{className:"ml-2 h-4 w-4"})]})}),d.jsxs(tM,{align:"end",className:"min-w-[10rem]",children:[d.jsx(ly,{onSelect:()=>i("all"),children:"All listings"}),d.jsx(ly,{onSelect:()=>i("mine"),children:"Edit my listing"})]})]},`${a.path}-dropdown`):d.jsx(Me,{size:"sm",variant:t.pathname.startsWith(a.path)?"default":"outline",className:"rounded-full border-white/70 bg-white/90 text-slate-700 shadow",onClick:()=>e(a.path),children:a.label},a.path))}),d.jsx(Me,{onClick:()=>n(),variant:"destructive",size:"sm",className:"pointer-events-auto rounded-full bg-red-600 text-white shadow hover:bg-red-500",children:"Sign out"})]})},nq=new H3,rq=()=>d.jsx(Z3,{client:nq,children:d.jsx(LV,{children:d.jsxs(IV,{children:[d.jsx(OV,{}),d.jsxs(k3,{children:[d.jsx(dL,{}),d.jsx(WL,{}),d.jsxs(J5,{children:[d.jsx(tq,{}),d.jsxs(K5,{children:[d.jsx(On,{path:"/",element:d.jsx(Y9,{})}),d.jsx(On,{path:"/auth",element:d.jsx(W9,{})}),d.jsx(On,{path:"/listings",element:d.jsx(ds,{children:d.jsx(h8,{})})}),d.jsx(On,{path:"/couch/:id",element:d.jsx(ds,{children:d.jsx(U8,{})})}),d.jsx(On,{path:"/renter-dashboard",element:d.jsx(ds,{children:d.jsx(eV,{})})}),d.jsx(On,{path:"/host-requests",element:d.jsx(ds,{children:d.jsx(dV,{})})}),d.jsx(On,{path:"/wishlist",element:d.jsx(ds,{children:d.jsx(aV,{})})}),d.jsx(On,{path:"/profile",element:d.jsx(ds,{children:d.jsx(oV,{})})}),d.jsx(On,{path:"/notes",element:d.jsx(ds,{children:d.jsx(fV,{})})}),d.jsx(On,{path:"/messages",element:d.jsx(ds,{children:d.jsx(pV,{})})}),d.jsx(On,{path:"/dashboard",element:d.jsx(ds,{children:d.jsx(T1,{})})}),d.jsx(On,{path:"/bookings",element:d.jsx(ds,{children:d.jsx(T1,{})})}),d.jsx(On,{path:"*",element:d.jsx(eF,{})})]})]})]})]})})});nC(document.getElementById("root")).render(d.jsx(rq,{}));
