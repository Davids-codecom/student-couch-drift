var xw=e=>{throw TypeError(e)};var Yp=(e,t,n)=>t.has(e)||xw("Cannot "+n);var D=(e,t,n)=>(Yp(e,t,"read from private field"),n?n.call(e):t.get(e)),Ne=(e,t,n)=>t.has(e)?xw("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ve=(e,t,n,r)=>(Yp(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Ve=(e,t,n)=>(Yp(e,t,"access private method"),n);var ud=(e,t,n,r)=>({set _(s){ve(e,t,s,n)},get _(){return D(e,t,r)}});function uM(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ir=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function dM(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Q1={exports:{}},wf={},X1={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _u=Symbol.for("react.element"),hM=Symbol.for("react.portal"),fM=Symbol.for("react.fragment"),pM=Symbol.for("react.strict_mode"),mM=Symbol.for("react.profiler"),gM=Symbol.for("react.provider"),vM=Symbol.for("react.context"),yM=Symbol.for("react.forward_ref"),xM=Symbol.for("react.suspense"),wM=Symbol.for("react.memo"),_M=Symbol.for("react.lazy"),ww=Symbol.iterator;function bM(e){return e===null||typeof e!="object"?null:(e=ww&&e[ww]||e["@@iterator"],typeof e=="function"?e:null)}var J1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eS=Object.assign,tS={};function bl(e,t,n){this.props=e,this.context=t,this.refs=tS,this.updater=n||J1}bl.prototype.isReactComponent={};bl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function nS(){}nS.prototype=bl.prototype;function hy(e,t,n){this.props=e,this.context=t,this.refs=tS,this.updater=n||J1}var fy=hy.prototype=new nS;fy.constructor=hy;eS(fy,bl.prototype);fy.isPureReactComponent=!0;var _w=Array.isArray,rS=Object.prototype.hasOwnProperty,py={current:null},sS={key:!0,ref:!0,__self:!0,__source:!0};function iS(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)rS.call(t,r)&&!sS.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:_u,type:e,key:i,ref:a,props:s,_owner:py.current}}function SM(e,t){return{$$typeof:_u,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function my(e){return typeof e=="object"&&e!==null&&e.$$typeof===_u}function EM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var bw=/\/+/g;function Zp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?EM(""+e.key):t.toString(36)}function Hd(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case _u:case hM:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Zp(a,0):r,_w(s)?(n="",e!=null&&(n=e.replace(bw,"$&/")+"/"),Hd(s,t,n,"",function(h){return h})):s!=null&&(my(s)&&(s=SM(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(bw,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",_w(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Zp(i,l);a+=Hd(i,t,n,c,s)}else if(c=bM(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Zp(i,l++),a+=Hd(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function dd(e,t,n){if(e==null)return e;var r=[],s=0;return Hd(e,r,"","",function(i){return t.call(n,i,s++)}),r}function CM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pn={current:null},Vd={transition:null},kM={ReactCurrentDispatcher:Pn,ReactCurrentBatchConfig:Vd,ReactCurrentOwner:py};function oS(){throw Error("act(...) is not supported in production builds of React.")}Ke.Children={map:dd,forEach:function(e,t,n){dd(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return dd(e,function(){t++}),t},toArray:function(e){return dd(e,function(t){return t})||[]},only:function(e){if(!my(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ke.Component=bl;Ke.Fragment=fM;Ke.Profiler=mM;Ke.PureComponent=hy;Ke.StrictMode=pM;Ke.Suspense=xM;Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kM;Ke.act=oS;Ke.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=eS({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=py.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)rS.call(t,c)&&!sS.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:_u,type:e.type,key:s,ref:i,props:r,_owner:a}};Ke.createContext=function(e){return e={$$typeof:vM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gM,_context:e},e.Consumer=e};Ke.createElement=iS;Ke.createFactory=function(e){var t=iS.bind(null,e);return t.type=e,t};Ke.createRef=function(){return{current:null}};Ke.forwardRef=function(e){return{$$typeof:yM,render:e}};Ke.isValidElement=my;Ke.lazy=function(e){return{$$typeof:_M,_payload:{_status:-1,_result:e},_init:CM}};Ke.memo=function(e,t){return{$$typeof:wM,type:e,compare:t===void 0?null:t}};Ke.startTransition=function(e){var t=Vd.transition;Vd.transition={};try{e()}finally{Vd.transition=t}};Ke.unstable_act=oS;Ke.useCallback=function(e,t){return Pn.current.useCallback(e,t)};Ke.useContext=function(e){return Pn.current.useContext(e)};Ke.useDebugValue=function(){};Ke.useDeferredValue=function(e){return Pn.current.useDeferredValue(e)};Ke.useEffect=function(e,t){return Pn.current.useEffect(e,t)};Ke.useId=function(){return Pn.current.useId()};Ke.useImperativeHandle=function(e,t,n){return Pn.current.useImperativeHandle(e,t,n)};Ke.useInsertionEffect=function(e,t){return Pn.current.useInsertionEffect(e,t)};Ke.useLayoutEffect=function(e,t){return Pn.current.useLayoutEffect(e,t)};Ke.useMemo=function(e,t){return Pn.current.useMemo(e,t)};Ke.useReducer=function(e,t,n){return Pn.current.useReducer(e,t,n)};Ke.useRef=function(e){return Pn.current.useRef(e)};Ke.useState=function(e){return Pn.current.useState(e)};Ke.useSyncExternalStore=function(e,t,n){return Pn.current.useSyncExternalStore(e,t,n)};Ke.useTransition=function(){return Pn.current.useTransition()};Ke.version="18.3.1";X1.exports=Ke;var g=X1.exports;const re=xf(g),gy=uM({__proto__:null,default:re},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PM=g,NM=Symbol.for("react.element"),TM=Symbol.for("react.fragment"),jM=Object.prototype.hasOwnProperty,RM=PM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MM={key:!0,ref:!0,__self:!0,__source:!0};function aS(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)jM.call(t,r)&&!MM.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:NM,type:e,key:i,ref:a,props:s,_owner:RM.current}}wf.Fragment=TM;wf.jsx=aS;wf.jsxs=aS;Q1.exports=wf;var d=Q1.exports,lS={exports:{}},lr={},cS={exports:{}},uS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,U){var Y=j.length;j.push(U);e:for(;0<Y;){var se=Y-1>>>1,te=j[se];if(0<s(te,U))j[se]=U,j[Y]=te,Y=se;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var U=j[0],Y=j.pop();if(Y!==U){j[0]=Y;e:for(var se=0,te=j.length,ue=te>>>1;se<ue;){var F=2*(se+1)-1,J=j[F],G=F+1,ne=j[G];if(0>s(J,Y))G<te&&0>s(ne,J)?(j[se]=ne,j[G]=Y,se=G):(j[se]=J,j[F]=Y,se=F);else if(G<te&&0>s(ne,Y))j[se]=ne,j[G]=Y,se=G;else break e}}return U}function s(j,U){var Y=j.sortIndex-U.sortIndex;return Y!==0?Y:j.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],h=[],f=1,m=null,v=3,y=!1,S=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(j){for(var U=n(h);U!==null;){if(U.callback===null)r(h);else if(U.startTime<=j)r(h),U.sortIndex=U.expirationTime,t(c,U);else break;U=n(h)}}function P(j){if(w=!1,C(j),!S)if(n(c)!==null)S=!0,H(T);else{var U=n(h);U!==null&&Z(P,U.startTime-j)}}function T(j,U){S=!1,w&&(w=!1,E(A),A=-1),y=!0;var Y=v;try{for(C(U),m=n(c);m!==null&&(!(m.expirationTime>U)||j&&!Q());){var se=m.callback;if(typeof se=="function"){m.callback=null,v=m.priorityLevel;var te=se(m.expirationTime<=U);U=e.unstable_now(),typeof te=="function"?m.callback=te:m===n(c)&&r(c),C(U)}else r(c);m=n(c)}if(m!==null)var ue=!0;else{var F=n(h);F!==null&&Z(P,F.startTime-U),ue=!1}return ue}finally{m=null,v=Y,y=!1}}var R=!1,O=null,A=-1,B=5,q=-1;function Q(){return!(e.unstable_now()-q<B)}function W(){if(O!==null){var j=e.unstable_now();q=j;var U=!0;try{U=O(!0,j)}finally{U?z():(R=!1,O=null)}}else R=!1}var z;if(typeof _=="function")z=function(){_(W)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,ee=M.port2;M.port1.onmessage=W,z=function(){ee.postMessage(null)}}else z=function(){b(W,0)};function H(j){O=j,R||(R=!0,z())}function Z(j,U){A=b(function(){j(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){S||y||(S=!0,H(T))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(j){switch(v){case 1:case 2:case 3:var U=3;break;default:U=v}var Y=v;v=U;try{return j()}finally{v=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,U){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Y=v;v=j;try{return U()}finally{v=Y}},e.unstable_scheduleCallback=function(j,U,Y){var se=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?se+Y:se):Y=se,j){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Y+te,j={id:f++,callback:U,priorityLevel:j,startTime:Y,expirationTime:te,sortIndex:-1},Y>se?(j.sortIndex=Y,t(h,j),n(c)===null&&j===n(h)&&(w?(E(A),A=-1):w=!0,Z(P,Y-se))):(j.sortIndex=te,t(c,j),S||y||(S=!0,H(T))),j},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(j){var U=v;return function(){var Y=v;v=U;try{return j.apply(this,arguments)}finally{v=Y}}}})(uS);cS.exports=uS;var OM=cS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IM=g,or=OM;function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dS=new Set,zc={};function ta(e,t){ll(e,t),ll(e+"Capture",t)}function ll(e,t){for(zc[e]=t,e=0;e<t.length;e++)dS.add(t[e])}var Qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mg=Object.prototype.hasOwnProperty,AM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sw={},Ew={};function LM(e){return mg.call(Ew,e)?!0:mg.call(Sw,e)?!1:AM.test(e)?Ew[e]=!0:(Sw[e]=!0,!1)}function DM(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function FM(e,t,n,r){if(t===null||typeof t>"u"||DM(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nn(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){an[e]=new Nn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];an[t]=new Nn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){an[e]=new Nn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){an[e]=new Nn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){an[e]=new Nn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){an[e]=new Nn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){an[e]=new Nn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){an[e]=new Nn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){an[e]=new Nn(e,5,!1,e.toLowerCase(),null,!1,!1)});var vy=/[\-:]([a-z])/g;function yy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vy,yy);an[t]=new Nn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vy,yy);an[t]=new Nn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vy,yy);an[t]=new Nn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){an[e]=new Nn(e,1,!1,e.toLowerCase(),null,!1,!1)});an.xlinkHref=new Nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){an[e]=new Nn(e,1,!1,e.toLowerCase(),null,!0,!0)});function xy(e,t,n,r){var s=an.hasOwnProperty(t)?an[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(FM(t,n,s,r)&&(n=null),r||s===null?LM(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var si=IM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hd=Symbol.for("react.element"),Na=Symbol.for("react.portal"),Ta=Symbol.for("react.fragment"),wy=Symbol.for("react.strict_mode"),gg=Symbol.for("react.profiler"),hS=Symbol.for("react.provider"),fS=Symbol.for("react.context"),_y=Symbol.for("react.forward_ref"),vg=Symbol.for("react.suspense"),yg=Symbol.for("react.suspense_list"),by=Symbol.for("react.memo"),vi=Symbol.for("react.lazy"),pS=Symbol.for("react.offscreen"),Cw=Symbol.iterator;function Xl(e){return e===null||typeof e!="object"?null:(e=Cw&&e[Cw]||e["@@iterator"],typeof e=="function"?e:null)}var Pt=Object.assign,Kp;function mc(e){if(Kp===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Kp=t&&t[1]||""}return`
`+Kp+e}var Qp=!1;function Xp(e,t){if(!e||Qp)return"";Qp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Qp=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?mc(e):""}function $M(e){switch(e.tag){case 5:return mc(e.type);case 16:return mc("Lazy");case 13:return mc("Suspense");case 19:return mc("SuspenseList");case 0:case 2:case 15:return e=Xp(e.type,!1),e;case 11:return e=Xp(e.type.render,!1),e;case 1:return e=Xp(e.type,!0),e;default:return""}}function xg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ta:return"Fragment";case Na:return"Portal";case gg:return"Profiler";case wy:return"StrictMode";case vg:return"Suspense";case yg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case fS:return(e.displayName||"Context")+".Consumer";case hS:return(e._context.displayName||"Context")+".Provider";case _y:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case by:return t=e.displayName||null,t!==null?t:xg(e.type)||"Memo";case vi:t=e._payload,e=e._init;try{return xg(e(t))}catch{}}return null}function UM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xg(t);case 8:return t===wy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zM(e){var t=mS(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fd(e){e._valueTracker||(e._valueTracker=zM(e))}function gS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=mS(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function fh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wg(e,t){var n=t.checked;return Pt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function kw(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Gi(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function vS(e,t){t=t.checked,t!=null&&xy(e,"checked",t,!1)}function _g(e,t){vS(e,t);var n=Gi(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?bg(e,t.type,n):t.hasOwnProperty("defaultValue")&&bg(e,t.type,Gi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Pw(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function bg(e,t,n){(t!=="number"||fh(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var gc=Array.isArray;function Ua(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Gi(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Sg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Pt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nw(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ae(92));if(gc(n)){if(1<n.length)throw Error(ae(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Gi(n)}}function yS(e,t){var n=Gi(t.value),r=Gi(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Tw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Eg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var pd,wS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(pd=pd||document.createElement("div"),pd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Bc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Sc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BM=["Webkit","ms","Moz","O"];Object.keys(Sc).forEach(function(e){BM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sc[t]=Sc[e]})});function _S(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Sc.hasOwnProperty(e)&&Sc[e]?(""+t).trim():t+"px"}function bS(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=_S(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var WM=Pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cg(e,t){if(t){if(WM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ae(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ae(62))}}function kg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pg=null;function Sy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ng=null,za=null,Ba=null;function jw(e){if(e=Eu(e)){if(typeof Ng!="function")throw Error(ae(280));var t=e.stateNode;t&&(t=Cf(t),Ng(e.stateNode,e.type,t))}}function SS(e){za?Ba?Ba.push(e):Ba=[e]:za=e}function ES(){if(za){var e=za,t=Ba;if(Ba=za=null,jw(e),t)for(e=0;e<t.length;e++)jw(t[e])}}function CS(e,t){return e(t)}function kS(){}var Jp=!1;function PS(e,t,n){if(Jp)return e(t,n);Jp=!0;try{return CS(e,t,n)}finally{Jp=!1,(za!==null||Ba!==null)&&(kS(),ES())}}function Wc(e,t){var n=e.stateNode;if(n===null)return null;var r=Cf(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ae(231,t,typeof n));return n}var Tg=!1;if(Qs)try{var Jl={};Object.defineProperty(Jl,"passive",{get:function(){Tg=!0}}),window.addEventListener("test",Jl,Jl),window.removeEventListener("test",Jl,Jl)}catch{Tg=!1}function HM(e,t,n,r,s,i,a,l,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(f){this.onError(f)}}var Ec=!1,ph=null,mh=!1,jg=null,VM={onError:function(e){Ec=!0,ph=e}};function qM(e,t,n,r,s,i,a,l,c){Ec=!1,ph=null,HM.apply(VM,arguments)}function GM(e,t,n,r,s,i,a,l,c){if(qM.apply(this,arguments),Ec){if(Ec){var h=ph;Ec=!1,ph=null}else throw Error(ae(198));mh||(mh=!0,jg=h)}}function na(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function NS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rw(e){if(na(e)!==e)throw Error(ae(188))}function YM(e){var t=e.alternate;if(!t){if(t=na(e),t===null)throw Error(ae(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Rw(s),e;if(i===r)return Rw(s),t;i=i.sibling}throw Error(ae(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?e:t}function TS(e){return e=YM(e),e!==null?jS(e):null}function jS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jS(e);if(t!==null)return t;e=e.sibling}return null}var RS=or.unstable_scheduleCallback,Mw=or.unstable_cancelCallback,ZM=or.unstable_shouldYield,KM=or.unstable_requestPaint,It=or.unstable_now,QM=or.unstable_getCurrentPriorityLevel,Ey=or.unstable_ImmediatePriority,MS=or.unstable_UserBlockingPriority,gh=or.unstable_NormalPriority,XM=or.unstable_LowPriority,OS=or.unstable_IdlePriority,_f=null,ws=null;function JM(e){if(ws&&typeof ws.onCommitFiberRoot=="function")try{ws.onCommitFiberRoot(_f,e,void 0,(e.current.flags&128)===128)}catch{}}var Yr=Math.clz32?Math.clz32:nO,eO=Math.log,tO=Math.LN2;function nO(e){return e>>>=0,e===0?32:31-(eO(e)/tO|0)|0}var md=64,gd=4194304;function vc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vh(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=vc(l):(i&=a,i!==0&&(r=vc(i)))}else a=n&~s,a!==0?r=vc(a):i!==0&&(r=vc(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Yr(t),s=1<<n,r|=e[n],t&=~s;return r}function rO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sO(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Yr(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=rO(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Rg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function IS(){var e=md;return md<<=1,!(md&4194240)&&(md=64),e}function em(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Yr(t),e[t]=n}function iO(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Yr(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Cy(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Yr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ut=0;function AS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var LS,ky,DS,FS,$S,Mg=!1,vd=[],Di=null,Fi=null,$i=null,Hc=new Map,Vc=new Map,xi=[],oO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ow(e,t){switch(e){case"focusin":case"focusout":Di=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":Hc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vc.delete(t.pointerId)}}function ec(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Eu(t),t!==null&&ky(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function aO(e,t,n,r,s){switch(t){case"focusin":return Di=ec(Di,e,t,n,r,s),!0;case"dragenter":return Fi=ec(Fi,e,t,n,r,s),!0;case"mouseover":return $i=ec($i,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Hc.set(i,ec(Hc.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vc.set(i,ec(Vc.get(i)||null,e,t,n,r,s)),!0}return!1}function US(e){var t=ko(e.target);if(t!==null){var n=na(t);if(n!==null){if(t=n.tag,t===13){if(t=NS(n),t!==null){e.blockedOn=t,$S(e.priority,function(){DS(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Og(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Pg=r,n.target.dispatchEvent(r),Pg=null}else return t=Eu(n),t!==null&&ky(t),e.blockedOn=n,!1;t.shift()}return!0}function Iw(e,t,n){qd(e)&&n.delete(t)}function lO(){Mg=!1,Di!==null&&qd(Di)&&(Di=null),Fi!==null&&qd(Fi)&&(Fi=null),$i!==null&&qd($i)&&($i=null),Hc.forEach(Iw),Vc.forEach(Iw)}function tc(e,t){e.blockedOn===t&&(e.blockedOn=null,Mg||(Mg=!0,or.unstable_scheduleCallback(or.unstable_NormalPriority,lO)))}function qc(e){function t(s){return tc(s,e)}if(0<vd.length){tc(vd[0],e);for(var n=1;n<vd.length;n++){var r=vd[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Di!==null&&tc(Di,e),Fi!==null&&tc(Fi,e),$i!==null&&tc($i,e),Hc.forEach(t),Vc.forEach(t),n=0;n<xi.length;n++)r=xi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<xi.length&&(n=xi[0],n.blockedOn===null);)US(n),n.blockedOn===null&&xi.shift()}var Wa=si.ReactCurrentBatchConfig,yh=!0;function cO(e,t,n,r){var s=ut,i=Wa.transition;Wa.transition=null;try{ut=1,Py(e,t,n,r)}finally{ut=s,Wa.transition=i}}function uO(e,t,n,r){var s=ut,i=Wa.transition;Wa.transition=null;try{ut=4,Py(e,t,n,r)}finally{ut=s,Wa.transition=i}}function Py(e,t,n,r){if(yh){var s=Og(e,t,n,r);if(s===null)um(e,t,r,xh,n),Ow(e,r);else if(aO(s,e,t,n,r))r.stopPropagation();else if(Ow(e,r),t&4&&-1<oO.indexOf(e)){for(;s!==null;){var i=Eu(s);if(i!==null&&LS(i),i=Og(e,t,n,r),i===null&&um(e,t,r,xh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else um(e,t,r,null,n)}}var xh=null;function Og(e,t,n,r){if(xh=null,e=Sy(r),e=ko(e),e!==null)if(t=na(e),t===null)e=null;else if(n=t.tag,n===13){if(e=NS(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xh=e,null}function zS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QM()){case Ey:return 1;case MS:return 4;case gh:case XM:return 16;case OS:return 536870912;default:return 16}default:return 16}}var Mi=null,Ny=null,Gd=null;function BS(){if(Gd)return Gd;var e,t=Ny,n=t.length,r,s="value"in Mi?Mi.value:Mi.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return Gd=s.slice(e,1<r?1-r:void 0)}function Yd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function yd(){return!0}function Aw(){return!1}function cr(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?yd:Aw,this.isPropagationStopped=Aw,this}return Pt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yd)},persist:function(){},isPersistent:yd}),t}var Sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ty=cr(Sl),Su=Pt({},Sl,{view:0,detail:0}),dO=cr(Su),tm,nm,nc,bf=Pt({},Su,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nc&&(nc&&e.type==="mousemove"?(tm=e.screenX-nc.screenX,nm=e.screenY-nc.screenY):nm=tm=0,nc=e),tm)},movementY:function(e){return"movementY"in e?e.movementY:nm}}),Lw=cr(bf),hO=Pt({},bf,{dataTransfer:0}),fO=cr(hO),pO=Pt({},Su,{relatedTarget:0}),rm=cr(pO),mO=Pt({},Sl,{animationName:0,elapsedTime:0,pseudoElement:0}),gO=cr(mO),vO=Pt({},Sl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yO=cr(vO),xO=Pt({},Sl,{data:0}),Dw=cr(xO),wO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_O={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SO(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bO[e])?!!t[e]:!1}function jy(){return SO}var EO=Pt({},Su,{key:function(e){if(e.key){var t=wO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_O[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jy,charCode:function(e){return e.type==="keypress"?Yd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),CO=cr(EO),kO=Pt({},bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fw=cr(kO),PO=Pt({},Su,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jy}),NO=cr(PO),TO=Pt({},Sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),jO=cr(TO),RO=Pt({},bf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),MO=cr(RO),OO=[9,13,27,32],Ry=Qs&&"CompositionEvent"in window,Cc=null;Qs&&"documentMode"in document&&(Cc=document.documentMode);var IO=Qs&&"TextEvent"in window&&!Cc,WS=Qs&&(!Ry||Cc&&8<Cc&&11>=Cc),$w=" ",Uw=!1;function HS(e,t){switch(e){case"keyup":return OO.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ja=!1;function AO(e,t){switch(e){case"compositionend":return VS(t);case"keypress":return t.which!==32?null:(Uw=!0,$w);case"textInput":return e=t.data,e===$w&&Uw?null:e;default:return null}}function LO(e,t){if(ja)return e==="compositionend"||!Ry&&HS(e,t)?(e=BS(),Gd=Ny=Mi=null,ja=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return WS&&t.locale!=="ko"?null:t.data;default:return null}}var DO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!DO[e.type]:t==="textarea"}function qS(e,t,n,r){SS(r),t=wh(t,"onChange"),0<t.length&&(n=new Ty("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var kc=null,Gc=null;function FO(e){rE(e,0)}function Sf(e){var t=Oa(e);if(gS(t))return e}function $O(e,t){if(e==="change")return t}var GS=!1;if(Qs){var sm;if(Qs){var im="oninput"in document;if(!im){var Bw=document.createElement("div");Bw.setAttribute("oninput","return;"),im=typeof Bw.oninput=="function"}sm=im}else sm=!1;GS=sm&&(!document.documentMode||9<document.documentMode)}function Ww(){kc&&(kc.detachEvent("onpropertychange",YS),Gc=kc=null)}function YS(e){if(e.propertyName==="value"&&Sf(Gc)){var t=[];qS(t,Gc,e,Sy(e)),PS(FO,t)}}function UO(e,t,n){e==="focusin"?(Ww(),kc=t,Gc=n,kc.attachEvent("onpropertychange",YS)):e==="focusout"&&Ww()}function zO(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sf(Gc)}function BO(e,t){if(e==="click")return Sf(t)}function WO(e,t){if(e==="input"||e==="change")return Sf(t)}function HO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kr=typeof Object.is=="function"?Object.is:HO;function Yc(e,t){if(Kr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!mg.call(t,s)||!Kr(e[s],t[s]))return!1}return!0}function Hw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vw(e,t){var n=Hw(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hw(n)}}function ZS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ZS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function KS(){for(var e=window,t=fh();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=fh(e.document)}return t}function My(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function VO(e){var t=KS(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ZS(n.ownerDocument.documentElement,n)){if(r!==null&&My(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Vw(n,i);var a=Vw(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qO=Qs&&"documentMode"in document&&11>=document.documentMode,Ra=null,Ig=null,Pc=null,Ag=!1;function qw(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ag||Ra==null||Ra!==fh(r)||(r=Ra,"selectionStart"in r&&My(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pc&&Yc(Pc,r)||(Pc=r,r=wh(Ig,"onSelect"),0<r.length&&(t=new Ty("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ra)))}function xd(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ma={animationend:xd("Animation","AnimationEnd"),animationiteration:xd("Animation","AnimationIteration"),animationstart:xd("Animation","AnimationStart"),transitionend:xd("Transition","TransitionEnd")},om={},QS={};Qs&&(QS=document.createElement("div").style,"AnimationEvent"in window||(delete Ma.animationend.animation,delete Ma.animationiteration.animation,delete Ma.animationstart.animation),"TransitionEvent"in window||delete Ma.transitionend.transition);function Ef(e){if(om[e])return om[e];if(!Ma[e])return e;var t=Ma[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in QS)return om[e]=t[n];return e}var XS=Ef("animationend"),JS=Ef("animationiteration"),eE=Ef("animationstart"),tE=Ef("transitionend"),nE=new Map,Gw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ji(e,t){nE.set(e,t),ta(t,[e])}for(var am=0;am<Gw.length;am++){var lm=Gw[am],GO=lm.toLowerCase(),YO=lm[0].toUpperCase()+lm.slice(1);Ji(GO,"on"+YO)}Ji(XS,"onAnimationEnd");Ji(JS,"onAnimationIteration");Ji(eE,"onAnimationStart");Ji("dblclick","onDoubleClick");Ji("focusin","onFocus");Ji("focusout","onBlur");Ji(tE,"onTransitionEnd");ll("onMouseEnter",["mouseout","mouseover"]);ll("onMouseLeave",["mouseout","mouseover"]);ll("onPointerEnter",["pointerout","pointerover"]);ll("onPointerLeave",["pointerout","pointerover"]);ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ta("onBeforeInput",["compositionend","keypress","textInput","paste"]);ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZO=new Set("cancel close invalid load scroll toggle".split(" ").concat(yc));function Yw(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,GM(r,t,void 0,e),e.currentTarget=null}function rE(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Yw(s,l,h),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,h=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Yw(s,l,h),i=c}}}if(mh)throw e=jg,mh=!1,jg=null,e}function _t(e,t){var n=t[Ug];n===void 0&&(n=t[Ug]=new Set);var r=e+"__bubble";n.has(r)||(sE(t,e,2,!1),n.add(r))}function cm(e,t,n){var r=0;t&&(r|=4),sE(n,e,r,t)}var wd="_reactListening"+Math.random().toString(36).slice(2);function Zc(e){if(!e[wd]){e[wd]=!0,dS.forEach(function(n){n!=="selectionchange"&&(ZO.has(n)||cm(n,!1,e),cm(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wd]||(t[wd]=!0,cm("selectionchange",!1,t))}}function sE(e,t,n,r){switch(zS(t)){case 1:var s=cO;break;case 4:s=uO;break;default:s=Py}n=s.bind(null,t,n,e),s=void 0,!Tg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function um(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=ko(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}PS(function(){var h=i,f=Sy(n),m=[];e:{var v=nE.get(e);if(v!==void 0){var y=Ty,S=e;switch(e){case"keypress":if(Yd(n)===0)break e;case"keydown":case"keyup":y=CO;break;case"focusin":S="focus",y=rm;break;case"focusout":S="blur",y=rm;break;case"beforeblur":case"afterblur":y=rm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Lw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=fO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=NO;break;case XS:case JS:case eE:y=gO;break;case tE:y=jO;break;case"scroll":y=dO;break;case"wheel":y=MO;break;case"copy":case"cut":case"paste":y=yO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Fw}var w=(t&4)!==0,b=!w&&e==="scroll",E=w?v!==null?v+"Capture":null:v;w=[];for(var _=h,C;_!==null;){C=_;var P=C.stateNode;if(C.tag===5&&P!==null&&(C=P,E!==null&&(P=Wc(_,E),P!=null&&w.push(Kc(_,P,C)))),b)break;_=_.return}0<w.length&&(v=new y(v,S,null,n,f),m.push({event:v,listeners:w}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",v&&n!==Pg&&(S=n.relatedTarget||n.fromElement)&&(ko(S)||S[Xs]))break e;if((y||v)&&(v=f.window===f?f:(v=f.ownerDocument)?v.defaultView||v.parentWindow:window,y?(S=n.relatedTarget||n.toElement,y=h,S=S?ko(S):null,S!==null&&(b=na(S),S!==b||S.tag!==5&&S.tag!==6)&&(S=null)):(y=null,S=h),y!==S)){if(w=Lw,P="onMouseLeave",E="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(w=Fw,P="onPointerLeave",E="onPointerEnter",_="pointer"),b=y==null?v:Oa(y),C=S==null?v:Oa(S),v=new w(P,_+"leave",y,n,f),v.target=b,v.relatedTarget=C,P=null,ko(f)===h&&(w=new w(E,_+"enter",S,n,f),w.target=C,w.relatedTarget=b,P=w),b=P,y&&S)t:{for(w=y,E=S,_=0,C=w;C;C=ma(C))_++;for(C=0,P=E;P;P=ma(P))C++;for(;0<_-C;)w=ma(w),_--;for(;0<C-_;)E=ma(E),C--;for(;_--;){if(w===E||E!==null&&w===E.alternate)break t;w=ma(w),E=ma(E)}w=null}else w=null;y!==null&&Zw(m,v,y,w,!1),S!==null&&b!==null&&Zw(m,b,S,w,!0)}}e:{if(v=h?Oa(h):window,y=v.nodeName&&v.nodeName.toLowerCase(),y==="select"||y==="input"&&v.type==="file")var T=$O;else if(zw(v))if(GS)T=WO;else{T=zO;var R=UO}else(y=v.nodeName)&&y.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(T=BO);if(T&&(T=T(e,h))){qS(m,T,n,f);break e}R&&R(e,v,h),e==="focusout"&&(R=v._wrapperState)&&R.controlled&&v.type==="number"&&bg(v,"number",v.value)}switch(R=h?Oa(h):window,e){case"focusin":(zw(R)||R.contentEditable==="true")&&(Ra=R,Ig=h,Pc=null);break;case"focusout":Pc=Ig=Ra=null;break;case"mousedown":Ag=!0;break;case"contextmenu":case"mouseup":case"dragend":Ag=!1,qw(m,n,f);break;case"selectionchange":if(qO)break;case"keydown":case"keyup":qw(m,n,f)}var O;if(Ry)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ja?HS(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(WS&&n.locale!=="ko"&&(ja||A!=="onCompositionStart"?A==="onCompositionEnd"&&ja&&(O=BS()):(Mi=f,Ny="value"in Mi?Mi.value:Mi.textContent,ja=!0)),R=wh(h,A),0<R.length&&(A=new Dw(A,e,null,n,f),m.push({event:A,listeners:R}),O?A.data=O:(O=VS(n),O!==null&&(A.data=O)))),(O=IO?AO(e,n):LO(e,n))&&(h=wh(h,"onBeforeInput"),0<h.length&&(f=new Dw("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:h}),f.data=O))}rE(m,t)})}function Kc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function wh(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Wc(e,n),i!=null&&r.unshift(Kc(e,i,s)),i=Wc(e,t),i!=null&&r.push(Kc(e,i,s))),e=e.return}return r}function ma(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zw(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,s?(c=Wc(n,i),c!=null&&a.unshift(Kc(n,c,l))):s||(c=Wc(n,i),c!=null&&a.push(Kc(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var KO=/\r\n?/g,QO=/\u0000|\uFFFD/g;function Kw(e){return(typeof e=="string"?e:""+e).replace(KO,`
`).replace(QO,"")}function _d(e,t,n){if(t=Kw(t),Kw(e)!==t&&n)throw Error(ae(425))}function _h(){}var Lg=null,Dg=null;function Fg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $g=typeof setTimeout=="function"?setTimeout:void 0,XO=typeof clearTimeout=="function"?clearTimeout:void 0,Qw=typeof Promise=="function"?Promise:void 0,JO=typeof queueMicrotask=="function"?queueMicrotask:typeof Qw<"u"?function(e){return Qw.resolve(null).then(e).catch(eI)}:$g;function eI(e){setTimeout(function(){throw e})}function dm(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),qc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);qc(t)}function Ui(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var El=Math.random().toString(36).slice(2),vs="__reactFiber$"+El,Qc="__reactProps$"+El,Xs="__reactContainer$"+El,Ug="__reactEvents$"+El,tI="__reactListeners$"+El,nI="__reactHandles$"+El;function ko(e){var t=e[vs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xs]||n[vs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Xw(e);e!==null;){if(n=e[vs])return n;e=Xw(e)}return t}e=n,n=e.parentNode}return null}function Eu(e){return e=e[vs]||e[Xs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Oa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ae(33))}function Cf(e){return e[Qc]||null}var zg=[],Ia=-1;function eo(e){return{current:e}}function bt(e){0>Ia||(e.current=zg[Ia],zg[Ia]=null,Ia--)}function vt(e,t){Ia++,zg[Ia]=e.current,e.current=t}var Yi={},gn=eo(Yi),Wn=eo(!1),Bo=Yi;function cl(e,t){var n=e.type.contextTypes;if(!n)return Yi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Hn(e){return e=e.childContextTypes,e!=null}function bh(){bt(Wn),bt(gn)}function Jw(e,t,n){if(gn.current!==Yi)throw Error(ae(168));vt(gn,t),vt(Wn,n)}function iE(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(ae(108,UM(e)||"Unknown",s));return Pt({},n,r)}function Sh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yi,Bo=gn.current,vt(gn,e),vt(Wn,Wn.current),!0}function e_(e,t,n){var r=e.stateNode;if(!r)throw Error(ae(169));n?(e=iE(e,t,Bo),r.__reactInternalMemoizedMergedChildContext=e,bt(Wn),bt(gn),vt(gn,e)):bt(Wn),vt(Wn,n)}var zs=null,kf=!1,hm=!1;function oE(e){zs===null?zs=[e]:zs.push(e)}function rI(e){kf=!0,oE(e)}function to(){if(!hm&&zs!==null){hm=!0;var e=0,t=ut;try{var n=zs;for(ut=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}zs=null,kf=!1}catch(s){throw zs!==null&&(zs=zs.slice(e+1)),RS(Ey,to),s}finally{ut=t,hm=!1}}return null}var Aa=[],La=0,Eh=null,Ch=0,Sr=[],Er=0,Wo=null,Hs=1,Vs="";function xo(e,t){Aa[La++]=Ch,Aa[La++]=Eh,Eh=e,Ch=t}function aE(e,t,n){Sr[Er++]=Hs,Sr[Er++]=Vs,Sr[Er++]=Wo,Wo=e;var r=Hs;e=Vs;var s=32-Yr(r)-1;r&=~(1<<s),n+=1;var i=32-Yr(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Hs=1<<32-Yr(t)+s|n<<s|r,Vs=i+e}else Hs=1<<i|n<<s|r,Vs=e}function Oy(e){e.return!==null&&(xo(e,1),aE(e,1,0))}function Iy(e){for(;e===Eh;)Eh=Aa[--La],Aa[La]=null,Ch=Aa[--La],Aa[La]=null;for(;e===Wo;)Wo=Sr[--Er],Sr[Er]=null,Vs=Sr[--Er],Sr[Er]=null,Hs=Sr[--Er],Sr[Er]=null}var rr=null,nr=null,St=!1,Vr=null;function lE(e,t){var n=Cr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function t_(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rr=e,nr=Ui(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rr=e,nr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Wo!==null?{id:Hs,overflow:Vs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Cr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,rr=e,nr=null,!0):!1;default:return!1}}function Bg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Wg(e){if(St){var t=nr;if(t){var n=t;if(!t_(e,t)){if(Bg(e))throw Error(ae(418));t=Ui(n.nextSibling);var r=rr;t&&t_(e,t)?lE(r,n):(e.flags=e.flags&-4097|2,St=!1,rr=e)}}else{if(Bg(e))throw Error(ae(418));e.flags=e.flags&-4097|2,St=!1,rr=e}}}function n_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rr=e}function bd(e){if(e!==rr)return!1;if(!St)return n_(e),St=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fg(e.type,e.memoizedProps)),t&&(t=nr)){if(Bg(e))throw cE(),Error(ae(418));for(;t;)lE(e,t),t=Ui(t.nextSibling)}if(n_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){nr=Ui(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}nr=null}}else nr=rr?Ui(e.stateNode.nextSibling):null;return!0}function cE(){for(var e=nr;e;)e=Ui(e.nextSibling)}function ul(){nr=rr=null,St=!1}function Ay(e){Vr===null?Vr=[e]:Vr.push(e)}var sI=si.ReactCurrentBatchConfig;function rc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,e))}return e}function Sd(e,t){throw e=Object.prototype.toString.call(t),Error(ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function r_(e){var t=e._init;return t(e._payload)}function uE(e){function t(E,_){if(e){var C=E.deletions;C===null?(E.deletions=[_],E.flags|=16):C.push(_)}}function n(E,_){if(!e)return null;for(;_!==null;)t(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function s(E,_){return E=Hi(E,_),E.index=0,E.sibling=null,E}function i(E,_,C){return E.index=C,e?(C=E.alternate,C!==null?(C=C.index,C<_?(E.flags|=2,_):C):(E.flags|=2,_)):(E.flags|=1048576,_)}function a(E){return e&&E.alternate===null&&(E.flags|=2),E}function l(E,_,C,P){return _===null||_.tag!==6?(_=xm(C,E.mode,P),_.return=E,_):(_=s(_,C),_.return=E,_)}function c(E,_,C,P){var T=C.type;return T===Ta?f(E,_,C.props.children,P,C.key):_!==null&&(_.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===vi&&r_(T)===_.type)?(P=s(_,C.props),P.ref=rc(E,_,C),P.return=E,P):(P=th(C.type,C.key,C.props,null,E.mode,P),P.ref=rc(E,_,C),P.return=E,P)}function h(E,_,C,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==C.containerInfo||_.stateNode.implementation!==C.implementation?(_=wm(C,E.mode,P),_.return=E,_):(_=s(_,C.children||[]),_.return=E,_)}function f(E,_,C,P,T){return _===null||_.tag!==7?(_=Uo(C,E.mode,P,T),_.return=E,_):(_=s(_,C),_.return=E,_)}function m(E,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return _=xm(""+_,E.mode,C),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case hd:return C=th(_.type,_.key,_.props,null,E.mode,C),C.ref=rc(E,null,_),C.return=E,C;case Na:return _=wm(_,E.mode,C),_.return=E,_;case vi:var P=_._init;return m(E,P(_._payload),C)}if(gc(_)||Xl(_))return _=Uo(_,E.mode,C,null),_.return=E,_;Sd(E,_)}return null}function v(E,_,C,P){var T=_!==null?_.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return T!==null?null:l(E,_,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case hd:return C.key===T?c(E,_,C,P):null;case Na:return C.key===T?h(E,_,C,P):null;case vi:return T=C._init,v(E,_,T(C._payload),P)}if(gc(C)||Xl(C))return T!==null?null:f(E,_,C,P,null);Sd(E,C)}return null}function y(E,_,C,P,T){if(typeof P=="string"&&P!==""||typeof P=="number")return E=E.get(C)||null,l(_,E,""+P,T);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case hd:return E=E.get(P.key===null?C:P.key)||null,c(_,E,P,T);case Na:return E=E.get(P.key===null?C:P.key)||null,h(_,E,P,T);case vi:var R=P._init;return y(E,_,C,R(P._payload),T)}if(gc(P)||Xl(P))return E=E.get(C)||null,f(_,E,P,T,null);Sd(_,P)}return null}function S(E,_,C,P){for(var T=null,R=null,O=_,A=_=0,B=null;O!==null&&A<C.length;A++){O.index>A?(B=O,O=null):B=O.sibling;var q=v(E,O,C[A],P);if(q===null){O===null&&(O=B);break}e&&O&&q.alternate===null&&t(E,O),_=i(q,_,A),R===null?T=q:R.sibling=q,R=q,O=B}if(A===C.length)return n(E,O),St&&xo(E,A),T;if(O===null){for(;A<C.length;A++)O=m(E,C[A],P),O!==null&&(_=i(O,_,A),R===null?T=O:R.sibling=O,R=O);return St&&xo(E,A),T}for(O=r(E,O);A<C.length;A++)B=y(O,E,A,C[A],P),B!==null&&(e&&B.alternate!==null&&O.delete(B.key===null?A:B.key),_=i(B,_,A),R===null?T=B:R.sibling=B,R=B);return e&&O.forEach(function(Q){return t(E,Q)}),St&&xo(E,A),T}function w(E,_,C,P){var T=Xl(C);if(typeof T!="function")throw Error(ae(150));if(C=T.call(C),C==null)throw Error(ae(151));for(var R=T=null,O=_,A=_=0,B=null,q=C.next();O!==null&&!q.done;A++,q=C.next()){O.index>A?(B=O,O=null):B=O.sibling;var Q=v(E,O,q.value,P);if(Q===null){O===null&&(O=B);break}e&&O&&Q.alternate===null&&t(E,O),_=i(Q,_,A),R===null?T=Q:R.sibling=Q,R=Q,O=B}if(q.done)return n(E,O),St&&xo(E,A),T;if(O===null){for(;!q.done;A++,q=C.next())q=m(E,q.value,P),q!==null&&(_=i(q,_,A),R===null?T=q:R.sibling=q,R=q);return St&&xo(E,A),T}for(O=r(E,O);!q.done;A++,q=C.next())q=y(O,E,A,q.value,P),q!==null&&(e&&q.alternate!==null&&O.delete(q.key===null?A:q.key),_=i(q,_,A),R===null?T=q:R.sibling=q,R=q);return e&&O.forEach(function(W){return t(E,W)}),St&&xo(E,A),T}function b(E,_,C,P){if(typeof C=="object"&&C!==null&&C.type===Ta&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case hd:e:{for(var T=C.key,R=_;R!==null;){if(R.key===T){if(T=C.type,T===Ta){if(R.tag===7){n(E,R.sibling),_=s(R,C.props.children),_.return=E,E=_;break e}}else if(R.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===vi&&r_(T)===R.type){n(E,R.sibling),_=s(R,C.props),_.ref=rc(E,R,C),_.return=E,E=_;break e}n(E,R);break}else t(E,R);R=R.sibling}C.type===Ta?(_=Uo(C.props.children,E.mode,P,C.key),_.return=E,E=_):(P=th(C.type,C.key,C.props,null,E.mode,P),P.ref=rc(E,_,C),P.return=E,E=P)}return a(E);case Na:e:{for(R=C.key;_!==null;){if(_.key===R)if(_.tag===4&&_.stateNode.containerInfo===C.containerInfo&&_.stateNode.implementation===C.implementation){n(E,_.sibling),_=s(_,C.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else t(E,_);_=_.sibling}_=wm(C,E.mode,P),_.return=E,E=_}return a(E);case vi:return R=C._init,b(E,_,R(C._payload),P)}if(gc(C))return S(E,_,C,P);if(Xl(C))return w(E,_,C,P);Sd(E,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,_!==null&&_.tag===6?(n(E,_.sibling),_=s(_,C),_.return=E,E=_):(n(E,_),_=xm(C,E.mode,P),_.return=E,E=_),a(E)):n(E,_)}return b}var dl=uE(!0),dE=uE(!1),kh=eo(null),Ph=null,Da=null,Ly=null;function Dy(){Ly=Da=Ph=null}function Fy(e){var t=kh.current;bt(kh),e._currentValue=t}function Hg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ha(e,t){Ph=e,Ly=Da=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zn=!0),e.firstContext=null)}function Tr(e){var t=e._currentValue;if(Ly!==e)if(e={context:e,memoizedValue:t,next:null},Da===null){if(Ph===null)throw Error(ae(308));Da=e,Ph.dependencies={lanes:0,firstContext:e}}else Da=Da.next=e;return t}var Po=null;function $y(e){Po===null?Po=[e]:Po.push(e)}function hE(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,$y(t)):(n.next=s.next,s.next=n),t.interleaved=n,Js(e,r)}function Js(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var yi=!1;function Uy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zi(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,st&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Js(e,n)}return s=r.interleaved,s===null?(t.next=t,$y(r)):(t.next=s.next,s.next=t),r.interleaved=t,Js(e,n)}function Zd(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cy(e,n)}}function s_(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Nh(e,t,n,r){var s=e.updateQueue;yi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,h=c.next;c.next=null,a===null?i=h:a.next=h,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;a=0,f=h=c=null,l=i;do{var v=l.lane,y=l.eventTime;if((r&v)===v){f!==null&&(f=f.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var S=e,w=l;switch(v=t,y=n,w.tag){case 1:if(S=w.payload,typeof S=="function"){m=S.call(y,m,v);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=w.payload,v=typeof S=="function"?S.call(y,m,v):S,v==null)break e;m=Pt({},m,v);break e;case 2:yi=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else y={eventTime:y,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=y,c=m):f=f.next=y,a|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(f===null&&(c=m),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Vo|=a,e.lanes=a,e.memoizedState=m}}function i_(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ae(191,s));s.call(r)}}}var Cu={},_s=eo(Cu),Xc=eo(Cu),Jc=eo(Cu);function No(e){if(e===Cu)throw Error(ae(174));return e}function zy(e,t){switch(vt(Jc,t),vt(Xc,e),vt(_s,Cu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Eg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Eg(t,e)}bt(_s),vt(_s,t)}function hl(){bt(_s),bt(Xc),bt(Jc)}function pE(e){No(Jc.current);var t=No(_s.current),n=Eg(t,e.type);t!==n&&(vt(Xc,e),vt(_s,n))}function By(e){Xc.current===e&&(bt(_s),bt(Xc))}var Ct=eo(0);function Th(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fm=[];function Wy(){for(var e=0;e<fm.length;e++)fm[e]._workInProgressVersionPrimary=null;fm.length=0}var Kd=si.ReactCurrentDispatcher,pm=si.ReactCurrentBatchConfig,Ho=0,kt=null,Vt=null,Qt=null,jh=!1,Nc=!1,eu=0,iI=0;function dn(){throw Error(ae(321))}function Hy(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kr(e[n],t[n]))return!1;return!0}function Vy(e,t,n,r,s,i){if(Ho=i,kt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Kd.current=e===null||e.memoizedState===null?cI:uI,e=n(r,s),Nc){i=0;do{if(Nc=!1,eu=0,25<=i)throw Error(ae(301));i+=1,Qt=Vt=null,t.updateQueue=null,Kd.current=dI,e=n(r,s)}while(Nc)}if(Kd.current=Rh,t=Vt!==null&&Vt.next!==null,Ho=0,Qt=Vt=kt=null,jh=!1,t)throw Error(ae(300));return e}function qy(){var e=eu!==0;return eu=0,e}function hs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?kt.memoizedState=Qt=e:Qt=Qt.next=e,Qt}function jr(){if(Vt===null){var e=kt.alternate;e=e!==null?e.memoizedState:null}else e=Vt.next;var t=Qt===null?kt.memoizedState:Qt.next;if(t!==null)Qt=t,Vt=e;else{if(e===null)throw Error(ae(310));Vt=e,e={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Qt===null?kt.memoizedState=Qt=e:Qt=Qt.next=e}return Qt}function tu(e,t){return typeof t=="function"?t(e):t}function mm(e){var t=jr(),n=t.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=e;var r=Vt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,h=i;do{var f=h.lane;if((Ho&f)===f)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var m={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,kt.lanes|=f,Vo|=f}h=h.next}while(h!==null&&h!==i);c===null?a=r:c.next=l,Kr(r,t.memoizedState)||(zn=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,kt.lanes|=i,Vo|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function gm(e){var t=jr(),n=t.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Kr(i,t.memoizedState)||(zn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function mE(){}function gE(e,t){var n=kt,r=jr(),s=t(),i=!Kr(r.memoizedState,s);if(i&&(r.memoizedState=s,zn=!0),r=r.queue,Gy(xE.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Qt!==null&&Qt.memoizedState.tag&1){if(n.flags|=2048,nu(9,yE.bind(null,n,r,s,t),void 0,null),Xt===null)throw Error(ae(349));Ho&30||vE(n,t,s)}return s}function vE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=kt.updateQueue,t===null?(t={lastEffect:null,stores:null},kt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function yE(e,t,n,r){t.value=n,t.getSnapshot=r,wE(t)&&_E(e)}function xE(e,t,n){return n(function(){wE(t)&&_E(e)})}function wE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kr(e,n)}catch{return!0}}function _E(e){var t=Js(e,1);t!==null&&Zr(t,e,1,-1)}function o_(e){var t=hs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tu,lastRenderedState:e},t.queue=e,e=e.dispatch=lI.bind(null,kt,e),[t.memoizedState,e]}function nu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=kt.updateQueue,t===null?(t={lastEffect:null,stores:null},kt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function bE(){return jr().memoizedState}function Qd(e,t,n,r){var s=hs();kt.flags|=e,s.memoizedState=nu(1|t,n,void 0,r===void 0?null:r)}function Pf(e,t,n,r){var s=jr();r=r===void 0?null:r;var i=void 0;if(Vt!==null){var a=Vt.memoizedState;if(i=a.destroy,r!==null&&Hy(r,a.deps)){s.memoizedState=nu(t,n,i,r);return}}kt.flags|=e,s.memoizedState=nu(1|t,n,i,r)}function a_(e,t){return Qd(8390656,8,e,t)}function Gy(e,t){return Pf(2048,8,e,t)}function SE(e,t){return Pf(4,2,e,t)}function EE(e,t){return Pf(4,4,e,t)}function CE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kE(e,t,n){return n=n!=null?n.concat([e]):null,Pf(4,4,CE.bind(null,t,e),n)}function Yy(){}function PE(e,t){var n=jr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Hy(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function NE(e,t){var n=jr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Hy(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function TE(e,t,n){return Ho&21?(Kr(n,t)||(n=IS(),kt.lanes|=n,Vo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zn=!0),e.memoizedState=n)}function oI(e,t){var n=ut;ut=n!==0&&4>n?n:4,e(!0);var r=pm.transition;pm.transition={};try{e(!1),t()}finally{ut=n,pm.transition=r}}function jE(){return jr().memoizedState}function aI(e,t,n){var r=Wi(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},RE(e))ME(t,n);else if(n=hE(e,t,n,r),n!==null){var s=kn();Zr(n,e,r,s),OE(n,t,r)}}function lI(e,t,n){var r=Wi(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(RE(e))ME(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Kr(l,a)){var c=t.interleaved;c===null?(s.next=s,$y(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=hE(e,t,s,r),n!==null&&(s=kn(),Zr(n,e,r,s),OE(n,t,r))}}function RE(e){var t=e.alternate;return e===kt||t!==null&&t===kt}function ME(e,t){Nc=jh=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function OE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cy(e,n)}}var Rh={readContext:Tr,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},cI={readContext:Tr,useCallback:function(e,t){return hs().memoizedState=[e,t===void 0?null:t],e},useContext:Tr,useEffect:a_,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Qd(4194308,4,CE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Qd(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qd(4,2,e,t)},useMemo:function(e,t){var n=hs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=hs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=aI.bind(null,kt,e),[r.memoizedState,e]},useRef:function(e){var t=hs();return e={current:e},t.memoizedState=e},useState:o_,useDebugValue:Yy,useDeferredValue:function(e){return hs().memoizedState=e},useTransition:function(){var e=o_(!1),t=e[0];return e=oI.bind(null,e[1]),hs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=kt,s=hs();if(St){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=t(),Xt===null)throw Error(ae(349));Ho&30||vE(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,a_(xE.bind(null,r,i,e),[e]),r.flags|=2048,nu(9,yE.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=hs(),t=Xt.identifierPrefix;if(St){var n=Vs,r=Hs;n=(r&~(1<<32-Yr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=eu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=iI++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},uI={readContext:Tr,useCallback:PE,useContext:Tr,useEffect:Gy,useImperativeHandle:kE,useInsertionEffect:SE,useLayoutEffect:EE,useMemo:NE,useReducer:mm,useRef:bE,useState:function(){return mm(tu)},useDebugValue:Yy,useDeferredValue:function(e){var t=jr();return TE(t,Vt.memoizedState,e)},useTransition:function(){var e=mm(tu)[0],t=jr().memoizedState;return[e,t]},useMutableSource:mE,useSyncExternalStore:gE,useId:jE,unstable_isNewReconciler:!1},dI={readContext:Tr,useCallback:PE,useContext:Tr,useEffect:Gy,useImperativeHandle:kE,useInsertionEffect:SE,useLayoutEffect:EE,useMemo:NE,useReducer:gm,useRef:bE,useState:function(){return gm(tu)},useDebugValue:Yy,useDeferredValue:function(e){var t=jr();return Vt===null?t.memoizedState=e:TE(t,Vt.memoizedState,e)},useTransition:function(){var e=gm(tu)[0],t=jr().memoizedState;return[e,t]},useMutableSource:mE,useSyncExternalStore:gE,useId:jE,unstable_isNewReconciler:!1};function Ur(e,t){if(e&&e.defaultProps){t=Pt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Vg(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Pt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Nf={isMounted:function(e){return(e=e._reactInternals)?na(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=kn(),s=Wi(e),i=Zs(r,s);i.payload=t,n!=null&&(i.callback=n),t=zi(e,i,s),t!==null&&(Zr(t,e,s,r),Zd(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=kn(),s=Wi(e),i=Zs(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=zi(e,i,s),t!==null&&(Zr(t,e,s,r),Zd(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=kn(),r=Wi(e),s=Zs(n,r);s.tag=2,t!=null&&(s.callback=t),t=zi(e,s,r),t!==null&&(Zr(t,e,r,n),Zd(t,e,r))}};function l_(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Yc(n,r)||!Yc(s,i):!0}function IE(e,t,n){var r=!1,s=Yi,i=t.contextType;return typeof i=="object"&&i!==null?i=Tr(i):(s=Hn(t)?Bo:gn.current,r=t.contextTypes,i=(r=r!=null)?cl(e,s):Yi),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Nf,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function c_(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Nf.enqueueReplaceState(t,t.state,null)}function qg(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Uy(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Tr(i):(i=Hn(t)?Bo:gn.current,s.context=cl(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Vg(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Nf.enqueueReplaceState(s,s.state,null),Nh(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function fl(e,t){try{var n="",r=t;do n+=$M(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function vm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Gg(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hI=typeof WeakMap=="function"?WeakMap:Map;function AE(e,t,n){n=Zs(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Oh||(Oh=!0,rv=r),Gg(e,t)},n}function LE(e,t,n){n=Zs(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Gg(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Gg(e,t),typeof r!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function u_(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new hI;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=kI.bind(null,e,t,n),t.then(e,e))}function d_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function h_(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Zs(-1,1),t.tag=2,zi(n,t,1))),n.lanes|=1),e)}var fI=si.ReactCurrentOwner,zn=!1;function Sn(e,t,n,r){t.child=e===null?dE(t,null,n,r):dl(t,e.child,n,r)}function f_(e,t,n,r,s){n=n.render;var i=t.ref;return Ha(t,s),r=Vy(e,t,n,r,i,s),n=qy(),e!==null&&!zn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ei(e,t,s)):(St&&n&&Oy(t),t.flags|=1,Sn(e,t,r,s),t.child)}function p_(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!n0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,DE(e,t,i,r,s)):(e=th(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Yc,n(a,r)&&e.ref===t.ref)return ei(e,t,s)}return t.flags|=1,e=Hi(i,r),e.ref=t.ref,e.return=t,t.child=e}function DE(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Yc(i,r)&&e.ref===t.ref)if(zn=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(zn=!0);else return t.lanes=e.lanes,ei(e,t,s)}return Yg(e,t,n,r,s)}function FE(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt($a,er),er|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,vt($a,er),er|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,vt($a,er),er|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,vt($a,er),er|=r;return Sn(e,t,s,n),t.child}function $E(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Yg(e,t,n,r,s){var i=Hn(n)?Bo:gn.current;return i=cl(t,i),Ha(t,s),n=Vy(e,t,n,r,i,s),r=qy(),e!==null&&!zn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ei(e,t,s)):(St&&r&&Oy(t),t.flags|=1,Sn(e,t,n,s),t.child)}function m_(e,t,n,r,s){if(Hn(n)){var i=!0;Sh(t)}else i=!1;if(Ha(t,s),t.stateNode===null)Xd(e,t),IE(t,n,r),qg(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Tr(h):(h=Hn(n)?Bo:gn.current,h=cl(t,h));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==h)&&c_(t,a,r,h),yi=!1;var v=t.memoizedState;a.state=v,Nh(t,r,a,s),c=t.memoizedState,l!==r||v!==c||Wn.current||yi?(typeof f=="function"&&(Vg(t,n,f,r),c=t.memoizedState),(l=yi||l_(t,n,l,r,v,c,h))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,fE(e,t),l=t.memoizedProps,h=t.type===t.elementType?l:Ur(t.type,l),a.props=h,m=t.pendingProps,v=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Tr(c):(c=Hn(n)?Bo:gn.current,c=cl(t,c));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||v!==c)&&c_(t,a,r,c),yi=!1,v=t.memoizedState,a.state=v,Nh(t,r,a,s);var S=t.memoizedState;l!==m||v!==S||Wn.current||yi?(typeof y=="function"&&(Vg(t,n,y,r),S=t.memoizedState),(h=yi||l_(t,n,h,r,v,S,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,S,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,S,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=S),a.props=r,a.state=S,a.context=c,r=h):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return Zg(e,t,n,r,i,s)}function Zg(e,t,n,r,s,i){$E(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&e_(t,n,!1),ei(e,t,i);r=t.stateNode,fI.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=dl(t,e.child,null,i),t.child=dl(t,null,l,i)):Sn(e,t,l,i),t.memoizedState=r.state,s&&e_(t,n,!0),t.child}function UE(e){var t=e.stateNode;t.pendingContext?Jw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Jw(e,t.context,!1),zy(e,t.containerInfo)}function g_(e,t,n,r,s){return ul(),Ay(s),t.flags|=256,Sn(e,t,n,r),t.child}var Kg={dehydrated:null,treeContext:null,retryLane:0};function Qg(e){return{baseLanes:e,cachePool:null,transitions:null}}function zE(e,t,n){var r=t.pendingProps,s=Ct.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),vt(Ct,s&1),e===null)return Wg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Rf(a,r,0,null),e=Uo(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Qg(n),t.memoizedState=Kg,e):Zy(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return pI(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Hi(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Hi(l,i):(i=Uo(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Qg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Kg,r}return i=e.child,e=i.sibling,r=Hi(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Zy(e,t){return t=Rf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ed(e,t,n,r){return r!==null&&Ay(r),dl(t,e.child,null,n),e=Zy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pI(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=vm(Error(ae(422))),Ed(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Rf({mode:"visible",children:r.children},s,0,null),i=Uo(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&dl(t,e.child,null,a),t.child.memoizedState=Qg(a),t.memoizedState=Kg,i);if(!(t.mode&1))return Ed(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ae(419)),r=vm(i,r,void 0),Ed(e,t,a,r)}if(l=(a&e.childLanes)!==0,zn||l){if(r=Xt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Js(e,s),Zr(r,e,s,-1))}return t0(),r=vm(Error(ae(421))),Ed(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=PI.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,nr=Ui(s.nextSibling),rr=t,St=!0,Vr=null,e!==null&&(Sr[Er++]=Hs,Sr[Er++]=Vs,Sr[Er++]=Wo,Hs=e.id,Vs=e.overflow,Wo=t),t=Zy(t,r.children),t.flags|=4096,t)}function v_(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Hg(e.return,t,n)}function ym(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function BE(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Sn(e,t,r.children,n),r=Ct.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&v_(e,n,t);else if(e.tag===19)v_(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(vt(Ct,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Th(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ym(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Th(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ym(t,!0,n,null,i);break;case"together":ym(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ei(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Vo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ae(153));if(t.child!==null){for(e=t.child,n=Hi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Hi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function mI(e,t,n){switch(t.tag){case 3:UE(t),ul();break;case 5:pE(t);break;case 1:Hn(t.type)&&Sh(t);break;case 4:zy(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;vt(kh,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(vt(Ct,Ct.current&1),t.flags|=128,null):n&t.child.childLanes?zE(e,t,n):(vt(Ct,Ct.current&1),e=ei(e,t,n),e!==null?e.sibling:null);vt(Ct,Ct.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return BE(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),vt(Ct,Ct.current),r)break;return null;case 22:case 23:return t.lanes=0,FE(e,t,n)}return ei(e,t,n)}var WE,Xg,HE,VE;WE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xg=function(){};HE=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,No(_s.current);var i=null;switch(n){case"input":s=wg(e,s),r=wg(e,r),i=[];break;case"select":s=Pt({},s,{value:void 0}),r=Pt({},r,{value:void 0}),i=[];break;case"textarea":s=Sg(e,s),r=Sg(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=_h)}Cg(n,r);var a;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(zc.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(zc.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&_t("scroll",e),i||l===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(t.updateQueue=h)&&(t.flags|=4)}};VE=function(e,t,n,r){n!==r&&(t.flags|=4)};function sc(e,t){if(!St)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function gI(e,t,n){var r=t.pendingProps;switch(Iy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(t),null;case 1:return Hn(t.type)&&bh(),hn(t),null;case 3:return r=t.stateNode,hl(),bt(Wn),bt(gn),Wy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(bd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vr!==null&&(ov(Vr),Vr=null))),Xg(e,t),hn(t),null;case 5:By(t);var s=No(Jc.current);if(n=t.type,e!==null&&t.stateNode!=null)HE(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ae(166));return hn(t),null}if(e=No(_s.current),bd(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[vs]=t,r[Qc]=i,e=(t.mode&1)!==0,n){case"dialog":_t("cancel",r),_t("close",r);break;case"iframe":case"object":case"embed":_t("load",r);break;case"video":case"audio":for(s=0;s<yc.length;s++)_t(yc[s],r);break;case"source":_t("error",r);break;case"img":case"image":case"link":_t("error",r),_t("load",r);break;case"details":_t("toggle",r);break;case"input":kw(r,i),_t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_t("invalid",r);break;case"textarea":Nw(r,i),_t("invalid",r)}Cg(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&_d(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&_d(r.textContent,l,e),s=["children",""+l]):zc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&_t("scroll",r)}switch(n){case"input":fd(r),Pw(r,i,!0);break;case"textarea":fd(r),Tw(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=_h)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xS(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[vs]=t,e[Qc]=r,WE(e,t,!1,!1),t.stateNode=e;e:{switch(a=kg(n,r),n){case"dialog":_t("cancel",e),_t("close",e),s=r;break;case"iframe":case"object":case"embed":_t("load",e),s=r;break;case"video":case"audio":for(s=0;s<yc.length;s++)_t(yc[s],e);s=r;break;case"source":_t("error",e),s=r;break;case"img":case"image":case"link":_t("error",e),_t("load",e),s=r;break;case"details":_t("toggle",e),s=r;break;case"input":kw(e,r),s=wg(e,r),_t("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Pt({},r,{value:void 0}),_t("invalid",e);break;case"textarea":Nw(e,r),s=Sg(e,r),_t("invalid",e);break;default:s=r}Cg(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?bS(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&wS(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Bc(e,c):typeof c=="number"&&Bc(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(zc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&_t("scroll",e):c!=null&&xy(e,i,c,a))}switch(n){case"input":fd(e),Pw(e,r,!1);break;case"textarea":fd(e),Tw(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Gi(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Ua(e,!!r.multiple,i,!1):r.defaultValue!=null&&Ua(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=_h)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return hn(t),null;case 6:if(e&&t.stateNode!=null)VE(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ae(166));if(n=No(Jc.current),No(_s.current),bd(t)){if(r=t.stateNode,n=t.memoizedProps,r[vs]=t,(i=r.nodeValue!==n)&&(e=rr,e!==null))switch(e.tag){case 3:_d(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_d(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vs]=t,t.stateNode=r}return hn(t),null;case 13:if(bt(Ct),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(St&&nr!==null&&t.mode&1&&!(t.flags&128))cE(),ul(),t.flags|=98560,i=!1;else if(i=bd(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(ae(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ae(317));i[vs]=t}else ul(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;hn(t),i=!1}else Vr!==null&&(ov(Vr),Vr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ct.current&1?Gt===0&&(Gt=3):t0())),t.updateQueue!==null&&(t.flags|=4),hn(t),null);case 4:return hl(),Xg(e,t),e===null&&Zc(t.stateNode.containerInfo),hn(t),null;case 10:return Fy(t.type._context),hn(t),null;case 17:return Hn(t.type)&&bh(),hn(t),null;case 19:if(bt(Ct),i=t.memoizedState,i===null)return hn(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)sc(i,!1);else{if(Gt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Th(e),a!==null){for(t.flags|=128,sc(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return vt(Ct,Ct.current&1|2),t.child}e=e.sibling}i.tail!==null&&It()>pl&&(t.flags|=128,r=!0,sc(i,!1),t.lanes=4194304)}else{if(!r)if(e=Th(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),sc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!St)return hn(t),null}else 2*It()-i.renderingStartTime>pl&&n!==1073741824&&(t.flags|=128,r=!0,sc(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=It(),t.sibling=null,n=Ct.current,vt(Ct,r?n&1|2:n&1),t):(hn(t),null);case 22:case 23:return e0(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?er&1073741824&&(hn(t),t.subtreeFlags&6&&(t.flags|=8192)):hn(t),null;case 24:return null;case 25:return null}throw Error(ae(156,t.tag))}function vI(e,t){switch(Iy(t),t.tag){case 1:return Hn(t.type)&&bh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hl(),bt(Wn),bt(gn),Wy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return By(t),null;case 13:if(bt(Ct),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ae(340));ul()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return bt(Ct),null;case 4:return hl(),null;case 10:return Fy(t.type._context),null;case 22:case 23:return e0(),null;case 24:return null;default:return null}}var Cd=!1,pn=!1,yI=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Fa(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Rt(e,t,r)}else n.current=null}function Jg(e,t,n){try{n()}catch(r){Rt(e,t,r)}}var y_=!1;function xI(e,t){if(Lg=yh,e=KS(),My(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,h=0,f=0,m=e,v=null;t:for(;;){for(var y;m!==n||s!==0&&m.nodeType!==3||(l=a+s),m!==i||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(y=m.firstChild)!==null;)v=m,m=y;for(;;){if(m===e)break t;if(v===n&&++h===s&&(l=a),v===i&&++f===r&&(c=a),(y=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dg={focusedElem:e,selectionRange:n},yh=!1,_e=t;_e!==null;)if(t=_e,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,_e=e;else for(;_e!==null;){t=_e;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var w=S.memoizedProps,b=S.memoizedState,E=t.stateNode,_=E.getSnapshotBeforeUpdate(t.elementType===t.type?w:Ur(t.type,w),b);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(P){Rt(t,t.return,P)}if(e=t.sibling,e!==null){e.return=t.return,_e=e;break}_e=t.return}return S=y_,y_=!1,S}function Tc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Jg(t,n,i)}s=s.next}while(s!==r)}}function Tf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ev(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function qE(e){var t=e.alternate;t!==null&&(e.alternate=null,qE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vs],delete t[Qc],delete t[Ug],delete t[tI],delete t[nI])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function GE(e){return e.tag===5||e.tag===3||e.tag===4}function x_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||GE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tv(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=_h));else if(r!==4&&(e=e.child,e!==null))for(tv(e,t,n),e=e.sibling;e!==null;)tv(e,t,n),e=e.sibling}function nv(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(nv(e,t,n),e=e.sibling;e!==null;)nv(e,t,n),e=e.sibling}var sn=null,Wr=!1;function ci(e,t,n){for(n=n.child;n!==null;)YE(e,t,n),n=n.sibling}function YE(e,t,n){if(ws&&typeof ws.onCommitFiberUnmount=="function")try{ws.onCommitFiberUnmount(_f,n)}catch{}switch(n.tag){case 5:pn||Fa(n,t);case 6:var r=sn,s=Wr;sn=null,ci(e,t,n),sn=r,Wr=s,sn!==null&&(Wr?(e=sn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):sn.removeChild(n.stateNode));break;case 18:sn!==null&&(Wr?(e=sn,n=n.stateNode,e.nodeType===8?dm(e.parentNode,n):e.nodeType===1&&dm(e,n),qc(e)):dm(sn,n.stateNode));break;case 4:r=sn,s=Wr,sn=n.stateNode.containerInfo,Wr=!0,ci(e,t,n),sn=r,Wr=s;break;case 0:case 11:case 14:case 15:if(!pn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Jg(n,t,a),s=s.next}while(s!==r)}ci(e,t,n);break;case 1:if(!pn&&(Fa(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Rt(n,t,l)}ci(e,t,n);break;case 21:ci(e,t,n);break;case 22:n.mode&1?(pn=(r=pn)||n.memoizedState!==null,ci(e,t,n),pn=r):ci(e,t,n);break;default:ci(e,t,n)}}function w_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new yI),t.forEach(function(r){var s=NI.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Lr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:sn=l.stateNode,Wr=!1;break e;case 3:sn=l.stateNode.containerInfo,Wr=!0;break e;case 4:sn=l.stateNode.containerInfo,Wr=!0;break e}l=l.return}if(sn===null)throw Error(ae(160));YE(i,a,s),sn=null,Wr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){Rt(s,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ZE(t,e),t=t.sibling}function ZE(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Lr(t,e),us(e),r&4){try{Tc(3,e,e.return),Tf(3,e)}catch(w){Rt(e,e.return,w)}try{Tc(5,e,e.return)}catch(w){Rt(e,e.return,w)}}break;case 1:Lr(t,e),us(e),r&512&&n!==null&&Fa(n,n.return);break;case 5:if(Lr(t,e),us(e),r&512&&n!==null&&Fa(n,n.return),e.flags&32){var s=e.stateNode;try{Bc(s,"")}catch(w){Rt(e,e.return,w)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&vS(s,i),kg(l,a);var h=kg(l,i);for(a=0;a<c.length;a+=2){var f=c[a],m=c[a+1];f==="style"?bS(s,m):f==="dangerouslySetInnerHTML"?wS(s,m):f==="children"?Bc(s,m):xy(s,f,m,h)}switch(l){case"input":_g(s,i);break;case"textarea":yS(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Ua(s,!!i.multiple,y,!1):v!==!!i.multiple&&(i.defaultValue!=null?Ua(s,!!i.multiple,i.defaultValue,!0):Ua(s,!!i.multiple,i.multiple?[]:"",!1))}s[Qc]=i}catch(w){Rt(e,e.return,w)}}break;case 6:if(Lr(t,e),us(e),r&4){if(e.stateNode===null)throw Error(ae(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){Rt(e,e.return,w)}}break;case 3:if(Lr(t,e),us(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qc(t.containerInfo)}catch(w){Rt(e,e.return,w)}break;case 4:Lr(t,e),us(e);break;case 13:Lr(t,e),us(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Xy=It())),r&4&&w_(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(pn=(h=pn)||f,Lr(t,e),pn=h):Lr(t,e),us(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!f&&e.mode&1)for(_e=e,f=e.child;f!==null;){for(m=_e=f;_e!==null;){switch(v=_e,y=v.child,v.tag){case 0:case 11:case 14:case 15:Tc(4,v,v.return);break;case 1:Fa(v,v.return);var S=v.stateNode;if(typeof S.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(w){Rt(r,n,w)}}break;case 5:Fa(v,v.return);break;case 22:if(v.memoizedState!==null){b_(m);continue}}y!==null?(y.return=v,_e=y):b_(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=_S("display",a))}catch(w){Rt(e,e.return,w)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(w){Rt(e,e.return,w)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Lr(t,e),us(e),r&4&&w_(e);break;case 21:break;default:Lr(t,e),us(e)}}function us(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(GE(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Bc(s,""),r.flags&=-33);var i=x_(e);nv(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=x_(e);tv(e,l,a);break;default:throw Error(ae(161))}}catch(c){Rt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wI(e,t,n){_e=e,KE(e)}function KE(e,t,n){for(var r=(e.mode&1)!==0;_e!==null;){var s=_e,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Cd;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||pn;l=Cd;var h=pn;if(Cd=a,(pn=c)&&!h)for(_e=s;_e!==null;)a=_e,c=a.child,a.tag===22&&a.memoizedState!==null?S_(s):c!==null?(c.return=a,_e=c):S_(s);for(;i!==null;)_e=i,KE(i),i=i.sibling;_e=s,Cd=l,pn=h}__(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,_e=i):__(e)}}function __(e){for(;_e!==null;){var t=_e;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:pn||Tf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!pn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ur(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&i_(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}i_(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&qc(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}pn||t.flags&512&&ev(t)}catch(v){Rt(t,t.return,v)}}if(t===e){_e=null;break}if(n=t.sibling,n!==null){n.return=t.return,_e=n;break}_e=t.return}}function b_(e){for(;_e!==null;){var t=_e;if(t===e){_e=null;break}var n=t.sibling;if(n!==null){n.return=t.return,_e=n;break}_e=t.return}}function S_(e){for(;_e!==null;){var t=_e;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Tf(4,t)}catch(c){Rt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Rt(t,s,c)}}var i=t.return;try{ev(t)}catch(c){Rt(t,i,c)}break;case 5:var a=t.return;try{ev(t)}catch(c){Rt(t,a,c)}}}catch(c){Rt(t,t.return,c)}if(t===e){_e=null;break}var l=t.sibling;if(l!==null){l.return=t.return,_e=l;break}_e=t.return}}var _I=Math.ceil,Mh=si.ReactCurrentDispatcher,Ky=si.ReactCurrentOwner,Pr=si.ReactCurrentBatchConfig,st=0,Xt=null,zt=null,on=0,er=0,$a=eo(0),Gt=0,ru=null,Vo=0,jf=0,Qy=0,jc=null,$n=null,Xy=0,pl=1/0,$s=null,Oh=!1,rv=null,Bi=null,kd=!1,Oi=null,Ih=0,Rc=0,sv=null,Jd=-1,eh=0;function kn(){return st&6?It():Jd!==-1?Jd:Jd=It()}function Wi(e){return e.mode&1?st&2&&on!==0?on&-on:sI.transition!==null?(eh===0&&(eh=IS()),eh):(e=ut,e!==0||(e=window.event,e=e===void 0?16:zS(e.type)),e):1}function Zr(e,t,n,r){if(50<Rc)throw Rc=0,sv=null,Error(ae(185));bu(e,n,r),(!(st&2)||e!==Xt)&&(e===Xt&&(!(st&2)&&(jf|=n),Gt===4&&wi(e,on)),Vn(e,r),n===1&&st===0&&!(t.mode&1)&&(pl=It()+500,kf&&to()))}function Vn(e,t){var n=e.callbackNode;sO(e,t);var r=vh(e,e===Xt?on:0);if(r===0)n!==null&&Mw(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Mw(n),t===1)e.tag===0?rI(E_.bind(null,e)):oE(E_.bind(null,e)),JO(function(){!(st&6)&&to()}),n=null;else{switch(AS(r)){case 1:n=Ey;break;case 4:n=MS;break;case 16:n=gh;break;case 536870912:n=OS;break;default:n=gh}n=sC(n,QE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function QE(e,t){if(Jd=-1,eh=0,st&6)throw Error(ae(327));var n=e.callbackNode;if(Va()&&e.callbackNode!==n)return null;var r=vh(e,e===Xt?on:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ah(e,r);else{t=r;var s=st;st|=2;var i=JE();(Xt!==e||on!==t)&&($s=null,pl=It()+500,$o(e,t));do try{EI();break}catch(l){XE(e,l)}while(!0);Dy(),Mh.current=i,st=s,zt!==null?t=0:(Xt=null,on=0,t=Gt)}if(t!==0){if(t===2&&(s=Rg(e),s!==0&&(r=s,t=iv(e,s))),t===1)throw n=ru,$o(e,0),wi(e,r),Vn(e,It()),n;if(t===6)wi(e,r);else{if(s=e.current.alternate,!(r&30)&&!bI(s)&&(t=Ah(e,r),t===2&&(i=Rg(e),i!==0&&(r=i,t=iv(e,i))),t===1))throw n=ru,$o(e,0),wi(e,r),Vn(e,It()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(ae(345));case 2:wo(e,$n,$s);break;case 3:if(wi(e,r),(r&130023424)===r&&(t=Xy+500-It(),10<t)){if(vh(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){kn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=$g(wo.bind(null,e,$n,$s),t);break}wo(e,$n,$s);break;case 4:if(wi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Yr(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=It()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_I(r/1960))-r,10<r){e.timeoutHandle=$g(wo.bind(null,e,$n,$s),r);break}wo(e,$n,$s);break;case 5:wo(e,$n,$s);break;default:throw Error(ae(329))}}}return Vn(e,It()),e.callbackNode===n?QE.bind(null,e):null}function iv(e,t){var n=jc;return e.current.memoizedState.isDehydrated&&($o(e,t).flags|=256),e=Ah(e,t),e!==2&&(t=$n,$n=n,t!==null&&ov(t)),e}function ov(e){$n===null?$n=e:$n.push.apply($n,e)}function bI(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Kr(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wi(e,t){for(t&=~Qy,t&=~jf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Yr(t),r=1<<n;e[n]=-1,t&=~r}}function E_(e){if(st&6)throw Error(ae(327));Va();var t=vh(e,0);if(!(t&1))return Vn(e,It()),null;var n=Ah(e,t);if(e.tag!==0&&n===2){var r=Rg(e);r!==0&&(t=r,n=iv(e,r))}if(n===1)throw n=ru,$o(e,0),wi(e,t),Vn(e,It()),n;if(n===6)throw Error(ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wo(e,$n,$s),Vn(e,It()),null}function Jy(e,t){var n=st;st|=1;try{return e(t)}finally{st=n,st===0&&(pl=It()+500,kf&&to())}}function qo(e){Oi!==null&&Oi.tag===0&&!(st&6)&&Va();var t=st;st|=1;var n=Pr.transition,r=ut;try{if(Pr.transition=null,ut=1,e)return e()}finally{ut=r,Pr.transition=n,st=t,!(st&6)&&to()}}function e0(){er=$a.current,bt($a)}function $o(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,XO(n)),zt!==null)for(n=zt.return;n!==null;){var r=n;switch(Iy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bh();break;case 3:hl(),bt(Wn),bt(gn),Wy();break;case 5:By(r);break;case 4:hl();break;case 13:bt(Ct);break;case 19:bt(Ct);break;case 10:Fy(r.type._context);break;case 22:case 23:e0()}n=n.return}if(Xt=e,zt=e=Hi(e.current,null),on=er=t,Gt=0,ru=null,Qy=jf=Vo=0,$n=jc=null,Po!==null){for(t=0;t<Po.length;t++)if(n=Po[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Po=null}return e}function XE(e,t){do{var n=zt;try{if(Dy(),Kd.current=Rh,jh){for(var r=kt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}jh=!1}if(Ho=0,Qt=Vt=kt=null,Nc=!1,eu=0,Ky.current=null,n===null||n.return===null){Gt=1,ru=t,zt=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=on,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.lanes=v.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=d_(a);if(y!==null){y.flags&=-257,h_(y,a,l,i,t),y.mode&1&&u_(i,h,t),t=y,c=h;var S=t.updateQueue;if(S===null){var w=new Set;w.add(c),t.updateQueue=w}else S.add(c);break e}else{if(!(t&1)){u_(i,h,t),t0();break e}c=Error(ae(426))}}else if(St&&l.mode&1){var b=d_(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),h_(b,a,l,i,t),Ay(fl(c,l));break e}}i=c=fl(c,l),Gt!==4&&(Gt=2),jc===null?jc=[i]:jc.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var E=AE(i,c,t);s_(i,E);break e;case 1:l=c;var _=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Bi===null||!Bi.has(C)))){i.flags|=65536,t&=-t,i.lanes|=t;var P=LE(i,l,t);s_(i,P);break e}}i=i.return}while(i!==null)}tC(n)}catch(T){t=T,zt===n&&n!==null&&(zt=n=n.return);continue}break}while(!0)}function JE(){var e=Mh.current;return Mh.current=Rh,e===null?Rh:e}function t0(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),Xt===null||!(Vo&268435455)&&!(jf&268435455)||wi(Xt,on)}function Ah(e,t){var n=st;st|=2;var r=JE();(Xt!==e||on!==t)&&($s=null,$o(e,t));do try{SI();break}catch(s){XE(e,s)}while(!0);if(Dy(),st=n,Mh.current=r,zt!==null)throw Error(ae(261));return Xt=null,on=0,Gt}function SI(){for(;zt!==null;)eC(zt)}function EI(){for(;zt!==null&&!ZM();)eC(zt)}function eC(e){var t=rC(e.alternate,e,er);e.memoizedProps=e.pendingProps,t===null?tC(e):zt=t,Ky.current=null}function tC(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=vI(n,t),n!==null){n.flags&=32767,zt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Gt=6,zt=null;return}}else if(n=gI(n,t,er),n!==null){zt=n;return}if(t=t.sibling,t!==null){zt=t;return}zt=t=e}while(t!==null);Gt===0&&(Gt=5)}function wo(e,t,n){var r=ut,s=Pr.transition;try{Pr.transition=null,ut=1,CI(e,t,n,r)}finally{Pr.transition=s,ut=r}return null}function CI(e,t,n,r){do Va();while(Oi!==null);if(st&6)throw Error(ae(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ae(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(iO(e,i),e===Xt&&(zt=Xt=null,on=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||kd||(kd=!0,sC(gh,function(){return Va(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Pr.transition,Pr.transition=null;var a=ut;ut=1;var l=st;st|=4,Ky.current=null,xI(e,n),ZE(n,e),VO(Dg),yh=!!Lg,Dg=Lg=null,e.current=n,wI(n),KM(),st=l,ut=a,Pr.transition=i}else e.current=n;if(kd&&(kd=!1,Oi=e,Ih=s),i=e.pendingLanes,i===0&&(Bi=null),JM(n.stateNode),Vn(e,It()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Oh)throw Oh=!1,e=rv,rv=null,e;return Ih&1&&e.tag!==0&&Va(),i=e.pendingLanes,i&1?e===sv?Rc++:(Rc=0,sv=e):Rc=0,to(),null}function Va(){if(Oi!==null){var e=AS(Ih),t=Pr.transition,n=ut;try{if(Pr.transition=null,ut=16>e?16:e,Oi===null)var r=!1;else{if(e=Oi,Oi=null,Ih=0,st&6)throw Error(ae(331));var s=st;for(st|=4,_e=e.current;_e!==null;){var i=_e,a=i.child;if(_e.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(_e=h;_e!==null;){var f=_e;switch(f.tag){case 0:case 11:case 15:Tc(8,f,i)}var m=f.child;if(m!==null)m.return=f,_e=m;else for(;_e!==null;){f=_e;var v=f.sibling,y=f.return;if(qE(f),f===h){_e=null;break}if(v!==null){v.return=y,_e=v;break}_e=y}}}var S=i.alternate;if(S!==null){var w=S.child;if(w!==null){S.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}_e=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,_e=a;else e:for(;_e!==null;){if(i=_e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Tc(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,_e=E;break e}_e=i.return}}var _=e.current;for(_e=_;_e!==null;){a=_e;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,_e=C;else e:for(a=_;_e!==null;){if(l=_e,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Tf(9,l)}}catch(T){Rt(l,l.return,T)}if(l===a){_e=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,_e=P;break e}_e=l.return}}if(st=s,to(),ws&&typeof ws.onPostCommitFiberRoot=="function")try{ws.onPostCommitFiberRoot(_f,e)}catch{}r=!0}return r}finally{ut=n,Pr.transition=t}}return!1}function C_(e,t,n){t=fl(n,t),t=AE(e,t,1),e=zi(e,t,1),t=kn(),e!==null&&(bu(e,1,t),Vn(e,t))}function Rt(e,t,n){if(e.tag===3)C_(e,e,n);else for(;t!==null;){if(t.tag===3){C_(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bi===null||!Bi.has(r))){e=fl(n,e),e=LE(t,e,1),t=zi(t,e,1),e=kn(),t!==null&&(bu(t,1,e),Vn(t,e));break}}t=t.return}}function kI(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=kn(),e.pingedLanes|=e.suspendedLanes&n,Xt===e&&(on&n)===n&&(Gt===4||Gt===3&&(on&130023424)===on&&500>It()-Xy?$o(e,0):Qy|=n),Vn(e,t)}function nC(e,t){t===0&&(e.mode&1?(t=gd,gd<<=1,!(gd&130023424)&&(gd=4194304)):t=1);var n=kn();e=Js(e,t),e!==null&&(bu(e,t,n),Vn(e,n))}function PI(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),nC(e,n)}function NI(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(t),nC(e,n)}var rC;rC=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Wn.current)zn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return zn=!1,mI(e,t,n);zn=!!(e.flags&131072)}else zn=!1,St&&t.flags&1048576&&aE(t,Ch,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Xd(e,t),e=t.pendingProps;var s=cl(t,gn.current);Ha(t,n),s=Vy(null,t,r,e,s,n);var i=qy();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Hn(r)?(i=!0,Sh(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Uy(t),s.updater=Nf,t.stateNode=s,s._reactInternals=t,qg(t,r,e,n),t=Zg(null,t,r,!0,i,n)):(t.tag=0,St&&i&&Oy(t),Sn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Xd(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=jI(r),e=Ur(r,e),s){case 0:t=Yg(null,t,r,e,n);break e;case 1:t=m_(null,t,r,e,n);break e;case 11:t=f_(null,t,r,e,n);break e;case 14:t=p_(null,t,r,Ur(r.type,e),n);break e}throw Error(ae(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ur(r,s),Yg(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ur(r,s),m_(e,t,r,s,n);case 3:e:{if(UE(t),e===null)throw Error(ae(387));r=t.pendingProps,i=t.memoizedState,s=i.element,fE(e,t),Nh(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=fl(Error(ae(423)),t),t=g_(e,t,r,n,s);break e}else if(r!==s){s=fl(Error(ae(424)),t),t=g_(e,t,r,n,s);break e}else for(nr=Ui(t.stateNode.containerInfo.firstChild),rr=t,St=!0,Vr=null,n=dE(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ul(),r===s){t=ei(e,t,n);break e}Sn(e,t,r,n)}t=t.child}return t;case 5:return pE(t),e===null&&Wg(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,Fg(r,s)?a=null:i!==null&&Fg(r,i)&&(t.flags|=32),$E(e,t),Sn(e,t,a,n),t.child;case 6:return e===null&&Wg(t),null;case 13:return zE(e,t,n);case 4:return zy(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=dl(t,null,r,n):Sn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ur(r,s),f_(e,t,r,s,n);case 7:return Sn(e,t,t.pendingProps,n),t.child;case 8:return Sn(e,t,t.pendingProps.children,n),t.child;case 12:return Sn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,vt(kh,r._currentValue),r._currentValue=a,i!==null)if(Kr(i.value,a)){if(i.children===s.children&&!Wn.current){t=ei(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Zs(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?c.next=c:(c.next=f.next,f.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Hg(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ae(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Hg(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Sn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ha(t,n),s=Tr(s),r=r(s),t.flags|=1,Sn(e,t,r,n),t.child;case 14:return r=t.type,s=Ur(r,t.pendingProps),s=Ur(r.type,s),p_(e,t,r,s,n);case 15:return DE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ur(r,s),Xd(e,t),t.tag=1,Hn(r)?(e=!0,Sh(t)):e=!1,Ha(t,n),IE(t,r,s),qg(t,r,s,n),Zg(null,t,r,!0,e,n);case 19:return BE(e,t,n);case 22:return FE(e,t,n)}throw Error(ae(156,t.tag))};function sC(e,t){return RS(e,t)}function TI(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(e,t,n,r){return new TI(e,t,n,r)}function n0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jI(e){if(typeof e=="function")return n0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_y)return 11;if(e===by)return 14}return 2}function Hi(e,t){var n=e.alternate;return n===null?(n=Cr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function th(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")n0(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ta:return Uo(n.children,s,i,t);case wy:a=8,s|=8;break;case gg:return e=Cr(12,n,t,s|2),e.elementType=gg,e.lanes=i,e;case vg:return e=Cr(13,n,t,s),e.elementType=vg,e.lanes=i,e;case yg:return e=Cr(19,n,t,s),e.elementType=yg,e.lanes=i,e;case pS:return Rf(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case hS:a=10;break e;case fS:a=9;break e;case _y:a=11;break e;case by:a=14;break e;case vi:a=16,r=null;break e}throw Error(ae(130,e==null?e:typeof e,""))}return t=Cr(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Uo(e,t,n,r){return e=Cr(7,e,r,t),e.lanes=n,e}function Rf(e,t,n,r){return e=Cr(22,e,r,t),e.elementType=pS,e.lanes=n,e.stateNode={isHidden:!1},e}function xm(e,t,n){return e=Cr(6,e,null,t),e.lanes=n,e}function wm(e,t,n){return t=Cr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function RI(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=em(0),this.expirationTimes=em(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=em(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function r0(e,t,n,r,s,i,a,l,c){return e=new RI(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Cr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uy(i),e}function MI(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Na,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function iC(e){if(!e)return Yi;e=e._reactInternals;e:{if(na(e)!==e||e.tag!==1)throw Error(ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Hn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ae(171))}if(e.tag===1){var n=e.type;if(Hn(n))return iE(e,n,t)}return t}function oC(e,t,n,r,s,i,a,l,c){return e=r0(n,r,!0,e,s,i,a,l,c),e.context=iC(null),n=e.current,r=kn(),s=Wi(n),i=Zs(r,s),i.callback=t??null,zi(n,i,s),e.current.lanes=s,bu(e,s,r),Vn(e,r),e}function Mf(e,t,n,r){var s=t.current,i=kn(),a=Wi(s);return n=iC(n),t.context===null?t.context=n:t.pendingContext=n,t=Zs(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=zi(s,t,a),e!==null&&(Zr(e,s,a,i),Zd(e,s,a)),a}function Lh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function k_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function s0(e,t){k_(e,t),(e=e.alternate)&&k_(e,t)}function OI(){return null}var aC=typeof reportError=="function"?reportError:function(e){console.error(e)};function i0(e){this._internalRoot=e}Of.prototype.render=i0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ae(409));Mf(e,t,null,null)};Of.prototype.unmount=i0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qo(function(){Mf(null,e,null,null)}),t[Xs]=null}};function Of(e){this._internalRoot=e}Of.prototype.unstable_scheduleHydration=function(e){if(e){var t=FS();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xi.length&&t!==0&&t<xi[n].priority;n++);xi.splice(n,0,e),n===0&&US(e)}};function o0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function If(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function P_(){}function II(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Lh(a);i.call(h)}}var a=oC(t,r,e,0,null,!1,!1,"",P_);return e._reactRootContainer=a,e[Xs]=a.current,Zc(e.nodeType===8?e.parentNode:e),qo(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Lh(c);l.call(h)}}var c=r0(e,0,!1,null,null,!1,!1,"",P_);return e._reactRootContainer=c,e[Xs]=c.current,Zc(e.nodeType===8?e.parentNode:e),qo(function(){Mf(t,c,n,r)}),c}function Af(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Lh(a);l.call(c)}}Mf(t,a,e,s)}else a=II(n,t,e,s,r);return Lh(a)}LS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=vc(t.pendingLanes);n!==0&&(Cy(t,n|1),Vn(t,It()),!(st&6)&&(pl=It()+500,to()))}break;case 13:qo(function(){var r=Js(e,1);if(r!==null){var s=kn();Zr(r,e,1,s)}}),s0(e,1)}};ky=function(e){if(e.tag===13){var t=Js(e,134217728);if(t!==null){var n=kn();Zr(t,e,134217728,n)}s0(e,134217728)}};DS=function(e){if(e.tag===13){var t=Wi(e),n=Js(e,t);if(n!==null){var r=kn();Zr(n,e,t,r)}s0(e,t)}};FS=function(){return ut};$S=function(e,t){var n=ut;try{return ut=e,t()}finally{ut=n}};Ng=function(e,t,n){switch(t){case"input":if(_g(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Cf(r);if(!s)throw Error(ae(90));gS(r),_g(r,s)}}}break;case"textarea":yS(e,n);break;case"select":t=n.value,t!=null&&Ua(e,!!n.multiple,t,!1)}};CS=Jy;kS=qo;var AI={usingClientEntryPoint:!1,Events:[Eu,Oa,Cf,SS,ES,Jy]},ic={findFiberByHostInstance:ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LI={bundleType:ic.bundleType,version:ic.version,rendererPackageName:ic.rendererPackageName,rendererConfig:ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:si.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=TS(e),e===null?null:e.stateNode},findFiberByHostInstance:ic.findFiberByHostInstance||OI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pd.isDisabled&&Pd.supportsFiber)try{_f=Pd.inject(LI),ws=Pd}catch{}}lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AI;lr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!o0(t))throw Error(ae(200));return MI(e,t,null,n)};lr.createRoot=function(e,t){if(!o0(e))throw Error(ae(299));var n=!1,r="",s=aC;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=r0(e,1,!1,null,null,n,!1,r,s),e[Xs]=t.current,Zc(e.nodeType===8?e.parentNode:e),new i0(t)};lr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ae(188)):(e=Object.keys(e).join(","),Error(ae(268,e)));return e=TS(t),e=e===null?null:e.stateNode,e};lr.flushSync=function(e){return qo(e)};lr.hydrate=function(e,t,n){if(!If(t))throw Error(ae(200));return Af(null,e,t,!0,n)};lr.hydrateRoot=function(e,t,n){if(!o0(e))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=aC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=oC(t,null,e,1,n??null,s,!1,i,a),e[Xs]=t.current,Zc(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Of(t)};lr.render=function(e,t,n){if(!If(t))throw Error(ae(200));return Af(null,e,t,!1,n)};lr.unmountComponentAtNode=function(e){if(!If(e))throw Error(ae(40));return e._reactRootContainer?(qo(function(){Af(null,null,e,!1,function(){e._reactRootContainer=null,e[Xs]=null})}),!0):!1};lr.unstable_batchedUpdates=Jy;lr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!If(n))throw Error(ae(200));if(e==null||e._reactInternals===void 0)throw Error(ae(38));return Af(e,t,n,!1,r)};lr.version="18.3.1-next-f1338f8080-20240426";function lC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lC)}catch(e){console.error(e)}}lC(),lS.exports=lr;var no=lS.exports;const cC=xf(no);var uC,N_=no;uC=N_.createRoot,N_.hydrateRoot;const DI=1,FI=1e6;let _m=0;function $I(){return _m=(_m+1)%Number.MAX_SAFE_INTEGER,_m.toString()}const bm=new Map,T_=e=>{if(bm.has(e))return;const t=setTimeout(()=>{bm.delete(e),Mc({type:"REMOVE_TOAST",toastId:e})},FI);bm.set(e,t)},UI=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,DI)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?T_(n):e.toasts.forEach(r=>{T_(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},nh=[];let rh={toasts:[]};function Mc(e){rh=UI(rh,e),nh.forEach(t=>{t(rh)})}function zI({...e}){const t=$I(),n=s=>Mc({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>Mc({type:"DISMISS_TOAST",toastId:t});return Mc({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function ks(){const[e,t]=g.useState(rh);return g.useEffect(()=>(nh.push(t),()=>{const n=nh.indexOf(t);n>-1&&nh.splice(n,1)}),[e]),{...e,toast:zI,dismiss:n=>Mc({type:"DISMISS_TOAST",toastId:n})}}function le(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function j_(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Lf(...e){return t=>{let n=!1;const r=e.map(s=>{const i=j_(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():j_(e[s],null)}}}}function ze(...e){return g.useCallback(Lf(...e),e)}function BI(e,t){const n=g.createContext(t),r=i=>{const{children:a,...l}=i,c=g.useMemo(()=>l,Object.values(l));return d.jsx(n.Provider,{value:c,children:a})};r.displayName=e+"Provider";function s(i){const a=g.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,s]}function Tn(e,t=[]){let n=[];function r(i,a){const l=g.createContext(a),c=n.length;n=[...n,a];const h=m=>{var E;const{scope:v,children:y,...S}=m,w=((E=v==null?void 0:v[e])==null?void 0:E[c])||l,b=g.useMemo(()=>S,Object.values(S));return d.jsx(w.Provider,{value:b,children:y})};h.displayName=i+"Provider";function f(m,v){var w;const y=((w=v==null?void 0:v[e])==null?void 0:w[c])||l,S=g.useContext(y);if(S)return S;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[h,f]}const s=()=>{const i=n.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[e])||i;return g.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,WI(s,...t)]}function WI(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:h})=>{const m=c(i)[`__scope${h}`];return{...l,...m}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function Zi(e){const t=VI(e),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(GI);if(c){const h=c.props.children,f=l.map(m=>m===c?g.Children.count(h)>1?g.Children.only(null):g.isValidElement(h)?h.props.children:null:m);return d.jsx(t,{...a,ref:s,children:g.isValidElement(h)?g.cloneElement(h,void 0,f):null})}return d.jsx(t,{...a,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}var HI=Zi("Slot");function VI(e){const t=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=ZI(s),l=YI(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Lf(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var dC=Symbol("radix.slottable");function qI(e){const t=({children:n})=>d.jsx(d.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=dC,t}function GI(e){return g.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===dC}function YI(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function ZI(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Df(e){const t=e+"CollectionProvider",[n,r]=Tn(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=w=>{const{scope:b,children:E}=w,_=re.useRef(null),C=re.useRef(new Map).current;return d.jsx(s,{scope:b,itemMap:C,collectionRef:_,children:E})};a.displayName=t;const l=e+"CollectionSlot",c=Zi(l),h=re.forwardRef((w,b)=>{const{scope:E,children:_}=w,C=i(l,E),P=ze(b,C.collectionRef);return d.jsx(c,{ref:P,children:_})});h.displayName=l;const f=e+"CollectionItemSlot",m="data-radix-collection-item",v=Zi(f),y=re.forwardRef((w,b)=>{const{scope:E,children:_,...C}=w,P=re.useRef(null),T=ze(b,P),R=i(f,E);return re.useEffect(()=>(R.itemMap.set(P,{ref:P,...C}),()=>void R.itemMap.delete(P))),d.jsx(v,{[m]:"",ref:T,children:_})});y.displayName=f;function S(w){const b=i(e+"CollectionConsumer",w);return re.useCallback(()=>{const _=b.collectionRef.current;if(!_)return[];const C=Array.from(_.querySelectorAll(`[${m}]`));return Array.from(b.itemMap.values()).sort((R,O)=>C.indexOf(R.ref.current)-C.indexOf(O.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:h,ItemSlot:y},S,r]}var KI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ke=KI.reduce((e,t)=>{const n=Zi(`Primitive.${t}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function a0(e,t){e&&no.flushSync(()=>e.dispatchEvent(t))}function Mt(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function QI(e,t=globalThis==null?void 0:globalThis.document){const n=Mt(e);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var XI="DismissableLayer",av="dismissableLayer.update",JI="dismissableLayer.pointerDownOutside",eA="dismissableLayer.focusOutside",R_,hC=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ra=g.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=e,h=g.useContext(hC),[f,m]=g.useState(null),v=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=g.useState({}),S=ze(t,O=>m(O)),w=Array.from(h.layers),[b]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),E=w.indexOf(b),_=f?w.indexOf(f):-1,C=h.layersWithOutsidePointerEventsDisabled.size>0,P=_>=E,T=nA(O=>{const A=O.target,B=[...h.branches].some(q=>q.contains(A));!P||B||(s==null||s(O),a==null||a(O),O.defaultPrevented||l==null||l())},v),R=rA(O=>{const A=O.target;[...h.branches].some(q=>q.contains(A))||(i==null||i(O),a==null||a(O),O.defaultPrevented||l==null||l())},v);return QI(O=>{_===h.layers.size-1&&(r==null||r(O),!O.defaultPrevented&&l&&(O.preventDefault(),l()))},v),g.useEffect(()=>{if(f)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(R_=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),M_(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=R_)}},[f,v,n,h]),g.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),M_())},[f,h]),g.useEffect(()=>{const O=()=>y({});return document.addEventListener(av,O),()=>document.removeEventListener(av,O)},[]),d.jsx(ke.div,{...c,ref:S,style:{pointerEvents:C?P?"auto":"none":void 0,...e.style},onFocusCapture:le(e.onFocusCapture,R.onFocusCapture),onBlurCapture:le(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:le(e.onPointerDownCapture,T.onPointerDownCapture)})});ra.displayName=XI;var tA="DismissableLayerBranch",fC=g.forwardRef((e,t)=>{const n=g.useContext(hC),r=g.useRef(null),s=ze(t,r);return g.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),d.jsx(ke.div,{...e,ref:s})});fC.displayName=tA;function nA(e,t=globalThis==null?void 0:globalThis.document){const n=Mt(e),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){pC(JI,n,h,{discrete:!0})};const h={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function rA(e,t=globalThis==null?void 0:globalThis.document){const n=Mt(e),r=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!r.current&&pC(eA,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function M_(){const e=new CustomEvent(av);document.dispatchEvent(e)}function pC(e,t,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?a0(s,i):s.dispatchEvent(i)}var sA=ra,iA=fC,At=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},oA="Portal",Cl=g.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,i]=g.useState(!1);At(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?cC.createPortal(d.jsx(ke.div,{...r,ref:t}),a):null});Cl.displayName=oA;function aA(e,t){return g.useReducer((n,r)=>t[n][r]??n,e)}var Jt=e=>{const{present:t,children:n}=e,r=lA(t),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),i=ze(r.ref,cA(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:i}):null};Jt.displayName="Presence";function lA(e){const[t,n]=g.useState(),r=g.useRef(null),s=g.useRef(e),i=g.useRef("none"),a=e?"mounted":"unmounted",[l,c]=aA(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const h=Nd(r.current);i.current=l==="mounted"?h:"none"},[l]),At(()=>{const h=r.current,f=s.current;if(f!==e){const v=i.current,y=Nd(h);e?c("MOUNT"):y==="none"||(h==null?void 0:h.display)==="none"?c("UNMOUNT"):c(f&&v!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),At(()=>{if(t){let h;const f=t.ownerDocument.defaultView??window,m=y=>{const w=Nd(r.current).includes(y.animationName);if(y.target===t&&w&&(c("ANIMATION_END"),!s.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",h=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},v=y=>{y.target===t&&(i.current=Nd(r.current))};return t.addEventListener("animationstart",v),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{f.clearTimeout(h),t.removeEventListener("animationstart",v),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function Nd(e){return(e==null?void 0:e.animationName)||"none"}function cA(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var uA=gy[" useInsertionEffect ".trim().toString()]||At;function ti({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,i,a]=dA({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const f=g.useRef(e!==void 0);g.useEffect(()=>{const m=f.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const h=g.useCallback(f=>{var m;if(l){const v=hA(f)?f(e):f;v!==e&&((m=a.current)==null||m.call(a,v))}else i(f)},[l,e,i,a]);return[c,h]}function dA({defaultProp:e,onChange:t}){const[n,r]=g.useState(e),s=g.useRef(n),i=g.useRef(t);return uA(()=>{i.current=t},[t]),g.useEffect(()=>{var a;s.current!==n&&((a=i.current)==null||a.call(i,n),s.current=n)},[n,s]),[n,r,i]}function hA(e){return typeof e=="function"}var mC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),fA="VisuallyHidden",Ff=g.forwardRef((e,t)=>d.jsx(ke.span,{...e,ref:t,style:{...mC,...e.style}}));Ff.displayName=fA;var pA=Ff,l0="ToastProvider",[c0,mA,gA]=Df("Toast"),[gC,SG]=Tn("Toast",[gA]),[vA,$f]=gC(l0),vC=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=e,[l,c]=g.useState(null),[h,f]=g.useState(0),m=g.useRef(!1),v=g.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${l0}\`. Expected non-empty \`string\`.`),d.jsx(c0.Provider,{scope:t,children:d.jsx(vA,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:h,viewport:l,onViewportChange:c,onToastAdd:g.useCallback(()=>f(y=>y+1),[]),onToastRemove:g.useCallback(()=>f(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:v,children:a})})};vC.displayName=l0;var yC="ToastViewport",yA=["F8"],lv="toast.viewportPause",cv="toast.viewportResume",xC=g.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=yA,label:s="Notifications ({hotkey})",...i}=e,a=$f(yC,n),l=mA(n),c=g.useRef(null),h=g.useRef(null),f=g.useRef(null),m=g.useRef(null),v=ze(t,m,a.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=a.toastCount>0;g.useEffect(()=>{const b=E=>{var C;r.length!==0&&r.every(P=>E[P]||E.code===P)&&((C=m.current)==null||C.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),g.useEffect(()=>{const b=c.current,E=m.current;if(S&&b&&E){const _=()=>{if(!a.isClosePausedRef.current){const R=new CustomEvent(lv);E.dispatchEvent(R),a.isClosePausedRef.current=!0}},C=()=>{if(a.isClosePausedRef.current){const R=new CustomEvent(cv);E.dispatchEvent(R),a.isClosePausedRef.current=!1}},P=R=>{!b.contains(R.relatedTarget)&&C()},T=()=>{b.contains(document.activeElement)||C()};return b.addEventListener("focusin",_),b.addEventListener("focusout",P),b.addEventListener("pointermove",_),b.addEventListener("pointerleave",T),window.addEventListener("blur",_),window.addEventListener("focus",C),()=>{b.removeEventListener("focusin",_),b.removeEventListener("focusout",P),b.removeEventListener("pointermove",_),b.removeEventListener("pointerleave",T),window.removeEventListener("blur",_),window.removeEventListener("focus",C)}}},[S,a.isClosePausedRef]);const w=g.useCallback(({tabbingDirection:b})=>{const _=l().map(C=>{const P=C.ref.current,T=[P,...RA(P)];return b==="forwards"?T:T.reverse()});return(b==="forwards"?_.reverse():_).flat()},[l]);return g.useEffect(()=>{const b=m.current;if(b){const E=_=>{var T,R,O;const C=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!C){const A=document.activeElement,B=_.shiftKey;if(_.target===b&&B){(T=h.current)==null||T.focus();return}const W=w({tabbingDirection:B?"backwards":"forwards"}),z=W.findIndex(M=>M===A);Sm(W.slice(z+1))?_.preventDefault():B?(R=h.current)==null||R.focus():(O=f.current)==null||O.focus()}};return b.addEventListener("keydown",E),()=>b.removeEventListener("keydown",E)}},[l,w]),d.jsxs(iA,{ref:c,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&d.jsx(uv,{ref:h,onFocusFromOutsideViewport:()=>{const b=w({tabbingDirection:"forwards"});Sm(b)}}),d.jsx(c0.Slot,{scope:n,children:d.jsx(ke.ol,{tabIndex:-1,...i,ref:v})}),S&&d.jsx(uv,{ref:f,onFocusFromOutsideViewport:()=>{const b=w({tabbingDirection:"backwards"});Sm(b)}})]})});xC.displayName=yC;var wC="ToastFocusProxy",uv=g.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,i=$f(wC,n);return d.jsx(Ff,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var h;const l=a.relatedTarget;!((h=i.viewport)!=null&&h.contains(l))&&r()}})});uv.displayName=wC;var ku="Toast",xA="toast.swipeStart",wA="toast.swipeMove",_A="toast.swipeCancel",bA="toast.swipeEnd",_C=g.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...a}=e,[l,c]=ti({prop:r,defaultProp:s??!0,onChange:i,caller:ku});return d.jsx(Jt,{present:n||l,children:d.jsx(CA,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:Mt(e.onPause),onResume:Mt(e.onResume),onSwipeStart:le(e.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:le(e.onSwipeMove,h=>{const{x:f,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:le(e.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:le(e.onSwipeEnd,h=>{const{x:f,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});_C.displayName=ku;var[SA,EA]=gC(ku,{onClose(){}}),CA=g.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:h,onSwipeStart:f,onSwipeMove:m,onSwipeCancel:v,onSwipeEnd:y,...S}=e,w=$f(ku,n),[b,E]=g.useState(null),_=ze(t,M=>E(M)),C=g.useRef(null),P=g.useRef(null),T=s||w.duration,R=g.useRef(0),O=g.useRef(T),A=g.useRef(0),{onToastAdd:B,onToastRemove:q}=w,Q=Mt(()=>{var ee;(b==null?void 0:b.contains(document.activeElement))&&((ee=w.viewport)==null||ee.focus()),a()}),W=g.useCallback(M=>{!M||M===1/0||(window.clearTimeout(A.current),R.current=new Date().getTime(),A.current=window.setTimeout(Q,M))},[Q]);g.useEffect(()=>{const M=w.viewport;if(M){const ee=()=>{W(O.current),h==null||h()},H=()=>{const Z=new Date().getTime()-R.current;O.current=O.current-Z,window.clearTimeout(A.current),c==null||c()};return M.addEventListener(lv,H),M.addEventListener(cv,ee),()=>{M.removeEventListener(lv,H),M.removeEventListener(cv,ee)}}},[w.viewport,T,c,h,W]),g.useEffect(()=>{i&&!w.isClosePausedRef.current&&W(T)},[i,T,w.isClosePausedRef,W]),g.useEffect(()=>(B(),()=>q()),[B,q]);const z=g.useMemo(()=>b?NC(b):null,[b]);return w.viewport?d.jsxs(d.Fragment,{children:[z&&d.jsx(kA,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),d.jsx(SA,{scope:n,onClose:Q,children:no.createPortal(d.jsx(c0.ItemSlot,{scope:n,children:d.jsx(sA,{asChild:!0,onEscapeKeyDown:le(l,()=>{w.isFocusedToastEscapeKeyDownRef.current||Q(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:d.jsx(ke.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":w.swipeDirection,...S,ref:_,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:le(e.onKeyDown,M=>{M.key==="Escape"&&(l==null||l(M.nativeEvent),M.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,Q()))}),onPointerDown:le(e.onPointerDown,M=>{M.button===0&&(C.current={x:M.clientX,y:M.clientY})}),onPointerMove:le(e.onPointerMove,M=>{if(!C.current)return;const ee=M.clientX-C.current.x,H=M.clientY-C.current.y,Z=!!P.current,j=["left","right"].includes(w.swipeDirection),U=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,Y=j?U(0,ee):0,se=j?0:U(0,H),te=M.pointerType==="touch"?10:2,ue={x:Y,y:se},F={originalEvent:M,delta:ue};Z?(P.current=ue,Td(wA,m,F,{discrete:!1})):O_(ue,w.swipeDirection,te)?(P.current=ue,Td(xA,f,F,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(ee)>te||Math.abs(H)>te)&&(C.current=null)}),onPointerUp:le(e.onPointerUp,M=>{const ee=P.current,H=M.target;if(H.hasPointerCapture(M.pointerId)&&H.releasePointerCapture(M.pointerId),P.current=null,C.current=null,ee){const Z=M.currentTarget,j={originalEvent:M,delta:ee};O_(ee,w.swipeDirection,w.swipeThreshold)?Td(bA,y,j,{discrete:!0}):Td(_A,v,j,{discrete:!0}),Z.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),kA=e=>{const{__scopeToast:t,children:n,...r}=e,s=$f(ku,t),[i,a]=g.useState(!1),[l,c]=g.useState(!1);return TA(()=>a(!0)),g.useEffect(()=>{const h=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(h)},[]),l?null:d.jsx(Cl,{asChild:!0,children:d.jsx(Ff,{...r,children:i&&d.jsxs(d.Fragment,{children:[s.label," ",n]})})})},PA="ToastTitle",bC=g.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return d.jsx(ke.div,{...r,ref:t})});bC.displayName=PA;var NA="ToastDescription",SC=g.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return d.jsx(ke.div,{...r,ref:t})});SC.displayName=NA;var EC="ToastAction",CC=g.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?d.jsx(PC,{altText:n,asChild:!0,children:d.jsx(u0,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${EC}\`. Expected non-empty \`string\`.`),null)});CC.displayName=EC;var kC="ToastClose",u0=g.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=EA(kC,n);return d.jsx(PC,{asChild:!0,children:d.jsx(ke.button,{type:"button",...r,ref:t,onClick:le(e.onClick,s.onClose)})})});u0.displayName=kC;var PC=g.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return d.jsx(ke.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function NC(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),jA(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...NC(r))}}),t}function Td(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?a0(s,i):s.dispatchEvent(i)}var O_=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),i=r>s;return t==="left"||t==="right"?i&&r>n:!i&&s>n};function TA(e=()=>{}){const t=Mt(e);At(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function jA(e){return e.nodeType===e.ELEMENT_NODE}function RA(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Sm(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var MA=vC,TC=xC,jC=_C,RC=bC,MC=SC,OC=CC,IC=u0;function AC(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=AC(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function LC(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=AC(e))&&(r&&(r+=" "),r+=t);return r}const I_=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,A_=LC,Uf=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return A_(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=t,a=Object.keys(s).map(h=>{const f=n==null?void 0:n[h],m=i==null?void 0:i[h];if(f===null)return null;const v=I_(f)||I_(m);return s[h][v]}),l=n&&Object.entries(n).reduce((h,f)=>{let[m,v]=f;return v===void 0||(h[m]=v),h},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:m,className:v,...y}=f;return Object.entries(y).every(S=>{let[w,b]=S;return Array.isArray(b)?b.includes({...i,...l}[w]):{...i,...l}[w]===b})?[...h,m,v]:h},[]);return A_(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),DC=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>g.createElement("svg",{ref:c,...IA,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:DC("lucide",s),...l},[...a.map(([h,f])=>g.createElement(h,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=(e,t)=>{const n=g.forwardRef(({className:r,...s},i)=>g.createElement(AA,{ref:i,iconNode:t,className:DC(`lucide-${OA(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=vn("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=vn("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=vn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=vn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=vn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=vn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=vn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=vn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=vn("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=vn("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=vn("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=vn("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=vn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=vn("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=vn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=vn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),m0="-",WA=e=>{const t=VA(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const l=a.split(m0);return l[0]===""&&l.length!==1&&l.shift(),zC(l,t)||HA(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},zC=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?zC(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(m0);return(a=t.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},L_=/^\[(.+)\]$/,HA=e=>{if(L_.test(e)){const t=L_.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},VA=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return GA(Object.entries(e.classGroups),n).forEach(([i,a])=>{dv(a,r,i,t)}),r},dv=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:D_(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(qA(s)){dv(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{dv(a,D_(t,i),n,r)})})},D_=(e,t)=>{let n=e;return t.split(m0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},qA=e=>e.isThemeGetter,GA=(e,t)=>t?e.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[t+a,l])):i);return[n,s]}):e,YA=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},BC="!",ZA=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],i=t.length,a=l=>{const c=[];let h=0,f=0,m;for(let b=0;b<l.length;b++){let E=l[b];if(h===0){if(E===s&&(r||l.slice(b,b+i)===t)){c.push(l.slice(f,b)),f=b+i;continue}if(E==="/"){m=b;continue}}E==="["?h++:E==="]"&&h--}const v=c.length===0?l:l.substring(f),y=v.startsWith(BC),S=y?v.substring(1):v,w=m&&m>f?m-f:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:S,maybePostfixModifierPosition:w}};return n?l=>n({className:l,parseClassName:a}):a},KA=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},QA=e=>({cache:YA(e.cacheSize),parseClassName:ZA(e),...WA(e)}),XA=/\s+/,JA=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,i=[],a=e.trim().split(XA);let l="";for(let c=a.length-1;c>=0;c-=1){const h=a[c],{modifiers:f,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:y}=n(h);let S=!!y,w=r(S?v.substring(0,y):v);if(!w){if(!S){l=h+(l.length>0?" "+l:l);continue}if(w=r(v),!w){l=h+(l.length>0?" "+l:l);continue}S=!1}const b=KA(f).join(":"),E=m?b+BC:b,_=E+w;if(i.includes(_))continue;i.push(_);const C=s(w,S);for(let P=0;P<C.length;++P){const T=C[P];i.push(E+T)}l=h+(l.length>0?" "+l:l)}return l};function eL(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=WC(t))&&(r&&(r+=" "),r+=n);return r}const WC=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=WC(e[r]))&&(n&&(n+=" "),n+=t);return n};function tL(e,...t){let n,r,s,i=a;function a(c){const h=t.reduce((f,m)=>m(f),e());return n=QA(h),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const h=r(c);if(h)return h;const f=JA(c,n);return s(c,f),f}return function(){return i(eL.apply(null,arguments))}}const wt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},HC=/^\[(?:([a-z-]+):)?(.+)\]$/i,nL=/^\d+\/\d+$/,rL=new Set(["px","full","screen"]),sL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,iL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,oL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,aL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,lL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ls=e=>qa(e)||rL.has(e)||nL.test(e),ui=e=>kl(e,"length",gL),qa=e=>!!e&&!Number.isNaN(Number(e)),Em=e=>kl(e,"number",qa),oc=e=>!!e&&Number.isInteger(Number(e)),cL=e=>e.endsWith("%")&&qa(e.slice(0,-1)),He=e=>HC.test(e),di=e=>sL.test(e),uL=new Set(["length","size","percentage"]),dL=e=>kl(e,uL,VC),hL=e=>kl(e,"position",VC),fL=new Set(["image","url"]),pL=e=>kl(e,fL,yL),mL=e=>kl(e,"",vL),ac=()=>!0,kl=(e,t,n)=>{const r=HC.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},gL=e=>iL.test(e)&&!oL.test(e),VC=()=>!1,vL=e=>aL.test(e),yL=e=>lL.test(e),xL=()=>{const e=wt("colors"),t=wt("spacing"),n=wt("blur"),r=wt("brightness"),s=wt("borderColor"),i=wt("borderRadius"),a=wt("borderSpacing"),l=wt("borderWidth"),c=wt("contrast"),h=wt("grayscale"),f=wt("hueRotate"),m=wt("invert"),v=wt("gap"),y=wt("gradientColorStops"),S=wt("gradientColorStopPositions"),w=wt("inset"),b=wt("margin"),E=wt("opacity"),_=wt("padding"),C=wt("saturate"),P=wt("scale"),T=wt("sepia"),R=wt("skew"),O=wt("space"),A=wt("translate"),B=()=>["auto","contain","none"],q=()=>["auto","hidden","clip","visible","scroll"],Q=()=>["auto",He,t],W=()=>[He,t],z=()=>["",Ls,ui],M=()=>["auto",qa,He],ee=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],j=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",He],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],se=()=>[qa,He];return{cacheSize:500,separator:":",theme:{colors:[ac],spacing:[Ls,ui],blur:["none","",di,He],brightness:se(),borderColor:[e],borderRadius:["none","","full",di,He],borderSpacing:W(),borderWidth:z(),contrast:se(),grayscale:U(),hueRotate:se(),invert:U(),gap:W(),gradientColorStops:[e],gradientColorStopPositions:[cL,ui],inset:Q(),margin:Q(),opacity:se(),padding:W(),saturate:se(),scale:se(),sepia:U(),skew:se(),space:W(),translate:W()},classGroups:{aspect:[{aspect:["auto","square","video",He]}],container:["container"],columns:[{columns:[di]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ee(),He]}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",oc,He]}],basis:[{basis:Q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",He]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",oc,He]}],"grid-cols":[{"grid-cols":[ac]}],"col-start-end":[{col:["auto",{span:["full",oc,He]},He]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[ac]}],"row-start-end":[{row:["auto",{span:[oc,He]},He]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",He]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",He]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...j()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...j(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...j(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",He,t]}],"min-w":[{"min-w":[He,t,"min","max","fit"]}],"max-w":[{"max-w":[He,t,"none","full","min","max","fit","prose",{screen:[di]},di]}],h:[{h:[He,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[He,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[He,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[He,t,"auto","min","max","fit"]}],"font-size":[{text:["base",di,ui]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Em]}],"font-family":[{font:[ac]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",He]}],"line-clamp":[{"line-clamp":["none",qa,Em]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ls,He]}],"list-image":[{"list-image":["none",He]}],"list-style-type":[{list:["none","disc","decimal",He]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ls,ui]}],"underline-offset":[{"underline-offset":["auto",Ls,He]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:W()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",He]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",He]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ee(),hL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",dL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},pL]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:H()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[Ls,He]}],"outline-w":[{outline:[Ls,ui]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Ls,ui]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",di,mL]}],"shadow-color":[{shadow:[ac]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...Z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",di,He]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[m]}],saturate:[{saturate:[C]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",He]}],duration:[{duration:se()}],ease:[{ease:["linear","in","out","in-out",He]}],delay:[{delay:se()}],animate:[{animate:["none","spin","ping","pulse","bounce",He]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[oc,He]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",He]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",He]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":W()}],"scroll-mx":[{"scroll-mx":W()}],"scroll-my":[{"scroll-my":W()}],"scroll-ms":[{"scroll-ms":W()}],"scroll-me":[{"scroll-me":W()}],"scroll-mt":[{"scroll-mt":W()}],"scroll-mr":[{"scroll-mr":W()}],"scroll-mb":[{"scroll-mb":W()}],"scroll-ml":[{"scroll-ml":W()}],"scroll-p":[{"scroll-p":W()}],"scroll-px":[{"scroll-px":W()}],"scroll-py":[{"scroll-py":W()}],"scroll-ps":[{"scroll-ps":W()}],"scroll-pe":[{"scroll-pe":W()}],"scroll-pt":[{"scroll-pt":W()}],"scroll-pr":[{"scroll-pr":W()}],"scroll-pb":[{"scroll-pb":W()}],"scroll-pl":[{"scroll-pl":W()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",He]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ls,ui,Em]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},wL=tL(xL);function Te(...e){return wL(LC(e))}const _L=MA,qC=g.forwardRef(({className:e,...t},n)=>d.jsx(TC,{ref:n,className:Te("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));qC.displayName=TC.displayName;const bL=Uf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),GC=g.forwardRef(({className:e,variant:t,...n},r)=>d.jsx(jC,{ref:r,className:Te(bL({variant:t}),e),...n}));GC.displayName=jC.displayName;const SL=g.forwardRef(({className:e,...t},n)=>d.jsx(OC,{ref:n,className:Te("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));SL.displayName=OC.displayName;const YC=g.forwardRef(({className:e,...t},n)=>d.jsx(IC,{ref:n,className:Te("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:d.jsx(UC,{className:"h-4 w-4"})}));YC.displayName=IC.displayName;const ZC=g.forwardRef(({className:e,...t},n)=>d.jsx(RC,{ref:n,className:Te("text-sm font-semibold",e),...t}));ZC.displayName=RC.displayName;const KC=g.forwardRef(({className:e,...t},n)=>d.jsx(MC,{ref:n,className:Te("text-sm opacity-90",e),...t}));KC.displayName=MC.displayName;function EL(){const{toasts:e}=ks();return d.jsxs(_L,{children:[e.map(function({id:t,title:n,description:r,action:s,...i}){return d.jsxs(GC,{...i,children:[d.jsxs("div",{className:"grid gap-1",children:[n&&d.jsx(ZC,{children:n}),r&&d.jsx(KC,{children:r})]}),s,d.jsx(YC,{})]},t)}),d.jsx(qC,{})]})}var F_=["light","dark"],CL="(prefers-color-scheme: dark)",kL=g.createContext(void 0),PL={setTheme:e=>{},themes:[]},NL=()=>{var e;return(e=g.useContext(kL))!=null?e:PL};g.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:a,attrs:l,nonce:c})=>{let h=i==="system",f=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(S=>`'${S}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,m=s?F_.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(S,w=!1,b=!0)=>{let E=a?a[S]:S,_=w?S+"|| ''":`'${E}'`,C="";return s&&b&&!w&&F_.includes(S)&&(C+=`d.style.colorScheme = '${S}';`),n==="class"?w||E?C+=`c.add(${_})`:C+="null":E&&(C+=`d[s](n,${_})`),C},y=e?`!function(){${f}${v(e)}}()`:r?`!function(){try{${f}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${h})){var t='${CL}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${v(a?"x[e]":"e",!0)}}${h?"":"else{"+v(i,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${t}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${v(a?"x[e]":"e",!0)}}else{${v(i,!1,!1)};}${m}}catch(t){}}();`;return g.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:y}})});var TL=e=>{switch(e){case"success":return ML;case"info":return IL;case"warning":return OL;case"error":return AL;default:return null}},jL=Array(12).fill(0),RL=({visible:e,className:t})=>re.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},re.createElement("div",{className:"sonner-spinner"},jL.map((n,r)=>re.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),ML=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),OL=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),IL=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),AL=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),LL=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},re.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),re.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),DL=()=>{let[e,t]=re.useState(document.hidden);return re.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},hv=1,FL=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:hv++,i=this.toasts.find(l=>l.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:n}),{...l,...e,id:s,dismissible:a,title:n}):l):this.addToast({title:n,...r,dismissible:a,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),s=n!==void 0,i,a=r.then(async c=>{if(i=["resolve",c],re.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(UL(c)&&!c.ok){s=!1;let h=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,f=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:h,description:f})}else if(t.success!==void 0){s=!1;let h=typeof t.success=="function"?await t.success(c):t.success,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:h,description:f})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){s=!1;let h=typeof t.error=="function"?await t.error(c):t.error,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:h,description:f})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,h)=>a.then(()=>i[0]==="reject"?h(i[1]):c(i[1])).catch(h));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||hv++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Fn=new FL,$L=(e,t)=>{let n=(t==null?void 0:t.id)||hv++;return Fn.addToast({title:e,...t,id:n}),n},UL=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",zL=$L,BL=()=>Fn.toasts,WL=()=>Fn.getActiveToasts();Object.assign(zL,{success:Fn.success,info:Fn.info,warning:Fn.warning,error:Fn.error,custom:Fn.custom,message:Fn.message,promise:Fn.promise,dismiss:Fn.dismiss,loading:Fn.loading},{getHistory:BL,getToasts:WL});function HL(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}HL(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function jd(e){return e.label!==void 0}var VL=3,qL="32px",GL="16px",$_=4e3,YL=356,ZL=14,KL=20,QL=200;function Dr(...e){return e.filter(Boolean).join(" ")}function XL(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var JL=e=>{var t,n,r,s,i,a,l,c,h,f,m;let{invert:v,toast:y,unstyled:S,interacting:w,setHeights:b,visibleToasts:E,heights:_,index:C,toasts:P,expanded:T,removeToast:R,defaultRichColors:O,closeButton:A,style:B,cancelButtonStyle:q,actionButtonStyle:Q,className:W="",descriptionClassName:z="",duration:M,position:ee,gap:H,loadingIcon:Z,expandByDefault:j,classNames:U,icons:Y,closeButtonAriaLabel:se="Close toast",pauseWhenPageIsHidden:te}=e,[ue,F]=re.useState(null),[J,G]=re.useState(null),[ne,he]=re.useState(!1),[Me,Ee]=re.useState(!1),[je,pe]=re.useState(!1),[V,oe]=re.useState(!1),[ye,Oe]=re.useState(!1),[dt,Lt]=re.useState(0),[yn,ur]=re.useState(0),en=re.useRef(y.duration||M||$_),Wt=re.useRef(null),tn=re.useRef(null),rs=C===0,dr=C+1<=E,ot=y.type,nn=y.dismissible!==!1,hr=y.className||"",Or=y.descriptionClassName||"",Ot=re.useMemo(()=>_.findIndex(me=>me.toastId===y.id)||0,[_,y.id]),ii=re.useMemo(()=>{var me;return(me=y.closeButton)!=null?me:A},[y.closeButton,A]),Zn=re.useMemo(()=>y.duration||M||$_,[y.duration,M]),ss=re.useRef(0),Rn=re.useRef(0),Ts=re.useRef(0),ln=re.useRef(null),[Kn,co]=ee.split("-"),js=re.useMemo(()=>_.reduce((me,fe,De)=>De>=Ot?me:me+fe.height,0),[_,Ot]),is=DL(),Pe=y.invert||v,Ye=ot==="loading";Rn.current=re.useMemo(()=>Ot*H+js,[Ot,js]),re.useEffect(()=>{en.current=Zn},[Zn]),re.useEffect(()=>{he(!0)},[]),re.useEffect(()=>{let me=tn.current;if(me){let fe=me.getBoundingClientRect().height;return ur(fe),b(De=>[{toastId:y.id,height:fe,position:y.position},...De]),()=>b(De=>De.filter(ft=>ft.toastId!==y.id))}},[b,y.id]),re.useLayoutEffect(()=>{if(!ne)return;let me=tn.current,fe=me.style.height;me.style.height="auto";let De=me.getBoundingClientRect().height;me.style.height=fe,ur(De),b(ft=>ft.find(Et=>Et.toastId===y.id)?ft.map(Et=>Et.toastId===y.id?{...Et,height:De}:Et):[{toastId:y.id,height:De,position:y.position},...ft])},[ne,y.title,y.description,b,y.id]);let qe=re.useCallback(()=>{Ee(!0),Lt(Rn.current),b(me=>me.filter(fe=>fe.toastId!==y.id)),setTimeout(()=>{R(y)},QL)},[y,R,b,Rn]);re.useEffect(()=>{if(y.promise&&ot==="loading"||y.duration===1/0||y.type==="loading")return;let me;return T||w||te&&is?(()=>{if(Ts.current<ss.current){let fe=new Date().getTime()-ss.current;en.current=en.current-fe}Ts.current=new Date().getTime()})():en.current!==1/0&&(ss.current=new Date().getTime(),me=setTimeout(()=>{var fe;(fe=y.onAutoClose)==null||fe.call(y,y),qe()},en.current)),()=>clearTimeout(me)},[T,w,y,ot,te,is,qe]),re.useEffect(()=>{y.delete&&qe()},[qe,y.delete]);function we(){var me,fe,De;return Y!=null&&Y.loading?re.createElement("div",{className:Dr(U==null?void 0:U.loader,(me=y==null?void 0:y.classNames)==null?void 0:me.loader,"sonner-loader"),"data-visible":ot==="loading"},Y.loading):Z?re.createElement("div",{className:Dr(U==null?void 0:U.loader,(fe=y==null?void 0:y.classNames)==null?void 0:fe.loader,"sonner-loader"),"data-visible":ot==="loading"},Z):re.createElement(RL,{className:Dr(U==null?void 0:U.loader,(De=y==null?void 0:y.classNames)==null?void 0:De.loader),visible:ot==="loading"})}return re.createElement("li",{tabIndex:0,ref:tn,className:Dr(W,hr,U==null?void 0:U.toast,(t=y==null?void 0:y.classNames)==null?void 0:t.toast,U==null?void 0:U.default,U==null?void 0:U[ot],(n=y==null?void 0:y.classNames)==null?void 0:n[ot]),"data-sonner-toast":"","data-rich-colors":(r=y.richColors)!=null?r:O,"data-styled":!(y.jsx||y.unstyled||S),"data-mounted":ne,"data-promise":!!y.promise,"data-swiped":ye,"data-removed":Me,"data-visible":dr,"data-y-position":Kn,"data-x-position":co,"data-index":C,"data-front":rs,"data-swiping":je,"data-dismissible":nn,"data-type":ot,"data-invert":Pe,"data-swipe-out":V,"data-swipe-direction":J,"data-expanded":!!(T||j&&ne),style:{"--index":C,"--toasts-before":C,"--z-index":P.length-C,"--offset":`${Me?dt:Rn.current}px`,"--initial-height":j?"auto":`${yn}px`,...B,...y.style},onDragEnd:()=>{pe(!1),F(null),ln.current=null},onPointerDown:me=>{Ye||!nn||(Wt.current=new Date,Lt(Rn.current),me.target.setPointerCapture(me.pointerId),me.target.tagName!=="BUTTON"&&(pe(!0),ln.current={x:me.clientX,y:me.clientY}))},onPointerUp:()=>{var me,fe,De,ft;if(V||!nn)return;ln.current=null;let Et=Number(((me=tn.current)==null?void 0:me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Yt=Number(((fe=tn.current)==null?void 0:fe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Qn=new Date().getTime()-((De=Wt.current)==null?void 0:De.getTime()),Nt=ue==="x"?Et:Yt,fr=Math.abs(Nt)/Qn;if(Math.abs(Nt)>=KL||fr>.11){Lt(Rn.current),(ft=y.onDismiss)==null||ft.call(y,y),G(ue==="x"?Et>0?"right":"left":Yt>0?"down":"up"),qe(),oe(!0),Oe(!1);return}pe(!1),F(null)},onPointerMove:me=>{var fe,De,ft,Et;if(!ln.current||!nn||((fe=window.getSelection())==null?void 0:fe.toString().length)>0)return;let Yt=me.clientY-ln.current.y,Qn=me.clientX-ln.current.x,Nt=(De=e.swipeDirections)!=null?De:XL(ee);!ue&&(Math.abs(Qn)>1||Math.abs(Yt)>1)&&F(Math.abs(Qn)>Math.abs(Yt)?"x":"y");let fr={x:0,y:0};ue==="y"?(Nt.includes("top")||Nt.includes("bottom"))&&(Nt.includes("top")&&Yt<0||Nt.includes("bottom")&&Yt>0)&&(fr.y=Yt):ue==="x"&&(Nt.includes("left")||Nt.includes("right"))&&(Nt.includes("left")&&Qn<0||Nt.includes("right")&&Qn>0)&&(fr.x=Qn),(Math.abs(fr.x)>0||Math.abs(fr.y)>0)&&Oe(!0),(ft=tn.current)==null||ft.style.setProperty("--swipe-amount-x",`${fr.x}px`),(Et=tn.current)==null||Et.style.setProperty("--swipe-amount-y",`${fr.y}px`)}},ii&&!y.jsx?re.createElement("button",{"aria-label":se,"data-disabled":Ye,"data-close-button":!0,onClick:Ye||!nn?()=>{}:()=>{var me;qe(),(me=y.onDismiss)==null||me.call(y,y)},className:Dr(U==null?void 0:U.closeButton,(s=y==null?void 0:y.classNames)==null?void 0:s.closeButton)},(i=Y==null?void 0:Y.close)!=null?i:LL):null,y.jsx||g.isValidElement(y.title)?y.jsx?y.jsx:typeof y.title=="function"?y.title():y.title:re.createElement(re.Fragment,null,ot||y.icon||y.promise?re.createElement("div",{"data-icon":"",className:Dr(U==null?void 0:U.icon,(a=y==null?void 0:y.classNames)==null?void 0:a.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||we():null,y.type!=="loading"?y.icon||(Y==null?void 0:Y[ot])||TL(ot):null):null,re.createElement("div",{"data-content":"",className:Dr(U==null?void 0:U.content,(l=y==null?void 0:y.classNames)==null?void 0:l.content)},re.createElement("div",{"data-title":"",className:Dr(U==null?void 0:U.title,(c=y==null?void 0:y.classNames)==null?void 0:c.title)},typeof y.title=="function"?y.title():y.title),y.description?re.createElement("div",{"data-description":"",className:Dr(z,Or,U==null?void 0:U.description,(h=y==null?void 0:y.classNames)==null?void 0:h.description)},typeof y.description=="function"?y.description():y.description):null),g.isValidElement(y.cancel)?y.cancel:y.cancel&&jd(y.cancel)?re.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||q,onClick:me=>{var fe,De;jd(y.cancel)&&nn&&((De=(fe=y.cancel).onClick)==null||De.call(fe,me),qe())},className:Dr(U==null?void 0:U.cancelButton,(f=y==null?void 0:y.classNames)==null?void 0:f.cancelButton)},y.cancel.label):null,g.isValidElement(y.action)?y.action:y.action&&jd(y.action)?re.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||Q,onClick:me=>{var fe,De;jd(y.action)&&((De=(fe=y.action).onClick)==null||De.call(fe,me),!me.defaultPrevented&&qe())},className:Dr(U==null?void 0:U.actionButton,(m=y==null?void 0:y.classNames)==null?void 0:m.actionButton)},y.action.label):null))};function U_(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function eD(e,t){let n={};return[e,t].forEach((r,s)=>{let i=s===1,a=i?"--mobile-offset":"--offset",l=i?GL:qL;function c(h){["top","right","bottom","left"].forEach(f=>{n[`${a}-${f}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?n[`${a}-${h}`]=l:n[`${a}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):c(l)}),n}var tD=g.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:a,className:l,offset:c,mobileOffset:h,theme:f="light",richColors:m,duration:v,style:y,visibleToasts:S=VL,toastOptions:w,dir:b=U_(),gap:E=ZL,loadingIcon:_,icons:C,containerAriaLabel:P="Notifications",pauseWhenPageIsHidden:T}=e,[R,O]=re.useState([]),A=re.useMemo(()=>Array.from(new Set([r].concat(R.filter(te=>te.position).map(te=>te.position)))),[R,r]),[B,q]=re.useState([]),[Q,W]=re.useState(!1),[z,M]=re.useState(!1),[ee,H]=re.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Z=re.useRef(null),j=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=re.useRef(null),Y=re.useRef(!1),se=re.useCallback(te=>{O(ue=>{var F;return(F=ue.find(J=>J.id===te.id))!=null&&F.delete||Fn.dismiss(te.id),ue.filter(({id:J})=>J!==te.id)})},[]);return re.useEffect(()=>Fn.subscribe(te=>{if(te.dismiss){O(ue=>ue.map(F=>F.id===te.id?{...F,delete:!0}:F));return}setTimeout(()=>{cC.flushSync(()=>{O(ue=>{let F=ue.findIndex(J=>J.id===te.id);return F!==-1?[...ue.slice(0,F),{...ue[F],...te},...ue.slice(F+1)]:[te,...ue]})})})}),[]),re.useEffect(()=>{if(f!=="system"){H(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window>"u")return;let te=window.matchMedia("(prefers-color-scheme: dark)");try{te.addEventListener("change",({matches:ue})=>{H(ue?"dark":"light")})}catch{te.addListener(({matches:F})=>{try{H(F?"dark":"light")}catch(J){console.error(J)}})}},[f]),re.useEffect(()=>{R.length<=1&&W(!1)},[R]),re.useEffect(()=>{let te=ue=>{var F,J;s.every(G=>ue[G]||ue.code===G)&&(W(!0),(F=Z.current)==null||F.focus()),ue.code==="Escape"&&(document.activeElement===Z.current||(J=Z.current)!=null&&J.contains(document.activeElement))&&W(!1)};return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[s]),re.useEffect(()=>{if(Z.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,Y.current=!1)}},[Z.current]),re.createElement("section",{ref:t,"aria-label":`${P} ${j}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((te,ue)=>{var F;let[J,G]=te.split("-");return R.length?re.createElement("ol",{key:te,dir:b==="auto"?U_():b,tabIndex:-1,ref:Z,className:l,"data-sonner-toaster":!0,"data-theme":ee,"data-y-position":J,"data-lifted":Q&&R.length>1&&!i,"data-x-position":G,style:{"--front-toast-height":`${((F=B[0])==null?void 0:F.height)||0}px`,"--width":`${YL}px`,"--gap":`${E}px`,...y,...eD(c,h)},onBlur:ne=>{Y.current&&!ne.currentTarget.contains(ne.relatedTarget)&&(Y.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||Y.current||(Y.current=!0,U.current=ne.relatedTarget)},onMouseEnter:()=>W(!0),onMouseMove:()=>W(!0),onMouseLeave:()=>{z||W(!1)},onDragEnd:()=>W(!1),onPointerDown:ne=>{ne.target instanceof HTMLElement&&ne.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},R.filter(ne=>!ne.position&&ue===0||ne.position===te).map((ne,he)=>{var Me,Ee;return re.createElement(JL,{key:ne.id,icons:C,index:he,toast:ne,defaultRichColors:m,duration:(Me=w==null?void 0:w.duration)!=null?Me:v,className:w==null?void 0:w.className,descriptionClassName:w==null?void 0:w.descriptionClassName,invert:n,visibleToasts:S,closeButton:(Ee=w==null?void 0:w.closeButton)!=null?Ee:a,interacting:z,position:te,style:w==null?void 0:w.style,unstyled:w==null?void 0:w.unstyled,classNames:w==null?void 0:w.classNames,cancelButtonStyle:w==null?void 0:w.cancelButtonStyle,actionButtonStyle:w==null?void 0:w.actionButtonStyle,removeToast:se,toasts:R.filter(je=>je.position==ne.position),heights:B.filter(je=>je.position==ne.position),setHeights:q,expandByDefault:i,gap:E,loadingIcon:_,expanded:Q,pauseWhenPageIsHidden:T,swipeDirections:e.swipeDirections})})):null}))});const nD=({...e})=>{const{theme:t="system"}=NL();return d.jsx(tD,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var rD=gy[" useId ".trim().toString()]||(()=>{}),sD=0;function bs(e){const[t,n]=g.useState(rD());return At(()=>{n(r=>r??String(sD++))},[e]),t?`radix-${t}`:""}const iD=["top","right","bottom","left"],Ki=Math.min,tr=Math.max,Fh=Math.round,Rd=Math.floor,Ss=e=>({x:e,y:e}),oD={left:"right",right:"left",bottom:"top",top:"bottom"},aD={start:"end",end:"start"};function fv(e,t,n){return tr(e,Ki(t,n))}function ni(e,t){return typeof e=="function"?e(t):e}function ri(e){return e.split("-")[0]}function Pl(e){return e.split("-")[1]}function g0(e){return e==="x"?"y":"x"}function v0(e){return e==="y"?"height":"width"}const lD=new Set(["top","bottom"]);function xs(e){return lD.has(ri(e))?"y":"x"}function y0(e){return g0(xs(e))}function cD(e,t,n){n===void 0&&(n=!1);const r=Pl(e),s=y0(e),i=v0(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=$h(a)),[a,$h(a)]}function uD(e){const t=$h(e);return[pv(e),t,pv(t)]}function pv(e){return e.replace(/start|end/g,t=>aD[t])}const z_=["left","right"],B_=["right","left"],dD=["top","bottom"],hD=["bottom","top"];function fD(e,t,n){switch(e){case"top":case"bottom":return n?t?B_:z_:t?z_:B_;case"left":case"right":return t?dD:hD;default:return[]}}function pD(e,t,n,r){const s=Pl(e);let i=fD(ri(e),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),t&&(i=i.concat(i.map(pv)))),i}function $h(e){return e.replace(/left|right|bottom|top/g,t=>oD[t])}function mD(e){return{top:0,right:0,bottom:0,left:0,...e}}function QC(e){return typeof e!="number"?mD(e):{top:e,right:e,bottom:e,left:e}}function Uh(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function W_(e,t,n){let{reference:r,floating:s}=e;const i=xs(t),a=y0(t),l=v0(a),c=ri(t),h=i==="y",f=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,v=r[l]/2-s[l]/2;let y;switch(c){case"top":y={x:f,y:r.y-s.height};break;case"bottom":y={x:f,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:m};break;case"left":y={x:r.x-s.width,y:m};break;default:y={x:r.x,y:r.y}}switch(Pl(t)){case"start":y[a]-=v*(n&&h?-1:1);break;case"end":y[a]+=v*(n&&h?-1:1);break}return y}const gD=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let h=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:m}=W_(h,r,c),v=r,y={},S=0;for(let w=0;w<l.length;w++){const{name:b,fn:E}=l[w],{x:_,y:C,data:P,reset:T}=await E({x:f,y:m,initialPlacement:r,placement:v,strategy:s,middlewareData:y,rects:h,platform:a,elements:{reference:e,floating:t}});f=_??f,m=C??m,y={...y,[b]:{...y[b],...P}},T&&S<=50&&(S++,typeof T=="object"&&(T.placement&&(v=T.placement),T.rects&&(h=T.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):T.rects),{x:f,y:m}=W_(h,v,c)),w=-1)}return{x:f,y:m,placement:v,strategy:s,middlewareData:y}};async function su(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=e,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:v=!1,padding:y=0}=ni(t,e),S=QC(y),b=l[v?m==="floating"?"reference":"floating":m],E=Uh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:h,rootBoundary:f,strategy:c})),_=m==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),P=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},T=Uh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:_,offsetParent:C,strategy:c}):_);return{top:(E.top-T.top+S.top)/P.y,bottom:(T.bottom-E.bottom+S.bottom)/P.y,left:(E.left-T.left+S.left)/P.x,right:(T.right-E.right+S.right)/P.x}}const vD=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=t,{element:h,padding:f=0}=ni(e,t)||{};if(h==null)return{};const m=QC(f),v={x:n,y:r},y=y0(s),S=v0(y),w=await a.getDimensions(h),b=y==="y",E=b?"top":"left",_=b?"bottom":"right",C=b?"clientHeight":"clientWidth",P=i.reference[S]+i.reference[y]-v[y]-i.floating[S],T=v[y]-i.reference[y],R=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h));let O=R?R[C]:0;(!O||!await(a.isElement==null?void 0:a.isElement(R)))&&(O=l.floating[C]||i.floating[S]);const A=P/2-T/2,B=O/2-w[S]/2-1,q=Ki(m[E],B),Q=Ki(m[_],B),W=q,z=O-w[S]-Q,M=O/2-w[S]/2+A,ee=fv(W,M,z),H=!c.arrow&&Pl(s)!=null&&M!==ee&&i.reference[S]/2-(M<W?q:Q)-w[S]/2<0,Z=H?M<W?M-W:M-z:0;return{[y]:v[y]+Z,data:{[y]:ee,centerOffset:M-ee-Z,...H&&{alignmentOffset:Z}},reset:H}}}),yD=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:h}=t,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:v,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:w=!0,...b}=ni(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=ri(s),_=xs(l),C=ri(l)===l,P=await(c.isRTL==null?void 0:c.isRTL(h.floating)),T=v||(C||!w?[$h(l)]:uD(l)),R=S!=="none";!v&&R&&T.push(...pD(l,w,S,P));const O=[l,...T],A=await su(t,b),B=[];let q=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&B.push(A[E]),m){const M=cD(s,a,P);B.push(A[M[0]],A[M[1]])}if(q=[...q,{placement:s,overflows:B}],!B.every(M=>M<=0)){var Q,W;const M=(((Q=i.flip)==null?void 0:Q.index)||0)+1,ee=O[M];if(ee&&(!(m==="alignment"?_!==xs(ee):!1)||q.every(j=>j.overflows[0]>0&&xs(j.placement)===_)))return{data:{index:M,overflows:q},reset:{placement:ee}};let H=(W=q.filter(Z=>Z.overflows[0]<=0).sort((Z,j)=>Z.overflows[1]-j.overflows[1])[0])==null?void 0:W.placement;if(!H)switch(y){case"bestFit":{var z;const Z=(z=q.filter(j=>{if(R){const U=xs(j.placement);return U===_||U==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(U=>U>0).reduce((U,Y)=>U+Y,0)]).sort((j,U)=>j[1]-U[1])[0])==null?void 0:z[0];Z&&(H=Z);break}case"initialPlacement":H=l;break}if(s!==H)return{reset:{placement:H}}}return{}}}};function H_(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function V_(e){return iD.some(t=>e[t]>=0)}const xD=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=ni(e,t);switch(r){case"referenceHidden":{const i=await su(t,{...s,elementContext:"reference"}),a=H_(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:V_(a)}}}case"escaped":{const i=await su(t,{...s,altBoundary:!0}),a=H_(i,n.floating);return{data:{escapedOffsets:a,escaped:V_(a)}}}default:return{}}}}},XC=new Set(["left","top"]);async function wD(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=ri(n),l=Pl(n),c=xs(n)==="y",h=XC.has(a)?-1:1,f=i&&c?-1:1,m=ni(t,e);let{mainAxis:v,crossAxis:y,alignmentAxis:S}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof S=="number"&&(y=l==="end"?S*-1:S),c?{x:y*f,y:v*h}:{x:v*h,y:y*f}}const _D=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=t,c=await wD(t,e);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},bD=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x:E,y:_}=b;return{x:E,y:_}}},...c}=ni(e,t),h={x:n,y:r},f=await su(t,c),m=xs(ri(s)),v=g0(m);let y=h[v],S=h[m];if(i){const b=v==="y"?"top":"left",E=v==="y"?"bottom":"right",_=y+f[b],C=y-f[E];y=fv(_,y,C)}if(a){const b=m==="y"?"top":"left",E=m==="y"?"bottom":"right",_=S+f[b],C=S-f[E];S=fv(_,S,C)}const w=l.fn({...t,[v]:y,[m]:S});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[v]:i,[m]:a}}}}}},SD=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:h=!0}=ni(e,t),f={x:n,y:r},m=xs(s),v=g0(m);let y=f[v],S=f[m];const w=ni(l,t),b=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(c){const C=v==="y"?"height":"width",P=i.reference[v]-i.floating[C]+b.mainAxis,T=i.reference[v]+i.reference[C]-b.mainAxis;y<P?y=P:y>T&&(y=T)}if(h){var E,_;const C=v==="y"?"width":"height",P=XC.has(ri(s)),T=i.reference[m]-i.floating[C]+(P&&((E=a.offset)==null?void 0:E[m])||0)+(P?0:b.crossAxis),R=i.reference[m]+i.reference[C]+(P?0:((_=a.offset)==null?void 0:_[m])||0)-(P?b.crossAxis:0);S<T?S=T:S>R&&(S=R)}return{[v]:y,[m]:S}}}},ED=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:i,platform:a,elements:l}=t,{apply:c=()=>{},...h}=ni(e,t),f=await su(t,h),m=ri(s),v=Pl(s),y=xs(s)==="y",{width:S,height:w}=i.floating;let b,E;m==="top"||m==="bottom"?(b=m,E=v===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(E=m,b=v==="end"?"top":"bottom");const _=w-f.top-f.bottom,C=S-f.left-f.right,P=Ki(w-f[b],_),T=Ki(S-f[E],C),R=!t.middlewareData.shift;let O=P,A=T;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(A=C),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(O=_),R&&!v){const q=tr(f.left,0),Q=tr(f.right,0),W=tr(f.top,0),z=tr(f.bottom,0);y?A=S-2*(q!==0||Q!==0?q+Q:tr(f.left,f.right)):O=w-2*(W!==0||z!==0?W+z:tr(f.top,f.bottom))}await c({...t,availableWidth:A,availableHeight:O});const B=await a.getDimensions(l.floating);return S!==B.width||w!==B.height?{reset:{rects:!0}}:{}}}};function Bf(){return typeof window<"u"}function Nl(e){return JC(e)?(e.nodeName||"").toLowerCase():"#document"}function sr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ps(e){var t;return(t=(JC(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function JC(e){return Bf()?e instanceof Node||e instanceof sr(e).Node:!1}function Qr(e){return Bf()?e instanceof Element||e instanceof sr(e).Element:!1}function Es(e){return Bf()?e instanceof HTMLElement||e instanceof sr(e).HTMLElement:!1}function q_(e){return!Bf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof sr(e).ShadowRoot}const CD=new Set(["inline","contents"]);function Pu(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Xr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!CD.has(s)}const kD=new Set(["table","td","th"]);function PD(e){return kD.has(Nl(e))}const ND=[":popover-open",":modal"];function Wf(e){return ND.some(t=>{try{return e.matches(t)}catch{return!1}})}const TD=["transform","translate","scale","rotate","perspective"],jD=["transform","translate","scale","rotate","perspective","filter"],RD=["paint","layout","strict","content"];function x0(e){const t=w0(),n=Qr(e)?Xr(e):e;return TD.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||jD.some(r=>(n.willChange||"").includes(r))||RD.some(r=>(n.contain||"").includes(r))}function MD(e){let t=Qi(e);for(;Es(t)&&!ml(t);){if(x0(t))return t;if(Wf(t))return null;t=Qi(t)}return null}function w0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const OD=new Set(["html","body","#document"]);function ml(e){return OD.has(Nl(e))}function Xr(e){return sr(e).getComputedStyle(e)}function Hf(e){return Qr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Qi(e){if(Nl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||q_(e)&&e.host||Ps(e);return q_(t)?t.host:t}function ek(e){const t=Qi(e);return ml(t)?e.ownerDocument?e.ownerDocument.body:e.body:Es(t)&&Pu(t)?t:ek(t)}function iu(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=ek(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),a=sr(s);if(i){const l=mv(a);return t.concat(a,a.visualViewport||[],Pu(s)?s:[],l&&n?iu(l):[])}return t.concat(s,iu(s,[],n))}function mv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function tk(e){const t=Xr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Es(e),i=s?e.offsetWidth:n,a=s?e.offsetHeight:r,l=Fh(n)!==i||Fh(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function _0(e){return Qr(e)?e:e.contextElement}function Ga(e){const t=_0(e);if(!Es(t))return Ss(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=tk(t);let a=(i?Fh(n.width):n.width)/r,l=(i?Fh(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const ID=Ss(0);function nk(e){const t=sr(e);return!w0()||!t.visualViewport?ID:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function AD(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==sr(e)?!1:t}function Go(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=_0(e);let a=Ss(1);t&&(r?Qr(r)&&(a=Ga(r)):a=Ga(e));const l=AD(i,n,r)?nk(i):Ss(0);let c=(s.left+l.x)/a.x,h=(s.top+l.y)/a.y,f=s.width/a.x,m=s.height/a.y;if(i){const v=sr(i),y=r&&Qr(r)?sr(r):r;let S=v,w=mv(S);for(;w&&r&&y!==S;){const b=Ga(w),E=w.getBoundingClientRect(),_=Xr(w),C=E.left+(w.clientLeft+parseFloat(_.paddingLeft))*b.x,P=E.top+(w.clientTop+parseFloat(_.paddingTop))*b.y;c*=b.x,h*=b.y,f*=b.x,m*=b.y,c+=C,h+=P,S=sr(w),w=mv(S)}}return Uh({width:f,height:m,x:c,y:h})}function b0(e,t){const n=Hf(e).scrollLeft;return t?t.left+n:Go(Ps(e)).left+n}function rk(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:b0(e,r)),i=r.top+t.scrollTop;return{x:s,y:i}}function LD(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",a=Ps(r),l=t?Wf(t.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},h=Ss(1);const f=Ss(0),m=Es(r);if((m||!m&&!i)&&((Nl(r)!=="body"||Pu(a))&&(c=Hf(r)),Es(r))){const y=Go(r);h=Ga(r),f.x=y.x+r.clientLeft,f.y=y.y+r.clientTop}const v=a&&!m&&!i?rk(a,c,!0):Ss(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-c.scrollLeft*h.x+f.x+v.x,y:n.y*h.y-c.scrollTop*h.y+f.y+v.y}}function DD(e){return Array.from(e.getClientRects())}function FD(e){const t=Ps(e),n=Hf(e),r=e.ownerDocument.body,s=tr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=tr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+b0(e);const l=-n.scrollTop;return Xr(r).direction==="rtl"&&(a+=tr(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}function $D(e,t){const n=sr(e),r=Ps(e),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const h=w0();(!h||h&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}const UD=new Set(["absolute","fixed"]);function zD(e,t){const n=Go(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=Es(e)?Ga(e):Ss(1),a=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,h=r*i.y;return{width:a,height:l,x:c,y:h}}function G_(e,t,n){let r;if(t==="viewport")r=$D(e,n);else if(t==="document")r=FD(Ps(e));else if(Qr(t))r=zD(t,n);else{const s=nk(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Uh(r)}function sk(e,t){const n=Qi(e);return n===t||!Qr(n)||ml(n)?!1:Xr(n).position==="fixed"||sk(n,t)}function BD(e,t){const n=t.get(e);if(n)return n;let r=iu(e,[],!1).filter(l=>Qr(l)&&Nl(l)!=="body"),s=null;const i=Xr(e).position==="fixed";let a=i?Qi(e):e;for(;Qr(a)&&!ml(a);){const l=Xr(a),c=x0(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&UD.has(s.position)||Pu(a)&&!c&&sk(e,a))?r=r.filter(f=>f!==a):s=l,a=Qi(a)}return t.set(e,r),r}function WD(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[...n==="clippingAncestors"?Wf(t)?[]:BD(t,this._c):[].concat(n),r],l=a[0],c=a.reduce((h,f)=>{const m=G_(t,f,s);return h.top=tr(m.top,h.top),h.right=Ki(m.right,h.right),h.bottom=Ki(m.bottom,h.bottom),h.left=tr(m.left,h.left),h},G_(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function HD(e){const{width:t,height:n}=tk(e);return{width:t,height:n}}function VD(e,t,n){const r=Es(t),s=Ps(t),i=n==="fixed",a=Go(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Ss(0);function h(){c.x=b0(s)}if(r||!r&&!i)if((Nl(t)!=="body"||Pu(s))&&(l=Hf(t)),r){const y=Go(t,!0,i,t);c.x=y.x+t.clientLeft,c.y=y.y+t.clientTop}else s&&h();i&&!r&&s&&h();const f=s&&!r&&!i?rk(s,l):Ss(0),m=a.left+l.scrollLeft-c.x-f.x,v=a.top+l.scrollTop-c.y-f.y;return{x:m,y:v,width:a.width,height:a.height}}function Cm(e){return Xr(e).position==="static"}function Y_(e,t){if(!Es(e)||Xr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ps(e)===n&&(n=n.ownerDocument.body),n}function ik(e,t){const n=sr(e);if(Wf(e))return n;if(!Es(e)){let s=Qi(e);for(;s&&!ml(s);){if(Qr(s)&&!Cm(s))return s;s=Qi(s)}return n}let r=Y_(e,t);for(;r&&PD(r)&&Cm(r);)r=Y_(r,t);return r&&ml(r)&&Cm(r)&&!x0(r)?n:r||MD(e)||n}const qD=async function(e){const t=this.getOffsetParent||ik,n=this.getDimensions,r=await n(e.floating);return{reference:VD(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function GD(e){return Xr(e).direction==="rtl"}const YD={convertOffsetParentRelativeRectToViewportRelativeRect:LD,getDocumentElement:Ps,getClippingRect:WD,getOffsetParent:ik,getElementRects:qD,getClientRects:DD,getDimensions:HD,getScale:Ga,isElement:Qr,isRTL:GD};function ok(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ZD(e,t){let n=null,r;const s=Ps(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const h=e.getBoundingClientRect(),{left:f,top:m,width:v,height:y}=h;if(l||t(),!v||!y)return;const S=Rd(m),w=Rd(s.clientWidth-(f+v)),b=Rd(s.clientHeight-(m+y)),E=Rd(f),C={rootMargin:-S+"px "+-w+"px "+-b+"px "+-E+"px",threshold:tr(0,Ki(1,c))||1};let P=!0;function T(R){const O=R[0].intersectionRatio;if(O!==c){if(!P)return a();O?a(!1,O):r=setTimeout(()=>{a(!1,1e-7)},1e3)}O===1&&!ok(h,e.getBoundingClientRect())&&a(),P=!1}try{n=new IntersectionObserver(T,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(T,C)}n.observe(e)}return a(!0),i}function KD(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,h=_0(e),f=s||i?[...h?iu(h):[],...iu(t)]:[];f.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const m=h&&l?ZD(h,n):null;let v=-1,y=null;a&&(y=new ResizeObserver(E=>{let[_]=E;_&&_.target===h&&y&&(y.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var C;(C=y)==null||C.observe(t)})),n()}),h&&!c&&y.observe(h),y.observe(t));let S,w=c?Go(e):null;c&&b();function b(){const E=Go(e);w&&!ok(w,E)&&n(),w=E,S=requestAnimationFrame(b)}return n(),()=>{var E;f.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),m==null||m(),(E=y)==null||E.disconnect(),y=null,c&&cancelAnimationFrame(S)}}const QD=_D,XD=bD,JD=yD,e3=ED,t3=xD,Z_=vD,n3=SD,r3=(e,t,n)=>{const r=new Map,s={platform:YD,...n},i={...s.platform,_c:r};return gD(e,t,{...s,platform:i})};var s3=typeof document<"u",i3=function(){},sh=s3?g.useLayoutEffect:i3;function zh(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!zh(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!zh(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function ak(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function K_(e,t){const n=ak(e);return Math.round(t*n)/n}function km(e){const t=g.useRef(e);return sh(()=>{t.current=e}),t}function o3(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:h}=e,[f,m]=g.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[v,y]=g.useState(r);zh(v,r)||y(r);const[S,w]=g.useState(null),[b,E]=g.useState(null),_=g.useCallback(j=>{j!==R.current&&(R.current=j,w(j))},[]),C=g.useCallback(j=>{j!==O.current&&(O.current=j,E(j))},[]),P=i||S,T=a||b,R=g.useRef(null),O=g.useRef(null),A=g.useRef(f),B=c!=null,q=km(c),Q=km(s),W=km(h),z=g.useCallback(()=>{if(!R.current||!O.current)return;const j={placement:t,strategy:n,middleware:v};Q.current&&(j.platform=Q.current),r3(R.current,O.current,j).then(U=>{const Y={...U,isPositioned:W.current!==!1};M.current&&!zh(A.current,Y)&&(A.current=Y,no.flushSync(()=>{m(Y)}))})},[v,t,n,Q,W]);sh(()=>{h===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,m(j=>({...j,isPositioned:!1})))},[h]);const M=g.useRef(!1);sh(()=>(M.current=!0,()=>{M.current=!1}),[]),sh(()=>{if(P&&(R.current=P),T&&(O.current=T),P&&T){if(q.current)return q.current(P,T,z);z()}},[P,T,z,q,B]);const ee=g.useMemo(()=>({reference:R,floating:O,setReference:_,setFloating:C}),[_,C]),H=g.useMemo(()=>({reference:P,floating:T}),[P,T]),Z=g.useMemo(()=>{const j={position:n,left:0,top:0};if(!H.floating)return j;const U=K_(H.floating,f.x),Y=K_(H.floating,f.y);return l?{...j,transform:"translate("+U+"px, "+Y+"px)",...ak(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:Y}},[n,l,H.floating,f.x,f.y]);return g.useMemo(()=>({...f,update:z,refs:ee,elements:H,floatingStyles:Z}),[f,z,ee,H,Z])}const a3=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Z_({element:r.current,padding:s}).fn(n):{}:r?Z_({element:r,padding:s}).fn(n):{}}}},l3=(e,t)=>({...QD(e),options:[e,t]}),c3=(e,t)=>({...XD(e),options:[e,t]}),u3=(e,t)=>({...n3(e),options:[e,t]}),d3=(e,t)=>({...JD(e),options:[e,t]}),h3=(e,t)=>({...e3(e),options:[e,t]}),f3=(e,t)=>({...t3(e),options:[e,t]}),p3=(e,t)=>({...a3(e),options:[e,t]});var m3="Arrow",lk=g.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...i}=e;return d.jsx(ke.svg,{...i,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});lk.displayName=m3;var g3=lk;function S0(e){const[t,n]=g.useState(void 0);return At(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,h=Array.isArray(c)?c[0]:c;a=h.inlineSize,l=h.blockSize}else a=e.offsetWidth,l=e.offsetHeight;n({width:a,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var E0="Popper",[ck,ro]=Tn(E0),[v3,uk]=ck(E0),dk=e=>{const{__scopePopper:t,children:n}=e,[r,s]=g.useState(null);return d.jsx(v3,{scope:t,anchor:r,onAnchorChange:s,children:n})};dk.displayName=E0;var hk="PopperAnchor",fk=g.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,i=uk(hk,n),a=g.useRef(null),l=ze(t,a);return g.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:d.jsx(ke.div,{...s,ref:l})});fk.displayName=hk;var C0="PopperContent",[y3,x3]=ck(C0),pk=g.forwardRef((e,t)=>{var ne,he,Me,Ee,je,pe;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:v=!1,updatePositionStrategy:y="optimized",onPlaced:S,...w}=e,b=uk(C0,n),[E,_]=g.useState(null),C=ze(t,V=>_(V)),[P,T]=g.useState(null),R=S0(P),O=(R==null?void 0:R.width)??0,A=(R==null?void 0:R.height)??0,B=r+(i!=="center"?"-"+i:""),q=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},Q=Array.isArray(h)?h:[h],W=Q.length>0,z={padding:q,boundary:Q.filter(_3),altBoundary:W},{refs:M,floatingStyles:ee,placement:H,isPositioned:Z,middlewareData:j}=o3({strategy:"fixed",placement:B,whileElementsMounted:(...V)=>KD(...V,{animationFrame:y==="always"}),elements:{reference:b.anchor},middleware:[l3({mainAxis:s+A,alignmentAxis:a}),c&&c3({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?u3():void 0,...z}),c&&d3({...z}),h3({...z,apply:({elements:V,rects:oe,availableWidth:ye,availableHeight:Oe})=>{const{width:dt,height:Lt}=oe.reference,yn=V.floating.style;yn.setProperty("--radix-popper-available-width",`${ye}px`),yn.setProperty("--radix-popper-available-height",`${Oe}px`),yn.setProperty("--radix-popper-anchor-width",`${dt}px`),yn.setProperty("--radix-popper-anchor-height",`${Lt}px`)}}),P&&p3({element:P,padding:l}),b3({arrowWidth:O,arrowHeight:A}),v&&f3({strategy:"referenceHidden",...z})]}),[U,Y]=vk(H),se=Mt(S);At(()=>{Z&&(se==null||se())},[Z,se]);const te=(ne=j.arrow)==null?void 0:ne.x,ue=(he=j.arrow)==null?void 0:he.y,F=((Me=j.arrow)==null?void 0:Me.centerOffset)!==0,[J,G]=g.useState();return At(()=>{E&&G(window.getComputedStyle(E).zIndex)},[E]),d.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:Z?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[(Ee=j.transformOrigin)==null?void 0:Ee.x,(je=j.transformOrigin)==null?void 0:je.y].join(" "),...((pe=j.hide)==null?void 0:pe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:d.jsx(y3,{scope:n,placedSide:U,onArrowChange:T,arrowX:te,arrowY:ue,shouldHideArrow:F,children:d.jsx(ke.div,{"data-side":U,"data-align":Y,...w,ref:C,style:{...w.style,animation:Z?void 0:"none"}})})})});pk.displayName=C0;var mk="PopperArrow",w3={top:"bottom",right:"left",bottom:"top",left:"right"},gk=g.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,i=x3(mk,r),a=w3[i.placedSide];return d.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:d.jsx(g3,{...s,ref:n,style:{...s.style,display:"block"}})})});gk.displayName=mk;function _3(e){return e!==null}var b3=e=>({name:"transformOrigin",options:e,fn(t){var b,E,_;const{placement:n,rects:r,middlewareData:s}=t,a=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[h,f]=vk(n),m={start:"0%",center:"50%",end:"100%"}[f],v=(((E=s.arrow)==null?void 0:E.x)??0)+l/2,y=(((_=s.arrow)==null?void 0:_.y)??0)+c/2;let S="",w="";return h==="bottom"?(S=a?m:`${v}px`,w=`${-c}px`):h==="top"?(S=a?m:`${v}px`,w=`${r.floating.height+c}px`):h==="right"?(S=`${-c}px`,w=a?m:`${y}px`):h==="left"&&(S=`${r.floating.width+c}px`,w=a?m:`${y}px`),{data:{x:S,y:w}}}});function vk(e){const[t,n="center"]=e.split("-");return[t,n]}var k0=dk,Nu=fk,Vf=pk,qf=gk,[Gf,EG]=Tn("Tooltip",[ro]),P0=ro(),yk="TooltipProvider",S3=700,Q_="tooltip.open",[E3,xk]=Gf(yk),wk=e=>{const{__scopeTooltip:t,delayDuration:n=S3,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=e,a=g.useRef(!0),l=g.useRef(!1),c=g.useRef(0);return g.useEffect(()=>{const h=c.current;return()=>window.clearTimeout(h)},[]),d.jsx(E3,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:g.useCallback(h=>{l.current=h},[]),disableHoverableContent:s,children:i})};wk.displayName=yk;var _k="Tooltip",[CG,Yf]=Gf(_k),gv="TooltipTrigger",C3=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Yf(gv,n),i=xk(gv,n),a=P0(n),l=g.useRef(null),c=ze(t,l,s.onTriggerChange),h=g.useRef(!1),f=g.useRef(!1),m=g.useCallback(()=>h.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),d.jsx(Nu,{asChild:!0,...a,children:d.jsx(ke.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:le(e.onPointerMove,v=>{v.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:le(e.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:le(e.onPointerDown,()=>{s.open&&s.onClose(),h.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:le(e.onFocus,()=>{h.current||s.onOpen()}),onBlur:le(e.onBlur,s.onClose),onClick:le(e.onClick,s.onClose)})})});C3.displayName=gv;var k3="TooltipPortal",[kG,P3]=Gf(k3,{forceMount:void 0}),gl="TooltipContent",bk=g.forwardRef((e,t)=>{const n=P3(gl,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=e,a=Yf(gl,e.__scopeTooltip);return d.jsx(Jt,{present:r||a.open,children:a.disableHoverableContent?d.jsx(Sk,{side:s,...i,ref:t}):d.jsx(N3,{side:s,...i,ref:t})})}),N3=g.forwardRef((e,t)=>{const n=Yf(gl,e.__scopeTooltip),r=xk(gl,e.__scopeTooltip),s=g.useRef(null),i=ze(t,s),[a,l]=g.useState(null),{trigger:c,onClose:h}=n,f=s.current,{onPointerInTransitChange:m}=r,v=g.useCallback(()=>{l(null),m(!1)},[m]),y=g.useCallback((S,w)=>{const b=S.currentTarget,E={x:S.clientX,y:S.clientY},_=O3(E,b.getBoundingClientRect()),C=I3(E,_),P=A3(w.getBoundingClientRect()),T=D3([...C,...P]);l(T),m(!0)},[m]);return g.useEffect(()=>()=>v(),[v]),g.useEffect(()=>{if(c&&f){const S=b=>y(b,f),w=b=>y(b,c);return c.addEventListener("pointerleave",S),f.addEventListener("pointerleave",w),()=>{c.removeEventListener("pointerleave",S),f.removeEventListener("pointerleave",w)}}},[c,f,y,v]),g.useEffect(()=>{if(a){const S=w=>{const b=w.target,E={x:w.clientX,y:w.clientY},_=(c==null?void 0:c.contains(b))||(f==null?void 0:f.contains(b)),C=!L3(E,a);_?v():C&&(v(),h())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[c,f,a,h,v]),d.jsx(Sk,{...e,ref:i})}),[T3,j3]=Gf(_k,{isInside:!1}),R3=qI("TooltipContent"),Sk=g.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=e,c=Yf(gl,n),h=P0(n),{onClose:f}=c;return g.useEffect(()=>(document.addEventListener(Q_,f),()=>document.removeEventListener(Q_,f)),[f]),g.useEffect(()=>{if(c.trigger){const m=v=>{const y=v.target;y!=null&&y.contains(c.trigger)&&f()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,f]),d.jsx(ra,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:m=>m.preventDefault(),onDismiss:f,children:d.jsxs(Vf,{"data-state":c.stateAttribute,...h,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[d.jsx(R3,{children:r}),d.jsx(T3,{scope:n,isInside:!0,children:d.jsx(pA,{id:c.contentId,role:"tooltip",children:s||r})})]})})});bk.displayName=gl;var Ek="TooltipArrow",M3=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=P0(n);return j3(Ek,n).isInside?null:d.jsx(qf,{...s,...r,ref:t})});M3.displayName=Ek;function O3(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function I3(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function A3(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function L3(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const l=t[i],c=t[a],h=l.x,f=l.y,m=c.x,v=c.y;f>r!=v>r&&n<(m-h)*(r-f)/(v-f)+h&&(s=!s)}return s}function D3(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),F3(t)}function F3(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const i=t[t.length-1],a=t[t.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var $3=wk,Ck=bk;const U3=$3,z3=g.forwardRef(({className:e,sideOffset:t=4,...n},r)=>d.jsx(Ck,{ref:r,sideOffset:t,className:Te("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));z3.displayName=Ck.displayName;var Tl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Yo=typeof window>"u"||"Deno"in globalThis;function En(){}function B3(e,t){return typeof e=="function"?e(t):e}function vv(e){return typeof e=="number"&&e>=0&&e!==1/0}function kk(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Vi(e,t){return typeof e=="function"?e(t):e}function br(e,t){return typeof e=="function"?e(t):e}function X_(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:l}=e;if(a){if(r){if(t.queryHash!==N0(a,t.options))return!1}else if(!ou(t.queryKey,a))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function J_(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Zo(t.options.mutationKey)!==Zo(i))return!1}else if(!ou(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function N0(e,t){return((t==null?void 0:t.queryKeyHashFn)||Zo)(e)}function Zo(e){return JSON.stringify(e,(t,n)=>yv(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ou(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>ou(e[n],t[n])):!1}function Pk(e,t){if(e===t)return e;const n=eb(e)&&eb(t);if(n||yv(e)&&yv(t)){const r=n?e:Object.keys(e),s=r.length,i=n?t:Object.keys(t),a=i.length,l=n?[]:{},c=new Set(r);let h=0;for(let f=0;f<a;f++){const m=n?f:i[f];(!n&&c.has(m)||n)&&e[m]===void 0&&t[m]===void 0?(l[m]=void 0,h++):(l[m]=Pk(e[m],t[m]),l[m]===e[m]&&e[m]!==void 0&&h++)}return s===a&&h===s?e:l}return t}function Bh(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function eb(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function yv(e){if(!tb(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!tb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function tb(e){return Object.prototype.toString.call(e)==="[object Object]"}function W3(e){return new Promise(t=>{setTimeout(t,e)})}function xv(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Pk(e,t):t}function H3(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function V3(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var T0=Symbol();function Nk(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===T0?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Tk(e,t){return typeof e=="function"?e(...t):!!e}var jo,bi,Ka,z1,q3=(z1=class extends Tl{constructor(){super();Ne(this,jo);Ne(this,bi);Ne(this,Ka);ve(this,Ka,t=>{if(!Yo&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){D(this,bi)||this.setEventListener(D(this,Ka))}onUnsubscribe(){var t;this.hasListeners()||((t=D(this,bi))==null||t.call(this),ve(this,bi,void 0))}setEventListener(t){var n;ve(this,Ka,t),(n=D(this,bi))==null||n.call(this),ve(this,bi,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){D(this,jo)!==t&&(ve(this,jo,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof D(this,jo)=="boolean"?D(this,jo):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},jo=new WeakMap,bi=new WeakMap,Ka=new WeakMap,z1),j0=new q3,Qa,Si,Xa,B1,G3=(B1=class extends Tl{constructor(){super();Ne(this,Qa,!0);Ne(this,Si);Ne(this,Xa);ve(this,Xa,t=>{if(!Yo&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){D(this,Si)||this.setEventListener(D(this,Xa))}onUnsubscribe(){var t;this.hasListeners()||((t=D(this,Si))==null||t.call(this),ve(this,Si,void 0))}setEventListener(t){var n;ve(this,Xa,t),(n=D(this,Si))==null||n.call(this),ve(this,Si,t(this.setOnline.bind(this)))}setOnline(t){D(this,Qa)!==t&&(ve(this,Qa,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return D(this,Qa)}},Qa=new WeakMap,Si=new WeakMap,Xa=new WeakMap,B1),Wh=new G3;function wv(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function Y3(e){return Math.min(1e3*2**e,3e4)}function jk(e){return(e??"online")==="online"?Wh.isOnline():!0}var Rk=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Pm(e){return e instanceof Rk}function Mk(e){let t=!1,n=0,r=!1,s;const i=wv(),a=w=>{var b;r||(v(new Rk(w)),(b=e.abort)==null||b.call(e))},l=()=>{t=!0},c=()=>{t=!1},h=()=>j0.isFocused()&&(e.networkMode==="always"||Wh.isOnline())&&e.canRun(),f=()=>jk(e.networkMode)&&e.canRun(),m=w=>{var b;r||(r=!0,(b=e.onSuccess)==null||b.call(e,w),s==null||s(),i.resolve(w))},v=w=>{var b;r||(r=!0,(b=e.onError)==null||b.call(e,w),s==null||s(),i.reject(w))},y=()=>new Promise(w=>{var b;s=E=>{(r||h())&&w(E)},(b=e.onPause)==null||b.call(e)}).then(()=>{var w;s=void 0,r||(w=e.onContinue)==null||w.call(e)}),S=()=>{if(r)return;let w;const b=n===0?e.initialPromise:void 0;try{w=b??e.fn()}catch(E){w=Promise.reject(E)}Promise.resolve(w).then(m).catch(E=>{var R;if(r)return;const _=e.retry??(Yo?0:3),C=e.retryDelay??Y3,P=typeof C=="function"?C(n,E):C,T=_===!0||typeof _=="number"&&n<_||typeof _=="function"&&_(n,E);if(t||!T){v(E);return}n++,(R=e.onFail)==null||R.call(e,n,E),W3(P).then(()=>h()?void 0:y()).then(()=>{t?v(E):S()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?S():y().then(S),i)}}var Z3=e=>setTimeout(e,0);function K3(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=Z3;const i=l=>{t?e.push(l):s(()=>{n(l)})},a=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var qt=K3(),Ro,W1,Ok=(W1=class{constructor(){Ne(this,Ro)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),vv(this.gcTime)&&ve(this,Ro,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Yo?1/0:5*60*1e3))}clearGcTimeout(){D(this,Ro)&&(clearTimeout(D(this,Ro)),ve(this,Ro,void 0))}},Ro=new WeakMap,W1),Ja,Mo,_r,Oo,fn,vu,Io,zr,Fs,H1,Q3=(H1=class extends Ok{constructor(t){super();Ne(this,zr);Ne(this,Ja);Ne(this,Mo);Ne(this,_r);Ne(this,Oo);Ne(this,fn);Ne(this,vu);Ne(this,Io);ve(this,Io,!1),ve(this,vu,t.defaultOptions),this.setOptions(t.options),this.observers=[],ve(this,Oo,t.client),ve(this,_r,D(this,Oo).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ve(this,Ja,X3(this.options)),this.state=t.state??D(this,Ja),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=D(this,fn))==null?void 0:t.promise}setOptions(t){this.options={...D(this,vu),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&D(this,_r).remove(this)}setData(t,n){const r=xv(this.state.data,t,this.options);return Ve(this,zr,Fs).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Ve(this,zr,Fs).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=D(this,fn))==null?void 0:r.promise;return(s=D(this,fn))==null||s.cancel(t),n?n.then(En).catch(En):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,Ja))}isActive(){return this.observers.some(t=>br(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===T0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Vi(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!kk(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=D(this,fn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=D(this,fn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),D(this,_r).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(D(this,fn)&&(D(this,Io)?D(this,fn).cancel({revert:!0}):D(this,fn).cancelRetry()),this.scheduleGc()),D(this,_r).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ve(this,zr,Fs).call(this,{type:"invalidate"})}fetch(t,n){var h,f,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(D(this,fn))return D(this,fn).continueRetry(),D(this,fn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const v=this.observers.find(y=>y.options.queryFn);v&&this.setOptions(v.options)}const r=new AbortController,s=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(ve(this,Io,!0),r.signal)})},i=()=>{const v=Nk(this.options,n),S=(()=>{const w={client:D(this,Oo),queryKey:this.queryKey,meta:this.meta};return s(w),w})();return ve(this,Io,!1),this.options.persister?this.options.persister(v,S,this):v(S)},l=(()=>{const v={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:D(this,Oo),state:this.state,fetchFn:i};return s(v),v})();(h=this.options.behavior)==null||h.onFetch(l,this),ve(this,Mo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&Ve(this,zr,Fs).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta});const c=v=>{var y,S,w,b;Pm(v)&&v.silent||Ve(this,zr,Fs).call(this,{type:"error",error:v}),Pm(v)||((S=(y=D(this,_r).config).onError)==null||S.call(y,v,this),(b=(w=D(this,_r).config).onSettled)==null||b.call(w,this.state.data,v,this)),this.scheduleGc()};return ve(this,fn,Mk({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:v=>{var y,S,w,b;if(v===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(v)}catch(E){c(E);return}(S=(y=D(this,_r).config).onSuccess)==null||S.call(y,v,this),(b=(w=D(this,_r).config).onSettled)==null||b.call(w,v,this.state.error,this),this.scheduleGc()},onError:c,onFail:(v,y)=>{Ve(this,zr,Fs).call(this,{type:"failed",failureCount:v,error:y})},onPause:()=>{Ve(this,zr,Fs).call(this,{type:"pause"})},onContinue:()=>{Ve(this,zr,Fs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),D(this,fn).start()}},Ja=new WeakMap,Mo=new WeakMap,_r=new WeakMap,Oo=new WeakMap,fn=new WeakMap,vu=new WeakMap,Io=new WeakMap,zr=new WeakSet,Fs=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Ik(r.data,this.options),fetchMeta:t.meta??null};case"success":return ve(this,Mo,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return Pm(s)&&s.revert&&D(this,Mo)?{...D(this,Mo),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),qt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),D(this,_r).notify({query:this,type:"updated",action:t})})},H1);function Ik(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jk(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function X3(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ps,V1,J3=(V1=class extends Tl{constructor(t={}){super();Ne(this,ps);this.config=t,ve(this,ps,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??N0(s,n);let a=this.get(i);return a||(a=new Q3({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){D(this,ps).has(t.queryHash)||(D(this,ps).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=D(this,ps).get(t.queryHash);n&&(t.destroy(),n===t&&D(this,ps).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){qt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return D(this,ps).get(t)}getAll(){return[...D(this,ps).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>X_(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>X_(t,r)):n}notify(t){qt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){qt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){qt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ps=new WeakMap,V1),ms,_n,Ao,gs,pi,q1,e5=(q1=class extends Ok{constructor(t){super();Ne(this,gs);Ne(this,ms);Ne(this,_n);Ne(this,Ao);this.mutationId=t.mutationId,ve(this,_n,t.mutationCache),ve(this,ms,[]),this.state=t.state||Ak(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){D(this,ms).includes(t)||(D(this,ms).push(t),this.clearGcTimeout(),D(this,_n).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ve(this,ms,D(this,ms).filter(n=>n!==t)),this.scheduleGc(),D(this,_n).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){D(this,ms).length||(this.state.status==="pending"?this.scheduleGc():D(this,_n).remove(this))}continue(){var t;return((t=D(this,Ao))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,a,l,c,h,f,m,v,y,S,w,b,E,_,C,P,T,R,O,A;const n=()=>{Ve(this,gs,pi).call(this,{type:"continue"})};ve(this,Ao,Mk({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(B,q)=>{Ve(this,gs,pi).call(this,{type:"failed",failureCount:B,error:q})},onPause:()=>{Ve(this,gs,pi).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>D(this,_n).canRun(this)}));const r=this.state.status==="pending",s=!D(this,Ao).canStart();try{if(r)n();else{Ve(this,gs,pi).call(this,{type:"pending",variables:t,isPaused:s}),await((a=(i=D(this,_n).config).onMutate)==null?void 0:a.call(i,t,this));const q=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));q!==this.state.context&&Ve(this,gs,pi).call(this,{type:"pending",context:q,variables:t,isPaused:s})}const B=await D(this,Ao).start();return await((f=(h=D(this,_n).config).onSuccess)==null?void 0:f.call(h,B,t,this.state.context,this)),await((v=(m=this.options).onSuccess)==null?void 0:v.call(m,B,t,this.state.context)),await((S=(y=D(this,_n).config).onSettled)==null?void 0:S.call(y,B,null,this.state.variables,this.state.context,this)),await((b=(w=this.options).onSettled)==null?void 0:b.call(w,B,null,t,this.state.context)),Ve(this,gs,pi).call(this,{type:"success",data:B}),B}catch(B){try{throw await((_=(E=D(this,_n).config).onError)==null?void 0:_.call(E,B,t,this.state.context,this)),await((P=(C=this.options).onError)==null?void 0:P.call(C,B,t,this.state.context)),await((R=(T=D(this,_n).config).onSettled)==null?void 0:R.call(T,void 0,B,this.state.variables,this.state.context,this)),await((A=(O=this.options).onSettled)==null?void 0:A.call(O,void 0,B,t,this.state.context)),B}finally{Ve(this,gs,pi).call(this,{type:"error",error:B})}}finally{D(this,_n).runNext(this)}}},ms=new WeakMap,_n=new WeakMap,Ao=new WeakMap,gs=new WeakSet,pi=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),qt.batch(()=>{D(this,ms).forEach(r=>{r.onMutationUpdate(t)}),D(this,_n).notify({mutation:this,type:"updated",action:t})})},q1);function Ak(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Bs,Br,yu,G1,t5=(G1=class extends Tl{constructor(t={}){super();Ne(this,Bs);Ne(this,Br);Ne(this,yu);this.config=t,ve(this,Bs,new Set),ve(this,Br,new Map),ve(this,yu,0)}build(t,n,r){const s=new e5({mutationCache:this,mutationId:++ud(this,yu)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){D(this,Bs).add(t);const n=Md(t);if(typeof n=="string"){const r=D(this,Br).get(n);r?r.push(t):D(this,Br).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(D(this,Bs).delete(t)){const n=Md(t);if(typeof n=="string"){const r=D(this,Br).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&D(this,Br).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Md(t);if(typeof n=="string"){const r=D(this,Br).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Md(t);if(typeof n=="string"){const s=(r=D(this,Br).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){qt.batch(()=>{D(this,Bs).forEach(t=>{this.notify({type:"removed",mutation:t})}),D(this,Bs).clear(),D(this,Br).clear()})}getAll(){return Array.from(D(this,Bs))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>J_(n,r))}findAll(t={}){return this.getAll().filter(n=>J_(t,n))}notify(t){qt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return qt.batch(()=>Promise.all(t.map(n=>n.continue().catch(En))))}},Bs=new WeakMap,Br=new WeakMap,yu=new WeakMap,G1);function Md(e){var t;return(t=e.options.scope)==null?void 0:t.id}function nb(e){return{onFetch:(t,n)=>{var f,m,v,y,S;const r=t.options,s=(v=(m=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:m.fetchMore)==null?void 0:v.direction,i=((y=t.state.data)==null?void 0:y.pages)||[],a=((S=t.state.data)==null?void 0:S.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const h=async()=>{let w=!1;const b=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(t.signal.aborted?w=!0:t.signal.addEventListener("abort",()=>{w=!0}),t.signal)})},E=Nk(t.options,t.fetchOptions),_=async(C,P,T)=>{if(w)return Promise.reject();if(P==null&&C.pages.length)return Promise.resolve(C);const O=(()=>{const Q={client:t.client,queryKey:t.queryKey,pageParam:P,direction:T?"backward":"forward",meta:t.options.meta};return b(Q),Q})(),A=await E(O),{maxPages:B}=t.options,q=T?V3:H3;return{pages:q(C.pages,A,B),pageParams:q(C.pageParams,P,B)}};if(s&&i.length){const C=s==="backward",P=C?n5:rb,T={pages:i,pageParams:a},R=P(r,T);l=await _(T,R,C)}else{const C=e??i.length;do{const P=c===0?a[0]??r.initialPageParam:rb(r,l);if(c>0&&P==null)break;l=await _(l,P),c++}while(c<C)}return l};t.options.persister?t.fetchFn=()=>{var w,b;return(b=(w=t.options).persister)==null?void 0:b.call(w,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=h}}}function rb(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function n5(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var jt,Ei,Ci,el,tl,ki,nl,rl,Y1,r5=(Y1=class{constructor(e={}){Ne(this,jt);Ne(this,Ei);Ne(this,Ci);Ne(this,el);Ne(this,tl);Ne(this,ki);Ne(this,nl);Ne(this,rl);ve(this,jt,e.queryCache||new J3),ve(this,Ei,e.mutationCache||new t5),ve(this,Ci,e.defaultOptions||{}),ve(this,el,new Map),ve(this,tl,new Map),ve(this,ki,0)}mount(){ud(this,ki)._++,D(this,ki)===1&&(ve(this,nl,j0.subscribe(async e=>{e&&(await this.resumePausedMutations(),D(this,jt).onFocus())})),ve(this,rl,Wh.subscribe(async e=>{e&&(await this.resumePausedMutations(),D(this,jt).onOnline())})))}unmount(){var e,t;ud(this,ki)._--,D(this,ki)===0&&((e=D(this,nl))==null||e.call(this),ve(this,nl,void 0),(t=D(this,rl))==null||t.call(this),ve(this,rl,void 0))}isFetching(e){return D(this,jt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return D(this,Ei).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=D(this,jt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=D(this,jt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Vi(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return D(this,jt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=D(this,jt).get(r.queryHash),i=s==null?void 0:s.state.data,a=B3(t,i);if(a!==void 0)return D(this,jt).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return qt.batch(()=>D(this,jt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=D(this,jt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=D(this,jt);qt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=D(this,jt);return qt.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=qt.batch(()=>D(this,jt).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(En).catch(En)}invalidateQueries(e,t={}){return qt.batch(()=>(D(this,jt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=qt.batch(()=>D(this,jt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(En)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(En)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=D(this,jt).build(this,t);return n.isStaleByTime(Vi(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(En).catch(En)}fetchInfiniteQuery(e){return e.behavior=nb(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(En).catch(En)}ensureInfiniteQueryData(e){return e.behavior=nb(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Wh.isOnline()?D(this,Ei).resumePausedMutations():Promise.resolve()}getQueryCache(){return D(this,jt)}getMutationCache(){return D(this,Ei)}getDefaultOptions(){return D(this,Ci)}setDefaultOptions(e){ve(this,Ci,e)}setQueryDefaults(e,t){D(this,el).set(Zo(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...D(this,el).values()],n={};return t.forEach(r=>{ou(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){D(this,tl).set(Zo(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...D(this,tl).values()],n={};return t.forEach(r=>{ou(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...D(this,Ci).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=N0(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===T0&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...D(this,Ci).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){D(this,jt).clear(),D(this,Ei).clear()}},jt=new WeakMap,Ei=new WeakMap,Ci=new WeakMap,el=new WeakMap,tl=new WeakMap,ki=new WeakMap,nl=new WeakMap,rl=new WeakMap,Y1),Ln,Je,xu,bn,Lo,sl,Pi,Ni,wu,il,ol,Do,Fo,Ti,al,at,xc,_v,bv,Sv,Ev,Cv,kv,Pv,Lk,Z1,s5=(Z1=class extends Tl{constructor(t,n){super();Ne(this,at);Ne(this,Ln);Ne(this,Je);Ne(this,xu);Ne(this,bn);Ne(this,Lo);Ne(this,sl);Ne(this,Pi);Ne(this,Ni);Ne(this,wu);Ne(this,il);Ne(this,ol);Ne(this,Do);Ne(this,Fo);Ne(this,Ti);Ne(this,al,new Set);this.options=n,ve(this,Ln,t),ve(this,Ni,null),ve(this,Pi,wv()),this.options.experimental_prefetchInRender||D(this,Pi).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,Je).addObserver(this),sb(D(this,Je),this.options)?Ve(this,at,xc).call(this):this.updateResult(),Ve(this,at,Ev).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Nv(D(this,Je),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Nv(D(this,Je),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ve(this,at,Cv).call(this),Ve(this,at,kv).call(this),D(this,Je).removeObserver(this)}setOptions(t){const n=this.options,r=D(this,Je);if(this.options=D(this,Ln).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof br(this.options.enabled,D(this,Je))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ve(this,at,Pv).call(this),D(this,Je).setOptions(this.options),n._defaulted&&!Bh(this.options,n)&&D(this,Ln).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,Je),observer:this});const s=this.hasListeners();s&&ib(D(this,Je),r,this.options,n)&&Ve(this,at,xc).call(this),this.updateResult(),s&&(D(this,Je)!==r||br(this.options.enabled,D(this,Je))!==br(n.enabled,D(this,Je))||Vi(this.options.staleTime,D(this,Je))!==Vi(n.staleTime,D(this,Je)))&&Ve(this,at,_v).call(this);const i=Ve(this,at,bv).call(this);s&&(D(this,Je)!==r||br(this.options.enabled,D(this,Je))!==br(n.enabled,D(this,Je))||i!==D(this,Ti))&&Ve(this,at,Sv).call(this,i)}getOptimisticResult(t){const n=D(this,Ln).getQueryCache().build(D(this,Ln),t),r=this.createResult(n,t);return o5(this,r)&&(ve(this,bn,r),ve(this,sl,this.options),ve(this,Lo,D(this,Je).state)),r}getCurrentResult(){return D(this,bn)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(t){D(this,al).add(t)}getCurrentQuery(){return D(this,Je)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=D(this,Ln).defaultQueryOptions(t),r=D(this,Ln).getQueryCache().build(D(this,Ln),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return Ve(this,at,xc).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,bn)))}createResult(t,n){var B;const r=D(this,Je),s=this.options,i=D(this,bn),a=D(this,Lo),l=D(this,sl),h=t!==r?t.state:D(this,xu),{state:f}=t;let m={...f},v=!1,y;if(n._optimisticResults){const q=this.hasListeners(),Q=!q&&sb(t,n),W=q&&ib(t,r,n,s);(Q||W)&&(m={...m,...Ik(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:S,errorUpdatedAt:w,status:b}=m;y=m.data;let E=!1;if(n.placeholderData!==void 0&&y===void 0&&b==="pending"){let q;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(q=i.data,E=!0):q=typeof n.placeholderData=="function"?n.placeholderData((B=D(this,ol))==null?void 0:B.state.data,D(this,ol)):n.placeholderData,q!==void 0&&(b="success",y=xv(i==null?void 0:i.data,q,n),v=!0)}if(n.select&&y!==void 0&&!E)if(i&&y===(a==null?void 0:a.data)&&n.select===D(this,wu))y=D(this,il);else try{ve(this,wu,n.select),y=n.select(y),y=xv(i==null?void 0:i.data,y,n),ve(this,il,y),ve(this,Ni,null)}catch(q){ve(this,Ni,q)}D(this,Ni)&&(S=D(this,Ni),y=D(this,il),w=Date.now(),b="error");const _=m.fetchStatus==="fetching",C=b==="pending",P=b==="error",T=C&&_,R=y!==void 0,A={status:b,fetchStatus:m.fetchStatus,isPending:C,isSuccess:b==="success",isError:P,isInitialLoading:T,isLoading:T,data:y,dataUpdatedAt:m.dataUpdatedAt,error:S,errorUpdatedAt:w,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>h.dataUpdateCount||m.errorUpdateCount>h.errorUpdateCount,isFetching:_,isRefetching:_&&!C,isLoadingError:P&&!R,isPaused:m.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:P&&R,isStale:R0(t,n),refetch:this.refetch,promise:D(this,Pi),isEnabled:br(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const q=z=>{A.status==="error"?z.reject(A.error):A.data!==void 0&&z.resolve(A.data)},Q=()=>{const z=ve(this,Pi,A.promise=wv());q(z)},W=D(this,Pi);switch(W.status){case"pending":t.queryHash===r.queryHash&&q(W);break;case"fulfilled":(A.status==="error"||A.data!==W.value)&&Q();break;case"rejected":(A.status!=="error"||A.error!==W.reason)&&Q();break}}return A}updateResult(){const t=D(this,bn),n=this.createResult(D(this,Je),this.options);if(ve(this,Lo,D(this,Je).state),ve(this,sl,this.options),D(this,Lo).data!==void 0&&ve(this,ol,D(this,Je)),Bh(n,t))return;ve(this,bn,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!D(this,al).size)return!0;const a=new Set(i??D(this,al));return this.options.throwOnError&&a.add("error"),Object.keys(D(this,bn)).some(l=>{const c=l;return D(this,bn)[c]!==t[c]&&a.has(c)})};Ve(this,at,Lk).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ve(this,at,Ev).call(this)}},Ln=new WeakMap,Je=new WeakMap,xu=new WeakMap,bn=new WeakMap,Lo=new WeakMap,sl=new WeakMap,Pi=new WeakMap,Ni=new WeakMap,wu=new WeakMap,il=new WeakMap,ol=new WeakMap,Do=new WeakMap,Fo=new WeakMap,Ti=new WeakMap,al=new WeakMap,at=new WeakSet,xc=function(t){Ve(this,at,Pv).call(this);let n=D(this,Je).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(En)),n},_v=function(){Ve(this,at,Cv).call(this);const t=Vi(this.options.staleTime,D(this,Je));if(Yo||D(this,bn).isStale||!vv(t))return;const r=kk(D(this,bn).dataUpdatedAt,t)+1;ve(this,Do,setTimeout(()=>{D(this,bn).isStale||this.updateResult()},r))},bv=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,Je)):this.options.refetchInterval)??!1},Sv=function(t){Ve(this,at,kv).call(this),ve(this,Ti,t),!(Yo||br(this.options.enabled,D(this,Je))===!1||!vv(D(this,Ti))||D(this,Ti)===0)&&ve(this,Fo,setInterval(()=>{(this.options.refetchIntervalInBackground||j0.isFocused())&&Ve(this,at,xc).call(this)},D(this,Ti)))},Ev=function(){Ve(this,at,_v).call(this),Ve(this,at,Sv).call(this,Ve(this,at,bv).call(this))},Cv=function(){D(this,Do)&&(clearTimeout(D(this,Do)),ve(this,Do,void 0))},kv=function(){D(this,Fo)&&(clearInterval(D(this,Fo)),ve(this,Fo,void 0))},Pv=function(){const t=D(this,Ln).getQueryCache().build(D(this,Ln),this.options);if(t===D(this,Je))return;const n=D(this,Je);ve(this,Je,t),ve(this,xu,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},Lk=function(t){qt.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(D(this,bn))}),D(this,Ln).getQueryCache().notify({query:D(this,Je),type:"observerResultsUpdated"})})},Z1);function i5(e,t){return br(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function sb(e,t){return i5(e,t)||e.state.data!==void 0&&Nv(e,t,t.refetchOnMount)}function Nv(e,t,n){if(br(t.enabled,e)!==!1&&Vi(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&R0(e,t)}return!1}function ib(e,t,n,r){return(e!==t||br(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&R0(e,n)}function R0(e,t){return br(t.enabled,e)!==!1&&e.isStaleByTime(Vi(t.staleTime,e))}function o5(e,t){return!Bh(e.getCurrentResult(),t)}var ji,Ri,Dn,Ws,Ks,ih,Tv,K1,a5=(K1=class extends Tl{constructor(n,r){super();Ne(this,Ks);Ne(this,ji);Ne(this,Ri);Ne(this,Dn);Ne(this,Ws);ve(this,ji,n),this.setOptions(r),this.bindMethods(),Ve(this,Ks,ih).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=D(this,ji).defaultMutationOptions(n),Bh(this.options,r)||D(this,ji).getMutationCache().notify({type:"observerOptionsUpdated",mutation:D(this,Dn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Zo(r.mutationKey)!==Zo(this.options.mutationKey)?this.reset():((s=D(this,Dn))==null?void 0:s.state.status)==="pending"&&D(this,Dn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=D(this,Dn))==null||n.removeObserver(this)}onMutationUpdate(n){Ve(this,Ks,ih).call(this),Ve(this,Ks,Tv).call(this,n)}getCurrentResult(){return D(this,Ri)}reset(){var n;(n=D(this,Dn))==null||n.removeObserver(this),ve(this,Dn,void 0),Ve(this,Ks,ih).call(this),Ve(this,Ks,Tv).call(this)}mutate(n,r){var s;return ve(this,Ws,r),(s=D(this,Dn))==null||s.removeObserver(this),ve(this,Dn,D(this,ji).getMutationCache().build(D(this,ji),this.options)),D(this,Dn).addObserver(this),D(this,Dn).execute(n)}},ji=new WeakMap,Ri=new WeakMap,Dn=new WeakMap,Ws=new WeakMap,Ks=new WeakSet,ih=function(){var r;const n=((r=D(this,Dn))==null?void 0:r.state)??Ak();ve(this,Ri,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Tv=function(n){qt.batch(()=>{var r,s,i,a,l,c,h,f;if(D(this,Ws)&&this.hasListeners()){const m=D(this,Ri).variables,v=D(this,Ri).context;(n==null?void 0:n.type)==="success"?((s=(r=D(this,Ws)).onSuccess)==null||s.call(r,n.data,m,v),(a=(i=D(this,Ws)).onSettled)==null||a.call(i,n.data,null,m,v)):(n==null?void 0:n.type)==="error"&&((c=(l=D(this,Ws)).onError)==null||c.call(l,n.error,m,v),(f=(h=D(this,Ws)).onSettled)==null||f.call(h,void 0,n.error,m,v))}this.listeners.forEach(m=>{m(D(this,Ri))})})},K1),Dk=g.createContext(void 0),jl=e=>{const t=g.useContext(Dk);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},l5=({client:e,children:t})=>(g.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),d.jsx(Dk.Provider,{value:e,children:t})),Fk=g.createContext(!1),c5=()=>g.useContext(Fk);Fk.Provider;function u5(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var d5=g.createContext(u5()),h5=()=>g.useContext(d5),f5=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},p5=e=>{g.useEffect(()=>{e.clearReset()},[e])},m5=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||Tk(n,[e.error,r])),g5=e=>{if(e.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...r)=>t(n(...r)):t(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},v5=(e,t)=>e.isLoading&&e.isFetching&&!t,y5=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,ob=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function x5(e,t,n){var m,v,y,S,w;const r=c5(),s=h5(),i=jl(),a=i.defaultQueryOptions(e);(v=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||v.call(m,a),a._optimisticResults=r?"isRestoring":"optimistic",g5(a),f5(a,s),p5(s);const l=!i.getQueryCache().get(a.queryHash),[c]=g.useState(()=>new t(i,a)),h=c.getOptimisticResult(a),f=!r&&e.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(b=>{const E=f?c.subscribe(qt.batchCalls(b)):En;return c.updateResult(),E},[c,f]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),g.useEffect(()=>{c.setOptions(a)},[a,c]),y5(a,h))throw ob(a,c,s);if(m5({result:h,errorResetBoundary:s,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw h.error;if((S=(y=i.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||S.call(y,a,h),a.experimental_prefetchInRender&&!Yo&&v5(h,r)){const b=l?ob(a,c,s):(w=i.getQueryCache().get(a.queryHash))==null?void 0:w.promise;b==null||b.catch(En).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?h:c.trackResult(h)}function Oc(e,t){return x5(e,s5)}function Ic(e,t){const n=jl(),[r]=g.useState(()=>new a5(n,e));g.useEffect(()=>{r.setOptions(e)},[r,e]);const s=g.useSyncExternalStore(g.useCallback(a=>r.subscribe(qt.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=g.useCallback((a,l)=>{r.mutate(a,l).catch(En)},[r]);if(s.error&&Tk(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function au(){return au=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},au.apply(this,arguments)}var Ii;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ii||(Ii={}));const ab="popstate";function w5(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:a,hash:l}=r.location;return jv("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Uk(s)}return b5(t,n,null,e)}function Bt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function $k(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _5(){return Math.random().toString(36).substr(2,8)}function lb(e,t){return{usr:e.state,key:e.key,idx:t}}function jv(e,t,n,r){return n===void 0&&(n=null),au({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Rl(t):t,{state:n,key:t&&t.key||r||_5()})}function Uk(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Rl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function b5(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=Ii.Pop,c=null,h=f();h==null&&(h=0,a.replaceState(au({},a.state,{idx:h}),""));function f(){return(a.state||{idx:null}).idx}function m(){l=Ii.Pop;let b=f(),E=b==null?null:b-h;h=b,c&&c({action:l,location:w.location,delta:E})}function v(b,E){l=Ii.Push;let _=jv(w.location,b,E);h=f()+1;let C=lb(_,h),P=w.createHref(_);try{a.pushState(C,"",P)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(P)}i&&c&&c({action:l,location:w.location,delta:1})}function y(b,E){l=Ii.Replace;let _=jv(w.location,b,E);h=f();let C=lb(_,h),P=w.createHref(_);a.replaceState(C,"",P),i&&c&&c({action:l,location:w.location,delta:0})}function S(b){let E=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof b=="string"?b:Uk(b);return _=_.replace(/ $/,"%20"),Bt(E,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,E)}let w={get action(){return l},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(ab,m),c=b,()=>{s.removeEventListener(ab,m),c=null}},createHref(b){return t(s,b)},createURL:S,encodeLocation(b){let E=S(b);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:y,go(b){return a.go(b)}};return w}var cb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(cb||(cb={}));function S5(e,t,n){return n===void 0&&(n="/"),E5(e,t,n,!1)}function E5(e,t,n,r){let s=typeof t=="string"?Rl(t):t,i=Wk(s.pathname||"/",n);if(i==null)return null;let a=zk(e);C5(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let h=L5(i);l=I5(a[c],h,r)}return l}function zk(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(Bt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let h=zo([r,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(Bt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),zk(i.children,t,f,h)),!(i.path==null&&!i.index)&&t.push({path:h,score:M5(h,i.index),routesMeta:f})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of Bk(i.path))s(i,a,c)}),t}function Bk(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=Bk(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function C5(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:O5(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const k5=/^:[\w-]+$/,P5=3,N5=2,T5=1,j5=10,R5=-2,ub=e=>e==="*";function M5(e,t){let n=e.split("/"),r=n.length;return n.some(ub)&&(r+=R5),t&&(r+=N5),n.filter(s=>!ub(s)).reduce((s,i)=>s+(k5.test(i)?P5:i===""?T5:j5),r)}function O5(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function I5(e,t,n){let{routesMeta:r}=e,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],h=l===r.length-1,f=i==="/"?t:t.slice(i.length)||"/",m=db({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},f),v=c.route;if(!m&&h&&n&&!r[r.length-1].route.index&&(m=db({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:zo([i,m.pathname]),pathnameBase:U5(zo([i,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(i=zo([i,m.pathnameBase]))}return a}function db(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=A5(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((h,f,m)=>{let{paramName:v,isOptional:y}=f;if(v==="*"){let w=l[m]||"";a=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const S=l[m];return y&&!S?h[v]=void 0:h[v]=(S||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:a,pattern:e}}function A5(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),$k(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function L5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return $k(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Wk(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function D5(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Rl(e):e;return{pathname:n?n.startsWith("/")?n:F5(n,t):t,search:z5(r),hash:B5(s)}}function F5(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Nm(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $5(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Hk(e,t){let n=$5(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Vk(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Rl(e):(s=au({},e),Bt(!s.pathname||!s.pathname.includes("?"),Nm("?","pathname","search",s)),Bt(!s.pathname||!s.pathname.includes("#"),Nm("#","pathname","hash",s)),Bt(!s.search||!s.search.includes("#"),Nm("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let m=t.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),m-=1;s.pathname=v.join("/")}l=m>=0?t[m]:"/"}let c=D5(s,l),h=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||f)&&(c.pathname+="/"),c}const zo=e=>e.join("/").replace(/\/\/+/g,"/"),U5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,B5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function W5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const qk=["post","put","patch","delete"];new Set(qk);const H5=["get",...qk];new Set(H5);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lu(){return lu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lu.apply(this,arguments)}const M0=g.createContext(null),V5=g.createContext(null),Tu=g.createContext(null),Zf=g.createContext(null),so=g.createContext({outlet:null,matches:[],isDataRoute:!1}),Gk=g.createContext(null);function ju(){return g.useContext(Zf)!=null}function sa(){return ju()||Bt(!1),g.useContext(Zf).location}function Yk(e){g.useContext(Tu).static||g.useLayoutEffect(e)}function ts(){let{isDataRoute:e}=g.useContext(so);return e?iF():q5()}function q5(){ju()||Bt(!1);let e=g.useContext(M0),{basename:t,future:n,navigator:r}=g.useContext(Tu),{matches:s}=g.useContext(so),{pathname:i}=sa(),a=JSON.stringify(Hk(s,n.v7_relativeSplatPath)),l=g.useRef(!1);return Yk(()=>{l.current=!0}),g.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let m=Vk(h,JSON.parse(a),i,f.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:zo([t,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[t,r,a,i,e])}function G5(){let{matches:e}=g.useContext(so),t=e[e.length-1];return t?t.params:{}}function Y5(e,t){return Z5(e,t)}function Z5(e,t,n,r){ju()||Bt(!1);let{navigator:s}=g.useContext(Tu),{matches:i}=g.useContext(so),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let h=sa(),f;if(t){var m;let b=typeof t=="string"?Rl(t):t;c==="/"||(m=b.pathname)!=null&&m.startsWith(c)||Bt(!1),f=b}else f=h;let v=f.pathname||"/",y=v;if(c!=="/"){let b=c.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(b.length).join("/")}let S=S5(e,{pathname:y}),w=eF(S&&S.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:zo([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:zo([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return t&&w?g.createElement(Zf.Provider,{value:{location:lu({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ii.Pop}},w):w}function K5(){let e=sF(),t=W5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:s},n):null,null)}const Q5=g.createElement(K5,null);class X5 extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?g.createElement(so.Provider,{value:this.props.routeContext},g.createElement(Gk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function J5(e){let{routeContext:t,match:n,children:r}=e,s=g.useContext(M0);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(so.Provider,{value:t},r)}function eF(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||Bt(!1),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let m=a[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=f),m.route.id){let{loaderData:v,errors:y}=n,S=m.route.loader&&v[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||S){c=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((f,m,v)=>{let y,S=!1,w=null,b=null;n&&(y=l&&m.route.id?l[m.route.id]:void 0,w=m.route.errorElement||Q5,c&&(h<0&&v===0?(S=!0,b=null):h===v&&(S=!0,b=m.route.hydrateFallbackElement||null)));let E=t.concat(a.slice(0,v+1)),_=()=>{let C;return y?C=w:S?C=b:m.route.Component?C=g.createElement(m.route.Component,null):m.route.element?C=m.route.element:C=f,g.createElement(J5,{match:m,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:C})};return n&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?g.createElement(X5,{location:n.location,revalidation:n.revalidation,component:w,error:y,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):_()},null)}var Zk=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Zk||{}),Hh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Hh||{});function tF(e){let t=g.useContext(M0);return t||Bt(!1),t}function nF(e){let t=g.useContext(V5);return t||Bt(!1),t}function rF(e){let t=g.useContext(so);return t||Bt(!1),t}function Kk(e){let t=rF(),n=t.matches[t.matches.length-1];return n.route.id||Bt(!1),n.route.id}function sF(){var e;let t=g.useContext(Gk),n=nF(Hh.UseRouteError),r=Kk(Hh.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function iF(){let{router:e}=tF(Zk.UseNavigateStable),t=Kk(Hh.UseNavigateStable),n=g.useRef(!1);return Yk(()=>{n.current=!0}),g.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,lu({fromRouteId:t},i)))},[e,t])}function oF(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function aF(e){let{to:t,replace:n,state:r,relative:s}=e;ju()||Bt(!1);let{future:i,static:a}=g.useContext(Tu),{matches:l}=g.useContext(so),{pathname:c}=sa(),h=ts(),f=Vk(t,Hk(l,i.v7_relativeSplatPath),c,s==="path"),m=JSON.stringify(f);return g.useEffect(()=>h(JSON.parse(m),{replace:n,state:r,relative:s}),[h,m,s,n,r]),null}function An(e){Bt(!1)}function lF(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Ii.Pop,navigator:i,static:a=!1,future:l}=e;ju()&&Bt(!1);let c=t.replace(/^\/*/,"/"),h=g.useMemo(()=>({basename:c,navigator:i,static:a,future:lu({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=Rl(r));let{pathname:f="/",search:m="",hash:v="",state:y=null,key:S="default"}=r,w=g.useMemo(()=>{let b=Wk(f,c);return b==null?null:{location:{pathname:b,search:m,hash:v,state:y,key:S},navigationType:s}},[c,f,m,v,y,S,s]);return w==null?null:g.createElement(Tu.Provider,{value:h},g.createElement(Zf.Provider,{children:n,value:w}))}function cF(e){let{children:t,location:n}=e;return Y5(Rv(t),n)}new Promise(()=>{});function Rv(e,t){t===void 0&&(t=[]);let n=[];return g.Children.forEach(e,(r,s)=>{if(!g.isValidElement(r))return;let i=[...t,s];if(r.type===g.Fragment){n.push.apply(n,Rv(r.props.children,i));return}r.type!==An&&Bt(!1),!r.props.index||!r.props.children||Bt(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Rv(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const uF="6";try{window.__reactRouterVersion=uF}catch{}const dF="startTransition",hb=gy[dF];function hF(e){let{basename:t,children:n,future:r,window:s}=e,i=g.useRef();i.current==null&&(i.current=w5({window:s,v5Compat:!0}));let a=i.current,[l,c]=g.useState({action:a.action,location:a.location}),{v7_startTransition:h}=r||{},f=g.useCallback(m=>{h&&hb?hb(()=>c(m)):c(m)},[c,h]);return g.useLayoutEffect(()=>a.listen(f),[a,f]),g.useEffect(()=>oF(r),[r]),g.createElement(lF,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}var fb;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(fb||(fb={}));var pb;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(pb||(pb={}));const fF=()=>{const e=sa();return g.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),d.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),d.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),d.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},Qk=g.createContext(void 0),Rr=()=>{const e=g.useContext(Qk);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Mv=Uf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Le=g.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},i)=>{const a=r?HI:"button";return d.jsx(a,{className:Te(Mv({variant:t,size:n,className:e})),ref:i,...s})});Le.displayName="Button";const Xi="/assets/couch1-BGAlCsaN.jpg",Vh="/assets/couch2-2vc5v2hu.jpg",qh="/assets/couch3-CguXBYH7.jpg",Gh="/assets/couch4-BALJ1tc6.jpg",Yh="/assets/couch5-BOhJO1Bo.jpg",Zh="/assets/couch6-C3DYZNsN.jpg";function nt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ar(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Cn(e,t){const n=nt(e);return isNaN(t)?ar(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Jr(e,t){const n=nt(e);if(isNaN(t))return ar(e,NaN);if(!t)return n;const r=n.getDate(),s=ar(e,n.getTime());s.setMonth(n.getMonth()+t+1,0);const i=s.getDate();return r>=i?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const O0=6048e5,pF=864e5;let mF={};function Ru(){return mF}function Cs(e,t){var l,c,h,f;const n=Ru(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,s=nt(e),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Ko(e){return Cs(e,{weekStartsOn:1})}function Xk(e){const t=nt(e),n=t.getFullYear(),r=ar(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Ko(r),i=ar(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const a=Ko(i);return t.getTime()>=s.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function mn(e){const t=nt(e);return t.setHours(0,0,0,0),t}function Kh(e){const t=nt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function kr(e,t){const n=mn(e),r=mn(t),s=+n-Kh(n),i=+r-Kh(r);return Math.round((s-i)/pF)}function gF(e){const t=Xk(e),n=ar(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Ko(n)}function Ov(e,t){const n=t*7;return Cn(e,n)}function vF(e,t){return Jr(e,t*12)}function yF(e){let t;return e.forEach(function(n){const r=nt(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function xF(e){let t;return e.forEach(n=>{const r=nt(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function Bn(e,t){const n=mn(e),r=mn(t);return+n==+r}function I0(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function wF(e){if(!I0(e)&&typeof e!="number")return!1;const t=nt(e);return!isNaN(Number(t))}function cu(e,t){const n=nt(e),r=nt(t),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function _F(e,t,n){const r=Cs(e,n),s=Cs(t,n),i=+r-Kh(r),a=+s-Kh(s);return Math.round((i-a)/O0)}function A0(e){const t=nt(e);return t.setHours(23,59,59,999),t}function L0(e){const t=nt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function qn(e){const t=nt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Jk(e){const t=nt(e),n=ar(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function D0(e,t){var l,c,h,f;const n=Ru(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,s=nt(e),i=s.getDay(),a=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+a),s.setHours(23,59,59,999),s}function eP(e){return D0(e,{weekStartsOn:1})}const bF={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},SF=(e,t,n)=>{let r;const s=bF[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Tm(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const EF={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},CF={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},kF={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},PF={date:Tm({formats:EF,defaultWidth:"full"}),time:Tm({formats:CF,defaultWidth:"full"}),dateTime:Tm({formats:kF,defaultWidth:"full"})},NF={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},TF=(e,t,n,r)=>NF[e];function lc(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):a;s=e.formattingValues[l]||e.formattingValues[a]}else{const a=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[a]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const jF={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},RF={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},MF={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},OF={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},IF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},AF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},LF=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},DF={ordinalNumber:LF,era:lc({values:jF,defaultWidth:"wide"}),quarter:lc({values:RF,defaultWidth:"wide",argumentCallback:e=>e-1}),month:lc({values:MF,defaultWidth:"wide"}),day:lc({values:OF,defaultWidth:"wide"}),dayPeriod:lc({values:IF,defaultWidth:"wide",formattingValues:AF,defaultFormattingWidth:"wide"})};function cc(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const a=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?$F(l,m=>m.test(a)):FF(l,m=>m.test(a));let h;h=e.valueCallback?e.valueCallback(c):c,h=n.valueCallback?n.valueCallback(h):h;const f=t.slice(a.length);return{value:h,rest:f}}}function FF(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function $F(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function UF(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],i=t.match(e.parsePattern);if(!i)return null;let a=e.valueCallback?e.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const l=t.slice(s.length);return{value:a,rest:l}}}const zF=/^(\d+)(th|st|nd|rd)?/i,BF=/\d+/i,WF={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},HF={any:[/^b/i,/^(a|c)/i]},VF={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qF={any:[/1/i,/2/i,/3/i,/4/i]},GF={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},YF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ZF={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},KF={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},QF={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},XF={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},JF={ordinalNumber:UF({matchPattern:zF,parsePattern:BF,valueCallback:e=>parseInt(e,10)}),era:cc({matchPatterns:WF,defaultMatchWidth:"wide",parsePatterns:HF,defaultParseWidth:"any"}),quarter:cc({matchPatterns:VF,defaultMatchWidth:"wide",parsePatterns:qF,defaultParseWidth:"any",valueCallback:e=>e+1}),month:cc({matchPatterns:GF,defaultMatchWidth:"wide",parsePatterns:YF,defaultParseWidth:"any"}),day:cc({matchPatterns:ZF,defaultMatchWidth:"wide",parsePatterns:KF,defaultParseWidth:"any"}),dayPeriod:cc({matchPatterns:QF,defaultMatchWidth:"any",parsePatterns:XF,defaultParseWidth:"any"})},tP={code:"en-US",formatDistance:SF,formatLong:PF,formatRelative:TF,localize:DF,match:JF,options:{weekStartsOn:0,firstWeekContainsDate:1}};function e4(e){const t=nt(e);return kr(t,Jk(t))+1}function nP(e){const t=nt(e),n=+Ko(t)-+gF(t);return Math.round(n/O0)+1}function rP(e,t){var f,m,v,y;const n=nt(e),r=n.getFullYear(),s=Ru(),i=(t==null?void 0:t.firstWeekContainsDate)??((m=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((y=(v=s.locale)==null?void 0:v.options)==null?void 0:y.firstWeekContainsDate)??1,a=ar(e,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const l=Cs(a,t),c=ar(e,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const h=Cs(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=h.getTime()?r:r-1}function t4(e,t){var l,c,h,f;const n=Ru(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,s=rP(e,t),i=ar(e,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Cs(i,t)}function sP(e,t){const n=nt(e),r=+Cs(n,t)-+t4(n,t);return Math.round(r/O0)+1}function lt(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const hi={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return lt(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):lt(n+1,2)},d(e,t){return lt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return lt(e.getHours()%12||12,t.length)},H(e,t){return lt(e.getHours(),t.length)},m(e,t){return lt(e.getMinutes(),t.length)},s(e,t){return lt(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return lt(s,t.length)}},ga={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},mb={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return hi.y(e,t)},Y:function(e,t,n,r){const s=rP(e,r),i=s>0?s:1-s;if(t==="YY"){const a=i%100;return lt(a,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):lt(i,t.length)},R:function(e,t){const n=Xk(e);return lt(n,t.length)},u:function(e,t){const n=e.getFullYear();return lt(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return lt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return lt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return hi.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return lt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=sP(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):lt(s,t.length)},I:function(e,t,n){const r=nP(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):lt(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):hi.d(e,t)},D:function(e,t,n){const r=e4(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):lt(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return lt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return lt(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return lt(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=ga.noon:r===0?s=ga.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=ga.evening:r>=12?s=ga.afternoon:r>=4?s=ga.morning:s=ga.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return hi.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):hi.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):lt(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):lt(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):hi.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):hi.s(e,t)},S:function(e,t){return hi.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return vb(r);case"XXXX":case"XX":return _o(r);case"XXXXX":case"XXX":default:return _o(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return vb(r);case"xxxx":case"xx":return _o(r);case"xxxxx":case"xxx":default:return _o(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+gb(r,":");case"OOOO":default:return"GMT"+_o(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+gb(r,":");case"zzzz":default:return"GMT"+_o(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return lt(r,t.length)},T:function(e,t,n){const r=e.getTime();return lt(r,t.length)}};function gb(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+t+lt(i,2)}function vb(e,t){return e%60===0?(e>0?"-":"+")+lt(Math.abs(e)/60,2):_o(e,t)}function _o(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=lt(Math.trunc(r/60),2),i=lt(r%60,2);return n+s+t+i}const yb=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},iP=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},n4=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return yb(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",yb(r,t)).replace("{{time}}",iP(s,t))},r4={p:iP,P:n4},s4=/^D+$/,i4=/^Y+$/,o4=["D","DD","YY","YYYY"];function a4(e){return s4.test(e)}function l4(e){return i4.test(e)}function c4(e,t,n){const r=u4(e,t,n);if(console.warn(r),o4.includes(e))throw new RangeError(r)}function u4(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const d4=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,h4=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,f4=/^'([^]*?)'?$/,p4=/''/g,m4=/[a-zA-Z]/;function rt(e,t,n){var f,m,v,y,S,w,b,E;const r=Ru(),s=(n==null?void 0:n.locale)??r.locale??tP,i=(n==null?void 0:n.firstWeekContainsDate)??((m=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((y=(v=r.locale)==null?void 0:v.options)==null?void 0:y.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((w=(S=n==null?void 0:n.locale)==null?void 0:S.options)==null?void 0:w.weekStartsOn)??r.weekStartsOn??((E=(b=r.locale)==null?void 0:b.options)==null?void 0:E.weekStartsOn)??0,l=nt(e);if(!wF(l))throw new RangeError("Invalid time value");let c=t.match(h4).map(_=>{const C=_[0];if(C==="p"||C==="P"){const P=r4[C];return P(_,s.formatLong)}return _}).join("").match(d4).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const C=_[0];if(C==="'")return{isToken:!1,value:g4(_)};if(mb[C])return{isToken:!0,value:_};if(C.match(m4))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:_}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const h={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return c.map(_=>{if(!_.isToken)return _.value;const C=_.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&l4(C)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&a4(C))&&c4(C,t,String(e));const P=mb[C[0]];return P(l,C,s.localize,h)}).join("")}function g4(e){const t=e.match(f4);return t?t[1].replace(p4,"'"):e}function v4(e){const t=nt(e),n=t.getFullYear(),r=t.getMonth(),s=ar(e,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function y4(e){return Math.trunc(+nt(e)/1e3)}function x4(e){const t=nt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function w4(e,t){return _F(x4(e),qn(e),t)+1}function uu(e,t){const n=nt(e),r=nt(t);return n.getTime()>r.getTime()}function Qo(e,t){const n=nt(e),r=nt(t);return+n<+r}function F0(e,t){const n=nt(e),r=nt(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function _4(e,t){const n=nt(e),r=nt(t);return n.getFullYear()===r.getFullYear()}function jm(e,t){return Cn(e,-t)}function Rm(e,t){const n=nt(e),r=n.getFullYear(),s=n.getDate(),i=ar(e,0);i.setFullYear(r,t,15),i.setHours(0,0,0,0);const a=v4(i);return n.setMonth(t,Math.min(s,a)),n}function xb(e,t){const n=nt(e);return isNaN(+n)?ar(e,NaN):(n.setFullYear(t),n)}var Ae=function(){return Ae=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ae.apply(this,arguments)};function b4(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function oP(e,t,n){for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function Mu(e){return e.mode==="multiple"}function Ou(e){return e.mode==="range"}function Kf(e){return e.mode==="single"}var S4={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function E4(e,t){return rt(e,"LLLL y",t)}function C4(e,t){return rt(e,"d",t)}function k4(e,t){return rt(e,"LLLL",t)}function P4(e){return"".concat(e)}function N4(e,t){return rt(e,"cccccc",t)}function T4(e,t){return rt(e,"yyyy",t)}var j4=Object.freeze({__proto__:null,formatCaption:E4,formatDay:C4,formatMonthCaption:k4,formatWeekNumber:P4,formatWeekdayName:N4,formatYearCaption:T4}),R4=function(e,t,n){return rt(e,"do MMMM (EEEE)",n)},M4=function(){return"Month: "},O4=function(){return"Go to next month"},I4=function(){return"Go to previous month"},A4=function(e,t){return rt(e,"cccc",t)},L4=function(e){return"Week n. ".concat(e)},D4=function(){return"Year: "},F4=Object.freeze({__proto__:null,labelDay:R4,labelMonthDropdown:M4,labelNext:O4,labelPrevious:I4,labelWeekNumber:L4,labelWeekday:A4,labelYearDropdown:D4});function $4(){var e="buttons",t=S4,n=tP,r={},s={},i=1,a={},l=new Date;return{captionLayout:e,classNames:t,formatters:j4,labels:F4,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:i,styles:a,today:l,mode:"default"}}function U4(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,s=e.toMonth,i=e.fromDate,a=e.toDate;return r?i=qn(r):t&&(i=new Date(t,0,1)),s?a=L0(s):n&&(a=new Date(n,11,31)),{fromDate:i?mn(i):void 0,toDate:a?mn(a):void 0}}var aP=g.createContext(void 0);function z4(e){var t,n=e.initialProps,r=$4(),s=U4(n),i=s.fromDate,a=s.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!i||!a)&&(l="buttons");var c;(Kf(n)||Mu(n)||Ou(n))&&(c=n.onSelect);var h=Ae(Ae(Ae({},r),n),{captionLayout:l,classNames:Ae(Ae({},r.classNames),n.classNames),components:Ae({},n.components),formatters:Ae(Ae({},r.formatters),n.formatters),fromDate:i,labels:Ae(Ae({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Ae(Ae({},r.modifiers),n.modifiers),modifiersClassNames:Ae(Ae({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Ae(Ae({},r.styles),n.styles),toDate:a});return d.jsx(aP.Provider,{value:h,children:e.children})}function yt(){var e=g.useContext(aP);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function lP(e){var t=yt(),n=t.locale,r=t.classNames,s=t.styles,i=t.formatters.formatCaption;return d.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:n})})}function B4(e){return d.jsx("svg",Ae({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:d.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function cP(e){var t,n,r=e.onChange,s=e.value,i=e.children,a=e.caption,l=e.className,c=e.style,h=yt(),f=(n=(t=h.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:B4;return d.jsxs("div",{className:l,style:c,children:[d.jsx("span",{className:h.classNames.vhidden,children:e["aria-label"]}),d.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:h.classNames.dropdown,style:h.styles.dropdown,value:s,onChange:r,children:i}),d.jsxs("div",{className:h.classNames.caption_label,style:h.styles.caption_label,"aria-hidden":"true",children:[a,d.jsx(f,{className:h.classNames.dropdown_icon,style:h.styles.dropdown_icon})]})]})}function W4(e){var t,n=yt(),r=n.fromDate,s=n.toDate,i=n.styles,a=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,h=n.components,f=n.labels.labelMonthDropdown;if(!r)return d.jsx(d.Fragment,{});if(!s)return d.jsx(d.Fragment,{});var m=[];if(_4(r,s))for(var v=qn(r),y=r.getMonth();y<=s.getMonth();y++)m.push(Rm(v,y));else for(var v=qn(new Date),y=0;y<=11;y++)m.push(Rm(v,y));var S=function(b){var E=Number(b.target.value),_=Rm(qn(e.displayMonth),E);e.onChange(_)},w=(t=h==null?void 0:h.Dropdown)!==null&&t!==void 0?t:cP;return d.jsx(w,{name:"months","aria-label":f(),className:c.dropdown_month,style:i.dropdown_month,onChange:S,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:a}),children:m.map(function(b){return d.jsx("option",{value:b.getMonth(),children:l(b,{locale:a})},b.getMonth())})})}function H4(e){var t,n=e.displayMonth,r=yt(),s=r.fromDate,i=r.toDate,a=r.locale,l=r.styles,c=r.classNames,h=r.components,f=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,v=[];if(!s)return d.jsx(d.Fragment,{});if(!i)return d.jsx(d.Fragment,{});for(var y=s.getFullYear(),S=i.getFullYear(),w=y;w<=S;w++)v.push(xb(Jk(new Date),w));var b=function(_){var C=xb(qn(n),Number(_.target.value));e.onChange(C)},E=(t=h==null?void 0:h.Dropdown)!==null&&t!==void 0?t:cP;return d.jsx(E,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:b,value:n.getFullYear(),caption:f(n,{locale:a}),children:v.map(function(_){return d.jsx("option",{value:_.getFullYear(),children:f(_,{locale:a})},_.getFullYear())})})}function V4(e,t){var n=g.useState(e),r=n[0],s=n[1],i=t===void 0?r:t;return[i,s]}function q4(e){var t=e.month,n=e.defaultMonth,r=e.today,s=t||n||r||new Date,i=e.toDate,a=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(i&&cu(i,s)<0){var h=-1*(c-1);s=Jr(i,h)}return a&&cu(s,a)<0&&(s=a),qn(s)}function G4(){var e=yt(),t=q4(e),n=V4(t,e.month),r=n[0],s=n[1],i=function(a){var l;if(!e.disableNavigation){var c=qn(a);s(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,i]}function Y4(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,s=qn(e),i=qn(Jr(s,r)),a=cu(i,s),l=[],c=0;c<a;c++){var h=Jr(s,c);l.push(h)}return n&&(l=l.reverse()),l}function Z4(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,s=t.numberOfMonths,i=s===void 0?1:s,a=r?i:1,l=qn(e);if(!n)return Jr(l,a);var c=cu(n,e);if(!(c<i))return Jr(l,a)}}function K4(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,s=t.numberOfMonths,i=s===void 0?1:s,a=r?i:1,l=qn(e);if(!n)return Jr(l,-a);var c=cu(l,n);if(!(c<=0))return Jr(l,-a)}}var uP=g.createContext(void 0);function Q4(e){var t=yt(),n=G4(),r=n[0],s=n[1],i=Y4(r,t),a=Z4(r,t),l=K4(r,t),c=function(m){return i.some(function(v){return F0(m,v)})},h=function(m,v){c(m)||(v&&Qo(m,v)?s(Jr(m,1+t.numberOfMonths*-1)):s(m))},f={currentMonth:r,displayMonths:i,goToMonth:s,goToDate:h,previousMonth:l,nextMonth:a,isDateDisplayed:c};return d.jsx(uP.Provider,{value:f,children:e.children})}function Iu(){var e=g.useContext(uP);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function wb(e){var t,n=yt(),r=n.classNames,s=n.styles,i=n.components,a=Iu().goToMonth,l=function(f){a(Jr(f,e.displayIndex?-e.displayIndex:0))},c=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:lP,h=d.jsx(c,{id:e.id,displayMonth:e.displayMonth});return d.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[d.jsx("div",{className:r.vhidden,children:h}),d.jsx(W4,{onChange:l,displayMonth:e.displayMonth}),d.jsx(H4,{onChange:l,displayMonth:e.displayMonth})]})}function X4(e){return d.jsx("svg",Ae({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:d.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function J4(e){return d.jsx("svg",Ae({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:d.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Qh=g.forwardRef(function(e,t){var n=yt(),r=n.classNames,s=n.styles,i=[r.button_reset,r.button];e.className&&i.push(e.className);var a=i.join(" "),l=Ae(Ae({},s.button_reset),s.button);return e.style&&Object.assign(l,e.style),d.jsx("button",Ae({},e,{ref:t,type:"button",className:a,style:l}))});function e$(e){var t,n,r=yt(),s=r.dir,i=r.locale,a=r.classNames,l=r.styles,c=r.labels,h=c.labelPrevious,f=c.labelNext,m=r.components;if(!e.nextMonth&&!e.previousMonth)return d.jsx(d.Fragment,{});var v=h(e.previousMonth,{locale:i}),y=[a.nav_button,a.nav_button_previous].join(" "),S=f(e.nextMonth,{locale:i}),w=[a.nav_button,a.nav_button_next].join(" "),b=(t=m==null?void 0:m.IconRight)!==null&&t!==void 0?t:J4,E=(n=m==null?void 0:m.IconLeft)!==null&&n!==void 0?n:X4;return d.jsxs("div",{className:a.nav,style:l.nav,children:[!e.hidePrevious&&d.jsx(Qh,{name:"previous-month","aria-label":v,className:y,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:s==="rtl"?d.jsx(b,{className:a.nav_icon,style:l.nav_icon}):d.jsx(E,{className:a.nav_icon,style:l.nav_icon})}),!e.hideNext&&d.jsx(Qh,{name:"next-month","aria-label":S,className:w,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:s==="rtl"?d.jsx(E,{className:a.nav_icon,style:l.nav_icon}):d.jsx(b,{className:a.nav_icon,style:l.nav_icon})})]})}function _b(e){var t=yt().numberOfMonths,n=Iu(),r=n.previousMonth,s=n.nextMonth,i=n.goToMonth,a=n.displayMonths,l=a.findIndex(function(S){return F0(e.displayMonth,S)}),c=l===0,h=l===a.length-1,f=t>1&&(c||!h),m=t>1&&(h||!c),v=function(){r&&i(r)},y=function(){s&&i(s)};return d.jsx(e$,{displayMonth:e.displayMonth,hideNext:f,hidePrevious:m,nextMonth:s,previousMonth:r,onPreviousClick:v,onNextClick:y})}function t$(e){var t,n=yt(),r=n.classNames,s=n.disableNavigation,i=n.styles,a=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:lP,h;return s?h=d.jsx(c,{id:e.id,displayMonth:e.displayMonth}):a==="dropdown"?h=d.jsx(wb,{displayMonth:e.displayMonth,id:e.id}):a==="dropdown-buttons"?h=d.jsxs(d.Fragment,{children:[d.jsx(wb,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),d.jsx(_b,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):h=d.jsxs(d.Fragment,{children:[d.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),d.jsx(_b,{displayMonth:e.displayMonth,id:e.id})]}),d.jsx("div",{className:r.caption,style:i.caption,children:h})}function n$(e){var t=yt(),n=t.footer,r=t.styles,s=t.classNames.tfoot;return n?d.jsx("tfoot",{className:s,style:r.tfoot,children:d.jsx("tr",{children:d.jsx("td",{colSpan:8,children:n})})}):d.jsx(d.Fragment,{})}function r$(e,t,n){for(var r=n?Ko(new Date):Cs(new Date,{locale:e,weekStartsOn:t}),s=[],i=0;i<7;i++){var a=Cn(r,i);s.push(a)}return s}function s$(){var e=yt(),t=e.classNames,n=e.styles,r=e.showWeekNumber,s=e.locale,i=e.weekStartsOn,a=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,h=r$(s,i,a);return d.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&d.jsx("td",{style:n.head_cell,className:t.head_cell}),h.map(function(f,m){return d.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(f,{locale:s}),children:l(f,{locale:s})},m)})]})}function i$(){var e,t=yt(),n=t.classNames,r=t.styles,s=t.components,i=(e=s==null?void 0:s.HeadRow)!==null&&e!==void 0?e:s$;return d.jsx("thead",{style:r.head,className:n.head,children:d.jsx(i,{})})}function o$(e){var t=yt(),n=t.locale,r=t.formatters.formatDay;return d.jsx(d.Fragment,{children:r(e.date,{locale:n})})}var $0=g.createContext(void 0);function a$(e){if(!Mu(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return d.jsx($0.Provider,{value:t,children:e.children})}return d.jsx(l$,{initialProps:e.initialProps,children:e.children})}function l$(e){var t=e.initialProps,n=e.children,r=t.selected,s=t.min,i=t.max,a=function(h,f,m){var v,y;(v=t.onDayClick)===null||v===void 0||v.call(t,h,f,m);var S=!!(f.selected&&s&&(r==null?void 0:r.length)===s);if(!S){var w=!!(!f.selected&&i&&(r==null?void 0:r.length)===i);if(!w){var b=r?oP([],r):[];if(f.selected){var E=b.findIndex(function(_){return Bn(h,_)});b.splice(E,1)}else b.push(h);(y=t.onSelect)===null||y===void 0||y.call(t,b,h,f,m)}}},l={disabled:[]};r&&l.disabled.push(function(h){var f=i&&r.length>i-1,m=r.some(function(v){return Bn(v,h)});return!!(f&&!m)});var c={selected:r,onDayClick:a,modifiers:l};return d.jsx($0.Provider,{value:c,children:n})}function U0(){var e=g.useContext($0);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function c$(e,t){var n=t||{},r=n.from,s=n.to;return r&&s?Bn(s,e)&&Bn(r,e)?void 0:Bn(s,e)?{from:s,to:void 0}:Bn(r,e)?void 0:uu(r,e)?{from:e,to:s}:{from:r,to:e}:s?uu(e,s)?{from:s,to:e}:{from:e,to:s}:r?Qo(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var z0=g.createContext(void 0);function u$(e){if(!Ou(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return d.jsx(z0.Provider,{value:t,children:e.children})}return d.jsx(d$,{initialProps:e.initialProps,children:e.children})}function d$(e){var t=e.initialProps,n=e.children,r=t.selected,s=r||{},i=s.from,a=s.to,l=t.min,c=t.max,h=function(y,S,w){var b,E;(b=t.onDayClick)===null||b===void 0||b.call(t,y,S,w);var _=c$(y,r);(E=t.onSelect)===null||E===void 0||E.call(t,_,y,S,w)},f={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(f.range_start=[i],a?(f.range_end=[a],Bn(i,a)||(f.range_middle=[{after:i,before:a}])):f.range_end=[i]):a&&(f.range_start=[a],f.range_end=[a]),l&&(i&&!a&&f.disabled.push({after:jm(i,l-1),before:Cn(i,l-1)}),i&&a&&f.disabled.push({after:i,before:Cn(i,l-1)}),!i&&a&&f.disabled.push({after:jm(a,l-1),before:Cn(a,l-1)})),c){if(i&&!a&&(f.disabled.push({before:Cn(i,-c+1)}),f.disabled.push({after:Cn(i,c-1)})),i&&a){var m=kr(a,i)+1,v=c-m;f.disabled.push({before:jm(i,v)}),f.disabled.push({after:Cn(a,v)})}!i&&a&&(f.disabled.push({before:Cn(a,-c+1)}),f.disabled.push({after:Cn(a,c-1)}))}return d.jsx(z0.Provider,{value:{selected:r,onDayClick:h,modifiers:f},children:n})}function B0(){var e=g.useContext(z0);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function oh(e){return Array.isArray(e)?oP([],e):e!==void 0?[e]:[]}function h$(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],s=n[1];t[r]=oh(s)}),t}var es;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(es||(es={}));var f$=es.Selected,Ds=es.Disabled,p$=es.Hidden,m$=es.Today,Mm=es.RangeEnd,Om=es.RangeMiddle,Im=es.RangeStart,g$=es.Outside;function v$(e,t,n){var r,s=(r={},r[f$]=oh(e.selected),r[Ds]=oh(e.disabled),r[p$]=oh(e.hidden),r[m$]=[e.today],r[Mm]=[],r[Om]=[],r[Im]=[],r[g$]=[],r);return e.fromDate&&s[Ds].push({before:e.fromDate}),e.toDate&&s[Ds].push({after:e.toDate}),Mu(e)?s[Ds]=s[Ds].concat(t.modifiers[Ds]):Ou(e)&&(s[Ds]=s[Ds].concat(n.modifiers[Ds]),s[Im]=n.modifiers[Im],s[Om]=n.modifiers[Om],s[Mm]=n.modifiers[Mm]),s}var dP=g.createContext(void 0);function y$(e){var t=yt(),n=U0(),r=B0(),s=v$(t,n,r),i=h$(t.modifiers),a=Ae(Ae({},s),i);return d.jsx(dP.Provider,{value:a,children:e.children})}function hP(){var e=g.useContext(dP);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function x$(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function w$(e){return!!(e&&typeof e=="object"&&"from"in e)}function _$(e){return!!(e&&typeof e=="object"&&"after"in e)}function b$(e){return!!(e&&typeof e=="object"&&"before"in e)}function S$(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function E$(e,t){var n,r=t.from,s=t.to;if(r&&s){var i=kr(s,r)<0;i&&(n=[s,r],r=n[0],s=n[1]);var a=kr(e,r)>=0&&kr(s,e)>=0;return a}return s?Bn(s,e):r?Bn(r,e):!1}function C$(e){return I0(e)}function k$(e){return Array.isArray(e)&&e.every(I0)}function P$(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(C$(n))return Bn(e,n);if(k$(n))return n.includes(e);if(w$(n))return E$(e,n);if(S$(n))return n.dayOfWeek.includes(e.getDay());if(x$(n)){var r=kr(n.before,e),s=kr(n.after,e),i=r>0,a=s<0,l=uu(n.before,n.after);return l?a&&i:i||a}return _$(n)?kr(e,n.after)>0:b$(n)?kr(n.before,e)>0:typeof n=="function"?n(e):!1})}function W0(e,t,n){var r=Object.keys(t).reduce(function(i,a){var l=t[a];return P$(e,l)&&i.push(a),i},[]),s={};return r.forEach(function(i){return s[i]=!0}),n&&!F0(e,n)&&(s.outside=!0),s}function N$(e,t){for(var n=qn(e[0]),r=L0(e[e.length-1]),s,i,a=n;a<=r;){var l=W0(a,t),c=!l.disabled&&!l.hidden;if(!c){a=Cn(a,1);continue}if(l.selected)return a;l.today&&!i&&(i=a),s||(s=a),a=Cn(a,1)}return i||s}var T$=365;function fP(e,t){var n=t.moveBy,r=t.direction,s=t.context,i=t.modifiers,a=t.retry,l=a===void 0?{count:0,lastFocused:e}:a,c=s.weekStartsOn,h=s.fromDate,f=s.toDate,m=s.locale,v={day:Cn,week:Ov,month:Jr,year:vF,startOfWeek:function(b){return s.ISOWeek?Ko(b):Cs(b,{locale:m,weekStartsOn:c})},endOfWeek:function(b){return s.ISOWeek?eP(b):D0(b,{locale:m,weekStartsOn:c})}},y=v[n](e,r==="after"?1:-1);r==="before"&&h?y=yF([h,y]):r==="after"&&f&&(y=xF([f,y]));var S=!0;if(i){var w=W0(y,i);S=!w.disabled&&!w.hidden}return S?y:l.count>T$?l.lastFocused:fP(y,{moveBy:n,direction:r,context:s,modifiers:i,retry:Ae(Ae({},l),{count:l.count+1})})}var pP=g.createContext(void 0);function j$(e){var t=Iu(),n=hP(),r=g.useState(),s=r[0],i=r[1],a=g.useState(),l=a[0],c=a[1],h=N$(t.displayMonths,n),f=s??(l&&t.isDateDisplayed(l))?l:h,m=function(){c(s),i(void 0)},v=function(b){i(b)},y=yt(),S=function(b,E){if(s){var _=fP(s,{moveBy:b,direction:E,context:y,modifiers:n});Bn(s,_)||(t.goToDate(_,s),v(_))}},w={focusedDay:s,focusTarget:f,blur:m,focus:v,focusDayAfter:function(){return S("day","after")},focusDayBefore:function(){return S("day","before")},focusWeekAfter:function(){return S("week","after")},focusWeekBefore:function(){return S("week","before")},focusMonthBefore:function(){return S("month","before")},focusMonthAfter:function(){return S("month","after")},focusYearBefore:function(){return S("year","before")},focusYearAfter:function(){return S("year","after")},focusStartOfWeek:function(){return S("startOfWeek","before")},focusEndOfWeek:function(){return S("endOfWeek","after")}};return d.jsx(pP.Provider,{value:w,children:e.children})}function H0(){var e=g.useContext(pP);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function R$(e,t){var n=hP(),r=W0(e,n,t);return r}var V0=g.createContext(void 0);function M$(e){if(!Kf(e.initialProps)){var t={selected:void 0};return d.jsx(V0.Provider,{value:t,children:e.children})}return d.jsx(O$,{initialProps:e.initialProps,children:e.children})}function O$(e){var t=e.initialProps,n=e.children,r=function(i,a,l){var c,h,f;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,a,l),a.selected&&!t.required){(h=t.onSelect)===null||h===void 0||h.call(t,void 0,i,a,l);return}(f=t.onSelect)===null||f===void 0||f.call(t,i,i,a,l)},s={selected:t.selected,onDayClick:r};return d.jsx(V0.Provider,{value:s,children:n})}function mP(){var e=g.useContext(V0);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function I$(e,t){var n=yt(),r=mP(),s=U0(),i=B0(),a=H0(),l=a.focusDayAfter,c=a.focusDayBefore,h=a.focusWeekAfter,f=a.focusWeekBefore,m=a.blur,v=a.focus,y=a.focusMonthBefore,S=a.focusMonthAfter,w=a.focusYearBefore,b=a.focusYearAfter,E=a.focusStartOfWeek,_=a.focusEndOfWeek,C=function(Z){var j,U,Y,se;Kf(n)?(j=r.onDayClick)===null||j===void 0||j.call(r,e,t,Z):Mu(n)?(U=s.onDayClick)===null||U===void 0||U.call(s,e,t,Z):Ou(n)?(Y=i.onDayClick)===null||Y===void 0||Y.call(i,e,t,Z):(se=n.onDayClick)===null||se===void 0||se.call(n,e,t,Z)},P=function(Z){var j;v(e),(j=n.onDayFocus)===null||j===void 0||j.call(n,e,t,Z)},T=function(Z){var j;m(),(j=n.onDayBlur)===null||j===void 0||j.call(n,e,t,Z)},R=function(Z){var j;(j=n.onDayMouseEnter)===null||j===void 0||j.call(n,e,t,Z)},O=function(Z){var j;(j=n.onDayMouseLeave)===null||j===void 0||j.call(n,e,t,Z)},A=function(Z){var j;(j=n.onDayPointerEnter)===null||j===void 0||j.call(n,e,t,Z)},B=function(Z){var j;(j=n.onDayPointerLeave)===null||j===void 0||j.call(n,e,t,Z)},q=function(Z){var j;(j=n.onDayTouchCancel)===null||j===void 0||j.call(n,e,t,Z)},Q=function(Z){var j;(j=n.onDayTouchEnd)===null||j===void 0||j.call(n,e,t,Z)},W=function(Z){var j;(j=n.onDayTouchMove)===null||j===void 0||j.call(n,e,t,Z)},z=function(Z){var j;(j=n.onDayTouchStart)===null||j===void 0||j.call(n,e,t,Z)},M=function(Z){var j;(j=n.onDayKeyUp)===null||j===void 0||j.call(n,e,t,Z)},ee=function(Z){var j;switch(Z.key){case"ArrowLeft":Z.preventDefault(),Z.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":Z.preventDefault(),Z.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":Z.preventDefault(),Z.stopPropagation(),h();break;case"ArrowUp":Z.preventDefault(),Z.stopPropagation(),f();break;case"PageUp":Z.preventDefault(),Z.stopPropagation(),Z.shiftKey?w():y();break;case"PageDown":Z.preventDefault(),Z.stopPropagation(),Z.shiftKey?b():S();break;case"Home":Z.preventDefault(),Z.stopPropagation(),E();break;case"End":Z.preventDefault(),Z.stopPropagation(),_();break}(j=n.onDayKeyDown)===null||j===void 0||j.call(n,e,t,Z)},H={onClick:C,onFocus:P,onBlur:T,onKeyDown:ee,onKeyUp:M,onMouseEnter:R,onMouseLeave:O,onPointerEnter:A,onPointerLeave:B,onTouchCancel:q,onTouchEnd:Q,onTouchMove:W,onTouchStart:z};return H}function A$(){var e=yt(),t=mP(),n=U0(),r=B0(),s=Kf(e)?t.selected:Mu(e)?n.selected:Ou(e)?r.selected:void 0;return s}function L$(e){return Object.values(es).includes(e)}function D$(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var s=e.modifiersClassNames[r];if(s)n.push(s);else if(L$(r)){var i=e.classNames["day_".concat(r)];i&&n.push(i)}}),n}function F$(e,t){var n=Ae({},e.styles.day);return Object.keys(t).forEach(function(r){var s;n=Ae(Ae({},n),(s=e.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function $$(e,t,n){var r,s,i,a=yt(),l=H0(),c=R$(e,t),h=I$(e,c),f=A$(),m=!!(a.onDayClick||a.mode!=="default");g.useEffect(function(){var R;c.outside||l.focusedDay&&m&&Bn(l.focusedDay,e)&&((R=n.current)===null||R===void 0||R.focus())},[l.focusedDay,e,n,m,c.outside]);var v=D$(a,c).join(" "),y=F$(a,c),S=!!(c.outside&&!a.showOutsideDays||c.hidden),w=(i=(s=a.components)===null||s===void 0?void 0:s.DayContent)!==null&&i!==void 0?i:o$,b=d.jsx(w,{date:e,displayMonth:t,activeModifiers:c}),E={style:y,className:v,children:b,role:"gridcell"},_=l.focusTarget&&Bn(l.focusTarget,e)&&!c.outside,C=l.focusedDay&&Bn(l.focusedDay,e),P=Ae(Ae(Ae({},E),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=C||_?0:-1,r)),h),T={isButton:m,isHidden:S,activeModifiers:c,selectedDays:f,buttonProps:P,divProps:E};return T}function U$(e){var t=g.useRef(null),n=$$(e.date,e.displayMonth,t);return n.isHidden?d.jsx("div",{role:"gridcell"}):n.isButton?d.jsx(Qh,Ae({name:"day",ref:t},n.buttonProps)):d.jsx("div",Ae({},n.divProps))}function z$(e){var t=e.number,n=e.dates,r=yt(),s=r.onWeekNumberClick,i=r.styles,a=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,h=r.formatters.formatWeekNumber,f=h(Number(t),{locale:l});if(!s)return d.jsx("span",{className:a.weeknumber,style:i.weeknumber,children:f});var m=c(Number(t),{locale:l}),v=function(y){s(t,n,y)};return d.jsx(Qh,{name:"week-number","aria-label":m,className:a.weeknumber,style:i.weeknumber,onClick:v,children:f})}function B$(e){var t,n,r=yt(),s=r.styles,i=r.classNames,a=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:U$,h=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:z$,f;return a&&(f=d.jsx("td",{className:i.cell,style:s.cell,children:d.jsx(h,{number:e.weekNumber,dates:e.dates})})),d.jsxs("tr",{className:i.row,style:s.row,children:[f,e.dates.map(function(m){return d.jsx("td",{className:i.cell,style:s.cell,role:"presentation",children:d.jsx(c,{displayMonth:e.displayMonth,date:m})},y4(m))})]})}function bb(e,t,n){for(var r=n!=null&&n.ISOWeek?eP(t):D0(t,n),s=n!=null&&n.ISOWeek?Ko(e):Cs(e,n),i=kr(r,s),a=[],l=0;l<=i;l++)a.push(Cn(s,l));var c=a.reduce(function(h,f){var m=n!=null&&n.ISOWeek?nP(f):sP(f,n),v=h.find(function(y){return y.weekNumber===m});return v?(v.dates.push(f),h):(h.push({weekNumber:m,dates:[f]}),h)},[]);return c}function W$(e,t){var n=bb(qn(e),L0(e),t);if(t!=null&&t.useFixedWeeks){var r=w4(e,t);if(r<6){var s=n[n.length-1],i=s.dates[s.dates.length-1],a=Ov(i,6-r),l=bb(Ov(i,1),a,t);n.push.apply(n,l)}}return n}function H$(e){var t,n,r,s=yt(),i=s.locale,a=s.classNames,l=s.styles,c=s.hideHead,h=s.fixedWeeks,f=s.components,m=s.weekStartsOn,v=s.firstWeekContainsDate,y=s.ISOWeek,S=W$(e.displayMonth,{useFixedWeeks:!!h,ISOWeek:y,locale:i,weekStartsOn:m,firstWeekContainsDate:v}),w=(t=f==null?void 0:f.Head)!==null&&t!==void 0?t:i$,b=(n=f==null?void 0:f.Row)!==null&&n!==void 0?n:B$,E=(r=f==null?void 0:f.Footer)!==null&&r!==void 0?r:n$;return d.jsxs("table",{id:e.id,className:a.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&d.jsx(w,{}),d.jsx("tbody",{className:a.tbody,style:l.tbody,children:S.map(function(_){return d.jsx(b,{displayMonth:e.displayMonth,dates:_.dates,weekNumber:_.weekNumber},_.weekNumber)})}),d.jsx(E,{displayMonth:e.displayMonth})]})}function V$(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var q$=V$()?g.useLayoutEffect:g.useEffect,Am=!1,G$=0;function Sb(){return"react-day-picker-".concat(++G$)}function Y$(e){var t,n=e??(Am?Sb():null),r=g.useState(n),s=r[0],i=r[1];return q$(function(){s===null&&i(Sb())},[]),g.useEffect(function(){Am===!1&&(Am=!0)},[]),(t=e??s)!==null&&t!==void 0?t:void 0}function Z$(e){var t,n,r=yt(),s=r.dir,i=r.classNames,a=r.styles,l=r.components,c=Iu().displayMonths,h=Y$(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),f=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,m=[i.month],v=a.month,y=e.displayIndex===0,S=e.displayIndex===c.length-1,w=!y&&!S;s==="rtl"&&(t=[y,S],S=t[0],y=t[1]),y&&(m.push(i.caption_start),v=Ae(Ae({},v),a.caption_start)),S&&(m.push(i.caption_end),v=Ae(Ae({},v),a.caption_end)),w&&(m.push(i.caption_between),v=Ae(Ae({},v),a.caption_between));var b=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:t$;return d.jsxs("div",{className:m.join(" "),style:v,children:[d.jsx(b,{id:h,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),d.jsx(H$,{id:f,"aria-labelledby":h,displayMonth:e.displayMonth})]},e.displayIndex)}function K$(e){var t=yt(),n=t.classNames,r=t.styles;return d.jsx("div",{className:n.months,style:r.months,children:e.children})}function Q$(e){var t,n,r=e.initialProps,s=yt(),i=H0(),a=Iu(),l=g.useState(!1),c=l[0],h=l[1];g.useEffect(function(){s.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),h(!0)))},[s.initialFocus,c,i.focus,i.focusTarget,i]);var f=[s.classNames.root,s.className];s.numberOfMonths>1&&f.push(s.classNames.multiple_months),s.showWeekNumber&&f.push(s.classNames.with_weeknumber);var m=Ae(Ae({},s.styles.root),s.style),v=Object.keys(r).filter(function(S){return S.startsWith("data-")}).reduce(function(S,w){var b;return Ae(Ae({},S),(b={},b[w]=r[w],b))},{}),y=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:K$;return d.jsx("div",Ae({className:f.join(" "),style:m,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},v,{children:d.jsx(y,{children:a.displayMonths.map(function(S,w){return d.jsx(Z$,{displayIndex:w,displayMonth:S},w)})})}))}function X$(e){var t=e.children,n=b4(e,["children"]);return d.jsx(z4,{initialProps:n,children:d.jsx(Q4,{children:d.jsx(M$,{initialProps:n,children:d.jsx(a$,{initialProps:n,children:d.jsx(u$,{initialProps:n,children:d.jsx(y$,{children:d.jsx(j$,{children:t})})})})})})})}function J$(e){return d.jsx(X$,Ae({},e,{children:d.jsx(Q$,{initialProps:e})}))}function Xh({className:e,classNames:t,showOutsideDays:n=!0,...r}){return d.jsx(J$,{showOutsideDays:n,className:Te("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Te(Mv({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:["h-9 w-9 text-center text-sm p-0 relative","[&:has([aria-selected].day-range-start)]:rounded-l-full","[&:has([aria-selected].day-range-end)]:rounded-r-full","[&:has([aria-selected].day-outside)]:bg-accent/50","[&:has([aria-selected])]:bg-accent","first:[&:has([aria-selected])]:rounded-l-full","last:[&:has([aria-selected])]:rounded-r-full","focus-within:relative focus-within:z-20"].join(" "),day:Te(Mv({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...s})=>d.jsx(FC,{className:"h-4 w-4"}),IconRight:({...s})=>d.jsx(f0,{className:"h-4 w-4"})},...r})}Xh.displayName="Calendar";var Lm=0;function Qf(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Eb()),document.body.insertAdjacentElement("beforeend",e[1]??Eb()),Lm++,()=>{Lm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Lm--}},[])}function Eb(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Dm="focusScope.autoFocusOnMount",Fm="focusScope.autoFocusOnUnmount",Cb={bubbles:!1,cancelable:!0},eU="FocusScope",Au=g.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=e,[l,c]=g.useState(null),h=Mt(s),f=Mt(i),m=g.useRef(null),v=ze(t,w=>c(w)),y=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let w=function(C){if(y.paused||!l)return;const P=C.target;l.contains(P)?m.current=P:mi(m.current,{select:!0})},b=function(C){if(y.paused||!l)return;const P=C.relatedTarget;P!==null&&(l.contains(P)||mi(m.current,{select:!0}))},E=function(C){if(document.activeElement===document.body)for(const T of C)T.removedNodes.length>0&&mi(l)};document.addEventListener("focusin",w),document.addEventListener("focusout",b);const _=new MutationObserver(E);return l&&_.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",b),_.disconnect()}}},[r,l,y.paused]),g.useEffect(()=>{if(l){Pb.add(y);const w=document.activeElement;if(!l.contains(w)){const E=new CustomEvent(Dm,Cb);l.addEventListener(Dm,h),l.dispatchEvent(E),E.defaultPrevented||(tU(oU(gP(l)),{select:!0}),document.activeElement===w&&mi(l))}return()=>{l.removeEventListener(Dm,h),setTimeout(()=>{const E=new CustomEvent(Fm,Cb);l.addEventListener(Fm,f),l.dispatchEvent(E),E.defaultPrevented||mi(w??document.body,{select:!0}),l.removeEventListener(Fm,f),Pb.remove(y)},0)}}},[l,h,f,y]);const S=g.useCallback(w=>{if(!n&&!r||y.paused)return;const b=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,E=document.activeElement;if(b&&E){const _=w.currentTarget,[C,P]=nU(_);C&&P?!w.shiftKey&&E===P?(w.preventDefault(),n&&mi(C,{select:!0})):w.shiftKey&&E===C&&(w.preventDefault(),n&&mi(P,{select:!0})):E===_&&w.preventDefault()}},[n,r,y.paused]);return d.jsx(ke.div,{tabIndex:-1,...a,ref:v,onKeyDown:S})});Au.displayName=eU;function tU(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(mi(r,{select:t}),document.activeElement!==n)return}function nU(e){const t=gP(e),n=kb(t,e),r=kb(t.reverse(),e);return[n,r]}function gP(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function kb(e,t){for(const n of e)if(!rU(n,{upTo:t}))return n}function rU(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function sU(e){return e instanceof HTMLInputElement&&"select"in e}function mi(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&sU(e)&&t&&e.select()}}var Pb=iU();function iU(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Nb(e,t),e.unshift(t)},remove(t){var n;e=Nb(e,t),(n=e[0])==null||n.resume()}}}function Nb(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function oU(e){return e.filter(t=>t.tagName!=="A")}var aU=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},va=new WeakMap,Od=new WeakMap,Id={},$m=0,vP=function(e){return e&&(e.host||vP(e.parentNode))},lU=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=vP(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},cU=function(e,t,n,r){var s=lU(t,Array.isArray(e)?e:[e]);Id[n]||(Id[n]=new WeakMap);var i=Id[n],a=[],l=new Set,c=new Set(s),h=function(m){!m||l.has(m)||(l.add(m),h(m.parentNode))};s.forEach(h);var f=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(v){if(l.has(v))f(v);else try{var y=v.getAttribute(r),S=y!==null&&y!=="false",w=(va.get(v)||0)+1,b=(i.get(v)||0)+1;va.set(v,w),i.set(v,b),a.push(v),w===1&&S&&Od.set(v,!0),b===1&&v.setAttribute(n,"true"),S||v.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",v,E)}})};return f(t),l.clear(),$m++,function(){a.forEach(function(m){var v=va.get(m)-1,y=i.get(m)-1;va.set(m,v),i.set(m,y),v||(Od.has(m)||m.removeAttribute(r),Od.delete(m)),y||m.removeAttribute(n)}),$m--,$m||(va=new WeakMap,va=new WeakMap,Od=new WeakMap,Id={})}},Xf=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=aU(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),cU(r,s,n,"aria-hidden")):function(){return null}},ys=function(){return ys=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ys.apply(this,arguments)};function yP(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function uU(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var ah="right-scroll-bar-position",lh="width-before-scroll-bar",dU="with-scroll-bars-hidden",hU="--removed-body-scroll-bar-size";function Um(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function fU(e,t){var n=g.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var pU=typeof window<"u"?g.useLayoutEffect:g.useEffect,Tb=new WeakMap;function mU(e,t){var n=fU(null,function(r){return e.forEach(function(s){return Um(s,r)})});return pU(function(){var r=Tb.get(n);if(r){var s=new Set(r),i=new Set(e),a=n.current;s.forEach(function(l){i.has(l)||Um(l,null)}),i.forEach(function(l){s.has(l)||Um(l,a)})}Tb.set(n,e)},[e]),n}function gU(e){return e}function vU(e,t){t===void 0&&(t=gU);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var a=t(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var f=a;a=[],f.forEach(i)},h=function(){return Promise.resolve().then(c)};h(),n={push:function(f){a.push(f),h()},filter:function(f){return a=a.filter(f),n}}}};return s}function yU(e){e===void 0&&(e={});var t=vU(null);return t.options=ys({async:!0,ssr:!1},e),t}var xP=function(e){var t=e.sideCar,n=yP(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,ys({},n))};xP.isSideCarExport=!0;function xU(e,t){return e.useMedium(t),xP}var wP=yU(),zm=function(){},Jf=g.forwardRef(function(e,t){var n=g.useRef(null),r=g.useState({onScrollCapture:zm,onWheelCapture:zm,onTouchMoveCapture:zm}),s=r[0],i=r[1],a=e.forwardProps,l=e.children,c=e.className,h=e.removeScrollBar,f=e.enabled,m=e.shards,v=e.sideCar,y=e.noRelative,S=e.noIsolation,w=e.inert,b=e.allowPinchZoom,E=e.as,_=E===void 0?"div":E,C=e.gapMode,P=yP(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=v,R=mU([n,t]),O=ys(ys({},P),s);return g.createElement(g.Fragment,null,f&&g.createElement(T,{sideCar:wP,removeScrollBar:h,shards:m,noRelative:y,noIsolation:S,inert:w,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:C}),a?g.cloneElement(g.Children.only(l),ys(ys({},O),{ref:R})):g.createElement(_,ys({},O,{className:c,ref:R}),l))});Jf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Jf.classNames={fullWidth:lh,zeroRight:ah};var wU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _U(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=wU();return t&&e.setAttribute("nonce",t),e}function bU(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function SU(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var EU=function(){var e=0,t=null;return{add:function(n){e==0&&(t=_U())&&(bU(t,n),SU(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},CU=function(){var e=EU();return function(t,n){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},_P=function(){var e=CU(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},kU={left:0,top:0,right:0,gap:0},Bm=function(e){return parseInt(e||"",10)||0},PU=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Bm(n),Bm(r),Bm(s)]},NU=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return kU;var t=PU(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},TU=_P(),Ya="data-scroll-locked",jU=function(e,t,n,r){var s=e.left,i=e.top,a=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(dU,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Ya,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ah,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(lh,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ah," .").concat(ah,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(lh," .").concat(lh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ya,`] {
    `).concat(hU,": ").concat(l,`px;
  }
`)},jb=function(){var e=parseInt(document.body.getAttribute(Ya)||"0",10);return isFinite(e)?e:0},RU=function(){g.useEffect(function(){return document.body.setAttribute(Ya,(jb()+1).toString()),function(){var e=jb()-1;e<=0?document.body.removeAttribute(Ya):document.body.setAttribute(Ya,e.toString())}},[])},MU=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;RU();var i=g.useMemo(function(){return NU(s)},[s]);return g.createElement(TU,{styles:jU(i,!t,s,n?"":"!important")})},Iv=!1;if(typeof window<"u")try{var Ad=Object.defineProperty({},"passive",{get:function(){return Iv=!0,!0}});window.addEventListener("test",Ad,Ad),window.removeEventListener("test",Ad,Ad)}catch{Iv=!1}var ya=Iv?{passive:!1}:!1,OU=function(e){return e.tagName==="TEXTAREA"},bP=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!OU(e)&&n[t]==="visible")},IU=function(e){return bP(e,"overflowY")},AU=function(e){return bP(e,"overflowX")},Rb=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=SP(e,r);if(s){var i=EP(e,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},LU=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},DU=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},SP=function(e,t){return e==="v"?IU(t):AU(t)},EP=function(e,t){return e==="v"?LU(t):DU(t)},FU=function(e,t){return e==="h"&&t==="rtl"?-1:1},$U=function(e,t,n,r,s){var i=FU(e,window.getComputedStyle(t).direction),a=i*r,l=n.target,c=t.contains(l),h=!1,f=a>0,m=0,v=0;do{if(!l)break;var y=EP(e,l),S=y[0],w=y[1],b=y[2],E=w-b-i*S;(S||E)&&SP(e,l)&&(m+=E,v+=S);var _=l.parentNode;l=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(m)<1||!s)||!f&&(Math.abs(v)<1||!s))&&(h=!0),h},Ld=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Mb=function(e){return[e.deltaX,e.deltaY]},Ob=function(e){return e&&"current"in e?e.current:e},UU=function(e,t){return e[0]===t[0]&&e[1]===t[1]},zU=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},BU=0,xa=[];function WU(e){var t=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(BU++)[0],i=g.useState(_P)[0],a=g.useRef(e);g.useEffect(function(){a.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var w=uU([e.lockRef.current],(e.shards||[]).map(Ob),!0).filter(Boolean);return w.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=g.useCallback(function(w,b){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!a.current.allowPinchZoom;var E=Ld(w),_=n.current,C="deltaX"in w?w.deltaX:_[0]-E[0],P="deltaY"in w?w.deltaY:_[1]-E[1],T,R=w.target,O=Math.abs(C)>Math.abs(P)?"h":"v";if("touches"in w&&O==="h"&&R.type==="range")return!1;var A=Rb(O,R);if(!A)return!0;if(A?T=O:(T=O==="v"?"h":"v",A=Rb(O,R)),!A)return!1;if(!r.current&&"changedTouches"in w&&(C||P)&&(r.current=T),!T)return!0;var B=r.current||T;return $U(B,b,w,B==="h"?C:P,!0)},[]),c=g.useCallback(function(w){var b=w;if(!(!xa.length||xa[xa.length-1]!==i)){var E="deltaY"in b?Mb(b):Ld(b),_=t.current.filter(function(T){return T.name===b.type&&(T.target===b.target||b.target===T.shadowParent)&&UU(T.delta,E)})[0];if(_&&_.should){b.cancelable&&b.preventDefault();return}if(!_){var C=(a.current.shards||[]).map(Ob).filter(Boolean).filter(function(T){return T.contains(b.target)}),P=C.length>0?l(b,C[0]):!a.current.noIsolation;P&&b.cancelable&&b.preventDefault()}}},[]),h=g.useCallback(function(w,b,E,_){var C={name:w,delta:b,target:E,should:_,shadowParent:HU(E)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(P){return P!==C})},1)},[]),f=g.useCallback(function(w){n.current=Ld(w),r.current=void 0},[]),m=g.useCallback(function(w){h(w.type,Mb(w),w.target,l(w,e.lockRef.current))},[]),v=g.useCallback(function(w){h(w.type,Ld(w),w.target,l(w,e.lockRef.current))},[]);g.useEffect(function(){return xa.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:v}),document.addEventListener("wheel",c,ya),document.addEventListener("touchmove",c,ya),document.addEventListener("touchstart",f,ya),function(){xa=xa.filter(function(w){return w!==i}),document.removeEventListener("wheel",c,ya),document.removeEventListener("touchmove",c,ya),document.removeEventListener("touchstart",f,ya)}},[]);var y=e.removeScrollBar,S=e.inert;return g.createElement(g.Fragment,null,S?g.createElement(i,{styles:zU(s)}):null,y?g.createElement(MU,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function HU(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const VU=xU(wP,WU);var Lu=g.forwardRef(function(e,t){return g.createElement(Jf,ys({},e,{ref:t,sideCar:VU}))});Lu.classNames=Jf.classNames;var ep="Popover",[CP,NG]=Tn(ep,[ro]),Du=ro(),[qU,io]=CP(ep),kP=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!1}=e,l=Du(t),c=g.useRef(null),[h,f]=g.useState(!1),[m,v]=ti({prop:r,defaultProp:s??!1,onChange:i,caller:ep});return d.jsx(k0,{...l,children:d.jsx(qU,{scope:t,contentId:bs(),triggerRef:c,open:m,onOpenChange:v,onOpenToggle:g.useCallback(()=>v(y=>!y),[v]),hasCustomAnchor:h,onCustomAnchorAdd:g.useCallback(()=>f(!0),[]),onCustomAnchorRemove:g.useCallback(()=>f(!1),[]),modal:a,children:n})})};kP.displayName=ep;var PP="PopoverAnchor",GU=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=io(PP,n),i=Du(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return g.useEffect(()=>(a(),()=>l()),[a,l]),d.jsx(Nu,{...i,...r,ref:t})});GU.displayName=PP;var NP="PopoverTrigger",TP=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=io(NP,n),i=Du(n),a=ze(t,s.triggerRef),l=d.jsx(ke.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":IP(s.open),...r,ref:a,onClick:le(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:d.jsx(Nu,{asChild:!0,...i,children:l})});TP.displayName=NP;var q0="PopoverPortal",[YU,ZU]=CP(q0,{forceMount:void 0}),jP=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,i=io(q0,t);return d.jsx(YU,{scope:t,forceMount:n,children:d.jsx(Jt,{present:n||i.open,children:d.jsx(Cl,{asChild:!0,container:s,children:r})})})};jP.displayName=q0;var vl="PopoverContent",RP=g.forwardRef((e,t)=>{const n=ZU(vl,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,i=io(vl,e.__scopePopover);return d.jsx(Jt,{present:r||i.open,children:i.modal?d.jsx(QU,{...s,ref:t}):d.jsx(XU,{...s,ref:t})})});RP.displayName=vl;var KU=Zi("PopoverContent.RemoveScroll"),QU=g.forwardRef((e,t)=>{const n=io(vl,e.__scopePopover),r=g.useRef(null),s=ze(t,r),i=g.useRef(!1);return g.useEffect(()=>{const a=r.current;if(a)return Xf(a)},[]),d.jsx(Lu,{as:KU,allowPinchZoom:!0,children:d.jsx(MP,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:le(e.onCloseAutoFocus,a=>{var l;a.preventDefault(),i.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:le(e.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,h=l.button===2||c;i.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:le(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),XU=g.forwardRef((e,t)=>{const n=io(vl,e.__scopePopover),r=g.useRef(!1),s=g.useRef(!1);return d.jsx(MP,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,h;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((h=n.triggerRef.current)==null?void 0:h.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),MP=g.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:h,onInteractOutside:f,...m}=e,v=io(vl,n),y=Du(n);return Qf(),d.jsx(Au,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:d.jsx(ra,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:h,onDismiss:()=>v.onOpenChange(!1),children:d.jsx(Vf,{"data-state":IP(v.open),role:"dialog",id:v.contentId,...y,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),OP="PopoverClose",JU=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=io(OP,n);return d.jsx(ke.button,{type:"button",...r,ref:t,onClick:le(e.onClick,()=>s.onOpenChange(!1))})});JU.displayName=OP;var ez="PopoverArrow",tz=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Du(n);return d.jsx(qf,{...s,...r,ref:t})});tz.displayName=ez;function IP(e){return e?"open":"closed"}var nz=kP,rz=TP,sz=jP,AP=RP;const LP=nz,DP=rz,G0=g.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},s)=>d.jsx(sz,{children:d.jsx(AP,{ref:s,align:t,sideOffset:n,className:Te("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));G0.displayName=AP.displayName;const ct=g.forwardRef(({className:e,type:t,...n},r)=>d.jsx("input",{type:t,className:Te("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));ct.displayName="Input";const Ml=g.forwardRef(({className:e,...t},n)=>d.jsx("textarea",{className:Te("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Ml.displayName="Textarea";var iz="Label",FP=g.forwardRef((e,t)=>d.jsx(ke.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));FP.displayName=iz;var $P=FP;const oz=Uf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Xe=g.forwardRef(({className:e,...t},n)=>d.jsx($P,{ref:n,className:Te(oz(),e),...t}));Xe.displayName=$P.displayName;const az="modulepreload",lz=function(e){return"/"+e},Ib={},Fu=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=lz(c),c in Ib)return;Ib[c]=!0;const h=c.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":az,h||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),h)return new Promise((v,y)=>{m.addEventListener("load",v),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},cz=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Fu(async()=>{const{default:r}=await Promise.resolve().then(()=>Ol);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Y0 extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Ab extends Y0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Lb extends Y0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Db extends Y0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Av;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Av||(Av={}));var uz=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};class dz{constructor(t,{headers:n={},customFetch:r,region:s=Av.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=cz(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return uz(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:i,method:a,body:l,signal:c}=r;let h={},{region:f}=r;f||(f=this.region);const m=new URL(`${this.url}/${n}`);f&&f!=="any"&&(h["x-region"]=f,m.searchParams.set("forceFunctionRegion",f));let v;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=l):typeof l=="string"?(h["Content-Type"]="text/plain",v=l):typeof FormData<"u"&&l instanceof FormData?v=l:(h["Content-Type"]="application/json",v=JSON.stringify(l)));const y=yield this.fetch(m.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),i),body:v,signal:c}).catch(E=>{throw E.name==="AbortError"?E:new Ab(E)}),S=y.headers.get("x-relay-error");if(S&&S==="true")throw new Lb(y);if(!y.ok)throw new Db(y);let w=((s=y.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return w==="application/json"?b=yield y.json():w==="application/octet-stream"?b=yield y.blob():w==="text/event-stream"?b=y:w==="multipart/form-data"?b=yield y.formData():b=yield y.text(),{data:b,error:null,response:y}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Ab(i)}:{data:null,error:i,response:i instanceof Db||i instanceof Lb?i.context:void 0}}})}}var Un={},Z0={},tp={},$u={},np={},rp={},hz=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},yl=hz();const fz=yl.fetch,UP=yl.fetch.bind(yl),zP=yl.Headers,pz=yl.Request,mz=yl.Response,Ol=Object.freeze(Object.defineProperty({__proto__:null,Headers:zP,Request:pz,Response:mz,default:UP,fetch:fz},Symbol.toStringTag,{value:"Module"})),gz=dM(Ol);var sp={};Object.defineProperty(sp,"__esModule",{value:!0});let vz=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};sp.default=vz;var BP=ir&&ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rp,"__esModule",{value:!0});const yz=BP(gz),xz=BP(sp);let wz=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=yz.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c,h;let f=null,m=null,v=null,y=i.status,S=i.statusText;if(i.ok){if(this.method!=="HEAD"){const _=await i.text();_===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?m=_:m=JSON.parse(_))}const b=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),E=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&E&&E.length>1&&(v=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,v=null,y=406,S="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const b=await i.text();try{f=JSON.parse(b),Array.isArray(f)&&i.status===404&&(m=[],f=null,y=200,S="OK")}catch{i.status===404&&b===""?(y=204,S="No Content"):f={message:b}}if(f&&this.isMaybeSingle&&(!((h=f==null?void 0:f.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,y=200,S="OK"),f&&this.shouldThrowOnError)throw new xz.default(f)}return{error:f,data:m,count:v,status:y,statusText:S}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};rp.default=wz;var _z=ir&&ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(np,"__esModule",{value:!0});const bz=_z(rp);let Sz=class extends bz.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),h=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${h}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};np.default=Sz;var Ez=ir&&ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($u,"__esModule",{value:!0});const Cz=Ez(np);let kz=class extends Cz.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};$u.default=kz;var Pz=ir&&ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tp,"__esModule",{value:!0});const uc=Pz($u);let Nz=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(t,n){const{head:r=!1,count:s}=n??{},i=r?"HEAD":"GET";let a=!1;const l=(t??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",l),s&&this.headers.append("Prefer",`count=${s}`),new uc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new uc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(c.length>0){const h=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new uc.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new uc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new uc.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};tp.default=Nz;var WP=ir&&ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Z0,"__esModule",{value:!0});const Tz=WP(tp),jz=WP($u);let Rz=class HP{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new Tz.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new HP(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${t}`);let h;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([m,v])=>v!==void 0).map(([m,v])=>[m,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([m,v])=>{c.searchParams.append(m,v)})):(l="POST",h=n);const f=new Headers(this.headers);return i&&f.set("Prefer",`count=${i}`),new jz.default({method:l,url:c,headers:f,schema:this.schemaName,body:h,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Z0.default=Rz;var Il=ir&&ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Un,"__esModule",{value:!0});Un.PostgrestError=Un.PostgrestBuilder=Un.PostgrestTransformBuilder=Un.PostgrestFilterBuilder=Un.PostgrestQueryBuilder=Un.PostgrestClient=void 0;const VP=Il(Z0);Un.PostgrestClient=VP.default;const qP=Il(tp);Un.PostgrestQueryBuilder=qP.default;const GP=Il($u);Un.PostgrestFilterBuilder=GP.default;const YP=Il(np);Un.PostgrestTransformBuilder=YP.default;const ZP=Il(rp);Un.PostgrestBuilder=ZP.default;const KP=Il(sp);Un.PostgrestError=KP.default;var Mz=Un.default={PostgrestClient:VP.default,PostgrestQueryBuilder:qP.default,PostgrestFilterBuilder:GP.default,PostgrestTransformBuilder:YP.default,PostgrestBuilder:ZP.default,PostgrestError:KP.default};const{PostgrestClient:Oz,PostgrestQueryBuilder:IG,PostgrestFilterBuilder:AG,PostgrestTransformBuilder:LG,PostgrestBuilder:DG,PostgrestError:FG}=Mz;class Iz{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Az="2.75.0",Lz=`realtime-js/${Az}`,Dz="1.0.0",Lv=1e4,Fz=1e3,$z=100;var Ac;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ac||(Ac={}));var Ht;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ht||(Ht={}));var Hr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Hr||(Hr={}));var Dv;(function(e){e.websocket="websocket"})(Dv||(Dv={}));var Eo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Eo||(Eo={}));class Uz{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+s));a=a+s;const c=r.decode(t.slice(a,a+i));a=a+i;const h=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:h}}}class QP{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var gt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(gt||(gt={}));const Fb=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,a)=>(i[a]=zz(a,e,t,s),i),{}):{}},zz=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=n[e];return i&&!r.includes(i)?XP(i,a):Fv(a)},XP=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Vz(t,n)}switch(e){case gt.bool:return Bz(t);case gt.float4:case gt.float8:case gt.int2:case gt.int4:case gt.int8:case gt.numeric:case gt.oid:return Wz(t);case gt.json:case gt.jsonb:return Hz(t);case gt.timestamp:return qz(t);case gt.abstime:case gt.date:case gt.daterange:case gt.int4range:case gt.int8range:case gt.money:case gt.reltime:case gt.text:case gt.time:case gt.timestamptz:case gt.timetz:case gt.tsrange:case gt.tstzrange:return Fv(t);default:return Fv(t)}},Fv=e=>e,Bz=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Wz=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Hz=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Vz=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const a=e.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>XP(t,l))}return e},qz=e=>typeof e=="string"?e.replace(" ","T"):e,JP=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Wm{constructor(t,n,r={},s=Lv){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var $b;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})($b||($b={}));class Lc{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Lc.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=Lc.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Lc.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(i,(h,f)=>{a[h]||(c[h]=f)}),this.map(a,(h,f)=>{const m=i[h];if(m){const v=f.map(b=>b.presence_ref),y=m.map(b=>b.presence_ref),S=f.filter(b=>y.indexOf(b.presence_ref)<0),w=m.filter(b=>v.indexOf(b.presence_ref)<0);S.length>0&&(l[h]=S),w.length>0&&(c[h]=w)}else l[h]=f}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var h;const f=(h=t[l])!==null&&h!==void 0?h:[];if(t[l]=this.cloneDeep(c),f.length>0){const m=t[l].map(y=>y.presence_ref),v=f.filter(y=>m.indexOf(y.presence_ref)<0);t[l].unshift(...v)}r(l,f,c)}),this.map(a,(l,c)=>{let h=t[l];if(!h)return;const f=c.map(m=>m.presence_ref);h=h.filter(m=>f.indexOf(m.presence_ref)<0),t[l]=h,s(l,h,c),h.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ub;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ub||(Ub={}));var Dc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Dc||(Dc={}));var Us;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Us||(Us={}));class K0{constructor(t,n={config:{}},r){var s,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Wm(this,Hr.join,this.params,this.timeout),this.rejoinTimer=new QP(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ht.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Hr.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Lc(this),this.broadcastEndpointURL=JP(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ht.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,h=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[Dc.PRESENCE]&&this.bindings[Dc.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,m={},v={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:h,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(Us.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(Us.CLOSED)),this.updateJoinPayload(Object.assign({config:v},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var S;if(this.socket.setAuth(),y===void 0){t==null||t(Us.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,b=(S=w==null?void 0:w.length)!==null&&S!==void 0?S:0,E=[];for(let _=0;_<b;_++){const C=w[_],{filter:{event:P,schema:T,table:R,filter:O}}=C,A=y&&y[_];if(A&&A.event===P&&A.schema===T&&A.table===R&&A.filter===O)E.push(Object.assign(Object.assign({},C),{id:A.id}));else{this.unsubscribe(),this.state=Ht.errored,t==null||t(Us.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,t&&t(Us.SUBSCRIBED);return}}).receive("error",y=>{this.state=Ht.errored,t==null||t(Us.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Us.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Ht.joined&&t===Dc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const h=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ht.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Hr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Wm(this,Hr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ht.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Wm(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>$z){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:h,join:f}=Hr;if(r&&[l,c,h,f].indexOf(a)>=0&&r!==this._joinRef())return;let v=this._onMessage(a,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var S,w,b;return((S=y.filter)===null||S===void 0?void 0:S.event)==="*"||((b=(w=y.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(y=>y.callback(v,r)):(i=this.bindings[a])===null||i===void 0||i.filter(y=>{var S,w,b,E,_,C;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in y){const P=y.id,T=(S=y.filter)===null||S===void 0?void 0:S.event;return P&&((w=n.ids)===null||w===void 0?void 0:w.includes(P))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const P=(_=(E=y==null?void 0:y.filter)===null||E===void 0?void 0:E.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return P==="*"||P===((C=n==null?void 0:n.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===a}).map(y=>{if(typeof v=="object"&&"ids"in v){const S=v.data,{schema:w,table:b,commit_timestamp:E,type:_,errors:C}=S;v=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:E,eventType:_,new:{},old:{},errors:C}),this._getPayloadRecords(S))}y.callback(v,r)})}_isClosed(){return this.state===Ht.closed}_isJoined(){return this.state===Ht.joined}_isJoining(){return this.state===Ht.joining}_isLeaving(){return this.state===Ht.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&K0.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Hr.close,{},t)}_onError(t){this._on(Hr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ht.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Fb(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Fb(t.columns,t.old_record)),n}}const Hm=()=>{},Dd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Gz=[1e3,2e3,5e3,1e4],Yz=1e4,Zz=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Kz{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Lv,this.transport=null,this.heartbeatIntervalMs=Dd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Hm,this.ref=0,this.reconnectTimer=null,this.logger=Hm,this.conn=null,this.sendBuffer=[],this.serializer=new Uz,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>Fu(async()=>{const{default:l}=await Promise.resolve().then(()=>Ol);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Dv.websocket}`,this.httpEndpoint=JP(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Iz.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Dz}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ac.connecting:return Eo.Connecting;case Ac.open:return Eo.Open;case Ac.closing:return Eo.Closing;default:return Eo.Closed}}isConnected(){return this.connectionState()===Eo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new K0(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Fz,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Dd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Hr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Zz],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:Lz};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Hr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new QP(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Dd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,a,l,c,h,f;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Lv,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Dd.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Hm,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:m=>Gz[m-1]||Yz,this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(m,v)=>v(JSON.stringify(m)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Q0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ut(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Qz extends Q0{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class $v extends Q0{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var Xz=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};const eN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Fu(async()=>{const{default:r}=await Promise.resolve().then(()=>Ol);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Jz=()=>Xz(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Fu(()=>Promise.resolve().then(()=>Ol),void 0)).Response:Response}),Uv=e=>{if(Array.isArray(e))return e.map(n=>Uv(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Uv(r)}),t},eB=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var ia=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};const Vm=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),tB=(e,t,n)=>ia(void 0,void 0,void 0,function*(){const r=yield Jz();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,a=(s==null?void 0:s.statusCode)||i+"";t(new Qz(Vm(s),i,a))}).catch(s=>{t(new $v(Vm(s),s))}):t(new $v(Vm(e),e))}),nB=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(eB(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function Uu(e,t,n,r,s,i){return ia(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,nB(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>tB(c,l,r))})})}function Jh(e,t,n,r){return ia(this,void 0,void 0,function*(){return Uu(e,"GET",t,n,r)})}function fs(e,t,n,r,s){return ia(this,void 0,void 0,function*(){return Uu(e,"POST",t,r,s,n)})}function zv(e,t,n,r,s){return ia(this,void 0,void 0,function*(){return Uu(e,"PUT",t,r,s,n)})}function rB(e,t,n,r){return ia(this,void 0,void 0,function*(){return Uu(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function tN(e,t,n,r,s){return ia(this,void 0,void 0,function*(){return Uu(e,"DELETE",t,r,s,n)})}var sB=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};class iB{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return sB(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}}var oB=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};class aB{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new iB(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return oB(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}}var In=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};const lB={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cB{constructor(t,n={},r,s){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=eN(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,s){return In(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},zb),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const h=this._removeEmptyFolders(n),f=this._getFinalPath(h),m=yield(t=="PUT"?zv:fs)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:h,id:m.Id,fullPath:m.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}})}upload(t,n,r){return In(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return In(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const h=Object.assign({upsert:zb.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",h.cacheControl)):(c=r,f["cache-control"]=`max-age=${h.cacheControl}`,f["content-type"]=h.contentType);const m=yield zv(this.fetch,l.toString(),c,{headers:f});return{data:{path:i,fullPath:m.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ut(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return In(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield fs(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Q0("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}update(t,n,r){return In(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return In(this,void 0,void 0,function*(){try{return{data:yield fs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}})}copy(t,n,r){return In(this,void 0,void 0,function*(){try{return{data:{path:(yield fs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return In(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield fs(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return In(this,void 0,void 0,function*(){try{const s=yield fs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}})}download(t,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>Jh(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new aB(c,this.shouldThrowOnError)}info(t){return In(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Jh(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Uv(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}exists(t){return In(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield rB(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r)&&r instanceof $v){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${h}`)}}}remove(t){return In(this,void 0,void 0,function*(){try{return{data:yield tN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}})}list(t,n,r){return In(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},lB),n),{prefix:t||""});return{data:yield fs(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}})}listV2(t,n){return In(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield fs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const uB="2.75.0",dB={"X-Client-Info":`storage-js/${uB}`};var wa=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};class hB{constructor(t,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},dB),n),this.fetch=eN(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return wa(this,void 0,void 0,function*(){try{return{data:yield Jh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}getBucket(t){return wa(this,void 0,void 0,function*(){try{return{data:yield Jh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}})}createBucket(t){return wa(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield fs(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}})}updateBucket(t,n){return wa(this,void 0,void 0,function*(){try{return{data:yield zv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}emptyBucket(t){return wa(this,void 0,void 0,function*(){try{return{data:yield fs(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}})}deleteBucket(t){return wa(this,void 0,void 0,function*(){try{return{data:yield tN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}})}}class fB extends hB{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new cB(this.url,this.headers,t,this.fetch)}}const pB="2.75.0";let wc="";typeof Deno<"u"?wc="deno":typeof document<"u"?wc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wc="react-native":wc="node";const mB={"X-Client-Info":`supabase-js-${wc}/${pB}`},gB={headers:mB},vB={schema:"public"},yB={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xB={};var wB=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};const _B=e=>{let t;return e?t=e:typeof fetch>"u"?t=UP:t=fetch,(...n)=>t(...n)},bB=()=>typeof Headers>"u"?zP:Headers,SB=(e,t,n)=>{const r=_B(n),s=bB();return(i,a)=>wB(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let h=new s(a==null?void 0:a.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:h}))})};var EB=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};function CB(e){return e.endsWith("/")?e:e+"/"}function kB(e,t){var n,r;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:h,realtime:f,global:m}=t,v={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},h),i),realtime:Object.assign(Object.assign({},f),a),storage:{},global:Object.assign(Object.assign(Object.assign({},m),l),{headers:Object.assign(Object.assign({},(n=m==null?void 0:m.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>EB(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function PB(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(CB(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const nN="2.75.0",ka=30*1e3,Bv=3,qm=Bv*ka,NB="http://localhost:9999",TB="supabase.auth.token",jB={"X-Client-Info":`gotrue-js/${nN}`},Wv="X-Supabase-Api-Version",rN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},RB=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,MB=10*60*1e3;class du extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Re(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class OB extends du{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function IB(e){return Re(e)&&e.name==="AuthApiError"}class Co extends du{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class oo extends du{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class gi extends oo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function AB(e){return Re(e)&&e.name==="AuthSessionMissingError"}class _a extends oo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Fd extends oo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class $d extends oo{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function LB(e){return Re(e)&&e.name==="AuthImplicitGrantRedirectError"}class Bb extends oo{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Hv extends oo{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Gm(e){return Re(e)&&e.name==="AuthRetryableFetchError"}class Wb extends oo{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Vv extends oo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ef="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hb=` 	
\r=`.split(""),DB=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Hb.length;t+=1)e[Hb[t].charCodeAt(0)]=-2;for(let t=0;t<ef.length;t+=1)e[ef[t].charCodeAt(0)]=t;return e})();function Vb(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ef[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ef[r]),t.queuedBits-=6}}function sN(e,t,n){const r=DB[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function qb(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{UB(a,r,n)};for(let a=0;a<e.length;a+=1)sN(e.charCodeAt(a),s,i);return t.join("")}function FB(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function $B(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}FB(r,t)}}function UB(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Za(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)sN(e.charCodeAt(s),n,r);return new Uint8Array(t)}function zB(e){const t=[];return $B(e,n=>t.push(n)),new Uint8Array(t)}function To(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Vb(s,n,r)),Vb(null,n,r),t.join("")}function BB(e){return Math.round(Date.now()/1e3)+e}function WB(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Jn=()=>typeof window<"u"&&typeof document<"u",vo={tested:!1,writable:!1},iN=()=>{if(!Jn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vo.tested)return vo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),vo.tested=!0,vo.writable=!0}catch{vo.tested=!0,vo.writable=!1}return vo.writable};function HB(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const oN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Fu(async()=>{const{default:r}=await Promise.resolve().then(()=>Ol);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},VB=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Pa=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},yo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},fi=async(e,t)=>{await e.removeItem(t)};class ip{constructor(){this.promise=new ip.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}ip.promiseConstructor=Promise;function Ym(e){const t=e.split(".");if(t.length!==3)throw new Vv("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!RB.test(t[r]))throw new Vv("JWT not in base64url format");return{header:JSON.parse(qb(t[0])),payload:JSON.parse(qb(t[1])),signature:Za(t[2]),raw:{header:t[0],payload:t[1]}}}async function qB(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function GB(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){r(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function YB(e){return("0"+e.toString(16)).substr(-2)}function ZB(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,YB).join("")}async function KB(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function QB(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await KB(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ba(e,t,n=!1){const r=ZB();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Pa(e,`${t}-code-verifier`,s);const i=await QB(r);return[i,r===i?"plain":"s256"]}const XB=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function JB(e){const t=e.headers.get(Wv);if(!t||!t.match(XB))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function e6(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function t6(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const n6=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sa(e){if(!n6.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zm(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Gb(e){return JSON.parse(JSON.stringify(e))}var r6=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const bo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),s6=[502,503,504];async function Yb(e){var t;if(!VB(e))throw new Hv(bo(e),0);if(s6.includes(e.status))throw new Hv(bo(e),e.status);let n;try{n=await e.json()}catch(i){throw new Co(bo(i),i)}let r;const s=JB(e);if(s&&s.getTime()>=rN["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Wb(bo(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new gi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Wb(bo(n),e.status,n.weak_password.reasons);throw new OB(bo(n),e.status||500,r)}const i6=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ue(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Wv]||(i[Wv]=rN["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await o6(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function o6(e,t,n,r,s,i){const a=i6(t,r,s,i);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new Hv(bo(c),0)}if(l.ok||await Yb(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Yb(c)}}function Fr(e){var t;let n=null;c6(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=BB(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Zb(e){const t=Fr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function _i(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function a6(e){return{data:e,error:null}}function l6(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=r6(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function Kb(e){return e}function c6(e){return e.access_token&&e.refresh_token&&e.expires_in}const Km=["global","local","others"];var u6=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class d6{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=oN(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Km[0]){if(Km.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Km.join(", ")}`);try{return await Ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:_i})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=u6(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:l6,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ue(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:_i})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,a,l,c;try{const h={nextPage:null,lastPage:0,total:0},f=await Ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Kb});if(f.error)throw f.error;const m=await f.json(),v=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(S=>{const w=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(S.split(";")[1].split("=")[1]);h[`${b}Page`]=w}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(Re(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){Sa(t);try{return await Ue(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:_i})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Sa(t);try{return await Ue(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:_i})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Sa(t);try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:_i})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Sa(t.userId);try{const{data:n,error:r}=await Ue(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Sa(t.userId),Sa(t.id);try{return{data:await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,i,a,l,c;try{const h={nextPage:null,lastPage:0,total:0},f=await Ue(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Kb});if(f.error)throw f.error;const m=await f.json(),v=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(S=>{const w=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(S.split(";")[1].split("=")[1]);h[`${b}Page`]=w}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(Re(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(t){try{return await Ue(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Ue(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Ue(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}}function Qb(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Ea={debug:!!(globalThis&&iN()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class aN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class h6 extends aN{}async function f6(e,t,n){Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new h6(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ea.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function p6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function lN(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function m6(e){return parseInt(e,16)}function g6(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function v6(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:l,requestId:c,resources:h,scheme:f,uri:m,version:v}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=lN(e.address),S=f?`${f}://${r}`:r,w=e.statement?`${e.statement}
`:"",b=`${S} wants you to sign in with your Ethereum account:
${y}

${w}`;let E=`URI: ${m}
Version: ${v}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(E+=`
Expiration Time: ${s.toISOString()}`),l&&(E+=`
Not Before: ${l.toISOString()}`),c&&(E+=`
Request ID: ${c}`),h){let _=`
Resources:`;for(const C of h){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);_+=`
- ${C}`}E+=_}return`${b}
${E}`}class $t extends Error{constructor({message:t,code:n,cause:r,name:s}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class tf extends $t{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function y6({error:e,options:t}){var n,r,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $t({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new $t({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new $t({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new $t({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new $t({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new $t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new $t({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new $t({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(uN(a)){if(i.rp.id!==a)return new $t({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new $t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new $t({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new $t({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new $t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function x6({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new $t({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new $t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(uN(r)){if(n.rpId!==r)return new $t({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new $t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new $t({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new $t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var cN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class w6{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const _6=new w6;function b6(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=cN(e,["challenge","user","excludeCredentials"]),i=Za(t).buffer,a=Object.assign(Object.assign({},n),{id:Za(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:a});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const h=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},h),{id:Za(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return l}function S6(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=cN(e,["challenge","allowCredentials"]),s=Za(t).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const l=n[a];i.allowCredentials[a]=Object.assign(Object.assign({},l),{id:Za(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function E6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:To(new Uint8Array(e.response.attestationObject)),clientDataJSON:To(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function C6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:To(new Uint8Array(s.authenticatorData)),clientDataJSON:To(new Uint8Array(s.clientDataJSON)),signature:To(new Uint8Array(s.signature)),userHandle:s.userHandle?To(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function uN(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Xb(){var e,t;return!!(Jn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function k6(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new tf("Browser returned unexpected credential type",t)}:{data:null,error:new tf("Empty credential response",t)}}catch(t){return{data:null,error:y6({error:t,options:e})}}}async function P6(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new tf("Browser returned unexpected credential type",t)}:{data:null,error:new tf("Empty credential response",t)}}catch(t){return{data:null,error:x6({error:t,options:e})}}}const N6={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},T6={userVerification:"preferred",hints:["security-key"]};function nf(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))r[i]=a;else if(n(a))r[i]=a;else if(t(a)){const l=r[i];t(l)?r[i]=nf(l,a):r[i]=nf(a)}else r[i]=a}return r}function j6(e,t){return nf(N6,e,t||{})}function R6(e,t){return nf(T6,e,t||{})}class M6{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},i){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:l};const c=s??_6.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:h}=a.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${r}`),h.displayName||(h.displayName=h.name)}switch(a.webauthn.type){case"create":{const h=j6(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:m}=await k6({publicKey:h,signal:c});return f?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:f}},error:null}:{data:null,error:m}}case"request":{const h=R6(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:m}=await P6(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:h,signal:c}));return f?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:f}},error:null}:{data:null,error:m}}}}catch(a){return Re(a)?{data:null,error:a}:{data:null,error:new Co("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!n)return{data:null,error:new du("rpId is required for WebAuthn authentication")};try{if(!Xb())return{data:null,error:new Co("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!a)return{data:null,error:l};const{webauthn:c}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(a){return Re(a)?{data:null,error:a}:{data:null,error:new Co("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!n)return{data:null,error:new du("rpId is required for WebAuthn registration")};try{if(!Xb())return{data:null,error:new Co("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(f=>{var m;return(m=f.data)===null||m===void 0?void 0:m.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:l};const{data:c,error:h}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:h}}catch(a){return Re(a)?{data:null,error:a}:{data:null,error:new Co("Unexpected error in register",a)}}}}p6();const O6={url:NB,storageKey:TB,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:jB,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Jb(e,t,n){return await n()}const Ca={};class hu{get jwks(){var t,n;return(n=(t=Ca[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Ca[this.storageKey]=Object.assign(Object.assign({},Ca[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Ca[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ca[this.storageKey]=Object.assign(Object.assign({},Ca[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=hu.nextInstanceID,hu.nextInstanceID+=1,this.instanceID>0&&Jn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},O6),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new d6({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=oN(s.fetch),this.lock=s.lock||Jb,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Jn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=f6:this.lock=Jb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new M6(this)},this.persistSession?(s.storage?this.storage=s.storage:iN()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Qb(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Qb(this.memoryStorage)),Jn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${nN}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=HB(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Jn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),LB(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Re(n)?{error:n}:{error:new Co("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Fr}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(i){if(Re(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:f,password:m,options:v}=t;let y=null,S=null;this.flowType==="pkce"&&([y,S]=await ba(this.storage,this.storageKey)),i=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:f,password:m,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:y,code_challenge_method:S},xform:Fr})}else if("phone"in t){const{phone:f,password:m,options:v}=t;i=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:m,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(s=v==null?void 0:v.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Fr})}else throw new Fd("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(i){if(Re(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:a,options:l}=t;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Zb})}else if("phone"in t){const{phone:i,password:a,options:l}=t;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Zb})}else throw new Fd("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new _a}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,a,l,c,h,f,m,v;let y,S;if("message"in t)y=t.message,S=t.signature;else{const{chain:w,wallet:b,statement:E,options:_}=t;let C;if(Jn())if(typeof b=="object")C=b;else{const B=window;if("ethereum"in B&&typeof B.ethereum=="object"&&"request"in B.ethereum&&typeof B.ethereum.request=="function")C=B.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=b}const P=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href),T=await C.request({method:"eth_requestAccounts"}).then(B=>B).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=lN(T[0]);let O=(r=_==null?void 0:_.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!O){const B=await C.request({method:"eth_chainId"});O=m6(B)}const A={domain:P.host,address:R,statement:E,uri:P.href,version:"1",chainId:O,nonce:(s=_==null?void 0:_.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=_==null?void 0:_.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=_==null?void 0:_.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(h=_==null?void 0:_.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(f=_==null?void 0:_.signInWithEthereum)===null||f===void 0?void 0:f.resources};y=v6(A),S=await C.request({method:"personal_sign",params:[g6(y),R]})}try{const{data:w,error:b}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:S},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Fr});if(b)throw b;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new _a}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:b})}catch(w){if(Re(w))return{data:{user:null,session:null},error:w};throw w}}async signInWithSolana(t){var n,r,s,i,a,l,c,h,f,m,v,y;let S,w;if("message"in t)S=t.message,w=t.signature;else{const{chain:b,wallet:E,statement:_,options:C}=t;let P;if(Jn())if(typeof E=="object")P=E;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))P=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=E}const T=new URL((n=C==null?void 0:C.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in P&&P.signIn){const R=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),_?{statement:_}:null));let O;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")O=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)O=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)S=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),w=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${T.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(s=(r=C==null?void 0:C.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=C==null?void 0:C.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((a=C==null?void 0:C.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((c=C==null?void 0:C.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((h=C==null?void 0:C.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((m=(f=C==null?void 0:C.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||m===void 0)&&m.length?["Resources",...C.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const R=await P.signMessage(new TextEncoder().encode(S),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=R}}try{const{data:b,error:E}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:To(w)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Fr});if(E)throw E;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new _a}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:E})}catch(b){if(Re(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const n=await yo(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Fr});if(await fi(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new _a}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(Re(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=t,l=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Fr}),{data:c,error:h}=l;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new _a}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let h=null,f=null;this.flowType==="pkce"&&([h,f]=await ba(this.storage,this.storageKey));const{error:m}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:h,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:l,options:c}=t,{data:h,error:f}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:f}}throw new Fd("You must provide either an email or phone number.")}catch(l){if(Re(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await Ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Fr});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,h=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(s){if(Re(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await ba(this.storage,this.storageKey)),await Ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:a6})}catch(i){if(Re(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new gi;const{error:s}=await Ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Re(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:a}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:a,error:l}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Fd("You must provide either an email or phone number and a type")}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await yo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<qm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await yo(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=Zm()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,h,f)=>(!a&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,h,f))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:_i}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new gi}:await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:_i})})}catch(n){if(Re(n))return AB(n)&&(await this._removeSession(),await fi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new gi;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ba(this.storage,this.storageKey));const{data:h,error:f}=await Ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:_i});if(f)throw f;return a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new gi;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=Ym(t.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Re(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new gi;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Jn())throw new $d("No browser detected.");if(t.error||t.error_description||t.error_code)throw new $d(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Bb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $d("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Bb("No code detected.");const{data:_,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:h}=t;if(!i||!l||!a||!h)throw new $d("No session defined in URL");const f=Math.round(Date.now()/1e3),m=parseInt(l);let v=f+m;c&&(v=parseInt(c));const y=v-f;y*1e3<=ka&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${m}s`);const S=v-m;f-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,v,f):f-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,v,f);const{data:w,error:b}=await this._getUser(i);if(b)throw b;const E={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:m,expires_at:v,refresh_token:a,token_type:h,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:t.type},error:null}}catch(r){if(Re(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await yo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(IB(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await fi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=WB(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await ba(this.storage,this.storageKey,!0));try{return await Ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Re(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,h,f;const{data:m,error:v}=i;if(v)throw v;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ue(this.fetch,"GET",y,{headers:this.headers,jwt:(f=(h=m.session)===null||h===void 0?void 0:h.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return Jn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Re(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:a,provider:l,token:c,access_token:h,nonce:f}=t,m=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:h,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Fr}),{data:v,error:y}=m;return y?{data:{user:null,session:null},error:y}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new _a}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:y})}catch(s){if(Re(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await Ue(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await GB(async s=>(s>0&&await qB(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Fr})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Gm(i)&&Date.now()+a-r<ka})}catch(r){if(this._debug(n,"error",r),Re(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Jn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await yo(this.storage,this.storageKey);if(s&&this.userStorage){let a=await yo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Pa(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:Zm()}else if(s&&!s.user&&!s.user){const a=await yo(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await fi(this.storage,this.storageKey+"-user"),await Pa(this.storage,this.storageKey,s)):s.user=Zm()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<qm;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${qm}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Gm(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new gi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ip;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new gi;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Re(i)){const a={data:null,error:i};return Gm(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Pa(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Gb(s);await Pa(this.storage,this.storageKey,i)}else{const s=Gb(n);await Pa(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await fi(this.storage,this.storageKey),await fi(this.storage,this.storageKey+"-code-verifier"),await fi(this.storage,this.storageKey+"-user"),this.userStorage&&await fi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Jn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ka);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/ka);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ka}ms, refresh threshold is ${Bv} ticks`),s<=Bv&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof aN)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Jn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await ba(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ue(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:h}=await Ue(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?E6(t.webauthn.credential_response):C6(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Ue(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(n){if(Re(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const a=await Ue(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:b6(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:S6(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Re(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Ym(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const f=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+MB>s)return r;const{data:i,error:a}=await Ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:y,error:S}=await this.getSession();if(S||!y.session)return{data:null,error:S};r=y.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Ym(r);n!=null&&n.allowExpired||e6(i.exp);const h=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:i,header:s,signature:a},error:null}}const f=t6(s.alg),m=await crypto.subtle.importKey("jwk",h,f,!0,["verify"]);if(!await crypto.subtle.verify(f,m,a,zB(`${l}.${c}`)))throw new Vv("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}}hu.nextInstanceID=0;const I6=hu;class A6 extends I6{constructor(t){super(t)}}var L6=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(m){a(m)}}function c(f){try{h(r.throw(f))}catch(m){a(m)}}function h(f){f.done?i(f.value):s(f.value).then(l,c)}h((r=r.apply(e,t||[])).next())})};class D6{constructor(t,n,r){var s,i,a;this.supabaseUrl=t,this.supabaseKey=n;const l=PB(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:vB,realtime:xB,auth:Object.assign(Object.assign({},yB),{storageKey:c}),global:gB},f=kB(r??{},h);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=f.auth)!==null&&a!==void 0?a:{},this.headers,f.global.fetch),this.fetch=SB(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new Oz(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new fB(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new dz(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return L6(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:a,flowType:l,lock:c,debug:h},f,m){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new A6({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),f),storageKey:a,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:l,lock:c,debug:h,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Kz(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const dN=(e,t,n)=>new D6(e,t,n);function F6(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}F6()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $6="https://mmrmjmgezsuanxccjkgv.supabase.co",U6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1tcm1qbWdlenN1YW54Y2Nqa2d2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1Mjk1OTEsImV4cCI6MjA3NTEwNTU5MX0.EqnbVp3o2DV1DT7yGiGZNEnjUiHyDxuyJLxWh-2oXxQ",be=dN($6,U6),Fc="user_wishlist",hN=e=>{var n;const t={...e.snapshot,id:((n=e.snapshot)==null?void 0:n.id)??e.couch_id};return{id:e.id,userKey:e.user_key,couchId:t.id,storageId:e.couch_id,snapshot:t,createdAt:e.created_at}},fN=e=>e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)?e:null,z6=e=>{const t=typeof TextEncoder<"u"?new TextEncoder:null,n=t?Array.from(t.encode(e)):Array.from(e).map(i=>i.charCodeAt(0)&255);if(!n.length)return"00000000-0000-0000-0000-000000000000";const r=n.map(i=>i.toString(16).padStart(2,"0")).join(""),s=(r.length>=32?r.slice(0,32):r.padEnd(32,"0")).toLowerCase();return`${s.slice(0,8)}-${s.slice(8,12)}-${s.slice(12,16)}-${s.slice(16,20)}-${s.slice(20,32)}`},X0=e=>{const t=fN(e);return t||z6(e)},rf=X0,B6=20,J0=(e,t)=>{var s,i;const n=((s=t==null?void 0:t.user)==null?void 0:s.id)??(e==null?void 0:e.id)??null,r=fN(n);return r||(((i=t==null?void 0:t.user)==null?void 0:i.email)??(e==null?void 0:e.email)??null)},sf=async e=>{if(!e)return[];try{const{data:t,error:n}=await be.from(Fc).select("*").eq("user_key",e).order("created_at",{ascending:!1});if(n)throw n;return(t??[]).map(hN)}catch(t){throw console.error("Failed to fetch wishlist from Supabase",t),t}},pN=async(e,t,n)=>{if(!e)return null;const r=X0(t),{data:s,error:i}=await be.from(Fc).select("*").eq("user_key",e).eq("couch_id",r).maybeSingle();if(i)throw i;if(s)throw new Error("This couch is already in your wishlist.");const{count:a,error:l}=await be.from(Fc).select("id",{count:"exact",head:!0}).eq("user_key",e);if(l)throw console.error("Failed to count wishlist items",l),l;if((a??0)>=B6)throw new Error("You can save up to 20 couches. Remove one to add more.");const c={user_key:e,couch_id:r,snapshot:n};try{const{data:h,error:f}=await be.from(Fc).insert(c).select("*").single();if(f)throw f;const m=hN(h);return m.snapshot.id||(m.snapshot.id=t),m.couchId=m.snapshot.id,typeof window<"u"&&window.dispatchEvent(new Event("wishlist-updated")),m}catch(h){throw console.error("Supabase wishlist upsert failed",h),h}},ex=async(e,t)=>{if(!e)return;const n=X0(t);try{const{error:r}=await be.from(Fc).delete().eq("user_key",e).eq("couch_id",n);if(r)throw r}catch(r){throw console.error("Supabase wishlist remove failed",r),r}typeof window<"u"&&window.dispatchEvent(new Event("wishlist-updated"))},ch=new Map,mN="geocode:",W6=(e,t)=>{try{if(typeof window>"u")return;window.localStorage.setItem(mN+e,JSON.stringify(t))}catch(n){console.warn("Unable to persist geocode cache",n)}},H6=e=>{if(ch.has(e))return ch.get(e)??null;try{if(typeof window>"u")return null;const t=window.localStorage.getItem(mN+e);if(!t)return null;const n=JSON.parse(t);if(n&&typeof n.lat=="number"&&typeof n.lng=="number"&&typeof n.displayName=="string")return ch.set(e,n),n}catch(t){console.warn("Unable to read geocode cache",t)}return null},V6=e=>e.trim().toLowerCase(),gN=async(e,t)=>{const n=await fetch(e,{headers:{"Accept-Language":"en","User-Agent":"student-couch-app/1.0 (support@studentcouch.example)"},...t});if(!n.ok)throw new Error(`Geocoding request failed (${n.status})`);return n.json()},q6=async e=>{if(!(e!=null&&e.trim()))return null;const t=V6(e),n=H6(t);if(n)return n;const r=new URLSearchParams({q:e,format:"json",addressdetails:"1",limit:"1"}),s=await gN(`https://nominatim.openstreetmap.org/search?${r.toString()}`);if(!Array.isArray(s)||s.length===0)return null;const i=s[0],a=Number.parseFloat(i.lat),l=Number.parseFloat(i.lon);if(Number.isNaN(a)||Number.isNaN(l))return null;const c={lat:a,lng:l,displayName:i.display_name};return ch.set(t,c),W6(t,c),c},G6=async(e,{signal:t}={})=>{const n=e.trim();if(!n)return[];const r=new URLSearchParams({q:n,format:"json",addressdetails:"1",limit:"5",autocomplete:"1"}),s=await gN(`https://nominatim.openstreetmap.org/search?${r.toString()}`,{signal:t});return Array.isArray(s)?s.map(i=>{const a=Number.parseFloat(i.lat),l=Number.parseFloat(i.lon);return Number.isNaN(a)||Number.isNaN(l)?null:{lat:a,lng:l,displayName:i.display_name}}).filter(i=>!!i):[]},Y6="https://mmrmjmgezsuanxccjkgv.supabase.co",Z6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1tcm1qbWdlenN1YW54Y2Nqa2d2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1Mjk1OTEsImV4cCI6MjA3NTEwNTU5MX0.EqnbVp3o2DV1DT7yGiGZNEnjUiHyDxuyJLxWh-2oXxQ",vN=dN(Y6,Z6,{auth:{persistSession:!1,autoRefreshToken:!1}}),qs=e=>{var t,n;return{id:e.id,hostId:e.host_id,hostName:((t=e.availability_json)==null?void 0:t.hostName)??null,hostEmail:((n=e.availability_json)==null?void 0:n.hostEmail)??null,title:e.title??"New Listing",image:e.image_url,price:e.price_per_night,location:e.location,description:e.description,availability:e.availability_json??null,createdAt:e.created_at}},e1=e=>{if(!e)return!1;const t=e.trim();return t?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t):!1},Ud=()=>vN.from("user_listings").select("*").order("created_at",{ascending:!1}),Qm=e=>{if(!e)return null;const t=e.trim();return t.length?t:null},K6=async()=>{const{data:e,error:t}=await vN.from("user_listings").select("*").order("created_at",{ascending:!1});if(t)throw t;return(e??[]).map(qs)},Q6=async e=>{const{data:t,error:n}=await be.from("user_listings").select("*").eq("id",e).maybeSingle();if(n)throw n;return t?qs(t):null},Xm=async({listingId:e,hostEmail:t,hostName:n})=>{const r=Qm(e),s=Qm(t),i=Qm(n);if(r&&e1(r)){const a=await Q6(r);if(a)return a}if(r&&!e1(r))try{const{data:a,error:l}=await Ud().eq("id",r).limit(1).maybeSingle();if(l)throw l;if(a)return qs(a)}catch(a){console.warn("Failed to fetch listing by non-uuid id",a)}if(s){const a=await Ud().eq("availability_json->>hostEmail",s).limit(1).maybeSingle();if(a.error)throw a.error;if(a.data)return qs(a.data);const l=await Ud().ilike("availability_json->>hostEmail",`%${s}%`).limit(1).maybeSingle();if(l.error)throw l.error;if(l.data)return qs(l.data)}if(i){const{data:a,error:l}=await Ud().ilike("availability_json->>hostName",`%${i}%`).limit(1).maybeSingle();if(l)throw l;if(a)return qs(a)}return null},X6=async e=>{const{data:t,error:n}=await be.from("user_listings").select("*").eq("host_id",e).order("created_at",{ascending:!1});if(n)throw n;return(t??[]).map(qs)},qv=async e=>{const t={id:e.id,host_id:e.hostId,title:e.title,image_url:e.imageUrl,price_per_night:e.pricePerNight,location:e.location,description:e.description,availability_json:{...e.availability,hostName:e.hostName,hostEmail:e.hostEmail}},{data:n,error:r}=await be.from("user_listings").upsert(t,{onConflict:"id"}).select("*").single();if(r)throw r;return qs(n)},J6=async(e,t)=>{const{data:n,error:r}=await be.from("user_listings").select("*").eq("id",e).single();if(r)throw r;if(!n)throw new Error("Listing not found.");const s={...n.availability_json??{},published:t},{data:i,error:a}=await be.from("user_listings").update({availability_json:s}).eq("id",e).select("*").single();if(a)throw a;return qs(i)},dc={countries:["Switzerland"],citiesByCountry:{Switzerland:["Zurich","Geneva","Lausanne","Basel","Bern","Winterthur","Lucerne","St. Gallen","Lugano","Biel/Bienne","Thun","La Chaux-de-Fonds"]}},eW={lausanne:["lausanne","renens","crissier","ecublens","epalinges","pully","lutry","morges","prilly","romanel","savigny","bussigny","oreges","st-sulpice"]};function Gv(e,[t,n]){return Math.min(n,Math.max(t,e))}var tW=g.createContext(void 0);function zu(e){const t=g.useContext(tW);return e||t||"ltr"}function tx(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var nW=[" ","Enter","ArrowUp","ArrowDown"],rW=[" ","Enter"],Xo="Select",[op,ap,sW]=Df(Xo),[Al,$G]=Tn(Xo,[sW,ro]),lp=ro(),[iW,ao]=Al(Xo),[oW,aW]=Al(Xo),yN=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:h,name:f,autoComplete:m,disabled:v,required:y,form:S}=e,w=lp(t),[b,E]=g.useState(null),[_,C]=g.useState(null),[P,T]=g.useState(!1),R=zu(h),[O,A]=ti({prop:r,defaultProp:s??!1,onChange:i,caller:Xo}),[B,q]=ti({prop:a,defaultProp:l,onChange:c,caller:Xo}),Q=g.useRef(null),W=b?S||!!b.closest("form"):!0,[z,M]=g.useState(new Set),ee=Array.from(z).map(H=>H.props.value).join(";");return d.jsx(k0,{...w,children:d.jsxs(iW,{required:y,scope:t,trigger:b,onTriggerChange:E,valueNode:_,onValueNodeChange:C,valueNodeHasChildren:P,onValueNodeHasChildrenChange:T,contentId:bs(),value:B,onValueChange:q,open:O,onOpenChange:A,dir:R,triggerPointerDownPosRef:Q,disabled:v,children:[d.jsx(op.Provider,{scope:t,children:d.jsx(oW,{scope:e.__scopeSelect,onNativeOptionAdd:g.useCallback(H=>{M(Z=>new Set(Z).add(H))},[]),onNativeOptionRemove:g.useCallback(H=>{M(Z=>{const j=new Set(Z);return j.delete(H),j})},[]),children:n})}),W?d.jsxs(BN,{"aria-hidden":!0,required:y,tabIndex:-1,name:f,autoComplete:m,value:B,onChange:H=>q(H.target.value),disabled:v,form:S,children:[B===void 0?d.jsx("option",{value:""}):null,Array.from(z)]},ee):null]})})};yN.displayName=Xo;var xN="SelectTrigger",wN=g.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,i=lp(n),a=ao(xN,n),l=a.disabled||r,c=ze(t,a.onTriggerChange),h=ap(n),f=g.useRef("touch"),[m,v,y]=HN(w=>{const b=h().filter(C=>!C.disabled),E=b.find(C=>C.value===a.value),_=VN(b,w,E);_!==void 0&&a.onValueChange(_.value)}),S=w=>{l||(a.onOpenChange(!0),y()),w&&(a.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return d.jsx(Nu,{asChild:!0,...i,children:d.jsx(ke.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":WN(a.value)?"":void 0,...s,ref:c,onClick:le(s.onClick,w=>{w.currentTarget.focus(),f.current!=="mouse"&&S(w)}),onPointerDown:le(s.onPointerDown,w=>{f.current=w.pointerType;const b=w.target;b.hasPointerCapture(w.pointerId)&&b.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(S(w),w.preventDefault())}),onKeyDown:le(s.onKeyDown,w=>{const b=m.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&v(w.key),!(b&&w.key===" ")&&nW.includes(w.key)&&(S(),w.preventDefault())})})})});wN.displayName=xN;var _N="SelectValue",bN=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=e,c=ao(_N,n),{onValueNodeHasChildrenChange:h}=c,f=i!==void 0,m=ze(t,c.onValueNodeChange);return At(()=>{h(f)},[h,f]),d.jsx(ke.span,{...l,ref:m,style:{pointerEvents:"none"},children:WN(c.value)?d.jsx(d.Fragment,{children:a}):i})});bN.displayName=_N;var lW="SelectIcon",SN=g.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return d.jsx(ke.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});SN.displayName=lW;var cW="SelectPortal",EN=e=>d.jsx(Cl,{asChild:!0,...e});EN.displayName=cW;var Jo="SelectContent",CN=g.forwardRef((e,t)=>{const n=ao(Jo,e.__scopeSelect),[r,s]=g.useState();if(At(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?no.createPortal(d.jsx(kN,{scope:e.__scopeSelect,children:d.jsx(op.Slot,{scope:e.__scopeSelect,children:d.jsx("div",{children:e.children})})}),i):null}return d.jsx(PN,{...e,ref:t})});CN.displayName=Jo;var $r=10,[kN,lo]=Al(Jo),uW="SelectContentImpl",dW=Zi("SelectContent.RemoveScroll"),PN=g.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:v,collisionPadding:y,sticky:S,hideWhenDetached:w,avoidCollisions:b,...E}=e,_=ao(Jo,n),[C,P]=g.useState(null),[T,R]=g.useState(null),O=ze(t,ne=>P(ne)),[A,B]=g.useState(null),[q,Q]=g.useState(null),W=ap(n),[z,M]=g.useState(!1),ee=g.useRef(!1);g.useEffect(()=>{if(C)return Xf(C)},[C]),Qf();const H=g.useCallback(ne=>{const[he,...Me]=W().map(pe=>pe.ref.current),[Ee]=Me.slice(-1),je=document.activeElement;for(const pe of ne)if(pe===je||(pe==null||pe.scrollIntoView({block:"nearest"}),pe===he&&T&&(T.scrollTop=0),pe===Ee&&T&&(T.scrollTop=T.scrollHeight),pe==null||pe.focus(),document.activeElement!==je))return},[W,T]),Z=g.useCallback(()=>H([A,C]),[H,A,C]);g.useEffect(()=>{z&&Z()},[z,Z]);const{onOpenChange:j,triggerPointerDownPosRef:U}=_;g.useEffect(()=>{if(C){let ne={x:0,y:0};const he=Ee=>{var je,pe;ne={x:Math.abs(Math.round(Ee.pageX)-(((je=U.current)==null?void 0:je.x)??0)),y:Math.abs(Math.round(Ee.pageY)-(((pe=U.current)==null?void 0:pe.y)??0))}},Me=Ee=>{ne.x<=10&&ne.y<=10?Ee.preventDefault():C.contains(Ee.target)||j(!1),document.removeEventListener("pointermove",he),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",he),document.addEventListener("pointerup",Me,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",he),document.removeEventListener("pointerup",Me,{capture:!0})}}},[C,j,U]),g.useEffect(()=>{const ne=()=>j(!1);return window.addEventListener("blur",ne),window.addEventListener("resize",ne),()=>{window.removeEventListener("blur",ne),window.removeEventListener("resize",ne)}},[j]);const[Y,se]=HN(ne=>{const he=W().filter(je=>!je.disabled),Me=he.find(je=>je.ref.current===document.activeElement),Ee=VN(he,ne,Me);Ee&&setTimeout(()=>Ee.ref.current.focus())}),te=g.useCallback((ne,he,Me)=>{const Ee=!ee.current&&!Me;(_.value!==void 0&&_.value===he||Ee)&&(B(ne),Ee&&(ee.current=!0))},[_.value]),ue=g.useCallback(()=>C==null?void 0:C.focus(),[C]),F=g.useCallback((ne,he,Me)=>{const Ee=!ee.current&&!Me;(_.value!==void 0&&_.value===he||Ee)&&Q(ne)},[_.value]),J=r==="popper"?Yv:NN,G=J===Yv?{side:l,sideOffset:c,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:v,collisionPadding:y,sticky:S,hideWhenDetached:w,avoidCollisions:b}:{};return d.jsx(kN,{scope:n,content:C,viewport:T,onViewportChange:R,itemRefCallback:te,selectedItem:A,onItemLeave:ue,itemTextRefCallback:F,focusSelectedItem:Z,selectedItemText:q,position:r,isPositioned:z,searchRef:Y,children:d.jsx(Lu,{as:dW,allowPinchZoom:!0,children:d.jsx(Au,{asChild:!0,trapped:_.open,onMountAutoFocus:ne=>{ne.preventDefault()},onUnmountAutoFocus:le(s,ne=>{var he;(he=_.trigger)==null||he.focus({preventScroll:!0}),ne.preventDefault()}),children:d.jsx(ra,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:ne=>ne.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:d.jsx(J,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:ne=>ne.preventDefault(),...E,...G,onPlaced:()=>M(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:le(E.onKeyDown,ne=>{const he=ne.ctrlKey||ne.altKey||ne.metaKey;if(ne.key==="Tab"&&ne.preventDefault(),!he&&ne.key.length===1&&se(ne.key),["ArrowUp","ArrowDown","Home","End"].includes(ne.key)){let Ee=W().filter(je=>!je.disabled).map(je=>je.ref.current);if(["ArrowUp","End"].includes(ne.key)&&(Ee=Ee.slice().reverse()),["ArrowUp","ArrowDown"].includes(ne.key)){const je=ne.target,pe=Ee.indexOf(je);Ee=Ee.slice(pe+1)}setTimeout(()=>H(Ee)),ne.preventDefault()}})})})})})})});PN.displayName=uW;var hW="SelectItemAlignedPosition",NN=g.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,i=ao(Jo,n),a=lo(Jo,n),[l,c]=g.useState(null),[h,f]=g.useState(null),m=ze(t,O=>f(O)),v=ap(n),y=g.useRef(!1),S=g.useRef(!0),{viewport:w,selectedItem:b,selectedItemText:E,focusSelectedItem:_}=a,C=g.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&h&&w&&b&&E){const O=i.trigger.getBoundingClientRect(),A=h.getBoundingClientRect(),B=i.valueNode.getBoundingClientRect(),q=E.getBoundingClientRect();if(i.dir!=="rtl"){const je=q.left-A.left,pe=B.left-je,V=O.left-pe,oe=O.width+V,ye=Math.max(oe,A.width),Oe=window.innerWidth-$r,dt=Gv(pe,[$r,Math.max($r,Oe-ye)]);l.style.minWidth=oe+"px",l.style.left=dt+"px"}else{const je=A.right-q.right,pe=window.innerWidth-B.right-je,V=window.innerWidth-O.right-pe,oe=O.width+V,ye=Math.max(oe,A.width),Oe=window.innerWidth-$r,dt=Gv(pe,[$r,Math.max($r,Oe-ye)]);l.style.minWidth=oe+"px",l.style.right=dt+"px"}const Q=v(),W=window.innerHeight-$r*2,z=w.scrollHeight,M=window.getComputedStyle(h),ee=parseInt(M.borderTopWidth,10),H=parseInt(M.paddingTop,10),Z=parseInt(M.borderBottomWidth,10),j=parseInt(M.paddingBottom,10),U=ee+H+z+j+Z,Y=Math.min(b.offsetHeight*5,U),se=window.getComputedStyle(w),te=parseInt(se.paddingTop,10),ue=parseInt(se.paddingBottom,10),F=O.top+O.height/2-$r,J=W-F,G=b.offsetHeight/2,ne=b.offsetTop+G,he=ee+H+ne,Me=U-he;if(he<=F){const je=Q.length>0&&b===Q[Q.length-1].ref.current;l.style.bottom="0px";const pe=h.clientHeight-w.offsetTop-w.offsetHeight,V=Math.max(J,G+(je?ue:0)+pe+Z),oe=he+V;l.style.height=oe+"px"}else{const je=Q.length>0&&b===Q[0].ref.current;l.style.top="0px";const V=Math.max(F,ee+w.offsetTop+(je?te:0)+G)+Me;l.style.height=V+"px",w.scrollTop=he-F+w.offsetTop}l.style.margin=`${$r}px 0`,l.style.minHeight=Y+"px",l.style.maxHeight=W+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[v,i.trigger,i.valueNode,l,h,w,b,E,i.dir,r]);At(()=>C(),[C]);const[P,T]=g.useState();At(()=>{h&&T(window.getComputedStyle(h).zIndex)},[h]);const R=g.useCallback(O=>{O&&S.current===!0&&(C(),_==null||_(),S.current=!1)},[C,_]);return d.jsx(pW,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:R,children:d.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:d.jsx(ke.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});NN.displayName=hW;var fW="SelectPopperPosition",Yv=g.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=$r,...i}=e,a=lp(n);return d.jsx(Vf,{...a,...i,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Yv.displayName=fW;var[pW,nx]=Al(Jo,{}),Zv="SelectViewport",TN=g.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,i=lo(Zv,n),a=nx(Zv,n),l=ze(t,i.onViewportChange),c=g.useRef(0);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),d.jsx(op.Slot,{scope:n,children:d.jsx(ke.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:le(s.onScroll,h=>{const f=h.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:v}=a;if(v!=null&&v.current&&m){const y=Math.abs(c.current-f.scrollTop);if(y>0){const S=window.innerHeight-$r*2,w=parseFloat(m.style.minHeight),b=parseFloat(m.style.height),E=Math.max(w,b);if(E<S){const _=E+y,C=Math.min(S,_),P=_-C;m.style.height=C+"px",m.style.bottom==="0px"&&(f.scrollTop=P>0?P:0,m.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});TN.displayName=Zv;var jN="SelectGroup",[mW,gW]=Al(jN),vW=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=bs();return d.jsx(mW,{scope:n,id:s,children:d.jsx(ke.div,{role:"group","aria-labelledby":s,...r,ref:t})})});vW.displayName=jN;var RN="SelectLabel",MN=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=gW(RN,n);return d.jsx(ke.div,{id:s.id,...r,ref:t})});MN.displayName=RN;var of="SelectItem",[yW,ON]=Al(of),IN=g.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=e,l=ao(of,n),c=lo(of,n),h=l.value===r,[f,m]=g.useState(i??""),[v,y]=g.useState(!1),S=ze(t,_=>{var C;return(C=c.itemRefCallback)==null?void 0:C.call(c,_,r,s)}),w=bs(),b=g.useRef("touch"),E=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return d.jsx(yW,{scope:n,value:r,disabled:s,textId:w,isSelected:h,onItemTextChange:g.useCallback(_=>{m(C=>C||((_==null?void 0:_.textContent)??"").trim())},[]),children:d.jsx(op.ItemSlot,{scope:n,value:r,disabled:s,textValue:f,children:d.jsx(ke.div,{role:"option","aria-labelledby":w,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:S,onFocus:le(a.onFocus,()=>y(!0)),onBlur:le(a.onBlur,()=>y(!1)),onClick:le(a.onClick,()=>{b.current!=="mouse"&&E()}),onPointerUp:le(a.onPointerUp,()=>{b.current==="mouse"&&E()}),onPointerDown:le(a.onPointerDown,_=>{b.current=_.pointerType}),onPointerMove:le(a.onPointerMove,_=>{var C;b.current=_.pointerType,s?(C=c.onItemLeave)==null||C.call(c):b.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:le(a.onPointerLeave,_=>{var C;_.currentTarget===document.activeElement&&((C=c.onItemLeave)==null||C.call(c))}),onKeyDown:le(a.onKeyDown,_=>{var P;((P=c.searchRef)==null?void 0:P.current)!==""&&_.key===" "||(rW.includes(_.key)&&E(),_.key===" "&&_.preventDefault())})})})})});IN.displayName=of;var _c="SelectItemText",AN=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...i}=e,a=ao(_c,n),l=lo(_c,n),c=ON(_c,n),h=aW(_c,n),[f,m]=g.useState(null),v=ze(t,E=>m(E),c.onItemTextChange,E=>{var _;return(_=l.itemTextRefCallback)==null?void 0:_.call(l,E,c.value,c.disabled)}),y=f==null?void 0:f.textContent,S=g.useMemo(()=>d.jsx("option",{value:c.value,disabled:c.disabled,children:y},c.value),[c.disabled,c.value,y]),{onNativeOptionAdd:w,onNativeOptionRemove:b}=h;return At(()=>(w(S),()=>b(S)),[w,b,S]),d.jsxs(d.Fragment,{children:[d.jsx(ke.span,{id:c.textId,...i,ref:v}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?no.createPortal(i.children,a.valueNode):null]})});AN.displayName=_c;var LN="SelectItemIndicator",DN=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return ON(LN,n).isSelected?d.jsx(ke.span,{"aria-hidden":!0,...r,ref:t}):null});DN.displayName=LN;var Kv="SelectScrollUpButton",FN=g.forwardRef((e,t)=>{const n=lo(Kv,e.__scopeSelect),r=nx(Kv,e.__scopeSelect),[s,i]=g.useState(!1),a=ze(t,r.onScrollButtonChange);return At(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=c.scrollTop>0;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?d.jsx(UN,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});FN.displayName=Kv;var Qv="SelectScrollDownButton",$N=g.forwardRef((e,t)=>{const n=lo(Qv,e.__scopeSelect),r=nx(Qv,e.__scopeSelect),[s,i]=g.useState(!1),a=ze(t,r.onScrollButtonChange);return At(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<h;i(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?d.jsx(UN,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});$N.displayName=Qv;var UN=g.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,i=lo("SelectScrollButton",n),a=g.useRef(null),l=ap(n),c=g.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),At(()=>{var f;const h=l().find(m=>m.ref.current===document.activeElement);(f=h==null?void 0:h.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),d.jsx(ke.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:le(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:le(s.onPointerMove,()=>{var h;(h=i.onItemLeave)==null||h.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:le(s.onPointerLeave,()=>{c()})})}),xW="SelectSeparator",zN=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return d.jsx(ke.div,{"aria-hidden":!0,...r,ref:t})});zN.displayName=xW;var Xv="SelectArrow",wW=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=lp(n),i=ao(Xv,n),a=lo(Xv,n);return i.open&&a.position==="popper"?d.jsx(qf,{...s,...r,ref:t}):null});wW.displayName=Xv;var _W="SelectBubbleInput",BN=g.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=g.useRef(null),i=ze(r,s),a=tx(t);return g.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==t&&f){const m=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(m)}},[a,t]),d.jsx(ke.select,{...n,style:{...mC,...n.style},ref:i,defaultValue:t})});BN.displayName=_W;function WN(e){return e===""||e===void 0}function HN(e){const t=Mt(e),n=g.useRef(""),r=g.useRef(0),s=g.useCallback(a=>{const l=n.current+a;t(l),function c(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function VN(e,t,n){const s=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let a=bW(e,Math.max(i,0));s.length===1&&(a=a.filter(h=>h!==n));const c=a.find(h=>h.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function bW(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var SW=yN,qN=wN,EW=bN,CW=SN,kW=EN,GN=CN,PW=TN,YN=MN,ZN=IN,NW=AN,TW=DN,KN=FN,QN=$N,XN=zN;const Ai=SW,Li=EW,Gs=g.forwardRef(({className:e,children:t,...n},r)=>d.jsxs(qN,{ref:r,className:Te("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,d.jsx(CW,{asChild:!0,children:d.jsx(zf,{className:"h-4 w-4 opacity-50"})})]}));Gs.displayName=qN.displayName;const JN=g.forwardRef(({className:e,...t},n)=>d.jsx(KN,{ref:n,className:Te("flex cursor-default items-center justify-center py-1",e),...t,children:d.jsx(FA,{className:"h-4 w-4"})}));JN.displayName=KN.displayName;const eT=g.forwardRef(({className:e,...t},n)=>d.jsx(QN,{ref:n,className:Te("flex cursor-default items-center justify-center py-1",e),...t,children:d.jsx(zf,{className:"h-4 w-4"})}));eT.displayName=QN.displayName;const Ys=g.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>d.jsx(kW,{children:d.jsxs(GN,{ref:s,className:Te("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[d.jsx(JN,{}),d.jsx(PW,{className:Te("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),d.jsx(eT,{})]})}));Ys.displayName=GN.displayName;const jW=g.forwardRef(({className:e,...t},n)=>d.jsx(YN,{ref:n,className:Te("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));jW.displayName=YN.displayName;const qr=g.forwardRef(({className:e,children:t,...n},r)=>d.jsxs(ZN,{ref:r,className:Te("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(TW,{children:d.jsx(h0,{className:"h-4 w-4"})})}),d.jsx(NW,{children:t})]}));qr.displayName=ZN.displayName;const RW=g.forwardRef(({className:e,...t},n)=>d.jsx(XN,{ref:n,className:Te("-mx-1 my-1 h-px bg-muted",e),...t}));RW.displayName=XN.displayName;function tT(e,t){const n=g.useRef(t);g.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function MW(e,t,n){t.center!==n.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==n.radius&&e.setRadius(t.radius)}const OW=1;function IW(e){return Object.freeze({__version:OW,map:e})}function nT(e,t){return Object.freeze({...e,...t})}const rT=g.createContext(null),sT=rT.Provider;function rx(){const e=g.useContext(rT);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function iT(e){function t(n,r){const{instance:s,context:i}=e(n).current;return g.useImperativeHandle(r,()=>s),n.children==null?null:re.createElement(sT,{value:i},n.children)}return g.forwardRef(t)}function AW(e){function t(n,r){const[s,i]=g.useState(!1),{instance:a}=e(n,i).current;g.useImperativeHandle(r,()=>a),g.useEffect(function(){s&&a.update()},[a,s,n.children]);const l=a._contentNode;return l?no.createPortal(n.children,l):null}return g.forwardRef(t)}function LW(e){function t(n,r){const{instance:s}=e(n).current;return g.useImperativeHandle(r,()=>s),null}return g.forwardRef(t)}function sx(e,t){const n=g.useRef();g.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function cp(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function DW(e,t){return function(r,s){const i=rx(),a=e(cp(r,i),i);return tT(i.map,r.attribution),sx(a.current,r.eventHandlers),t(a.current,i,r,s),a}}var Jv={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(ir,function(n){var r="1.9.4";function s(o){var u,p,x,k;for(p=1,x=arguments.length;p<x;p++){k=arguments[p];for(u in k)o[u]=k[u]}return o}var i=Object.create||function(){function o(){}return function(u){return o.prototype=u,new o}}();function a(o,u){var p=Array.prototype.slice;if(o.bind)return o.bind.apply(o,p.call(arguments,1));var x=p.call(arguments,2);return function(){return o.apply(u,x.length?x.concat(p.call(arguments)):arguments)}}var l=0;function c(o){return"_leaflet_id"in o||(o._leaflet_id=++l),o._leaflet_id}function h(o,u,p){var x,k,N,I;return I=function(){x=!1,k&&(N.apply(p,k),k=!1)},N=function(){x?k=arguments:(o.apply(p,arguments),setTimeout(I,u),x=!0)},N}function f(o,u,p){var x=u[1],k=u[0],N=x-k;return o===x&&p?o:((o-k)%N+N)%N+k}function m(){return!1}function v(o,u){if(u===!1)return o;var p=Math.pow(10,u===void 0?6:u);return Math.round(o*p)/p}function y(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function S(o){return y(o).split(/\s+/)}function w(o,u){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?i(o.options):{});for(var p in u)o.options[p]=u[p];return o.options}function b(o,u,p){var x=[];for(var k in o)x.push(encodeURIComponent(p?k.toUpperCase():k)+"="+encodeURIComponent(o[k]));return(!u||u.indexOf("?")===-1?"?":"&")+x.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function _(o,u){return o.replace(E,function(p,x){var k=u[x];if(k===void 0)throw new Error("No value provided for variable "+p);return typeof k=="function"&&(k=k(u)),k})}var C=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function P(o,u){for(var p=0;p<o.length;p++)if(o[p]===u)return p;return-1}var T="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function R(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var O=0;function A(o){var u=+new Date,p=Math.max(0,16-(u-O));return O=u+p,window.setTimeout(o,p)}var B=window.requestAnimationFrame||R("RequestAnimationFrame")||A,q=window.cancelAnimationFrame||R("CancelAnimationFrame")||R("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function Q(o,u,p){if(p&&B===A)o.call(u);else return B.call(window,a(o,u))}function W(o){o&&q.call(window,o)}var z={__proto__:null,extend:s,create:i,bind:a,get lastId(){return l},stamp:c,throttle:h,wrapNum:f,falseFn:m,formatNum:v,trim:y,splitWords:S,setOptions:w,getParamString:b,template:_,isArray:C,indexOf:P,emptyImageUrl:T,requestFn:B,cancelFn:q,requestAnimFrame:Q,cancelAnimFrame:W};function M(){}M.extend=function(o){var u=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=u.__super__=this.prototype,x=i(p);x.constructor=u,u.prototype=x;for(var k in this)Object.prototype.hasOwnProperty.call(this,k)&&k!=="prototype"&&k!=="__super__"&&(u[k]=this[k]);return o.statics&&s(u,o.statics),o.includes&&(ee(o.includes),s.apply(null,[x].concat(o.includes))),s(x,o),delete x.statics,delete x.includes,x.options&&(x.options=p.options?i(p.options):{},s(x.options,o.options)),x._initHooks=[],x.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var N=0,I=x._initHooks.length;N<I;N++)x._initHooks[N].call(this)}},u},M.include=function(o){var u=this.prototype.options;return s(this.prototype,o),o.options&&(this.prototype.options=u,this.mergeOptions(o.options)),this},M.mergeOptions=function(o){return s(this.prototype.options,o),this},M.addInitHook=function(o){var u=Array.prototype.slice.call(arguments,1),p=typeof o=="function"?o:function(){this[o].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function ee(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=C(o)?o:[o];for(var u=0;u<o.length;u++)o[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var H={on:function(o,u,p){if(typeof o=="object")for(var x in o)this._on(x,o[x],u);else{o=S(o);for(var k=0,N=o.length;k<N;k++)this._on(o[k],u,p)}return this},off:function(o,u,p){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var x in o)this._off(x,o[x],u);else{o=S(o);for(var k=arguments.length===1,N=0,I=o.length;N<I;N++)k?this._off(o[N]):this._off(o[N],u,p)}return this},_on:function(o,u,p,x){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(o,u,p)===!1){p===this&&(p=void 0);var k={fn:u,ctx:p};x&&(k.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(k)}},_off:function(o,u,p){var x,k,N;if(this._events&&(x=this._events[o],!!x)){if(arguments.length===1){if(this._firingCount)for(k=0,N=x.length;k<N;k++)x[k].fn=m;delete this._events[o];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var I=this._listens(o,u,p);if(I!==!1){var K=x[I];this._firingCount&&(K.fn=m,this._events[o]=x=x.slice()),x.splice(I,1)}}},fire:function(o,u,p){if(!this.listens(o,p))return this;var x=s({},u,{type:o,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var k=this._events[o];if(k){this._firingCount=this._firingCount+1||1;for(var N=0,I=k.length;N<I;N++){var K=k[N],X=K.fn;K.once&&this.off(o,X,K.ctx),X.call(K.ctx||this,x)}this._firingCount--}}return p&&this._propagateEvent(x),this},listens:function(o,u,p,x){typeof o!="string"&&console.warn('"string" type argument expected');var k=u;typeof u!="function"&&(x=!!u,k=void 0,p=void 0);var N=this._events&&this._events[o];if(N&&N.length&&this._listens(o,k,p)!==!1)return!0;if(x){for(var I in this._eventParents)if(this._eventParents[I].listens(o,u,p,x))return!0}return!1},_listens:function(o,u,p){if(!this._events)return!1;var x=this._events[o]||[];if(!u)return!!x.length;p===this&&(p=void 0);for(var k=0,N=x.length;k<N;k++)if(x[k].fn===u&&x[k].ctx===p)return k;return!1},once:function(o,u,p){if(typeof o=="object")for(var x in o)this._on(x,o[x],u,!0);else{o=S(o);for(var k=0,N=o.length;k<N;k++)this._on(o[k],u,p,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[c(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[c(o)],this},_propagateEvent:function(o){for(var u in this._eventParents)this._eventParents[u].fire(o.type,s({layer:o.target,propagatedFrom:o.target},o),!0)}};H.addEventListener=H.on,H.removeEventListener=H.clearAllEventListeners=H.off,H.addOneTimeEventListener=H.once,H.fireEvent=H.fire,H.hasEventListeners=H.listens;var Z=M.extend(H);function j(o,u,p){this.x=p?Math.round(o):o,this.y=p?Math.round(u):u}var U=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};j.prototype={clone:function(){return new j(this.x,this.y)},add:function(o){return this.clone()._add(Y(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(Y(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new j(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new j(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=U(this.x),this.y=U(this.y),this},distanceTo:function(o){o=Y(o);var u=o.x-this.x,p=o.y-this.y;return Math.sqrt(u*u+p*p)},equals:function(o){return o=Y(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=Y(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function Y(o,u,p){return o instanceof j?o:C(o)?new j(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new j(o.x,o.y):new j(o,u,p)}function se(o,u){if(o)for(var p=u?[o,u]:o,x=0,k=p.length;x<k;x++)this.extend(p[x])}se.prototype={extend:function(o){var u,p;if(!o)return this;if(o instanceof j||typeof o[0]=="number"||"x"in o)u=p=Y(o);else if(o=te(o),u=o.min,p=o.max,!u||!p)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=p.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(o){return Y((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return Y(this.min.x,this.max.y)},getTopRight:function(){return Y(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var u,p;return typeof o[0]=="number"||o instanceof j?o=Y(o):o=te(o),o instanceof se?(u=o.min,p=o.max):u=p=o,u.x>=this.min.x&&p.x<=this.max.x&&u.y>=this.min.y&&p.y<=this.max.y},intersects:function(o){o=te(o);var u=this.min,p=this.max,x=o.min,k=o.max,N=k.x>=u.x&&x.x<=p.x,I=k.y>=u.y&&x.y<=p.y;return N&&I},overlaps:function(o){o=te(o);var u=this.min,p=this.max,x=o.min,k=o.max,N=k.x>u.x&&x.x<p.x,I=k.y>u.y&&x.y<p.y;return N&&I},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var u=this.min,p=this.max,x=Math.abs(u.x-p.x)*o,k=Math.abs(u.y-p.y)*o;return te(Y(u.x-x,u.y-k),Y(p.x+x,p.y+k))},equals:function(o){return o?(o=te(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function te(o,u){return!o||o instanceof se?o:new se(o,u)}function ue(o,u){if(o)for(var p=u?[o,u]:o,x=0,k=p.length;x<k;x++)this.extend(p[x])}ue.prototype={extend:function(o){var u=this._southWest,p=this._northEast,x,k;if(o instanceof J)x=o,k=o;else if(o instanceof ue){if(x=o._southWest,k=o._northEast,!x||!k)return this}else return o?this.extend(G(o)||F(o)):this;return!u&&!p?(this._southWest=new J(x.lat,x.lng),this._northEast=new J(k.lat,k.lng)):(u.lat=Math.min(x.lat,u.lat),u.lng=Math.min(x.lng,u.lng),p.lat=Math.max(k.lat,p.lat),p.lng=Math.max(k.lng,p.lng)),this},pad:function(o){var u=this._southWest,p=this._northEast,x=Math.abs(u.lat-p.lat)*o,k=Math.abs(u.lng-p.lng)*o;return new ue(new J(u.lat-x,u.lng-k),new J(p.lat+x,p.lng+k))},getCenter:function(){return new J((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new J(this.getNorth(),this.getWest())},getSouthEast:function(){return new J(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof J||"lat"in o?o=G(o):o=F(o);var u=this._southWest,p=this._northEast,x,k;return o instanceof ue?(x=o.getSouthWest(),k=o.getNorthEast()):x=k=o,x.lat>=u.lat&&k.lat<=p.lat&&x.lng>=u.lng&&k.lng<=p.lng},intersects:function(o){o=F(o);var u=this._southWest,p=this._northEast,x=o.getSouthWest(),k=o.getNorthEast(),N=k.lat>=u.lat&&x.lat<=p.lat,I=k.lng>=u.lng&&x.lng<=p.lng;return N&&I},overlaps:function(o){o=F(o);var u=this._southWest,p=this._northEast,x=o.getSouthWest(),k=o.getNorthEast(),N=k.lat>u.lat&&x.lat<p.lat,I=k.lng>u.lng&&x.lng<p.lng;return N&&I},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,u){return o?(o=F(o),this._southWest.equals(o.getSouthWest(),u)&&this._northEast.equals(o.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function F(o,u){return o instanceof ue?o:new ue(o,u)}function J(o,u,p){if(isNaN(o)||isNaN(u))throw new Error("Invalid LatLng object: ("+o+", "+u+")");this.lat=+o,this.lng=+u,p!==void 0&&(this.alt=+p)}J.prototype={equals:function(o,u){if(!o)return!1;o=G(o);var p=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return p<=(u===void 0?1e-9:u)},toString:function(o){return"LatLng("+v(this.lat,o)+", "+v(this.lng,o)+")"},distanceTo:function(o){return he.distance(this,G(o))},wrap:function(){return he.wrapLatLng(this)},toBounds:function(o){var u=180*o/40075017,p=u/Math.cos(Math.PI/180*this.lat);return F([this.lat-u,this.lng-p],[this.lat+u,this.lng+p])},clone:function(){return new J(this.lat,this.lng,this.alt)}};function G(o,u,p){return o instanceof J?o:C(o)&&typeof o[0]!="object"?o.length===3?new J(o[0],o[1],o[2]):o.length===2?new J(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new J(o.lat,"lng"in o?o.lng:o.lon,o.alt):u===void 0?null:new J(o,u,p)}var ne={latLngToPoint:function(o,u){var p=this.projection.project(o),x=this.scale(u);return this.transformation._transform(p,x)},pointToLatLng:function(o,u){var p=this.scale(u),x=this.transformation.untransform(o,p);return this.projection.unproject(x)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var u=this.projection.bounds,p=this.scale(o),x=this.transformation.transform(u.min,p),k=this.transformation.transform(u.max,p);return new se(x,k)},infinite:!1,wrapLatLng:function(o){var u=this.wrapLng?f(o.lng,this.wrapLng,!0):o.lng,p=this.wrapLat?f(o.lat,this.wrapLat,!0):o.lat,x=o.alt;return new J(p,u,x)},wrapLatLngBounds:function(o){var u=o.getCenter(),p=this.wrapLatLng(u),x=u.lat-p.lat,k=u.lng-p.lng;if(x===0&&k===0)return o;var N=o.getSouthWest(),I=o.getNorthEast(),K=new J(N.lat-x,N.lng-k),X=new J(I.lat-x,I.lng-k);return new ue(K,X)}},he=s({},ne,{wrapLng:[-180,180],R:6371e3,distance:function(o,u){var p=Math.PI/180,x=o.lat*p,k=u.lat*p,N=Math.sin((u.lat-o.lat)*p/2),I=Math.sin((u.lng-o.lng)*p/2),K=N*N+Math.cos(x)*Math.cos(k)*I*I,X=2*Math.atan2(Math.sqrt(K),Math.sqrt(1-K));return this.R*X}}),Me=6378137,Ee={R:Me,MAX_LATITUDE:85.0511287798,project:function(o){var u=Math.PI/180,p=this.MAX_LATITUDE,x=Math.max(Math.min(p,o.lat),-p),k=Math.sin(x*u);return new j(this.R*o.lng*u,this.R*Math.log((1+k)/(1-k))/2)},unproject:function(o){var u=180/Math.PI;return new J((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*u,o.x*u/this.R)},bounds:function(){var o=Me*Math.PI;return new se([-o,-o],[o,o])}()};function je(o,u,p,x){if(C(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=u,this._c=p,this._d=x}je.prototype={transform:function(o,u){return this._transform(o.clone(),u)},_transform:function(o,u){return u=u||1,o.x=u*(this._a*o.x+this._b),o.y=u*(this._c*o.y+this._d),o},untransform:function(o,u){return u=u||1,new j((o.x/u-this._b)/this._a,(o.y/u-this._d)/this._c)}};function pe(o,u,p,x){return new je(o,u,p,x)}var V=s({},he,{code:"EPSG:3857",projection:Ee,transformation:function(){var o=.5/(Math.PI*Ee.R);return pe(o,.5,-o,.5)}()}),oe=s({},V,{code:"EPSG:900913"});function ye(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Oe(o,u){var p="",x,k,N,I,K,X;for(x=0,N=o.length;x<N;x++){for(K=o[x],k=0,I=K.length;k<I;k++)X=K[k],p+=(k?"L":"M")+X.x+" "+X.y;p+=u?Ce.svg?"z":"x":""}return p||"M0 0"}var dt=document.documentElement.style,Lt="ActiveXObject"in window,yn=Lt&&!document.addEventListener,ur="msLaunchUri"in navigator&&!("documentMode"in document),en=pr("webkit"),Wt=pr("android"),tn=pr("android 2")||pr("android 3"),rs=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),dr=Wt&&pr("Google")&&rs<537&&!("AudioNode"in window),ot=!!window.opera,nn=!ur&&pr("chrome"),hr=pr("gecko")&&!en&&!ot&&!Lt,Or=!nn&&pr("safari"),Ot=pr("phantom"),ii="OTransition"in dt,Zn=navigator.platform.indexOf("Win")===0,ss=Lt&&"transition"in dt,Rn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!tn,Ts="MozPerspective"in dt,ln=!window.L_DISABLE_3D&&(ss||Rn||Ts)&&!ii&&!Ot,Kn=typeof orientation<"u"||pr("mobile"),co=Kn&&en,js=Kn&&Rn,is=!window.PointerEvent&&window.MSPointerEvent,Pe=!!(window.PointerEvent||is),Ye="ontouchstart"in window||!!window.TouchEvent,qe=!window.L_NO_TOUCH&&(Ye||Pe),we=Kn&&ot,me=Kn&&hr,fe=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,De=function(){var o=!1;try{var u=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",m,u),window.removeEventListener("testPassiveEventSupport",m,u)}catch{}return o}(),ft=function(){return!!document.createElement("canvas").getContext}(),Et=!!(document.createElementNS&&ye("svg").createSVGRect),Yt=!!Et&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Qn=!Et&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var u=o.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),Nt=navigator.platform.indexOf("Mac")===0,fr=navigator.platform.indexOf("Linux")===0;function pr(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Ce={ie:Lt,ielt9:yn,edge:ur,webkit:en,android:Wt,android23:tn,androidStock:dr,opera:ot,chrome:nn,gecko:hr,safari:Or,phantom:Ot,opera12:ii,win:Zn,ie3d:ss,webkit3d:Rn,gecko3d:Ts,any3d:ln,mobile:Kn,mobileWebkit:co,mobileWebkit3d:js,msPointer:is,pointer:Pe,touch:qe,touchNative:Ye,mobileOpera:we,mobileGecko:me,retina:fe,passiveEvents:De,canvas:ft,svg:Et,vml:Qn,inlineSvg:Yt,mac:Nt,linux:fr},Fl=Ce.msPointer?"MSPointerDown":"pointerdown",$l=Ce.msPointer?"MSPointerMove":"pointermove",Ul=Ce.msPointer?"MSPointerUp":"pointerup",Yu=Ce.msPointer?"MSPointerCancel":"pointercancel",uo={touchstart:Fl,touchmove:$l,touchend:Ul,touchcancel:Yu},os={touchstart:Se,touchmove:et,touchend:et,touchcancel:et},Rs={},zl=!1;function Cp(o,u,p){return u==="touchstart"&&ce(),os[u]?(p=os[u].bind(this,p),o.addEventListener(uo[u],p,!1),p):(console.warn("wrong event specified:",u),m)}function Mx(o,u,p){if(!uo[u]){console.warn("wrong event specified:",u);return}o.removeEventListener(uo[u],p,!1)}function $(o){Rs[o.pointerId]=o}function de(o){Rs[o.pointerId]&&(Rs[o.pointerId]=o)}function xe(o){delete Rs[o.pointerId]}function ce(){zl||(document.addEventListener(Fl,$,!0),document.addEventListener($l,de,!0),document.addEventListener(Ul,xe,!0),document.addEventListener(Yu,xe,!0),zl=!0)}function et(o,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var p in Rs)u.touches.push(Rs[p]);u.changedTouches=[u],o(u)}}function Se(o,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&rn(u),et(o,u)}function Fe(o){var u={},p,x;for(x in o)p=o[x],u[x]=p&&p.bind?p.bind(o):p;return o=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var it=200;function mr(o,u){o.addEventListener("dblclick",u);var p=0,x;function k(N){if(N.detail!==1){x=N.detail;return}if(!(N.pointerType==="mouse"||N.sourceCapabilities&&!N.sourceCapabilities.firesTouchEvents)){var I=Ax(N);if(!(I.some(function(X){return X instanceof HTMLLabelElement&&X.attributes.for})&&!I.some(function(X){return X instanceof HTMLInputElement||X instanceof HTMLSelectElement}))){var K=Date.now();K-p<=it?(x++,x===2&&u(Fe(N))):x=1,p=K}}}return o.addEventListener("click",k),{dblclick:u,simDblclick:k}}function gr(o,u){o.removeEventListener("dblclick",u.dblclick),o.removeEventListener("click",u.simDblclick)}var vr=Zu(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),cn=Zu(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xt=cn==="webkitTransition"||cn==="OTransition"?cn+"End":"transitionend";function Xn(o){return typeof o=="string"?document.getElementById(o):o}function Tt(o,u){var p=o.style[u]||o.currentStyle&&o.currentStyle[u];if((!p||p==="auto")&&document.defaultView){var x=document.defaultView.getComputedStyle(o,null);p=x?x[u]:null}return p==="auto"?null:p}function $e(o,u,p){var x=document.createElement(o);return x.className=u||"",p&&p.appendChild(x),x}function Qe(o){var u=o.parentNode;u&&u.removeChild(o)}function Zt(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function un(o){var u=o.parentNode;u&&u.lastChild!==o&&u.appendChild(o)}function Ze(o){var u=o.parentNode;u&&u.firstChild!==o&&u.insertBefore(o,u.firstChild)}function Mn(o,u){if(o.classList!==void 0)return o.classList.contains(u);var p=la(o);return p.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(p)}function Be(o,u){if(o.classList!==void 0)for(var p=S(u),x=0,k=p.length;x<k;x++)o.classList.add(p[x]);else if(!Mn(o,u)){var N=la(o);oi(o,(N?N+" ":"")+u)}}function pt(o,u){o.classList!==void 0?o.classList.remove(u):oi(o,y((" "+la(o)+" ").replace(" "+u+" "," ")))}function oi(o,u){o.className.baseVal===void 0?o.className=u:o.className.baseVal=u}function la(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function yr(o,u){"opacity"in o.style?o.style.opacity=u:"filter"in o.style&&m2(o,u)}function m2(o,u){var p=!1,x="DXImageTransform.Microsoft.Alpha";try{p=o.filters.item(x)}catch{if(u===1)return}u=Math.round(u*100),p?(p.Enabled=u!==100,p.Opacity=u):o.style.filter+=" progid:"+x+"(opacity="+u+")"}function Zu(o){for(var u=document.documentElement.style,p=0;p<o.length;p++)if(o[p]in u)return o[p];return!1}function ho(o,u,p){var x=u||new j(0,0);o.style[vr]=(Ce.ie3d?"translate("+x.x+"px,"+x.y+"px)":"translate3d("+x.x+"px,"+x.y+"px,0)")+(p?" scale("+p+")":"")}function Dt(o,u){o._leaflet_pos=u,Ce.any3d?ho(o,u):(o.style.left=u.x+"px",o.style.top=u.y+"px")}function fo(o){return o._leaflet_pos||new j(0,0)}var Bl,Wl,kp;if("onselectstart"in document)Bl=function(){We(window,"selectstart",rn)},Wl=function(){mt(window,"selectstart",rn)};else{var Hl=Zu(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Bl=function(){if(Hl){var o=document.documentElement.style;kp=o[Hl],o[Hl]="none"}},Wl=function(){Hl&&(document.documentElement.style[Hl]=kp,kp=void 0)}}function Pp(){We(window,"dragstart",rn)}function Np(){mt(window,"dragstart",rn)}var Ku,Tp;function jp(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(Qu(),Ku=o,Tp=o.style.outlineStyle,o.style.outlineStyle="none",We(window,"keydown",Qu))}function Qu(){Ku&&(Ku.style.outlineStyle=Tp,Ku=void 0,Tp=void 0,mt(window,"keydown",Qu))}function Ox(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Rp(o){var u=o.getBoundingClientRect();return{x:u.width/o.offsetWidth||1,y:u.height/o.offsetHeight||1,boundingClientRect:u}}var g2={__proto__:null,TRANSFORM:vr,TRANSITION:cn,TRANSITION_END:xt,get:Xn,getStyle:Tt,create:$e,remove:Qe,empty:Zt,toFront:un,toBack:Ze,hasClass:Mn,addClass:Be,removeClass:pt,setClass:oi,getClass:la,setOpacity:yr,testProp:Zu,setTransform:ho,setPosition:Dt,getPosition:fo,get disableTextSelection(){return Bl},get enableTextSelection(){return Wl},disableImageDrag:Pp,enableImageDrag:Np,preventOutline:jp,restoreOutline:Qu,getSizedParentNode:Ox,getScale:Rp};function We(o,u,p,x){if(u&&typeof u=="object")for(var k in u)Op(o,k,u[k],p);else{u=S(u);for(var N=0,I=u.length;N<I;N++)Op(o,u[N],p,x)}return this}var as="_leaflet_events";function mt(o,u,p,x){if(arguments.length===1)Ix(o),delete o[as];else if(u&&typeof u=="object")for(var k in u)Ip(o,k,u[k],p);else if(u=S(u),arguments.length===2)Ix(o,function(K){return P(u,K)!==-1});else for(var N=0,I=u.length;N<I;N++)Ip(o,u[N],p,x);return this}function Ix(o,u){for(var p in o[as]){var x=p.split(/\d/)[0];(!u||u(x))&&Ip(o,x,null,null,p)}}var Mp={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Op(o,u,p,x){var k=u+c(p)+(x?"_"+c(x):"");if(o[as]&&o[as][k])return this;var N=function(K){return p.call(x||o,K||window.event)},I=N;!Ce.touchNative&&Ce.pointer&&u.indexOf("touch")===0?N=Cp(o,u,N):Ce.touch&&u==="dblclick"?N=mr(o,N):"addEventListener"in o?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?o.addEventListener(Mp[u]||u,N,Ce.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(N=function(K){K=K||window.event,Lp(o,K)&&I(K)},o.addEventListener(Mp[u],N,!1)):o.addEventListener(u,I,!1):o.attachEvent("on"+u,N),o[as]=o[as]||{},o[as][k]=N}function Ip(o,u,p,x,k){k=k||u+c(p)+(x?"_"+c(x):"");var N=o[as]&&o[as][k];if(!N)return this;!Ce.touchNative&&Ce.pointer&&u.indexOf("touch")===0?Mx(o,u,N):Ce.touch&&u==="dblclick"?gr(o,N):"removeEventListener"in o?o.removeEventListener(Mp[u]||u,N,!1):o.detachEvent("on"+u,N),o[as][k]=null}function po(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Ap(o){return Op(o,"wheel",po),this}function Vl(o){return We(o,"mousedown touchstart dblclick contextmenu",po),o._leaflet_disable_click=!0,this}function rn(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function mo(o){return rn(o),po(o),this}function Ax(o){if(o.composedPath)return o.composedPath();for(var u=[],p=o.target;p;)u.push(p),p=p.parentNode;return u}function Lx(o,u){if(!u)return new j(o.clientX,o.clientY);var p=Rp(u),x=p.boundingClientRect;return new j((o.clientX-x.left)/p.x-u.clientLeft,(o.clientY-x.top)/p.y-u.clientTop)}var v2=Ce.linux&&Ce.chrome?window.devicePixelRatio:Ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Dx(o){return Ce.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/v2:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Lp(o,u){var p=u.relatedTarget;if(!p)return!0;try{for(;p&&p!==o;)p=p.parentNode}catch{return!1}return p!==o}var y2={__proto__:null,on:We,off:mt,stopPropagation:po,disableScrollPropagation:Ap,disableClickPropagation:Vl,preventDefault:rn,stop:mo,getPropagationPath:Ax,getMousePosition:Lx,getWheelDelta:Dx,isExternalTarget:Lp,addListener:We,removeListener:mt},Fx=Z.extend({run:function(o,u,p,x){this.stop(),this._el=o,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(x||.5,.2),this._startPos=fo(o),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Q(this._animate,this),this._step()},_step:function(o){var u=+new Date-this._startTime,p=this._duration*1e3;u<p?this._runFrame(this._easeOut(u/p),o):(this._runFrame(1),this._complete())},_runFrame:function(o,u){var p=this._startPos.add(this._offset.multiplyBy(o));u&&p._round(),Dt(this._el,p),this.fire("step")},_complete:function(){W(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),tt=Z.extend({options:{crs:V,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,u){u=w(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(G(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=cn&&Ce.any3d&&!Ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),We(this._proxy,xt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,u,p){if(u=u===void 0?this._zoom:this._limitZoom(u),o=this._limitCenter(G(o),u,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=s({animate:p.animate},p.zoom),p.pan=s({animate:p.animate,duration:p.duration},p.pan));var x=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,u,p.zoom):this._tryAnimatedPan(o,p.pan);if(x)return clearTimeout(this._sizeTimer),this}return this._resetView(o,u,p.pan&&p.pan.noMoveStart),this},setZoom:function(o,u){return this._loaded?this.setView(this.getCenter(),o,{zoom:u}):(this._zoom=o,this)},zoomIn:function(o,u){return o=o||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,u)},zoomOut:function(o,u){return o=o||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,u)},setZoomAround:function(o,u,p){var x=this.getZoomScale(u),k=this.getSize().divideBy(2),N=o instanceof j?o:this.latLngToContainerPoint(o),I=N.subtract(k).multiplyBy(1-1/x),K=this.containerPointToLatLng(k.add(I));return this.setView(K,u,{zoom:p})},_getBoundsCenterZoom:function(o,u){u=u||{},o=o.getBounds?o.getBounds():F(o);var p=Y(u.paddingTopLeft||u.padding||[0,0]),x=Y(u.paddingBottomRight||u.padding||[0,0]),k=this.getBoundsZoom(o,!1,p.add(x));if(k=typeof u.maxZoom=="number"?Math.min(u.maxZoom,k):k,k===1/0)return{center:o.getCenter(),zoom:k};var N=x.subtract(p).divideBy(2),I=this.project(o.getSouthWest(),k),K=this.project(o.getNorthEast(),k),X=this.unproject(I.add(K).divideBy(2).add(N),k);return{center:X,zoom:k}},fitBounds:function(o,u){if(o=F(o),!o.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(o,u);return this.setView(p.center,p.zoom,u)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,u){return this.setView(o,this._zoom,{pan:u})},panBy:function(o,u){if(o=Y(o).round(),u=u||{},!o.x&&!o.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Fx,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){Be(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,p,u.duration||.25,u.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,u,p){if(p=p||{},p.animate===!1||!Ce.any3d)return this.setView(o,u,p);this._stop();var x=this.project(this.getCenter()),k=this.project(o),N=this.getSize(),I=this._zoom;o=G(o),u=u===void 0?I:u;var K=Math.max(N.x,N.y),X=K*this.getZoomScale(I,u),ie=k.distanceTo(x)||1,ge=1.42,Ie=ge*ge;function Ge(Ft){var cd=Ft?-1:1,oM=Ft?X:K,aM=X*X-K*K+cd*Ie*Ie*ie*ie,lM=2*oM*Ie*ie,Gp=aM/lM,yw=Math.sqrt(Gp*Gp+1)-Gp,cM=yw<1e-9?-18:Math.log(yw);return cM}function xn(Ft){return(Math.exp(Ft)-Math.exp(-Ft))/2}function Kt(Ft){return(Math.exp(Ft)+Math.exp(-Ft))/2}function wr(Ft){return xn(Ft)/Kt(Ft)}var On=Ge(0);function pa(Ft){return K*(Kt(On)/Kt(On+ge*Ft))}function nM(Ft){return K*(Kt(On)*wr(On+ge*Ft)-xn(On))/Ie}function rM(Ft){return 1-Math.pow(1-Ft,1.5)}var sM=Date.now(),gw=(Ge(1)-On)/ge,iM=p.duration?1e3*p.duration:1e3*gw*.8;function vw(){var Ft=(Date.now()-sM)/iM,cd=rM(Ft)*gw;Ft<=1?(this._flyToFrame=Q(vw,this),this._move(this.unproject(x.add(k.subtract(x).multiplyBy(nM(cd)/ie)),I),this.getScaleZoom(K/pa(cd),I),{flyTo:!0})):this._move(o,u)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),vw.call(this),this},flyToBounds:function(o,u){var p=this._getBoundsCenterZoom(o,u);return this.flyTo(p.center,p.zoom,u)},setMaxBounds:function(o){return o=F(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var u=this.options.minZoom;return this.options.minZoom=o,this._loaded&&u!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var u=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&u!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,u){this._enforcingBounds=!0;var p=this.getCenter(),x=this._limitCenter(p,this._zoom,F(o));return p.equals(x)||this.panTo(x,u),this._enforcingBounds=!1,this},panInside:function(o,u){u=u||{};var p=Y(u.paddingTopLeft||u.padding||[0,0]),x=Y(u.paddingBottomRight||u.padding||[0,0]),k=this.project(this.getCenter()),N=this.project(o),I=this.getPixelBounds(),K=te([I.min.add(p),I.max.subtract(x)]),X=K.getSize();if(!K.contains(N)){this._enforcingBounds=!0;var ie=N.subtract(K.getCenter()),ge=K.extend(N).getSize().subtract(X);k.x+=ie.x<0?-ge.x:ge.x,k.y+=ie.y<0?-ge.y:ge.y,this.panTo(this.unproject(k),u),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=s({animate:!1,pan:!0},o===!0?{animate:!0}:o);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),x=u.divideBy(2).round(),k=p.divideBy(2).round(),N=x.subtract(k);return!N.x&&!N.y?this:(o.animate&&o.pan?this.panBy(N):(o.pan&&this._rawPanBy(N),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=s({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=a(this._handleGeolocationResponse,this),p=a(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,p,o):navigator.geolocation.getCurrentPosition(u,p,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var u=o.code,p=o.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var u=o.coords.latitude,p=o.coords.longitude,x=new J(u,p),k=x.toBounds(o.coords.accuracy*2),N=this._locateOptions;if(N.setView){var I=this.getBoundsZoom(k);this.setView(x,N.maxZoom?Math.min(I,N.maxZoom):I)}var K={latlng:x,bounds:k,timestamp:o.timestamp};for(var X in o.coords)typeof o.coords[X]=="number"&&(K[X]=o.coords[X]);this.fire("locationfound",K)}},addHandler:function(o,u){if(!u)return this;var p=this[o]=new u(this);return this._handlers.push(p),this.options[o]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Qe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(W(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Qe(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,u){var p="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),x=$e("div",p,u||this._mapPane);return o&&(this._panes[o]=x),x},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),u=this.unproject(o.getBottomLeft()),p=this.unproject(o.getTopRight());return new ue(u,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,u,p){o=F(o),p=Y(p||[0,0]);var x=this.getZoom()||0,k=this.getMinZoom(),N=this.getMaxZoom(),I=o.getNorthWest(),K=o.getSouthEast(),X=this.getSize().subtract(p),ie=te(this.project(K,x),this.project(I,x)).getSize(),ge=Ce.any3d?this.options.zoomSnap:1,Ie=X.x/ie.x,Ge=X.y/ie.y,xn=u?Math.max(Ie,Ge):Math.min(Ie,Ge);return x=this.getScaleZoom(xn,x),ge&&(x=Math.round(x/(ge/100))*(ge/100),x=u?Math.ceil(x/ge)*ge:Math.floor(x/ge)*ge),Math.max(k,Math.min(N,x))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new j(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,u){var p=this._getTopLeftPoint(o,u);return new se(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,u){var p=this.options.crs;return u=u===void 0?this._zoom:u,p.scale(o)/p.scale(u)},getScaleZoom:function(o,u){var p=this.options.crs;u=u===void 0?this._zoom:u;var x=p.zoom(o*p.scale(u));return isNaN(x)?1/0:x},project:function(o,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(G(o),u)},unproject:function(o,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(Y(o),u)},layerPointToLatLng:function(o){var u=Y(o).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(o){var u=this.project(G(o))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(G(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(F(o))},distance:function(o,u){return this.options.crs.distance(G(o),G(u))},containerPointToLayerPoint:function(o){return Y(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return Y(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var u=this.containerPointToLayerPoint(Y(o));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(G(o)))},mouseEventToContainerPoint:function(o){return Lx(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var u=this._container=Xn(o);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");We(u,"scroll",this._onScroll,this),this._containerId=c(u)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ce.any3d,Be(o,"leaflet-container"+(Ce.touch?" leaflet-touch":"")+(Ce.retina?" leaflet-retina":"")+(Ce.ielt9?" leaflet-oldie":"")+(Ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=Tt(o,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Dt(this._mapPane,new j(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Be(o.markerPane,"leaflet-zoom-hide"),Be(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,u,p){Dt(this._mapPane,new j(0,0));var x=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var k=this._zoom!==u;this._moveStart(k,p)._move(o,u)._moveEnd(k),this.fire("viewreset"),x&&this.fire("load")},_moveStart:function(o,u){return o&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(o,u,p,x){u===void 0&&(u=this._zoom);var k=this._zoom!==u;return this._zoom=u,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),x?p&&p.pinch&&this.fire("zoom",p):((k||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return W(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){Dt(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[c(this._container)]=this;var u=o?mt:We;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Ce.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){W(this._resizeRequest),this._resizeRequest=Q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,u){for(var p=[],x,k=u==="mouseout"||u==="mouseover",N=o.target||o.srcElement,I=!1;N;){if(x=this._targets[c(N)],x&&(u==="click"||u==="preclick")&&this._draggableMoved(x)){I=!0;break}if(x&&x.listens(u,!0)&&(k&&!Lp(N,o)||(p.push(x),k))||N===this._container)break;N=N.parentNode}return!p.length&&!I&&!k&&this.listens(u,!0)&&(p=[this]),p},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var u=o.target||o.srcElement;if(!(!this._loaded||u._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(u))){var p=o.type;p==="mousedown"&&jp(u),this._fireDOMEvent(o,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,u,p){if(o.type==="click"){var x=s({},o);x.type="preclick",this._fireDOMEvent(x,x.type,p)}var k=this._findEventTargets(o,u);if(p){for(var N=[],I=0;I<p.length;I++)p[I].listens(u,!0)&&N.push(p[I]);k=N.concat(k)}if(k.length){u==="contextmenu"&&rn(o);var K=k[0],X={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var ie=K.getLatLng&&(!K._radius||K._radius<=10);X.containerPoint=ie?this.latLngToContainerPoint(K.getLatLng()):this.mouseEventToContainerPoint(o),X.layerPoint=this.containerPointToLayerPoint(X.containerPoint),X.latlng=ie?K.getLatLng():this.layerPointToLatLng(X.layerPoint)}for(I=0;I<k.length;I++)if(k[I].fire(u,X,!0),X.originalEvent._stopped||k[I].options.bubblingMouseEvents===!1&&P(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,u=this._handlers.length;o<u;o++)this._handlers[o].disable()},whenReady:function(o,u){return this._loaded?o.call(u||this,{target:this}):this.on("load",o,u),this},_getMapPanePos:function(){return fo(this._mapPane)||new j(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,u){var p=o&&u!==void 0?this._getNewPixelOrigin(o,u):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,u){var p=this.getSize()._divideBy(2);return this.project(o,u)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,u,p){var x=this._getNewPixelOrigin(p,u);return this.project(o,u)._subtract(x)},_latLngBoundsToNewLayerBounds:function(o,u,p){var x=this._getNewPixelOrigin(p,u);return te([this.project(o.getSouthWest(),u)._subtract(x),this.project(o.getNorthWest(),u)._subtract(x),this.project(o.getSouthEast(),u)._subtract(x),this.project(o.getNorthEast(),u)._subtract(x)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,u,p){if(!p)return o;var x=this.project(o,u),k=this.getSize().divideBy(2),N=new se(x.subtract(k),x.add(k)),I=this._getBoundsOffset(N,p,u);return Math.abs(I.x)<=1&&Math.abs(I.y)<=1?o:this.unproject(x.add(I),u)},_limitOffset:function(o,u){if(!u)return o;var p=this.getPixelBounds(),x=new se(p.min.add(o),p.max.add(o));return o.add(this._getBoundsOffset(x,u))},_getBoundsOffset:function(o,u,p){var x=te(this.project(u.getNorthEast(),p),this.project(u.getSouthWest(),p)),k=x.min.subtract(o.min),N=x.max.subtract(o.max),I=this._rebound(k.x,-N.x),K=this._rebound(k.y,-N.y);return new j(I,K)},_rebound:function(o,u){return o+u>0?Math.round(o-u)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(u))},_limitZoom:function(o){var u=this.getMinZoom(),p=this.getMaxZoom(),x=Ce.any3d?this.options.zoomSnap:1;return x&&(o=Math.round(o/x)*x),Math.max(u,Math.min(p,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){pt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,u){var p=this._getCenterOffset(o)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,u),!0)},_createAnimProxy:function(){var o=this._proxy=$e("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(u){var p=vr,x=this._proxy.style[p];ho(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),x===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Qe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),u=this.getZoom();ho(this._proxy,this.project(o,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,u,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var x=this.getZoomScale(u),k=this._getCenterOffset(o)._divideBy(1-1/x);return p.animate!==!0&&!this.getSize().contains(k)?!1:(Q(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(o,u,!0)},this),!0)},_animateZoom:function(o,u,p,x){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=u,Be(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:u,noUpdate:x}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&pt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function x2(o,u){return new tt(o,u)}var Ir=M.extend({options:{position:"topright"},initialize:function(o){w(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var u=this._map;return u&&u.removeControl(this),this.options.position=o,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var u=this._container=this.onAdd(o),p=this.getPosition(),x=o._controlCorners[p];return Be(u,"leaflet-control"),p.indexOf("bottom")!==-1?x.insertBefore(u,x.firstChild):x.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Qe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),ql=function(o){return new Ir(o)};tt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},u="leaflet-",p=this._controlContainer=$e("div",u+"control-container",this._container);function x(k,N){var I=u+k+" "+u+N;o[k+N]=$e("div",I,p)}x("top","left"),x("top","right"),x("bottom","left"),x("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Qe(this._controlCorners[o]);Qe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $x=Ir.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,u,p,x){return p<x?-1:x<p?1:0}},initialize:function(o,u,p){w(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var x in o)this._addLayer(o[x],x);for(x in u)this._addLayer(u[x],x,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return Ir.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,u){return this._addLayer(o,u),this._map?this._update():this},addOverlay:function(o,u){return this._addLayer(o,u,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var u=this._getLayer(c(o));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){Be(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(Be(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):pt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return pt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",u=this._container=$e("div",o),p=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Vl(u),Ap(u);var x=this._section=$e("section",o+"-list");p&&(this._map.on("click",this.collapse,this),We(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var k=this._layersLink=$e("a",o+"-toggle",u);k.href="#",k.title="Layers",k.setAttribute("role","button"),We(k,{keydown:function(N){N.keyCode===13&&this._expandSafely()},click:function(N){rn(N),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=$e("div",o+"-base",x),this._separator=$e("div",o+"-separator",x),this._overlaysList=$e("div",o+"-overlays",x),u.appendChild(x)},_getLayer:function(o){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&c(this._layers[u].layer)===o)return this._layers[u]},_addLayer:function(o,u,p){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:u,overlay:p}),this.options.sortLayers&&this._layers.sort(a(function(x,k){return this.options.sortFunction(x.layer,k.layer,x.name,k.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Zt(this._baseLayersList),Zt(this._overlaysList),this._layerControlInputs=[];var o,u,p,x,k=0;for(p=0;p<this._layers.length;p++)x=this._layers[p],this._addItem(x),u=u||x.overlay,o=o||!x.overlay,k+=x.overlay?0:1;return this.options.hideSingleBase&&(o=o&&k>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=u&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var u=this._getLayer(c(o.target)),p=u.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;p&&this._map.fire(p,u)},_createRadioElement:function(o,u){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(u?' checked="checked"':"")+"/>",x=document.createElement("div");return x.innerHTML=p,x.firstChild},_addItem:function(o){var u=document.createElement("label"),p=this._map.hasLayer(o.layer),x;o.overlay?(x=document.createElement("input"),x.type="checkbox",x.className="leaflet-control-layers-selector",x.defaultChecked=p):x=this._createRadioElement("leaflet-base-layers_"+c(this),p),this._layerControlInputs.push(x),x.layerId=c(o.layer),We(x,"click",this._onInputClick,this);var k=document.createElement("span");k.innerHTML=" "+o.name;var N=document.createElement("span");u.appendChild(N),N.appendChild(x),N.appendChild(k);var I=o.overlay?this._overlaysList:this._baseLayersList;return I.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,u,p,x=[],k=[];this._handlingClick=!0;for(var N=o.length-1;N>=0;N--)u=o[N],p=this._getLayer(u.layerId).layer,u.checked?x.push(p):u.checked||k.push(p);for(N=0;N<k.length;N++)this._map.hasLayer(k[N])&&this._map.removeLayer(k[N]);for(N=0;N<x.length;N++)this._map.hasLayer(x[N])||this._map.addLayer(x[N]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,u,p,x=this._map.getZoom(),k=o.length-1;k>=0;k--)u=o[k],p=this._getLayer(u.layerId).layer,u.disabled=p.options.minZoom!==void 0&&x<p.options.minZoom||p.options.maxZoom!==void 0&&x>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,We(o,"click",rn),this.expand();var u=this;setTimeout(function(){mt(o,"click",rn),u._preventClick=!1})}}),w2=function(o,u,p){return new $x(o,u,p)},Dp=Ir.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var u="leaflet-control-zoom",p=$e("div",u+" leaflet-bar"),x=this.options;return this._zoomInButton=this._createButton(x.zoomInText,x.zoomInTitle,u+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(x.zoomOutText,x.zoomOutTitle,u+"-out",p,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,u,p,x,k){var N=$e("a",p,x);return N.innerHTML=o,N.href="#",N.title=u,N.setAttribute("role","button"),N.setAttribute("aria-label",u),Vl(N),We(N,"click",mo),We(N,"click",k,this),We(N,"click",this._refocusOnMap,this),N},_updateDisabled:function(){var o=this._map,u="leaflet-disabled";pt(this._zoomInButton,u),pt(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(Be(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(Be(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});tt.mergeOptions({zoomControl:!0}),tt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Dp,this.addControl(this.zoomControl))});var _2=function(o){return new Dp(o)},Ux=Ir.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var u="leaflet-control-scale",p=$e("div",u),x=this.options;return this._addScales(x,u+"-line",p),o.on(x.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),p},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,u,p){o.metric&&(this._mScale=$e("div",u,p)),o.imperial&&(this._iScale=$e("div",u,p))},_update:function(){var o=this._map,u=o.getSize().y/2,p=o.distance(o.containerPointToLatLng([0,u]),o.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(p)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var u=this._getRoundNum(o),p=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,p,u/o)},_updateImperial:function(o){var u=o*3.2808399,p,x,k;u>5280?(p=u/5280,x=this._getRoundNum(p),this._updateScale(this._iScale,x+" mi",x/p)):(k=this._getRoundNum(u),this._updateScale(this._iScale,k+" ft",k/u))},_updateScale:function(o,u,p){o.style.width=Math.round(this.options.maxWidth*p)+"px",o.innerHTML=u},_getRoundNum:function(o){var u=Math.pow(10,(Math.floor(o)+"").length-1),p=o/u;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,u*p}}),b2=function(o){return new Ux(o)},S2='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Fp=Ir.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ce.inlineSvg?S2+" ":"")+"Leaflet</a>"},initialize:function(o){w(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=$e("div","leaflet-control-attribution"),Vl(this._container);for(var u in o._layers)o._layers[u].getAttribution&&this.addAttribution(o._layers[u].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var u in this._attributions)this._attributions[u]&&o.push(u);var p=[];this.options.prefix&&p.push(this.options.prefix),o.length&&p.push(o.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});tt.mergeOptions({attributionControl:!0}),tt.addInitHook(function(){this.options.attributionControl&&new Fp().addTo(this)});var E2=function(o){return new Fp(o)};Ir.Layers=$x,Ir.Zoom=Dp,Ir.Scale=Ux,Ir.Attribution=Fp,ql.layers=w2,ql.zoom=_2,ql.scale=b2,ql.attribution=E2;var ls=M.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ls.addTo=function(o,u){return o.addHandler(u,this),this};var C2={Events:H},zx=Ce.touch?"touchstart mousedown":"mousedown",ai=Z.extend({options:{clickTolerance:3},initialize:function(o,u,p,x){w(this,x),this._element=o,this._dragStartTarget=u||o,this._preventOutline=p},enable:function(){this._enabled||(We(this._dragStartTarget,zx,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ai._dragging===this&&this.finishDrag(!0),mt(this._dragStartTarget,zx,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Mn(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){ai._dragging===this&&this.finishDrag();return}if(!(ai._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(ai._dragging=this,this._preventOutline&&jp(this._element),Pp(),Bl(),!this._moving)){this.fire("down");var u=o.touches?o.touches[0]:o,p=Ox(this._element);this._startPoint=new j(u.clientX,u.clientY),this._startPos=fo(this._element),this._parentScale=Rp(p);var x=o.type==="mousedown";We(document,x?"mousemove":"touchmove",this._onMove,this),We(document,x?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var u=o.touches&&o.touches.length===1?o.touches[0]:o,p=new j(u.clientX,u.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,rn(o),this._moved||(this.fire("dragstart"),this._moved=!0,Be(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Be(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),Dt(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){pt(document.body,"leaflet-dragging"),this._lastTarget&&(pt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),mt(document,"mousemove touchmove",this._onMove,this),mt(document,"mouseup touchend touchcancel",this._onUp,this),Np(),Wl();var u=this._moved&&this._moving;this._moving=!1,ai._dragging=!1,u&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function Bx(o,u,p){var x,k=[1,4,2,8],N,I,K,X,ie,ge,Ie,Ge;for(N=0,ge=o.length;N<ge;N++)o[N]._code=go(o[N],u);for(K=0;K<4;K++){for(Ie=k[K],x=[],N=0,ge=o.length,I=ge-1;N<ge;I=N++)X=o[N],ie=o[I],X._code&Ie?ie._code&Ie||(Ge=Xu(ie,X,Ie,u,p),Ge._code=go(Ge,u),x.push(Ge)):(ie._code&Ie&&(Ge=Xu(ie,X,Ie,u,p),Ge._code=go(Ge,u),x.push(Ge)),x.push(X));o=x}return o}function Wx(o,u){var p,x,k,N,I,K,X,ie,ge;if(!o||o.length===0)throw new Error("latlngs not passed");xr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Ie=G([0,0]),Ge=F(o),xn=Ge.getNorthWest().distanceTo(Ge.getSouthWest())*Ge.getNorthEast().distanceTo(Ge.getNorthWest());xn<1700&&(Ie=$p(o));var Kt=o.length,wr=[];for(p=0;p<Kt;p++){var On=G(o[p]);wr.push(u.project(G([On.lat-Ie.lat,On.lng-Ie.lng])))}for(K=X=ie=0,p=0,x=Kt-1;p<Kt;x=p++)k=wr[p],N=wr[x],I=k.y*N.x-N.y*k.x,X+=(k.x+N.x)*I,ie+=(k.y+N.y)*I,K+=I*3;K===0?ge=wr[0]:ge=[X/K,ie/K];var pa=u.unproject(Y(ge));return G([pa.lat+Ie.lat,pa.lng+Ie.lng])}function $p(o){for(var u=0,p=0,x=0,k=0;k<o.length;k++){var N=G(o[k]);u+=N.lat,p+=N.lng,x++}return G([u/x,p/x])}var k2={__proto__:null,clipPolygon:Bx,polygonCenter:Wx,centroid:$p};function Hx(o,u){if(!u||!o.length)return o.slice();var p=u*u;return o=T2(o,p),o=N2(o,p),o}function Vx(o,u,p){return Math.sqrt(Gl(o,u,p,!0))}function P2(o,u,p){return Gl(o,u,p)}function N2(o,u){var p=o.length,x=typeof Uint8Array<"u"?Uint8Array:Array,k=new x(p);k[0]=k[p-1]=1,Up(o,k,u,0,p-1);var N,I=[];for(N=0;N<p;N++)k[N]&&I.push(o[N]);return I}function Up(o,u,p,x,k){var N=0,I,K,X;for(K=x+1;K<=k-1;K++)X=Gl(o[K],o[x],o[k],!0),X>N&&(I=K,N=X);N>p&&(u[I]=1,Up(o,u,p,x,I),Up(o,u,p,I,k))}function T2(o,u){for(var p=[o[0]],x=1,k=0,N=o.length;x<N;x++)j2(o[x],o[k])>u&&(p.push(o[x]),k=x);return k<N-1&&p.push(o[N-1]),p}var qx;function Gx(o,u,p,x,k){var N=x?qx:go(o,p),I=go(u,p),K,X,ie;for(qx=I;;){if(!(N|I))return[o,u];if(N&I)return!1;K=N||I,X=Xu(o,u,K,p,k),ie=go(X,p),K===N?(o=X,N=ie):(u=X,I=ie)}}function Xu(o,u,p,x,k){var N=u.x-o.x,I=u.y-o.y,K=x.min,X=x.max,ie,ge;return p&8?(ie=o.x+N*(X.y-o.y)/I,ge=X.y):p&4?(ie=o.x+N*(K.y-o.y)/I,ge=K.y):p&2?(ie=X.x,ge=o.y+I*(X.x-o.x)/N):p&1&&(ie=K.x,ge=o.y+I*(K.x-o.x)/N),new j(ie,ge,k)}function go(o,u){var p=0;return o.x<u.min.x?p|=1:o.x>u.max.x&&(p|=2),o.y<u.min.y?p|=4:o.y>u.max.y&&(p|=8),p}function j2(o,u){var p=u.x-o.x,x=u.y-o.y;return p*p+x*x}function Gl(o,u,p,x){var k=u.x,N=u.y,I=p.x-k,K=p.y-N,X=I*I+K*K,ie;return X>0&&(ie=((o.x-k)*I+(o.y-N)*K)/X,ie>1?(k=p.x,N=p.y):ie>0&&(k+=I*ie,N+=K*ie)),I=o.x-k,K=o.y-N,x?I*I+K*K:new j(k,N)}function xr(o){return!C(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function Yx(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),xr(o)}function Zx(o,u){var p,x,k,N,I,K,X,ie;if(!o||o.length===0)throw new Error("latlngs not passed");xr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var ge=G([0,0]),Ie=F(o),Ge=Ie.getNorthWest().distanceTo(Ie.getSouthWest())*Ie.getNorthEast().distanceTo(Ie.getNorthWest());Ge<1700&&(ge=$p(o));var xn=o.length,Kt=[];for(p=0;p<xn;p++){var wr=G(o[p]);Kt.push(u.project(G([wr.lat-ge.lat,wr.lng-ge.lng])))}for(p=0,x=0;p<xn-1;p++)x+=Kt[p].distanceTo(Kt[p+1])/2;if(x===0)ie=Kt[0];else for(p=0,N=0;p<xn-1;p++)if(I=Kt[p],K=Kt[p+1],k=I.distanceTo(K),N+=k,N>x){X=(N-x)/k,ie=[K.x-X*(K.x-I.x),K.y-X*(K.y-I.y)];break}var On=u.unproject(Y(ie));return G([On.lat+ge.lat,On.lng+ge.lng])}var R2={__proto__:null,simplify:Hx,pointToSegmentDistance:Vx,closestPointOnSegment:P2,clipSegment:Gx,_getEdgeIntersection:Xu,_getBitCode:go,_sqClosestPointOnSegment:Gl,isFlat:xr,_flat:Yx,polylineCenter:Zx},zp={project:function(o){return new j(o.lng,o.lat)},unproject:function(o){return new J(o.y,o.x)},bounds:new se([-180,-90],[180,90])},Bp={R:6378137,R_MINOR:6356752314245179e-9,bounds:new se([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var u=Math.PI/180,p=this.R,x=o.lat*u,k=this.R_MINOR/p,N=Math.sqrt(1-k*k),I=N*Math.sin(x),K=Math.tan(Math.PI/4-x/2)/Math.pow((1-I)/(1+I),N/2);return x=-p*Math.log(Math.max(K,1e-10)),new j(o.lng*u*p,x)},unproject:function(o){for(var u=180/Math.PI,p=this.R,x=this.R_MINOR/p,k=Math.sqrt(1-x*x),N=Math.exp(-o.y/p),I=Math.PI/2-2*Math.atan(N),K=0,X=.1,ie;K<15&&Math.abs(X)>1e-7;K++)ie=k*Math.sin(I),ie=Math.pow((1-ie)/(1+ie),k/2),X=Math.PI/2-2*Math.atan(N*ie)-I,I+=X;return new J(I*u,o.x*u/p)}},M2={__proto__:null,LonLat:zp,Mercator:Bp,SphericalMercator:Ee},O2=s({},he,{code:"EPSG:3395",projection:Bp,transformation:function(){var o=.5/(Math.PI*Bp.R);return pe(o,.5,-o,.5)}()}),Kx=s({},he,{code:"EPSG:4326",projection:zp,transformation:pe(1/180,1,-1/180,.5)}),I2=s({},ne,{projection:zp,transformation:pe(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,u){var p=u.lng-o.lng,x=u.lat-o.lat;return Math.sqrt(p*p+x*x)},infinite:!0});ne.Earth=he,ne.EPSG3395=O2,ne.EPSG3857=V,ne.EPSG900913=oe,ne.EPSG4326=Kx,ne.Simple=I2;var Ar=Z.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[c(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[c(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var u=o.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var p=this.getEvents();u.on(p,this),this.once("remove",function(){u.off(p,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});tt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var u=c(o);return this._layers[u]?this:(this._layers[u]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var u=c(o);return this._layers[u]?(this._loaded&&o.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return c(o)in this._layers},eachLayer:function(o,u){for(var p in this._layers)o.call(u,this._layers[p]);return this},_addLayers:function(o){o=o?C(o)?o:[o]:[];for(var u=0,p=o.length;u<p;u++)this.addLayer(o[u])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[c(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var u=c(o);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,u=-1/0,p=this._getZoomSpan();for(var x in this._zoomBoundLayers){var k=this._zoomBoundLayers[x].options;o=k.minZoom===void 0?o:Math.min(o,k.minZoom),u=k.maxZoom===void 0?u:Math.max(u,k.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=o===1/0?void 0:o,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ca=Ar.extend({initialize:function(o,u){w(this,u),this._layers={};var p,x;if(o)for(p=0,x=o.length;p<x;p++)this.addLayer(o[p])},addLayer:function(o){var u=this.getLayerId(o);return this._layers[u]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var u=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(o){var u=typeof o=="number"?o:this.getLayerId(o);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var u=Array.prototype.slice.call(arguments,1),p,x;for(p in this._layers)x=this._layers[p],x[o]&&x[o].apply(x,u);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,u){for(var p in this._layers)o.call(u,this._layers[p]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return c(o)}}),A2=function(o,u){return new ca(o,u)},Ms=ca.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),ca.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),ca.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new ue;for(var u in this._layers){var p=this._layers[u];o.extend(p.getBounds?p.getBounds():p.getLatLng())}return o}}),L2=function(o,u){return new Ms(o,u)},ua=M.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){w(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,u){var p=this._getIconUrl(o);if(!p){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var x=this._createImg(p,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(x,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),x},_setIconStyles:function(o,u){var p=this.options,x=p[u+"Size"];typeof x=="number"&&(x=[x,x]);var k=Y(x),N=Y(u==="shadow"&&p.shadowAnchor||p.iconAnchor||k&&k.divideBy(2,!0));o.className="leaflet-marker-"+u+" "+(p.className||""),N&&(o.style.marginLeft=-N.x+"px",o.style.marginTop=-N.y+"px"),k&&(o.style.width=k.x+"px",o.style.height=k.y+"px")},_createImg:function(o,u){return u=u||document.createElement("img"),u.src=o,u},_getIconUrl:function(o){return Ce.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function D2(o){return new ua(o)}var Yl=ua.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof Yl.imagePath!="string"&&(Yl.imagePath=this._detectIconPath()),(this.options.imagePath||Yl.imagePath)+ua.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var u=function(p,x,k){var N=x.exec(p);return N&&N[k]};return o=u(o,/^url\((['"])?(.+)\1\)$/,2),o&&u(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=$e("div","leaflet-default-icon-path",document.body),u=Tt(o,"background-image")||Tt(o,"backgroundImage");if(document.body.removeChild(o),u=this._stripUrl(u),u)return u;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),Qx=ls.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new ai(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Be(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&pt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var u=this._marker,p=u._map,x=this._marker.options.autoPanSpeed,k=this._marker.options.autoPanPadding,N=fo(u._icon),I=p.getPixelBounds(),K=p.getPixelOrigin(),X=te(I.min._subtract(K).add(k),I.max._subtract(K).subtract(k));if(!X.contains(N)){var ie=Y((Math.max(X.max.x,N.x)-X.max.x)/(I.max.x-X.max.x)-(Math.min(X.min.x,N.x)-X.min.x)/(I.min.x-X.min.x),(Math.max(X.max.y,N.y)-X.max.y)/(I.max.y-X.max.y)-(Math.min(X.min.y,N.y)-X.min.y)/(I.min.y-X.min.y)).multiplyBy(x);p.panBy(ie,{animate:!1}),this._draggable._newPos._add(ie),this._draggable._startPos._add(ie),Dt(u._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=Q(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(W(this._panRequest),this._panRequest=Q(this._adjustPan.bind(this,o)))},_onDrag:function(o){var u=this._marker,p=u._shadow,x=fo(u._icon),k=u._map.layerPointToLatLng(x);p&&Dt(p,x),u._latlng=k,o.latlng=k,o.oldLatLng=this._oldLatLng,u.fire("move",o).fire("drag",o)},_onDragEnd:function(o){W(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Ju=Ar.extend({options:{icon:new Yl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,u){w(this,u),this._latlng=G(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var u=this._latlng;return this._latlng=G(o),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=o.icon.createIcon(this._icon),x=!1;p!==this._icon&&(this._icon&&this._removeIcon(),x=!0,o.title&&(p.title=o.title),p.tagName==="IMG"&&(p.alt=o.alt||"")),Be(p,u),o.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&We(p,"focus",this._panOnFocus,this);var k=o.icon.createShadow(this._shadow),N=!1;k!==this._shadow&&(this._removeShadow(),N=!0),k&&(Be(k,u),k.alt=""),this._shadow=k,o.opacity<1&&this._updateOpacity(),x&&this.getPane().appendChild(this._icon),this._initInteraction(),k&&N&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&mt(this._icon,"focus",this._panOnFocus,this),Qe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Qe(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&Dt(this._icon,o),this._shadow&&Dt(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var u=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(Be(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Qx)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Qx(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&yr(this._icon,o),this._shadow&&yr(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var u=this.options.icon.options,p=u.iconSize?Y(u.iconSize):Y(0,0),x=u.iconAnchor?Y(u.iconAnchor):Y(0,0);o.panInside(this._latlng,{paddingTopLeft:x,paddingBottomRight:p.subtract(x)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function F2(o,u){return new Ju(o,u)}var li=Ar.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return w(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ed=li.extend({options:{fill:!0,radius:10},initialize:function(o,u){w(this,u),this._latlng=G(o),this._radius=this.options.radius},setLatLng:function(o){var u=this._latlng;return this._latlng=G(o),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var u=o&&o.radius||this._radius;return li.prototype.setStyle.call(this,o),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,u=this._radiusY||o,p=this._clickTolerance(),x=[o+p,u+p];this._pxBounds=new se(this._point.subtract(x),this._point.add(x))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function $2(o,u){return new ed(o,u)}var Wp=ed.extend({initialize:function(o,u,p){if(typeof u=="number"&&(u=s({},p,{radius:u})),w(this,u),this._latlng=G(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new ue(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:li.prototype.setStyle,_project:function(){var o=this._latlng.lng,u=this._latlng.lat,p=this._map,x=p.options.crs;if(x.distance===he.distance){var k=Math.PI/180,N=this._mRadius/he.R/k,I=p.project([u+N,o]),K=p.project([u-N,o]),X=I.add(K).divideBy(2),ie=p.unproject(X).lat,ge=Math.acos((Math.cos(N*k)-Math.sin(u*k)*Math.sin(ie*k))/(Math.cos(u*k)*Math.cos(ie*k)))/k;(isNaN(ge)||ge===0)&&(ge=N/Math.cos(Math.PI/180*u)),this._point=X.subtract(p.getPixelOrigin()),this._radius=isNaN(ge)?0:X.x-p.project([ie,o-ge]).x,this._radiusY=X.y-I.y}else{var Ie=x.unproject(x.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(Ie).x}this._updateBounds()}});function U2(o,u,p){return new Wp(o,u,p)}var Os=li.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,u){w(this,u),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var u=1/0,p=null,x=Gl,k,N,I=0,K=this._parts.length;I<K;I++)for(var X=this._parts[I],ie=1,ge=X.length;ie<ge;ie++){k=X[ie-1],N=X[ie];var Ie=x(o,k,N,!0);Ie<u&&(u=Ie,p=x(o,k,N))}return p&&(p.distance=Math.sqrt(u)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Zx(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,u){return u=u||this._defaultShape(),o=G(o),u.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new ue,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return xr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var u=[],p=xr(o),x=0,k=o.length;x<k;x++)p?(u[x]=G(o[x]),this._bounds.extend(u[x])):u[x]=this._convertLatLngs(o[x]);return u},_project:function(){var o=new se;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),u=new j(o,o);this._rawPxBounds&&(this._pxBounds=new se([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(o,u,p){var x=o[0]instanceof J,k=o.length,N,I;if(x){for(I=[],N=0;N<k;N++)I[N]=this._map.latLngToLayerPoint(o[N]),p.extend(I[N]);u.push(I)}else for(N=0;N<k;N++)this._projectLatlngs(o[N],u,p)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,p,x,k,N,I,K,X;for(p=0,k=0,N=this._rings.length;p<N;p++)for(X=this._rings[p],x=0,I=X.length;x<I-1;x++)K=Gx(X[x],X[x+1],o,x,!0),K&&(u[k]=u[k]||[],u[k].push(K[0]),(K[1]!==X[x+1]||x===I-2)&&(u[k].push(K[1]),k++))}},_simplifyPoints:function(){for(var o=this._parts,u=this.options.smoothFactor,p=0,x=o.length;p<x;p++)o[p]=Hx(o[p],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,u){var p,x,k,N,I,K,X=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(p=0,N=this._parts.length;p<N;p++)for(K=this._parts[p],x=0,I=K.length,k=I-1;x<I;k=x++)if(!(!u&&x===0)&&Vx(o,K[k],K[x])<=X)return!0;return!1}});function z2(o,u){return new Os(o,u)}Os._flat=Yx;var da=Os.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Wx(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var u=Os.prototype._convertLatLngs.call(this,o),p=u.length;return p>=2&&u[0]instanceof J&&u[0].equals(u[p-1])&&u.pop(),u},_setLatLngs:function(o){Os.prototype._setLatLngs.call(this,o),xr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return xr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,u=this.options.weight,p=new j(u,u);if(o=new se(o.min.subtract(p),o.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var x=0,k=this._rings.length,N;x<k;x++)N=Bx(this._rings[x],o,!0),N.length&&this._parts.push(N)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var u=!1,p,x,k,N,I,K,X,ie;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(N=0,X=this._parts.length;N<X;N++)for(p=this._parts[N],I=0,ie=p.length,K=ie-1;I<ie;K=I++)x=p[I],k=p[K],x.y>o.y!=k.y>o.y&&o.x<(k.x-x.x)*(o.y-x.y)/(k.y-x.y)+x.x&&(u=!u);return u||Os.prototype._containsPoint.call(this,o,!0)}});function B2(o,u){return new da(o,u)}var Is=Ms.extend({initialize:function(o,u){w(this,u),this._layers={},o&&this.addData(o)},addData:function(o){var u=C(o)?o:o.features,p,x,k;if(u){for(p=0,x=u.length;p<x;p++)k=u[p],(k.geometries||k.geometry||k.features||k.coordinates)&&this.addData(k);return this}var N=this.options;if(N.filter&&!N.filter(o))return this;var I=td(o,N);return I?(I.feature=sd(o),I.defaultOptions=I.options,this.resetStyle(I),N.onEachFeature&&N.onEachFeature(o,I),this.addLayer(I)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=s({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(u){this._setLayerStyle(u,o)},this)},_setLayerStyle:function(o,u){o.setStyle&&(typeof u=="function"&&(u=u(o.feature)),o.setStyle(u))}});function td(o,u){var p=o.type==="Feature"?o.geometry:o,x=p?p.coordinates:null,k=[],N=u&&u.pointToLayer,I=u&&u.coordsToLatLng||Hp,K,X,ie,ge;if(!x&&!p)return null;switch(p.type){case"Point":return K=I(x),Xx(N,o,K,u);case"MultiPoint":for(ie=0,ge=x.length;ie<ge;ie++)K=I(x[ie]),k.push(Xx(N,o,K,u));return new Ms(k);case"LineString":case"MultiLineString":return X=nd(x,p.type==="LineString"?0:1,I),new Os(X,u);case"Polygon":case"MultiPolygon":return X=nd(x,p.type==="Polygon"?1:2,I),new da(X,u);case"GeometryCollection":for(ie=0,ge=p.geometries.length;ie<ge;ie++){var Ie=td({geometry:p.geometries[ie],type:"Feature",properties:o.properties},u);Ie&&k.push(Ie)}return new Ms(k);case"FeatureCollection":for(ie=0,ge=p.features.length;ie<ge;ie++){var Ge=td(p.features[ie],u);Ge&&k.push(Ge)}return new Ms(k);default:throw new Error("Invalid GeoJSON object.")}}function Xx(o,u,p,x){return o?o(u,p):new Ju(p,x&&x.markersInheritOptions&&x)}function Hp(o){return new J(o[1],o[0],o[2])}function nd(o,u,p){for(var x=[],k=0,N=o.length,I;k<N;k++)I=u?nd(o[k],u-1,p):(p||Hp)(o[k]),x.push(I);return x}function Vp(o,u){return o=G(o),o.alt!==void 0?[v(o.lng,u),v(o.lat,u),v(o.alt,u)]:[v(o.lng,u),v(o.lat,u)]}function rd(o,u,p,x){for(var k=[],N=0,I=o.length;N<I;N++)k.push(u?rd(o[N],xr(o[N])?0:u-1,p,x):Vp(o[N],x));return!u&&p&&k.length>0&&k.push(k[0].slice()),k}function ha(o,u){return o.feature?s({},o.feature,{geometry:u}):sd(u)}function sd(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var qp={toGeoJSON:function(o){return ha(this,{type:"Point",coordinates:Vp(this.getLatLng(),o)})}};Ju.include(qp),Wp.include(qp),ed.include(qp),Os.include({toGeoJSON:function(o){var u=!xr(this._latlngs),p=rd(this._latlngs,u?1:0,!1,o);return ha(this,{type:(u?"Multi":"")+"LineString",coordinates:p})}}),da.include({toGeoJSON:function(o){var u=!xr(this._latlngs),p=u&&!xr(this._latlngs[0]),x=rd(this._latlngs,p?2:u?1:0,!0,o);return u||(x=[x]),ha(this,{type:(p?"Multi":"")+"Polygon",coordinates:x})}}),ca.include({toMultiPoint:function(o){var u=[];return this.eachLayer(function(p){u.push(p.toGeoJSON(o).geometry.coordinates)}),ha(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(o){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(o);var p=u==="GeometryCollection",x=[];return this.eachLayer(function(k){if(k.toGeoJSON){var N=k.toGeoJSON(o);if(p)x.push(N.geometry);else{var I=sd(N);I.type==="FeatureCollection"?x.push.apply(x,I.features):x.push(I)}}}),p?ha(this,{geometries:x,type:"GeometryCollection"}):{type:"FeatureCollection",features:x}}});function Jx(o,u){return new Is(o,u)}var W2=Jx,id=Ar.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,u,p){this._url=o,this._bounds=F(u),w(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Be(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Qe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&un(this._image),this},bringToBack:function(){return this._map&&Ze(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=F(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",u=this._image=o?this._url:$e("img");if(Be(u,"leaflet-image-layer"),this._zoomAnimated&&Be(u,"leaflet-zoom-animated"),this.options.className&&Be(u,this.options.className),u.onselectstart=m,u.onmousemove=m,u.onload=a(this.fire,this,"load"),u.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(o){var u=this._map.getZoomScale(o.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;ho(this._image,p,u)},_reset:function(){var o=this._image,u=new se(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=u.getSize();Dt(o,u.min),o.style.width=p.x+"px",o.style.height=p.y+"px"},_updateOpacity:function(){yr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),H2=function(o,u,p){return new id(o,u,p)},ew=id.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",u=this._image=o?this._url:$e("video");if(Be(u,"leaflet-image-layer"),this._zoomAnimated&&Be(u,"leaflet-zoom-animated"),this.options.className&&Be(u,this.options.className),u.onselectstart=m,u.onmousemove=m,u.onloadeddata=a(this.fire,this,"load"),o){for(var p=u.getElementsByTagName("source"),x=[],k=0;k<p.length;k++)x.push(p[k].src);this._url=p.length>0?x:[u.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var N=0;N<this._url.length;N++){var I=$e("source");I.src=this._url[N],u.appendChild(I)}}});function V2(o,u,p){return new ew(o,u,p)}var tw=id.extend({_initImage:function(){var o=this._image=this._url;Be(o,"leaflet-image-layer"),this._zoomAnimated&&Be(o,"leaflet-zoom-animated"),this.options.className&&Be(o,this.options.className),o.onselectstart=m,o.onmousemove=m}});function q2(o,u,p){return new tw(o,u,p)}var cs=Ar.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,u){o&&(o instanceof J||C(o))?(this._latlng=G(o),w(this,u)):(w(this,o),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&yr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&yr(this._container,1),this.bringToFront(),this.options.interactive&&(Be(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(yr(this._container,0),this._removeTimeout=setTimeout(a(Qe,void 0,this._container),200)):Qe(this._container),this.options.interactive&&(pt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=G(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&un(this._container),this},bringToBack:function(){return this._map&&Ze(this._container),this},_prepareOpen:function(o){var u=this._source;if(!u._map)return!1;if(u instanceof Ms){u=null;var p=this._source._layers;for(var x in p)if(p[x]._map){u=p[x];break}if(!u)return!1;this._source=u}if(!o)if(u.getCenter)o=u.getCenter();else if(u.getLatLng)o=u.getLatLng();else if(u.getBounds)o=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")o.innerHTML=u;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),u=Y(this.options.offset),p=this._getAnchor();this._zoomAnimated?Dt(this._container,o.add(p)):u=u.add(o).add(p);var x=this._containerBottom=-u.y,k=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=x+"px",this._container.style.left=k+"px"}},_getAnchor:function(){return[0,0]}});tt.include({_initOverlay:function(o,u,p,x){var k=u;return k instanceof o||(k=new o(x).setContent(u)),p&&k.setLatLng(p),k}}),Ar.include({_initOverlay:function(o,u,p,x){var k=p;return k instanceof o?(w(k,x),k._source=this):(k=u&&!x?u:new o(x,this),k.setContent(p)),k}});var od=cs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,cs.prototype.openOn.call(this,o)},onAdd:function(o){cs.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof li||this._source.on("preclick",po))},onRemove:function(o){cs.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof li||this._source.off("preclick",po))},getEvents:function(){var o=cs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",u=this._container=$e("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=$e("div",o+"-content-wrapper",u);if(this._contentNode=$e("div",o+"-content",p),Vl(u),Ap(this._contentNode),We(u,"contextmenu",po),this._tipContainer=$e("div",o+"-tip-container",u),this._tip=$e("div",o+"-tip",this._tipContainer),this.options.closeButton){var x=this._closeButton=$e("a",o+"-close-button",u);x.setAttribute("role","button"),x.setAttribute("aria-label","Close popup"),x.href="#close",x.innerHTML='<span aria-hidden="true">&#215;</span>',We(x,"click",function(k){rn(k),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,u=o.style;u.width="",u.whiteSpace="nowrap";var p=o.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),u.width=p+1+"px",u.whiteSpace="",u.height="";var x=o.offsetHeight,k=this.options.maxHeight,N="leaflet-popup-scrolled";k&&x>k?(u.height=k+"px",Be(o,N)):pt(o,N),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var u=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),p=this._getAnchor();Dt(this._container,u.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,u=parseInt(Tt(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+u,x=this._containerWidth,k=new j(this._containerLeft,-p-this._containerBottom);k._add(fo(this._container));var N=o.layerPointToContainerPoint(k),I=Y(this.options.autoPanPadding),K=Y(this.options.autoPanPaddingTopLeft||I),X=Y(this.options.autoPanPaddingBottomRight||I),ie=o.getSize(),ge=0,Ie=0;N.x+x+X.x>ie.x&&(ge=N.x+x-ie.x+X.x),N.x-ge-K.x<0&&(ge=N.x-K.x),N.y+p+X.y>ie.y&&(Ie=N.y+p-ie.y+X.y),N.y-Ie-K.y<0&&(Ie=N.y-K.y),(ge||Ie)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([ge,Ie]))}},_getAnchor:function(){return Y(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),G2=function(o,u){return new od(o,u)};tt.mergeOptions({closePopupOnClick:!0}),tt.include({openPopup:function(o,u,p){return this._initOverlay(od,o,u,p).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),Ar.include({bindPopup:function(o,u){return this._popup=this._initOverlay(od,this._popup,o,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof Ms||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){mo(o);var u=o.layer||o.target;if(this._popup._source===u&&!(u instanceof li)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=u,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var ad=cs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){cs.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){cs.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=cs.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",u=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=$e("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var u,p,x=this._map,k=this._container,N=x.latLngToContainerPoint(x.getCenter()),I=x.layerPointToContainerPoint(o),K=this.options.direction,X=k.offsetWidth,ie=k.offsetHeight,ge=Y(this.options.offset),Ie=this._getAnchor();K==="top"?(u=X/2,p=ie):K==="bottom"?(u=X/2,p=0):K==="center"?(u=X/2,p=ie/2):K==="right"?(u=0,p=ie/2):K==="left"?(u=X,p=ie/2):I.x<N.x?(K="right",u=0,p=ie/2):(K="left",u=X+(ge.x+Ie.x)*2,p=ie/2),o=o.subtract(Y(u,p,!0)).add(ge).add(Ie),pt(k,"leaflet-tooltip-right"),pt(k,"leaflet-tooltip-left"),pt(k,"leaflet-tooltip-top"),pt(k,"leaflet-tooltip-bottom"),Be(k,"leaflet-tooltip-"+K),Dt(k,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&yr(this._container,o)},_animateZoom:function(o){var u=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(u)},_getAnchor:function(){return Y(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Y2=function(o,u){return new ad(o,u)};tt.include({openTooltip:function(o,u,p){return this._initOverlay(ad,o,u,p).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),Ar.include({bindTooltip:function(o,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ad,this._tooltip,o,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var u=o?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[u](p),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof Ms||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var u=typeof o.getElement=="function"&&o.getElement();u&&(We(u,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),We(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var u=typeof o.getElement=="function"&&o.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var u=o.latlng,p,x;this._tooltip.options.sticky&&o.originalEvent&&(p=this._map.mouseEventToContainerPoint(o.originalEvent),x=this._map.containerPointToLayerPoint(p),u=this._map.layerPointToLatLng(x)),this._tooltip.setLatLng(u)}});var nw=ua.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var u=o&&o.tagName==="DIV"?o:document.createElement("div"),p=this.options;if(p.html instanceof Element?(Zt(u),u.appendChild(p.html)):u.innerHTML=p.html!==!1?p.html:"",p.bgPos){var x=Y(p.bgPos);u.style.backgroundPosition=-x.x+"px "+-x.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function Z2(o){return new nw(o)}ua.Default=Yl;var Zl=Ar.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){w(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Qe(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(un(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ze(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof j?o:new j(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var u=this.getPane().children,p=-o(-1/0,1/0),x=0,k=u.length,N;x<k;x++)N=u[x].style.zIndex,u[x]!==this._container&&N&&(p=o(p,+N));isFinite(p)&&(this.options.zIndex=p+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ce.ielt9){yr(this._container,this.options.opacity);var o=+new Date,u=!1,p=!1;for(var x in this._tiles){var k=this._tiles[x];if(!(!k.current||!k.loaded)){var N=Math.min(1,(o-k.loaded)/200);yr(k.el,N),N<1?u=!0:(k.active?p=!0:this._onOpaqueTile(k),k.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),u&&(W(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=$e("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,u=this.options.maxZoom;if(o!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===o?(this._levels[p].el.style.zIndex=u-Math.abs(o-p),this._onUpdateLevel(p)):(Qe(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var x=this._levels[o],k=this._map;return x||(x=this._levels[o]={},x.el=$e("div","leaflet-tile-container leaflet-zoom-animated",this._container),x.el.style.zIndex=u,x.origin=k.project(k.unproject(k.getPixelOrigin()),o).round(),x.zoom=o,this._setZoomTransform(x,k.getCenter(),k.getZoom()),m(x.el.offsetWidth),this._onCreateLevel(x)),this._level=x,x}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var o,u,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)u=this._tiles[o],u.retain=u.current;for(o in this._tiles)if(u=this._tiles[o],u.current&&!u.active){var x=u.coords;this._retainParent(x.x,x.y,x.z,x.z-5)||this._retainChildren(x.x,x.y,x.z,x.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var u in this._tiles)this._tiles[u].coords.z===o&&this._removeTile(u)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Qe(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,u,p,x){var k=Math.floor(o/2),N=Math.floor(u/2),I=p-1,K=new j(+k,+N);K.z=+I;var X=this._tileCoordsToKey(K),ie=this._tiles[X];return ie&&ie.active?(ie.retain=!0,!0):(ie&&ie.loaded&&(ie.retain=!0),I>x?this._retainParent(k,N,I,x):!1)},_retainChildren:function(o,u,p,x){for(var k=2*o;k<2*o+2;k++)for(var N=2*u;N<2*u+2;N++){var I=new j(k,N);I.z=p+1;var K=this._tileCoordsToKey(I),X=this._tiles[K];if(X&&X.active){X.retain=!0;continue}else X&&X.loaded&&(X.retain=!0);p+1<x&&this._retainChildren(k,N,p+1,x)}},_resetView:function(o){var u=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var u=this.options;return u.minNativeZoom!==void 0&&o<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<o?u.maxNativeZoom:o},_setView:function(o,u,p,x){var k=Math.round(u);this.options.maxZoom!==void 0&&k>this.options.maxZoom||this.options.minZoom!==void 0&&k<this.options.minZoom?k=void 0:k=this._clampZoom(k);var N=this.options.updateWhenZooming&&k!==this._tileZoom;(!x||N)&&(this._tileZoom=k,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),k!==void 0&&this._update(o),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(o,u)},_setZoomTransforms:function(o,u){for(var p in this._levels)this._setZoomTransform(this._levels[p],o,u)},_setZoomTransform:function(o,u,p){var x=this._map.getZoomScale(p,o.zoom),k=o.origin.multiplyBy(x).subtract(this._map._getNewPixelOrigin(u,p)).round();Ce.any3d?ho(o.el,k,x):Dt(o.el,k)},_resetGrid:function(){var o=this._map,u=o.options.crs,p=this._tileSize=this.getTileSize(),x=this._tileZoom,k=this._map.getPixelWorldBounds(this._tileZoom);k&&(this._globalTileRange=this._pxBoundsToTileRange(k)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,u.wrapLng[0]],x).x/p.x),Math.ceil(o.project([0,u.wrapLng[1]],x).x/p.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([u.wrapLat[0],0],x).y/p.x),Math.ceil(o.project([u.wrapLat[1],0],x).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var u=this._map,p=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),x=u.getZoomScale(p,this._tileZoom),k=u.project(o,this._tileZoom).floor(),N=u.getSize().divideBy(x*2);return new se(k.subtract(N),k.add(N))},_update:function(o){var u=this._map;if(u){var p=this._clampZoom(u.getZoom());if(o===void 0&&(o=u.getCenter()),this._tileZoom!==void 0){var x=this._getTiledPixelBounds(o),k=this._pxBoundsToTileRange(x),N=k.getCenter(),I=[],K=this.options.keepBuffer,X=new se(k.getBottomLeft().subtract([K,-K]),k.getTopRight().add([K,-K]));if(!(isFinite(k.min.x)&&isFinite(k.min.y)&&isFinite(k.max.x)&&isFinite(k.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ie in this._tiles){var ge=this._tiles[ie].coords;(ge.z!==this._tileZoom||!X.contains(new j(ge.x,ge.y)))&&(this._tiles[ie].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(o,p);return}for(var Ie=k.min.y;Ie<=k.max.y;Ie++)for(var Ge=k.min.x;Ge<=k.max.x;Ge++){var xn=new j(Ge,Ie);if(xn.z=this._tileZoom,!!this._isValidTile(xn)){var Kt=this._tiles[this._tileCoordsToKey(xn)];Kt?Kt.current=!0:I.push(xn)}}if(I.sort(function(On,pa){return On.distanceTo(N)-pa.distanceTo(N)}),I.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var wr=document.createDocumentFragment();for(Ge=0;Ge<I.length;Ge++)this._addTile(I[Ge],wr);this._level.el.appendChild(wr)}}}},_isValidTile:function(o){var u=this._map.options.crs;if(!u.infinite){var p=this._globalTileRange;if(!u.wrapLng&&(o.x<p.min.x||o.x>p.max.x)||!u.wrapLat&&(o.y<p.min.y||o.y>p.max.y))return!1}if(!this.options.bounds)return!0;var x=this._tileCoordsToBounds(o);return F(this.options.bounds).overlaps(x)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var u=this._map,p=this.getTileSize(),x=o.scaleBy(p),k=x.add(p),N=u.unproject(x,o.z),I=u.unproject(k,o.z);return[N,I]},_tileCoordsToBounds:function(o){var u=this._tileCoordsToNwSe(o),p=new ue(u[0],u[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var u=o.split(":"),p=new j(+u[0],+u[1]);return p.z=+u[2],p},_removeTile:function(o){var u=this._tiles[o];u&&(Qe(u.el),delete this._tiles[o],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){Be(o,"leaflet-tile");var u=this.getTileSize();o.style.width=u.x+"px",o.style.height=u.y+"px",o.onselectstart=m,o.onmousemove=m,Ce.ielt9&&this.options.opacity<1&&yr(o,this.options.opacity)},_addTile:function(o,u){var p=this._getTilePos(o),x=this._tileCoordsToKey(o),k=this.createTile(this._wrapCoords(o),a(this._tileReady,this,o));this._initTile(k),this.createTile.length<2&&Q(a(this._tileReady,this,o,null,k)),Dt(k,p),this._tiles[x]={el:k,coords:o,current:!0},u.appendChild(k),this.fire("tileloadstart",{tile:k,coords:o})},_tileReady:function(o,u,p){u&&this.fire("tileerror",{error:u,tile:p,coords:o});var x=this._tileCoordsToKey(o);p=this._tiles[x],p&&(p.loaded=+new Date,this._map._fadeAnimated?(yr(p.el,0),W(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),u||(Be(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ce.ielt9||!this._map._fadeAnimated?Q(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var u=new j(this._wrapX?f(o.x,this._wrapX):o.x,this._wrapY?f(o.y,this._wrapY):o.y);return u.z=o.z,u},_pxBoundsToTileRange:function(o){var u=this.getTileSize();return new se(o.min.unscaleBy(u).floor(),o.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function K2(o){return new Zl(o)}var fa=Zl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,u){this._url=o,u=w(this,u),u.detectRetina&&Ce.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,u){return this._url===o&&u===void 0&&(u=!0),this._url=o,u||this.redraw(),this},createTile:function(o,u){var p=document.createElement("img");return We(p,"load",a(this._tileOnLoad,this,u,p)),We(p,"error",a(this._tileOnError,this,u,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(o),p},getTileUrl:function(o){var u={r:Ce.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-o.y;this.options.tms&&(u.y=p),u["-y"]=p}return _(this._url,s(u,this.options))},_tileOnLoad:function(o,u){Ce.ielt9?setTimeout(a(o,this,null,u),0):o(null,u)},_tileOnError:function(o,u,p){var x=this.options.errorTileUrl;x&&u.getAttribute("src")!==x&&(u.src=x),o(p,u)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,u=this.options.maxZoom,p=this.options.zoomReverse,x=this.options.zoomOffset;return p&&(o=u-o),o+x},_getSubdomain:function(o){var u=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var o,u;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(u=this._tiles[o].el,u.onload=m,u.onerror=m,!u.complete)){u.src=T;var p=this._tiles[o].coords;Qe(u),delete this._tiles[o],this.fire("tileabort",{tile:u,coords:p})}},_removeTile:function(o){var u=this._tiles[o];if(u)return u.el.setAttribute("src",T),Zl.prototype._removeTile.call(this,o)},_tileReady:function(o,u,p){if(!(!this._map||p&&p.getAttribute("src")===T))return Zl.prototype._tileReady.call(this,o,u,p)}});function rw(o,u){return new fa(o,u)}var sw=fa.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,u){this._url=o;var p=s({},this.defaultWmsParams);for(var x in u)x in this.options||(p[x]=u[x]);u=w(this,u);var k=u.detectRetina&&Ce.retina?2:1,N=this.getTileSize();p.width=N.x*k,p.height=N.y*k,this.wmsParams=p},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,fa.prototype.onAdd.call(this,o)},getTileUrl:function(o){var u=this._tileCoordsToNwSe(o),p=this._crs,x=te(p.project(u[0]),p.project(u[1])),k=x.min,N=x.max,I=(this._wmsVersion>=1.3&&this._crs===Kx?[k.y,k.x,N.y,N.x]:[k.x,k.y,N.x,N.y]).join(","),K=fa.prototype.getTileUrl.call(this,o);return K+b(this.wmsParams,K,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+I},setParams:function(o,u){return s(this.wmsParams,o),u||this.redraw(),this}});function Q2(o,u){return new sw(o,u)}fa.WMS=sw,rw.wms=Q2;var As=Ar.extend({options:{padding:.1},initialize:function(o){w(this,o),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Be(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,u){var p=this._map.getZoomScale(u,this._zoom),x=this._map.getSize().multiplyBy(.5+this.options.padding),k=this._map.project(this._center,u),N=x.multiplyBy(-p).add(k).subtract(this._map._getNewPixelOrigin(o,u));Ce.any3d?ho(this._container,N,p):Dt(this._container,N)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,u=this._map.getSize(),p=this._map.containerPointToLayerPoint(u.multiplyBy(-o)).round();this._bounds=new se(p,p.add(u.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),iw=As.extend({options:{tolerance:0},getEvents:function(){var o=As.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){As.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");We(o,"mousemove",this._onMouseMove,this),We(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),We(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){W(this._redrawRequest),delete this._ctx,Qe(this._container),mt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var u in this._layers)o=this._layers[u],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){As.prototype._update.call(this);var o=this._bounds,u=this._container,p=o.getSize(),x=Ce.retina?2:1;Dt(u,o.min),u.width=x*p.x,u.height=x*p.y,u.style.width=p.x+"px",u.style.height=p.y+"px",Ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){As.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[c(o)]=o;var u=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var u=o._order,p=u.next,x=u.prev;p?p.prev=x:this._drawLast=x,x?x.next=p:this._drawFirst=p,delete o._order,delete this._layers[c(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var u=o.options.dashArray.split(/[, ]+/),p=[],x,k;for(k=0;k<u.length;k++){if(x=Number(u[k]),isNaN(x))return;p.push(x)}o.options._dashArray=p}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||Q(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var u=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new se,this._redrawBounds.extend(o._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(o._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var u=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,u=this._redrawBounds;if(this._ctx.save(),u){var p=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var x=this._drawFirst;x;x=x.next)o=x.layer,(!u||o._pxBounds&&o._pxBounds.intersects(u))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,u){if(this._drawing){var p,x,k,N,I=o._parts,K=I.length,X=this._ctx;if(K){for(X.beginPath(),p=0;p<K;p++){for(x=0,k=I[p].length;x<k;x++)N=I[p][x],X[x?"lineTo":"moveTo"](N.x,N.y);u&&X.closePath()}this._fillStroke(X,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var u=o._point,p=this._ctx,x=Math.max(Math.round(o._radius),1),k=(Math.max(Math.round(o._radiusY),1)||x)/x;k!==1&&(p.save(),p.scale(1,k)),p.beginPath(),p.arc(u.x,u.y/k,x,0,Math.PI*2,!1),k!==1&&p.restore(),this._fillStroke(p,o)}},_fillStroke:function(o,u){var p=u.options;p.fill&&(o.globalAlpha=p.fillOpacity,o.fillStyle=p.fillColor||p.color,o.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(o.setLineDash&&o.setLineDash(u.options&&u.options._dashArray||[]),o.globalAlpha=p.opacity,o.lineWidth=p.weight,o.strokeStyle=p.color,o.lineCap=p.lineCap,o.lineJoin=p.lineJoin,o.stroke())},_onClick:function(o){for(var u=this._map.mouseEventToLayerPoint(o),p,x,k=this._drawFirst;k;k=k.next)p=k.layer,p.options.interactive&&p._containsPoint(u)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(p))&&(x=p);this._fireEvent(x?[x]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,u)}},_handleMouseOut:function(o){var u=this._hoveredLayer;u&&(pt(this._container,"leaflet-interactive"),this._fireEvent([u],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,u){if(!this._mouseHoverThrottled){for(var p,x,k=this._drawFirst;k;k=k.next)p=k.layer,p.options.interactive&&p._containsPoint(u)&&(x=p);x!==this._hoveredLayer&&(this._handleMouseOut(o),x&&(Be(this._container,"leaflet-interactive"),this._fireEvent([x],o,"mouseover"),this._hoveredLayer=x)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,u,p){this._map._fireDOMEvent(u,p||u.type,o)},_bringToFront:function(o){var u=o._order;if(u){var p=u.next,x=u.prev;if(p)p.prev=x;else return;x?x.next=p:p&&(this._drawFirst=p),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(o)}},_bringToBack:function(o){var u=o._order;if(u){var p=u.next,x=u.prev;if(x)x.next=p;else return;p?p.prev=x:x&&(this._drawLast=x),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(o)}}});function ow(o){return Ce.canvas?new iw(o):null}var Kl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),X2={_initContainer:function(){this._container=$e("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(As.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var u=o._container=Kl("shape");Be(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",o._path=Kl("path"),u.appendChild(o._path),this._updateStyle(o),this._layers[c(o)]=o},_addPath:function(o){var u=o._container;this._container.appendChild(u),o.options.interactive&&o.addInteractiveTarget(u)},_removePath:function(o){var u=o._container;Qe(u),o.removeInteractiveTarget(u),delete this._layers[c(o)]},_updateStyle:function(o){var u=o._stroke,p=o._fill,x=o.options,k=o._container;k.stroked=!!x.stroke,k.filled=!!x.fill,x.stroke?(u||(u=o._stroke=Kl("stroke")),k.appendChild(u),u.weight=x.weight+"px",u.color=x.color,u.opacity=x.opacity,x.dashArray?u.dashStyle=C(x.dashArray)?x.dashArray.join(" "):x.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=x.lineCap.replace("butt","flat"),u.joinstyle=x.lineJoin):u&&(k.removeChild(u),o._stroke=null),x.fill?(p||(p=o._fill=Kl("fill")),k.appendChild(p),p.color=x.fillColor||x.color,p.opacity=x.fillOpacity):p&&(k.removeChild(p),o._fill=null)},_updateCircle:function(o){var u=o._point.round(),p=Math.round(o._radius),x=Math.round(o._radiusY||p);this._setPath(o,o._empty()?"M0 0":"AL "+u.x+","+u.y+" "+p+","+x+" 0,"+65535*360)},_setPath:function(o,u){o._path.v=u},_bringToFront:function(o){un(o._container)},_bringToBack:function(o){Ze(o._container)}},ld=Ce.vml?Kl:ye,Ql=As.extend({_initContainer:function(){this._container=ld("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ld("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Qe(this._container),mt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){As.prototype._update.call(this);var o=this._bounds,u=o.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,p.setAttribute("width",u.x),p.setAttribute("height",u.y)),Dt(p,o.min),p.setAttribute("viewBox",[o.min.x,o.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(o){var u=o._path=ld("path");o.options.className&&Be(u,o.options.className),o.options.interactive&&Be(u,"leaflet-interactive"),this._updateStyle(o),this._layers[c(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Qe(o._path),o.removeInteractiveTarget(o._path),delete this._layers[c(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var u=o._path,p=o.options;u&&(p.stroke?(u.setAttribute("stroke",p.color),u.setAttribute("stroke-opacity",p.opacity),u.setAttribute("stroke-width",p.weight),u.setAttribute("stroke-linecap",p.lineCap),u.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?u.setAttribute("stroke-dasharray",p.dashArray):u.removeAttribute("stroke-dasharray"),p.dashOffset?u.setAttribute("stroke-dashoffset",p.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),p.fill?(u.setAttribute("fill",p.fillColor||p.color),u.setAttribute("fill-opacity",p.fillOpacity),u.setAttribute("fill-rule",p.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(o,u){this._setPath(o,Oe(o._parts,u))},_updateCircle:function(o){var u=o._point,p=Math.max(Math.round(o._radius),1),x=Math.max(Math.round(o._radiusY),1)||p,k="a"+p+","+x+" 0 1,0 ",N=o._empty()?"M0 0":"M"+(u.x-p)+","+u.y+k+p*2+",0 "+k+-p*2+",0 ";this._setPath(o,N)},_setPath:function(o,u){o._path.setAttribute("d",u)},_bringToFront:function(o){un(o._path)},_bringToBack:function(o){Ze(o._path)}});Ce.vml&&Ql.include(X2);function aw(o){return Ce.svg||Ce.vml?new Ql(o):null}tt.include({getRenderer:function(o){var u=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var u=this._paneRenderers[o];return u===void 0&&(u=this._createRenderer({pane:o}),this._paneRenderers[o]=u),u},_createRenderer:function(o){return this.options.preferCanvas&&ow(o)||aw(o)}});var lw=da.extend({initialize:function(o,u){da.prototype.initialize.call(this,this._boundsToLatLngs(o),u)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=F(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function J2(o,u){return new lw(o,u)}Ql.create=ld,Ql.pointsToPath=Oe,Is.geometryToLayer=td,Is.coordsToLatLng=Hp,Is.coordsToLatLngs=nd,Is.latLngToCoords=Vp,Is.latLngsToCoords=rd,Is.getFeature=ha,Is.asFeature=sd,tt.mergeOptions({boxZoom:!0});var cw=ls.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){We(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){mt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Qe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Bl(),Pp(),this._startPoint=this._map.mouseEventToContainerPoint(o),We(document,{contextmenu:mo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=$e("div","leaflet-zoom-box",this._container),Be(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var u=new se(this._point,this._startPoint),p=u.getSize();Dt(this._box,u.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(Qe(this._box),pt(this._container,"leaflet-crosshair")),Wl(),Np(),mt(document,{contextmenu:mo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var u=new ue(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});tt.addInitHook("addHandler","boxZoom",cw),tt.mergeOptions({doubleClickZoom:!0});var uw=ls.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var u=this._map,p=u.getZoom(),x=u.options.zoomDelta,k=o.originalEvent.shiftKey?p-x:p+x;u.options.doubleClickZoom==="center"?u.setZoom(k):u.setZoomAround(o.containerPoint,k)}});tt.addInitHook("addHandler","doubleClickZoom",uw),tt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var dw=ls.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new ai(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}Be(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){pt(this._map._container,"leaflet-grab"),pt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=F(this._map.options.maxBounds);this._offsetLimit=te(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var u=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(u),this._prunePositions(u)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,u){return o-(o-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;o.x<u.min.x&&(o.x=this._viscousLimit(o.x,u.min.x)),o.y<u.min.y&&(o.y=this._viscousLimit(o.y,u.min.y)),o.x>u.max.x&&(o.x=this._viscousLimit(o.x,u.max.x)),o.y>u.max.y&&(o.y=this._viscousLimit(o.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,u=Math.round(o/2),p=this._initialWorldOffset,x=this._draggable._newPos.x,k=(x-u+p)%o+u-p,N=(x+u+p)%o-u-p,I=Math.abs(k+p)<Math.abs(N+p)?k:N;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=I},_onDragEnd:function(o){var u=this._map,p=u.options,x=!p.inertia||o.noInertia||this._times.length<2;if(u.fire("dragend",o),x)u.fire("moveend");else{this._prunePositions(+new Date);var k=this._lastPos.subtract(this._positions[0]),N=(this._lastTime-this._times[0])/1e3,I=p.easeLinearity,K=k.multiplyBy(I/N),X=K.distanceTo([0,0]),ie=Math.min(p.inertiaMaxSpeed,X),ge=K.multiplyBy(ie/X),Ie=ie/(p.inertiaDeceleration*I),Ge=ge.multiplyBy(-Ie/2).round();!Ge.x&&!Ge.y?u.fire("moveend"):(Ge=u._limitOffset(Ge,u.options.maxBounds),Q(function(){u.panBy(Ge,{duration:Ie,easeLinearity:I,noMoveStart:!0,animate:!0})}))}}});tt.addInitHook("addHandler","dragging",dw),tt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var hw=ls.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),We(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),mt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,u=document.documentElement,p=o.scrollTop||u.scrollTop,x=o.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(x,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var u=this._panKeys={},p=this.keyCodes,x,k;for(x=0,k=p.left.length;x<k;x++)u[p.left[x]]=[-1*o,0];for(x=0,k=p.right.length;x<k;x++)u[p.right[x]]=[o,0];for(x=0,k=p.down.length;x<k;x++)u[p.down[x]]=[0,o];for(x=0,k=p.up.length;x<k;x++)u[p.up[x]]=[0,-1*o]},_setZoomDelta:function(o){var u=this._zoomKeys={},p=this.keyCodes,x,k;for(x=0,k=p.zoomIn.length;x<k;x++)u[p.zoomIn[x]]=o;for(x=0,k=p.zoomOut.length;x<k;x++)u[p.zoomOut[x]]=-o},_addHooks:function(){We(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){mt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var u=o.keyCode,p=this._map,x;if(u in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(x=this._panKeys[u],o.shiftKey&&(x=Y(x).multiplyBy(3)),p.options.maxBounds&&(x=p._limitOffset(Y(x),p.options.maxBounds)),p.options.worldCopyJump){var k=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(x)));p.panTo(k)}else p.panBy(x)}else if(u in this._zoomKeys)p.setZoom(p.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;mo(o)}}});tt.addInitHook("addHandler","keyboard",hw),tt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var fw=ls.extend({addHooks:function(){We(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){mt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var u=Dx(o),p=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var x=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),x),mo(o)},_performZoom:function(){var o=this._map,u=o.getZoom(),p=this._map.options.zoomSnap||0;o._stop();var x=this._delta/(this._map.options.wheelPxPerZoomLevel*4),k=4*Math.log(2/(1+Math.exp(-Math.abs(x))))/Math.LN2,N=p?Math.ceil(k/p)*p:k,I=o._limitZoom(u+(this._delta>0?N:-N))-u;this._delta=0,this._startTime=null,I&&(o.options.scrollWheelZoom==="center"?o.setZoom(u+I):o.setZoomAround(this._lastMousePos,u+I))}});tt.addInitHook("addHandler","scrollWheelZoom",fw);var eM=600;tt.mergeOptions({tapHold:Ce.touchNative&&Ce.safari&&Ce.mobile,tapTolerance:15});var pw=ls.extend({addHooks:function(){We(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){mt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var u=o.touches[0];this._startPos=this._newPos=new j(u.clientX,u.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(We(document,"touchend",rn),We(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),eM),We(document,"touchend touchcancel contextmenu",this._cancel,this),We(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){mt(document,"touchend",rn),mt(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),mt(document,"touchend touchcancel contextmenu",this._cancel,this),mt(document,"touchmove",this._onMove,this)},_onMove:function(o){var u=o.touches[0];this._newPos=new j(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,u){var p=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});p._simulated=!0,u.target.dispatchEvent(p)}});tt.addInitHook("addHandler","tapHold",pw),tt.mergeOptions({touchZoom:Ce.touch,bounceAtZoomLimits:!0});var mw=ls.extend({addHooks:function(){Be(this._map._container,"leaflet-touch-zoom"),We(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){pt(this._map._container,"leaflet-touch-zoom"),mt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var u=this._map;if(!(!o.touches||o.touches.length!==2||u._animatingZoom||this._zooming)){var p=u.mouseEventToContainerPoint(o.touches[0]),x=u.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(p.add(x)._divideBy(2))),this._startDist=p.distanceTo(x),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),We(document,"touchmove",this._onTouchMove,this),We(document,"touchend touchcancel",this._onTouchEnd,this),rn(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var u=this._map,p=u.mouseEventToContainerPoint(o.touches[0]),x=u.mouseEventToContainerPoint(o.touches[1]),k=p.distanceTo(x)/this._startDist;if(this._zoom=u.getScaleZoom(k,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&k<1||this._zoom>u.getMaxZoom()&&k>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,k===1)return}else{var N=p._add(x)._divideBy(2)._subtract(this._centerPoint);if(k===1&&N.x===0&&N.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(N),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),W(this._animRequest);var I=a(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Q(I,this,!0),rn(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,W(this._animRequest),mt(document,"touchmove",this._onTouchMove,this),mt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});tt.addInitHook("addHandler","touchZoom",mw),tt.BoxZoom=cw,tt.DoubleClickZoom=uw,tt.Drag=dw,tt.Keyboard=hw,tt.ScrollWheelZoom=fw,tt.TapHold=pw,tt.TouchZoom=mw,n.Bounds=se,n.Browser=Ce,n.CRS=ne,n.Canvas=iw,n.Circle=Wp,n.CircleMarker=ed,n.Class=M,n.Control=Ir,n.DivIcon=nw,n.DivOverlay=cs,n.DomEvent=y2,n.DomUtil=g2,n.Draggable=ai,n.Evented=Z,n.FeatureGroup=Ms,n.GeoJSON=Is,n.GridLayer=Zl,n.Handler=ls,n.Icon=ua,n.ImageOverlay=id,n.LatLng=J,n.LatLngBounds=ue,n.Layer=Ar,n.LayerGroup=ca,n.LineUtil=R2,n.Map=tt,n.Marker=Ju,n.Mixin=C2,n.Path=li,n.Point=j,n.PolyUtil=k2,n.Polygon=da,n.Polyline=Os,n.Popup=od,n.PosAnimation=Fx,n.Projection=M2,n.Rectangle=lw,n.Renderer=As,n.SVG=Ql,n.SVGOverlay=tw,n.TileLayer=fa,n.Tooltip=ad,n.Transformation=je,n.Util=z,n.VideoOverlay=ew,n.bind=a,n.bounds=te,n.canvas=ow,n.circle=U2,n.circleMarker=$2,n.control=ql,n.divIcon=Z2,n.extend=s,n.featureGroup=L2,n.geoJSON=Jx,n.geoJson=W2,n.gridLayer=K2,n.icon=D2,n.imageOverlay=H2,n.latLng=G,n.latLngBounds=F,n.layerGroup=A2,n.map=x2,n.marker=F2,n.point=Y,n.polygon=B2,n.polyline=z2,n.popup=G2,n.rectangle=J2,n.setOptions=w,n.stamp=c,n.svg=aw,n.svgOverlay=q2,n.tileLayer=rw,n.tooltip=Y2,n.transformation=pe,n.version=r,n.videoOverlay=V2;var tM=window.L;n.noConflict=function(){return window.L=tM,this},window.L=n})})(Jv,Jv.exports);var Ll=Jv.exports;const FW=xf(Ll);function up(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function dp(e,t){return t==null?function(r,s){const i=g.useRef();return i.current||(i.current=e(r,s)),i}:function(r,s){const i=g.useRef();i.current||(i.current=e(r,s));const a=g.useRef(r),{instance:l}=i.current;return g.useEffect(function(){a.current!==r&&(t(l,r,a.current),a.current=r)},[l,r,s]),i}}function oT(e,t){g.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var i;(i=t.layerContainer)==null||i.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function aT(e){return function(n){const r=rx(),s=e(cp(n,r),r);return tT(r.map,n.attribution),sx(s.current,n.eventHandlers),oT(s.current,r),s}}function $W(e,t){const n=g.useRef();g.useEffect(function(){if(t.pathOptions!==n.current){const s=t.pathOptions??{};e.instance.setStyle(s),n.current=s}},[e,t])}function UW(e){return function(n){const r=rx(),s=e(cp(n,r),r);return sx(s.current,n.eventHandlers),oT(s.current,r),$W(s.current,n),s}}function zW(e,t){const n=dp(e,t),r=aT(n);return iT(r)}function BW(e,t){const n=dp(e),r=DW(n,t);return AW(r)}function WW(e,t){const n=dp(e,t),r=UW(n);return iT(r)}function HW(e,t){const n=dp(e,t),r=aT(n);return LW(r)}function VW(e,t,n){const{opacity:r,zIndex:s}=t;r!=null&&r!==n.opacity&&e.setOpacity(r),s!=null&&s!==n.zIndex&&e.setZIndex(s)}const qW=WW(function({center:t,children:n,...r},s){const i=new Ll.Circle(t,r);return up(i,nT(s,{overlayContainer:i}))},MW);function ey(){return ey=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ey.apply(this,arguments)}function GW({bounds:e,boundsOptions:t,center:n,children:r,className:s,id:i,placeholder:a,style:l,whenReady:c,zoom:h,...f},m){const[v]=g.useState({className:s,id:i,style:l}),[y,S]=g.useState(null);g.useImperativeHandle(m,()=>(y==null?void 0:y.map)??null,[y]);const w=g.useCallback(E=>{if(E!==null&&y===null){const _=new Ll.Map(E,f);n!=null&&h!=null?_.setView(n,h):e!=null&&_.fitBounds(e,t),c!=null&&_.whenReady(c),S(IW(_))}},[]);g.useEffect(()=>()=>{y==null||y.map.remove()},[y]);const b=y?re.createElement(sT,{value:y},r):a??null;return re.createElement("div",ey({},v,{ref:w}),b)}const YW=g.forwardRef(GW),ZW=zW(function({position:t,...n},r){const s=new Ll.Marker(t,n);return up(s,nT(r,{overlayContainer:s}))},function(t,n,r){n.position!==r.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),KW=BW(function(t,n){const r=new Ll.Popup(t,n.overlayContainer);return up(r,n)},function(t,n,{position:r},s){g.useEffect(function(){const{instance:a}=t;function l(h){h.popup===a&&(a.update(),s(!0))}function c(h){h.popup===a&&s(!1)}return n.map.on({popupopen:l,popupclose:c}),n.overlayContainer==null?(r!=null&&a.setLatLng(r),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var f;n.map.off({popupopen:l,popupclose:c}),(f=n.overlayContainer)==null||f.unbindPopup(),n.map.removeLayer(a)}},[t,n,s,r])}),QW=HW(function({url:t,...n},r){const s=new Ll.TileLayer(t,cp(n,r));return up(s,r)},function(t,n,r){VW(t,n,r);const{url:s}=n;s!=null&&s!==r.url&&t.setUrl(s)}),XW=[46.5197,6.6323],JW=13,e8=Xi,t8=({listings:e,userLocation:t,isLoading:n=!1,onSelect:r})=>{const s=typeof window<"u",i=c=>FW.divIcon({className:"listing-marker",html:`
        <div style="width:72px;height:72px;border-radius:16px;overflow:hidden;box-shadow:0 8px 16px rgba(15,23,42,0.25);position:relative;background:#fff;">
          <img src="${(c.image??e8).replace(/"/g,"&quot;")}" alt="${c.title.replace(/"/g,"&quot;")}" style="width:100%;height:100%;object-fit:cover;" />
          <div style="position:absolute;bottom:6px;left:6px;padding:2px 8px;border-radius:9999px;background:rgba(15,23,42,0.85);color:#fff;font-size:12px;font-weight:600;line-height:1;">
            ${c.price}
          </div>
        </div>
      `,iconAnchor:[36,72],popupAnchor:[0,-72]}),a=g.useMemo(()=>{const c=e.find(h=>{const{lat:f,lng:m}=h.coordinates;return Number.isFinite(f)&&Number.isFinite(m)&&f!==0&&m!==0});return c?[c.coordinates.lat,c.coordinates.lng]:t?[t.lat,t.lng]:XW},[e,t]),l=t?13:e.length>1?12:JW;return s?d.jsxs("div",{className:"relative mx-auto h-[70vh] w-full max-w-5xl",children:[d.jsxs(YW,{center:a,zoom:l,scrollWheelZoom:!0,className:"h-full w-full overflow-hidden rounded-lg shadow-sm",children:[d.jsx(QW,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t&&d.jsx(qW,{center:[t.lat,t.lng],radius:300,pathOptions:{color:"#2563eb",fillColor:"#60a5fa",fillOpacity:.25}}),e.map(c=>d.jsx(ZW,{position:[c.coordinates.lat,c.coordinates.lng],icon:i(c),eventHandlers:{click:()=>{r==null||r(c.id)}},children:d.jsx(KW,{children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold",children:c.title}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.price,"  ",c.location]}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Host: ",c.host]})]}),d.jsx(Le,{size:"sm",className:"w-full",onClick:()=>r==null?void 0:r(c.id),children:"View details"})]})})},c.id))]},`${a.toString()}-${l}`),n&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/70 text-sm text-muted-foreground",children:"Updating map"})]}):null},lT=e=>({id:e.id,image:e.image,price:e.price,title:e.title,host:e.host,hostEmail:e.hostEmail??null,location:e.location,availableDates:e.availableDates,description:e.description,hostId:e.hostId??null,availability:e.availability??null,coordinates:e.coordinates??null});var hp="Dialog",[cT,UG]=Tn(hp),[n8,ns]=cT(hp),uT=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=e,l=g.useRef(null),c=g.useRef(null),[h,f]=ti({prop:r,defaultProp:s??!1,onChange:i,caller:hp});return d.jsx(n8,{scope:t,triggerRef:l,contentRef:c,contentId:bs(),titleId:bs(),descriptionId:bs(),open:h,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(m=>!m),[f]),modal:a,children:n})};uT.displayName=hp;var dT="DialogTrigger",r8=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ns(dT,n),i=ze(t,s.triggerRef);return d.jsx(ke.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ax(s.open),...r,ref:i,onClick:le(e.onClick,s.onOpenToggle)})});r8.displayName=dT;var ix="DialogPortal",[s8,hT]=cT(ix,{forceMount:void 0}),fT=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,i=ns(ix,t);return d.jsx(s8,{scope:t,forceMount:n,children:g.Children.map(r,a=>d.jsx(Jt,{present:n||i.open,children:d.jsx(Cl,{asChild:!0,container:s,children:a})}))})};fT.displayName=ix;var af="DialogOverlay",pT=g.forwardRef((e,t)=>{const n=hT(af,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=ns(af,e.__scopeDialog);return i.modal?d.jsx(Jt,{present:r||i.open,children:d.jsx(o8,{...s,ref:t})}):null});pT.displayName=af;var i8=Zi("DialogOverlay.RemoveScroll"),o8=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ns(af,n);return d.jsx(Lu,{as:i8,allowPinchZoom:!0,shards:[s.contentRef],children:d.jsx(ke.div,{"data-state":ax(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),ea="DialogContent",mT=g.forwardRef((e,t)=>{const n=hT(ea,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=ns(ea,e.__scopeDialog);return d.jsx(Jt,{present:r||i.open,children:i.modal?d.jsx(a8,{...s,ref:t}):d.jsx(l8,{...s,ref:t})})});mT.displayName=ea;var a8=g.forwardRef((e,t)=>{const n=ns(ea,e.__scopeDialog),r=g.useRef(null),s=ze(t,n.contentRef,r);return g.useEffect(()=>{const i=r.current;if(i)return Xf(i)},[]),d.jsx(gT,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:le(e.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:le(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:le(e.onFocusOutside,i=>i.preventDefault())})}),l8=g.forwardRef((e,t)=>{const n=ns(ea,e.__scopeDialog),r=g.useRef(!1),s=g.useRef(!1);return d.jsx(gT,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,h;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((h=n.triggerRef.current)==null?void 0:h.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),gT=g.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=e,l=ns(ea,n),c=g.useRef(null),h=ze(t,c);return Qf(),d.jsxs(d.Fragment,{children:[d.jsx(Au,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:d.jsx(ra,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":ax(l.open),...a,ref:h,onDismiss:()=>l.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(c8,{titleId:l.titleId}),d.jsx(d8,{contentRef:c,descriptionId:l.descriptionId})]})]})}),ox="DialogTitle",vT=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ns(ox,n);return d.jsx(ke.h2,{id:s.titleId,...r,ref:t})});vT.displayName=ox;var yT="DialogDescription",xT=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ns(yT,n);return d.jsx(ke.p,{id:s.descriptionId,...r,ref:t})});xT.displayName=yT;var wT="DialogClose",_T=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ns(wT,n);return d.jsx(ke.button,{type:"button",...r,ref:t,onClick:le(e.onClick,()=>s.onOpenChange(!1))})});_T.displayName=wT;function ax(e){return e?"open":"closed"}var bT="DialogTitleWarning",[zG,ST]=BI(bT,{contentName:ea,titleName:ox,docsSlug:"dialog"}),c8=({titleId:e})=>{const t=ST(bT),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},u8="DialogDescriptionWarning",d8=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ST(u8).contentName}}.`;return g.useEffect(()=>{var i;const s=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},h8=uT,f8=fT,ET=pT,CT=mT,kT=vT,PT=xT,p8=_T;const fp=h8,m8=f8,NT=g.forwardRef(({className:e,...t},n)=>d.jsx(ET,{ref:n,className:Te("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));NT.displayName=ET.displayName;const Bu=g.forwardRef(({className:e,children:t,...n},r)=>d.jsxs(m8,{children:[d.jsx(NT,{}),d.jsxs(CT,{ref:r,className:Te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,d.jsxs(p8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[d.jsx(UC,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Bu.displayName=CT.displayName;const Wu=({className:e,...t})=>d.jsx("div",{className:Te("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Wu.displayName="DialogHeader";const lx=({className:e,...t})=>d.jsx("div",{className:Te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});lx.displayName="DialogFooter";const Hu=g.forwardRef(({className:e,...t},n)=>d.jsx(kT,{ref:n,className:Te("text-lg font-semibold leading-none tracking-tight",e),...t}));Hu.displayName=kT.displayName;const pp=g.forwardRef(({className:e,...t},n)=>d.jsx(PT,{ref:n,className:Te("text-sm text-muted-foreground",e),...t}));pp.displayName=PT.displayName;const g8=async e=>{const{data:t,error:n}=await be.from("user_profiles").select("id, email, avatar_url, full_name, user_role, bio, university, program_name, program_year, program_type").eq("id",e).maybeSingle();if(n)throw n;return t??null},TT=async e=>{if(!e.length)return[];const{data:t,error:n}=await be.from("user_profiles").select("id, email, avatar_url, full_name, user_role, bio, university, program_name, program_year, program_type").in("id",e);if(n)throw n;return t??[]},t1=e=>{var r,s;const t=(r=e.city)==null?void 0:r.trim(),n=(s=e.country)==null?void 0:s.trim();return t&&n?`${t}, ${n}`:t||n||e.location},So=e=>{if(!(e!=null&&e.start)||!(e!=null&&e.end))return"Flexible availability";const t=new Date(e.start),n=new Date(e.end);if(Number.isNaN(t.getTime())||Number.isNaN(n.getTime()))return"Flexible availability";const r=t.getMonth()===n.getMonth(),s=rt(t,"MMM d"),i=r?rt(n,"d"):rt(n,"MMM d");return`${s}-${i}`},jT=70,v8=(e,t=jT)=>{if(!e)return"";const n=e.trim();return n.length<=t?n:`${n.slice(0,t).trimEnd()}`},$c="e.g. Left street 15",lf="Calm neighborhood",cf="Cozy couch and a kitchen to share",fu="30",n1=e=>{var n,r;if((n=e.gallery)!=null&&n.length)return e.gallery;const t=(r=e.availability)==null?void 0:r.photos;return Array.isArray(t)&&t.length?t:e.image?[e.image]:[]},y8={bsc:"Bachelor (BSc)",msc:"Master (MSc)",phd:"Doctorate (PhD)",other:"Other program"},x8=[{id:"static-1",image:Xi,gallery:[Xi],price:"$25",title:"Leather Corner Couch",host:"Sarah M.",hostEmail:null,location:"Downtown Campus",country:"Latvia",city:"Riga",addressLine:"Downtown Campus",coordinates:{lat:56.9496,lng:24.1052},availability:{start:"2024-10-15T00:00:00.000Z",end:"2024-10-25T23:59:59.000Z"},availableDates:So({start:"2024-10-15T00:00:00.000Z",end:"2024-10-25T23:59:59.000Z"}),description:"Comfortable leather couch with plants and natural lighting. Perfect for studying or relaxing near campus.",hostId:null},{id:"static-2",image:Vh,gallery:[Vh],price:"$18",title:"Cozy Beige Sectional",host:"Mike T.",hostEmail:null,location:"North Dorms",country:"Latvia",city:"Riga",addressLine:"North Dorms",coordinates:{lat:56.9578,lng:24.1173},availability:{start:"2024-10-20T00:00:00.000Z",end:"2024-10-30T23:59:59.000Z"},availableDates:So({start:"2024-10-20T00:00:00.000Z",end:"2024-10-30T23:59:59.000Z"}),description:"Spacious sectional with great natural light. Great for overnight stays during exam week.",hostId:null},{id:"static-3",image:qh,gallery:[qh],price:"$22",title:"Modern Grey Sectional",host:"Emma K.",hostEmail:null,location:"Library District",country:"Latvia",city:"Riga",addressLine:"Library District",coordinates:{lat:56.9461,lng:24.1177},availability:{start:"2024-10-18T00:00:00.000Z",end:"2024-10-28T23:59:59.000Z"},availableDates:So({start:"2024-10-18T00:00:00.000Z",end:"2024-10-28T23:59:59.000Z"}),description:"Perfect spot for late night study sessions. Close to the library and quiet.",hostId:null},{id:"static-4",image:Gh,gallery:[Gh],price:"$28",title:"Green Corduroy Sectional",host:"Alex R.",hostEmail:null,location:"Student Village",country:"Latvia",city:"Riga",addressLine:"Student Village",coordinates:{lat:56.9423,lng:24.0998},availability:{start:"2024-10-16T00:00:00.000Z",end:"2024-10-26T23:59:59.000Z"},availableDates:So({start:"2024-10-16T00:00:00.000Z",end:"2024-10-26T23:59:59.000Z"}),description:"Unique green sectional with plants and cozy vibes. Great for extended stays.",hostId:null},{id:"static-5",image:Yh,gallery:[Yh],price:"$32",title:"Modular Beige Sofa",host:"Jamie L.",hostEmail:null,location:"Arts Quarter",country:"Latvia",city:"Riga",addressLine:"Arts Quarter",coordinates:{lat:56.9521,lng:24.108},availability:{start:"2024-10-22T00:00:00.000Z",end:"2024-11-01T23:59:59.000Z"},availableDates:So({start:"2024-10-22T00:00:00.000Z",end:"2024-11-01T23:59:59.000Z"}),description:"Spacious modular sofa in bright apartment. Perfect for creative students.",hostId:null},{id:"static-6",image:Zh,gallery:[Zh],price:"$35",title:"Designer Grey Sectional",host:"Taylor B.",hostEmail:null,location:"Campus Heights",country:"Latvia",city:"Riga",addressLine:"Campus Heights",coordinates:{lat:56.9448,lng:24.1312},availability:{start:"2024-10-19T00:00:00.000Z",end:"2024-10-29T23:59:59.000Z"},availableDates:So({start:"2024-10-19T00:00:00.000Z",end:"2024-10-29T23:59:59.000Z"}),description:"Modern designer couch in beautiful apartment with exposed beams. Premium comfort.",hostId:null}],r1="couch-photos",w8=e=>{const t=e.name.split(".").pop();return`${typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2)}`}${t?`.${t}`:""}`},_8=async(e,t)=>{const n=w8(e),r=`${t}/${n}`,{error:s}=await be.storage.from(r1).upload(r,e,{cacheControl:"3600",upsert:!0});if(s)throw new Error(s.message??"Failed to upload listing photo.");const{data:i}=be.storage.from(r1).getPublicUrl(r);if(!(i!=null&&i.publicUrl))throw new Error("Unable to fetch uploaded listing photo URL.");return i.publicUrl},s1=()=>({title:"",price:fu,description:cf,location:lf,country:"Switzerland",city:"",addressLine:$c,checkInTime:""}),b8=e=>{var t,n,r,s;return{title:e.title??"",price:(e.price??`$${fu}`).replace(/[^0-9.]/g,"")||fu,description:e.description??cf,location:e.location??lf,country:e.country??((t=e.availability)==null?void 0:t.country)??"Switzerland",city:e.city??((n=e.availability)==null?void 0:n.city)??"",addressLine:e.addressLine??((r=e.availability)==null?void 0:r.addressLine)??$c,checkInTime:((s=e.availability)==null?void 0:s.checkInTime)??""}},Jm=e=>{if(!e)return"$0";const t=e.trim();return t?t.startsWith("$")?t:`$${t}`:"$0"},S8=e=>{const t=Number(e.replace(/[^0-9.]/g,""));return Number.isFinite(t)?t:0},E8=e=>e.reduce((t,n)=>{t[n.couchId]=n,n.storageId&&(t[n.storageId]=n);const r=rf(n.couchId);return t[r]=n,t},{}),C8=()=>{const e=ts(),n=sa().state??null,{signOut:r,profile:s,session:i}=Rr(),{toast:a}=ks(),l=J0(s,i),c=(s==null?void 0:s.user_role)==="host",[h,f]=g.useState({}),m=g.useMemo(()=>new Set(Object.keys(h)),[h]),[v,y]=g.useState([]),[S,w]=g.useState(!1),[b,E]=g.useState("list"),[_,C]=g.useState(null),[P,T]=g.useState(!1),[R,O]=g.useState(""),[A,B]=g.useState("all"),[q,Q]=g.useState("all"),[W,z]=g.useState(""),[M,ee]=g.useState(""),[H,Z]=g.useState(),[j,U]=g.useState("all"),[Y,se]=g.useState(!1),[te,ue]=g.useState(null),[F,J]=g.useState([]),[G,ne]=g.useState([]),[he,Me]=g.useState(!1),[Ee,je]=g.useState(!1),[pe,V]=g.useState(()=>s1()),[oe,ye]=g.useState({}),[Oe,dt]=g.useState({}),[Lt,yn]=g.useState({}),[ur,en]=g.useState({}),[Wt,tn]=g.useState(""),[rs,dr]=g.useState([]),[ot,nn]=g.useState(null),[hr,Or]=g.useState(!1),Ot=g.useMemo(()=>H!=null&&H.from&&(H!=null&&H.to)?`${rt(H.from,"MMM d")} - ${rt(H.to,"MMM d")}`:H!=null&&H.from?`Starting ${rt(H.from,"MMM d")}`:"Select date range",[H]),ii=R.trim().length>0||A!=="all"||q!=="all"||W.trim().length>0||M.trim().length>0||!!(H!=null&&H.from||H!=null&&H.to);g.useEffect(()=>{n!=null&&n.listingScope&&j!==n.listingScope&&U(n.listingScope)},[j,n==null?void 0:n.listingScope]);const Zn=g.useCallback(($,de)=>{V(xe=>({...xe,[$]:de}))},[]),ss=g.useCallback($=>{V(de=>({...de,country:$,city:de.city&&(dc.citiesByCountry[$]??[]).includes(de.city)?de.city:""}))},[]),Rn=g.useCallback($=>{ye(de=>({...de,[$]:!de[$]}))},[]),Ts=g.useCallback(($,de)=>{dt(xe=>({...xe,[$]:de}))},[]),ln=g.useCallback(()=>{se(!1),ue(null),J([]),ne([]),Me(!1),V(s1()),tn(""),nn(null),dr([])},[]),Kn=g.useCallback($=>{if(!$||$.length===0){ne([]);return}const de=Math.max(0,7-F.length);if(de<=0){a({title:"Gallery is full",description:"You can upload up to 7 photos.",variant:"destructive"});return}const xe=Array.from($).slice(0,de);if(xe.length===0){a({title:"Too many photos",description:"You can only have up to 7 photos total.",variant:"destructive"});return}ne(xe)},[F.length,a]),co=g.useCallback($=>{J(de=>de.filter(xe=>xe!==$))},[]),js=g.useCallback($=>{$.preventDefault(),Kn($.dataTransfer.files)},[Kn]),is=g.useCallback($=>{var de;if(!(s!=null&&s.id)){a({title:"Sign in to edit",description:"Hosts must be signed in to update a listing.",variant:"destructive"});return}if($.hostId&&$.hostId!==s.id){a({title:"Can't edit this listing",description:"Switch to My listing to edit your space.",variant:"destructive"});return}ue($),J(((de=$.gallery)==null?void 0:de.slice(0,3))??($.image?[$.image]:[])),ne([]),V(b8($)),tn($.addressLine??$.location??$c),nn(null),dr([]),se(!0)},[s==null?void 0:s.id,a]),Pe=g.useCallback(async $=>{var ce,et,Se,Fe,it,mr,gr,vr,cn;if($.preventDefault(),!te)return;if(!(s!=null&&s.id)){a({title:"Sign in to edit",description:"Hosts must be signed in to update a listing.",variant:"destructive"});return}if(te.hostId&&te.hostId!==s.id){a({title:"Can't edit this listing",description:"Switch to My listing to edit your space.",variant:"destructive"});return}const de=pe.title.trim();if(!de){a({title:"Add a title",description:"Give your listing a short name before saving.",variant:"destructive"});return}let xe=pe.location.trim();if(xe||(xe=lf),!xe){a({title:"Add your location",description:"Let renters know where they'll be staying.",variant:"destructive"});return}if(!F.length&&!G.length){a({title:"Add a photo",description:"Upload at least one photo of your couch.",variant:"destructive"});return}Me(!0);try{let xt=[...F];if(G.length){const Be=Math.max(0,7-xt.length),pt=G.slice(0,Be);for(const oi of pt){const la=await _8(oi,s.id);xt.push(la)}}if(!xt.length)throw new Error("At least one photo is required.");xt=xt.slice(0,7);const Xn=xt[0]??te.image,Tt=Jm(pe.price.trim()||te.price||fu),$e=pe.description.trim()||te.description||cf,Qe=pe.city.trim(),Zt=(pe.country.trim()||"Switzerland").trim(),un=Wt.trim()||te.addressLine||((ce=te.availability)==null?void 0:ce.addressLine)||$c,Ze=pe.checkInTime.trim(),Mn={start:((et=te.availability)==null?void 0:et.start)??null,end:((Se=te.availability)==null?void 0:Se.end)??null,checkInTime:(Ze||((Fe=te.availability)==null?void 0:Fe.checkInTime))??null,country:Zt||te.country||((it=te.availability)==null?void 0:it.country)||null,city:Qe||te.city||((mr=te.availability)==null?void 0:mr.city)||null,addressLine:un||te.addressLine||((gr=te.availability)==null?void 0:gr.addressLine)||null,coordinates:ot??((vr=te.availability)==null?void 0:vr.coordinates)??(te.coordinates?{lat:te.coordinates.lat,lng:te.coordinates.lng}:null),photos:xt,published:typeof((cn=te.availability)==null?void 0:cn.published)=="boolean"?te.availability.published:te.isPublished??!1};await qv({id:te.id,hostId:s.id,hostName:s.full_name??s.email??te.host??"Host",hostEmail:s.email??(i==null?void 0:i.user.email)??te.hostEmail??null,title:de,imageUrl:Xn,pricePerNight:Tt,location:xe,description:$e,availability:Mn}),a({title:"Listing updated",description:"Your couch details have been saved."}),window.dispatchEvent(new Event("listings-updated")),ln()}catch(xt){console.error("Failed to update listing",xt),a({title:"Unable to update listing",description:xt instanceof Error?xt.message:"Please try again in a moment.",variant:"destructive"})}finally{Me(!1)}},[ln,pe,F,G,te,s,i,a]),Ye=()=>{O(""),B("all"),Q("all"),z(""),ee(""),Z(void 0)},qe=g.useCallback(async()=>{if(!l){f({});return}try{const $=await sf(l);f(E8($))}catch($){console.warn("Failed to load wishlist",$)}},[l]);g.useEffect(()=>{qe()},[qe]),g.useEffect(()=>{if(typeof window>"u")return;const $=()=>qe();return window.addEventListener("wishlist-updated",$),()=>window.removeEventListener("wishlist-updated",$)},[qe]);const we=g.useCallback($=>{B($),$==="all"&&Q("all")},[]),me=g.useCallback($=>{Q($)},[]),fe=g.useCallback(($,de)=>{de!=null&&de.defaultPrevented||e(`/couch/${$.id}`,{state:{couch:$}})},[e]),De=g.useCallback(async($,de)=>{if($.stopPropagation(),$.preventDefault(),!l){a({title:"Sign in to save couches",description:"Create an account or sign in to build your wishlist.",variant:"destructive"});return}const xe=rf(de.id),ce=h[de.id]??h[xe];try{if(ce){await ex(l,de.id),f(Fe=>{const it={...Fe};return delete it[de.id],delete it[xe],it}),a({title:"Removed from wishlist",description:`${de.title} is no longer saved.`});return}const et=lT(de),Se=await pN(l,de.id,et);Se&&(f(Fe=>({...Fe,[Se.couchId]:Se,[Se.storageId]:Se,[rf(Se.couchId)]:Se})),a({title:"Saved to wishlist",description:`${de.title} was added for later.`}))}catch(et){console.error("Wishlist toggle failed",et),a({title:"Unable to update wishlist",description:"Please try again in a moment.",variant:"destructive"})}},[a,l,h]),ft=g.useRef(new Set),Et=g.useRef(!1),Yt=g.useRef(new Set),Qn=g.useRef({}),Nt=g.useCallback(async()=>{try{w(!0);const $=await K6(),de=[Xi,Vh,qh,Gh,Yh,Zh],xe=$.map((ce,et)=>{var $e,Qe,Zt,un;const Se=ce.availability?{start:ce.availability.start??null,end:ce.availability.end??null,checkInTime:ce.availability.checkInTime??null,published:typeof ce.availability.published=="boolean"?ce.availability.published:null,country:ce.availability.country??null,city:ce.availability.city??null,addressLine:ce.availability.addressLine??null,photos:Array.isArray(ce.availability.photos)?ce.availability.photos.filter(Ze=>typeof Ze=="string"&&Ze.trim().length>0):null,coordinates:ce.availability.coordinates&&typeof ce.availability.coordinates.lat=="number"&&typeof ce.availability.coordinates.lng=="number"?{lat:ce.availability.coordinates.lat,lng:ce.availability.coordinates.lng,displayName:ce.availability.coordinates.displayName??null}:null}:null,Fe=(Se==null?void 0:Se.start)&&(Se==null?void 0:Se.end),it=typeof(Se==null?void 0:Se.published)=="boolean"?Se.published:!1,mr=Array.isArray(Se==null?void 0:Se.photos)?Se.photos:[],gr=ce.image??mr[0]??de[et%de.length],vr=(($e=Se==null?void 0:Se.country)==null?void 0:$e.trim())||null,cn=((Qe=Se==null?void 0:Se.city)==null?void 0:Qe.trim())||null,xt=((Zt=Se==null?void 0:Se.addressLine)==null?void 0:Zt.trim())||((un=ce.location)==null?void 0:un.trim())||null,Xn=Se!=null&&Se.coordinates&&typeof Se.coordinates.lat=="number"&&typeof Se.coordinates.lng=="number"?{lat:Se.coordinates.lat,lng:Se.coordinates.lng}:null,Tt=Fe?So(Se):Se!=null&&Se.checkInTime?`Check-in after ${Se.checkInTime}`:"Flexible availability";return{id:ce.id,image:gr,price:Jm(ce.price??"0"),title:ce.title??`Community couch ${et+1}`,host:ce.hostName??"Community host",hostEmail:ce.hostEmail??null,location:ce.location??"Address shared after booking",country:vr,city:cn,addressLine:xt,availableDates:Tt,description:ce.description??(ce.createdAt?`Listing published on ${new Date(ce.createdAt).toLocaleDateString()}`:"Listing added by our host community."),hostId:ce.hostId,availability:Se,coordinates:Xn,gallery:mr.length?mr:gr?[gr]:[],hostBio:null,isPublished:it}});y(xe)}catch($){console.error("Failed to fetch listings",$)}finally{w(!1)}},[]);g.useEffect(()=>{typeof window>"u"||!("geolocation"in navigator)||navigator.geolocation.getCurrentPosition($=>{C({lat:$.coords.latitude,lng:$.coords.longitude})},$=>{Et.current||(console.warn("Unable to determine user location",$),Et.current=!0)},{enableHighAccuracy:!1,timeout:5e3})},[]),g.useEffect(()=>{Nt()},[Nt]),g.useEffect(()=>{const $=Wt.trim();if(!$||$.length<3){dr([]),Or(!1);return}if(ot&&ot.displayName===$){dr([]),Or(!1);return}const de=new AbortController;Or(!0);const xe=setTimeout(async()=>{try{const ce=await G6($,{signal:de.signal});dr(ce)}catch(ce){ce instanceof DOMException&&ce.name==="AbortError"||console.warn("Address lookup failed",ce)}finally{Or(!1)}},250);return()=>{de.abort(),clearTimeout(xe)}},[Wt,ot]);const fr=g.useCallback(async($,de)=>{if($.id){en(xe=>({...xe,[$.id]:!0}));try{await J6($.id,de),y(xe=>xe.map(ce=>ce.id===$.id?{...ce,isPublished:de,availability:{...ce.availability,published:de}}:ce)),await Nt(),a({title:de?"Listing published":"Listing unpublished",description:de?"Your listing is live and visible to renters.":"Your listing is hidden until you publish it again."}),de&&j==="all"&&U("all")}catch(xe){console.error("Failed to toggle listing visibility",xe),a({title:"Unable to update listing",description:xe instanceof Error?xe.message:"Please try again in a moment.",variant:"destructive"})}finally{en(xe=>{const ce={...xe};return delete ce[$.id],ce})}}},[Nt,a]),pr=g.useCallback(async()=>{if(!(s!=null&&s.id)){a({title:"Sign in required",description:"Hosts need to sign in before creating a listing.",variant:"destructive"});return}je(!0);try{const $=typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${s.id}-${Date.now()}`;await qv({id:$,hostId:s.id,hostName:s.full_name??s.email??"Host",hostEmail:s.email??(i==null?void 0:i.user.email)??null,title:s.full_name?`${s.full_name}'s couch`:"Hosted couch",imageUrl:null,pricePerNight:Jm(fu),location:lf,description:cf,availability:{start:null,end:null,checkInTime:null,country:null,city:null,addressLine:$c,coordinates:null,published:!1}}),await Nt(),U("mine"),a({title:"Listing created",description:"Open Edit listing to add your address, couch photos, and description."})}catch($){console.error("Failed to create placeholder listing",$),a({title:"Unable to create listing",description:$ instanceof Error?$.message:"Please try again in a moment.",variant:"destructive"})}finally{je(!1)}},[Nt,s==null?void 0:s.email,s==null?void 0:s.full_name,s==null?void 0:s.id,i==null?void 0:i.user.email,a]);g.useEffect(()=>{const $=v.map(ce=>ce.hostId).filter(ce=>!!ce&&!Yt.current.has(ce));if(!$.length)return;let de=!1;return(async()=>{try{const ce=await TT(Array.from(new Set($)));if(de)return;yn(et=>{const Se={...et};return ce.forEach(Fe=>{Yt.current.add(Fe.id),Se[Fe.id]={bio:Fe.bio??null,university:Fe.university??null,programName:Fe.program_name??null,programYear:Fe.program_year??null,programType:Fe.program_type??null,avatarUrl:Fe.avatar_url??null}}),Se})}catch(ce){console.warn("Failed to load host bios",ce)}})(),()=>{de=!0}},[v]),g.useEffect(()=>{dt($=>{let de=!1;const xe={...$};return v.forEach(ce=>{const et=n1(ce);if(!et.length){ce.id in xe&&(delete xe[ce.id],de=!0);return}(xe[ce.id]??0)>=et.length&&(xe[ce.id]=0,de=!0)}),de?xe:$})},[v]),g.useEffect(()=>{if(typeof window>"u")return;const $=()=>{Nt()};return window.addEventListener("listings-updated",$),()=>window.removeEventListener("listings-updated",$)},[Nt]),g.useEffect(()=>{const $=v.filter(ce=>!ce.coordinates&&!!ce.location&&!ft.current.has(ce.id));if(!$.length){T(!1);return}let de=!1;return T(!0),(async()=>{for(const ce of $){ft.current.add(ce.id);try{const et=await q6(ce.location);if(!et||de)continue;y(Se=>Se.map(Fe=>Fe.id===ce.id?{...Fe,coordinates:et}:Fe))}catch(et){console.warn("Unable to geocode address",et)}}de||T(!1)})(),()=>{de=!0}},[v]);const Ce=g.useMemo(()=>v.length>0?v:x8,[v]),Fl=g.useMemo(()=>s!=null&&s.id?v.filter($=>$.hostId===s.id):[],[s==null?void 0:s.id,v]),$l=g.useMemo(()=>j==="mine"?Fl:Ce,[Ce,j,Fl]),Ul=dc.countries,Yu=g.useMemo(()=>A==="all"?[]:dc.citiesByCountry[A]??[],[A]),uo=g.useMemo(()=>{const $=pe.country.trim()||"Switzerland";return dc.citiesByCountry[$]??[]},[pe.country]);g.useEffect(()=>{if(A==="all"){Q("all");return}const $=dc.citiesByCountry[A]??[];q!=="all"&&($.includes(q)||Q("all"))},[q,A]);const os=g.useMemo(()=>{const $=R.trim().toLowerCase(),de=A==="all"?null:A.toLowerCase(),xe=q==="all"?null:q.toLowerCase(),ce=W.trim()?Number(W):null,et=M.trim()?Number(M):null,Se=ce!==null&&Number.isFinite(ce),Fe=et!==null&&Number.isFinite(et);return $l.filter(it=>{const mr=$?[it.title,it.location,it.host,it.city,it.country,it.addressLine].filter(Boolean).some(Tt=>Tt.toLowerCase().includes($)):!0,gr=j==="mine"?!0:it.isPublished!==!1,vr=(()=>{const Tt=S8(it.price);return!(Se&&Tt<ce||Fe&&Tt>et)})(),cn=!0,xt=(()=>{var Qe,Zt;if(!de)return!0;const Tt=(Qe=it.country)==null?void 0:Qe.trim().toLowerCase();return Tt?Tt===de:(((Zt=it.location)==null?void 0:Zt.toLowerCase())??"").includes(de)})(),Xn=(()=>{var Zt;if(!xe)return!0;const Tt=(Zt=it.city)==null?void 0:Zt.trim().toLowerCase();if(Tt&&Tt===xe)return!0;const $e=[it.city,it.addressLine,it.location].filter(Boolean).join(" ").toLowerCase();if($e.includes(xe))return!0;const Qe=eW[xe]??[];return Qe.length&&$e?Qe.some(un=>$e.includes(un)):!1})();return mr&&gr&&vr&&cn&&xt&&Xn})},[$l,q,A,H,M,W,R,j]),Rs=g.useMemo(()=>os.filter($=>!!$.coordinates),[os]),zl=g.useMemo(()=>Rs.map($=>({id:$.id,title:$.title,price:$.price,coordinates:$.coordinates,location:t1($),host:$.host,image:$.image})),[Rs]),Cp=os.length===1?"stay":"stays";return d.jsxs("div",{className:"relative min-h-screen overflow-hidden dreamy-bg text-slate-900",children:[d.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[d.jsx("div",{className:"absolute -top-32 right-0 h-72 w-72 rounded-full bg-blue-200/40 blur-[140px]"}),d.jsx("div",{className:"absolute bottom-0 left-[-10%] h-80 w-80 rounded-full bg-indigo-200/30 blur-[160px]"})]}),d.jsxs("main",{className:"relative z-10 mx-auto w-full max-w-6xl px-4 py-12 sm:px-6 lg:px-8",children:[d.jsxs("header",{className:"mb-10 space-y-6",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-slate-500",children:"Welcome back"}),d.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Find calming couches near campus"}),d.jsxs("p",{className:"text-sm text-slate-500",children:["Showing ",d.jsx("span",{className:"font-semibold text-slate-800",children:os.length})," ",Cp,R?` for "${R}"`:"","."]})]}),d.jsx("div",{className:"flex flex-wrap items-center gap-3 text-sm text-slate-500",children:d.jsxs("span",{children:["Signed in as ",d.jsx("span",{className:"font-semibold text-slate-800",children:(s==null?void 0:s.full_name)??"student"})]})})]}),d.jsxs("section",{className:"mb-8 space-y-4 rounded-[2rem] border border-white/50 bg-white/85 p-5 shadow-2xl backdrop-blur-xl",children:[d.jsx("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center",children:d.jsxs("div",{className:"flex flex-1 items-center gap-3 rounded-full border border-slate-100 bg-white px-4 py-2 shadow-sm",children:[d.jsx(UA,{className:"h-5 w-5 text-slate-400"}),d.jsx("input",{type:"search",value:R,onChange:$=>O($.target.value),placeholder:"Search by host, city, or address",className:"w-full bg-transparent text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none"})]})}),d.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[d.jsx("div",{className:"w-full",children:d.jsxs(Ai,{value:A,onValueChange:we,children:[d.jsx(Gs,{className:"w-full rounded-full border border-slate-100 bg-white px-4 py-2 text-left text-sm font-medium text-slate-600",children:d.jsx(Li,{placeholder:"Country"})}),d.jsxs(Ys,{children:[d.jsx(qr,{value:"all",children:"All countries"}),Ul.map($=>d.jsx(qr,{value:$,children:$},$))]})]})}),d.jsx("div",{className:"w-full",children:d.jsxs(Ai,{value:q,onValueChange:me,disabled:A==="all",children:[d.jsx(Gs,{className:"w-full rounded-full border border-slate-100 bg-white px-4 py-2 text-left text-sm font-medium text-slate-600",disabled:A==="all",children:d.jsx(Li,{placeholder:A==="all"?"Choose Switzerland first":"City"})}),d.jsxs(Ys,{children:[d.jsx(qr,{value:"all",children:"All cities in Switzerland"}),Yu.map($=>d.jsx(qr,{value:$,children:$},$))]})]})})]}),d.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[d.jsxs("div",{className:"grid w-full gap-3 sm:grid-cols-2",children:[d.jsxs("div",{className:"w-full rounded-[1.5rem] border border-slate-100 bg-white/90 p-4 shadow-sm",children:[d.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Price range"}),d.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[d.jsx(ct,{type:"number",inputMode:"numeric",min:"0",placeholder:"Min",value:W,onChange:$=>z($.target.value),className:"rounded-full border-slate-200 bg-slate-50 text-sm"}),d.jsx("span",{className:"text-xs text-slate-400",children:"to"}),d.jsx(ct,{type:"number",inputMode:"numeric",min:"0",placeholder:"Max",value:M,onChange:$=>ee($.target.value),className:"rounded-full border-slate-200 bg-slate-50 text-sm"})]}),d.jsx("p",{className:"mt-2 text-xs text-slate-400",children:"Set any minimum or maximum nightly rate."})]}),d.jsxs("div",{className:"w-full rounded-[1.5rem] border border-slate-100 bg-white/90 p-4 shadow-sm",children:[d.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Stay dates"}),d.jsxs(LP,{children:[d.jsx(DP,{asChild:!0,children:d.jsxs("button",{type:"button",className:"mt-3 flex w-full items-center justify-between rounded-full border border-slate-200 bg-slate-50 px-4 py-2 text-left text-sm font-medium text-slate-600 transition hover:border-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-200",children:[d.jsx("span",{children:Ot}),d.jsx(d0,{className:"h-4 w-4 text-slate-400"})]})}),d.jsxs(G0,{className:"w-auto rounded-2xl border bg-white p-4 shadow-xl",align:"start",children:[d.jsx(Xh,{mode:"range",numberOfMonths:2,selected:H,onSelect:$=>Z($),initialFocus:!0}),d.jsxs("div",{className:"mt-3 flex justify-between border-t pt-3",children:[d.jsx("p",{className:"text-xs text-slate-400",children:"Select a start and end date."}),d.jsx(Le,{type:"button",variant:"ghost",size:"sm",className:"text-xs text-slate-600",onClick:()=>Z(void 0),children:"Clear"})]})]})]})]})]}),d.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[ii&&d.jsx("button",{type:"button",onClick:Ye,className:"text-xs font-medium text-slate-500 underline underline-offset-4",children:"Clear filters"}),d.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-slate-200 bg-white/80 p-1 text-sm font-medium text-slate-600",children:[d.jsx("button",{type:"button",onClick:()=>E("list"),className:`rounded-full px-4 py-1.5 transition ${b==="list"?"bg-slate-900 text-white shadow":"text-slate-500"}`,children:"List view"}),d.jsx("button",{type:"button",onClick:()=>E("map"),className:`rounded-full px-4 py-1.5 transition ${b==="map"?"bg-slate-900 text-white shadow":"text-slate-500"}`,children:"Map view"})]})]})]})]}),b==="map"?zl.length>0?d.jsx(t8,{listings:zl,userLocation:_,isLoading:P||S,onSelect:$=>{const de=os.find(xe=>xe.id===$);de&&fe(de)}}):d.jsx("div",{className:"rounded-[2rem] border border-dashed border-slate-200 bg-white/70 p-8 text-center text-sm text-slate-500",children:P||S?"Locating calming couches near you":"No plotted couches for the current filters. Try switching back to the list view or clearing filters."}):d.jsxs("section",{className:"space-y-6",children:[(S||P)&&d.jsx("p",{className:"text-center text-sm text-slate-500",children:S?"Loading the latest couches":"Pinning couch locations"}),!os.length&&!(S||P)?j==="mine"?d.jsxs("div",{className:"rounded-[2rem] border border-dashed border-slate-200 bg-white/80 p-10 text-center space-y-3",children:[d.jsx("p",{className:"text-base font-semibold text-slate-900",children:"You haven't published a listing yet."}),d.jsx("p",{className:"text-sm text-slate-500",children:"Create your listing shell and then use Edit listing to add your address, couch photos, and description."}),d.jsx(Le,{className:"rounded-full",disabled:Ee,onClick:pr,children:Ee?"Creating...":"Create my listing"})]}):d.jsxs("div",{className:"rounded-[2rem] border border-dashed border-slate-200 bg-white/80 p-10 text-center",children:[d.jsx("p",{className:"text-base font-semibold text-slate-900",children:"No calming stays match that search"}),d.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Try clearing filters or searching a nearby neighborhood."})]}):d.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:os.map($=>{var Zt,un;const de=t1($),xe=$.addressLine&&$.addressLine!==de?$.addressLine:null,ce=oe[$.id]??!1,et=!!xe&&xe.length>jT,Se=ce||!xe?xe:v8(xe),Fe=$.hostId?Lt[$.hostId]??null:null,it=((Zt=Fe==null?void 0:Fe.university)==null?void 0:Zt.trim())||null,mr=((un=Fe==null?void 0:Fe.programName)==null?void 0:un.trim())||null,gr=Fe!=null&&Fe.programType?y8[Fe.programType]??Fe.programType:null,vr=Fe!=null&&Fe.programYear?`Year ${Fe.programYear}`:null,cn=[mr,gr,vr].filter(Boolean).join("  "),xt=n1($),Xn=Oe[$.id]??0,Tt=xt[Xn]??$.image,$e=xt.length>1,Qe=Ze=>{if(!$e)return;const Mn=Ze==="prev"?(Xn-1+xt.length)%xt.length:(Xn+1)%xt.length;Ts($.id,Mn)};return d.jsxs("article",{role:"button",tabIndex:0,onClick:Ze=>fe($,Ze),onKeyDown:Ze=>{(Ze.key==="Enter"||Ze.key===" ")&&(Ze.preventDefault(),fe($,Ze))},className:"group cursor-pointer rounded-[1.75rem] border border-white/60 bg-white/80 shadow-xl shadow-blue-100/60 backdrop-blur transition duration-300 hover:-translate-y-1.5 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-300",children:[d.jsxs("div",{className:"relative h-64 overflow-hidden rounded-[1.5rem]",onTouchStart:Ze=>{var Mn;Qn.current[$.id]=((Mn=Ze.touches[0])==null?void 0:Mn.clientX)??0},onTouchEnd:Ze=>{var oi;const Mn=Qn.current[$.id];if(typeof Mn!="number")return;const pt=(((oi=Ze.changedTouches[0])==null?void 0:oi.clientX)??Mn)-Mn;Math.abs(pt)>40&&(Ze.stopPropagation(),Qe(pt>0?"prev":"next")),delete Qn.current[$.id]},children:[l&&d.jsx("button",{className:`absolute right-4 top-4 z-10 rounded-full bg-white/90 p-2 text-slate-600 shadow transition hover:scale-105 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-400 ${m.has($.id)?"text-rose-500":""}`,"aria-label":m.has($.id)?"Remove from wishlist":"Save to wishlist",onClick:Ze=>De(Ze,$),children:d.jsx(Dh,{className:`h-5 w-5 ${m.has($.id)?"fill-rose-500":""}`})}),d.jsx("img",{src:Tt??$.image,alt:$.title,className:"h-full w-full object-cover"}),$e&&d.jsxs("div",{className:"absolute bottom-4 left-1/2 hidden -translate-x-1/2 rounded-full bg-black/50 px-3 py-1 text-xs font-semibold text-white sm:flex",children:["Photo ",Xn+1," / ",xt.length]}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/70 via-slate-900/10"}),d.jsxs("div",{className:"absolute bottom-4 left-4 right-4 flex items-center justify-between text-white",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-lg font-semibold",children:$.price}),d.jsx("p",{className:"text-xs text-white/80",children:"per night"})]}),d.jsxs("p",{className:"text-xs text-white/80",children:["Hosted by ",$.host]})]})]}),d.jsxs("div",{className:"space-y-3 p-5",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:$.title}),d.jsx("span",{className:"text-sm font-semibold text-slate-700",children:$.price})]}),c&&j==="mine"&&$.hostId===(s==null?void 0:s.id)&&d.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${$.isPublished===!1?"text-amber-600":"text-emerald-600"}`,children:$.isPublished===!1?"Draft  Not published":"Published"}),(it||cn)&&d.jsxs("div",{className:"space-y-0.5 text-xs text-slate-500",children:[it&&d.jsx("p",{className:"font-semibold text-slate-700",children:it}),cn&&d.jsx("p",{children:cn})]}),d.jsxs("p",{className:"flex items-center gap-2 text-sm text-slate-500",children:[d.jsx(p0,{className:"h-4 w-4"}),d.jsxs("span",{className:"flex flex-wrap items-center gap-1",children:[de,xe&&d.jsxs("span",{className:"ml-1 text-xs text-slate-400",children:[" ",Se,et&&d.jsx("button",{type:"button",className:"ml-1 rounded-full px-2 py-0.5 text-[10px] font-semibold text-blue-600 hover:underline",onClick:Ze=>{Ze.stopPropagation(),Ze.preventDefault(),Rn($.id)},children:ce?"Hide":"Full address"})]})]})]}),d.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:d.jsxs("div",{className:"flex items-center gap-2",children:[c&&j==="mine"&&$.hostId===(s==null?void 0:s.id)&&d.jsx(Le,{size:"sm",className:"rounded-full bg-blue-600 text-xs text-white shadow hover:bg-blue-500",onClick:Ze=>{Ze.stopPropagation(),is($)},children:"Edit listing"}),c&&j==="mine"&&$.hostId===(s==null?void 0:s.id)&&d.jsx(Le,{size:"sm",variant:$.isPublished!==!1?"outline":"default",className:"rounded-full text-xs",disabled:!!ur[$.id],onClick:Ze=>{Ze.stopPropagation(),fr($,$.isPublished===!1)},children:ur[$.id]?"Saving...":$.isPublished===!1?"Publish listing":"Unpublish"}),d.jsx(Le,{variant:"ghost",size:"sm",className:"rounded-full bg-slate-800 text-white hover:bg-slate-700",onClick:Ze=>{Ze.stopPropagation(),fe($,Ze)},children:"View stay"})]})})]})]},$.id)})})]})]}),d.jsx(fp,{open:Y,onOpenChange:$=>{$||ln()},children:d.jsxs(Bu,{className:"max-w-2xl",children:[d.jsxs(Wu,{children:[d.jsx(Hu,{children:"Edit listing"}),d.jsx(pp,{children:"Fine-tune your couch details. Updates go live immediately."})]}),te?d.jsxs("form",{onSubmit:Pe,className:"space-y-5",children:[d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"edit-title",children:"Listing title"}),d.jsx(ct,{id:"edit-title",value:pe.title,onChange:$=>Zn("title",$.target.value),disabled:he})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"edit-price",children:"Price per night"}),d.jsx(ct,{id:"edit-price",value:pe.price,onChange:$=>Zn("price",$.target.value),placeholder:"25",disabled:he})]})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{children:"Country"}),d.jsxs(Ai,{value:pe.country||"Switzerland",onValueChange:ss,disabled:he,children:[d.jsx(Gs,{className:"rounded-2xl border-slate-200 bg-white",children:d.jsx(Li,{placeholder:"Select country"})}),d.jsx(Ys,{children:Ul.map($=>d.jsx(qr,{value:$,children:$},$))})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{children:"City"}),d.jsxs(Ai,{value:pe.city||void 0,onValueChange:$=>Zn("city",$),disabled:he||!uo.length,children:[d.jsx(Gs,{className:"rounded-2xl border-slate-200 bg-white",children:d.jsx(Li,{placeholder:uo.length?"Select city":"Choose country first"})}),d.jsx(Ys,{children:uo.map($=>d.jsx(qr,{value:$,children:$},$))})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"edit-address",children:"Street address"}),d.jsx(ct,{id:"edit-address",value:Wt,onChange:$=>{tn($.target.value),nn(null)},placeholder:"Enter your street",disabled:he}),d.jsx("p",{className:"text-xs text-slate-500",children:"Exact details stay private until you approve a booking."}),Wt.trim().length>=3&&(hr||rs.length>0||!ot)?d.jsxs("div",{className:"max-h-36 overflow-y-auto rounded-2xl border border-slate-200 bg-white",children:[hr&&d.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"Searching addresses"}),!hr&&rs.length===0&&!ot&&d.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches yet. Keep typing."}),rs.map(xe=>d.jsx("button",{type:"button",className:`block w-full px-3 py-2 text-left text-sm transition hover:bg-blue-50 ${(ot==null?void 0:ot.displayName)===xe.displayName?"bg-blue-50":""}`,onClick:()=>{nn(xe),tn(xe.displayName),dr([])},children:xe.displayName},`${xe.lat}-${xe.lng}`))]}):null,ot&&d.jsx("p",{className:"text-xs font-medium text-emerald-600",children:"Address confirmed "})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"edit-location",children:"Location description"}),d.jsx(ct,{id:"edit-location",value:pe.location,onChange:$=>Zn("location",$.target.value),placeholder:"Near Downtown Campus",disabled:he})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"edit-description",children:"Description"}),d.jsx(Ml,{id:"edit-description",value:pe.description,onChange:$=>Zn("description",$.target.value),rows:4,disabled:he})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"edit-checkin",children:"Check-in time"}),d.jsx(ct,{id:"edit-checkin",type:"time",value:pe.checkInTime,onChange:$=>Zn("checkInTime",$.target.value),disabled:he})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(Xe,{children:"Photos (up to 7)"}),d.jsxs("span",{className:"text-xs text-slate-500",children:[F.length,"/7 uploaded"]})]}),d.jsxs("div",{className:"flex flex-wrap gap-3",children:[F.length===0&&d.jsx("p",{className:"text-xs text-slate-500",children:"Add at least one photo so renters can see your couch."}),d.jsx("div",{className:"grid grid-cols-3 gap-3",children:F.map(($,de)=>d.jsxs("div",{className:"relative h-20 w-full cursor-move overflow-hidden rounded-xl border",draggable:!0,onDragStart:xe=>{xe.dataTransfer.setData("text/plain",de.toString())},onDragOver:xe=>xe.preventDefault(),onDrop:xe=>{xe.preventDefault();const ce=Number(xe.dataTransfer.getData("text/plain")),et=de;Number.isNaN(ce)||Number.isNaN(et)||ce===et||J(Se=>{const Fe=[...Se],[it]=Fe.splice(ce,1);return Fe.splice(et,0,it),Fe})},children:[d.jsx("img",{src:$,alt:"Listing gallery",className:"h-full w-full object-cover"}),d.jsx("button",{type:"button",className:"absolute right-1 top-1 rounded-full bg-white/90 px-2 text-[10px] font-semibold text-slate-700 shadow",onClick:()=>co($),disabled:he,children:"Remove"})]},$))})]}),d.jsxs("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-slate-50/80 p-4 text-center",onDragOver:$=>$.preventDefault(),onDrop:js,children:[d.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Drag and drop photos here"}),d.jsx("p",{className:"text-xs text-slate-500",children:"or click to browse files (PNG/JPG)"}),d.jsx(ct,{id:"edit-photos",type:"file",accept:"image/*",multiple:!0,className:"mt-2 cursor-pointer",disabled:he||F.length>=7,onChange:$=>Kn($.target.files)})]}),G.length>0&&d.jsxs("p",{className:"text-xs text-slate-500",children:["Ready to upload: ",G.map($=>$.name).join(", ")]}),d.jsx("p",{className:"text-xs text-slate-500",children:"Upload up to 7 photos. Drag tiles to reorder; the first one becomes your cover image."})]}),d.jsxs(lx,{children:[d.jsx(Le,{type:"button",variant:"ghost",onClick:ln,disabled:he,children:"Cancel"}),d.jsx(Le,{type:"submit",disabled:he,children:he?"Saving...":"Save changes"})]})]}):d.jsx("p",{className:"text-sm text-slate-500",children:"Select a listing to edit."})]})})]})};var RT={exports:{}},MT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xl=g;function k8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var P8=typeof Object.is=="function"?Object.is:k8,N8=xl.useState,T8=xl.useEffect,j8=xl.useLayoutEffect,R8=xl.useDebugValue;function M8(e,t){var n=t(),r=N8({inst:{value:n,getSnapshot:t}}),s=r[0].inst,i=r[1];return j8(function(){s.value=n,s.getSnapshot=t,eg(s)&&i({inst:s})},[e,n,t]),T8(function(){return eg(s)&&i({inst:s}),e(function(){eg(s)&&i({inst:s})})},[e]),R8(n),n}function eg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!P8(e,n)}catch{return!0}}function O8(e,t){return t()}var I8=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?O8:M8;MT.useSyncExternalStore=xl.useSyncExternalStore!==void 0?xl.useSyncExternalStore:I8;RT.exports=MT;var A8=RT.exports;function L8(){return A8.useSyncExternalStore(D8,()=>!0,()=>!1)}function D8(){return()=>{}}var cx="Avatar",[F8,BG]=Tn(cx),[$8,OT]=F8(cx),IT=g.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,i]=g.useState("idle");return d.jsx($8,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:d.jsx(ke.span,{...r,ref:t})})});IT.displayName=cx;var AT="AvatarImage",LT=g.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=e,a=OT(AT,n),l=U8(r,i),c=Mt(h=>{s(h),a.onImageLoadingStatusChange(h)});return At(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?d.jsx(ke.img,{...i,ref:t,src:r}):null});LT.displayName=AT;var DT="AvatarFallback",FT=g.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,i=OT(DT,n),[a,l]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&i.imageLoadingStatus!=="loaded"?d.jsx(ke.span,{...s,ref:t}):null});FT.displayName=DT;function i1(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function U8(e,{referrerPolicy:t,crossOrigin:n}){const r=L8(),s=g.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=g.useState(()=>i1(i,e));return At(()=>{l(i1(i,e))},[i,e]),At(()=>{const c=m=>()=>{l(m)};if(!i)return;const h=c("loaded"),f=c("error");return i.addEventListener("load",h),i.addEventListener("error",f),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",h),i.removeEventListener("error",f)}},[i,n,t]),a}var $T=IT,UT=LT,zT=FT;const BT=g.forwardRef(({className:e,...t},n)=>d.jsx($T,{ref:n,className:Te("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));BT.displayName=$T.displayName;const WT=g.forwardRef(({className:e,...t},n)=>d.jsx(UT,{ref:n,className:Te("aspect-square h-full w-full",e),...t}));WT.displayName=UT.displayName;const HT=g.forwardRef(({className:e,...t},n)=>d.jsx(zT,{ref:n,className:Te("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));HT.displayName=zT.displayName;const z8=8,Dl=e=>({id:e.id,couchId:e.couch_id,couchTitle:e.couch_title,hostId:e.host_id,hostName:e.host_name,renterId:e.renter_id,renterName:e.renter_name,stayStart:e.stay_start,stayEnd:e.stay_end,nights:e.nights,pricePerNight:e.price_per_night,status:e.status??"pending",createdAt:e.created_at,paymentStatus:e.payment_status,paymentDueAt:e.payment_due_at,paymentIntentId:e.payment_intent_id,paymentClientSecret:e.payment_client_secret,hasCheckInPhoto:!!e.has_checkin_photo,payoutStatus:e.payout_status,payoutReleasedAt:e.payout_released_at}),pu=e=>e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)?e:null,VT=e=>{if(!e)return[];const t=new Set;return e.forEach(n=>{if(!n)return;const r=n.trim();r&&t.add(r)}),Array.from(t)},ty=e=>e.replace(/[%_]/g,t=>`\\${t}`).replace(/,/g,"\\,"),B8=e=>{if(!e)return[];const t=new Set;return e.forEach(n=>{if(!n)return;const r=n.trim();r&&t.add(r)}),Array.from(t)},W8=24*60*60*1e3,ny=e=>{const t=new Date(e);if(Number.isNaN(t.getTime())){const n=new Date;return new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime()}return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()},o1=(e,t)=>{const n=ny(e);return n>t?n:t+W8},qT=async e=>{const t={couch_id:e.couchId,couch_title:e.couchTitle,host_id:pu(e.hostId),host_name:e.hostEmail??e.hostName,renter_id:pu(e.renterId),renter_name:e.renterName,stay_start:e.stayStart,stay_end:e.stayEnd,nights:e.nights,price_per_night:e.pricePerNight,status:e.status??"pending"};e.createdAt&&(t.created_at=e.createdAt);const{data:n,error:r}=await be.from("booking_requests").insert(t).select("*").single();if(r)throw r;return Dl(n)},mp=async(e,t)=>{const n=pu(e),r=VT(t);if(!n&&!r.length)return[];let s=be.from("booking_requests").select("*").order("created_at",{ascending:!1});const i=[];n&&i.push(`renter_id.eq.${n}`),r.forEach(c=>{i.push(`renter_name.ilike.%${ty(c)}%`)}),i.length===1&&i[0].startsWith("renter_id.eq.")?s=s.eq("renter_id",n):i.length>0&&(s=s.or(i.join(",")));const{data:a,error:l}=await s;if(l)throw l;return(a??[]).map(Dl)},H8=async(e,t,n)=>{const r=pu(e),s=VT(t),i=B8(n);if(!r&&!s.length&&!i.length)return[];let a=be.from("booking_requests").select("*").order("created_at",{ascending:!1});const l=[];r&&l.push(`host_id.eq.${r}`),s.forEach(f=>{l.push(`host_name.ilike.%${ty(f)}%`)}),i.forEach(f=>{l.push(`couch_id.eq.${ty(f)}`)}),l.length===1&&l[0].startsWith("host_id.eq.")?a=a.eq("host_id",r):l.length>0&&(a=a.or(l.join(",")));const{data:c,error:h}=await a;if(h)throw h;return(c??[]).map(Dl)},V8=async(e,t)=>{const{data:n,error:r}=await be.from("booking_requests").select("*").eq("id",e).single();if(r)throw r;if(!n)throw new Error("Booking request not found.");if(t==="approved"&&n.couch_id&&n.stay_start&&n.stay_end){const{data:l,error:c}=await be.from("booking_requests").select("id, stay_start, stay_end").eq("couch_id",n.couch_id).eq("status","approved").neq("id",e);if(c)throw c;const h=ny(n.stay_start),f=o1(n.stay_end,h);if((l??[]).some(v=>{const y=ny(v.stay_start),S=o1(v.stay_end,y);return h<S&&f>y}))throw new Error("Another booking has already been approved for this listing during the selected dates.")}const s={status:t};if(t==="approved"){const l=new Date(Date.now()+z8*60*60*1e3).toISOString();s.payment_status="pending",s.payment_due_at=l}else n.payment_status!=="paid"&&(s.payment_status=null,s.payment_due_at=null);const{data:i,error:a}=await be.from("booking_requests").update(s).eq("id",e).select("*").single();if(a)throw a;return Dl(i)},q8=async(e,t)=>{if(!pu(t))throw new Error("Sign in to cancel your booking request.");const{data:r,error:s}=await be.functions.invoke("cancel-booking",{body:{requestId:e}});if(s)throw s;if(!(r!=null&&r.booking))throw new Error("Unable to cancel booking request.");return Dl(r.booking)},GT=async(e,t)=>{const{data:n,error:r}=await be.from("direct_messages").select("id, sender_id, receiver_id, content, created_at").or(`and(sender_id.eq.${e},receiver_id.eq.${t}),and(sender_id.eq.${t},receiver_id.eq.${e})`).order("created_at",{ascending:!0});if(r)throw r;return n??[]},YT=async(e,t,n)=>{const{data:r,error:s}=await be.from("direct_messages").insert({sender_id:e,receiver_id:t,content:n}).select().single();if(s)throw s;return r??null},G8=async e=>{const{data:t,error:n}=await be.from("direct_messages").select("id, sender_id, receiver_id, content, created_at").or(`sender_id.eq.${e},receiver_id.eq.${e}`).order("created_at",{ascending:!1}).limit(200);if(n)throw n;const r=new Map;return(t??[]).forEach(s=>{const i=s.sender_id===e?s.receiver_id:s.sender_id;r.has(i)||r.set(i,s)}),Array.from(r.entries()).map(([s,i])=>({otherUserId:s,lastMessage:i}))},Y8={bsc:"Bachelor (BSc)",msc:"Master (MSc)",phd:"Doctorate (PhD)",other:"Other program"},Z8=e=>{if(!(e!=null&&e.start)||!(e!=null&&e.end))return null;const t=mn(new Date(e.start)),n=A0(new Date(e.end));return Number.isNaN(t.getTime())||Number.isNaN(n.getTime())?null:{start:t,end:n}},a1=(e,t)=>{if(!(e!=null&&e.from)||!(e!=null&&e.to))return!1;const n=mn(new Date),r=mn(e.from),s=A0(e.to);return Qo(r,n)?!1:t?!Qo(r,t.start)&&!uu(s,t.end):!0},l1=(e,t)=>{const n=mn(e),r=mn(new Date);return Qo(n,r)?!0:t?Qo(n,t.start)||uu(n,t.end):!1},K8=[Xi,Vh,qh,Gh,Yh,Zh],Q8=e=>{if(!(e!=null&&e.start)||!(e!=null&&e.end))return"Flexible availability";const t=new Date(e.start),n=new Date(e.end);if(Number.isNaN(t.getTime())||Number.isNaN(n.getTime()))return"Flexible availability";const r=t.getMonth()===n.getMonth(),s=rt(t,"MMM d"),i=r?rt(n,"d"):rt(n,"MMM d");return`${s}-${i}`},X8=e=>{if(!e)return"$0";const t=e.trim();return t?t.startsWith("$")?t:`$${t}`:"$0"},tg=e=>e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)?e:null,J8=()=>{var js,is;const e=ts(),t=sa(),n=G5(),r=(js=t.state)==null?void 0:js.couch,{toast:s}=ks(),{profile:i,session:a}=Rr(),l=J0(i,a),[c,h]=g.useState(),[f,m]=g.useState(!1),[v,y]=g.useState(r??null),[S,w]=g.useState(!r),[b,E]=g.useState(null),[_,C]=g.useState(null),[P,T]=g.useState(null),[R,O]=g.useState([]),[A,B]=g.useState(!1),[q,Q]=g.useState(null),[W,z]=g.useState(""),[M,ee]=g.useState(!1),[H,Z]=g.useState(!1),[j,U]=g.useState(!1),[Y,se]=g.useState(!1),[te,ue]=g.useState(!1),[F,J]=g.useState(0),G=v,ne=G?Z8(G.availability):null,he=(c==null?void 0:c.from)&&(c==null?void 0:c.to),Me=he?a1(c,ne):!1,Ee=he?Math.max(1,kr(mn(c.to),mn(c.from))):0,je=g.useCallback(async()=>{if(_!=null&&_.hostId)return _;if(!G)throw new Error("Listing details are not available yet.");const Pe=G.host??"Host",Ye=G.hostEmail??null,qe=tg(G.hostId??null);if(qe)return{hostId:qe,hostName:Pe,hostEmail:Ye};const we=await Xm({listingId:G.id,hostEmail:Ye,hostName:Pe});if(we!=null&&we.hostId){const me=tg(we.hostId);if(me)return{hostId:me,hostName:we.hostName??Pe,hostEmail:we.hostEmail??Ye}}throw new Error("Unable to determine host details for this listing.")},[G,_]);if(g.useEffect(()=>{if(r){y(r),w(!1);return}const Pe=n.id;if(!Pe){E("Missing listing identifier."),w(!1);return}let Ye=!0;return(async()=>{try{w(!0);const{data:we,error:me}=await be.from("listings").select("id, user_id, host_name, host_email, address, property_type, price_per_night, check_in_time, availability_start, availability_end, photos, documents, created_at").eq("id",Pe).maybeSingle();if(me)throw me;if(!we)throw new Error("Listing not found.");const fe=we.availability_start&&we.availability_end?{start:we.availability_start,end:we.availability_end}:null,De=Array.isArray(we.photos)?we.photos:[],ft=De[0]??K8[0],Et=we.property_type?`${we.property_type==="house"?"House":"Flat"} couch`:"Community couch",Yt={id:we.id,image:ft,price:X8(we.price_per_night?String(we.price_per_night):"$0"),title:Et,host:we.host_name??"Community host",hostEmail:we.host_email??null,location:we.address??"Address shared after booking",country:null,city:null,addressLine:we.address??null,availableDates:fe?Q8(fe):we.check_in_time?`Check-in after ${we.check_in_time}`:"Flexible availability",description:we.created_at?`Listing published on ${new Date(we.created_at).toLocaleDateString()}`:"Listing added by our host community.",hostId:we.user_id??null,availability:fe,coordinates:null,gallery:De.length?De:ft?[ft]:[]};Ye&&(y(Yt),E(null))}catch(we){if(!Ye)return;const me=we instanceof Error?we.message:"Unable to load listing.";E(me),y(null)}finally{Ye&&w(!1)}})(),()=>{Ye=!1}},[r,n.id]),g.useEffect(()=>{b&&s({title:"Listing unavailable",description:b,variant:"destructive"})},[b,s]),g.useEffect(()=>{if(typeof window>"u")return;let Pe=!0;const Ye=async()=>{if(!l||!(G!=null&&G.id)){Pe&&Z(!1);return}U(!0);try{const we=await sf(l);if(!Pe)return;const me=rf(G.id),fe=we.some(De=>De.couchId===G.id||De.storageId===me);Z(fe)}catch(we){Pe&&(console.warn("Unable to sync wishlist state",we),Z(!1))}finally{Pe&&U(!1)}};Ye();const qe=()=>Ye();return window.addEventListener("wishlist-updated",qe),()=>{Pe=!1,window.removeEventListener("wishlist-updated",qe)}},[G==null?void 0:G.id,l]),g.useEffect(()=>{if(!G)return;let Pe=!0;return(async()=>{var qe;try{const we=await je();if(!Pe)return;C(we);try{const fe=await g8(we.hostId);if(!Pe)return;T({name:(qe=fe==null?void 0:fe.full_name)!=null&&qe.trim()?fe.full_name:(fe==null?void 0:fe.email)??we.hostName,role:(fe==null?void 0:fe.user_role)??null,university:(fe==null?void 0:fe.university)??null,programName:(fe==null?void 0:fe.program_name)??null,programType:(fe==null?void 0:fe.program_type)??null,programYear:(fe==null?void 0:fe.program_year)??null,avatarUrl:(fe==null?void 0:fe.avatar_url)??null})}catch(fe){console.warn("Failed to fetch host profile",fe),Pe&&T({name:we.hostName,role:null,university:null,programName:null,programType:null,programYear:null,avatarUrl:null})}if(!(i!=null&&i.id))return;B(!0);const me=await GT(i.id,we.hostId);if(!Pe)return;O(me),Q(null)}catch(we){if(!Pe)return;const me=we instanceof Error?we.message:"Unable to load conversation.";Q(me)}finally{Pe&&B(!1)}})(),()=>{Pe=!1}},[G,i==null?void 0:i.id,je]),g.useEffect(()=>{if(!(i!=null&&i.id)||!(_!=null&&_.hostId))return;const Pe=be.channel(`direct-messages-${i.id}-${_.hostId}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"direct_messages"},Ye=>{const qe=Ye.new;(qe.sender_id===i.id&&qe.receiver_id===_.hostId||qe.sender_id===_.hostId&&qe.receiver_id===i.id)&&O(we=>we.some(me=>me.id===qe.id)?we:[...we,qe])}).subscribe();return()=>{be.removeChannel(Pe)}},[i==null?void 0:i.id,_==null?void 0:_.hostId]),S)return d.jsx("main",{className:"min-h-screen flex items-center justify-center bg-background",children:d.jsx("p",{className:"text-muted-foreground",children:"Loading listing"})});if(!G)return d.jsx("main",{className:"min-h-screen flex items-center justify-center bg-background",children:d.jsxs("div",{className:"text-center space-y-3",children:[d.jsx("h1",{className:"text-2xl font-semibold",children:"Listing not available"}),d.jsx("p",{className:"text-muted-foreground text-sm",children:b??"We couldn't find that couch."}),d.jsx(Le,{variant:"outline",onClick:()=>e("/listings",{replace:!0}),children:"Back to listings"})]})});const pe=80,V=G.location.length>pe,oe=V&&!te?`${G.location.slice(0,pe).trimEnd()}`:G.location,ye=Pe=>{if(!V)return null;const Ye=Pe==="light"?"text-xs font-semibold text-white underline underline-offset-4":"text-xs font-semibold text-sketch-blue underline underline-offset-4";return d.jsx("button",{type:"button",className:`ml-2 ${Ye}`,onClick:()=>ue(qe=>!qe),children:te?"Hide full address":"Show full address"})},Oe=async()=>{var me,fe;if(!(c!=null&&c.from)||!(c!=null&&c.to)){s({title:"Select stay dates",description:"Pick your check-in and check-out dates before requesting a booking.",variant:"destructive"});return}if(!a1(c,ne)){s({title:"Dates unavailable",description:"Please choose dates within the host's availability window.",variant:"destructive"});return}if(!(i!=null&&i.id)){s({title:"Sign in required",description:"Sign in to request a booking.",variant:"destructive"});return}const Pe=mn(new Date),Ye=mn(c.from);if(Qo(Ye,Pe)){s({title:"Choose future dates",description:"Bookings can only be requested for future stays.",variant:"destructive"});return}m(!0);const qe=mn(c.from).toISOString(),we=A0(c.to).toISOString();try{const De=_??await Xm({listingId:G.id,hostEmail:G.hostEmail??null,hostName:G.host});if(!De||!De.hostId)throw new Error("We couldn't find a host for this listing. Try refreshing the listings page.");const ft=_??{hostId:De.hostId,hostName:De.hostName??G.host??"Host",hostEmail:De.hostEmail??G.hostEmail??null},Et=(me=i.id)==null?void 0:me.trim(),Yt=(fe=ft.hostId)==null?void 0:fe.trim();if(Et&&Yt&&Et===Yt){s({title:"This is your couch",description:"Hosts can't request bookings for their own listings.",variant:"destructive"});return}_||C(ft),await qT({couchId:G.id,couchTitle:G.title,hostId:ft.hostId,hostName:ft.hostName,hostEmail:ft.hostEmail??void 0,renterId:tg(i.id),renterName:i.full_name??i.email??"Guest renter",stayStart:qe,stayEnd:we,nights:Ee,pricePerNight:G.price,status:"pending",createdAt:new Date().toISOString()}),s({title:"Booking request sent",description:"We'll share your booking request with the host."}),h(void 0)}catch(De){console.error("Failed to create booking request",De),s({title:"Request failed",description:De instanceof Error?De.message:"We couldn't share your request. Please try again.",variant:"destructive"})}finally{m(!1)}},dt=async Pe=>{if(Pe.preventDefault(),!(i!=null&&i.id)){Q("Sign in to message the host.");return}let Ye=_;if(!Ye){const we=await Xm({listingId:G.id,hostEmail:G.hostEmail??null,hostName:G.host});if(!we||!we.hostId){Q("Unable to load host details.");return}Ye={hostId:we.hostId,hostName:we.hostName??G.host??"Host",hostEmail:we.hostEmail??G.hostEmail??null},C(Ye)}if(!Ye)return;if(i.id===Ye.hostId){Q("You cannot message yourself as the host.");return}const qe=W.trim();if(!qe){Q("Please enter a message.");return}ee(!0),Q(null);try{const we=await YT(i.id,Ye.hostId,qe);we&&O(me=>[...me,we]),z("")}catch(we){const me=we instanceof Error?we.message:"Failed to send message.";Q(me)}finally{ee(!1)}},Lt=he?`${rt(c.from,"MMM d, yyyy")}  ${rt(c.to,"MMM d, yyyy")}`:"Select stay dates",yn=c!=null&&c.from?rt(c.from,"EEE, MMM d"):"Pick a start date",ur=c!=null&&c.to?rt(c.to,"EEE, MMM d"):c!=null&&c.from?"Select an end date":"Pick an end date",en=Me?`${Ee}`:"",Wt=(is=P==null?void 0:P.name)!=null&&is.trim()?P.name:G.host,tn=Wt?Wt.charAt(0).toUpperCase():"H",rs=(P==null?void 0:P.role)??"Community host",dr=(P==null?void 0:P.avatarUrl)??null,ot=(P==null?void 0:P.university)??null,nn=(P==null?void 0:P.programName)??null,hr=P!=null&&P.programType?Y8[P.programType]??P.programType:null,Or=P!=null&&P.programYear?`Year ${P.programYear}`:null;G.availability;const Ot=g.useMemo(()=>{var Ye;if(!G)return[];if(Array.isArray(G.gallery)&&G.gallery.length)return G.gallery;const Pe=(Ye=G.availability)==null?void 0:Ye.photos;return Array.isArray(Pe)&&Pe.length?Pe:G.image?[G.image]:[]},[G]),ii=Ot.length>1,Zn=Ot[F]??(G==null?void 0:G.image)??Xi;g.useEffect(()=>{J(0)},[G==null?void 0:G.id,Ot.length]);const ss=g.useCallback(()=>{J(Pe=>Ot.length?(Pe-1+Ot.length)%Ot.length:0)},[Ot.length]),Rn=g.useCallback(()=>{J(Pe=>Ot.length?(Pe+1)%Ot.length:0)},[Ot.length]),Ts=!!(_!=null&&_.hostId&&(i!=null&&i.id)&&i.id!==_.hostId),ln=!!(_!=null&&_.hostId&&(i!=null&&i.id)&&i.id===_.hostId),Kn=()=>h(void 0),co=async()=>{if(G){if(!l){s({title:"Sign in to save couches",description:"Create an account or sign in to keep a wishlist.",variant:"destructive"});return}se(!0);try{H?(await ex(l,G.id),Z(!1),s({title:"Removed from wishlist",description:`${G.title} is no longer saved.`})):(await pN(l,G.id,lT(G)),Z(!0),s({title:"Saved to wishlist",description:`${G.title} was added for later.`}))}catch(Pe){console.error("Wishlist update failed",Pe),s({title:"Unable to update wishlist",description:"Please try again shortly.",variant:"destructive"})}finally{se(!1)}}};return d.jsxs("main",{className:"dreamy-bg min-h-screen",children:[d.jsx("header",{className:"border-b border-sketch/70 bg-white/90 backdrop-blur-sm",children:d.jsxs("div",{className:"mx-auto flex max-w-6xl items-center gap-3 px-4 py-3",children:[d.jsxs(Le,{variant:"ghost",size:"icon",onClick:()=>e("/listings"),className:"rounded-full border border-transparent hover:border-sketch/70",children:[d.jsx(LA,{className:"h-5 w-5 text-sketch-blue"}),d.jsx("span",{className:"sr-only",children:"Back to listings"})]}),d.jsx("p",{className:"hidden text-sm text-muted-foreground sm:block",children:"Browse more community couches"})]})}),d.jsxs("div",{className:"mx-auto max-w-6xl space-y-10 px-4 py-8",children:[d.jsx("section",{className:"overflow-hidden rounded-[32px] border-2 border-sketch bg-white shadow-[0_25px_80px_rgba(30,64,175,0.12)]",children:d.jsxs("div",{className:"relative h-[260px] sm:h-[360px]",children:[d.jsx("img",{src:Zn,alt:G.title,className:"h-full w-full object-cover"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/75 via-black/10 to-transparent"}),ii&&d.jsxs(d.Fragment,{children:[d.jsxs("button",{type:"button",onClick:ss,className:"absolute left-4 top-1/2 hidden -translate-y-1/2 rounded-full border border-white/50 bg-white/70 p-2 text-slate-700 shadow-md transition hover:bg-white sm:flex",children:[d.jsx("span",{className:"sr-only",children:"Previous photo"}),d.jsx(FC,{className:"h-4 w-4"})]}),d.jsxs("button",{type:"button",onClick:Rn,className:"absolute right-4 top-1/2 hidden -translate-y-1/2 rounded-full border border-white/50 bg-white/70 p-2 text-slate-700 shadow-md transition hover:bg-white sm:flex",children:[d.jsx("span",{className:"sr-only",children:"Next photo"}),d.jsx(f0,{className:"h-4 w-4"})]}),d.jsxs("div",{className:"absolute bottom-4 left-1/2 flex -translate-x-1/2 gap-2 rounded-full bg-black/40 px-3 py-1 text-xs font-medium text-white",children:[d.jsxs("span",{children:["Photo ",F+1]}),d.jsxs("span",{className:"opacity-70",children:["/ ",Ot.length]})]})]}),d.jsx("div",{className:"absolute right-5 top-5 flex gap-2",children:d.jsxs("button",{type:"button",onClick:co,disabled:Y||j,className:`rounded-full border border-white/50 bg-black/30 p-3 text-white backdrop-blur transition hover:bg-black/50 ${H?"text-rose-400":""}`,children:[d.jsx(Dh,{className:`h-5 w-5 ${H?"fill-rose-400":""}`}),d.jsx("span",{className:"sr-only",children:H?"Remove from wishlist":"Save to wishlist"})]})}),d.jsxs("div",{className:"absolute inset-x-0 bottom-0 space-y-6 px-6 pb-6 pt-10 text-white sm:px-10",children:[d.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/70",children:"Community stay"}),d.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:G.title})]}),d.jsxs("div",{className:"text-4xl font-bold",children:[G.price,d.jsx("span",{className:"ml-1 text-sm font-normal text-white/80",children:"/night"})]})]}),d.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-white/40 bg-white/10 px-4 py-1.5 font-medium backdrop-blur",children:[d.jsx(p0,{className:"h-4 w-4"}),d.jsxs("span",{className:"flex items-center gap-2",children:[oe,ye("light")]})]}),Wt&&d.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-white/40 bg-white/10 px-4 py-1.5 font-medium backdrop-blur",children:[d.jsx(BA,{className:"h-4 w-4"}),"Hosted by ",Wt]})]})]})]})}),d.jsxs("div",{className:"grid gap-8 lg:grid-cols-[1.7fr,1fr]",children:[d.jsxs("section",{className:"space-y-6",children:[d.jsxs("div",{className:"space-y-6 rounded-[28px] border-2 border-sketch bg-white/95 p-6 shadow-sm",children:[d.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs(BT,{className:"h-14 w-14 border border-sketch/30",children:[d.jsx(WT,{src:dr??void 0,alt:`${Wt} profile photo`,className:"h-full w-full object-cover"}),d.jsx(HT,{className:"bg-sketch-blue/10 text-xl font-semibold text-sketch-blue",children:tn})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Host"}),d.jsx("p",{className:"text-xl font-semibold text-sketch-dark",children:Wt}),rs&&d.jsx("p",{className:"text-sm text-muted-foreground",children:rs})]})]})}),d.jsxs("div",{className:"space-y-1 text-sm",children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Location"}),d.jsxs("p",{className:"text-base font-semibold text-sketch-dark",children:[oe,ye("dark")]}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Exact address shared after booking"})]}),d.jsxs("div",{className:"rounded-2xl border border-dashed border-sketch/60 p-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Price"}),d.jsx("p",{className:"text-lg font-semibold text-sketch-dark",children:G.price}),d.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Per night"})]}),(ot||nn||hr)&&d.jsxs("div",{className:"rounded-2xl border border-dashed border-sketch/60 p-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Student profile"}),d.jsx("p",{className:"text-lg font-semibold text-sketch-dark",children:ot??"University not shared yet"}),d.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:[nn??"Program details coming soon",hr&&`  ${hr}`,Or&&`  ${Or}`]})]})]}),d.jsxs("div",{className:"rounded-[28px] border-2 border-sketch bg-white p-6 space-y-3",children:[d.jsx("h3",{className:"text-lg font-semibold text-sketch-dark",children:"About this couch"}),d.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:G.description})]})]}),d.jsxs("section",{className:"space-y-6",children:[d.jsxs("div",{className:"space-y-5 rounded-[28px] border-2 border-sketch bg-white p-6 shadow-lg shadow-sketch-blue/5",children:[d.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Request a stay"}),d.jsx("h3",{className:"text-2xl font-semibold text-sketch-dark",children:"Plan your visit"})]}),d.jsx("p",{className:"text-sm text-muted-foreground",children:Me&&he?`${Ee} night${Ee===1?"":"s"}`:"Flexible"})]}),d.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[d.jsx("p",{children:"Select a start and end date for your stay."}),he&&d.jsx("button",{type:"button",onClick:Kn,className:"text-xs font-medium uppercase tracking-wide text-sketch-blue hover:underline",children:"Clear"})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("div",{className:"sm:hidden",children:d.jsxs(LP,{children:[d.jsx(DP,{asChild:!0,children:d.jsx(Le,{variant:"outline",className:"w-full justify-between text-left font-normal",children:d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsx(d0,{className:"h-4 w-4"}),Lt]})})}),d.jsx(G0,{align:"start",className:"p-0",children:d.jsx(Xh,{initialFocus:!0,mode:"range",numberOfMonths:1,selected:c,onSelect:h,disabled:Pe=>l1(Pe,ne)})})]})}),d.jsx("div",{className:"hidden rounded-2xl border border-dashed border-sketch/60 bg-muted/40 p-3 sm:block",children:d.jsx(Xh,{initialFocus:!0,mode:"range",numberOfMonths:2,selected:c,onSelect:h,disabled:Pe=>l1(Pe,ne)})})]}),d.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[d.jsxs("div",{className:"rounded-2xl border border-dashed border-sketch/60 p-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Check-in"}),d.jsx("p",{className:"text-base font-semibold text-sketch-dark",children:yn})]}),d.jsxs("div",{className:"rounded-2xl border border-dashed border-sketch/60 p-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Check-out"}),d.jsx("p",{className:"text-base font-semibold text-sketch-dark",children:ur})]}),d.jsxs("div",{className:"rounded-2xl border border-dashed border-sketch/60 p-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Nights"}),d.jsx("p",{className:"text-3xl font-semibold text-sketch-dark",children:en})]})]}),he&&Me&&d.jsxs("div",{className:"rounded-2xl bg-muted/40 px-4 py-2 text-sm text-muted-foreground",children:["You're requesting ",Ee," night",Ee===1?"":"s"," from ",rt(c.from,"MMM d")," to ",rt(c.to,"MMM d"),"."]}),he&&!Me&&d.jsx("div",{className:"rounded-2xl border border-destructive/40 bg-destructive/10 px-4 py-2 text-sm text-destructive",children:"The selected dates are outside the host's availability."}),d.jsx(Le,{className:"w-full rounded-full text-base font-semibold",size:"lg",onClick:Oe,disabled:!Me||f,children:f?"Sending request...":"Request booking"})]}),d.jsxs("section",{className:"space-y-4 rounded-[28px] border-2 border-sketch bg-white p-6",children:[d.jsxs("header",{className:"space-y-1",children:[d.jsxs("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:["Chat with ",Wt]}),d.jsx("h3",{className:"text-xl font-semibold text-sketch-dark",children:"Coordinate details"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Start a direct conversation with the host to make sure the stay fits what you need."})]}),!(_!=null&&_.hostId)&&d.jsx("p",{className:"text-sm text-muted-foreground",children:"Messaging is unavailable for this listing."}),ln&&d.jsx("p",{className:"text-sm text-muted-foreground",children:"You are viewing your own listing. Guests will be able to message you here."}),Ts&&d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"h-64 space-y-3 overflow-y-auto rounded-2xl border border-dashed border-sketch/60 bg-muted/40 p-3",children:[A&&d.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading conversation"}),!A&&R.length===0&&d.jsx("p",{className:"text-sm text-muted-foreground",children:"No messages yet. Say hello!"}),R.map(Pe=>d.jsxs("div",{className:`max-w-[80%] rounded-2xl px-3 py-2 text-sm shadow-sm ${Pe.sender_id===i.id?"ml-auto bg-primary text-primary-foreground":"mr-auto bg-card"}`,children:[d.jsx("p",{className:"whitespace-pre-line break-words",children:Pe.content}),d.jsx("p",{className:"mt-1 text-[11px] opacity-70",children:rt(new Date(Pe.created_at),"MMM d, yyyy  h:mm a")})]},Pe.id))]}),d.jsxs("form",{onSubmit:dt,className:"space-y-2",children:[d.jsx(Ml,{value:W,onChange:Pe=>{z(Pe.target.value),q&&Q(null)},placeholder:"Write a message to the host",rows:3}),q&&d.jsx("p",{className:"text-sm text-destructive",children:q}),d.jsx(Le,{type:"submit",disabled:M||!W.trim(),children:M?"Sending":"Send message"})]})]}),!(i!=null&&i.id)&&(_==null?void 0:_.hostId)&&!ln&&d.jsx("p",{className:"text-sm text-destructive",children:"Sign in to start a conversation with this host."})]})]})]})]})]})},ux=g.forwardRef(({className:e,...t},n)=>d.jsx("div",{ref:n,className:Te("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ux.displayName="Card";const ZT=g.forwardRef(({className:e,...t},n)=>d.jsx("div",{ref:n,className:Te("flex flex-col space-y-1.5 p-6",e),...t}));ZT.displayName="CardHeader";const dx=g.forwardRef(({className:e,...t},n)=>d.jsx("h3",{ref:n,className:Te("text-2xl font-semibold leading-none tracking-tight",e),...t}));dx.displayName="CardTitle";const hx=g.forwardRef(({className:e,...t},n)=>d.jsx("p",{ref:n,className:Te("text-sm text-muted-foreground",e),...t}));hx.displayName="CardDescription";const KT=g.forwardRef(({className:e,...t},n)=>d.jsx("div",{ref:n,className:Te("p-6 pt-0",e),...t}));KT.displayName="CardContent";const eH=g.forwardRef(({className:e,...t},n)=>d.jsx("div",{ref:n,className:Te("flex items-center p-6 pt-0",e),...t}));eH.displayName="CardFooter";var ng="rovingFocusGroup.onEntryFocus",tH={bubbles:!1,cancelable:!0},Vu="RovingFocusGroup",[ry,QT,nH]=Df(Vu),[rH,gp]=Tn(Vu,[nH]),[sH,iH]=rH(Vu),XT=g.forwardRef((e,t)=>d.jsx(ry.Provider,{scope:e.__scopeRovingFocusGroup,children:d.jsx(ry.Slot,{scope:e.__scopeRovingFocusGroup,children:d.jsx(oH,{...e,ref:t})})}));XT.displayName=Vu;var oH=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...m}=e,v=g.useRef(null),y=ze(t,v),S=zu(i),[w,b]=ti({prop:a,defaultProp:l??null,onChange:c,caller:Vu}),[E,_]=g.useState(!1),C=Mt(h),P=QT(n),T=g.useRef(!1),[R,O]=g.useState(0);return g.useEffect(()=>{const A=v.current;if(A)return A.addEventListener(ng,C),()=>A.removeEventListener(ng,C)},[C]),d.jsx(sH,{scope:n,orientation:r,dir:S,loop:s,currentTabStopId:w,onItemFocus:g.useCallback(A=>b(A),[b]),onItemShiftTab:g.useCallback(()=>_(!0),[]),onFocusableItemAdd:g.useCallback(()=>O(A=>A+1),[]),onFocusableItemRemove:g.useCallback(()=>O(A=>A-1),[]),children:d.jsx(ke.div,{tabIndex:E||R===0?-1:0,"data-orientation":r,...m,ref:y,style:{outline:"none",...e.style},onMouseDown:le(e.onMouseDown,()=>{T.current=!0}),onFocus:le(e.onFocus,A=>{const B=!T.current;if(A.target===A.currentTarget&&B&&!E){const q=new CustomEvent(ng,tH);if(A.currentTarget.dispatchEvent(q),!q.defaultPrevented){const Q=P().filter(H=>H.focusable),W=Q.find(H=>H.active),z=Q.find(H=>H.id===w),ee=[W,z,...Q].filter(Boolean).map(H=>H.ref.current);tj(ee,f)}}T.current=!1}),onBlur:le(e.onBlur,()=>_(!1))})})}),JT="RovingFocusGroupItem",ej=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...l}=e,c=bs(),h=i||c,f=iH(JT,n),m=f.currentTabStopId===h,v=QT(n),{onFocusableItemAdd:y,onFocusableItemRemove:S,currentTabStopId:w}=f;return g.useEffect(()=>{if(r)return y(),()=>S()},[r,y,S]),d.jsx(ry.ItemSlot,{scope:n,id:h,focusable:r,active:s,children:d.jsx(ke.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:le(e.onMouseDown,b=>{r?f.onItemFocus(h):b.preventDefault()}),onFocus:le(e.onFocus,()=>f.onItemFocus(h)),onKeyDown:le(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){f.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const E=cH(b,f.orientation,f.dir);if(E!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let C=v().filter(P=>P.focusable).map(P=>P.ref.current);if(E==="last")C.reverse();else if(E==="prev"||E==="next"){E==="prev"&&C.reverse();const P=C.indexOf(b.currentTarget);C=f.loop?uH(C,P+1):C.slice(P+1)}setTimeout(()=>tj(C))}}),children:typeof a=="function"?a({isCurrentTabStop:m,hasTabStop:w!=null}):a})})});ej.displayName=JT;var aH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function lH(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function cH(e,t,n){const r=lH(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return aH[r]}function tj(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function uH(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var nj=XT,rj=ej,fx="Radio",[dH,sj]=Tn(fx),[hH,fH]=dH(fx),ij=g.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:i,disabled:a,value:l="on",onCheck:c,form:h,...f}=e,[m,v]=g.useState(null),y=ze(t,b=>v(b)),S=g.useRef(!1),w=m?h||!!m.closest("form"):!0;return d.jsxs(hH,{scope:n,checked:s,disabled:a,children:[d.jsx(ke.button,{type:"button",role:"radio","aria-checked":s,"data-state":cj(s),"data-disabled":a?"":void 0,disabled:a,value:l,...f,ref:y,onClick:le(e.onClick,b=>{s||c==null||c(),w&&(S.current=b.isPropagationStopped(),S.current||b.stopPropagation())})}),w&&d.jsx(lj,{control:m,bubbles:!S.current,name:r,value:l,checked:s,required:i,disabled:a,form:h,style:{transform:"translateX(-100%)"}})]})});ij.displayName=fx;var oj="RadioIndicator",aj=g.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,i=fH(oj,n);return d.jsx(Jt,{present:r||i.checked,children:d.jsx(ke.span,{"data-state":cj(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})})});aj.displayName=oj;var pH="RadioBubbleInput",lj=g.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},i)=>{const a=g.useRef(null),l=ze(a,i),c=tx(n),h=S0(t);return g.useEffect(()=>{const f=a.current;if(!f)return;const m=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&y){const S=new Event("click",{bubbles:r});y.call(f,n),f.dispatchEvent(S)}},[c,n,r]),d.jsx(ke.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});lj.displayName=pH;function cj(e){return e?"checked":"unchecked"}var mH=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],vp="RadioGroup",[gH,WG]=Tn(vp,[gp,sj]),uj=gp(),dj=sj(),[vH,yH]=gH(vp),hj=g.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:i,required:a=!1,disabled:l=!1,orientation:c,dir:h,loop:f=!0,onValueChange:m,...v}=e,y=uj(n),S=zu(h),[w,b]=ti({prop:i,defaultProp:s??null,onChange:m,caller:vp});return d.jsx(vH,{scope:n,name:r,required:a,disabled:l,value:w,onValueChange:b,children:d.jsx(nj,{asChild:!0,...y,orientation:c,dir:S,loop:f,children:d.jsx(ke.div,{role:"radiogroup","aria-required":a,"aria-orientation":c,"data-disabled":l?"":void 0,dir:S,...v,ref:t})})})});hj.displayName=vp;var fj="RadioGroupItem",pj=g.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,i=yH(fj,n),a=i.disabled||r,l=uj(n),c=dj(n),h=g.useRef(null),f=ze(t,h),m=i.value===s.value,v=g.useRef(!1);return g.useEffect(()=>{const y=w=>{mH.includes(w.key)&&(v.current=!0)},S=()=>v.current=!1;return document.addEventListener("keydown",y),document.addEventListener("keyup",S),()=>{document.removeEventListener("keydown",y),document.removeEventListener("keyup",S)}},[]),d.jsx(rj,{asChild:!0,...l,focusable:!a,active:m,children:d.jsx(ij,{disabled:a,required:i.required,checked:m,...c,...s,name:i.name,ref:f,onCheck:()=>i.onValueChange(s.value),onKeyDown:le(y=>{y.key==="Enter"&&y.preventDefault()}),onFocus:le(s.onFocus,()=>{var y;v.current&&((y=h.current)==null||y.click())})})})});pj.displayName=fj;var xH="RadioGroupIndicator",mj=g.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=dj(n);return d.jsx(aj,{...s,...r,ref:t})});mj.displayName=xH;var gj=hj,vj=pj,wH=mj;const px=g.forwardRef(({className:e,...t},n)=>d.jsx(gj,{className:Te("grid gap-2",e),...t,ref:n}));px.displayName=gj.displayName;const uf=g.forwardRef(({className:e,...t},n)=>d.jsx(vj,{ref:n,className:Te("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:d.jsx(wH,{className:"flex items-center justify-center",children:d.jsx($C,{className:"h-2.5 w-2.5 fill-current text-current"})})}));uf.displayName=vj.displayName;const yj=g.createContext(void 0),mx=()=>{const e=g.useContext(yj);if(!e)throw new Error("useSession must be used within a SessionProvider");return e},xj=e=>({id:e.id,email:e.email,full_name:e.full_name,user_role:e.user_role??"renter",avatar_url:e.avatar_url,bio:e.bio,student_id_url:e.student_id_url,university:e.university,program_name:e.program_name,program_year:e.program_year,program_type:e.program_type,payout_account_holder:e.payout_account_holder,payout_account_number:e.payout_account_number,payout_bank_name:e.payout_bank_name,payout_bank_country:e.payout_bank_country,created_at:e.created_at,updated_at:e.updated_at}),wj=async e=>{const{data:t,error:n}=await be.from("user_profiles").select("*").eq("id",e).maybeSingle();if(n)throw n;return t?xj(t):null},gx=async e=>{const t={id:e.id,email:e.email,full_name:e.full_name??null,user_role:e.user_role??"renter",avatar_url:e.avatar_url??null,bio:e.bio??null,student_id_url:e.student_id_url??null,university:e.university??null,program_name:e.program_name??null,program_year:e.program_year??null,program_type:e.program_type??null,payout_account_holder:e.payout_account_holder??null,payout_account_number:e.payout_account_number??null,payout_bank_name:e.payout_bank_name??null,payout_bank_country:e.payout_bank_country??null,updated_at:new Date().toISOString()},{data:n,error:r}=await be.from("user_profiles").upsert(t,{onConflict:"id"}).select("*").single();if(r)throw r;return xj(n)};function Uc(e){let t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function sy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function _H(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function c1(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function u1(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function bH(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function SH(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function rg(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function EH(e,t){let n=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(n*n+r*r+s*s)}function CH(e,t){let n=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return n*n+r*r+s*s}function d1(e){let t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function kH(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function PH(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function iy(e,t){let n=t[0],r=t[1],s=t[2],i=n*n+r*r+s*s;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function _j(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function h1(e,t,n){let r=t[0],s=t[1],i=t[2],a=n[0],l=n[1],c=n[2];return e[0]=s*c-i*l,e[1]=i*a-r*c,e[2]=r*l-s*a,e}function NH(e,t,n,r){let s=t[0],i=t[1],a=t[2];return e[0]=s+r*(n[0]-s),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e}function TH(e,t,n,r,s){const i=Math.exp(-r*s);let a=t[0],l=t[1],c=t[2];return e[0]=n[0]+(a-n[0])*i,e[1]=n[1]+(l-n[1])*i,e[2]=n[2]+(c-n[2])*i,e}function jH(e,t,n){let r=t[0],s=t[1],i=t[2],a=n[3]*r+n[7]*s+n[11]*i+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*s+n[8]*i+n[12])/a,e[1]=(n[1]*r+n[5]*s+n[9]*i+n[13])/a,e[2]=(n[2]*r+n[6]*s+n[10]*i+n[14])/a,e}function RH(e,t,n){let r=t[0],s=t[1],i=t[2],a=n[3]*r+n[7]*s+n[11]*i+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*s+n[8]*i)/a,e[1]=(n[1]*r+n[5]*s+n[9]*i)/a,e[2]=(n[2]*r+n[6]*s+n[10]*i)/a,e}function MH(e,t,n){let r=t[0],s=t[1],i=t[2];return e[0]=r*n[0]+s*n[3]+i*n[6],e[1]=r*n[1]+s*n[4]+i*n[7],e[2]=r*n[2]+s*n[5]+i*n[8],e}function OH(e,t,n){let r=t[0],s=t[1],i=t[2],a=n[0],l=n[1],c=n[2],h=n[3],f=l*i-c*s,m=c*r-a*i,v=a*s-l*r,y=l*v-c*m,S=c*f-a*v,w=a*m-l*f,b=h*2;return f*=b,m*=b,v*=b,y*=2,S*=2,w*=2,e[0]=r+f+y,e[1]=s+m+S,e[2]=i+v+w,e}const IH=function(){const e=[0,0,0],t=[0,0,0];return function(n,r){sy(e,n),sy(t,r),iy(e,e),iy(t,t);let s=_j(e,t);return s>1?0:s<-1?Math.PI:Math.acos(s)}}();function AH(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}class Gr extends Array{constructor(t=0,n=t,r=t){return super(t,n,r),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this[0]=t}set y(t){this[1]=t}set z(t){this[2]=t}set(t,n=t,r=t){return t.length?this.copy(t):(_H(this,t,n,r),this)}copy(t){return sy(this,t),this}add(t,n){return n?c1(this,t,n):c1(this,this,t),this}sub(t,n){return n?u1(this,t,n):u1(this,this,t),this}multiply(t){return t.length?bH(this,this,t):rg(this,this,t),this}divide(t){return t.length?SH(this,this,t):rg(this,this,1/t),this}inverse(t=this){return PH(this,t),this}len(){return Uc(this)}distance(t){return t?EH(this,t):Uc(this)}squaredLen(){return d1(this)}squaredDistance(t){return t?CH(this,t):d1(this)}negate(t=this){return kH(this,t),this}cross(t,n){return n?h1(this,t,n):h1(this,this,t),this}scale(t){return rg(this,this,t),this}normalize(){return iy(this,this),this}dot(t){return _j(this,t)}equals(t){return AH(this,t)}applyMatrix3(t){return MH(this,this,t),this}applyMatrix4(t){return jH(this,this,t),this}scaleRotateMatrix4(t){return RH(this,this,t),this}applyQuaternion(t){return OH(this,this,t),this}angle(t){return IH(this,t)}lerp(t,n){return NH(this,this,t,n),this}smoothLerp(t,n,r){return TH(this,this,t,n,r),this}clone(){return new Gr(this[0],this[1],this[2])}fromArray(t,n=0){return this[0]=t[n],this[1]=t[n+1],this[2]=t[n+2],this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t}transformDirection(t){const n=this[0],r=this[1],s=this[2];return this[0]=t[0]*n+t[4]*r+t[8]*s,this[1]=t[1]*n+t[5]*r+t[9]*s,this[2]=t[2]*n+t[6]*r+t[10]*s,this.normalize()}}const f1=new Gr;let LH=1,DH=1,p1=!1;class FH{constructor(t,n={}){t.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=t,this.attributes=n,this.id=LH++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let r in n)this.addAttribute(r,n[r])}addAttribute(t,n){if(this.attributes[t]=n,n.id=DH++,n.size=n.size||1,n.type=n.type||(n.data.constructor===Float32Array?this.gl.FLOAT:n.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),n.target=t==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,n.normalized=n.normalized||!1,n.stride=n.stride||0,n.offset=n.offset||0,n.count=n.count||(n.stride?n.data.byteLength/n.stride:n.data.length/n.size),n.divisor=n.instanced||0,n.needsUpdate=!1,n.usage=n.usage||this.gl.STATIC_DRAW,n.buffer||this.updateAttribute(n),n.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==n.count*n.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,n.count*n.divisor);this.instancedCount=n.count*n.divisor}else t==="index"?this.drawRange.count=n.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,n.count))}updateAttribute(t){const n=!t.buffer;n&&(t.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==t.buffer&&(this.gl.bindBuffer(t.target,t.buffer),this.glState.boundBuffer=t.buffer),n?this.gl.bufferData(t.target,t.data,t.usage):this.gl.bufferSubData(t.target,0,t.data),t.needsUpdate=!1}setIndex(t){this.addAttribute("index",t)}setDrawRange(t,n){this.drawRange.start=t,this.drawRange.count=n}setInstancedCount(t){this.instancedCount=t}createVAO(t){this.VAOs[t.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.bindAttributes(t)}bindAttributes(t){t.attributeLocations.forEach((n,{name:r,type:s})=>{if(!this.attributes[r]){console.warn(`active attribute ${r} not being supplied`);return}const i=this.attributes[r];this.gl.bindBuffer(i.target,i.buffer),this.glState.boundBuffer=i.buffer;let a=1;s===35674&&(a=2),s===35675&&(a=3),s===35676&&(a=4);const l=i.size/a,c=a===1?0:a*a*4,h=a===1?0:a*4;for(let f=0;f<a;f++)this.gl.vertexAttribPointer(n+f,l,i.type,i.normalized,i.stride+c,i.offset+f*h),this.gl.enableVertexAttribArray(n+f),this.gl.renderer.vertexAttribDivisor(n+f,i.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:t,mode:n=this.gl.TRIANGLES}){var s;this.gl.renderer.currentGeometry!==`${this.id}_${t.attributeOrder}`&&(this.VAOs[t.attributeOrder]||this.createVAO(t),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${t.attributeOrder}`),t.attributeLocations.forEach((i,{name:a})=>{const l=this.attributes[a];l.needsUpdate&&this.updateAttribute(l)});let r=2;((s=this.attributes.index)==null?void 0:s.type)===this.gl.UNSIGNED_INT&&(r=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*r,this.instancedCount):this.gl.renderer.drawArraysInstanced(n,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*r):this.gl.drawArrays(n,this.drawRange.start,this.drawRange.count)}getPosition(){const t=this.attributes.position;if(t.data)return t;if(!p1)return console.warn("No position buffer data found to compute bounds"),p1=!0}computeBoundingBox(t){t||(t=this.getPosition());const n=t.data,r=t.size;this.bounds||(this.bounds={min:new Gr,max:new Gr,center:new Gr,scale:new Gr,radius:1/0});const s=this.bounds.min,i=this.bounds.max,a=this.bounds.center,l=this.bounds.scale;s.set(1/0),i.set(-1/0);for(let c=0,h=n.length;c<h;c+=r){const f=n[c],m=n[c+1],v=n[c+2];s.x=Math.min(f,s.x),s.y=Math.min(m,s.y),s.z=Math.min(v,s.z),i.x=Math.max(f,i.x),i.y=Math.max(m,i.y),i.z=Math.max(v,i.z)}l.sub(i,s),a.add(s,i).divide(2)}computeBoundingSphere(t){t||(t=this.getPosition());const n=t.data,r=t.size;this.bounds||this.computeBoundingBox(t);let s=0;for(let i=0,a=n.length;i<a;i+=r)f1.fromArray(n,i),s=Math.max(s,this.bounds.center.squaredDistance(f1));this.bounds.radius=Math.sqrt(s)}remove(){for(let t in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[t]),delete this.VAOs[t];for(let t in this.attributes)this.gl.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]}}let $H=1;const m1={};class UH{constructor(t,{vertex:n,fragment:r,uniforms:s={},transparent:i=!1,cullFace:a=t.BACK,frontFace:l=t.CCW,depthTest:c=!0,depthWrite:h=!0,depthFunc:f=t.LEQUAL}={}){t.canvas||console.error("gl not passed as first argument to Program"),this.gl=t,this.uniforms=s,this.id=$H++,n||console.warn("vertex shader not supplied"),r||console.warn("fragment shader not supplied"),this.transparent=i,this.cullFace=a,this.frontFace=l,this.depthTest=c,this.depthWrite=h,this.depthFunc=f,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=t.createShader(t.VERTEX_SHADER),this.fragmentShader=t.createShader(t.FRAGMENT_SHADER),this.program=t.createProgram(),t.attachShader(this.program,this.vertexShader),t.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:n,fragment:r})}setShaders({vertex:t,fragment:n}){if(t&&(this.gl.shaderSource(this.vertexShader,t),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${g1(t)}`)),n&&(this.gl.shaderSource(this.fragmentShader,n),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${g1(n)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let r=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let a=0;a<r;a++){let l=this.gl.getActiveUniform(this.program,a);this.uniformLocations.set(l,this.gl.getUniformLocation(this.program,l.name));const c=l.name.match(/(\w+)/g);l.uniformName=c[0],l.nameComponents=c.slice(1)}this.attributeLocations=new Map;const s=[],i=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let a=0;a<i;a++){const l=this.gl.getActiveAttrib(this.program,a),c=this.gl.getAttribLocation(this.program,l.name);c!==-1&&(s[c]=l.name,this.attributeLocations.set(l,c))}this.attributeOrder=s.join("")}setBlendFunc(t,n,r,s){this.blendFunc.src=t,this.blendFunc.dst=n,this.blendFunc.srcAlpha=r,this.blendFunc.dstAlpha=s,t&&(this.transparent=!0)}setBlendEquation(t,n){this.blendEquation.modeRGB=t,this.blendEquation.modeAlpha=n}setStencilFunc(t,n,r){this.stencilRef=n,this.stencilFunc.func=t,this.stencilFunc.ref=n,this.stencilFunc.mask=r}setStencilOp(t,n,r){this.stencilOp.stencilFail=t,this.stencilOp.depthFail=n,this.stencilOp.depthPass=r}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:t=!1}={}){let n=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((s,i)=>{let a=this.uniforms[i.uniformName];for(const l of i.nameComponents){if(!a)break;if(l in a)a=a[l];else{if(Array.isArray(a.value))break;a=void 0;break}}if(!a)return v1(`Active uniform ${i.name} has not been supplied`);if(a&&a.value===void 0)return v1(`${i.name} uniform is missing a value parameter`);if(a.value.texture)return n=n+1,a.value.update(n),sg(this.gl,i.type,s,n);if(a.value.length&&a.value[0].texture){const l=[];return a.value.forEach(c=>{n=n+1,c.update(n),l.push(n)}),sg(this.gl,i.type,s,l)}sg(this.gl,i.type,s,a.value)}),this.applyState(),t&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function sg(e,t,n,r){r=r.length?zH(r):r;const s=e.renderer.state.uniformLocations.get(n);if(r.length)if(s===void 0||s.length!==r.length)e.renderer.state.uniformLocations.set(n,r.slice(0));else{if(BH(s,r))return;s.set?s.set(r):WH(s,r),e.renderer.state.uniformLocations.set(n,s)}else{if(s===r)return;e.renderer.state.uniformLocations.set(n,r)}switch(t){case 5126:return r.length?e.uniform1fv(n,r):e.uniform1f(n,r);case 35664:return e.uniform2fv(n,r);case 35665:return e.uniform3fv(n,r);case 35666:return e.uniform4fv(n,r);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return r.length?e.uniform1iv(n,r):e.uniform1i(n,r);case 35671:case 35667:return e.uniform2iv(n,r);case 35672:case 35668:return e.uniform3iv(n,r);case 35673:case 35669:return e.uniform4iv(n,r);case 35674:return e.uniformMatrix2fv(n,!1,r);case 35675:return e.uniformMatrix3fv(n,!1,r);case 35676:return e.uniformMatrix4fv(n,!1,r)}}function g1(e){let t=e.split(`
`);for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join(`
`)}function zH(e){const t=e.length,n=e[0].length;if(n===void 0)return e;const r=t*n;let s=m1[r];s||(m1[r]=s=new Float32Array(r));for(let i=0;i<t;i++)s.set(e[i],i*n);return s}function BH(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function WH(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t[n]}let ig=0;function v1(e){ig>100||(console.warn(e),ig++,ig>100&&console.warn("More than 100 program warnings - stopping logs."))}const og=new Gr;let HH=1;class VH{constructor({canvas:t=document.createElement("canvas"),width:n=300,height:r=150,dpr:s=1,alpha:i=!1,depth:a=!0,stencil:l=!1,antialias:c=!1,premultipliedAlpha:h=!1,preserveDrawingBuffer:f=!1,powerPreference:m="default",autoClear:v=!0,webgl:y=2}={}){const S={alpha:i,depth:a,stencil:l,antialias:c,premultipliedAlpha:h,preserveDrawingBuffer:f,powerPreference:m};this.dpr=s,this.alpha=i,this.color=!0,this.depth=a,this.stencil=l,this.premultipliedAlpha=h,this.autoClear=v,this.id=HH++,y===2&&(this.gl=t.getContext("webgl2",S)),this.isWebgl2=!!this.gl,this.gl||(this.gl=t.getContext("webgl",S)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(n,r),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(t,n){this.width=t,this.height=n,this.gl.canvas.width=t*this.dpr,this.gl.canvas.height=n*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:t+"px",height:n+"px"})}setViewport(t,n,r=0,s=0){this.state.viewport.width===t&&this.state.viewport.height===n||(this.state.viewport.width=t,this.state.viewport.height=n,this.state.viewport.x=r,this.state.viewport.y=s,this.gl.viewport(r,s,t,n))}setScissor(t,n,r=0,s=0){this.gl.scissor(r,s,t,n)}enable(t){this.state[t]!==!0&&(this.gl.enable(t),this.state[t]=!0)}disable(t){this.state[t]!==!1&&(this.gl.disable(t),this.state[t]=!1)}setBlendFunc(t,n,r,s){this.state.blendFunc.src===t&&this.state.blendFunc.dst===n&&this.state.blendFunc.srcAlpha===r&&this.state.blendFunc.dstAlpha===s||(this.state.blendFunc.src=t,this.state.blendFunc.dst=n,this.state.blendFunc.srcAlpha=r,this.state.blendFunc.dstAlpha=s,r!==void 0?this.gl.blendFuncSeparate(t,n,r,s):this.gl.blendFunc(t,n))}setBlendEquation(t,n){t=t||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===t&&this.state.blendEquation.modeAlpha===n)&&(this.state.blendEquation.modeRGB=t,this.state.blendEquation.modeAlpha=n,n!==void 0?this.gl.blendEquationSeparate(t,n):this.gl.blendEquation(t))}setCullFace(t){this.state.cullFace!==t&&(this.state.cullFace=t,this.gl.cullFace(t))}setFrontFace(t){this.state.frontFace!==t&&(this.state.frontFace=t,this.gl.frontFace(t))}setDepthMask(t){this.state.depthMask!==t&&(this.state.depthMask=t,this.gl.depthMask(t))}setDepthFunc(t){this.state.depthFunc!==t&&(this.state.depthFunc=t,this.gl.depthFunc(t))}setStencilMask(t){this.state.stencilMask!==t&&(this.state.stencilMask=t,this.gl.stencilMask(t))}setStencilFunc(t,n,r){this.state.stencilFunc===t&&this.state.stencilRef===n&&this.state.stencilFuncMask===r||(this.state.stencilFunc=t||this.gl.ALWAYS,this.state.stencilRef=n||0,this.state.stencilFuncMask=r||0,this.gl.stencilFunc(t||this.gl.ALWAYS,n||0,r||0))}setStencilOp(t,n,r){this.state.stencilFail===t&&this.state.stencilDepthFail===n&&this.state.stencilDepthPass===r||(this.state.stencilFail=t,this.state.stencilDepthFail=n,this.state.stencilDepthPass=r,this.gl.stencilOp(t,n,r))}activeTexture(t){this.state.activeTextureUnit!==t&&(this.state.activeTextureUnit=t,this.gl.activeTexture(this.gl.TEXTURE0+t))}bindFramebuffer({target:t=this.gl.FRAMEBUFFER,buffer:n=null}={}){this.state.framebuffer!==n&&(this.state.framebuffer=n,this.gl.bindFramebuffer(t,n))}getExtension(t,n,r){return n&&this.gl[n]?this.gl[n].bind(this.gl):(this.extensions[t]||(this.extensions[t]=this.gl.getExtension(t)),n?this.extensions[t]?this.extensions[t][r].bind(this.extensions[t]):null:this.extensions[t])}sortOpaque(t,n){return t.renderOrder!==n.renderOrder?t.renderOrder-n.renderOrder:t.program.id!==n.program.id?t.program.id-n.program.id:t.zDepth!==n.zDepth?t.zDepth-n.zDepth:n.id-t.id}sortTransparent(t,n){return t.renderOrder!==n.renderOrder?t.renderOrder-n.renderOrder:t.zDepth!==n.zDepth?n.zDepth-t.zDepth:n.id-t.id}sortUI(t,n){return t.renderOrder!==n.renderOrder?t.renderOrder-n.renderOrder:t.program.id!==n.program.id?t.program.id-n.program.id:n.id-t.id}getRenderList({scene:t,camera:n,frustumCull:r,sort:s}){let i=[];if(n&&r&&n.updateFrustum(),t.traverse(a=>{if(!a.visible)return!0;a.draw&&(r&&a.frustumCulled&&n&&!n.frustumIntersectsMesh(a)||i.push(a))}),s){const a=[],l=[],c=[];i.forEach(h=>{h.program.transparent?h.program.depthTest?l.push(h):c.push(h):a.push(h),h.zDepth=0,!(h.renderOrder!==0||!h.program.depthTest||!n)&&(h.worldMatrix.getTranslation(og),og.applyMatrix4(n.projectionViewMatrix),h.zDepth=og.z)}),a.sort(this.sortOpaque),l.sort(this.sortTransparent),c.sort(this.sortUI),i=a.concat(l,c)}return i}render({scene:t,camera:n,target:r=null,update:s=!0,sort:i=!0,frustumCull:a=!0,clear:l}){r===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(r),this.setViewport(r.width,r.height)),(l||this.autoClear&&l!==!1)&&(this.depth&&(!r||r.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!r||r.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),s&&t.updateMatrixWorld(),n&&n.updateMatrixWorld(),this.getRenderList({scene:t,camera:n,frustumCull:a,sort:i}).forEach(h=>{h.draw({camera:n})})}}function qH(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function GH(e,t,n,r,s){return e[0]=t,e[1]=n,e[2]=r,e[3]=s,e}function YH(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=n*n+r*r+s*s+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=s*a,e[3]=i*a,e}function ZH(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function KH(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function QH(e,t,n){n=n*.5;let r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function y1(e,t,n){let r=t[0],s=t[1],i=t[2],a=t[3],l=n[0],c=n[1],h=n[2],f=n[3];return e[0]=r*f+a*l+s*h-i*c,e[1]=s*f+a*c+i*l-r*h,e[2]=i*f+a*h+r*c-s*l,e[3]=a*f-r*l-s*c-i*h,e}function XH(e,t,n){n*=.5;let r=t[0],s=t[1],i=t[2],a=t[3],l=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*l,e[1]=s*c+i*l,e[2]=i*c-s*l,e[3]=a*c-r*l,e}function JH(e,t,n){n*=.5;let r=t[0],s=t[1],i=t[2],a=t[3],l=Math.sin(n),c=Math.cos(n);return e[0]=r*c-i*l,e[1]=s*c+a*l,e[2]=i*c+r*l,e[3]=a*c-s*l,e}function e9(e,t,n){n*=.5;let r=t[0],s=t[1],i=t[2],a=t[3],l=Math.sin(n),c=Math.cos(n);return e[0]=r*c+s*l,e[1]=s*c-r*l,e[2]=i*c+a*l,e[3]=a*c-i*l,e}function t9(e,t,n,r){let s=t[0],i=t[1],a=t[2],l=t[3],c=n[0],h=n[1],f=n[2],m=n[3],v,y,S,w,b;return y=s*c+i*h+a*f+l*m,y<0&&(y=-y,c=-c,h=-h,f=-f,m=-m),1-y>1e-6?(v=Math.acos(y),S=Math.sin(v),w=Math.sin((1-r)*v)/S,b=Math.sin(r*v)/S):(w=1-r,b=r),e[0]=w*s+b*c,e[1]=w*i+b*h,e[2]=w*a+b*f,e[3]=w*l+b*m,e}function n9(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=n*n+r*r+s*s+i*i,l=a?1/a:0;return e[0]=-n*l,e[1]=-r*l,e[2]=-s*l,e[3]=i*l,e}function r9(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function s9(e,t){let n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{let s=0;t[4]>t[0]&&(s=1),t[8]>t[s*3+s]&&(s=2);let i=(s+1)%3,a=(s+2)%3;r=Math.sqrt(t[s*3+s]-t[i*3+i]-t[a*3+a]+1),e[s]=.5*r,r=.5/r,e[3]=(t[i*3+a]-t[a*3+i])*r,e[i]=(t[i*3+s]+t[s*3+i])*r,e[a]=(t[a*3+s]+t[s*3+a])*r}return e}function i9(e,t,n="YXZ"){let r=Math.sin(t[0]*.5),s=Math.cos(t[0]*.5),i=Math.sin(t[1]*.5),a=Math.cos(t[1]*.5),l=Math.sin(t[2]*.5),c=Math.cos(t[2]*.5);return n==="XYZ"?(e[0]=r*a*c+s*i*l,e[1]=s*i*c-r*a*l,e[2]=s*a*l+r*i*c,e[3]=s*a*c-r*i*l):n==="YXZ"?(e[0]=r*a*c+s*i*l,e[1]=s*i*c-r*a*l,e[2]=s*a*l-r*i*c,e[3]=s*a*c+r*i*l):n==="ZXY"?(e[0]=r*a*c-s*i*l,e[1]=s*i*c+r*a*l,e[2]=s*a*l+r*i*c,e[3]=s*a*c-r*i*l):n==="ZYX"?(e[0]=r*a*c-s*i*l,e[1]=s*i*c+r*a*l,e[2]=s*a*l-r*i*c,e[3]=s*a*c+r*i*l):n==="YZX"?(e[0]=r*a*c+s*i*l,e[1]=s*i*c+r*a*l,e[2]=s*a*l-r*i*c,e[3]=s*a*c-r*i*l):n==="XZY"&&(e[0]=r*a*c-s*i*l,e[1]=s*i*c-r*a*l,e[2]=s*a*l+r*i*c,e[3]=s*a*c+r*i*l),e}const o9=qH,a9=GH,l9=ZH,c9=YH;class u9 extends Array{constructor(t=0,n=0,r=0,s=1){super(t,n,r,s),this.onChange=()=>{},this._target=this;const i=["0","1","2","3"];return new Proxy(this,{set(a,l){const c=Reflect.set(...arguments);return c&&i.includes(l)&&a.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(t){this._target[0]=t,this.onChange()}set y(t){this._target[1]=t,this.onChange()}set z(t){this._target[2]=t,this.onChange()}set w(t){this._target[3]=t,this.onChange()}identity(){return KH(this._target),this.onChange(),this}set(t,n,r,s){return t.length?this.copy(t):(a9(this._target,t,n,r,s),this.onChange(),this)}rotateX(t){return XH(this._target,this._target,t),this.onChange(),this}rotateY(t){return JH(this._target,this._target,t),this.onChange(),this}rotateZ(t){return e9(this._target,this._target,t),this.onChange(),this}inverse(t=this._target){return n9(this._target,t),this.onChange(),this}conjugate(t=this._target){return r9(this._target,t),this.onChange(),this}copy(t){return o9(this._target,t),this.onChange(),this}normalize(t=this._target){return c9(this._target,t),this.onChange(),this}multiply(t,n){return n?y1(this._target,t,n):y1(this._target,this._target,t),this.onChange(),this}dot(t){return l9(this._target,t)}fromMatrix3(t){return s9(this._target,t),this.onChange(),this}fromEuler(t,n){return i9(this._target,t,t.order),n||this.onChange(),this}fromAxisAngle(t,n){return QH(this._target,t,n),this.onChange(),this}slerp(t,n){return t9(this._target,this._target,t,n),this.onChange(),this}fromArray(t,n=0){return this._target[0]=t[n],this._target[1]=t[n+1],this._target[2]=t[n+2],this._target[3]=t[n+3],this.onChange(),this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t[n+3]=this[3],t}}const d9=1e-6;function h9(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function f9(e,t,n,r,s,i,a,l,c,h,f,m,v,y,S,w,b){return e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i,e[5]=a,e[6]=l,e[7]=c,e[8]=h,e[9]=f,e[10]=m,e[11]=v,e[12]=y,e[13]=S,e[14]=w,e[15]=b,e}function p9(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function m9(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=t[9],v=t[10],y=t[11],S=t[12],w=t[13],b=t[14],E=t[15],_=n*l-r*a,C=n*c-s*a,P=n*h-i*a,T=r*c-s*l,R=r*h-i*l,O=s*h-i*c,A=f*w-m*S,B=f*b-v*S,q=f*E-y*S,Q=m*b-v*w,W=m*E-y*w,z=v*E-y*b,M=_*z-C*W+P*Q+T*q-R*B+O*A;return M?(M=1/M,e[0]=(l*z-c*W+h*Q)*M,e[1]=(s*W-r*z-i*Q)*M,e[2]=(w*O-b*R+E*T)*M,e[3]=(v*R-m*O-y*T)*M,e[4]=(c*q-a*z-h*B)*M,e[5]=(n*z-s*q+i*B)*M,e[6]=(b*P-S*O-E*C)*M,e[7]=(f*O-v*P+y*C)*M,e[8]=(a*W-l*q+h*A)*M,e[9]=(r*q-n*W-i*A)*M,e[10]=(S*R-w*P+E*_)*M,e[11]=(m*P-f*R-y*_)*M,e[12]=(l*B-a*Q-c*A)*M,e[13]=(n*Q-r*B+s*A)*M,e[14]=(w*C-S*T-b*_)*M,e[15]=(f*T-m*C+v*_)*M,e):null}function bj(e){let t=e[0],n=e[1],r=e[2],s=e[3],i=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=e[9],m=e[10],v=e[11],y=e[12],S=e[13],w=e[14],b=e[15],E=t*a-n*i,_=t*l-r*i,C=t*c-s*i,P=n*l-r*a,T=n*c-s*a,R=r*c-s*l,O=h*S-f*y,A=h*w-m*y,B=h*b-v*y,q=f*w-m*S,Q=f*b-v*S,W=m*b-v*w;return E*W-_*Q+C*q+P*B-T*A+R*O}function x1(e,t,n){let r=t[0],s=t[1],i=t[2],a=t[3],l=t[4],c=t[5],h=t[6],f=t[7],m=t[8],v=t[9],y=t[10],S=t[11],w=t[12],b=t[13],E=t[14],_=t[15],C=n[0],P=n[1],T=n[2],R=n[3];return e[0]=C*r+P*l+T*m+R*w,e[1]=C*s+P*c+T*v+R*b,e[2]=C*i+P*h+T*y+R*E,e[3]=C*a+P*f+T*S+R*_,C=n[4],P=n[5],T=n[6],R=n[7],e[4]=C*r+P*l+T*m+R*w,e[5]=C*s+P*c+T*v+R*b,e[6]=C*i+P*h+T*y+R*E,e[7]=C*a+P*f+T*S+R*_,C=n[8],P=n[9],T=n[10],R=n[11],e[8]=C*r+P*l+T*m+R*w,e[9]=C*s+P*c+T*v+R*b,e[10]=C*i+P*h+T*y+R*E,e[11]=C*a+P*f+T*S+R*_,C=n[12],P=n[13],T=n[14],R=n[15],e[12]=C*r+P*l+T*m+R*w,e[13]=C*s+P*c+T*v+R*b,e[14]=C*i+P*h+T*y+R*E,e[15]=C*a+P*f+T*S+R*_,e}function g9(e,t,n){let r=n[0],s=n[1],i=n[2],a,l,c,h,f,m,v,y,S,w,b,E;return t===e?(e[12]=t[0]*r+t[4]*s+t[8]*i+t[12],e[13]=t[1]*r+t[5]*s+t[9]*i+t[13],e[14]=t[2]*r+t[6]*s+t[10]*i+t[14],e[15]=t[3]*r+t[7]*s+t[11]*i+t[15]):(a=t[0],l=t[1],c=t[2],h=t[3],f=t[4],m=t[5],v=t[6],y=t[7],S=t[8],w=t[9],b=t[10],E=t[11],e[0]=a,e[1]=l,e[2]=c,e[3]=h,e[4]=f,e[5]=m,e[6]=v,e[7]=y,e[8]=S,e[9]=w,e[10]=b,e[11]=E,e[12]=a*r+f*s+S*i+t[12],e[13]=l*r+m*s+w*i+t[13],e[14]=c*r+v*s+b*i+t[14],e[15]=h*r+y*s+E*i+t[15]),e}function v9(e,t,n){let r=n[0],s=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function y9(e,t,n,r){let s=r[0],i=r[1],a=r[2],l=Math.hypot(s,i,a),c,h,f,m,v,y,S,w,b,E,_,C,P,T,R,O,A,B,q,Q,W,z,M,ee;return Math.abs(l)<d9?null:(l=1/l,s*=l,i*=l,a*=l,c=Math.sin(n),h=Math.cos(n),f=1-h,m=t[0],v=t[1],y=t[2],S=t[3],w=t[4],b=t[5],E=t[6],_=t[7],C=t[8],P=t[9],T=t[10],R=t[11],O=s*s*f+h,A=i*s*f+a*c,B=a*s*f-i*c,q=s*i*f-a*c,Q=i*i*f+h,W=a*i*f+s*c,z=s*a*f+i*c,M=i*a*f-s*c,ee=a*a*f+h,e[0]=m*O+w*A+C*B,e[1]=v*O+b*A+P*B,e[2]=y*O+E*A+T*B,e[3]=S*O+_*A+R*B,e[4]=m*q+w*Q+C*W,e[5]=v*q+b*Q+P*W,e[6]=y*q+E*Q+T*W,e[7]=S*q+_*Q+R*W,e[8]=m*z+w*M+C*ee,e[9]=v*z+b*M+P*ee,e[10]=y*z+E*M+T*ee,e[11]=S*z+_*M+R*ee,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function x9(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Sj(e,t){let n=t[0],r=t[1],s=t[2],i=t[4],a=t[5],l=t[6],c=t[8],h=t[9],f=t[10];return e[0]=Math.hypot(n,r,s),e[1]=Math.hypot(i,a,l),e[2]=Math.hypot(c,h,f),e}function w9(e){let t=e[0],n=e[1],r=e[2],s=e[4],i=e[5],a=e[6],l=e[8],c=e[9],h=e[10];const f=t*t+n*n+r*r,m=s*s+i*i+a*a,v=l*l+c*c+h*h;return Math.sqrt(Math.max(f,m,v))}const Ej=function(){const e=[1,1,1];return function(t,n){let r=e;Sj(r,n);let s=1/r[0],i=1/r[1],a=1/r[2],l=n[0]*s,c=n[1]*i,h=n[2]*a,f=n[4]*s,m=n[5]*i,v=n[6]*a,y=n[8]*s,S=n[9]*i,w=n[10]*a,b=l+m+w,E=0;return b>0?(E=Math.sqrt(b+1)*2,t[3]=.25*E,t[0]=(v-S)/E,t[1]=(y-h)/E,t[2]=(c-f)/E):l>m&&l>w?(E=Math.sqrt(1+l-m-w)*2,t[3]=(v-S)/E,t[0]=.25*E,t[1]=(c+f)/E,t[2]=(y+h)/E):m>w?(E=Math.sqrt(1+m-l-w)*2,t[3]=(y-h)/E,t[0]=(c+f)/E,t[1]=.25*E,t[2]=(v+S)/E):(E=Math.sqrt(1+w-l-m)*2,t[3]=(c-f)/E,t[0]=(y+h)/E,t[1]=(v+S)/E,t[2]=.25*E),t}}();function _9(e,t,n,r){let s=Uc([e[0],e[1],e[2]]);const i=Uc([e[4],e[5],e[6]]),a=Uc([e[8],e[9],e[10]]);bj(e)<0&&(s=-s),n[0]=e[12],n[1]=e[13],n[2]=e[14];const c=e.slice(),h=1/s,f=1/i,m=1/a;c[0]*=h,c[1]*=h,c[2]*=h,c[4]*=f,c[5]*=f,c[6]*=f,c[8]*=m,c[9]*=m,c[10]*=m,Ej(t,c),r[0]=s,r[1]=i,r[2]=a}function b9(e,t,n,r){const s=e,i=t[0],a=t[1],l=t[2],c=t[3],h=i+i,f=a+a,m=l+l,v=i*h,y=i*f,S=i*m,w=a*f,b=a*m,E=l*m,_=c*h,C=c*f,P=c*m,T=r[0],R=r[1],O=r[2];return s[0]=(1-(w+E))*T,s[1]=(y+P)*T,s[2]=(S-C)*T,s[3]=0,s[4]=(y-P)*R,s[5]=(1-(v+E))*R,s[6]=(b+_)*R,s[7]=0,s[8]=(S+C)*O,s[9]=(b-_)*O,s[10]=(1-(v+w))*O,s[11]=0,s[12]=n[0],s[13]=n[1],s[14]=n[2],s[15]=1,s}function S9(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=n+n,l=r+r,c=s+s,h=n*a,f=r*a,m=r*l,v=s*a,y=s*l,S=s*c,w=i*a,b=i*l,E=i*c;return e[0]=1-m-S,e[1]=f+E,e[2]=v-b,e[3]=0,e[4]=f-E,e[5]=1-h-S,e[6]=y+w,e[7]=0,e[8]=v+b,e[9]=y-w,e[10]=1-h-m,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function E9(e,t,n,r,s){let i=1/Math.tan(t/2),a=1/(r-s);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(s+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*s*r*a,e[15]=0,e}function C9(e,t,n,r,s,i,a){let l=1/(t-n),c=1/(r-s),h=1/(i-a);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*h,e[11]=0,e[12]=(t+n)*l,e[13]=(s+r)*c,e[14]=(a+i)*h,e[15]=1,e}function k9(e,t,n,r){let s=t[0],i=t[1],a=t[2],l=r[0],c=r[1],h=r[2],f=s-n[0],m=i-n[1],v=a-n[2],y=f*f+m*m+v*v;y===0?v=1:(y=1/Math.sqrt(y),f*=y,m*=y,v*=y);let S=c*v-h*m,w=h*f-l*v,b=l*m-c*f;return y=S*S+w*w+b*b,y===0&&(h?l+=1e-6:c?h+=1e-6:c+=1e-6,S=c*v-h*m,w=h*f-l*v,b=l*m-c*f,y=S*S+w*w+b*b),y=1/Math.sqrt(y),S*=y,w*=y,b*=y,e[0]=S,e[1]=w,e[2]=b,e[3]=0,e[4]=m*b-v*w,e[5]=v*S-f*b,e[6]=f*w-m*S,e[7]=0,e[8]=f,e[9]=m,e[10]=v,e[11]=0,e[12]=s,e[13]=i,e[14]=a,e[15]=1,e}function w1(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function _1(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function P9(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}class df extends Array{constructor(t=1,n=0,r=0,s=0,i=0,a=1,l=0,c=0,h=0,f=0,m=1,v=0,y=0,S=0,w=0,b=1){return super(t,n,r,s,i,a,l,c,h,f,m,v,y,S,w,b),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(t){this[12]=t}set y(t){this[13]=t}set z(t){this[14]=t}set w(t){this[15]=t}set(t,n,r,s,i,a,l,c,h,f,m,v,y,S,w,b){return t.length?this.copy(t):(f9(this,t,n,r,s,i,a,l,c,h,f,m,v,y,S,w,b),this)}translate(t,n=this){return g9(this,n,t),this}rotate(t,n,r=this){return y9(this,r,t,n),this}scale(t,n=this){return v9(this,n,typeof t=="number"?[t,t,t]:t),this}add(t,n){return n?w1(this,t,n):w1(this,this,t),this}sub(t,n){return n?_1(this,t,n):_1(this,this,t),this}multiply(t,n){return t.length?n?x1(this,t,n):x1(this,this,t):P9(this,this,t),this}identity(){return p9(this),this}copy(t){return h9(this,t),this}fromPerspective({fov:t,aspect:n,near:r,far:s}={}){return E9(this,t,n,r,s),this}fromOrthogonal({left:t,right:n,bottom:r,top:s,near:i,far:a}){return C9(this,t,n,r,s,i,a),this}fromQuaternion(t){return S9(this,t),this}setPosition(t){return this.x=t[0],this.y=t[1],this.z=t[2],this}inverse(t=this){return m9(this,t),this}compose(t,n,r){return b9(this,t,n,r),this}decompose(t,n,r){return _9(this,t,n,r),this}getRotation(t){return Ej(t,this),this}getTranslation(t){return x9(t,this),this}getScaling(t){return Sj(t,this),this}getMaxScaleOnAxis(){return w9(this)}lookAt(t,n,r){return k9(this,t,n,r),this}determinant(){return bj(this)}fromArray(t,n=0){return this[0]=t[n],this[1]=t[n+1],this[2]=t[n+2],this[3]=t[n+3],this[4]=t[n+4],this[5]=t[n+5],this[6]=t[n+6],this[7]=t[n+7],this[8]=t[n+8],this[9]=t[n+9],this[10]=t[n+10],this[11]=t[n+11],this[12]=t[n+12],this[13]=t[n+13],this[14]=t[n+14],this[15]=t[n+15],this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t[n+3]=this[3],t[n+4]=this[4],t[n+5]=this[5],t[n+6]=this[6],t[n+7]=this[7],t[n+8]=this[8],t[n+9]=this[9],t[n+10]=this[10],t[n+11]=this[11],t[n+12]=this[12],t[n+13]=this[13],t[n+14]=this[14],t[n+15]=this[15],t}}function N9(e,t,n="YXZ"){return n==="XYZ"?(e[1]=Math.asin(Math.min(Math.max(t[8],-1),1)),Math.abs(t[8])<.99999?(e[0]=Math.atan2(-t[9],t[10]),e[2]=Math.atan2(-t[4],t[0])):(e[0]=Math.atan2(t[6],t[5]),e[2]=0)):n==="YXZ"?(e[0]=Math.asin(-Math.min(Math.max(t[9],-1),1)),Math.abs(t[9])<.99999?(e[1]=Math.atan2(t[8],t[10]),e[2]=Math.atan2(t[1],t[5])):(e[1]=Math.atan2(-t[2],t[0]),e[2]=0)):n==="ZXY"?(e[0]=Math.asin(Math.min(Math.max(t[6],-1),1)),Math.abs(t[6])<.99999?(e[1]=Math.atan2(-t[2],t[10]),e[2]=Math.atan2(-t[4],t[5])):(e[1]=0,e[2]=Math.atan2(t[1],t[0]))):n==="ZYX"?(e[1]=Math.asin(-Math.min(Math.max(t[2],-1),1)),Math.abs(t[2])<.99999?(e[0]=Math.atan2(t[6],t[10]),e[2]=Math.atan2(t[1],t[0])):(e[0]=0,e[2]=Math.atan2(-t[4],t[5]))):n==="YZX"?(e[2]=Math.asin(Math.min(Math.max(t[1],-1),1)),Math.abs(t[1])<.99999?(e[0]=Math.atan2(-t[9],t[5]),e[1]=Math.atan2(-t[2],t[0])):(e[0]=0,e[1]=Math.atan2(t[8],t[10]))):n==="XZY"&&(e[2]=Math.asin(-Math.min(Math.max(t[4],-1),1)),Math.abs(t[4])<.99999?(e[0]=Math.atan2(t[6],t[5]),e[1]=Math.atan2(t[8],t[0])):(e[0]=Math.atan2(-t[9],t[10]),e[1]=0)),e}const b1=new df;class T9 extends Array{constructor(t=0,n=t,r=t,s="YXZ"){super(t,n,r),this.order=s,this.onChange=()=>{},this._target=this;const i=["0","1","2"];return new Proxy(this,{set(a,l){const c=Reflect.set(...arguments);return c&&i.includes(l)&&a.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this._target[0]=t,this.onChange()}set y(t){this._target[1]=t,this.onChange()}set z(t){this._target[2]=t,this.onChange()}set(t,n=t,r=t){return t.length?this.copy(t):(this._target[0]=t,this._target[1]=n,this._target[2]=r,this.onChange(),this)}copy(t){return this._target[0]=t[0],this._target[1]=t[1],this._target[2]=t[2],this.onChange(),this}reorder(t){return this._target.order=t,this.onChange(),this}fromRotationMatrix(t,n=this.order){return N9(this._target,t,n),this.onChange(),this}fromQuaternion(t,n=this.order,r){return b1.fromQuaternion(t),this._target.fromRotationMatrix(b1,n),r||this.onChange(),this}fromArray(t,n=0){return this._target[0]=t[n],this._target[1]=t[n+1],this._target[2]=t[n+2],this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t}}class j9{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new df,this.worldMatrix=new df,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new Gr,this.quaternion=new u9,this.scale=new Gr(1),this.rotation=new T9,this.up=new Gr(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(t,n=!0){this.parent&&t!==this.parent&&this.parent.removeChild(this,!1),this.parent=t,n&&t&&t.addChild(this,!1)}addChild(t,n=!0){~this.children.indexOf(t)||this.children.push(t),n&&t.setParent(this,!1)}removeChild(t,n=!0){~this.children.indexOf(t)&&this.children.splice(this.children.indexOf(t),1),n&&t.setParent(null,!1)}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||t)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,t=!0);for(let n=0,r=this.children.length;n<r;n++)this.children[n].updateMatrixWorld(t)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(t){if(!t(this))for(let n=0,r=this.children.length;n<r;n++)this.children[n].traverse(t)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(t,n=!1){n?this.matrix.lookAt(this.position,t,this.up):this.matrix.lookAt(t,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}function R9(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function M9(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=n+n,l=r+r,c=s+s,h=n*a,f=r*a,m=r*l,v=s*a,y=s*l,S=s*c,w=i*a,b=i*l,E=i*c;return e[0]=1-m-S,e[3]=f-E,e[6]=v+b,e[1]=f+E,e[4]=1-h-S,e[7]=y-w,e[2]=v-b,e[5]=y+w,e[8]=1-h-m,e}function O9(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function I9(e,t,n,r,s,i,a,l,c,h){return e[0]=t,e[1]=n,e[2]=r,e[3]=s,e[4]=i,e[5]=a,e[6]=l,e[7]=c,e[8]=h,e}function A9(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function L9(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=f*a-l*h,v=-f*i+l*c,y=h*i-a*c,S=n*m+r*v+s*y;return S?(S=1/S,e[0]=m*S,e[1]=(-f*r+s*h)*S,e[2]=(l*r-s*a)*S,e[3]=v*S,e[4]=(f*n-s*c)*S,e[5]=(-l*n+s*i)*S,e[6]=y*S,e[7]=(-h*n+r*c)*S,e[8]=(a*n-r*i)*S,e):null}function S1(e,t,n){let r=t[0],s=t[1],i=t[2],a=t[3],l=t[4],c=t[5],h=t[6],f=t[7],m=t[8],v=n[0],y=n[1],S=n[2],w=n[3],b=n[4],E=n[5],_=n[6],C=n[7],P=n[8];return e[0]=v*r+y*a+S*h,e[1]=v*s+y*l+S*f,e[2]=v*i+y*c+S*m,e[3]=w*r+b*a+E*h,e[4]=w*s+b*l+E*f,e[5]=w*i+b*c+E*m,e[6]=_*r+C*a+P*h,e[7]=_*s+C*l+P*f,e[8]=_*i+C*c+P*m,e}function D9(e,t,n){let r=t[0],s=t[1],i=t[2],a=t[3],l=t[4],c=t[5],h=t[6],f=t[7],m=t[8],v=n[0],y=n[1];return e[0]=r,e[1]=s,e[2]=i,e[3]=a,e[4]=l,e[5]=c,e[6]=v*r+y*a+h,e[7]=v*s+y*l+f,e[8]=v*i+y*c+m,e}function F9(e,t,n){let r=t[0],s=t[1],i=t[2],a=t[3],l=t[4],c=t[5],h=t[6],f=t[7],m=t[8],v=Math.sin(n),y=Math.cos(n);return e[0]=y*r+v*a,e[1]=y*s+v*l,e[2]=y*i+v*c,e[3]=y*a-v*r,e[4]=y*l-v*s,e[5]=y*c-v*i,e[6]=h,e[7]=f,e[8]=m,e}function $9(e,t,n){let r=n[0],s=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function U9(e,t){let n=t[0],r=t[1],s=t[2],i=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=t[9],v=t[10],y=t[11],S=t[12],w=t[13],b=t[14],E=t[15],_=n*l-r*a,C=n*c-s*a,P=n*h-i*a,T=r*c-s*l,R=r*h-i*l,O=s*h-i*c,A=f*w-m*S,B=f*b-v*S,q=f*E-y*S,Q=m*b-v*w,W=m*E-y*w,z=v*E-y*b,M=_*z-C*W+P*Q+T*q-R*B+O*A;return M?(M=1/M,e[0]=(l*z-c*W+h*Q)*M,e[1]=(c*q-a*z-h*B)*M,e[2]=(a*W-l*q+h*A)*M,e[3]=(s*W-r*z-i*Q)*M,e[4]=(n*z-s*q+i*B)*M,e[5]=(r*q-n*W-i*A)*M,e[6]=(w*O-b*R+E*T)*M,e[7]=(b*P-S*O-E*C)*M,e[8]=(S*R-w*P+E*_)*M,e):null}class z9 extends Array{constructor(t=1,n=0,r=0,s=0,i=1,a=0,l=0,c=0,h=1){return super(t,n,r,s,i,a,l,c,h),this}set(t,n,r,s,i,a,l,c,h){return t.length?this.copy(t):(I9(this,t,n,r,s,i,a,l,c,h),this)}translate(t,n=this){return D9(this,n,t),this}rotate(t,n=this){return F9(this,n,t),this}scale(t,n=this){return $9(this,n,t),this}multiply(t,n){return n?S1(this,t,n):S1(this,this,t),this}identity(){return A9(this),this}copy(t){return O9(this,t),this}fromMatrix4(t){return R9(this,t),this}fromQuaternion(t){return M9(this,t),this}fromBasis(t,n,r){return this.set(t[0],t[1],t[2],n[0],n[1],n[2],r[0],r[1],r[2]),this}inverse(t=this){return L9(this,t),this}getNormalMatrix(t){return U9(this,t),this}}let B9=0;class W9 extends j9{constructor(t,{geometry:n,program:r,mode:s=t.TRIANGLES,frustumCulled:i=!0,renderOrder:a=0}={}){super(),t.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=t,this.id=B9++,this.geometry=n,this.program=r,this.mode=s,this.frustumCulled=i,this.renderOrder=a,this.modelViewMatrix=new df,this.normalMatrix=new z9,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(t){return this.beforeRenderCallbacks.push(t),this}onAfterRender(t){return this.afterRenderCallbacks.push(t),this}draw({camera:t}={}){t&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=t.projectionMatrix,this.program.uniforms.cameraPosition.value=t.worldPosition,this.program.uniforms.viewMatrix.value=t.viewMatrix,this.modelViewMatrix.multiply(t.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(r=>r&&r({mesh:this,camera:t}));let n=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:n}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(r=>r&&r({mesh:this,camera:t}))}}const E1={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#00ff00",blue:"#0000ff",fuchsia:"#ff00ff",cyan:"#00ffff",yellow:"#ffff00",orange:"#ff8000"};function C1(e){e.length===4&&(e=e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t||console.warn(`Unable to convert hex string ${e} to rgb values`),[parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255]}function H9(e){return e=parseInt(e),[(e>>16&255)/255,(e>>8&255)/255,(e&255)/255]}function k1(e){return e===void 0?[0,0,0]:arguments.length===3?arguments:isNaN(e)?e[0]==="#"?C1(e):E1[e.toLowerCase()]?C1(E1[e.toLowerCase()]):(console.warn("Color format not recognised"),[0,0,0]):H9(e)}class ag extends Array{constructor(t){return Array.isArray(t)?super(...t):super(...k1(...arguments))}get r(){return this[0]}get g(){return this[1]}get b(){return this[2]}set r(t){this[0]=t}set g(t){this[1]=t}set b(t){this[2]=t}set(t){return Array.isArray(t)?this.copy(t):this.copy(k1(...arguments))}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this}}class V9 extends FH{constructor(t,{attributes:n={}}={}){Object.assign(n,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(t,n)}}const q9=`
attribute vec2 uv;
attribute vec2 position;

varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = vec4(position, 0.0, 1.0);
}
`,G9=`
precision highp float;

uniform float uTime;
uniform vec3 uColor;
uniform vec3 uResolution;
uniform vec2 uMouse;
uniform float uAmplitude;
uniform float uSpeed;

varying vec2 vUv;

void main() {
  float mr = min(uResolution.x, uResolution.y);
  vec2 uv = (vUv.xy * 2.0 - 1.0) * uResolution.xy / mr;

  uv += (uMouse - vec2(0.5)) * uAmplitude;

  float d = -uTime * 0.5 * uSpeed;
  float a = 0.0;
  for (float i = 0.0; i < 8.0; ++i) {
    a += cos(i - d - a * uv.x);
    d += sin(uv.y * i + a);
  }
  d += uTime * 0.5 * uSpeed;
  vec3 col = vec3(cos(uv * vec2(d, a)) * 0.6 + 0.4, cos(a + d) * 0.5 + 0.5);
  col = cos(col * cos(vec3(d, a, 2.5)) * 0.5 + 0.5) * uColor;
  gl_FragColor = vec4(col, 1.0);
}
`,oy=({color:e=[1,1,1],speed:t=1,amplitude:n=.1,mouseReact:r=!0,...s})=>{const i=g.useRef(null),a=g.useRef({x:.5,y:.5});return g.useEffect(()=>{const l=i.current;if(!l)return;let c=null;try{c=new VH}catch(E){console.warn("Iridescence background unavailable",E);return}const h=c.gl;h.clearColor(0,0,0,0);let f=0,m=null,v=null;const y=new V9(h),S=()=>{c==null||c.setSize(l.offsetWidth*1,l.offsetHeight*1),m&&(m.uniforms.uResolution.value=new ag(h.canvas.width,h.canvas.height,h.canvas.width/h.canvas.height))};window.addEventListener("resize",S),S(),m=new UH(h,{vertex:q9,fragment:G9,uniforms:{uTime:{value:0},uColor:{value:new ag(...e)},uResolution:{value:new ag(h.canvas.width,h.canvas.height,h.canvas.width/h.canvas.height)},uMouse:{value:new Float32Array([a.current.x,a.current.y])},uAmplitude:{value:n},uSpeed:{value:t}}}),v=new W9(h,{geometry:y,program:m});const w=E=>{f=requestAnimationFrame(w),!(!m||!c||!v)&&(m.uniforms.uTime.value=E*.001,c.render({scene:v}))};f=requestAnimationFrame(w),l.appendChild(h.canvas);const b=E=>{const _=l.getBoundingClientRect(),C=(E.clientX-_.left)/_.width,P=1-(E.clientY-_.top)/_.height;a.current={x:C,y:P},m&&(m.uniforms.uMouse.value[0]=C,m.uniforms.uMouse.value[1]=P)};return r&&l.addEventListener("mousemove",b),()=>{if(cancelAnimationFrame(f),window.removeEventListener("resize",S),r&&l.removeEventListener("mousemove",b),c){try{h.canvas.parentNode===l&&l.removeChild(h.canvas)}catch(E){console.warn("Failed to remove canvas",E)}c=null}}},[e,t,n,r]),d.jsx("div",{ref:i,className:"iridescence-container",...s})},Y9=["Harvard University","Stanford University","Massachusetts Institute of Technology","University of Cambridge","University of Oxford","Columbia University","University of California, Berkeley","University of Chicago","Princeton University","Yale University","University of Pennsylvania","California Institute of Technology","University of California, Los Angeles","Imperial College London","University College London","ETH Zrich","cole Polytechnique Fdrale de Lausanne","University of Toronto","McGill University","University of British Columbia","University of Melbourne","Australian National University","University of Sydney","University of New South Wales","National University of Singapore","Nanyang Technological University","Peking University","Tsinghua University","University of Tokyo","Kyoto University","Seoul National University","University of Hong Kong","University of Michigan","University of Washington","New York University","University of Illinois Urbana-Champaign","University of WisconsinMadison","University of Texas at Austin","Duke University","Johns Hopkins University","Cornell University","Carnegie Mellon University","Georgia Institute of Technology","University of Edinburgh","University of Manchester","University of Bristol","University of Glasgow","University of Warwick","University of Leeds","Trinity College Dublin","University of Copenhagen","University of Helsinki","University of Oslo","University of Stockholm","University of Amsterdam","Leiden University","University of Groningen","KU Leuven","Ghent University","Ludwig Maximilian University of Munich","Technical University of Munich","University of Heidelberg","University of Freiburg","University of Bonn","Sorbonne University","Universit PSL","cole Polytechnique","University of Barcelona","University of Madrid (Complutense)","University of Lisbon","University of Porto","University of So Paulo","Pontifical Catholic University of Chile","University of Buenos Aires","University of Cape Town","American University in Cairo","King Saud University","University of Zurich","University of Geneva","University of Bern","University of St. Gallen","University of Basel","University of Lausanne","University of Fribourg","University of Neuchtel"],Cj=(e,t=6)=>{const n=e.trim().toLowerCase();return n?Y9.filter(r=>r.toLowerCase().includes(n)).slice(0,t):[]},hf="profile-photos",Z9="student-ids",K9="selfies",kj=e=>{const t=e.name.split(".").pop();return`${typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(36).slice(2)}${t?`.${t}`:""}`},Pj=async(e,t)=>{const n=kj(t),r=`${e}/${Z9}/${n}`,{error:s}=await be.storage.from(hf).upload(r,t,{cacheControl:"3600",upsert:!0});if(s)throw new Error(s.message??"Failed to upload student ID.");const{data:i}=be.storage.from(hf).getPublicUrl(r);if(!(i!=null&&i.publicUrl))throw new Error("Unable to fetch uploaded student ID URL.");return i.publicUrl},Q9=async(e,t)=>{const n=kj(t),r=`${e}/${K9}/${n}`,{error:s}=await be.storage.from(hf).upload(r,t,{cacheControl:"3600",upsert:!0});if(s)throw new Error(s.message??"Failed to upload selfie.");const{data:i}=be.storage.from(hf).getPublicUrl(r);if(!(i!=null&&i.publicUrl))throw new Error("Unable to fetch uploaded selfie URL.");return i.publicUrl};var yp="Checkbox",[X9,HG]=Tn(yp),[J9,vx]=X9(yp);function e7(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:i,form:a,name:l,onCheckedChange:c,required:h,value:f="on",internal_do_not_use_render:m}=e,[v,y]=ti({prop:n,defaultProp:s??!1,onChange:c,caller:yp}),[S,w]=g.useState(null),[b,E]=g.useState(null),_=g.useRef(!1),C=S?!!a||!!S.closest("form"):!0,P={checked:v,disabled:i,setChecked:y,control:S,setControl:w,name:l,form:a,value:f,hasConsumerStoppedPropagationRef:_,required:h,defaultChecked:qi(s)?!1:s,isFormControl:C,bubbleInput:b,setBubbleInput:E};return d.jsx(J9,{scope:t,...P,children:t7(m)?m(P):r})}var Nj="CheckboxTrigger",Tj=g.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:i,value:a,disabled:l,checked:c,required:h,setControl:f,setChecked:m,hasConsumerStoppedPropagationRef:v,isFormControl:y,bubbleInput:S}=vx(Nj,e),w=ze(s,f),b=g.useRef(c);return g.useEffect(()=>{const E=i==null?void 0:i.form;if(E){const _=()=>m(b.current);return E.addEventListener("reset",_),()=>E.removeEventListener("reset",_)}},[i,m]),d.jsx(ke.button,{type:"button",role:"checkbox","aria-checked":qi(c)?"mixed":c,"aria-required":h,"data-state":Ij(c),"data-disabled":l?"":void 0,disabled:l,value:a,...r,ref:w,onKeyDown:le(t,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:le(n,E=>{m(_=>qi(_)?!0:!_),S&&y&&(v.current=E.isPropagationStopped(),v.current||E.stopPropagation())})})});Tj.displayName=Nj;var yx=g.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c,onCheckedChange:h,form:f,...m}=e;return d.jsx(e7,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:l,required:a,onCheckedChange:h,name:r,form:f,value:c,internal_do_not_use_render:({isFormControl:v})=>d.jsxs(d.Fragment,{children:[d.jsx(Tj,{...m,ref:t,__scopeCheckbox:n}),v&&d.jsx(Oj,{__scopeCheckbox:n})]})})});yx.displayName=yp;var jj="CheckboxIndicator",Rj=g.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,i=vx(jj,n);return d.jsx(Jt,{present:r||qi(i.checked)||i.checked===!0,children:d.jsx(ke.span,{"data-state":Ij(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});Rj.displayName=jj;var Mj="CheckboxBubbleInput",Oj=g.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:a,required:l,disabled:c,name:h,value:f,form:m,bubbleInput:v,setBubbleInput:y}=vx(Mj,e),S=ze(n,y),w=tx(i),b=S0(r);g.useEffect(()=>{const _=v;if(!_)return;const C=window.HTMLInputElement.prototype,T=Object.getOwnPropertyDescriptor(C,"checked").set,R=!s.current;if(w!==i&&T){const O=new Event("click",{bubbles:R});_.indeterminate=qi(i),T.call(_,qi(i)?!1:i),_.dispatchEvent(O)}},[v,w,i,s]);const E=g.useRef(qi(i)?!1:i);return d.jsx(ke.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??E.current,required:l,disabled:c,name:h,value:f,form:m,...t,tabIndex:-1,ref:S,style:{...t.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Oj.displayName=Mj;function t7(e){return typeof e=="function"}function qi(e){return e==="indeterminate"}function Ij(e){return qi(e)?"indeterminate":e?"checked":"unchecked"}const Aj=g.forwardRef(({className:e,...t},n)=>d.jsx(yx,{ref:n,className:Te("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:d.jsx(Rj,{className:Te("flex items-center justify-center text-current"),children:d.jsx(h0,{className:"h-4 w-4"})})}));Aj.displayName=yx.displayName;function n7(e,t){return g.useReducer((n,r)=>t[n][r]??n,e)}var xx="ScrollArea",[Lj,VG]=Tn(xx),[r7,Mr]=Lj(xx),Dj=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=e,[l,c]=g.useState(null),[h,f]=g.useState(null),[m,v]=g.useState(null),[y,S]=g.useState(null),[w,b]=g.useState(null),[E,_]=g.useState(0),[C,P]=g.useState(0),[T,R]=g.useState(!1),[O,A]=g.useState(!1),B=ze(t,Q=>c(Q)),q=zu(s);return d.jsx(r7,{scope:n,type:r,dir:q,scrollHideDelay:i,scrollArea:l,viewport:h,onViewportChange:f,content:m,onContentChange:v,scrollbarX:y,onScrollbarXChange:S,scrollbarXEnabled:T,onScrollbarXEnabledChange:R,scrollbarY:w,onScrollbarYChange:b,scrollbarYEnabled:O,onScrollbarYEnabledChange:A,onCornerWidthChange:_,onCornerHeightChange:P,children:d.jsx(ke.div,{dir:q,...a,ref:B,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":C+"px",...e.style}})})});Dj.displayName=xx;var Fj="ScrollAreaViewport",$j=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=e,a=Mr(Fj,n),l=g.useRef(null),c=ze(t,l,a.onViewportChange);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),d.jsx(ke.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:d.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});$j.displayName=Fj;var Ns="ScrollAreaScrollbar",wx=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Mr(Ns,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,l=e.orientation==="horizontal";return g.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),s.type==="hover"?d.jsx(s7,{...r,ref:t,forceMount:n}):s.type==="scroll"?d.jsx(i7,{...r,ref:t,forceMount:n}):s.type==="auto"?d.jsx(Uj,{...r,ref:t,forceMount:n}):s.type==="always"?d.jsx(_x,{...r,ref:t}):null});wx.displayName=Ns;var s7=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Mr(Ns,e.__scopeScrollArea),[i,a]=g.useState(!1);return g.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const h=()=>{window.clearTimeout(c),a(!0)},f=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),d.jsx(Jt,{present:n||i,children:d.jsx(Uj,{"data-state":i?"visible":"hidden",...r,ref:t})})}),i7=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Mr(Ns,e.__scopeScrollArea),i=e.orientation==="horizontal",a=wp(()=>c("SCROLL_END"),100),[l,c]=n7("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(l==="idle"){const h=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(h)}},[l,s.scrollHideDelay,c]),g.useEffect(()=>{const h=s.viewport,f=i?"scrollLeft":"scrollTop";if(h){let m=h[f];const v=()=>{const y=h[f];m!==y&&(c("SCROLL"),a()),m=y};return h.addEventListener("scroll",v),()=>h.removeEventListener("scroll",v)}},[s.viewport,i,c,a]),d.jsx(Jt,{present:n||l!=="hidden",children:d.jsx(_x,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:le(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:le(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Uj=g.forwardRef((e,t)=>{const n=Mr(Ns,e.__scopeScrollArea),{forceMount:r,...s}=e,[i,a]=g.useState(!1),l=e.orientation==="horizontal",c=wp(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?h:f)}},10);return wl(n.viewport,c),wl(n.content,c),d.jsx(Jt,{present:r||i,children:d.jsx(_x,{"data-state":i?"visible":"hidden",...s,ref:t})})}),_x=g.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=Mr(Ns,e.__scopeScrollArea),i=g.useRef(null),a=g.useRef(0),[l,c]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=Vj(l.viewport,l.content),f={...r,sizes:l,onSizesChange:c,hasThumb:h>0&&h<1,onThumbChange:v=>i.current=v,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:v=>a.current=v};function m(v,y){return d7(v,a.current,l,y)}return n==="horizontal"?d.jsx(o7,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const v=s.viewport.scrollLeft,y=P1(v,l,s.dir);i.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollLeft=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollLeft=m(v,s.dir))}}):n==="vertical"?d.jsx(a7,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const v=s.viewport.scrollTop,y=P1(v,l);i.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollTop=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollTop=m(v))}}):null}),o7=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=Mr(Ns,e.__scopeScrollArea),[a,l]=g.useState(),c=g.useRef(null),h=ze(t,c,i.onScrollbarXChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),d.jsx(Bj,{"data-orientation":"horizontal",...s,ref:h,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":xp(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(i.viewport){const v=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(v),Gj(v,m)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:pf(a.paddingLeft),paddingEnd:pf(a.paddingRight)}})}})}),a7=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=Mr(Ns,e.__scopeScrollArea),[a,l]=g.useState(),c=g.useRef(null),h=ze(t,c,i.onScrollbarYChange);return g.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),d.jsx(Bj,{"data-orientation":"vertical",...s,ref:h,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":xp(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(i.viewport){const v=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(v),Gj(v,m)&&f.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:pf(a.paddingTop),paddingEnd:pf(a.paddingBottom)}})}})}),[l7,zj]=Lj(Ns),Bj=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:h,onWheelScroll:f,onResize:m,...v}=e,y=Mr(Ns,n),[S,w]=g.useState(null),b=ze(t,B=>w(B)),E=g.useRef(null),_=g.useRef(""),C=y.viewport,P=r.content-r.viewport,T=Mt(f),R=Mt(c),O=wp(m,10);function A(B){if(E.current){const q=B.clientX-E.current.left,Q=B.clientY-E.current.top;h({x:q,y:Q})}}return g.useEffect(()=>{const B=q=>{const Q=q.target;(S==null?void 0:S.contains(Q))&&T(q,P)};return document.addEventListener("wheel",B,{passive:!1}),()=>document.removeEventListener("wheel",B,{passive:!1})},[C,S,P,T]),g.useEffect(R,[r,R]),wl(S,O),wl(y.content,O),d.jsx(l7,{scope:n,scrollbar:S,hasThumb:s,onThumbChange:Mt(i),onThumbPointerUp:Mt(a),onThumbPositionChange:R,onThumbPointerDown:Mt(l),children:d.jsx(ke.div,{...v,ref:b,style:{position:"absolute",...v.style},onPointerDown:le(e.onPointerDown,B=>{B.button===0&&(B.target.setPointerCapture(B.pointerId),E.current=S.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),A(B))}),onPointerMove:le(e.onPointerMove,A),onPointerUp:le(e.onPointerUp,B=>{const q=B.target;q.hasPointerCapture(B.pointerId)&&q.releasePointerCapture(B.pointerId),document.body.style.webkitUserSelect=_.current,y.viewport&&(y.viewport.style.scrollBehavior=""),E.current=null})})})}),ff="ScrollAreaThumb",Wj=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=zj(ff,e.__scopeScrollArea);return d.jsx(Jt,{present:n||s.hasThumb,children:d.jsx(c7,{ref:t,...r})})}),c7=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,i=Mr(ff,n),a=zj(ff,n),{onThumbPositionChange:l}=a,c=ze(t,m=>a.onThumbChange(m)),h=g.useRef(void 0),f=wp(()=>{h.current&&(h.current(),h.current=void 0)},100);return g.useEffect(()=>{const m=i.viewport;if(m){const v=()=>{if(f(),!h.current){const y=h7(m,l);h.current=y,l()}};return l(),m.addEventListener("scroll",v),()=>m.removeEventListener("scroll",v)}},[i.viewport,f,l]),d.jsx(ke.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:le(e.onPointerDownCapture,m=>{const y=m.target.getBoundingClientRect(),S=m.clientX-y.left,w=m.clientY-y.top;a.onThumbPointerDown({x:S,y:w})}),onPointerUp:le(e.onPointerUp,a.onThumbPointerUp)})});Wj.displayName=ff;var bx="ScrollAreaCorner",Hj=g.forwardRef((e,t)=>{const n=Mr(bx,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?d.jsx(u7,{...e,ref:t}):null});Hj.displayName=bx;var u7=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=Mr(bx,n),[i,a]=g.useState(0),[l,c]=g.useState(0),h=!!(i&&l);return wl(s.scrollbarX,()=>{var m;const f=((m=s.scrollbarX)==null?void 0:m.offsetHeight)||0;s.onCornerHeightChange(f),c(f)}),wl(s.scrollbarY,()=>{var m;const f=((m=s.scrollbarY)==null?void 0:m.offsetWidth)||0;s.onCornerWidthChange(f),a(f)}),h?d.jsx(ke.div,{...r,ref:t,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function pf(e){return e?parseInt(e,10):0}function Vj(e,t){const n=e/t;return isNaN(n)?0:n}function xp(e){const t=Vj(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function d7(e,t,n,r="ltr"){const s=xp(n),i=s/2,a=t||i,l=s-a,c=n.scrollbar.paddingStart+a,h=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,m=r==="ltr"?[0,f]:[f*-1,0];return qj([c,h],m)(e)}function P1(e,t,n="ltr"){const r=xp(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,a=t.content-t.viewport,l=i-r,c=n==="ltr"?[0,a]:[a*-1,0],h=Gv(e,c);return qj([0,a],[0,l])(h)}function qj(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Gj(e,t){return e>0&&e<t}var h7=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},a=n.left!==i.left,l=n.top!==i.top;(a||l)&&t(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function wp(e,t){const n=Mt(e),r=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),g.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function wl(e,t){const n=Mt(t);At(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var Yj=Dj,f7=$j,p7=Hj;const Sx=g.forwardRef(({className:e,children:t,...n},r)=>d.jsxs(Yj,{ref:r,className:Te("relative overflow-hidden",e),...n,children:[d.jsx(f7,{className:"h-full w-full rounded-[inherit]",children:t}),d.jsx(Zj,{}),d.jsx(p7,{})]}));Sx.displayName=Yj.displayName;const Zj=g.forwardRef(({className:e,orientation:t="vertical",...n},r)=>d.jsx(wx,{ref:r,orientation:t,className:Te("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:d.jsx(Wj,{className:"relative flex-1 rounded-full bg-border"})}));Zj.displayName=wx.displayName;const m7=`
Terms and Conditions for Couch-Share.com

Last updated: December 2025

Please read these terms and conditions carefully before using Couch-Share.com ("the Service"). By accessing or using the Service you agree to be bound by these Terms. If you disagree with any part of the Terms then you may not access the Service.

1. Overview
Couch-Share.com is an online platform that connects hosts and renters for temporary housing. Couch-Share.com acts solely as a neutral marketplace. Hosts and renters are independent parties and are solely responsible for the agreements they enter into and the experiences they provide or receive.

2. Eligibility
You must be at least 18 years old and legally able to enter into binding contracts to use Couch-Share.com. By registering you represent and warrant that the information you provide is accurate and truthful.

3. User Accounts
You must provide accurate, complete, and current information when creating your account. Your login credentials are personal and non-transferable. You are responsible for safeguarding your account and for any actions taken under your account. Couch-Share.com is not responsible for any loss or damage arising from unauthorized use of your credentials.

4. Listings and Reservations
Hosts are solely responsible for the accuracy of their listings, including availability, pricing, and applicable house rules. Renters are responsible for reviewing the listing details before submitting booking requests. By submitting a booking request the renter confirms they understand the price, dates, and house rules. Couch-Share.com does not guarantee that listings are accurate, safe, or suitable for any purpose.

5. Payments
All payments are processed by Stripe or another third-party payment provider. Couch-Share.com does not hold funds on behalf of users. Stripe processes the payment using the host's account and payouts are governed by Stripe's policies. Couch-Share.com is not responsible for payment failures or disputes. Refunds, cancellations, and disputes must be resolved directly between hosts and renters.

6. Identity Verification
Couch-Share.com requires users to upload identification and a selfie for verification purposes. However, Couch-Share.com makes no guarantees concerning the authenticity of documents provided by users. You are responsible for conducting your own due diligence and exercising caution when interacting with other users.

7. Conduct
Users agree not to:
 Violate any laws, rules, or regulations.
 Provide false or misleading information.
 Use the Service for any harmful or unlawful purpose.
 Discriminate against or harass other users.
 Damage property or engage in unsafe behavior during stays.

Couch-Share.com may suspend or terminate accounts that violate these Terms at its sole discretion.

8. Limitation of Liability
Couch-Share.com, including its owners, employees, and affiliates, is not liable for any direct, indirect, incidental, consequential, special, exemplary, or punitive damages arising from or relating to your use of the Service, including but not limited to personal injury, property damage, disputes between users, or legal claims. Couch-Share.com provides the platform "as is" without warranties of any kind.

9. Indemnification
You agree to indemnify and hold Couch-Share.com harmless from any claims, losses, liabilities, damages, costs, or expenses (including legal fees) arising from your use of the Service, your breach of these Terms, or your violation of any law or rights of a third party.

10. Dispute Resolution
Couch-Share.com is not a party to disputes between users. Hosts and renters must resolve disputes directly. Couch-Share.com may, at its sole discretion, facilitate communication between parties but has no obligation to mediate or resolve disputes.

11. Termination
We may terminate or suspend your account at any time, without prior notice or liability, for any reason whatsoever, including without limitation if you breach the Terms. Upon termination your right to use the Service will immediately cease.

12. Changes to Terms
We may modify these Terms at any time by posting an updated version on Couch-Share.com. Your continued use of the Service constitutes acceptance of the revised Terms.

13. Governing Law
These Terms are governed by the laws applicable to Couch-Share.com. Any legal action or proceeding arising under these Terms will be brought exclusively in the courts located in the jurisdiction of Couch-Share.com.

14. Contact Us
If you have any questions about these Terms, please contact Couch-Share.com using our support channels.`,g7=()=>{const[e,t]=g.useState(!1);return d.jsxs(fp,{open:e,onOpenChange:t,children:[d.jsx("button",{type:"button",className:"text-xs font-semibold underline",onClick:()=>t(!0),children:"View terms and conditions"}),d.jsxs(Bu,{className:"max-w-3xl",children:[d.jsx(Wu,{children:d.jsx(Hu,{children:"Terms & Conditions"})}),d.jsx(Sx,{className:"max-h-[60vh] rounded-md border p-4",children:d.jsx("pre",{className:"whitespace-pre-wrap text-sm leading-6 text-slate-700",children:m7})})]})]})},lg="focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-900/40",v7=`
  @keyframes auroraFloat {
    0% { transform: translate3d(0,0,0) scale(1); }
    50% { transform: translate3d(0,-18px,0) scale(1.05); }
    100% { transform: translate3d(0,0,0) scale(1); }
  }

  @keyframes softDrift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
`,y7=[{top:"10%",left:"5%",size:220,opacity:.35,delay:"0s"},{top:"60%",left:"70%",size:260,opacity:.25,delay:"-3s"},{top:"75%",left:"20%",size:180,opacity:.3,delay:"-5s"}],x7=[{value:"bsc",label:"Bachelor (BSc)"},{value:"msc",label:"Master (MSc)"},{value:"phd",label:"Doctorate (PhD)"},{value:"other",label:"Other program"}],w7=["1","2","3","4","5"],_7=()=>{const e=ts(),{toast:t}=ks(),{user:n,loading:r,signOut:s}=mx(),{refreshUser:i}=Rr(),[a,l]=g.useState("signin"),[c,h]=g.useState(""),[f,m]=g.useState(""),[v,y]=g.useState(""),[S,w]=g.useState("renter"),[b,E]=g.useState(null),[_,C]=g.useState(null),[P,T]=g.useState(!1),[R,O]=g.useState(""),[A,B]=g.useState(""),[q,Q]=g.useState(""),[W,z]=g.useState(""),[M,ee]=g.useState(null),[H,Z]=g.useState(null),[j,U]=g.useState(!1),Y=g.useMemo(()=>a==="signup"?Cj(R):[],[a,R]),se=g.useMemo(()=>a==="signin"?"Welcome back":"Create calm travel",[a]),te=async()=>{await s(),t({title:"Signed out"})},ue=async F=>{F.preventDefault(),T(!0),E(null),C(null);try{if(a==="signup"){if(f.length<6){C("Password must be at least 6 characters long."),T(!1);return}if(!M){C("Upload a photo of your government ID to continue."),T(!1);return}if(!H){C("Upload a selfie to continue."),T(!1);return}if(!j){C("Accept the terms and conditions to continue."),T(!1);return}const G=R.trim();if(!G){C("Add your university."),T(!1);return}const ne=A.trim();if(!ne){C("Enter your program name."),T(!1);return}if(!q){C("Select your program type."),T(!1);return}if(!W){C("Select your year in the program."),T(!1);return}const he=Number(W),Me=q;if(!Number.isFinite(he)||he<1||he>5){C("Choose a valid program year."),T(!1);return}const{data:Ee,error:je}=await be.auth.signUp({email:c,password:f,options:{data:{full_name:v,user_role:S}}});if(je)throw je;const pe=Ee.user;if(pe){const V=await Pj(pe.id,M),oe=await Q9(pe.id,H);await gx({id:pe.id,email:pe.email??c,full_name:v||null,user_role:S,avatar_url:oe,bio:null,student_id_url:V,university:G,program_name:ne,program_year:he,program_type:Me})}await i(),E("Account created and signed in."),t({title:"Welcome!",description:"Your account is ready."}),e("/listings",{replace:!0});return}const{error:J}=await be.auth.signInWithPassword({email:c,password:f});if(J)throw J;await i(),E("Signed in successfully."),t({title:"Signed in"}),e("/listings",{replace:!0})}catch(J){const G=J instanceof Error?J.message:"Authentication failed.";C(G)}finally{T(!1)}};return g.useEffect(()=>{!r&&n&&e("/listings",{replace:!0})},[r,n,e]),r?d.jsxs("div",{className:"relative min-h-screen flex items-center justify-center bg-gradient-to-br from-[#dbe8ff] to-white",children:[d.jsx(oy,{color:[1.2,1.35,1.5],mouseReact:!1,amplitude:.4,speed:1.2,className:"pointer-events-none"}),d.jsx("p",{className:"text-sm text-slate-500",children:"Loading session"})]}):d.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-[#cfdcff] via-[#e0eafe] to-[#c5d8ff] text-slate-900",children:[d.jsx("style",{children:v7}),d.jsx(oy,{color:[1.4,1.15,1.65],mouseReact:!0,amplitude:.4,speed:1.2,className:"pointer-events-none opacity-70 mix-blend-screen"}),d.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[d.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{background:"linear-gradient(130deg, rgba(147,197,253,0.35), rgba(219,234,254,0.45), rgba(191,219,254,0.35))",backgroundSize:"200% 200%",animation:"softDrift 36s ease-in-out infinite"}}),y7.map(F=>d.jsx("span",{className:"absolute rounded-full bg-gradient-to-br from-white/80 via-blue-50/70 to-blue-200/40",style:{top:F.top,left:F.left,width:F.size,height:F.size,opacity:F.opacity,animation:"auroraFloat 20s ease-in-out infinite",animationDelay:F.delay}},`${F.top}-${F.left}`))]}),d.jsx("main",{className:"relative z-10 mx-auto flex min-h-screen w-full max-w-3xl flex-col justify-center px-4 py-12 sm:px-6 lg:px-8",children:d.jsxs("section",{className:"relative rounded-[2rem] border border-white/60 bg-white/95 p-6 shadow-2xl backdrop-blur-xl",children:[d.jsxs("div",{className:"absolute -top-4 right-6 inline-flex items-center gap-2 rounded-full border border-blue-200/80 bg-blue-50/90 px-4 py-1 text-xs font-medium text-blue-600 shadow",children:[d.jsx(zA,{className:"h-3.5 w-3.5"})," Calm account flow"]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-500",children:se}),d.jsx(dx,{className:"text-3xl mt-1",children:a==="signin"?"Sign in":"Create account"}),d.jsx(hx,{className:"mt-1 text-sm",children:a==="signin"?"Enter your credentials to pick up where you left off.":"A few calm fields and you are in."})]}),d.jsx("div",{className:"flex gap-2",children:["signin","signup"].map(F=>d.jsx("button",{type:"button",onClick:()=>l(F),className:`rounded-full px-4 py-2 text-sm font-semibold transition ${a===F?"bg-slate-900 text-white shadow-lg":"border border-slate-200 text-slate-500 hover:border-slate-400"} ${lg}`,children:F==="signin"?"Sign in":"Sign up"},F))})]}),n?d.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-100 bg-slate-50/70 p-6",children:[d.jsxs("p",{className:"text-sm",children:["Signed in as ",d.jsx("span",{className:"font-semibold",children:n.email})]}),d.jsx(Le,{onClick:te,variant:"destructive",className:`w-full ${lg}`,children:"Sign out"})]}):d.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"email",children:"Email"}),d.jsx(ct,{id:"email",type:"email",value:c,onChange:F=>h(F.target.value),placeholder:"you@example.com",required:!0,className:"h-11 rounded-2xl border-slate-200 bg-white/80"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"password",children:"Password"}),d.jsx(ct,{id:"password",type:"password",value:f,onChange:F=>m(F.target.value),placeholder:"",required:!0,className:"h-11 rounded-2xl border-slate-200 bg-white/80"})]}),a==="signup"&&d.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-100 bg-blue-50/40 p-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"fullName",children:"Full name"}),d.jsx(ct,{id:"fullName",value:v,onChange:F=>y(F.target.value),placeholder:"Jane Doe",className:"h-11 rounded-2xl border-slate-200 bg-white"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{children:"User role"}),d.jsx(px,{value:S,onValueChange:F=>w(F),className:"flex gap-3 rounded-full bg-white/70 p-1",children:[{id:"role-renter",label:"Renter",value:"renter"},{id:"role-host",label:"Host",value:"host"}].map(F=>d.jsxs("div",{className:"flex flex-1 items-center justify-center",children:[d.jsx(uf,{value:F.value,id:F.id,className:"peer sr-only","aria-label":F.label}),d.jsx("label",{htmlFor:F.id,className:`w-full cursor-pointer rounded-full px-3 py-2 text-center text-sm font-medium transition ${S===F.value?"bg-slate-900 text-white":"text-slate-500"}`,children:F.label})]},F.value))})]}),d.jsxs("div",{className:"space-y-3 rounded-2xl border border-slate-100 bg-white/80 p-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Student verification"}),d.jsx("p",{className:"text-xs text-slate-500",children:"Every account must belong to an active student community."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"universitySignup",children:"University"}),d.jsx(ct,{id:"universitySignup",value:R,onChange:F=>O(F.target.value),placeholder:"Start typing your university",autoComplete:"off",className:"h-11 rounded-2xl border-slate-200 bg-white"}),(()=>{const F=R.trim();return!F||!Y.length||Y.some(G=>G.toLowerCase()===F.toLowerCase())&&Y.length===1?null:d.jsx("div",{className:"max-h-32 overflow-y-auto rounded-2xl border border-slate-200 bg-white",children:Y.map(G=>d.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-sm transition hover:bg-blue-50",onClick:()=>O(G),children:G},G))})})()]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"programNameSignup",children:"Program"}),d.jsx(ct,{id:"programNameSignup",value:A,onChange:F=>B(F.target.value),placeholder:"e.g. Computer Science",className:"h-11 rounded-2xl border-slate-200 bg-white"})]}),d.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{children:"Program type"}),d.jsxs(Ai,{value:q,onValueChange:F=>Q(F),children:[d.jsx(Gs,{className:"rounded-2xl border-slate-200 bg-white",children:d.jsx(Li,{placeholder:"Select type"})}),d.jsx(Ys,{children:x7.map(F=>d.jsx(qr,{value:F.value,children:F.label},F.value))})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{children:"Program year"}),d.jsxs(Ai,{value:W,onValueChange:F=>z(F),children:[d.jsx(Gs,{className:"rounded-2xl border-slate-200 bg-white",children:d.jsx(Li,{placeholder:"Select year"})}),d.jsx(Ys,{children:w7.map(F=>d.jsxs(qr,{value:F,children:["Year ",F]},F))})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"studentId",children:"Government-issued ID"}),d.jsx(ct,{id:"studentId",type:"file",accept:"image/*,.pdf",onChange:F=>{var J;return ee(((J=F.target.files)==null?void 0:J[0])??null)},className:"cursor-pointer rounded-2xl border-slate-200 bg-white"}),d.jsx("p",{className:"text-xs text-slate-500",children:"We only share this with adminsnever with other users."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"selfiePhoto",children:"Selfie"}),d.jsx(ct,{id:"selfiePhoto",type:"file",accept:"image/*",onChange:F=>{var J;return Z(((J=F.target.files)==null?void 0:J[0])??null)},className:"cursor-pointer rounded-2xl border-slate-200 bg-white"}),d.jsx("p",{className:"text-xs text-slate-500",children:"We use this to help hosts and renters verify your identity."})]})]})]}),a==="signup"&&d.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/80 p-4 text-xs text-slate-600 space-y-2",children:d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx(Aj,{id:"terms",checked:j,onCheckedChange:F=>U(!!F)}),d.jsxs("label",{htmlFor:"terms",className:"text-xs",children:["I agree to the ",d.jsx("span",{className:"font-semibold",children:"Couch-Share.com Terms & Conditions"}),"."," ",d.jsx(g7,{})]})]})}),d.jsx(Le,{type:"submit",className:`w-full rounded-full text-base ${lg}`,disabled:P,children:P?"Please wait":a==="signin"?"Sign in":"Create account"}),d.jsx("div",{className:"rounded-2xl border border-slate-100 bg-white/70 p-4 text-xs text-slate-500",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx($A,{className:"h-4 w-4"})," Encrypted authentication  No spam"]})}),b&&d.jsx("p",{className:"text-sm text-emerald-600 text-center",children:b}),_&&d.jsx("p",{className:"text-sm text-rose-500 text-center",children:_})]})]})]})})]})},b7=async()=>{try{const{error:e}=await be.from("notes").select("id",{count:"exact",head:!0});return e?`Supabase error: ${e.message}`:"Supabase connected & RLS OK"}catch(e){return`Supabase error: ${e instanceof Error?e.message:String(e)}`}},cg="focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-400/60",S7=[{title:"Student exclusive",copy:"Access for students only"},{title:"Security",copy:"Users, hosts are verified students"},{title:"Student prices",copy:"A break from housing crisis"}],E7=`
  @keyframes floatyOrb {
    0% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-18px) scale(1.08); }
    100% { transform: translateY(0) scale(1); }
  }

  @keyframes auroraPulse {
    0% { opacity: 0.25; filter: blur(36px); }
    50% { opacity: 0.6; filter: blur(46px); }
    100% { opacity: 0.25; filter: blur(36px); }
  }

  @keyframes backgroundDrift {
    0% {
      background-position: 0% 50%;
      transform: translate3d(0,0,0);
    }
    50% {
      background-position: 100% 50%;
      transform: translate3d(0,-8px,0);
    }
    100% {
      background-position: 0% 50%;
      transform: translate3d(0,0,0);
    }
  }
`,C7=[{top:"15%",left:"10%",size:"220px",opacity:.35,delay:"0s"},{top:"45%",left:"75%",size:"260px",opacity:.25,delay:"-4s"},{top:"70%",left:"20%",size:"180px",opacity:.3,delay:"-2s"},{top:"30%",left:"55%",size:"150px",opacity:.2,delay:"-6s"}],k7=()=>{const e=ts(),{user:t,loading:n}=Rr(),[r,s]=g.useState(null),[i,a]=g.useState(!0),l=!n,c=l&&!t;return g.useEffect(()=>{(async()=>{a(!0);const f=await b7();s(f),a(!1)})()},[]),d.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-[#cfdcff] via-[#dfe9ff] to-[#c5d8ff] text-slate-900",children:[d.jsx("style",{children:E7}),d.jsx(oy,{color:[1.4,1.18,1.65],mouseReact:!0,amplitude:.45,speed:1.4,className:"pointer-events-none opacity-80 mix-blend-screen"}),d.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[d.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{background:"linear-gradient(125deg, rgba(99,179,237,0.35), rgba(191,219,254,0.45), rgba(147,197,253,0.35))",backgroundSize:"200% 200%",animation:"backgroundDrift 45s ease-in-out infinite"}}),d.jsx("div",{className:"absolute inset-x-0 -top-32 h-72 bg-gradient-to-b from-[#7fb3ff]/40 via-transparent to-transparent blur-[80px]"}),d.jsx("div",{className:"absolute bottom-0 left-0 h-96 w-96 rounded-full bg-gradient-to-br from-[#60a5fa]/40 via-[#93c5fd]/30 to-transparent blur-[160px]"}),C7.map(h=>d.jsx("span",{className:"absolute rounded-full bg-gradient-to-br from-white/80 via-[#e0f2ff]/60 to-[#93c5fd]/40",style:{top:h.top,left:h.left,width:h.size,height:h.size,opacity:h.opacity,animation:"floatyOrb 18s ease-in-out infinite",animationDelay:h.delay}},`${h.top}-${h.left}`)),d.jsx("div",{className:"absolute top-1/3 right-10 h-48 w-48 rounded-full bg-gradient-to-br from-[#bfdbfe]/70 via-[#c7d2fe]/60 to-transparent",style:{animation:"auroraPulse 14s ease-in-out infinite"}})]}),d.jsx("header",{className:"relative z-10 border-b border-white/50 bg-gradient-to-r from-white/80 via-blue-50/70 to-white/80 backdrop-blur-2xl",children:d.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-5 flex flex-wrap items-center justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-slate-500",children:"COUCH-SHARING"}),d.jsx("p",{className:"text-sm text-slate-500",children:"Student-Student Exclusive"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[d.jsx("span",{className:"inline-flex h-2 w-2 rounded-full bg-emerald-400","aria-hidden":!0}),i?"Connecting to Supabase":r??"Supabase connected"]})]})}),d.jsx("main",{className:"relative z-10 px-4 sm:px-6 lg:px-8 py-16",children:d.jsxs("section",{className:"max-w-3xl mx-auto space-y-8 text-center",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.6em] text-slate-500",children:"Made in Switzerland"}),d.jsx("h1",{className:"text-4xl md:text-5xl font-semibold tracking-tight text-slate-900",children:"Housing built by students"}),d.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"Couch-share is a trusted, student-only platform where students help students find affordable places to stay  from couches and floor spots to entire rooms and apartments. Simple, safe, and made for student budgets."})]}),d.jsxs("div",{className:"rounded-[36px] border border-white/60 bg-gradient-to-br from-white/80 via-blue-50/70 to-white/70 px-12 py-8 text-left shadow-2xl backdrop-blur-2xl",children:[d.jsx("p",{className:"text-base uppercase tracking-[0.55em] text-slate-500",children:"What you get"}),d.jsx("ul",{className:"mt-4 space-y-4",children:S7.map(h=>d.jsxs("li",{className:"space-y-1 border-l border-blue-200/50 pl-4",children:[d.jsx("p",{className:"text-lg font-semibold text-slate-900",children:h.title}),d.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:h.copy})]},h.title))})]}),d.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[d.jsx(Le,{className:`rounded-full bg-gradient-to-r from-[#2563eb] via-[#3b82f6] to-[#6366f1] px-10 py-3 text-base font-semibold shadow-lg shadow-blue-500/30 transition hover:shadow-blue-500/50 ${cg}`,disabled:n,onClick:()=>e(t?"/dashboard":"/auth"),children:t?"Enter CouchStay":"Sign in"}),c&&d.jsxs(Le,{variant:"outline",className:`rounded-full border-blue-200/70 bg-white/70 px-8 py-3 text-base text-slate-600 shadow-inner shadow-blue-100 ${cg}`,onClick:()=>e("/auth"),children:["Create account ",d.jsx(DA,{className:"ml-2 h-4 w-4"})]}),d.jsx(Le,{variant:"ghost",className:`rounded-full text-base text-slate-600 ${cg}`,onClick:()=>e("/listings"),children:"Browse listings"})]}),!l&&d.jsx("p",{className:"text-xs text-slate-500",children:"Checking your account"})]})})]})};var Kj={exports:{}},P7="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",N7=P7,T7=N7;function Qj(){}function Xj(){}Xj.resetWarningCache=Qj;var j7=function(){function e(r,s,i,a,l,c){if(c!==T7){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Xj,resetWarningCache:Qj};return n.PropTypes=n,n};Kj.exports=j7();var R7=Kj.exports;const ht=xf(R7);function N1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function T1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?N1(Object(n),!0).forEach(function(r){Jj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uh(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?uh=function(t){return typeof t}:uh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uh(e)}function Jj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M7(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function O7(e,t){if(e==null)return{};var n=M7(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function eR(e,t){return I7(e)||A7(e,t)||L7(e,t)||D7()}function I7(e){if(Array.isArray(e))return e}function A7(e,t){var n=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(n!=null){var r=[],s=!0,i=!1,a,l;try{for(n=n.call(e);!(s=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));s=!0);}catch(c){i=!0,l=c}finally{try{!s&&n.return!=null&&n.return()}finally{if(i)throw l}}return r}}function L7(e,t){if(e){if(typeof e=="string")return j1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j1(e,t)}}function j1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var wn=function(t,n,r){var s=!!r,i=re.useRef(r);re.useEffect(function(){i.current=r},[r]),re.useEffect(function(){if(!s||!t)return function(){};var a=function(){i.current&&i.current.apply(i,arguments)};return t.on(n,a),function(){t.off(n,a)}},[s,n,t,i])},ay=function(t){var n=re.useRef(t);return re.useEffect(function(){n.current=t},[t]),n.current},_l=function(t){return t!==null&&uh(t)==="object"},F7=function(t){return _l(t)&&typeof t.then=="function"},$7=function(t){return _l(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},R1="[object Object]",U7=function e(t,n){if(!_l(t)||!_l(n))return t===n;var r=Array.isArray(t),s=Array.isArray(n);if(r!==s)return!1;var i=Object.prototype.toString.call(t)===R1,a=Object.prototype.toString.call(n)===R1;if(i!==a)return!1;if(!i&&!r)return t===n;var l=Object.keys(t),c=Object.keys(n);if(l.length!==c.length)return!1;for(var h={},f=0;f<l.length;f+=1)h[l[f]]=!0;for(var m=0;m<c.length;m+=1)h[c[m]]=!0;var v=Object.keys(h);if(v.length!==l.length)return!1;var y=t,S=n,w=function(E){return e(y[E],S[E])};return v.every(w)},tR=function(t,n,r){return _l(t)?Object.keys(t).reduce(function(s,i){var a=!_l(n)||!U7(t[i],n[i]);return r.includes(i)?(a&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),s):a?T1(T1({},s||{}),{},Jj({},i,t[i])):s},null):null},nR="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",M1=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nR;if(t===null||$7(t))return t;throw new Error(n)},z7=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nR;if(F7(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(s){return M1(s,n)})};var r=M1(t,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},B7=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"5.4.1"}),t.registerAppInfo({name:"react-stripe-js",version:"5.4.1",url:"https://stripe.com/docs/stripe-js/react"}))},_p=re.createContext(null);_p.displayName="ElementsContext";var rR=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t},sR=function(t){var n=t.stripe,r=t.options,s=t.children,i=re.useMemo(function(){return z7(n)},[n]),a=re.useState(function(){return{stripe:i.tag==="sync"?i.stripe:null,elements:i.tag==="sync"?i.stripe.elements(r):null}}),l=eR(a,2),c=l[0],h=l[1];re.useEffect(function(){var v=!0,y=function(w){h(function(b){return b.stripe?b:{stripe:w,elements:w.elements(r)}})};return i.tag==="async"&&!c.stripe?i.stripePromise.then(function(S){S&&v&&y(S)}):i.tag==="sync"&&!c.stripe&&y(i.stripe),function(){v=!1}},[i,c,r]);var f=ay(n);re.useEffect(function(){f!==null&&f!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[f,n]);var m=ay(r);return re.useEffect(function(){if(c.elements){var v=tR(r,m,["clientSecret","fonts"]);v&&c.elements.update(v)}},[r,m,c.elements]),re.useEffect(function(){B7(c.stripe)},[c.stripe]),re.createElement(_p.Provider,{value:c},s)};sR.propTypes={stripe:ht.any,options:ht.object};var W7=function(t){var n=re.useContext(_p);return rR(n,t)},H7=function(){var t=W7("calls useElements()"),n=t.elements;return n};ht.func.isRequired;var iR=re.createContext(null);iR.displayName="CheckoutContext";ht.any,ht.shape({clientSecret:ht.oneOfType([ht.string,ht.instanceOf(Promise)]).isRequired,elementsOptions:ht.object}).isRequired;var ly=function(t){var n=re.useContext(iR),r=re.useContext(_p);if(n){if(r)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return n}else return rR(r,t)},V7=["mode"],q7=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Gn=function(t,n){var r="".concat(q7(t),"Element"),s=function(c){var h=c.id,f=c.className,m=c.options,v=m===void 0?{}:m,y=c.onBlur,S=c.onFocus,w=c.onReady,b=c.onChange,E=c.onEscape,_=c.onClick,C=c.onLoadError,P=c.onLoaderStart,T=c.onNetworksChange,R=c.onConfirm,O=c.onCancel,A=c.onShippingAddressChange,B=c.onShippingRateChange,q=c.onSavedPaymentMethodRemove,Q=c.onSavedPaymentMethodUpdate,W=ly("mounts <".concat(r,">")),z="elements"in W?W.elements:null,M="checkoutState"in W?W.checkoutState:null,ee=(M==null?void 0:M.type)==="success"||(M==null?void 0:M.type)==="loading"?M.sdk:null,H=re.useState(null),Z=eR(H,2),j=Z[0],U=Z[1],Y=re.useRef(null),se=re.useRef(null);wn(j,"blur",y),wn(j,"focus",S),wn(j,"escape",E),wn(j,"click",_),wn(j,"loaderror",C),wn(j,"loaderstart",P),wn(j,"networkschange",T),wn(j,"confirm",R),wn(j,"cancel",O),wn(j,"shippingaddresschange",A),wn(j,"shippingratechange",B),wn(j,"savedpaymentmethodremove",q),wn(j,"savedpaymentmethodupdate",Q),wn(j,"change",b);var te;w&&(t==="expressCheckout"?te=w:te=function(){w(j)}),wn(j,"ready",te),re.useLayoutEffect(function(){if(Y.current===null&&se.current!==null&&(z||ee)){var F=null;if(ee)switch(t){case"paymentForm":F=ee.createPaymentFormElement();break;case"payment":F=ee.createPaymentElement(v);break;case"address":if("mode"in v){var J=v.mode,G=O7(v,V7);if(J==="shipping")F=ee.createShippingAddressElement(G);else if(J==="billing")F=ee.createBillingAddressElement(G);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":F=ee.createExpressCheckoutElement(v);break;case"currencySelector":F=ee.createCurrencySelectorElement();break;case"taxId":F=ee.createTaxIdElement(v);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else z&&(F=z.create(t,v));Y.current=F,U(F),F&&F.mount(se.current)}},[z,ee,v]);var ue=ay(v);return re.useEffect(function(){if(Y.current){var F=tR(v,ue,["paymentRequest"]);F&&"update"in Y.current&&Y.current.update(F)}},[v,ue]),re.useLayoutEffect(function(){return function(){if(Y.current&&typeof Y.current.destroy=="function")try{Y.current.destroy(),Y.current=null}catch{}}},[]),re.createElement("div",{id:h,className:f,ref:se})},i=function(c){ly("mounts <".concat(r,">"));var h=c.id,f=c.className;return re.createElement("div",{id:h,className:f})},a=n?i:s;return a.propTypes={id:ht.string,className:ht.string,onChange:ht.func,onBlur:ht.func,onFocus:ht.func,onReady:ht.func,onEscape:ht.func,onClick:ht.func,onLoadError:ht.func,onLoaderStart:ht.func,onNetworksChange:ht.func,onConfirm:ht.func,onCancel:ht.func,onShippingAddressChange:ht.func,onShippingRateChange:ht.func,onSavedPaymentMethodRemove:ht.func,onSavedPaymentMethodUpdate:ht.func,options:ht.object},a.displayName=r,a.__elementType=t,a},Yn=typeof window>"u",G7=re.createContext(null);G7.displayName="EmbeddedCheckoutProviderContext";var Y7=function(){var t=ly("calls useStripe()"),n=t.stripe;return n};Gn("auBankAccount",Yn);Gn("card",Yn);Gn("cardNumber",Yn);Gn("cardExpiry",Yn);Gn("cardCvc",Yn);Gn("iban",Yn);var Z7=Gn("payment",Yn);Gn("expressCheckout",Yn);Gn("paymentRequestButton",Yn);Gn("linkAuthentication",Yn);Gn("address",Yn);Gn("shippingAddress",Yn);Gn("paymentMethodMessaging",Yn);Gn("taxId",Yn);var oR="clover",K7=function(t){return t===3?"v3":t},aR="https://js.stripe.com",Q7="".concat(aR,"/").concat(oR,"/stripe.js"),X7=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,J7=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,O1="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",eV=function(t){return X7.test(t)||J7.test(t)},tV=function(){for(var t=document.querySelectorAll('script[src^="'.concat(aR,'"]')),n=0;n<t.length;n++){var r=t[n];if(eV(r.src))return r}return null},I1=function(t){var n="",r=document.createElement("script");r.src="".concat(Q7).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},nV=function(t,n){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"8.5.3",startTime:n})},hc=null,zd=null,Bd=null,rV=function(t){return function(n){t(new Error("Failed to load Stripe.js",{cause:n}))}},sV=function(t,n){return function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))}},iV=function(t){return hc!==null?hc:(hc=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&t&&console.warn(O1),window.Stripe){n(window.Stripe);return}try{var s=tV();if(s&&t)console.warn(O1);else if(!s)s=I1(t);else if(s&&Bd!==null&&zd!==null){var i;s.removeEventListener("load",Bd),s.removeEventListener("error",zd),(i=s.parentNode)===null||i===void 0||i.removeChild(s),s=I1(t)}Bd=sV(n,r),zd=rV(r),s.addEventListener("load",Bd),s.addEventListener("error",zd)}catch(a){r(a);return}}),hc.catch(function(n){return hc=null,Promise.reject(n)}))},oV=function(t,n,r){if(t===null)return null;var s=n[0],i=s.match(/^pk_test/),a=K7(t.version),l=oR;i&&a!==l&&console.warn("Stripe.js@".concat(a," was loaded on the page, but @stripe/stripe-js@").concat("8.5.3"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=t.apply(void 0,n);return nV(c,r),c},fc,lR=!1,cR=function(){return fc||(fc=iV(null).catch(function(t){return fc=null,Promise.reject(t)}),fc)};Promise.resolve().then(function(){return cR()}).catch(function(e){lR||console.warn(e)});var aV=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];lR=!0;var s=Date.now();return cR().then(function(i){return oV(i,n,s)})};const uR="pk_test_51SbObe1iaTLobM1h9AqE3AcfCfUEPeJvWO7ZreHNy6DIDXLDZMEF17qlduSZAzNouH393aUJQy9aU0Plix7p24a900ijJeqax6";let ug=null;const lV=()=>typeof window>"u"?null:(ug||(ug=aV(uR)),ug),cV=!!uR,uV=({amountLabel:e,paymentDueLabel:t,onPaymentSuccess:n})=>{const r=Y7(),s=H7(),[i,a]=g.useState(!1),[l,c]=g.useState(null),h=async f=>{var v;if(f.preventDefault(),!r||!s)return;a(!0),c(null);const m=typeof window<"u"?`${window.location.origin}/renter-dashboard`:void 0;try{const y=await r.confirmPayment({elements:s,confirmParams:m?{return_url:m}:void 0,redirect:"if_required"});y.error?c(y.error.message??"The payment could not be completed."):((v=y.paymentIntent)==null?void 0:v.status)==="succeeded"?(c("Payment successful! You're all set."),await(n==null?void 0:n())):c("Your payment is processing. We'll update you shortly.")}catch(y){const S=y instanceof Error?y.message:"Unexpected issue while confirming the payment.";c(S)}finally{a(!1)}};return d.jsxs("form",{onSubmit:h,className:"space-y-4",children:[d.jsxs("div",{className:"rounded-md border border-dashed border-muted-foreground/40 bg-muted/20 p-3 text-sm text-muted-foreground",children:[d.jsxs("p",{className:"font-semibold text-sketch-dark text-base text-left",children:["Total due: ",e]}),t&&d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Pay before ",t," to keep your approved stay."]})]}),d.jsx(Z7,{options:{layout:"tabs"}}),d.jsx(Le,{type:"submit",className:"w-full",disabled:!r||i,children:i?"Processing":`Pay ${e}`}),l&&d.jsx("p",{className:"text-sm text-muted-foreground text-center",children:l})]})},dR=({open:e,onOpenChange:t,booking:n,clientSecret:r,amountLabel:s,paymentDueAt:i,onPaymentSuccess:a})=>{const l=lV(),c=g.useMemo(()=>{if(!i)return null;const y=new Date(i);return Number.isNaN(y.getTime())?null:rt(y,"MMM d, yyyy HH:mm")},[i]),h=!!(e&&n&&r&&l),f=n?`Pay ${n.couchTitle??"for your stay"}`:"Complete payment";let m=null;cV?e&&!r&&(m="We couldn't create a payment session. Close this window and try again."):m="Stripe is not configured in this environment. Add VITE_STRIPE_PUBLISHABLE_KEY to your environment variables.";const v=h?{clientSecret:r,appearance:{theme:"stripe",labels:"floating"}}:void 0;return d.jsx(fp,{open:e,onOpenChange:y=>{t(y)},children:d.jsxs(Bu,{className:"max-w-md",children:[d.jsxs(Wu,{children:[d.jsx(Hu,{children:f}),d.jsx(pp,{children:"Complete payment to confirm your approved stay. We only charge after the host accepts your request."})]}),!h||m?d.jsx("div",{className:"rounded-md border border-dashed border-muted-foreground/40 bg-muted/30 p-4 text-sm text-muted-foreground",children:m??"Preparing checkout"}):d.jsx(sR,{stripe:l,options:v,children:d.jsx(uV,{amountLabel:s,paymentDueLabel:c,onPaymentSuccess:a})},r)]})})},hR=async e=>{if(!e.bookingId)throw new Error("Booking request is missing");const t=Number(e.amount);if(!Number.isFinite(t)||t<=0)throw new Error("A positive payment amount is required");const{data:n,error:r}=await be.functions.invoke("create-payment-intent",{body:{bookingId:e.bookingId,amount:t,renterEmail:e.renterEmail??void 0}});if(r)throw r;if(!(n!=null&&n.clientSecret))throw new Error("We couldn't start checkout. Please try again.");return n},dg="CHF",dV=e=>{if(!e)return null;const t=e.trim();if(!t)return null;const n=t.replace(/[^0-9.,-]/g,"");if(!n)return null;const r=n.includes(","),s=n.includes(".");let i=n;r&&s?i=i.replace(/,/g,""):r&&!s&&(i=i.replace(/,/g,"."));const a=Number(i);return!Number.isFinite(a)||a<=0?null:a},hV=e=>{if(!e)return dg;const t=e.trim();if(!t)return dg;const n=t.match(/^[^0-9-]+/),r=n?n[0].trim():"";return r||(t.startsWith("$")?"$":dg)},fV=(e,t)=>{const n=hV(e),r=/[A-Za-z]/.test(n)&&n.length>1;return`${n?`${n}${r?" ":""}`:""}${t.toFixed(2)}`},mf=(e,t)=>{const n=dV(e);if(!n)return null;const r=typeof t=="number"?t:Number(t??0),s=Math.max(1,Number.isFinite(r)?r:1),i=n*s;return{nightlyRate:n,nights:s,totalDue:i,amountLabel:fV(e,i)}},pV=(e,t)=>{const n={text:e??"",senderRole:"renter",senderName:t.renterName??t.hostName??null,senderId:null,hostName:t.hostName??null,hostEmail:null,renterName:t.renterName??null,renterEmail:null};if(!e)return{...n,rawBody:""};try{const r=JSON.parse(e);if(typeof r!="object"||r===null)return{...n,rawBody:e};const s=typeof r.text=="string"?r.text:n.text,i=r.senderRole==="host"?"host":"renter",a=typeof r.senderName=="string"?r.senderName:n.senderName,l=typeof r.senderId=="string"?r.senderId:null,c=typeof r.hostName=="string"?r.hostName:n.hostName,h=typeof r.hostEmail=="string"?r.hostEmail:null,f=typeof r.renterName=="string"?r.renterName:n.renterName,m=typeof r.renterEmail=="string"?r.renterEmail:null;return{text:s,senderRole:i,senderName:a,senderId:l,hostName:c,hostEmail:h,renterName:f,renterEmail:m,rawBody:e}}catch{return{...n,rawBody:e}}},Ex=e=>{const t=pV(e.body,{hostName:e.host_name,renterName:e.renter_name});return{id:e.id,couchId:e.couch_id,hostId:e.host_id,hostName:t.hostName,hostEmail:t.hostEmail,renterId:e.renter_id,renterName:t.renterName,renterEmail:t.renterEmail,text:t.text,rawBody:t.rawBody??e.body??"",senderRole:t.senderRole,senderName:t.senderName,senderId:t.senderId,sentAt:e.sent_at??e.created_at??new Date().toISOString()}},dh=e=>e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)?e:null,mV=e=>{if(!e)return[];const t=new Set;return e.forEach(n=>{if(!n)return;const r=n.trim();r&&t.add(r)}),Array.from(t)},gV=e=>e.replace(/[%_]/g,t=>`\\${t}`).replace(/,/g,"\\,"),fR=async e=>{var c;const t=e.senderRole??"renter",n=e.senderName??(t==="host"?e.hostEmail??e.hostName:e.renterName),r=dh(e.senderId),s={version:1,text:e.body,senderRole:t,senderName:n,senderId:r,hostName:e.hostEmail??e.hostName,hostEmail:e.hostEmail??null,renterName:e.renterName,renterEmail:e.renterEmail??((c=e.renterName)!=null&&c.includes("@")?e.renterName:null)},i={couch_id:e.couchId,host_id:dh(e.hostId),host_name:e.hostEmail??e.hostName,renter_id:dh(e.renterId),renter_name:e.renterName,body:JSON.stringify(s),sent_at:e.sentAt??new Date().toISOString()},{data:a,error:l}=await be.from("messages").insert(i).select().single();if(l)throw l;return Ex(a)},pR=async(e,t)=>{const n=dh(e),r=mV(t),s=[];if(n&&s.push(`renter_id.eq.${n}`),r.forEach(c=>{s.push(`renter_name.ilike.%${gV(c)}%`)}),s.length===0)return[];let i=be.from("messages").select("*").order("sent_at",{ascending:!0});s.length===1&&s[0].startsWith("renter_id.eq.")?i=i.eq("renter_id",n):i=i.or(s.join(","));const{data:a,error:l}=await i;if(l)throw l;return(a??[]).map(Ex)},vV=({open:e,onOpenChange:t,thread:n,currentUserRole:r,onSendMessage:s,sending:i=!1})=>{const[a,l]=g.useState(""),c=g.useMemo(()=>n?[...n.messages].sort((m,v)=>new Date(m.sentAt).getTime()-new Date(v.sentAt).getTime()):[],[n]),h=async()=>{a.trim()&&(await s(a.trim()),l(""))},f=g.useMemo(()=>n?`Chat with ${r==="host"?n.renterName??"Guest":n.hostName??"Host"}`:"Conversation",[n,r]);return d.jsx(fp,{open:e,onOpenChange:m=>{l(""),t(m)},children:d.jsxs(Bu,{className:"max-w-lg",children:[d.jsxs(Wu,{children:[d.jsx(Hu,{children:f}),(n==null?void 0:n.couchId)&&d.jsxs(pp,{className:"text-xs text-muted-foreground",children:["Couch reference: ",n.couchId]})]}),d.jsx(Sx,{className:"max-h-80 rounded-md border border-sketch p-3 bg-background/50",children:d.jsxs("div",{className:"space-y-3",children:[c.map(m=>{const v=m.senderRole===r;return d.jsxs("div",{className:`flex flex-col ${v?"items-end":"items-start"}`,children:[d.jsx("div",{className:`max-w-[85%] rounded-lg px-3 py-2 text-sm shadow-sm ${v?"bg-sketch-blue text-white":"bg-muted"}`,children:d.jsx("p",{className:"whitespace-pre-line leading-relaxed",children:m.text})}),d.jsxs("span",{className:"mt-1 text-[10px] uppercase tracking-wide text-muted-foreground",children:[v?"You":m.senderName??(v?"You":"Partner")," "," ",rt(new Date(m.sentAt),"MMM d, yyyy HH:mm")]})]},m.id)}),!c.length&&d.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Start the conversation by sending a message."})]})}),d.jsxs(lx,{className:"flex flex-col gap-3 sm:flex-col",children:[d.jsx(Ml,{value:a,onChange:m=>l(m.target.value),placeholder:"Type your message...",rows:3}),d.jsx(Le,{onClick:h,disabled:i||!a.trim(),children:i?"Sending...":"Send message"})]})]})})},yV=({queryKey:e,matcher:t})=>{const n=jl(),r=JSON.stringify(e);g.useEffect(()=>{const s=`messages-${r}-${Math.random().toString(36).slice(2)}`,i=be.channel(s),a=l=>{const c=l.new;if(!c)return;const h=Ex(c);t(h)&&n.invalidateQueries({queryKey:e})};return i.on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},a).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages"},a).subscribe(),()=>{be.removeChannel(i)}},[r,t,n,e])},cy=({queryKey:e,matcher:t})=>{const n=jl(),r=JSON.stringify(e);g.useEffect(()=>{const s=`booking-requests-${r}-${Math.random().toString(36).slice(2)}`,i=be.channel(s),a=l=>{if(!l.new)return;const c=Dl(l.new);t(c)&&n.invalidateQueries({queryKey:e})};return i.on("postgres_changes",{event:"INSERT",schema:"public",table:"booking_requests"},a).on("postgres_changes",{event:"UPDATE",schema:"public",table:"booking_requests"},a).subscribe(),()=>{be.removeChannel(i)}},[r,t,n,e])},xV=()=>{const{profile:e}=Rr(),t=ts(),n=jl(),{toast:r}=ks(),s=(e==null?void 0:e.id)??null,i=g.useMemo(()=>{const z=new Set,M=ee=>{if(!ee)return;const H=ee.trim();H&&z.add(H)};return M(e==null?void 0:e.full_name),e!=null&&e.full_name&&M(e.full_name.split(" ")[0]),M(e==null?void 0:e.email),e!=null&&e.email&&M(e.email.split("@")[0]),Array.from(z)},[e==null?void 0:e.full_name,e==null?void 0:e.email]),a=i.join("|"),l=g.useMemo(()=>i.map(z=>z.toLowerCase()),[i]),c=g.useCallback(z=>{const M=s&&z.renterId&&z.renterId===s,ee=(z.renterName??"").toLowerCase(),H=(z.renterEmail??"").toLowerCase(),Z=l.some(j=>ee.includes(j)||H.includes(j));return!!(M||Z)},[s,l]),h=g.useCallback(z=>{const M=s&&z.renterId&&z.renterId===s,ee=(z.renterName??"").toLowerCase(),H=l.some(Z=>ee.includes(Z));return!!(M||H)},[s,l]),f=Oc({queryKey:["booking-requests",s,a],queryFn:()=>mp(s,i),enabled:!!(s||i.length)}),m=Oc({queryKey:["messages",s,a],queryFn:()=>pR(s,i),enabled:!!(s||i.length)});yV({queryKey:["messages",s,a],matcher:c}),cy({queryKey:["booking-requests",s,a],matcher:h});const[v,y]=g.useState(null),[S,w]=g.useState(!1),[b,E]=g.useState(!1),[_,C]=g.useState({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null}),P=Ic({mutationFn:async({thread:z,text:M})=>{const ee=z.hostName??"Host",H=(e==null?void 0:e.full_name)??(e==null?void 0:e.email)??z.renterName??"You";await fR({couchId:z.couchId??`thread-${z.threadKey}`,hostId:z.hostId,hostName:ee,hostEmail:z.hostEmail??null,renterId:e==null?void 0:e.id,renterName:H,renterEmail:(e==null?void 0:e.email)??null,body:M,senderRole:"renter",senderId:e==null?void 0:e.id,senderName:H})},onSuccess:()=>{n.invalidateQueries({queryKey:["messages",s,a]})},onError:z=>{console.error("Failed to send message",z),r({title:"Unable to send",description:"We couldn't deliver your message. Please try again.",variant:"destructive"})}}),T=Ic({mutationFn:async({request:z,summary:M})=>{if(z.paymentStatus==="paid")throw new Error("This stay has already been paid for.");return z.paymentClientSecret&&z.paymentStatus!=="expired"?{clientSecret:z.paymentClientSecret,paymentDue:z.paymentDueAt??void 0}:hR({bookingId:z.id,amount:M.totalDue,renterEmail:(e==null?void 0:e.email)??null})},onSuccess:(z,M)=>{C({booking:M.request,clientSecret:z.clientSecret,amountLabel:M.summary.amountLabel,paymentDueAt:z.paymentDue??M.request.paymentDueAt??null}),E(!0),n.invalidateQueries({queryKey:["booking-requests",s,a]})},onError:z=>{const M=z instanceof Error?z.message:"We couldn't start checkout.";r({title:"Payment unavailable",description:M,variant:"destructive"})}}),R=g.useMemo(()=>f.data??[],[f.data]),O=g.useMemo(()=>m.data??[],[m.data]),A=g.useMemo(()=>{const z=new Map;return O.forEach(M=>{const ee=M.hostName??"Host",H=M.renterName??(e==null?void 0:e.full_name)??"You",j=[M.couchId??"general",ee??"host",H??"you"].join("::"),U=z.get(j);U?U.messages.push(M):z.set(j,{threadKey:j,couchId:M.couchId,hostId:M.hostId,hostName:ee,hostEmail:M.hostEmail,renterId:(e==null?void 0:e.id)??M.renterId,renterName:H,renterEmail:M.renterEmail??(e==null?void 0:e.email)??null,messages:[M]})}),Array.from(z.values()).sort((M,ee)=>{const H=M.messages[M.messages.length-1],Z=ee.messages[ee.messages.length-1];return new Date(Z.sentAt).getTime()-new Date(H.sentAt).getTime()})},[O,e==null?void 0:e.full_name,e==null?void 0:e.email,e==null?void 0:e.id]),B=z=>{y(z),w(!0)},q=async z=>{v&&await P.mutateAsync({thread:v,text:z})},Q=g.useCallback(z=>{if(z.status!=="approved"){r({title:"Host approval pending",description:"Your host needs to approve the stay before you can pay."});return}if(z.paymentStatus==="paid"){r({title:"Already paid",description:"Thanks! We've already received payment for this stay."});return}if(z.paymentStatus==="expired"){r({title:"Payment window expired",description:"Ask your host to re-approve the booking to reopen payment.",variant:"destructive"});return}const M=mf(z.pricePerNight??null,z.nights);if(!M){r({title:"Payment unavailable",description:"We couldn't calculate the total for this stay yet. Please check with your host.",variant:"destructive"});return}T.mutate({request:z,summary:M})},[T,r]),W=(z,M)=>{const ee=z?new Date(z):null;return!ee||Number.isNaN(ee.getTime())?"Unknown date":rt(ee,M)};return d.jsxs("main",{className:"dreamy-bg min-h-screen px-4 py-6",children:[d.jsxs("header",{className:"mb-8 flex items-center justify-between gap-3",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-sketch-dark",children:"Your dashboard"}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"Track booking status and keep conversations going with hosts."})]}),d.jsx("div",{className:"flex gap-2",children:d.jsx(Le,{variant:"outline",size:"sm",onClick:()=>t("/listings"),children:"Back to listings"})})]}),!s&&d.jsx("div",{className:"sketch-card p-4 text-center text-sm text-muted-foreground",children:"Sign in as a renter to view your requests and messages."}),s&&d.jsxs("div",{className:"space-y-6",children:[d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-sketch-dark",children:"Booking requests"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending stays you've requested from hosts."})]}),f.isLoading&&d.jsx("div",{className:"sketch-card p-4 text-sm text-muted-foreground",children:"Loading your booking requests..."}),f.isError&&d.jsx("div",{className:"sketch-card p-4 text-sm text-destructive",children:"Unable to load booking requests right now. Please refresh the page."}),!f.isLoading&&!f.isError&&R.length===0&&d.jsx("div",{className:"sketch-card p-4 text-sm text-muted-foreground",children:"You haven't sent any booking requests yet."}),!f.isLoading&&!f.isError&&R.length>0&&d.jsx("div",{className:"space-y-3",children:R.map(z=>{var se;const M=mf(z.pricePerNight??null,z.nights),ee=z.paymentDueAt?W(z.paymentDueAt,"MMM d, yyyy HH:mm"):null,H=z.paymentStatus,Z=T.isPending&&((se=T.variables)==null?void 0:se.request.id)===z.id,j=H==="paid",U=z.status==="approved"&&!j,Y=H==="paid"?"Payment received. You're all set!":H==="failed"?"Your last payment attempt failed. Try again when you're ready.":H==="pending"?ee?`Finish payment by ${ee} to keep this reservation.`:"Finish payment to confirm your stay.":H==="expired"?"Payment window expired. Ask your host to reopen it.":"Complete payment to confirm your approved stay.";return d.jsxs("div",{className:"sketch-card p-4 grid gap-2",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-base font-semibold text-sketch-dark",children:z.couchTitle??"Couch request"}),d.jsx("span",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:z.status})]}),d.jsx("p",{className:"text-sm text-muted-foreground",children:z.hostName?`Host: ${z.hostName}`:"Host details pending"}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[W(z.stayStart,"MMM d, yyyy"),"  ",W(z.stayEnd,"MMM d, yyyy"),"  ",z.nights??"?"," night",z.nights===1?"":"s"]}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Requested on ",W(z.createdAt,"MMM d, yyyy")]}),(U||j)&&d.jsxs("div",{className:"rounded-xl border border-emerald-200/70 bg-emerald-50/40 p-4 space-y-3",children:[d.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-semibold text-emerald-900",children:j?"Payment complete":"Payment required"}),d.jsx("p",{className:"text-xs text-emerald-800",children:Y}),j&&d.jsxs("p",{className:"text-xs font-medium text-emerald-900",children:["Reserved for ",W(z.stayStart,"MMM d, yyyy"),"  Arrival ",W(z.stayStart,"HH:mm")]})]}),M&&d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-base font-semibold text-emerald-900",children:M.amountLabel}),d.jsxs("p",{className:"text-xs text-emerald-800",children:[M.nights," night",M.nights===1?"":"s"," at ",z.pricePerNight??""]})]})]}),U&&M&&d.jsx("div",{className:"flex flex-wrap gap-2",children:d.jsx(Le,{size:"sm",className:"rounded-full",disabled:Z,onClick:()=>Q(z),children:Z?"Preparing checkout":"Pay now"})}),!M&&d.jsx("p",{className:"text-xs text-emerald-800",children:"The host hasn't set a nightly rate yet, so we can't calculate the total."}),H==="expired"&&d.jsx("p",{className:"text-xs text-rose-700",children:"Payment window expired. Ask the host to re-approve the request to try again."}),H==="failed"&&d.jsx("p",{className:"text-xs text-rose-700",children:"Payment failed. Double-check your card or try another method."})]})]},z.id)})})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-sketch-dark",children:"Conversations"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Chat with hosts in real time."})]}),m.isLoading&&d.jsx("div",{className:"sketch-card p-4 text-sm text-muted-foreground",children:"Loading your messages..."}),m.isError&&d.jsx("div",{className:"sketch-card p-4 text-sm text-destructive",children:"Unable to load your messages right now. Please refresh the page."}),!m.isLoading&&!m.isError&&A.length===0&&d.jsx("div",{className:"sketch-card p-4 text-sm text-muted-foreground",children:"Send a note from a couch detail page to start a conversation."}),!m.isLoading&&!m.isError&&A.length>0&&d.jsx("div",{className:"space-y-3",children:A.map(z=>{const M=z.messages[z.messages.length-1],ee=M.senderRole==="renter"?"You:":`${z.hostName??"Host"}:`;return d.jsx("button",{onClick:()=>B(z),className:"w-full text-left sketch-card p-4 hover:bg-sketch-light transition",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-sketch-dark text-sm",children:z.hostName??"Host"}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:[ee," ",M.text]})]}),d.jsx("span",{className:"text-xs text-muted-foreground",children:rt(new Date(M.sentAt),"MMM d, HH:mm")})]})},z.threadKey)})})]})]}),d.jsx(vV,{open:S,onOpenChange:z=>{w(z),z||y(null)},thread:v,currentUserRole:"renter",onSendMessage:q,sending:P.isPending}),d.jsx(dR,{open:b,onOpenChange:z=>{E(z),z||C({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null})},booking:_.booking,clientSecret:_.clientSecret,amountLabel:_.amountLabel,paymentDueAt:_.paymentDueAt,onPaymentSuccess:async()=>{var M;const z=(M=_.booking)==null?void 0:M.id;if(z){const ee=H=>Array.isArray(H)?H.map(Z=>Z.id===z?{...Z,paymentStatus:"paid",status:"approved"}:Z):H;n.setQueryData(["booking-requests",s,a],ee),n.setQueryData(["host-manage-renter",s,a],ee)}r({title:"Payment successful",description:"Your stay is confirmedcheck your email for the receipt."}),E(!1),C({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null})}})]})},wV=[{value:"bsc",label:"Bachelor (BSc)"},{value:"msc",label:"Master (MSc)"},{value:"phd",label:"Doctorate (PhD)"},{value:"other",label:"Other program"}],_V={bsc:"Bachelor (BSc)",msc:"Master (MSc)",phd:"Doctorate (PhD)",other:"Other program"},bV=["1","2","3","4","5"],A1="couch-photos",SV=e=>{const t=e.name.split(".").pop();return`${typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(36).slice(2)}${t?`.${t}`:""}`},EV=async(e,t)=>{const n=SV(t),r=`avatars/${e}/${n}`,{error:s}=await be.storage.from(A1).upload(r,t,{cacheControl:"3600",upsert:!0});if(s)throw new Error(s.message??"Failed to upload profile photo.");const{data:i}=be.storage.from(A1).getPublicUrl(r);if(!(i!=null&&i.publicUrl))throw new Error("Unable to fetch uploaded profile photo URL.");return i.publicUrl},CV=()=>{var U,Y,se,te,ue;const{profile:e,refreshUser:t}=Rr(),n=ts(),{toast:r}=ks(),[s,i]=g.useState({fullName:"",userRole:"renter",avatarUrl:"",bio:"",university:"",programName:"",programYear:"",programType:"",studentIdUrl:"",payoutAccountHolder:"",payoutAccountNumber:"",payoutBankName:"",payoutBankCountry:""}),[a,l]=g.useState(!0),[c,h]=g.useState(!1),[f,m]=g.useState(null),[v,y]=g.useState(null),[S,w]=g.useState(""),b=g.useRef(null),E=(e==null?void 0:e.email)??"",_=!!(e!=null&&e.user_role);g.useEffect(()=>{(async()=>{if(!(e!=null&&e.id)){l(!1);return}try{const J=await wj(e.id).catch(()=>null),G=(J==null?void 0:J.program_year)??e.program_year??null,ne={fullName:(J==null?void 0:J.full_name)??e.full_name??"",userRole:(J==null?void 0:J.user_role)??e.user_role??"renter",avatarUrl:(J==null?void 0:J.avatar_url)??e.avatar_url??"",bio:(J==null?void 0:J.bio)??"",university:(J==null?void 0:J.university)??e.university??"",programName:(J==null?void 0:J.program_name)??e.program_name??"",programYear:G?String(G):"",programType:(J==null?void 0:J.program_type)??e.program_type??"",studentIdUrl:(J==null?void 0:J.student_id_url)??e.student_id_url??"",payoutAccountHolder:(J==null?void 0:J.payout_account_holder)??e.payout_account_holder??"",payoutAccountNumber:(J==null?void 0:J.payout_account_number)??e.payout_account_number??"",payoutBankName:(J==null?void 0:J.payout_bank_name)??e.payout_bank_name??"",payoutBankCountry:(J==null?void 0:J.payout_bank_country)??e.payout_bank_country??""};i(ne),w(ne.avatarUrl??""),m(null),b.current&&(URL.revokeObjectURL(b.current),b.current=null)}catch(J){console.warn("Failed to fetch profile",J),(e.full_name||e.avatar_url)&&(i({fullName:e.full_name??"",userRole:e.user_role??"renter",avatarUrl:e.avatar_url??"",bio:e.bio??"",university:e.university??"",programName:e.program_name??"",programYear:e.program_year?String(e.program_year):"",programType:e.program_type??"",studentIdUrl:e.student_id_url??"",payoutAccountHolder:e.payout_account_holder??"",payoutAccountNumber:e.payout_account_number??"",payoutBankName:e.payout_bank_name??"",payoutBankCountry:e.payout_bank_country??""}),w(e.avatar_url??""),m(null))}finally{l(!1)}})()},[e==null?void 0:e.avatar_url,e==null?void 0:e.bio,e==null?void 0:e.full_name,e==null?void 0:e.id,e==null?void 0:e.user_role]),g.useEffect(()=>()=>{b.current&&URL.revokeObjectURL(b.current)},[]);const C=g.useMemo(()=>e?(s.fullName??"")!==(e.full_name??"")||s.userRole!==(e.user_role??"renter")||(s.avatarUrl??"")!==(e.avatar_url??"")||(s.bio??"")!==(e.bio??"")||(s.university??"")!==(e.university??"")||(s.programName??"")!==(e.program_name??"")||(s.programYear??"")!==(e.program_year?String(e.program_year):"")||(s.programType??"")!==(e.program_type??"")||(s.studentIdUrl??"")!==(e.student_id_url??"")||(s.payoutAccountHolder??"")!==(e.payout_account_holder??"")||(s.payoutAccountNumber??"")!==(e.payout_account_number??"")||(s.payoutBankName??"")!==(e.payout_bank_name??"")||(s.payoutBankCountry??"")!==(e.payout_bank_country??"")||!!f||!!v:!0,[s,e,f,v]),P=(F,J)=>{i(G=>({...G,[F]:J}))},T=async F=>{if(F.preventDefault(),!!e){h(!0);try{let J=s.avatarUrl;f&&(J=await EV(e.id,f));let G=s.studentIdUrl;v&&(G=await Pj(e.id,v));const ne=_?e.user_role??s.userRole:s.userRole,he=s.programYear?Number(s.programYear):null,Me=he&&Number.isFinite(he)?he:null,Ee=s.university.trim(),je=s.programName.trim(),pe=s.payoutAccountHolder.trim(),V=s.payoutAccountNumber.trim(),oe=s.payoutBankName.trim(),ye=s.payoutBankCountry.trim();if(ne==="host"&&(!pe||!V||!oe||!ye)){r({title:"Add payout details",description:"Hosts need to provide all payout fields to receive Stripe transfers.",variant:"destructive"}),h(!1);return}const Oe=await gx({id:e.id,email:e.email,full_name:s.fullName||null,user_role:ne,avatar_url:J||null,bio:s.bio?s.bio.slice(0,100):null,student_id_url:G||null,university:Ee||null,program_name:je||null,program_year:Me??null,program_type:s.programType||null,payout_account_holder:pe||null,payout_account_number:V||null,payout_bank_name:oe||null,payout_bank_country:ye||null});i({fullName:Oe.full_name??"",userRole:Oe.user_role,avatarUrl:Oe.avatar_url??"",bio:Oe.bio??"",university:Oe.university??"",programName:Oe.program_name??"",programYear:Oe.program_year?String(Oe.program_year):"",programType:Oe.program_type??"",studentIdUrl:Oe.student_id_url??"",payoutAccountHolder:Oe.payout_account_holder??"",payoutAccountNumber:Oe.payout_account_number??"",payoutBankName:Oe.payout_bank_name??"",payoutBankCountry:Oe.payout_bank_country??""}),m(null),y(null),b.current&&(URL.revokeObjectURL(b.current),b.current=null),w(Oe.avatar_url??""),await t(),r({title:"Profile updated",description:"Your information is now up to date."})}catch(J){console.error("Failed to update profile",J),r({title:"Update failed",description:"We couldn't save your changes. Please try again.",variant:"destructive"})}finally{h(!1)}}},R=F=>{var ne;const J=(ne=F.target.files)==null?void 0:ne[0];if(!J)return;m(J),b.current&&(URL.revokeObjectURL(b.current),b.current=null);const G=URL.createObjectURL(J);b.current=G,w(G)},O=F=>{var G;const J=((G=F.target.files)==null?void 0:G[0])??null;y(J)},A=()=>{y(null)},B=()=>{b.current&&(URL.revokeObjectURL(b.current),b.current=null),m(null),w(s.avatarUrl||(e==null?void 0:e.avatar_url)||"")},q=_?(e==null?void 0:e.user_role)??s.userRole:s.userRole,Q=q==="host"?"Host":"Renter",W=(((U=s.fullName)==null?void 0:U.trim())||((Y=e==null?void 0:e.full_name)==null?void 0:Y.trim())||E||"Student").trim(),z=W.charAt(0).toUpperCase()||"S",M=[!!((se=s.fullName)!=null&&se.trim()),!!S,!!((te=s.bio)!=null&&te.trim()),!!((ue=s.university)!=null&&ue.trim())],ee=Math.round(M.filter(Boolean).length/M.length*100),H=g.useMemo(()=>Cj(s.university),[s.university]),Z=s.programType?_V[s.programType]:"Add your program",j=s.programYear?`Year ${s.programYear}`:"Add your year";return e?d.jsx("main",{className:"dreamy-bg min-h-screen px-4 py-10",children:d.jsxs("div",{className:"mx-auto flex w-full max-w-5xl flex-col gap-6",children:[d.jsx(Le,{variant:"ghost",className:"w-fit rounded-full bg-white/70 px-4 py-2 text-sm text-slate-600 shadow-sm",onClick:()=>n(-1),children:" Back to dashboard"}),d.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr,1.5fr]",children:[d.jsxs("div",{className:"rounded-[2rem] border border-white/60 bg-white/85 p-6 shadow-2xl shadow-blue-100/50 backdrop-blur",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"h-16 w-16 overflow-hidden rounded-full border-4 border-white shadow-lg shadow-blue-100",children:S?d.jsx("img",{src:S,alt:"Profile",className:"h-full w-full object-cover",onError:()=>w("")}):d.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gradient-to-br from-blue-200 to-indigo-300 text-2xl font-semibold text-white",children:z})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Profile overview"}),d.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:W}),d.jsx("p",{className:"text-sm text-slate-500",children:E})]})]}),d.jsxs("div",{className:"mt-6 rounded-[1.5rem] border border-slate-100 bg-slate-50/80 p-4",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm font-medium text-slate-600",children:[d.jsx("span",{children:"Profile completeness"}),d.jsxs("span",{children:[ee,"%"]})]}),d.jsx("div",{className:"mt-2 h-2 rounded-full bg-white/70",children:d.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-500 to-indigo-500",style:{width:`${ee}%`}})}),d.jsx("p",{className:"mt-2 text-xs text-slate-400",children:"Finish your name, photo, and bio to help students recognize you faster."})]}),d.jsxs("dl",{className:"mt-6 grid gap-4 text-sm text-slate-600",children:[d.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-100 bg-white/70 px-4 py-3",children:[d.jsxs("div",{children:[d.jsx("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"User role"}),d.jsx("dd",{className:"text-base font-semibold text-slate-900",children:Q})]}),d.jsx("span",{className:"rounded-full bg-indigo-50 px-3 py-1 text-xs font-semibold text-indigo-500",children:Q==="Host"?"Hosting couches":"Seeking couches"})]}),d.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white/70 px-4 py-3",children:[d.jsx("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"University"}),d.jsx("dd",{className:"mt-1 text-base font-semibold text-slate-900",children:s.university.trim()||"Add your university"})]}),d.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white/70 px-4 py-3",children:[d.jsx("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Program"}),d.jsxs("dd",{className:"mt-1 space-y-1 text-sm text-slate-600",children:[d.jsx("p",{className:"font-semibold text-slate-900",children:s.programName.trim()||"Add your program"}),d.jsxs("p",{className:"text-xs text-slate-500",children:[s.programType?Z:"Choose program type","  ",s.programYear?j:"Select your year"]})]})]}),d.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white/70 px-4 py-3",children:[d.jsx("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Student ID"}),d.jsxs("dd",{className:"mt-1 flex items-center justify-between text-sm text-slate-600",children:[d.jsx("span",{children:s.studentIdUrl?"Uploaded":"Waiting for upload"}),s.studentIdUrl&&d.jsx("a",{href:s.studentIdUrl,target:"_blank",rel:"noreferrer",className:"text-xs font-semibold text-indigo-600 underline",children:"View"})]})]}),d.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white/70 px-4 py-3",children:[d.jsx("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Tips"}),d.jsxs("dd",{className:"mt-2 space-y-2 text-sm",children:[d.jsx("p",{children:" Add a friendly bio so hosts know how to welcome you."}),d.jsx("p",{children:" Upload a clear profile photo to build trust."})]})]})]})]}),d.jsxs(ux,{className:"rounded-[2rem] border border-white/70 bg-white/95 shadow-2xl shadow-blue-100/60",children:[d.jsxs(ZT,{className:"pb-4",children:[d.jsx(dx,{className:"text-2xl font-semibold text-slate-900",children:"Edit your profile"}),d.jsx(hx,{className:"text-sm text-slate-500",children:"Update how other students see you. Your email stays the same for sign in."})]}),d.jsx(KT,{children:a?d.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading your profile"}):d.jsxs("form",{className:"space-y-8",onSubmit:T,children:[d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Account"}),d.jsx("p",{className:"text-sm text-slate-500",children:"We use this info to keep your account secure."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"email",children:"Email"}),d.jsx(ct,{id:"email",value:E,disabled:!0,className:"bg-slate-50 text-slate-500"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Email can't be changed."})]})]}),q==="host"&&d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Payout information"}),d.jsx("p",{className:"text-sm text-slate-500",children:"Payment information stays private and is never shown to the public."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"payoutAccountHolder",children:"Account holder name"}),d.jsx(ct,{id:"payoutAccountHolder",value:s.payoutAccountHolder,onChange:F=>P("payoutAccountHolder",F.target.value),placeholder:"Name on bank account"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"payoutAccountNumber",children:"IBAN or account number"}),d.jsx(ct,{id:"payoutAccountNumber",value:s.payoutAccountNumber,onChange:F=>P("payoutAccountNumber",F.target.value),placeholder:"e.g. CH12 1234 5678 9012 3456 7"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"payoutBankName",children:"Bank name"}),d.jsx(ct,{id:"payoutBankName",value:s.payoutBankName,onChange:F=>P("payoutBankName",F.target.value),placeholder:"Bank where you receive payouts"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"payoutBankCountry",children:"Bank country"}),d.jsx(ct,{id:"payoutBankCountry",value:s.payoutBankCountry,onChange:F=>P("payoutBankCountry",F.target.value),placeholder:"Country where your bank is located"}),d.jsx("p",{className:"text-xs text-slate-500",children:"This helps Stripe route payouts to the right region."})]})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Public profile"}),d.jsx("p",{className:"text-sm text-slate-500",children:"These details are visible when students connect with you."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"fullName",children:"Full name"}),d.jsx(ct,{id:"fullName",value:s.fullName,placeholder:"Your full name",onChange:F=>P("fullName",F.target.value)})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{children:"User type"}),_?d.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-slate-50/80 px-4 py-3 text-sm text-slate-600",children:[d.jsx("p",{className:"font-semibold text-slate-900",children:Q}),d.jsx("p",{className:"text-xs text-slate-500",children:"Contact support if you need to change this later."})]}):d.jsxs(px,{value:s.userRole,onValueChange:F=>P("userRole",F),className:"flex flex-wrap gap-4 rounded-2xl border border-slate-100 bg-slate-50/80 p-3",children:[d.jsxs("div",{className:"flex items-center space-x-2 rounded-full bg-white px-3 py-2 shadow-sm",children:[d.jsx(uf,{id:"role-renter",value:"renter"}),d.jsx(Xe,{htmlFor:"role-renter",className:"text-sm",children:"Renter"})]}),d.jsxs("div",{className:"flex items-center space-x-2 rounded-full bg-white px-3 py-2 shadow-sm",children:[d.jsx(uf,{id:"role-host",value:"host"}),d.jsx(Xe,{htmlFor:"role-host",className:"text-sm",children:"Host"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx(Xe,{htmlFor:"profilePhoto",children:"Profile photo"}),d.jsxs("div",{className:"flex flex-col gap-4 rounded-2xl border border-slate-100 bg-slate-50/80 p-4 sm:flex-row sm:items-center",children:[d.jsx("div",{className:"h-16 w-16 overflow-hidden rounded-full border border-white shadow",children:S?d.jsx("img",{src:S,alt:"Profile preview",className:"h-full w-full object-cover"}):d.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gradient-to-br from-blue-200 to-indigo-300 text-xl font-semibold text-white",children:z})}),d.jsxs("div",{className:"flex-1 space-y-2",children:[d.jsx(ct,{id:"profilePhoto",type:"file",accept:"image/*",onChange:R,className:"cursor-pointer bg-white"}),d.jsx("p",{className:"text-xs text-slate-500",children:"Upload a clear square image (PNG or JPG)."}),f&&d.jsx(Le,{type:"button",variant:"ghost",size:"sm",className:"px-0 text-xs text-slate-600",onClick:B,children:"Remove selected photo"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Student verification"}),d.jsx("p",{className:"text-sm text-slate-500",children:"Add your university details so hosts know you're an active student."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"university",children:"University"}),d.jsx(ct,{id:"university",value:s.university,onChange:F=>P("university",F.target.value),placeholder:"Start typing your university name",autoComplete:"off",className:"h-11 rounded-2xl border-slate-200 bg-white"}),(()=>{const F=s.university.trim();return!F||!H.length||H.some(G=>G.toLowerCase()===F.toLowerCase())&&H.length===1?null:d.jsx("div",{className:"max-h-36 overflow-y-auto rounded-2xl border border-slate-200 bg-white",children:H.map(G=>d.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-sm transition hover:bg-blue-50",onClick:()=>P("university",G),children:G},G))})})()]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"programName",children:"Program name"}),d.jsx(ct,{id:"programName",value:s.programName,onChange:F=>P("programName",F.target.value),placeholder:"e.g. Computer Science",className:"h-11 rounded-2xl border-slate-200 bg-white"})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{children:"Program type"}),d.jsxs(Ai,{value:s.programType,onValueChange:F=>P("programType",F),children:[d.jsx(Gs,{className:"rounded-2xl border-slate-200 bg-white",children:d.jsx(Li,{placeholder:"Select type"})}),d.jsx(Ys,{children:wV.map(F=>d.jsx(qr,{value:F.value,children:F.label},F.value))})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{children:"Year in program"}),d.jsxs(Ai,{value:s.programYear,onValueChange:F=>P("programYear",F),children:[d.jsx(Gs,{className:"rounded-2xl border-slate-200 bg-white",children:d.jsx(Li,{placeholder:"Select year"})}),d.jsx(Ys,{children:bV.map(F=>d.jsxs(qr,{value:F,children:["Year ",F]},F))})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"studentIdUpload",children:"Student ID"}),d.jsxs("div",{className:"space-y-2 rounded-2xl border border-slate-100 bg-slate-50/80 p-4",children:[d.jsx(ct,{id:"studentIdUpload",type:"file",accept:"image/*,.pdf",onChange:O,className:"cursor-pointer bg-white"}),d.jsx("p",{className:"text-xs text-slate-500",children:"Upload updated, new student ID."}),v&&d.jsx(Le,{type:"button",variant:"ghost",size:"sm",className:"px-0 text-xs text-slate-600",onClick:A,children:"Remove selected document"})]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Xe,{htmlFor:"bio",children:"Bio"}),d.jsx(Ml,{id:"bio",rows:4,value:s.bio,placeholder:"Share a bit about yourself",maxLength:100,onChange:F=>P("bio",F.target.value),className:"rounded-2xl"}),d.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[d.jsx("p",{children:"Keep it friendlyother students will see this when they interact with you."}),d.jsxs("span",{children:[s.bio.length,"/100"]})]})]})]}),d.jsxs("div",{className:"flex flex-col gap-3 border-t border-slate-100 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[d.jsx(Le,{type:"button",variant:"outline",onClick:()=>n(-1),className:"rounded-full px-6",children:"Cancel"}),d.jsx(Le,{type:"submit",disabled:c||!C,className:"rounded-full px-6",children:c?"Saving":"Save changes"})]})]})})]})]})]})}):d.jsxs("main",{className:"min-h-screen flex flex-col items-center justify-center gap-4",children:[d.jsx("p",{className:"text-muted-foreground",children:"Sign in to edit your profile."}),d.jsx(Le,{onClick:()=>n("/auth"),children:"Go to sign in"})]})},kV=()=>{const{profile:e,session:t}=Rr(),n=ts(),{toast:r}=ks(),s=J0(e,t),[i,a]=g.useState([]),[l,c]=g.useState(!0);g.useEffect(()=>{(async()=>{c(!0);try{const w=await sf(s);a(w)}finally{c(!1)}})()},[s]),g.useEffect(()=>{if(typeof window>"u")return;const S=()=>{s&&sf(s).then(a).catch(()=>{})};return window.addEventListener("wishlist-updated",S),()=>window.removeEventListener("wishlist-updated",S)},[s]);const h=async S=>{if(s){a(w=>w.filter(b=>b.couchId!==S.couchId));try{await ex(s,S.couchId)}catch(w){console.error("Failed to remove wishlist item",w),r({title:"Couldn't remove",description:"Please try again.",variant:"destructive"}),a(b=>[S,...b])}}},f=g.useMemo(()=>i.map(S=>{const w=S.snapshot??{id:S.couchId,image:Xi,price:"$0",title:"Saved couch",host:"Community host",hostEmail:null,location:"Location shared after booking",availableDates:"Flexible availability",description:"",hostId:null,availability:null,coordinates:null};return{...S,snapshot:{...w,id:w.id??S.couchId,image:w.image||Xi,title:w.title||"Saved couch",price:w.price||"$0",host:w.host||"Community host",location:w.location||"Location shared after booking",availableDates:w.availableDates||"Flexible availability",description:w.description??""}}}).filter(S=>{var w;return!!((w=S.snapshot)!=null&&w.id)}),[i]),m=g.useMemo(()=>!l&&f.length===0,[l,f]);if(!s)return d.jsxs("main",{className:"min-h-screen flex flex-col items-center justify-center gap-3",children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Sign in to build your wishlist."}),d.jsx(Le,{onClick:()=>n("/auth"),children:"Go to sign in"})]});const v=()=>d.jsx("div",{className:"grid gap-6 sm:grid-cols-2",children:Array.from({length:4}).map((S,w)=>d.jsxs("div",{className:"animate-pulse rounded-[2rem] border border-white/70 bg-white/60 p-4 shadow-lg shadow-blue-100/30",children:[d.jsx("div",{className:"h-48 rounded-2xl bg-slate-200"}),d.jsx("div",{className:"mt-4 h-4 rounded bg-slate-200"}),d.jsx("div",{className:"mt-2 h-3 rounded bg-slate-200"})]},`wishlist-skeleton-${w}`))}),y=()=>d.jsxs("div",{className:"rounded-[2.5rem] border border-dashed border-white/70 bg-white/70 p-10 text-center shadow-xl shadow-blue-100/50",children:[d.jsx("div",{className:"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-blue-50 text-blue-500",children:d.jsx(Dh,{className:"h-8 w-8"})}),d.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Start building your wishlist"}),d.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Tap the heart icon on any couch to keep it handy. Well sync them across all your devices."}),d.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-3",children:[d.jsx(Le,{className:"rounded-full px-6",onClick:()=>n("/listings"),children:"Browse calming couches"}),d.jsx(Le,{variant:"outline",className:"rounded-full px-6",onClick:()=>n("/profile"),children:"Update profile"})]})]});return d.jsx("main",{className:"dreamy-bg min-h-screen px-4 py-10",children:d.jsxs("div",{className:"mx-auto flex w-full max-w-5xl flex-col gap-8",children:[d.jsxs("section",{className:"rounded-[2.5rem] border border-white/60 bg-white/85 p-6 backdrop-blur-lg shadow-2xl shadow-blue-100/50",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-slate-500",children:"Collection"}),d.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Your wishlist"}),d.jsx("p",{className:"text-sm text-slate-500",children:"Save cozy couches as you browse. You can come back anytime to compare and decide."})]}),d.jsx("div",{className:"mt-6",children:d.jsx(Le,{variant:"outline",className:"rounded-full border-white/70 bg-white/90",onClick:()=>n("/profile"),children:"Update profile"})})]}),l&&v(),m&&!l&&y(),!l&&f.length>0&&d.jsx("div",{className:"grid gap-6 sm:grid-cols-2",children:f.map(S=>d.jsxs(ux,{className:"group relative overflow-hidden rounded-[2.5rem] border border-white/70 bg-white/95 shadow-2xl shadow-blue-100/40 transition hover:-translate-y-1.5",children:[d.jsxs("button",{type:"button",onClick:()=>h(S),className:"absolute right-4 top-4 z-10 rounded-full bg-white/90 p-2 text-rose-500 shadow",children:[d.jsx(Dh,{className:"h-5 w-5 fill-rose-500"}),d.jsx("span",{className:"sr-only",children:"Remove from wishlist"})]}),d.jsxs("div",{className:"relative h-48 overflow-hidden",children:[d.jsx("img",{src:S.snapshot.image,alt:S.snapshot.title,className:"h-full w-full object-cover transition duration-500 group-hover:scale-105"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/0"}),d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex items-center justify-between px-5 pb-4 text-white",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-lg font-semibold",children:S.snapshot.price}),d.jsx("p",{className:"text-xs text-white/70",children:S.snapshot.host})]}),d.jsx("span",{className:"rounded-full bg-white/90 px-3 py-1 text-xs font-semibold text-slate-800",children:"Saved couch"})]})]}),d.jsxs("div",{className:"space-y-4 p-5",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:S.snapshot.title}),d.jsxs("p",{className:"mt-1 flex items-center gap-2 text-sm text-slate-500",children:[d.jsx(p0,{className:"h-4 w-4"}),S.snapshot.location]})]}),d.jsxs("div",{className:"flex flex-wrap gap-2 text-xs font-medium text-slate-600",children:[d.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 px-3 py-1",children:[d.jsx(d0,{className:"h-3 w-3"})," ",S.snapshot.availableDates]}),S.snapshot.description&&d.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 px-3 py-1",children:[S.snapshot.description.slice(0,32),S.snapshot.description.length>32?"":""]})]}),d.jsx(Le,{className:"flex-1 rounded-full",onClick:()=>n(`/couch/${S.snapshot.id}`,{state:{couch:S.snapshot}}),children:"View details"})]})]},S.id))})]})})},PV=Uf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function mR({className:e,variant:t,...n}){return d.jsx("div",{className:Te(PV({variant:t}),e),...n})}const gf="couch-photos",gR="checkins",vR=(e,t)=>`${gR}/${e}/${t}`,yR=async(e,t)=>{const n=(()=>{const l=t.name.split("."),c=l.length>1?l.pop():null;return c?c.toLowerCase():"jpg"})(),r=`${Date.now()}-${Math.random().toString(36).slice(2)}.${n}`,s=vR(e,r),{error:i}=await be.storage.from(gf).upload(s,t,{cacheControl:"3600",upsert:!1,contentType:t.type||"image/jpeg"});if(i)throw i;const{data:a}=be.storage.from(gf).getPublicUrl(s);if(!(a!=null&&a.publicUrl))throw new Error("Unable to resolve uploaded photo URL.");return await be.from("booking_requests").update({has_checkin_photo:!0}).eq("id",e),a.publicUrl},NV=async e=>{const t=`${gR}/${e}`,{data:n,error:r}=await be.storage.from(gf).list(t,{limit:50,offset:0,sortBy:{column:"created_at",order:"desc"}});if(r){if(r.status===404)return[];throw r}return(n??[]).filter(s=>s.name).map(s=>be.storage.from(gf).getPublicUrl(vR(e,s.name)).data.publicUrl).filter(s=>!!s)},TV=[{label:"All",value:"all"},{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Declined",value:"declined"},{label:"Cancelled",value:"cancelled"}],jV={pending:"bg-amber-100 text-amber-700",approved:"bg-emerald-100 text-emerald-700",declined:"bg-rose-100 text-rose-700",cancelled:"bg-slate-100 text-slate-500"},Wd=4,RV=()=>{var je,pe;const{profile:e,session:t}=Rr(),n=ts(),r=jl(),{toast:s}=ks(),i=((je=t==null?void 0:t.user)==null?void 0:je.id)??(e==null?void 0:e.id)??null,a=((pe=t==null?void 0:t.user)==null?void 0:pe.id)??(e==null?void 0:e.id)??null,l=Oc({queryKey:["host-requests-listings",i],queryFn:()=>i?X6(i):[],enabled:!!i,staleTime:1e3*30}),c=g.useMemo(()=>l.data??[],[l.data]),h=g.useMemo(()=>{const V=new Set,oe=ye=>{if(!ye)return;const Oe=ye.trim();Oe&&V.add(Oe)};return oe(e==null?void 0:e.full_name),e!=null&&e.full_name&&oe(e.full_name.split(" ")[0]),oe(e==null?void 0:e.email),e!=null&&e.email&&oe(e.email.split("@")[0]),c.forEach(ye=>{oe(ye.hostName),oe(ye.hostEmail)}),Array.from(V)},[c,e==null?void 0:e.email,e==null?void 0:e.full_name]),f=g.useMemo(()=>{const V=new Set;return c.forEach(oe=>{oe.id&&V.add(oe.id)}),Array.from(V)},[c]),m=h.join("|"),v=f.join("|"),y=g.useMemo(()=>h.map(V=>V.toLowerCase()),[h]),S=g.useMemo(()=>new Set(f.filter(Boolean)),[f]),w=g.useMemo(()=>{const V=new Set,oe=ye=>{if(!ye)return;const Oe=ye.trim();Oe&&V.add(Oe)};return oe(e==null?void 0:e.full_name),e!=null&&e.full_name&&oe(e.full_name.split(" ")[0]),oe(e==null?void 0:e.email),e!=null&&e.email&&oe(e.email.split("@")[0]),Array.from(V)},[e==null?void 0:e.email,e==null?void 0:e.full_name]),b=w.join("|"),E=g.useMemo(()=>w.map(V=>V.toLowerCase()),[w]),_=Oc({queryKey:["host-manage-requests",i,m,v],queryFn:()=>H8(i,h,f),enabled:!!(i||h.length||f.length)}),C=Oc({queryKey:["host-manage-renter",a,b],queryFn:()=>mp(a,w),enabled:!!(a||w.length)}),P=g.useCallback(V=>{const oe=i&&V.hostId&&V.hostId===i,ye=(V.hostName??"").toLowerCase(),Oe=y.some(Lt=>ye.includes(Lt)),dt=V.couchId?S.has(V.couchId):!1;return!!(oe||Oe||dt)},[i,y,S]),T=g.useCallback(V=>{const oe=a&&V.renterId&&V.renterId===a,ye=(V.renterName??"").toLowerCase(),Oe=E.some(dt=>ye.includes(dt));return!!(oe||Oe)},[a,E]);cy({queryKey:["host-manage-requests",i,m,v],matcher:P}),cy({queryKey:["host-manage-renter",a,b],matcher:T});const R=Ic({mutationFn:({id:V,status:oe})=>V8(V,oe),onSuccess:(V,oe)=>{r.invalidateQueries({queryKey:["host-manage-requests",i,m,v]}),s({title:"Request updated",description:`Marked request as ${oe.status}.`})},onError:V=>{console.error("Failed to update booking request",V);const oe=V instanceof Error&&/approved for this listing during the selected dates/i.test(V.message);s({title:oe?"Booking dates overlap":"Update failed",description:oe?"Another reservation has already been approved for these dates. Choose a different request or adjust the stay.":"We couldn't change that booking request. Please try again.",variant:"destructive"})}}),O=Ic({mutationFn:V=>q8(V,a),onSuccess:V=>{r.setQueryData(["host-manage-renter",a,b],oe=>Array.isArray(oe)?oe.map(ye=>ye.id===V.id?V:ye):oe),r.setQueryData(["host-manage-requests",i,m,v],oe=>Array.isArray(oe)?oe.map(ye=>ye.id===V.id?V:ye):oe),s({title:"Request cancelled",description:"This booking request was cancelled."})},onError:V=>{console.error("Failed to cancel booking request",V),s({title:"Unable to cancel",description:"We couldn't cancel that request. Please refresh and try again.",variant:"destructive"})}}),A=Ic({mutationFn:async({request:V,summary:oe})=>{if(V.paymentStatus==="paid")throw new Error("This stay has already been paid for.");return V.paymentClientSecret&&V.paymentStatus!=="expired"?{clientSecret:V.paymentClientSecret,paymentDue:V.paymentDueAt??void 0}:hR({bookingId:V.id,amount:oe.totalDue,renterEmail:(e==null?void 0:e.email)??null})},onSuccess:(V,oe)=>{U({booking:oe.request,clientSecret:V.clientSecret,amountLabel:oe.summary.amountLabel,paymentDueAt:V.paymentDue??oe.request.paymentDueAt??null}),Z(!0),r.invalidateQueries({queryKey:["host-manage-renter",a,b]}),r.invalidateQueries({queryKey:["booking-requests",a,b]})},onError:V=>{const oe=V instanceof Error?V.message:"We couldn't start checkout.";s({title:"Payment unavailable",description:oe,variant:"destructive"})}}),[B,q]=g.useState("pending"),Q=!!i&&(e==null?void 0:e.user_role)==="host",[W,z]=g.useState(Q?"host":"renter"),[M,ee]=g.useState({host:Wd,renter:Wd}),[H,Z]=g.useState(!1),[j,U]=g.useState({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null}),[Y,se]=g.useState({});g.useEffect(()=>{Q||z("renter")},[Q]);const te=Q?[{label:"Received",value:"host"},{label:"Sent",value:"renter"}]:[{label:"Your requests",value:"renter"}],ue=g.useMemo(()=>_.data??[],[_.data]),F=g.useMemo(()=>ue.filter(V=>{const oe=i&&V.hostId===i,ye=V.couchId?S.has(V.couchId):!1;return!!(oe||ye)}),[ue,S,i]),J=g.useMemo(()=>C.data??[],[C.data]);g.useEffect(()=>{ee(V=>({...V,[W]:Wd}))},[W,B,F.length,J.length]);const G=g.useMemo(()=>{const V=W==="host"?F:J;return B==="all"?V:V.filter(oe=>oe.status===B)},[F,J,B,W]),ne=g.useCallback((V,oe)=>{if(W!=="host"){if(oe!=="cancelled"||V.status==="cancelled"||O.isPending)return;O.mutate(V.id);return}if(V.status==="declined"&&oe==="approved"){s({title:"Can't approve a declined request",description:"Declined bookings stay closed. Ask the renter to submit a new request if plans change."});return}const ye=V.status==="approved"&&oe==="declined"?"cancelled":oe;V.status!==ye&&R.mutate({id:V.id,status:ye})},[O,s,R,W]),he=g.useCallback(V=>{if(V.status!=="approved"){s({title:"Host approval pending",description:"Your host needs to approve the stay before you can pay."});return}if(V.paymentStatus==="paid"){s({title:"Already paid",description:"Thanks! We've already received payment for this stay."});return}if(V.paymentStatus==="expired"){s({title:"Payment window expired",description:"Ask your host to re-approve the booking to reopen payment.",variant:"destructive"});return}const oe=mf(V.pricePerNight??null,V.nights);if(!oe){s({title:"Payment unavailable",description:"We couldn't calculate the total for this stay yet. Please check with your host.",variant:"destructive"});return}A.mutate({request:V,summary:oe})},[A,s]),Me=g.useCallback(async(V,oe)=>{if(oe){se(ye=>({...ye,[V.id]:!0}));try{await yR(V.id,oe),s({title:"Photo uploaded",description:"Check-in proof added."}),r.invalidateQueries({queryKey:["host-manage-requests",i,m,v]}),r.invalidateQueries({queryKey:["booking-requests",a,b]})}catch(ye){console.error("check-in upload failed",ye),s({title:"Upload failed",description:ye instanceof Error?ye.message:"Unable to upload check-in photo",variant:"destructive"})}finally{se(ye=>({...ye,[V.id]:!1}))}}},[v,i,m,r,a,b,s]),Ee=(V,oe)=>{const ye=new Date(V);return Number.isNaN(ye.getTime())?"Unknown":rt(ye,oe)};return i?d.jsxs("main",{className:"dreamy-bg min-h-screen px-4 py-10",children:[d.jsxs("div",{className:"mx-auto flex w-full max-w-5xl flex-col gap-6",children:[d.jsx("header",{className:"rounded-[2rem] border border-white/60 bg-white/85 p-6 shadow-lg shadow-blue-100/50",children:d.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-muted-foreground",children:"Manage"}),d.jsx("h1",{className:"text-3xl font-semibold text-sketch-dark",children:"Booking requests"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Review every booking in one place and respond when you're ready."})]})})}),d.jsxs("section",{className:"rounded-[2rem] border border-white/60 bg-white/80 p-6 shadow-xl shadow-blue-100/40 space-y-4",children:[d.jsx("div",{className:"flex flex-wrap gap-2",children:te.map(V=>{const oe=W===V.value;return d.jsx("button",{type:"button",onClick:()=>z(V.value),className:`rounded-full px-4 py-1.5 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-400 ${oe?"bg-slate-900 text-white shadow-lg shadow-blue-200/60":"border border-slate-200/80 bg-white/80 text-slate-600"}`,children:V.label},V.value)})}),d.jsx("div",{className:"flex flex-wrap gap-2",children:TV.map(V=>{const oe=B===V.value;return d.jsx("button",{type:"button",onClick:()=>q(V.value),className:`rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-wide transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-400 ${oe?"bg-blue-600 text-white shadow":"border border-slate-200/70 bg-white/80 text-slate-500"}`,children:V.label},V.value)})})]}),!Q&&d.jsx("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-5 text-sm text-slate-600 shadow",children:"Only approved hosts can manage booking requests from this page. If you need hosting enabled on your account, reach out to our team."}),Q&&l.isSuccess&&c.length===0&&d.jsxs("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-5 text-sm text-slate-600 shadow space-y-3",children:[d.jsx("p",{children:"You haven't published a couch yet. Add one so renters can get in touch."}),d.jsx(Le,{variant:"outline",size:"sm",className:"rounded-full",onClick:()=>n("/listings",{state:{listingScope:"mine"}}),children:"Go to your listing"})]}),W==="host"&&_.isLoading&&d.jsx("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-5 text-sm text-slate-600 shadow",children:"Loading your booking requests"}),W==="renter"&&C.isLoading&&d.jsx("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-5 text-sm text-slate-600 shadow",children:"Loading your sent requests"}),W==="host"&&_.isError&&d.jsx("div",{className:"rounded-[1.75rem] border border-rose-200 bg-white/90 p-5 text-sm text-rose-600 shadow",children:"We couldn't load booking requests. Please refresh and try again."}),W==="renter"&&C.isError&&d.jsx("div",{className:"rounded-[1.75rem] border border-rose-200 bg-white/90 p-5 text-sm text-rose-600 shadow",children:"We couldn't load your reservations. Please refresh and try again."}),!_.isLoading&&!_.isError&&!C.isLoading&&!C.isError&&G.length===0&&d.jsx("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-5 text-sm text-slate-600 shadow",children:W==="host"?B==="pending"?"You're all caught up! New booking requests will appear here.":"No requests match this filter.":B==="pending"?"You haven't sent any booking requests yet.":"No sent requests match this filter."}),!_.isLoading&&!_.isError&&!C.isLoading&&!C.isError&&G.length>0&&d.jsxs("div",{className:"space-y-4",children:[G.slice(0,M[W]).map(V=>d.jsxs("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-6 shadow-lg shadow-blue-100/40 space-y-4",children:[d.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-muted-foreground",children:W==="host"?"Host booking":"Sent booking"}),d.jsx("h3",{className:"text-lg font-semibold text-sketch-dark",children:V.couchTitle??"Couch request"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:W==="host"?`Requested by ${V.renterName??"Unknown renter"}`:`Hosted by ${V.hostName??"Unknown host"}`})]}),d.jsx(mR,{className:`rounded-full px-3 py-1 text-xs uppercase tracking-wide ${jV[V.status]}`,children:V.status})]}),d.jsxs("div",{className:"grid gap-2 text-sm text-muted-foreground sm:grid-cols-2",children:[d.jsxs("span",{children:["Price per night: ",V.pricePerNight??""]}),d.jsxs("span",{children:["Submitted: ",Ee(V.createdAt,"MMM d, yyyy HH:mm")]}),d.jsxs("span",{children:["Stay: ",Ee(V.stayStart,"MMM d, yyyy"),"  ",Ee(V.stayEnd,"MMM d, yyyy"),V.nights?`  ${V.nights} night${V.nights===1?"":"s"}`:""]}),d.jsx("span",{children:W==="host"?`Host: ${V.hostName??"You"}`:`Host: ${V.hostName??"Unknown"}`}),W==="renter"&&d.jsxs("span",{children:["Renter: ",V.renterName??"You"]})]}),W==="host"&&V.status==="approved"&&d.jsxs("div",{className:"rounded-xl border border-dashed border-slate-200/70 bg-slate-50/60 p-4 space-y-2",children:[d.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Check-in photo"}),d.jsx("p",{className:"text-xs text-slate-500",children:"Upload a photo when the renter arrives. Payment information stays private and is never shown to the public."}),d.jsx(ct,{type:"file",accept:"image/*",disabled:Y[V.id],onChange:oe=>{var Oe;const ye=((Oe=oe.target.files)==null?void 0:Oe[0])??null;ye&&Me(V,ye),oe.target.value=""}}),Y[V.id]&&d.jsx("p",{className:"text-xs text-slate-500",children:"Uploading photo"})]}),W==="renter"&&(()=>{var en;const oe=mf(V.pricePerNight??null,V.nights),ye=V.paymentStatus,Oe=V.paymentDueAt?Ee(V.paymentDueAt,"MMM d, yyyy HH:mm"):null,dt=A.isPending&&((en=A.variables)==null?void 0:en.request.id)===V.id,Lt=ye==="paid",yn=V.status==="approved"&&!Lt;if(!yn&&!Lt)return null;const ur=ye==="paid"?"Payment received. You're all set!":ye==="failed"?"Your last payment attempt failed. Try again when you're ready.":ye==="pending"?Oe?`Finish payment by ${Oe} to keep this reservation.`:"Finish payment to confirm your stay.":ye==="expired"?"Payment window expired. Ask your host to reopen it.":"Complete payment to confirm your approved stay.";return d.jsxs("div",{className:"rounded-xl border border-emerald-200/70 bg-emerald-50/40 p-4 space-y-3",children:[d.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-semibold text-emerald-900",children:Lt?"Payment complete":"Payment required"}),d.jsx("p",{className:"text-xs text-emerald-800",children:ur}),ye==="paid"&&d.jsxs("p",{className:"text-xs font-medium text-emerald-900",children:["Reserved for ",Ee(V.stayStart,"MMM d, yyyy"),"  Arrival ",Ee(V.stayStart,"HH:mm")]})]}),oe&&d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-base font-semibold text-emerald-900",children:oe.amountLabel}),d.jsxs("p",{className:"text-xs text-emerald-800",children:[oe.nights," night",oe.nights===1?"":"s"," at ",V.pricePerNight??""]})]})]}),yn&&oe&&d.jsx("div",{className:"flex flex-wrap gap-2",children:d.jsx(Le,{size:"sm",className:"rounded-full",disabled:dt,onClick:()=>he(V),children:dt?"Preparing checkout":"Pay now"})}),!oe&&d.jsx("p",{className:"text-xs text-emerald-800",children:"The host hasn't set a nightly rate yet, so we can't calculate the total."}),ye==="expired"&&d.jsx("p",{className:"text-xs text-rose-700",children:"Payment window expired. Ask the host to re-approve the request to try again."}),ye==="failed"&&d.jsx("p",{className:"text-xs text-rose-700",children:"Payment failed. Double-check your card or try another method."})]})})(),W==="host"?d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsx(Le,{size:"sm",className:"rounded-full",disabled:V.status==="approved"||V.status==="declined"||V.status==="cancelled"||R.isPending,onClick:()=>ne(V,"approved"),children:"Approve"}),d.jsx(Le,{size:"sm",variant:"outline",className:"rounded-full",disabled:V.status==="declined"||V.status==="cancelled"||R.isPending,onClick:()=>ne(V,"declined"),children:"Decline"})]}):d.jsx("div",{className:"flex flex-wrap gap-2",children:d.jsx(Le,{size:"sm",variant:"outline",className:"rounded-full",disabled:V.status!=="pending"||O.isPending,onClick:()=>ne(V,"cancelled"),children:"Cancel request"})})]},V.id)),M[W]<G.length&&d.jsx("div",{className:"pt-2 text-center",children:d.jsx(Le,{variant:"outline",size:"sm",onClick:()=>ee(V=>({...V,[W]:Math.min(V[W]+Wd,G.length)})),children:"Show more"})})]})]}),d.jsx(dR,{open:H,onOpenChange:V=>{Z(V),V||U({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null})},booking:j.booking,clientSecret:j.clientSecret,amountLabel:j.amountLabel,paymentDueAt:j.paymentDueAt,onPaymentSuccess:async()=>{var oe;const V=(oe=j.booking)==null?void 0:oe.id;if(V){const ye=Oe=>Array.isArray(Oe)?Oe.map(dt=>dt.id===V?{...dt,paymentStatus:"paid",status:"approved"}:dt):Oe;r.setQueryData(["host-manage-renter",a,b],ye),r.setQueryData(["host-manage-requests",i,m,v],ye),r.setQueryData(["booking-requests",a,b],ye)}s({title:"Payment successful",description:"Your stay is confirmedcheck your email for the receipt."}),Z(!1),U({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null})}})]}):d.jsxs("main",{className:"min-h-screen flex flex-col items-center justify-center gap-4",children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Sign in to manage booking requests."}),d.jsx(Le,{onClick:()=>n("/auth"),children:"Go to sign in"})]})},MV=async e=>{const{data:t,error:n}=await be.functions.invoke("transform-note",{body:{content:e}});if(n)throw n;return t},OV=()=>{const{user:e,loading:t}=mx(),[n,r]=g.useState([]),[s,i]=g.useState(""),[a,l]=g.useState(null),[c,h]=g.useState(null),[f,m]=g.useState(null),[v,y]=g.useState(!1),[S,w]=g.useState(!1),b=g.useCallback(async()=>{if(!e){r([]);return}y(!0),l(null);const{data:C,error:P}=await be.from("notes").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(20);P?(l(P.message),r([])):r(C??[]),y(!1)},[e]);g.useEffect(()=>{t||b()},[t,b]);const E=async C=>{if(C.preventDefault(),!e){h("You must be signed in to add a note.");return}const P=s.trim();if(!P){h("Please enter some text before adding a note.");return}w(!0),h(null),m(null);try{const T=await MV(P);m(T.message??"Note added successfully."),i(""),T.note?r(R=>[T.note,...R].slice(0,20)):await b()}catch(T){const R=T instanceof Error?T.message:"Failed to add note";h(R)}w(!1)},_=g.useMemo(()=>n.map(C=>({...C,formattedDate:new Date(C.created_at).toLocaleString()})),[n]);return t?d.jsx("main",{className:"dreamy-bg min-h-screen flex items-center justify-center",children:d.jsx("p",{className:"text-muted-foreground",children:"Checking session"})}):e?d.jsx("main",{className:"dreamy-bg min-h-screen px-4 py-8",children:d.jsxs("div",{className:"mx-auto w-full max-w-2xl space-y-8",children:[d.jsxs("header",{className:"space-y-2",children:[d.jsx("h1",{className:"text-3xl font-bold text-sketch-dark",children:"Notes demo"}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"Add personal notes stored in Supabase. Only you can see your entries."})]}),d.jsxs("form",{onSubmit:E,className:"space-y-3",children:[d.jsxs("div",{className:"flex gap-3",children:[d.jsx(ct,{value:s,onChange:C=>i(C.target.value),placeholder:"Write a note",className:"flex-1"}),d.jsx(Le,{type:"submit",disabled:S,children:S?"Adding":"Add note"})]}),c&&d.jsx("p",{className:"text-sm text-destructive",children:c}),f&&d.jsx("p",{className:"text-sm text-emerald-600",children:f})]}),d.jsxs("section",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h2",{className:"text-lg font-semibold",children:"Latest notes"}),d.jsx(Le,{variant:"outline",size:"sm",onClick:b,disabled:v,children:v?"Refreshing":"Refresh"})]}),a&&d.jsx("p",{className:"text-sm text-destructive",children:a}),!a&&_.length===0&&d.jsx("p",{className:"text-sm text-muted-foreground",children:"No notes yet. Add your first one above!"}),d.jsx("ul",{className:"space-y-3",children:_.map(C=>d.jsxs("li",{className:"sketch-card p-4",children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:C.formattedDate}),d.jsx("p",{className:"text-base text-sketch-dark whitespace-pre-line break-words",children:C.content})]},C.id))})]})]})}):d.jsx("main",{className:"dreamy-bg min-h-screen flex items-center justify-center",children:d.jsxs("div",{className:"text-center space-y-3",children:[d.jsx("h1",{className:"text-2xl font-semibold",children:"Sign in required"}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"Visit the sign-in page to receive a magic link, then return to test notes."})]})})},hg=e=>{if(!e)return"Member";if(e.name)return e.name;if(e.email){const[t]=e.email.split("@");return t||"Member"}return"Member"},IV=()=>{var z;const{user:e,loading:t}=mx(),[n,r]=g.useState([]),[s,i]=g.useState({}),[a,l]=g.useState(!1),[c,h]=g.useState(null),[f,m]=g.useState(null),[v,y]=g.useState([]),[S,w]=g.useState(!1),[b,E]=g.useState(null),[_,C]=g.useState(""),[P,T]=g.useState(!1),[R,O]=g.useState(""),A=(e==null?void 0:e.id)??null,B=(f==null?void 0:f.otherUserId)??null;g.useEffect(()=>{if(!A){r([]),i({});return}let M=!0;return(async()=>{try{l(!0);const H=await G8(A);if(!M)return;r(H);const Z=H.map(j=>j.otherUserId);if(Z.length){const j=await TT(Z);if(!M)return;i(j.reduce((U,Y)=>(U[Y.id]={id:Y.id,name:Y.full_name??"",role:Y.user_role??null,email:Y.email??null},U),{}))}m(j=>j??H[0]??null),h(null)}catch(H){const Z=H instanceof Error?H.message:"Unable to load conversations.";h(Z)}finally{M&&l(!1)}})(),()=>{M=!1}},[A]),g.useEffect(()=>{if(!A||!B){y([]);return}let M=!0;(async()=>{try{w(!0);const Z=await GT(A,B);if(!M)return;y(Z),E(null)}catch(Z){const j=Z instanceof Error?Z.message:"Unable to load messages.";M&&(E(j),y([]))}finally{M&&w(!1)}})();const H=be.channel(`dm-center-${A}-${B}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"direct_messages"},Z=>{const j=Z.new;(j.sender_id===A&&j.receiver_id===B||j.sender_id===B&&j.receiver_id===A)&&y(U=>U.some(Y=>Y.id===j.id)?U:[...U,j])}).subscribe();return()=>{M=!1,be.removeChannel(H)}},[B,A]);const q=g.useMemo(()=>{const M=R.trim().toLowerCase();return M?n.filter(ee=>{var U;const H=s[ee.otherUserId];if(!H)return!1;const Z=hg(H).toLowerCase(),j=((U=H.role)==null?void 0:U.toLowerCase())??"";return Z.includes(M)||j.includes(M)}):n},[n,s,R]),Q=M=>{m(M),E(null),C("")},W=async M=>{if(M.preventDefault(),!e||!f)return;const ee=_.trim();if(!ee){E("Please enter a message.");return}T(!0),E(null);try{const H=await YT(e.id,f.otherUserId,ee);H&&y(Z=>[...Z,H]),C("")}catch(H){const Z=H instanceof Error?H.message:"Failed to send message.";E(Z)}finally{T(!1)}};return t?d.jsx("main",{className:"min-h-screen flex items-center justify-center bg-background",children:d.jsx("p",{className:"text-muted-foreground",children:"Loading session"})}):e?d.jsx("main",{className:"dreamy-bg min-h-screen px-4 py-10",children:d.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-8",children:[d.jsxs("section",{className:"rounded-[2.5rem] border border-white/60 bg-white/85 p-6 backdrop-blur-lg shadow-2xl shadow-blue-100/50",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-slate-500",children:"Conversations"}),d.jsx("h1",{className:"mt-2 text-3xl font-semibold text-slate-900",children:"Message center"}),d.jsx("p",{className:"text-sm text-slate-500",children:"Keep calm chats organized. Search your hosts, continue planning, and never lose a thread."})]}),d.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row",children:[d.jsxs("aside",{className:"w-full rounded-[2rem] border border-white/70 bg-white/95 p-5 shadow-xl shadow-blue-100/40 lg:max-w-xs",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsx(ct,{value:R,onChange:M=>O(M.target.value),placeholder:"Search by name",className:"rounded-full bg-slate-50 text-sm"}),c&&d.jsx("p",{className:"text-sm text-destructive",children:c})]}),d.jsxs("ul",{className:"mt-4 space-y-2 overflow-y-auto pr-1",style:{maxHeight:"70vh"},children:[a&&d.jsx("li",{className:"text-sm text-muted-foreground",children:"Loading conversations"}),!a&&q.length===0&&d.jsx("li",{className:"text-sm text-muted-foreground",children:"No conversations yet."}),q.map(M=>{const ee=s[M.otherUserId],H=M.lastMessage,Z=H.content.length>60?`${H.content.slice(0,57)}`:H.content,j=rt(new Date(H.created_at),"MMM d, h:mm a"),U=(f==null?void 0:f.otherUserId)===M.otherUserId;return d.jsx("li",{children:d.jsxs("button",{type:"button",onClick:()=>Q(M),className:`w-full rounded-2xl border px-4 py-3 text-left transition hover:border-blue-200 hover:bg-blue-50 ${U?"border-blue-400 bg-blue-50":"border-white/80 bg-white"}`,children:[d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-semibold text-slate-900",children:hg(ee)}),(ee==null?void 0:ee.role)&&d.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:ee.role})]}),d.jsx("span",{className:"text-[11px] text-slate-400",children:j})]}),d.jsx("p",{className:"mt-1 text-xs text-slate-500",children:Z})]})},M.otherUserId)})]})]}),d.jsx("section",{className:"flex-1",children:f?d.jsxs("div",{className:"flex h-full flex-col rounded-[2rem] border border-white/70 bg-white/95 p-6 shadow-2xl shadow-blue-100/40",children:[d.jsxs("header",{className:"mb-4 flex flex-wrap items-center justify-between gap-3 border-b pb-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400",children:"Chatting with"}),d.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:hg(s[f.otherUserId])}),d.jsx("p",{className:"text-sm text-slate-500",children:((z=s[f.otherUserId])==null?void 0:z.role)??"Community member"})]}),d.jsx("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-500",children:"Direct messages"})]}),d.jsxs("div",{className:"flex-1 space-y-3 overflow-y-auto pr-2",children:[S&&d.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading messages"}),!S&&v.length===0&&d.jsx("p",{className:"text-sm text-muted-foreground",children:"No messages yet. Start the conversation!"}),v.map(M=>d.jsxs("div",{className:`max-w-[75%] rounded-2xl px-4 py-2 text-sm shadow-sm ${M.sender_id===e.id?"ml-auto bg-blue-600 text-white":"mr-auto bg-slate-100 text-slate-800"}`,children:[d.jsx("p",{className:"whitespace-pre-line break-words",children:M.content}),d.jsx("p",{className:"mt-1 text-[11px] opacity-70",children:rt(new Date(M.created_at),"MMM d, yyyy  h:mm a")})]},M.id))]}),d.jsxs("form",{onSubmit:W,className:"mt-4 space-y-2",children:[d.jsx(Ml,{value:_,onChange:M=>{C(M.target.value),b&&E(null)},placeholder:"Write your message",rows:3,className:"rounded-2xl"}),b&&d.jsx("p",{className:"text-sm text-destructive",children:b}),d.jsx(Le,{type:"submit",disabled:P||!_.trim(),className:"rounded-full px-6",children:P?"Sending":"Send message"})]})]}):d.jsx("div",{className:"flex h-full items-center justify-center rounded-[2rem] border border-dashed border-white/70 bg-white/80 p-10 text-center shadow-2xl shadow-blue-100/30",children:d.jsx("p",{className:"text-sm text-slate-500",children:"Select a conversation on the left to view messages."})})})]})]})}):d.jsx("main",{className:"min-h-screen flex items-center justify-center bg-background",children:d.jsxs("div",{className:"text-center space-y-3",children:[d.jsx("h1",{className:"text-2xl font-semibold",children:"Sign in required"}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"Visit the sign-in page to view your conversations."})]})})},AV={pending:"bg-amber-100 text-amber-700",approved:"bg-emerald-100 text-emerald-700",declined:"bg-rose-100 text-rose-700",cancelled:"bg-muted text-muted-foreground"},LV=e=>{const[t,n]=g.useState([]),[r,s]=g.useState(!1),i=g.useCallback(async()=>{if(e){s(!0);try{const a=await NV(e);n(a)}catch(a){console.warn("Failed to load check-in photos",a)}finally{s(!1)}}},[e]);return g.useEffect(()=>{i()},[i]),{photos:t,loading:r,refresh:i}},L1=({photos:e,loading:t,emptyLabel:n})=>d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"text-sm font-medium text-sketch-dark",children:"Check-in photos"}),t?d.jsx("p",{className:"text-xs text-muted-foreground",children:"Loading check-in photos"}):e.length===0?d.jsx("p",{className:"text-xs text-muted-foreground",children:n}):d.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.map(r=>d.jsx("a",{href:r,target:"_blank",rel:"noreferrer",className:"block overflow-hidden rounded-md border",children:d.jsx("img",{src:r,alt:"Check-in",className:"h-32 w-full object-cover"})},r))})]}),DV=({request:e})=>{const{toast:t}=ks(),{photos:n,loading:r,refresh:s}=LV(e.id),[i,a]=g.useState(!1),[l,c]=g.useState(!1),h=new Date(e.stayStart),f=new Date(e.stayEnd),m=e.status==="approved",v=g.useMemo(()=>{var b;const S=(b=e.hostName)==null?void 0:b.trim();if(!S)return"Community host";if(/\S+@\S+\.\S+/.test(S)){const E=S.split("@")[0].split(".")[0];return E.charAt(0).toUpperCase()+E.slice(1)}return S.split(" ")[0]},[e.hostName]),y=async S=>{var b;const w=(b=S.target.files)==null?void 0:b[0];if(w)try{a(!0),await yR(e.id,w),t({title:"Photo uploaded",description:"Thanks for checking in!"}),s()}catch(E){const _=E instanceof Error?E.message:"We couldn't upload that photo.";t({title:"Upload failed",description:_,variant:"destructive"})}finally{a(!1),S.target.value=""}};return d.jsxs("div",{className:"rounded-2xl border border-white/60 bg-gradient-to-br from-white/80 via-blue-50/80 to-white/70 p-4 shadow-sm shadow-blue-100/70 space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-lg font-semibold text-sketch-dark",children:e.couchTitle??"Couch request"}),d.jsx(mR,{className:AV[e.status],children:e.status.toUpperCase()})]}),d.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[d.jsxs("p",{children:["Host: ",v]}),d.jsxs("p",{children:["Stay: ",rt(h,"MMM d, yyyy"),"  ",rt(f,"MMM d, yyyy")]}),d.jsxs("p",{className:"text-xs",children:["Requested ",rt(new Date(e.createdAt),"MMM d, yyyy h:mm a")]})]}),d.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[d.jsx("p",{children:m?"Check-in photos available":"Waiting for host approval"}),d.jsxs("button",{type:"button",className:"flex items-center gap-1 rounded-full px-3 py-1 text-sm font-medium text-slate-600",onClick:()=>c(S=>!S),children:["Details",d.jsx(zf,{className:`h-4 w-4 transition-transform ${l?"rotate-180":""}`})]})]}),l&&m&&d.jsxs("div",{className:"space-y-2 rounded-md border border-dashed border-muted-foreground/40 p-3",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"text-sm font-medium text-sketch-dark",children:"Upload a check-in photo"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Snap a quick photo once you're at the couch. Hosts will see it instantly."}),d.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:y,disabled:i}),i&&d.jsx("p",{className:"text-xs text-muted-foreground",children:"Uploading"})]}),d.jsx(L1,{photos:n,loading:r,emptyLabel:"No check-in photos uploaded yet."})]}),l&&!m&&d.jsx(L1,{photos:n,loading:r,emptyLabel:"Check-in photos become available once the host approves your stay."})]})},fg=4,D1=()=>{var E;const{profile:e,session:t}=Rr(),n=ts(),[r,s]=g.useState([]),[i,a]=g.useState(!1),[l,c]=g.useState(null),[h,f]=g.useState(fg),m=((E=t==null?void 0:t.user)==null?void 0:E.id)??(e==null?void 0:e.id)??null,v=(e==null?void 0:e.user_role)==="host",y=g.useMemo(()=>[(e==null?void 0:e.full_name)??"",(e==null?void 0:e.email)??""],[e==null?void 0:e.full_name,e==null?void 0:e.email]),S=g.useCallback(async()=>{if(!m){s([]);return}a(!0);try{const _=await mp(m,y);s(_),f(fg),c(null)}catch(_){const C=_ instanceof Error?_.message:"Unable to load requests.";c(C)}finally{a(!1)}},[y,m]);if(g.useEffect(()=>{S()},[S]),g.useEffect(()=>{v&&n("/host-requests",{replace:!0})},[v,n]),v)return null;const w=g.useMemo(()=>{if(!m)return d.jsx("p",{className:"text-sm text-muted-foreground",children:"Sign in as a renter to view your requests."});if(i)return d.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading your requests"});if(l)return d.jsx("p",{className:"text-sm text-destructive",children:l});if(!r.length)return d.jsx("p",{className:"text-sm text-muted-foreground",children:"You have not submitted any booking requests yet."});const _=r.slice(0,h),C=h<r.length;return d.jsxs("div",{className:"space-y-3",children:[_.map(P=>d.jsx(DV,{request:P},P.id)),C&&d.jsx("div",{className:"pt-2 text-center",children:d.jsx(Le,{variant:"outline",size:"sm",onClick:()=>f(P=>Math.min(P+fg,r.length)),children:"Show more"})})]})},[l,i,m,r,h]);return d.jsx("main",{className:"dreamy-bg min-h-screen px-4 py-8",children:d.jsxs("div",{className:"mx-auto w-full max-w-4xl space-y-6",children:[d.jsx("header",{className:"space-y-4 rounded-2xl border bg-card/70 p-6 shadow-sm",children:d.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-muted-foreground",children:"Welcome back"}),d.jsx("h1",{className:"text-2xl font-bold text-sketch-dark",children:"Reservations"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Track every request and know when hosts approve your stay."})]})})}),d.jsxs("section",{className:"rounded-xl border bg-card/60 p-4 shadow-sm",children:[d.jsx("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-2",children:d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-semibold text-sketch-dark",children:"Your bookings"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Track every request and share check-in photos with hosts."})]})}),w]})]})})},pc="booking_requests",FV="messages_",xR="legacy-sync-v1",F1="listing_",wR="legacy-listings-v1",$V=async()=>{const e=["booking_requests","messages","user_listings"],t=[];return await Promise.all(e.map(async n=>{const{error:r}=await be.from(n).select("id").limit(1);r&&t.push({table:n,error:r.message??"Unknown error"})})),{ok:t.length===0,issues:t}},UV=e=>localStorage.getItem(`${xR}-${e}`)==="complete",zV=e=>{localStorage.setItem(`${xR}-${e}`,"complete")},BV=e=>localStorage.getItem(`${wR}-${e}`)==="complete",$1=e=>{localStorage.setItem(`${wR}-${e}`,"complete")},hh=e=>{if(!e)return new Date().toISOString();const t=new Date(e);return Number.isNaN(t.getTime())?new Date().toISOString():t.toISOString()},WV=e=>new Set(e.map(t=>`${t.couchId??""}|${t.stayStart}|${t.stayEnd}|${t.status}`)),HV=e=>new Set(e.map(t=>`${t.hostId??""}|${t.sentAt}|${t.text}`)),VV=async e=>{const t=localStorage.getItem(pc);if(!t)return 0;let n=[];try{const l=JSON.parse(t);n=Array.isArray(l)?l:[]}catch(l){return console.error("Failed to parse legacy booking requests",l),localStorage.removeItem(pc),0}if(!Array.isArray(n)||n.length===0)return localStorage.removeItem(pc),0;let r=[];try{r=await mp(e.id,[e.full_name??void 0,e.email??void 0])}catch(l){console.warn("Unable to load existing booking requests from Supabase",l),r=[]}const s=WV(r);let i=0;const a=[];for(const l of n){if(l!=null&&l.renterId&&l.renterId!==e.id)continue;const c=hh((l==null?void 0:l.stayStart)??(l==null?void 0:l.start)??(l==null?void 0:l.checkIn)),h=hh((l==null?void 0:l.stayEnd)??(l==null?void 0:l.end)??(l==null?void 0:l.checkOut)??(l==null?void 0:l.checkout)),f=`${(l==null?void 0:l.couchId)??""}|${c}|${h}|${(l==null?void 0:l.status)??"pending"}`;if(s.has(f))continue;const m=(l==null?void 0:l.nights)??Math.max(1,kr(new Date(h),new Date(c)));try{await qT({couchId:(l==null?void 0:l.couchId)??"legacy-couch",couchTitle:(l==null?void 0:l.couchTitle)??(l==null?void 0:l.title)??"Couch booking",hostId:(l==null?void 0:l.hostId)??null,hostName:(l==null?void 0:l.hostEmail)??(l==null?void 0:l.hostName)??"Community Host",hostEmail:(l==null?void 0:l.hostEmail)??null,renterId:e.id,renterName:(l==null?void 0:l.renterName)??e.full_name??e.email??"Renter",stayStart:c,stayEnd:h,nights:m,pricePerNight:(l==null?void 0:l.pricePerNight)??(l==null?void 0:l.price)??"$0",status:(l==null?void 0:l.status)??"pending",createdAt:hh((l==null?void 0:l.createdAt)??(l==null?void 0:l.created_at)??(l==null?void 0:l.submittedAt))}),s.add(f),i+=1}catch(v){console.error("Failed to migrate legacy booking request",v),a.push(l)}}return a.length?localStorage.setItem(pc,JSON.stringify(a)):localStorage.removeItem(pc),i},qV=async e=>{const t=[];for(let i=0;i<localStorage.length;i++){const a=localStorage.key(i);a&&a.startsWith(FV)&&t.push(a)}if(!t.length)return 0;const n=await pR(e.id,[e.full_name??void 0,e.email??void 0]),r=HV(n);let s=0;for(const i of t){const a=localStorage.getItem(i);if(!a)continue;let l=[];try{const h=JSON.parse(a);l=Array.isArray(h)?h:[]}catch(h){console.error("Failed to parse legacy messages",h),localStorage.removeItem(i);continue}if(!Array.isArray(l)||l.length===0){localStorage.removeItem(i);continue}const c=[];for(const h of l){if(h!=null&&h.renterId&&h.renterId!==e.id){c.push(h);continue}const f=hh((h==null?void 0:h.sentAt)??(h==null?void 0:h.sent_at)??(h==null?void 0:h.created_at)),m=`${(h==null?void 0:h.hostId)??""}|${f}|${(h==null?void 0:h.text)??(h==null?void 0:h.body)??""}`;if(!r.has(m))try{await fR({couchId:(h==null?void 0:h.couchId)??"legacy-couch",hostId:(h==null?void 0:h.hostId)??null,hostName:(h==null?void 0:h.hostEmail)??(h==null?void 0:h.hostName)??"Community Host",hostEmail:(h==null?void 0:h.hostEmail)??null,renterId:e.id,renterName:(h==null?void 0:h.renterName)??e.full_name??e.email??"Renter",body:(h==null?void 0:h.text)??(h==null?void 0:h.body)??"",sentAt:f,senderRole:(h==null?void 0:h.senderRole)??"renter",senderId:(h==null?void 0:h.senderId)??e.id,senderName:(h==null?void 0:h.senderName)??((h==null?void 0:h.senderRole)==="host"?(h==null?void 0:h.hostName)??"Host":(h==null?void 0:h.renterName)??e.full_name??e.email??"Renter")}),r.add(m),s+=1}catch(v){console.error("Failed to migrate legacy message",v)}}c.length?localStorage.setItem(i,JSON.stringify(c)):localStorage.removeItem(i)}return s},GV=async e=>{if(typeof window>"u")return{bookings:0,messages:0};if(UV(e.id))return{bookings:0,messages:0};let t=0,n=0,r=!0;try{t=await VV(e)}catch(s){r=!1,console.error("Legacy booking migration failed",s)}try{n=await qV(e)}catch(s){r=!1,console.error("Legacy message migration failed",s)}return r&&zV(e.id),{bookings:t,messages:n}},YV=e=>{if(!e)return"$0";const t=e.toString().trim();return t?t.startsWith("$")?t:`$${t}`:"$0"},ZV=(e,t)=>{var c,h,f;const n=t.propertyType==="house"?"House":"Flat",r=e.full_name?`${e.full_name.split(" ")[0]||"Host"}'s ${n} couch`:`${n} couch`,s=t.title??(t.address?`${n} couch at ${t.address}`:null),i=t.uploadedAt?`Listing added on ${new Date(t.uploadedAt).toLocaleDateString()}`:null,a=t.checkInTime??((c=t.availability)==null?void 0:c.checkInTime)??null,l=a?`${e.full_name??"Your host"} welcomes you. Check-in after ${a}.`:`${e.full_name??"Your host"} welcomes you.`;return{id:t.listingId&&typeof t.listingId=="string"?t.listingId:void 0,hostId:e.id,hostName:e.full_name,hostEmail:e.email,title:s??r,imageUrl:t.imageUrl??null,pricePerNight:YV(t.pricePerNight??t.price),location:t.address??t.location??"Address shared after booking",description:t.description??i??l,availability:{start:((h=t.availability)==null?void 0:h.start)??null,end:((f=t.availability)==null?void 0:f.end)??null,checkInTime:a,country:t.country??null,city:t.city??null,addressLine:t.address??t.location??null}}},KV=async e=>{if(typeof window>"u")return{listings:0};if(!e.id)return{listings:0};if(BV(e.id))return{listings:0};const t=[];for(let s=0;s<localStorage.length;s++){const i=localStorage.key(s);i&&i.startsWith(F1)&&t.push(i)}if(!t.length)return $1(e.id),{listings:0};let n=0,r=!0;for(const s of t)try{const i=localStorage.getItem(s);if(!i)continue;const a=JSON.parse(i);if(!a||typeof a!="object")continue;const l=a,c=(l==null?void 0:l.userId)??s.replace(F1,"");if(c&&c!==e.id)continue;const h=ZV(e,l??{});await qv(h)&&(n+=1,localStorage.removeItem(s))}catch(i){r=!1,console.error("Failed to migrate legacy listing",{key:s,error:i})}return r&&$1(e.id),typeof window<"u"&&n>0&&window.dispatchEvent(new Event("listings-updated")),{listings:n}},QV=()=>{const{profile:e}=Rr(),{toast:t}=ks(),n=g.useRef(null);return g.useEffect(()=>{if(typeof window>"u")return;if(!(e!=null&&e.id)){n.current=null;return}if(n.current===e.id)return;n.current=e.id;let r=!0;return(async()=>{try{const i=await $V();if(!i.ok){if(!r)return;t({title:"Supabase setup required",description:i.issues.map(c=>`${c.table}: ${c.error}`).join(`
`),variant:"destructive"}),console.warn("Supabase table verification issues",i.issues);return}const a=await GV({id:e.id,full_name:e.full_name,email:e.email});if(!r)return;if(a.bookings||a.messages){const c=[];a.bookings&&c.push(`${a.bookings} booking request${a.bookings===1?"":"s"}`),a.messages&&c.push(`${a.messages} message${a.messages===1?"":"s"}`),t({title:"Legacy requests synced",description:`Moved ${c.join(" and ")} into Supabase.`})}const l=await KV({id:e.id,full_name:e.full_name,email:e.email});if(!r)return;l.listings&&t({title:"Legacy listing published",description:`Moved ${l.listings} offline listing${l.listings===1?"":"s"} into Supabase.`})}catch(i){if(!r)return;console.error("Legacy data sync failed",i),t({title:"Legacy sync failed",description:"We couldn't move your past data into Supabase. Please retry later.",variant:"destructive"})}})(),()=>{r=!1}},[e==null?void 0:e.id,e==null?void 0:e.full_name,e==null?void 0:e.email,e==null?void 0:e.user_role,t]),null},pg=async(e,t=15e3,n="Request timed out")=>{let r;const s=new Promise((i,a)=>{r=setTimeout(()=>a(new Error(n)),t)});try{return await Promise.race([e,s])}finally{clearTimeout(r)}},XV=({children:e})=>{const[t,n]=g.useState(null),[r,s]=g.useState(null),[i,a]=g.useState(!0),[l,c]=g.useState(null),h=async y=>{var S,w;if(!(y!=null&&y.user)){s(null),c(null),a(!1);return}try{a(!0),c(null);const b=await pg(wj(y.user.id),12e3,"Timed out loading profile");if(b)s(b);else{const E=await gx({id:y.user.id,email:y.user.email??"",full_name:((S=y.user.user_metadata)==null?void 0:S.full_name)??null,user_role:((w=y.user.user_metadata)==null?void 0:w.user_role)??"renter",avatar_url:null,bio:null,student_id_url:null,university:null,program_name:null,program_year:null,program_type:null});s(E)}}catch(b){console.error("Failed to load profile",b),s(null),c(b instanceof Error?b.message:"Unable to load profile.")}finally{a(!1)}};g.useEffect(()=>{let y=null,S=!0;return(async()=>{var b;try{const{data:E,error:_}=await pg(be.auth.getSession(),15e3,"Timed out loading auth session");if(!S)return;if(_)throw _;n(E.session??null),await h(E.session??null),y=((b=be.auth.onAuthStateChange((P,T)=>{S&&(n(T),h(T))}).data)==null?void 0:b.subscription)??null}catch(E){console.error("Failed to initialise auth session",E),S&&(n(null),s(null),c(E instanceof Error?E.message:"Unable to connect to Supabase."),a(!1))}})(),()=>{S=!1,y==null||y.unsubscribe()}},[]);const v={user:r,session:t,profile:r,loading:i,authError:l,signOut:async()=>{await be.auth.signOut(),n(null),s(null),c(null)},refreshUser:async()=>{const{data:y}=await pg(be.auth.getSession(),15e3,"Timed out refreshing auth session");n(y.session??null),await h(y.session??null)}};return d.jsx(Qk.Provider,{value:v,children:e})},JV=async(e,t=5e3,n="Request timed out")=>{let r;const s=new Promise((i,a)=>{r=setTimeout(()=>a(new Error(n)),t)});try{return await Promise.race([e,s])}finally{clearTimeout(r)}},eq=({children:e})=>{const[t,n]=g.useState(null),[r,s]=g.useState(!0);g.useEffect(()=>{let a=!0;(async()=>{try{const{data:h,error:f}=await JV(be.auth.getSession(),6e3,"Timed out loading session");if(!a)return;if(f)throw f;n(h.session??null)}catch(h){console.error("Failed to load Supabase session",h),a&&n(null)}finally{a&&s(!1)}})();const{data:c}=be.auth.onAuthStateChange((h,f)=>{a&&(n(f),s(!1))});return()=>{a=!1,c.subscription.unsubscribe()}},[]);const i=g.useMemo(()=>({session:t,user:(t==null?void 0:t.user)??null,loading:r,signOut:()=>be.auth.signOut()}),[t,r]);return d.jsx(yj.Provider,{value:i,children:e})},ds=({children:e})=>{const{user:t,loading:n,authError:r}=Rr();return n?d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 to-secondary/10 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),d.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})}):r?d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-primary/10 to-secondary/10 px-4 text-center",children:d.jsxs("div",{className:"max-w-md space-y-3 rounded-3xl border border-white/50 bg-white/90 p-6 shadow-lg",children:[d.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"Unable to reach Supabase"}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[r,d.jsx("br",{}),"Check that ",d.jsx("code",{className:"font-mono",children:"VITE_SUPABASE_URL"})," and ",d.jsx("code",{className:"font-mono",children:"VITE_SUPABASE_ANON_KEY"})," are set in your ",d.jsx("code",{children:".env"})," file or that the Supabase service is reachable, then refresh the page."]})]})}):t?d.jsx(d.Fragment,{children:e}):d.jsx(aF,{to:"/auth",replace:!0})};var uy=["Enter"," "],tq=["ArrowDown","PageUp","Home"],_R=["ArrowUp","PageDown","End"],nq=[...tq,..._R],rq={ltr:[...uy,"ArrowRight"],rtl:[...uy,"ArrowLeft"]},sq={ltr:["ArrowLeft"],rtl:["ArrowRight"]},qu="Menu",[mu,iq,oq]=Df(qu),[oa,bR]=Tn(qu,[oq,ro,gp]),bp=ro(),SR=gp(),[aq,aa]=oa(qu),[lq,Gu]=oa(qu),ER=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:i,modal:a=!0}=e,l=bp(t),[c,h]=g.useState(null),f=g.useRef(!1),m=Mt(i),v=zu(s);return g.useEffect(()=>{const y=()=>{f.current=!0,document.addEventListener("pointerdown",S,{capture:!0,once:!0}),document.addEventListener("pointermove",S,{capture:!0,once:!0})},S=()=>f.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",S,{capture:!0}),document.removeEventListener("pointermove",S,{capture:!0})}},[]),d.jsx(k0,{...l,children:d.jsx(aq,{scope:t,open:n,onOpenChange:m,content:c,onContentChange:h,children:d.jsx(lq,{scope:t,onClose:g.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:f,dir:v,modal:a,children:r})})})};ER.displayName=qu;var cq="MenuAnchor",Cx=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=bp(n);return d.jsx(Nu,{...s,...r,ref:t})});Cx.displayName=cq;var kx="MenuPortal",[uq,CR]=oa(kx,{forceMount:void 0}),kR=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,i=aa(kx,t);return d.jsx(uq,{scope:t,forceMount:n,children:d.jsx(Jt,{present:n||i.open,children:d.jsx(Cl,{asChild:!0,container:s,children:r})})})};kR.displayName=kx;var Nr="MenuContent",[dq,Px]=oa(Nr),PR=g.forwardRef((e,t)=>{const n=CR(Nr,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=aa(Nr,e.__scopeMenu),a=Gu(Nr,e.__scopeMenu);return d.jsx(mu.Provider,{scope:e.__scopeMenu,children:d.jsx(Jt,{present:r||i.open,children:d.jsx(mu.Slot,{scope:e.__scopeMenu,children:a.modal?d.jsx(hq,{...s,ref:t}):d.jsx(fq,{...s,ref:t})})})})}),hq=g.forwardRef((e,t)=>{const n=aa(Nr,e.__scopeMenu),r=g.useRef(null),s=ze(t,r);return g.useEffect(()=>{const i=r.current;if(i)return Xf(i)},[]),d.jsx(Nx,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:le(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),fq=g.forwardRef((e,t)=>{const n=aa(Nr,e.__scopeMenu);return d.jsx(Nx,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),pq=Zi("MenuContent.ScrollLock"),Nx=g.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:v,onDismiss:y,disableOutsideScroll:S,...w}=e,b=aa(Nr,n),E=Gu(Nr,n),_=bp(n),C=SR(n),P=iq(n),[T,R]=g.useState(null),O=g.useRef(null),A=ze(t,O,b.onContentChange),B=g.useRef(0),q=g.useRef(""),Q=g.useRef(0),W=g.useRef(null),z=g.useRef("right"),M=g.useRef(0),ee=S?Lu:g.Fragment,H=S?{as:pq,allowPinchZoom:!0}:void 0,Z=U=>{var ne,he;const Y=q.current+U,se=P().filter(Me=>!Me.disabled),te=document.activeElement,ue=(ne=se.find(Me=>Me.ref.current===te))==null?void 0:ne.textValue,F=se.map(Me=>Me.textValue),J=kq(F,Y,ue),G=(he=se.find(Me=>Me.textValue===J))==null?void 0:he.ref.current;(function Me(Ee){q.current=Ee,window.clearTimeout(B.current),Ee!==""&&(B.current=window.setTimeout(()=>Me(""),1e3))})(Y),G&&setTimeout(()=>G.focus())};g.useEffect(()=>()=>window.clearTimeout(B.current),[]),Qf();const j=g.useCallback(U=>{var se,te;return z.current===((se=W.current)==null?void 0:se.side)&&Nq(U,(te=W.current)==null?void 0:te.area)},[]);return d.jsx(dq,{scope:n,searchRef:q,onItemEnter:g.useCallback(U=>{j(U)&&U.preventDefault()},[j]),onItemLeave:g.useCallback(U=>{var Y;j(U)||((Y=O.current)==null||Y.focus(),R(null))},[j]),onTriggerLeave:g.useCallback(U=>{j(U)&&U.preventDefault()},[j]),pointerGraceTimerRef:Q,onPointerGraceIntentChange:g.useCallback(U=>{W.current=U},[]),children:d.jsx(ee,{...H,children:d.jsx(Au,{asChild:!0,trapped:s,onMountAutoFocus:le(i,U=>{var Y;U.preventDefault(),(Y=O.current)==null||Y.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:d.jsx(ra,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:v,onDismiss:y,children:d.jsx(nj,{asChild:!0,...C,dir:E.dir,orientation:"vertical",loop:r,currentTabStopId:T,onCurrentTabStopIdChange:R,onEntryFocus:le(c,U=>{E.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:d.jsx(Vf,{role:"menu","aria-orientation":"vertical","data-state":WR(b.open),"data-radix-menu-content":"",dir:E.dir,..._,...w,ref:A,style:{outline:"none",...w.style},onKeyDown:le(w.onKeyDown,U=>{const se=U.target.closest("[data-radix-menu-content]")===U.currentTarget,te=U.ctrlKey||U.altKey||U.metaKey,ue=U.key.length===1;se&&(U.key==="Tab"&&U.preventDefault(),!te&&ue&&Z(U.key));const F=O.current;if(U.target!==F||!nq.includes(U.key))return;U.preventDefault();const G=P().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);_R.includes(U.key)&&G.reverse(),Eq(G)}),onBlur:le(e.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(B.current),q.current="")}),onPointerMove:le(e.onPointerMove,gu(U=>{const Y=U.target,se=M.current!==U.clientX;if(U.currentTarget.contains(Y)&&se){const te=U.clientX>M.current?"right":"left";z.current=te,M.current=U.clientX}}))})})})})})})});PR.displayName=Nr;var mq="MenuGroup",Tx=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return d.jsx(ke.div,{role:"group",...r,ref:t})});Tx.displayName=mq;var gq="MenuLabel",NR=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return d.jsx(ke.div,{...r,ref:t})});NR.displayName=gq;var vf="MenuItem",U1="menu.itemSelect",Sp=g.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,i=g.useRef(null),a=Gu(vf,e.__scopeMenu),l=Px(vf,e.__scopeMenu),c=ze(t,i),h=g.useRef(!1),f=()=>{const m=i.current;if(!n&&m){const v=new CustomEvent(U1,{bubbles:!0,cancelable:!0});m.addEventListener(U1,y=>r==null?void 0:r(y),{once:!0}),a0(m,v),v.defaultPrevented?h.current=!1:a.onClose()}};return d.jsx(TR,{...s,ref:c,disabled:n,onClick:le(e.onClick,f),onPointerDown:m=>{var v;(v=e.onPointerDown)==null||v.call(e,m),h.current=!0},onPointerUp:le(e.onPointerUp,m=>{var v;h.current||(v=m.currentTarget)==null||v.click()}),onKeyDown:le(e.onKeyDown,m=>{const v=l.searchRef.current!=="";n||v&&m.key===" "||uy.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Sp.displayName=vf;var TR=g.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=e,a=Px(vf,n),l=SR(n),c=g.useRef(null),h=ze(t,c),[f,m]=g.useState(!1),[v,y]=g.useState("");return g.useEffect(()=>{const S=c.current;S&&y((S.textContent??"").trim())},[i.children]),d.jsx(mu.ItemSlot,{scope:n,disabled:r,textValue:s??v,children:d.jsx(rj,{asChild:!0,...l,focusable:!r,children:d.jsx(ke.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:h,onPointerMove:le(e.onPointerMove,gu(S=>{r?a.onItemLeave(S):(a.onItemEnter(S),S.defaultPrevented||S.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:le(e.onPointerLeave,gu(S=>a.onItemLeave(S))),onFocus:le(e.onFocus,()=>m(!0)),onBlur:le(e.onBlur,()=>m(!1))})})})}),vq="MenuCheckboxItem",jR=g.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return d.jsx(AR,{scope:e.__scopeMenu,checked:n,children:d.jsx(Sp,{role:"menuitemcheckbox","aria-checked":yf(n)?"mixed":n,...s,ref:t,"data-state":Rx(n),onSelect:le(s.onSelect,()=>r==null?void 0:r(yf(n)?!0:!n),{checkForDefaultPrevented:!1})})})});jR.displayName=vq;var RR="MenuRadioGroup",[yq,xq]=oa(RR,{value:void 0,onValueChange:()=>{}}),MR=g.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,i=Mt(r);return d.jsx(yq,{scope:e.__scopeMenu,value:n,onValueChange:i,children:d.jsx(Tx,{...s,ref:t})})});MR.displayName=RR;var OR="MenuRadioItem",IR=g.forwardRef((e,t)=>{const{value:n,...r}=e,s=xq(OR,e.__scopeMenu),i=n===s.value;return d.jsx(AR,{scope:e.__scopeMenu,checked:i,children:d.jsx(Sp,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":Rx(i),onSelect:le(r.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,n)},{checkForDefaultPrevented:!1})})})});IR.displayName=OR;var jx="MenuItemIndicator",[AR,wq]=oa(jx,{checked:!1}),LR=g.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,i=wq(jx,n);return d.jsx(Jt,{present:r||yf(i.checked)||i.checked===!0,children:d.jsx(ke.span,{...s,ref:t,"data-state":Rx(i.checked)})})});LR.displayName=jx;var _q="MenuSeparator",DR=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return d.jsx(ke.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});DR.displayName=_q;var bq="MenuArrow",FR=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=bp(n);return d.jsx(qf,{...s,...r,ref:t})});FR.displayName=bq;var Sq="MenuSub",[qG,$R]=oa(Sq),bc="MenuSubTrigger",UR=g.forwardRef((e,t)=>{const n=aa(bc,e.__scopeMenu),r=Gu(bc,e.__scopeMenu),s=$R(bc,e.__scopeMenu),i=Px(bc,e.__scopeMenu),a=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,h={__scopeMenu:e.__scopeMenu},f=g.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return g.useEffect(()=>f,[f]),g.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),c(null)}},[l,c]),d.jsx(Cx,{asChild:!0,...h,children:d.jsx(TR,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":WR(n.open),...e,ref:Lf(t,s.onTriggerChange),onClick:m=>{var v;(v=e.onClick)==null||v.call(e,m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:le(e.onPointerMove,gu(m=>{i.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!n.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:le(e.onPointerLeave,gu(m=>{var y,S;f();const v=(y=n.content)==null?void 0:y.getBoundingClientRect();if(v){const w=(S=n.content)==null?void 0:S.dataset.side,b=w==="right",E=b?-5:5,_=v[b?"left":"right"],C=v[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+E,y:m.clientY},{x:_,y:v.top},{x:C,y:v.top},{x:C,y:v.bottom},{x:_,y:v.bottom}],side:w}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:le(e.onKeyDown,m=>{var y;const v=i.searchRef.current!=="";e.disabled||v&&m.key===" "||rq[r.dir].includes(m.key)&&(n.onOpenChange(!0),(y=n.content)==null||y.focus(),m.preventDefault())})})})});UR.displayName=bc;var zR="MenuSubContent",BR=g.forwardRef((e,t)=>{const n=CR(Nr,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=aa(Nr,e.__scopeMenu),a=Gu(Nr,e.__scopeMenu),l=$R(zR,e.__scopeMenu),c=g.useRef(null),h=ze(t,c);return d.jsx(mu.Provider,{scope:e.__scopeMenu,children:d.jsx(Jt,{present:r||i.open,children:d.jsx(mu.Slot,{scope:e.__scopeMenu,children:d.jsx(Nx,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:h,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var m;a.isUsingKeyboardRef.current&&((m=c.current)==null||m.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:le(e.onFocusOutside,f=>{f.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:le(e.onEscapeKeyDown,f=>{a.onClose(),f.preventDefault()}),onKeyDown:le(e.onKeyDown,f=>{var y;const m=f.currentTarget.contains(f.target),v=sq[a.dir].includes(f.key);m&&v&&(i.onOpenChange(!1),(y=l.trigger)==null||y.focus(),f.preventDefault())})})})})})});BR.displayName=zR;function WR(e){return e?"open":"closed"}function yf(e){return e==="indeterminate"}function Rx(e){return yf(e)?"indeterminate":e?"checked":"unchecked"}function Eq(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Cq(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function kq(e,t,n){const s=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let a=Cq(e,Math.max(i,0));s.length===1&&(a=a.filter(h=>h!==n));const c=a.find(h=>h.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function Pq(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const l=t[i],c=t[a],h=l.x,f=l.y,m=c.x,v=c.y;f>r!=v>r&&n<(m-h)*(r-f)/(v-f)+h&&(s=!s)}return s}function Nq(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Pq(n,t)}function gu(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Tq=ER,jq=Cx,Rq=kR,Mq=PR,Oq=Tx,Iq=NR,Aq=Sp,Lq=jR,Dq=MR,Fq=IR,$q=LR,Uq=DR,zq=FR,Bq=UR,Wq=BR,Ep="DropdownMenu",[Hq,GG]=Tn(Ep,[bR]),jn=bR(),[Vq,HR]=Hq(Ep),VR=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:a,modal:l=!0}=e,c=jn(t),h=g.useRef(null),[f,m]=ti({prop:s,defaultProp:i??!1,onChange:a,caller:Ep});return d.jsx(Vq,{scope:t,triggerId:bs(),triggerRef:h,contentId:bs(),open:f,onOpenChange:m,onOpenToggle:g.useCallback(()=>m(v=>!v),[m]),modal:l,children:d.jsx(Tq,{...c,open:f,onOpenChange:m,dir:r,modal:l,children:n})})};VR.displayName=Ep;var qR="DropdownMenuTrigger",GR=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,i=HR(qR,n),a=jn(n);return d.jsx(jq,{asChild:!0,...a,children:d.jsx(ke.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Lf(t,i.triggerRef),onPointerDown:le(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:le(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});GR.displayName=qR;var qq="DropdownMenuPortal",YR=e=>{const{__scopeDropdownMenu:t,...n}=e,r=jn(t);return d.jsx(Rq,{...r,...n})};YR.displayName=qq;var ZR="DropdownMenuContent",KR=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=HR(ZR,n),i=jn(n),a=g.useRef(!1);return d.jsx(Mq,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:t,onCloseAutoFocus:le(e.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:le(e.onInteractOutside,l=>{const c=l.detail.originalEvent,h=c.button===0&&c.ctrlKey===!0,f=c.button===2||h;(!s.modal||f)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});KR.displayName=ZR;var Gq="DropdownMenuGroup",Yq=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=jn(n);return d.jsx(Oq,{...s,...r,ref:t})});Yq.displayName=Gq;var Zq="DropdownMenuLabel",QR=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=jn(n);return d.jsx(Iq,{...s,...r,ref:t})});QR.displayName=Zq;var Kq="DropdownMenuItem",XR=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=jn(n);return d.jsx(Aq,{...s,...r,ref:t})});XR.displayName=Kq;var Qq="DropdownMenuCheckboxItem",JR=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=jn(n);return d.jsx(Lq,{...s,...r,ref:t})});JR.displayName=Qq;var Xq="DropdownMenuRadioGroup",Jq=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=jn(n);return d.jsx(Dq,{...s,...r,ref:t})});Jq.displayName=Xq;var eG="DropdownMenuRadioItem",e2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=jn(n);return d.jsx(Fq,{...s,...r,ref:t})});e2.displayName=eG;var tG="DropdownMenuItemIndicator",t2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=jn(n);return d.jsx($q,{...s,...r,ref:t})});t2.displayName=tG;var nG="DropdownMenuSeparator",n2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=jn(n);return d.jsx(Uq,{...s,...r,ref:t})});n2.displayName=nG;var rG="DropdownMenuArrow",sG=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=jn(n);return d.jsx(zq,{...s,...r,ref:t})});sG.displayName=rG;var iG="DropdownMenuSubTrigger",r2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=jn(n);return d.jsx(Bq,{...s,...r,ref:t})});r2.displayName=iG;var oG="DropdownMenuSubContent",s2=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=jn(n);return d.jsx(Wq,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});s2.displayName=oG;var aG=VR,lG=GR,cG=YR,i2=KR,o2=QR,a2=XR,l2=JR,c2=e2,u2=t2,d2=n2,h2=r2,f2=s2;const uG=aG,dG=lG,hG=g.forwardRef(({className:e,inset:t,children:n,...r},s)=>d.jsxs(h2,{ref:s,className:Te("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...r,children:[n,d.jsx(f0,{className:"ml-auto h-4 w-4"})]}));hG.displayName=h2.displayName;const fG=g.forwardRef(({className:e,...t},n)=>d.jsx(f2,{ref:n,className:Te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));fG.displayName=f2.displayName;const p2=g.forwardRef(({className:e,sideOffset:t=4,...n},r)=>d.jsx(cG,{children:d.jsx(i2,{ref:r,sideOffset:t,className:Te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));p2.displayName=i2.displayName;const dy=g.forwardRef(({className:e,inset:t,...n},r)=>d.jsx(a2,{ref:r,className:Te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...n}));dy.displayName=a2.displayName;const pG=g.forwardRef(({className:e,children:t,checked:n,...r},s)=>d.jsxs(l2,{ref:s,className:Te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:n,...r,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(u2,{children:d.jsx(h0,{className:"h-4 w-4"})})}),t]}));pG.displayName=l2.displayName;const mG=g.forwardRef(({className:e,children:t,...n},r)=>d.jsxs(c2,{ref:r,className:Te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(u2,{children:d.jsx($C,{className:"h-2 w-2 fill-current"})})}),t]}));mG.displayName=c2.displayName;const gG=g.forwardRef(({className:e,inset:t,...n},r)=>d.jsx(o2,{ref:r,className:Te("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));gG.displayName=o2.displayName;const vG=g.forwardRef(({className:e,...t},n)=>d.jsx(d2,{ref:n,className:Te("-mx-1 my-1 h-px bg-muted",e),...t}));vG.displayName=d2.displayName;const yG=[{label:"Reservations",path:"/dashboard"},{label:"Listings",path:"/listings"},{label:"Wishlist",path:"/wishlist"},{label:"Messages",path:"/messages"},{label:"Profile",path:"/profile"}],xG=()=>{const e=ts(),t=sa(),{signOut:n,profile:r}=Rr(),s=(r==null?void 0:r.user_role)==="host",i=(a,l)=>{e("/listings",{state:{listingScope:a,triggerEdit:!1}})};return t.pathname==="/auth"||t.pathname==="/"?null:d.jsxs("div",{className:"pointer-events-none fixed right-4 top-4 z-40 flex flex-col items-end gap-3",children:[d.jsx("div",{className:"pointer-events-auto flex flex-wrap justify-end gap-2",children:yG.map(a=>a.path==="/listings"&&s?d.jsxs(uG,{children:[d.jsx(dG,{asChild:!0,children:d.jsxs(Le,{size:"sm",variant:t.pathname.startsWith(a.path)?"default":"outline",className:"rounded-full border-white/70 bg-white/90 text-slate-700 shadow",children:["Listings",d.jsx(zf,{className:"ml-2 h-4 w-4"})]})}),d.jsxs(p2,{align:"end",className:"min-w-[10rem]",children:[d.jsx(dy,{onSelect:()=>i("all"),children:"All listings"}),d.jsx(dy,{onSelect:()=>i("mine"),children:"Edit my listing"})]})]},`${a.path}-dropdown`):d.jsx(Le,{size:"sm",variant:t.pathname.startsWith(a.path)?"default":"outline",className:"rounded-full border-white/70 bg-white/90 text-slate-700 shadow",onClick:()=>e(a.path),children:a.label},a.path))}),d.jsx(Le,{onClick:()=>n(),variant:"destructive",size:"sm",className:"pointer-events-auto rounded-full bg-red-600 text-white shadow hover:bg-red-500",children:"Sign out"})]})},wG=new r5,_G=()=>d.jsx(l5,{client:wG,children:d.jsx(eq,{children:d.jsxs(XV,{children:[d.jsx(QV,{}),d.jsxs(U3,{children:[d.jsx(EL,{}),d.jsx(nD,{}),d.jsxs(hF,{children:[d.jsx(xG,{}),d.jsxs(cF,{children:[d.jsx(An,{path:"/",element:d.jsx(k7,{})}),d.jsx(An,{path:"/auth",element:d.jsx(_7,{})}),d.jsx(An,{path:"/listings",element:d.jsx(ds,{children:d.jsx(C8,{})})}),d.jsx(An,{path:"/couch/:id",element:d.jsx(ds,{children:d.jsx(J8,{})})}),d.jsx(An,{path:"/renter-dashboard",element:d.jsx(ds,{children:d.jsx(xV,{})})}),d.jsx(An,{path:"/host-requests",element:d.jsx(ds,{children:d.jsx(RV,{})})}),d.jsx(An,{path:"/wishlist",element:d.jsx(ds,{children:d.jsx(kV,{})})}),d.jsx(An,{path:"/profile",element:d.jsx(ds,{children:d.jsx(CV,{})})}),d.jsx(An,{path:"/notes",element:d.jsx(ds,{children:d.jsx(OV,{})})}),d.jsx(An,{path:"/messages",element:d.jsx(ds,{children:d.jsx(IV,{})})}),d.jsx(An,{path:"/dashboard",element:d.jsx(ds,{children:d.jsx(D1,{})})}),d.jsx(An,{path:"/bookings",element:d.jsx(ds,{children:d.jsx(D1,{})})}),d.jsx(An,{path:"*",element:d.jsx(fF,{})})]})]})]})]})})});uC(document.getElementById("root")).render(d.jsx(_G,{}));
