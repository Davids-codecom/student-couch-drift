const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ListingsMap-DXBzhxz4.js","assets/ListingsMap-Dgihpmma.css","assets/Iridescence-BunyMf_H.js","assets/Iridescence-oHjkLuLk.css"])))=>i.map(i=>d[i]);
var Sy=e=>{throw TypeError(e)};var Wf=(e,t,n)=>t.has(e)||Sy("Cannot "+n);var k=(e,t,n)=>(Wf(e,t,"read from private field"),n?n.call(e):t.get(e)),me=(e,t,n)=>t.has(e)?Sy("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ee=(e,t,n,r)=>(Wf(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),je=(e,t,n)=>(Wf(e,t,"access private method"),n);var Rc=(e,t,n,r)=>({set _(s){ee(e,t,s,n)},get _(){return k(e,t,r)}});function Qj(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var $n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Jj(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var $x={exports:{}},$d={},Fx={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rc=Symbol.for("react.element"),Xj=Symbol.for("react.portal"),Zj=Symbol.for("react.fragment"),eP=Symbol.for("react.strict_mode"),tP=Symbol.for("react.profiler"),nP=Symbol.for("react.provider"),rP=Symbol.for("react.context"),sP=Symbol.for("react.forward_ref"),oP=Symbol.for("react.suspense"),aP=Symbol.for("react.memo"),iP=Symbol.for("react.lazy"),_y=Symbol.iterator;function lP(e){return e===null||typeof e!="object"?null:(e=_y&&e[_y]||e["@@iterator"],typeof e=="function"?e:null)}var Ux={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bx=Object.assign,Wx={};function yi(e,t,n){this.props=e,this.context=t,this.refs=Wx,this.updater=n||Ux}yi.prototype.isReactComponent={};yi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};yi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function zx(){}zx.prototype=yi.prototype;function Jm(e,t,n){this.props=e,this.context=t,this.refs=Wx,this.updater=n||Ux}var Xm=Jm.prototype=new zx;Xm.constructor=Jm;Bx(Xm,yi.prototype);Xm.isPureReactComponent=!0;var Ey=Array.isArray,Hx=Object.prototype.hasOwnProperty,Zm={current:null},Vx={key:!0,ref:!0,__self:!0,__source:!0};function Yx(e,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Hx.call(t,r)&&!Vx.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:rc,type:e,key:o,ref:a,props:s,_owner:Zm.current}}function cP(e,t){return{$$typeof:rc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function eg(e){return typeof e=="object"&&e!==null&&e.$$typeof===rc}function uP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Cy=/\/+/g;function zf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?uP(""+e.key):t.toString(36)}function du(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case rc:case Xj:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+zf(a,0):r,Ey(s)?(n="",e!=null&&(n=e.replace(Cy,"$&/")+"/"),du(s,t,n,"",function(u){return u})):s!=null&&(eg(s)&&(s=cP(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Cy,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Ey(e))for(var i=0;i<e.length;i++){o=e[i];var c=r+zf(o,i);a+=du(o,t,n,c,s)}else if(c=lP(e),typeof c=="function")for(e=c.call(e),i=0;!(o=e.next()).done;)o=o.value,c=r+zf(o,i++),a+=du(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ic(e,t,n){if(e==null)return e;var r=[],s=0;return du(e,r,"","",function(o){return t.call(n,o,s++)}),r}function dP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Vt={current:null},fu={transition:null},fP={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:fu,ReactCurrentOwner:Zm};function Kx(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:Ic,forEach:function(e,t,n){Ic(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ic(e,function(){t++}),t},toArray:function(e){return Ic(e,function(t){return t})||[]},only:function(e){if(!eg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Pe.Component=yi;Pe.Fragment=Zj;Pe.Profiler=tP;Pe.PureComponent=Jm;Pe.StrictMode=eP;Pe.Suspense=oP;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fP;Pe.act=Kx;Pe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Bx({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Zm.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Hx.call(t,c)&&!Vx.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var u=0;u<c;u++)i[u]=arguments[u+2];r.children=i}return{$$typeof:rc,type:e.type,key:s,ref:o,props:r,_owner:a}};Pe.createContext=function(e){return e={$$typeof:rP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:nP,_context:e},e.Consumer=e};Pe.createElement=Yx;Pe.createFactory=function(e){var t=Yx.bind(null,e);return t.type=e,t};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(e){return{$$typeof:sP,render:e}};Pe.isValidElement=eg;Pe.lazy=function(e){return{$$typeof:iP,_payload:{_status:-1,_result:e},_init:dP}};Pe.memo=function(e,t){return{$$typeof:aP,type:e,compare:t===void 0?null:t}};Pe.startTransition=function(e){var t=fu.transition;fu.transition={};try{e()}finally{fu.transition=t}};Pe.unstable_act=Kx;Pe.useCallback=function(e,t){return Vt.current.useCallback(e,t)};Pe.useContext=function(e){return Vt.current.useContext(e)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(e){return Vt.current.useDeferredValue(e)};Pe.useEffect=function(e,t){return Vt.current.useEffect(e,t)};Pe.useId=function(){return Vt.current.useId()};Pe.useImperativeHandle=function(e,t,n){return Vt.current.useImperativeHandle(e,t,n)};Pe.useInsertionEffect=function(e,t){return Vt.current.useInsertionEffect(e,t)};Pe.useLayoutEffect=function(e,t){return Vt.current.useLayoutEffect(e,t)};Pe.useMemo=function(e,t){return Vt.current.useMemo(e,t)};Pe.useReducer=function(e,t,n){return Vt.current.useReducer(e,t,n)};Pe.useRef=function(e){return Vt.current.useRef(e)};Pe.useState=function(e){return Vt.current.useState(e)};Pe.useSyncExternalStore=function(e,t,n){return Vt.current.useSyncExternalStore(e,t,n)};Pe.useTransition=function(){return Vt.current.useTransition()};Pe.version="18.3.1";Fx.exports=Pe;var f=Fx.exports;const K=Qm(f),tg=Qj({__proto__:null,default:K},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hP=f,pP=Symbol.for("react.element"),mP=Symbol.for("react.fragment"),gP=Object.prototype.hasOwnProperty,vP=hP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yP={key:!0,ref:!0,__self:!0,__source:!0};function Gx(e,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)gP.call(t,r)&&!yP.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:pP,type:e,key:o,ref:a,props:s,_owner:vP.current}}$d.Fragment=mP;$d.jsx=Gx;$d.jsxs=Gx;$x.exports=$d;var l=$x.exports,qx={exports:{}},Cn={},Qx={exports:{}},Jx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,R){var W=E.length;E.push(R);e:for(;0<W;){var J=W-1>>>1,Y=E[J];if(0<s(Y,R))E[J]=R,E[W]=Y,W=J;else break e}}function n(E){return E.length===0?null:E[0]}function r(E){if(E.length===0)return null;var R=E[0],W=E.pop();if(W!==R){E[0]=W;e:for(var J=0,Y=E.length,ue=Y>>>1;J<ue;){var B=2*(J+1)-1,D=E[B],U=B+1,H=E[U];if(0>s(D,W))U<Y&&0>s(H,D)?(E[J]=H,E[U]=W,J=U):(E[J]=D,E[B]=W,J=B);else if(U<Y&&0>s(H,W))E[J]=H,E[U]=W,J=U;else break e}}return R}function s(E,R){var W=E.sortIndex-R.sortIndex;return W!==0?W:E.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],u=[],d=1,h=null,p=3,m=!1,w=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(E){for(var R=n(u);R!==null;){if(R.callback===null)r(u);else if(R.startTime<=E)r(u),R.sortIndex=R.expirationTime,t(c,R);else break;R=n(u)}}function S(E){if(v=!1,b(E),!w)if(n(c)!==null)w=!0,A(_);else{var R=n(u);R!==null&&M(S,R.startTime-E)}}function _(E,R){w=!1,v&&(v=!1,x(T),T=-1),m=!0;var W=p;try{for(b(R),h=n(c);h!==null&&(!(h.expirationTime>R)||E&&!V());){var J=h.callback;if(typeof J=="function"){h.callback=null,p=h.priorityLevel;var Y=J(h.expirationTime<=R);R=e.unstable_now(),typeof Y=="function"?h.callback=Y:h===n(c)&&r(c),b(R)}else r(c);h=n(c)}if(h!==null)var ue=!0;else{var B=n(u);B!==null&&M(S,B.startTime-R),ue=!1}return ue}finally{h=null,p=W,m=!1}}var C=!1,N=null,T=-1,L=5,$=-1;function V(){return!(e.unstable_now()-$<L)}function F(){if(N!==null){var E=e.unstable_now();$=E;var R=!0;try{R=N(!0,E)}finally{R?O():(C=!1,N=null)}}else C=!1}var O;if(typeof g=="function")O=function(){g(F)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,z=j.port2;j.port1.onmessage=F,O=function(){z.postMessage(null)}}else O=function(){y(F,0)};function A(E){N=E,C||(C=!0,O())}function M(E,R){T=y(function(){E(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){w||m||(w=!0,A(_))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(E){switch(p){case 1:case 2:case 3:var R=3;break;default:R=p}var W=p;p=R;try{return E()}finally{p=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,R){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var W=p;p=E;try{return R()}finally{p=W}},e.unstable_scheduleCallback=function(E,R,W){var J=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?J+W:J):W=J,E){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=W+Y,E={id:d++,callback:R,priorityLevel:E,startTime:W,expirationTime:Y,sortIndex:-1},W>J?(E.sortIndex=W,t(u,E),n(c)===null&&E===n(u)&&(v?(x(T),T=-1):v=!0,M(S,W-J))):(E.sortIndex=Y,t(c,E),w||m||(w=!0,A(_))),E},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(E){var R=p;return function(){var W=p;p=R;try{return E.apply(this,arguments)}finally{p=W}}}})(Jx);Qx.exports=Jx;var wP=Qx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xP=f,_n=wP;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xx=new Set,_l={};function na(e,t){si(e,t),si(e+"Capture",t)}function si(e,t){for(_l[e]=t,e=0;e<t.length;e++)Xx.add(t[e])}var ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sp=Object.prototype.hasOwnProperty,bP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ky={},Ny={};function SP(e){return sp.call(Ny,e)?!0:sp.call(ky,e)?!1:bP.test(e)?Ny[e]=!0:(ky[e]=!0,!1)}function _P(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function EP(e,t,n,r){if(t===null||typeof t>"u"||_P(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Yt(e,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){kt[e]=new Yt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];kt[t]=new Yt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){kt[e]=new Yt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){kt[e]=new Yt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){kt[e]=new Yt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){kt[e]=new Yt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){kt[e]=new Yt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){kt[e]=new Yt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){kt[e]=new Yt(e,5,!1,e.toLowerCase(),null,!1,!1)});var ng=/[\-:]([a-z])/g;function rg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ng,rg);kt[t]=new Yt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ng,rg);kt[t]=new Yt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ng,rg);kt[t]=new Yt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){kt[e]=new Yt(e,1,!1,e.toLowerCase(),null,!1,!1)});kt.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){kt[e]=new Yt(e,1,!1,e.toLowerCase(),null,!0,!0)});function sg(e,t,n,r){var s=kt.hasOwnProperty(t)?kt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(EP(t,n,s,r)&&(n=null),r||s===null?SP(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var cs=xP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oc=Symbol.for("react.element"),Ea=Symbol.for("react.portal"),Ca=Symbol.for("react.fragment"),og=Symbol.for("react.strict_mode"),op=Symbol.for("react.profiler"),Zx=Symbol.for("react.provider"),eb=Symbol.for("react.context"),ag=Symbol.for("react.forward_ref"),ap=Symbol.for("react.suspense"),ip=Symbol.for("react.suspense_list"),ig=Symbol.for("react.memo"),Ss=Symbol.for("react.lazy"),tb=Symbol.for("react.offscreen"),jy=Symbol.iterator;function Mi(e){return e===null||typeof e!="object"?null:(e=jy&&e[jy]||e["@@iterator"],typeof e=="function"?e:null)}var rt=Object.assign,Hf;function Xi(e){if(Hf===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Hf=t&&t[1]||""}return`
`+Hf+e}var Vf=!1;function Yf(e,t){if(!e||Vf)return"";Vf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,i=o.length-1;1<=a&&0<=i&&s[a]!==o[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==o[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==o[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{Vf=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Xi(e):""}function CP(e){switch(e.tag){case 5:return Xi(e.type);case 16:return Xi("Lazy");case 13:return Xi("Suspense");case 19:return Xi("SuspenseList");case 0:case 2:case 15:return e=Yf(e.type,!1),e;case 11:return e=Yf(e.type.render,!1),e;case 1:return e=Yf(e.type,!0),e;default:return""}}function lp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ca:return"Fragment";case Ea:return"Portal";case op:return"Profiler";case og:return"StrictMode";case ap:return"Suspense";case ip:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case eb:return(e.displayName||"Context")+".Consumer";case Zx:return(e._context.displayName||"Context")+".Provider";case ag:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ig:return t=e.displayName||null,t!==null?t:lp(e.type)||"Memo";case Ss:t=e._payload,e=e._init;try{return lp(e(t))}catch{}}return null}function kP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lp(t);case 8:return t===og?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Xs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function nb(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function NP(e){var t=nb(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ac(e){e._valueTracker||(e._valueTracker=NP(e))}function rb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=nb(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Au(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function cp(e,t){var n=t.checked;return rt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Py(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Xs(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sb(e,t){t=t.checked,t!=null&&sg(e,"checked",t,!1)}function up(e,t){sb(e,t);var n=Xs(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?dp(e,t.type,n):t.hasOwnProperty("defaultValue")&&dp(e,t.type,Xs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ty(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function dp(e,t,n){(t!=="number"||Au(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Zi=Array.isArray;function Da(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Xs(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function fp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return rt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ry(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(q(92));if(Zi(n)){if(1<n.length)throw Error(q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Xs(n)}}function ob(e,t){var n=Xs(t.value),r=Xs(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Iy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ab(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ab(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Mc,ib=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Mc=Mc||document.createElement("div"),Mc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Mc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function El(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var al={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jP=["Webkit","ms","Moz","O"];Object.keys(al).forEach(function(e){jP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),al[t]=al[e]})});function lb(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||al.hasOwnProperty(e)&&al[e]?(""+t).trim():t+"px"}function cb(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=lb(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var PP=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pp(e,t){if(t){if(PP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function mp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gp=null;function lg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vp=null,La=null,$a=null;function Oy(e){if(e=ac(e)){if(typeof vp!="function")throw Error(q(280));var t=e.stateNode;t&&(t=zd(t),vp(e.stateNode,e.type,t))}}function ub(e){La?$a?$a.push(e):$a=[e]:La=e}function db(){if(La){var e=La,t=$a;if($a=La=null,Oy(e),t)for(e=0;e<t.length;e++)Oy(t[e])}}function fb(e,t){return e(t)}function hb(){}var Kf=!1;function pb(e,t,n){if(Kf)return e(t,n);Kf=!0;try{return fb(e,t,n)}finally{Kf=!1,(La!==null||$a!==null)&&(hb(),db())}}function Cl(e,t){var n=e.stateNode;if(n===null)return null;var r=zd(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(q(231,t,typeof n));return n}var yp=!1;if(ns)try{var Di={};Object.defineProperty(Di,"passive",{get:function(){yp=!0}}),window.addEventListener("test",Di,Di),window.removeEventListener("test",Di,Di)}catch{yp=!1}function TP(e,t,n,r,s,o,a,i,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var il=!1,Mu=null,Du=!1,wp=null,RP={onError:function(e){il=!0,Mu=e}};function IP(e,t,n,r,s,o,a,i,c){il=!1,Mu=null,TP.apply(RP,arguments)}function OP(e,t,n,r,s,o,a,i,c){if(IP.apply(this,arguments),il){if(il){var u=Mu;il=!1,Mu=null}else throw Error(q(198));Du||(Du=!0,wp=u)}}function ra(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function mb(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ay(e){if(ra(e)!==e)throw Error(q(188))}function AP(e){var t=e.alternate;if(!t){if(t=ra(e),t===null)throw Error(q(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Ay(s),e;if(o===r)return Ay(s),t;o=o.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=o;break}if(i===r){a=!0,r=s,n=o;break}i=i.sibling}if(!a){for(i=o.child;i;){if(i===n){a=!0,n=o,r=s;break}if(i===r){a=!0,r=o,n=s;break}i=i.sibling}if(!a)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?e:t}function gb(e){return e=AP(e),e!==null?vb(e):null}function vb(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vb(e);if(t!==null)return t;e=e.sibling}return null}var yb=_n.unstable_scheduleCallback,My=_n.unstable_cancelCallback,MP=_n.unstable_shouldYield,DP=_n.unstable_requestPaint,lt=_n.unstable_now,LP=_n.unstable_getCurrentPriorityLevel,cg=_n.unstable_ImmediatePriority,wb=_n.unstable_UserBlockingPriority,Lu=_n.unstable_NormalPriority,$P=_n.unstable_LowPriority,xb=_n.unstable_IdlePriority,Fd=null,jr=null;function FP(e){if(jr&&typeof jr.onCommitFiberRoot=="function")try{jr.onCommitFiberRoot(Fd,e,void 0,(e.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:WP,UP=Math.log,BP=Math.LN2;function WP(e){return e>>>=0,e===0?32:31-(UP(e)/BP|0)|0}var Dc=64,Lc=4194304;function el(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $u(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=el(i):(o&=a,o!==0&&(r=el(o)))}else a=n&~s,a!==0?r=el(a):o!==0&&(r=el(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-tr(t),s=1<<n,r|=e[n],t&=~s;return r}function zP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-tr(o),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=zP(i,t)):c<=t&&(e.expiredLanes|=i),o&=~i}}function xp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bb(){var e=Dc;return Dc<<=1,!(Dc&4194240)&&(Dc=64),e}function Gf(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function sc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tr(t),e[t]=n}function VP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-tr(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function ug(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-tr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ze=0;function Sb(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _b,dg,Eb,Cb,kb,bp=!1,$c=[],Ws=null,zs=null,Hs=null,kl=new Map,Nl=new Map,Es=[],YP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dy(e,t){switch(e){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":zs=null;break;case"mouseover":case"mouseout":Hs=null;break;case"pointerover":case"pointerout":kl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nl.delete(t.pointerId)}}function Li(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=ac(t),t!==null&&dg(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function KP(e,t,n,r,s){switch(t){case"focusin":return Ws=Li(Ws,e,t,n,r,s),!0;case"dragenter":return zs=Li(zs,e,t,n,r,s),!0;case"mouseover":return Hs=Li(Hs,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return kl.set(o,Li(kl.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Nl.set(o,Li(Nl.get(o)||null,e,t,n,r,s)),!0}return!1}function Nb(e){var t=ko(e.target);if(t!==null){var n=ra(t);if(n!==null){if(t=n.tag,t===13){if(t=mb(n),t!==null){e.blockedOn=t,kb(e.priority,function(){Eb(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);gp=r,n.target.dispatchEvent(r),gp=null}else return t=ac(n),t!==null&&dg(t),e.blockedOn=n,!1;t.shift()}return!0}function Ly(e,t,n){hu(e)&&n.delete(t)}function GP(){bp=!1,Ws!==null&&hu(Ws)&&(Ws=null),zs!==null&&hu(zs)&&(zs=null),Hs!==null&&hu(Hs)&&(Hs=null),kl.forEach(Ly),Nl.forEach(Ly)}function $i(e,t){e.blockedOn===t&&(e.blockedOn=null,bp||(bp=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,GP)))}function jl(e){function t(s){return $i(s,e)}if(0<$c.length){$i($c[0],e);for(var n=1;n<$c.length;n++){var r=$c[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ws!==null&&$i(Ws,e),zs!==null&&$i(zs,e),Hs!==null&&$i(Hs,e),kl.forEach(t),Nl.forEach(t),n=0;n<Es.length;n++)r=Es[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Es.length&&(n=Es[0],n.blockedOn===null);)Nb(n),n.blockedOn===null&&Es.shift()}var Fa=cs.ReactCurrentBatchConfig,Fu=!0;function qP(e,t,n,r){var s=ze,o=Fa.transition;Fa.transition=null;try{ze=1,fg(e,t,n,r)}finally{ze=s,Fa.transition=o}}function QP(e,t,n,r){var s=ze,o=Fa.transition;Fa.transition=null;try{ze=4,fg(e,t,n,r)}finally{ze=s,Fa.transition=o}}function fg(e,t,n,r){if(Fu){var s=Sp(e,t,n,r);if(s===null)sh(e,t,r,Uu,n),Dy(e,r);else if(KP(s,e,t,n,r))r.stopPropagation();else if(Dy(e,r),t&4&&-1<YP.indexOf(e)){for(;s!==null;){var o=ac(s);if(o!==null&&_b(o),o=Sp(e,t,n,r),o===null&&sh(e,t,r,Uu,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else sh(e,t,r,null,n)}}var Uu=null;function Sp(e,t,n,r){if(Uu=null,e=lg(r),e=ko(e),e!==null)if(t=ra(e),t===null)e=null;else if(n=t.tag,n===13){if(e=mb(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Uu=e,null}function jb(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LP()){case cg:return 1;case wb:return 4;case Lu:case $P:return 16;case xb:return 536870912;default:return 16}default:return 16}}var Ls=null,hg=null,pu=null;function Pb(){if(pu)return pu;var e,t=hg,n=t.length,r,s="value"in Ls?Ls.value:Ls.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return pu=s.slice(e,1<r?1-r:void 0)}function mu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fc(){return!0}function $y(){return!1}function kn(e){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(o):o[i]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Fc:$y,this.isPropagationStopped=$y,this}return rt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fc)},persist:function(){},isPersistent:Fc}),t}var wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pg=kn(wi),oc=rt({},wi,{view:0,detail:0}),JP=kn(oc),qf,Qf,Fi,Ud=rt({},oc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fi&&(Fi&&e.type==="mousemove"?(qf=e.screenX-Fi.screenX,Qf=e.screenY-Fi.screenY):Qf=qf=0,Fi=e),qf)},movementY:function(e){return"movementY"in e?e.movementY:Qf}}),Fy=kn(Ud),XP=rt({},Ud,{dataTransfer:0}),ZP=kn(XP),eT=rt({},oc,{relatedTarget:0}),Jf=kn(eT),tT=rt({},wi,{animationName:0,elapsedTime:0,pseudoElement:0}),nT=kn(tT),rT=rt({},wi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sT=kn(rT),oT=rt({},wi,{data:0}),Uy=kn(oT),aT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lT[e])?!!t[e]:!1}function mg(){return cT}var uT=rt({},oc,{key:function(e){if(e.key){var t=aT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=mu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?iT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mg,charCode:function(e){return e.type==="keypress"?mu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dT=kn(uT),fT=rt({},Ud,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),By=kn(fT),hT=rt({},oc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mg}),pT=kn(hT),mT=rt({},wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),gT=kn(mT),vT=rt({},Ud,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yT=kn(vT),wT=[9,13,27,32],gg=ns&&"CompositionEvent"in window,ll=null;ns&&"documentMode"in document&&(ll=document.documentMode);var xT=ns&&"TextEvent"in window&&!ll,Tb=ns&&(!gg||ll&&8<ll&&11>=ll),Wy=" ",zy=!1;function Rb(e,t){switch(e){case"keyup":return wT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ib(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ka=!1;function bT(e,t){switch(e){case"compositionend":return Ib(t);case"keypress":return t.which!==32?null:(zy=!0,Wy);case"textInput":return e=t.data,e===Wy&&zy?null:e;default:return null}}function ST(e,t){if(ka)return e==="compositionend"||!gg&&Rb(e,t)?(e=Pb(),pu=hg=Ls=null,ka=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tb&&t.locale!=="ko"?null:t.data;default:return null}}var _T={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_T[e.type]:t==="textarea"}function Ob(e,t,n,r){ub(r),t=Bu(t,"onChange"),0<t.length&&(n=new pg("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var cl=null,Pl=null;function ET(e){Hb(e,0)}function Bd(e){var t=Pa(e);if(rb(t))return e}function CT(e,t){if(e==="change")return t}var Ab=!1;if(ns){var Xf;if(ns){var Zf="oninput"in document;if(!Zf){var Vy=document.createElement("div");Vy.setAttribute("oninput","return;"),Zf=typeof Vy.oninput=="function"}Xf=Zf}else Xf=!1;Ab=Xf&&(!document.documentMode||9<document.documentMode)}function Yy(){cl&&(cl.detachEvent("onpropertychange",Mb),Pl=cl=null)}function Mb(e){if(e.propertyName==="value"&&Bd(Pl)){var t=[];Ob(t,Pl,e,lg(e)),pb(ET,t)}}function kT(e,t,n){e==="focusin"?(Yy(),cl=t,Pl=n,cl.attachEvent("onpropertychange",Mb)):e==="focusout"&&Yy()}function NT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bd(Pl)}function jT(e,t){if(e==="click")return Bd(t)}function PT(e,t){if(e==="input"||e==="change")return Bd(t)}function TT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rr=typeof Object.is=="function"?Object.is:TT;function Tl(e,t){if(rr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!sp.call(t,s)||!rr(e[s],t[s]))return!1}return!0}function Ky(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gy(e,t){var n=Ky(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ky(n)}}function Db(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Db(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Lb(){for(var e=window,t=Au();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Au(e.document)}return t}function vg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function RT(e){var t=Lb(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Db(n.ownerDocument.documentElement,n)){if(r!==null&&vg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=Gy(n,o);var a=Gy(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var IT=ns&&"documentMode"in document&&11>=document.documentMode,Na=null,_p=null,ul=null,Ep=!1;function qy(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ep||Na==null||Na!==Au(r)||(r=Na,"selectionStart"in r&&vg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ul&&Tl(ul,r)||(ul=r,r=Bu(_p,"onSelect"),0<r.length&&(t=new pg("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Na)))}function Uc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ja={animationend:Uc("Animation","AnimationEnd"),animationiteration:Uc("Animation","AnimationIteration"),animationstart:Uc("Animation","AnimationStart"),transitionend:Uc("Transition","TransitionEnd")},eh={},$b={};ns&&($b=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function Wd(e){if(eh[e])return eh[e];if(!ja[e])return e;var t=ja[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $b)return eh[e]=t[n];return e}var Fb=Wd("animationend"),Ub=Wd("animationiteration"),Bb=Wd("animationstart"),Wb=Wd("transitionend"),zb=new Map,Qy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ro(e,t){zb.set(e,t),na(t,[e])}for(var th=0;th<Qy.length;th++){var nh=Qy[th],OT=nh.toLowerCase(),AT=nh[0].toUpperCase()+nh.slice(1);ro(OT,"on"+AT)}ro(Fb,"onAnimationEnd");ro(Ub,"onAnimationIteration");ro(Bb,"onAnimationStart");ro("dblclick","onDoubleClick");ro("focusin","onFocus");ro("focusout","onBlur");ro(Wb,"onTransitionEnd");si("onMouseEnter",["mouseout","mouseover"]);si("onMouseLeave",["mouseout","mouseover"]);si("onPointerEnter",["pointerout","pointerover"]);si("onPointerLeave",["pointerout","pointerover"]);na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));na("onBeforeInput",["compositionend","keypress","textInput","paste"]);na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MT=new Set("cancel close invalid load scroll toggle".split(" ").concat(tl));function Jy(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,OP(r,t,void 0,e),e.currentTarget=null}function Hb(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,u=i.currentTarget;if(i=i.listener,c!==o&&s.isPropagationStopped())break e;Jy(s,i,u),o=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,u=i.currentTarget,i=i.listener,c!==o&&s.isPropagationStopped())break e;Jy(s,i,u),o=c}}}if(Du)throw e=wp,Du=!1,wp=null,e}function Qe(e,t){var n=t[Pp];n===void 0&&(n=t[Pp]=new Set);var r=e+"__bubble";n.has(r)||(Vb(t,e,2,!1),n.add(r))}function rh(e,t,n){var r=0;t&&(r|=4),Vb(n,e,r,t)}var Bc="_reactListening"+Math.random().toString(36).slice(2);function Rl(e){if(!e[Bc]){e[Bc]=!0,Xx.forEach(function(n){n!=="selectionchange"&&(MT.has(n)||rh(n,!1,e),rh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bc]||(t[Bc]=!0,rh("selectionchange",!1,t))}}function Vb(e,t,n,r){switch(jb(t)){case 1:var s=qP;break;case 4:s=QP;break;default:s=fg}n=s.bind(null,t,n,e),s=void 0,!yp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function sh(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=ko(i),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}i=i.parentNode}}r=r.return}pb(function(){var u=o,d=lg(n),h=[];e:{var p=zb.get(e);if(p!==void 0){var m=pg,w=e;switch(e){case"keypress":if(mu(n)===0)break e;case"keydown":case"keyup":m=dT;break;case"focusin":w="focus",m=Jf;break;case"focusout":w="blur",m=Jf;break;case"beforeblur":case"afterblur":m=Jf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Fy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=ZP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=pT;break;case Fb:case Ub:case Bb:m=nT;break;case Wb:m=gT;break;case"scroll":m=JP;break;case"wheel":m=yT;break;case"copy":case"cut":case"paste":m=sT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=By}var v=(t&4)!==0,y=!v&&e==="scroll",x=v?p!==null?p+"Capture":null:p;v=[];for(var g=u,b;g!==null;){b=g;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,x!==null&&(S=Cl(g,x),S!=null&&v.push(Il(g,S,b)))),y)break;g=g.return}0<v.length&&(p=new m(p,w,null,n,d),h.push({event:p,listeners:v}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&n!==gp&&(w=n.relatedTarget||n.fromElement)&&(ko(w)||w[rs]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(w=n.relatedTarget||n.toElement,m=u,w=w?ko(w):null,w!==null&&(y=ra(w),w!==y||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=u),m!==w)){if(v=Fy,S="onMouseLeave",x="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(v=By,S="onPointerLeave",x="onPointerEnter",g="pointer"),y=m==null?p:Pa(m),b=w==null?p:Pa(w),p=new v(S,g+"leave",m,n,d),p.target=y,p.relatedTarget=b,S=null,ko(d)===u&&(v=new v(x,g+"enter",w,n,d),v.target=b,v.relatedTarget=y,S=v),y=S,m&&w)t:{for(v=m,x=w,g=0,b=v;b;b=da(b))g++;for(b=0,S=x;S;S=da(S))b++;for(;0<g-b;)v=da(v),g--;for(;0<b-g;)x=da(x),b--;for(;g--;){if(v===x||x!==null&&v===x.alternate)break t;v=da(v),x=da(x)}v=null}else v=null;m!==null&&Xy(h,p,m,v,!1),w!==null&&y!==null&&Xy(h,y,w,v,!0)}}e:{if(p=u?Pa(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var _=CT;else if(Hy(p))if(Ab)_=PT;else{_=NT;var C=kT}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(_=jT);if(_&&(_=_(e,u))){Ob(h,_,n,d);break e}C&&C(e,p,u),e==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&dp(p,"number",p.value)}switch(C=u?Pa(u):window,e){case"focusin":(Hy(C)||C.contentEditable==="true")&&(Na=C,_p=u,ul=null);break;case"focusout":ul=_p=Na=null;break;case"mousedown":Ep=!0;break;case"contextmenu":case"mouseup":case"dragend":Ep=!1,qy(h,n,d);break;case"selectionchange":if(IT)break;case"keydown":case"keyup":qy(h,n,d)}var N;if(gg)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ka?Rb(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Tb&&n.locale!=="ko"&&(ka||T!=="onCompositionStart"?T==="onCompositionEnd"&&ka&&(N=Pb()):(Ls=d,hg="value"in Ls?Ls.value:Ls.textContent,ka=!0)),C=Bu(u,T),0<C.length&&(T=new Uy(T,e,null,n,d),h.push({event:T,listeners:C}),N?T.data=N:(N=Ib(n),N!==null&&(T.data=N)))),(N=xT?bT(e,n):ST(e,n))&&(u=Bu(u,"onBeforeInput"),0<u.length&&(d=new Uy("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=N))}Hb(h,t)})}function Il(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bu(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Cl(e,n),o!=null&&r.unshift(Il(e,o,s)),o=Cl(e,t),o!=null&&r.push(Il(e,o,s))),e=e.return}return r}function da(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xy(e,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,u=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&u!==null&&(i=u,s?(c=Cl(n,o),c!=null&&a.unshift(Il(n,c,i))):s||(c=Cl(n,o),c!=null&&a.push(Il(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var DT=/\r\n?/g,LT=/\u0000|\uFFFD/g;function Zy(e){return(typeof e=="string"?e:""+e).replace(DT,`
`).replace(LT,"")}function Wc(e,t,n){if(t=Zy(t),Zy(e)!==t&&n)throw Error(q(425))}function Wu(){}var Cp=null,kp=null;function Np(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jp=typeof setTimeout=="function"?setTimeout:void 0,$T=typeof clearTimeout=="function"?clearTimeout:void 0,e0=typeof Promise=="function"?Promise:void 0,FT=typeof queueMicrotask=="function"?queueMicrotask:typeof e0<"u"?function(e){return e0.resolve(null).then(e).catch(UT)}:jp;function UT(e){setTimeout(function(){throw e})}function oh(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),jl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);jl(t)}function Vs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function t0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var xi=Math.random().toString(36).slice(2),Cr="__reactFiber$"+xi,Ol="__reactProps$"+xi,rs="__reactContainer$"+xi,Pp="__reactEvents$"+xi,BT="__reactListeners$"+xi,WT="__reactHandles$"+xi;function ko(e){var t=e[Cr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[rs]||n[Cr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=t0(e);e!==null;){if(n=e[Cr])return n;e=t0(e)}return t}e=n,n=e.parentNode}return null}function ac(e){return e=e[Cr]||e[rs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function zd(e){return e[Ol]||null}var Tp=[],Ta=-1;function so(e){return{current:e}}function Je(e){0>Ta||(e.current=Tp[Ta],Tp[Ta]=null,Ta--)}function Ke(e,t){Ta++,Tp[Ta]=e.current,e.current=t}var Zs={},Mt=so(Zs),ln=so(!1),Wo=Zs;function oi(e,t){var n=e.type.contextTypes;if(!n)return Zs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function cn(e){return e=e.childContextTypes,e!=null}function zu(){Je(ln),Je(Mt)}function n0(e,t,n){if(Mt.current!==Zs)throw Error(q(168));Ke(Mt,t),Ke(ln,n)}function Yb(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(q(108,kP(e)||"Unknown",s));return rt({},n,r)}function Hu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Zs,Wo=Mt.current,Ke(Mt,e),Ke(ln,ln.current),!0}function r0(e,t,n){var r=e.stateNode;if(!r)throw Error(q(169));n?(e=Yb(e,t,Wo),r.__reactInternalMemoizedMergedChildContext=e,Je(ln),Je(Mt),Ke(Mt,e)):Je(ln),Ke(ln,n)}var Yr=null,Hd=!1,ah=!1;function Kb(e){Yr===null?Yr=[e]:Yr.push(e)}function zT(e){Hd=!0,Kb(e)}function oo(){if(!ah&&Yr!==null){ah=!0;var e=0,t=ze;try{var n=Yr;for(ze=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Yr=null,Hd=!1}catch(s){throw Yr!==null&&(Yr=Yr.slice(e+1)),yb(cg,oo),s}finally{ze=t,ah=!1}}return null}var Ra=[],Ia=0,Vu=null,Yu=0,In=[],On=0,zo=null,qr=1,Qr="";function wo(e,t){Ra[Ia++]=Yu,Ra[Ia++]=Vu,Vu=e,Yu=t}function Gb(e,t,n){In[On++]=qr,In[On++]=Qr,In[On++]=zo,zo=e;var r=qr;e=Qr;var s=32-tr(r)-1;r&=~(1<<s),n+=1;var o=32-tr(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,qr=1<<32-tr(t)+s|n<<s|r,Qr=o+e}else qr=1<<o|n<<s|r,Qr=e}function yg(e){e.return!==null&&(wo(e,1),Gb(e,1,0))}function wg(e){for(;e===Vu;)Vu=Ra[--Ia],Ra[Ia]=null,Yu=Ra[--Ia],Ra[Ia]=null;for(;e===zo;)zo=In[--On],In[On]=null,Qr=In[--On],In[On]=null,qr=In[--On],In[On]=null}var bn=null,xn=null,Xe=!1,Zn=null;function qb(e,t){var n=An(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function s0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,bn=e,xn=Vs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,bn=e,xn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=zo!==null?{id:qr,overflow:Qr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=An(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,bn=e,xn=null,!0):!1;default:return!1}}function Rp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ip(e){if(Xe){var t=xn;if(t){var n=t;if(!s0(e,t)){if(Rp(e))throw Error(q(418));t=Vs(n.nextSibling);var r=bn;t&&s0(e,t)?qb(r,n):(e.flags=e.flags&-4097|2,Xe=!1,bn=e)}}else{if(Rp(e))throw Error(q(418));e.flags=e.flags&-4097|2,Xe=!1,bn=e}}}function o0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;bn=e}function zc(e){if(e!==bn)return!1;if(!Xe)return o0(e),Xe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Np(e.type,e.memoizedProps)),t&&(t=xn)){if(Rp(e))throw Qb(),Error(q(418));for(;t;)qb(e,t),t=Vs(t.nextSibling)}if(o0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xn=Vs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xn=null}}else xn=bn?Vs(e.stateNode.nextSibling):null;return!0}function Qb(){for(var e=xn;e;)e=Vs(e.nextSibling)}function ai(){xn=bn=null,Xe=!1}function xg(e){Zn===null?Zn=[e]:Zn.push(e)}var HT=cs.ReactCurrentBatchConfig;function Ui(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var i=s.refs;a===null?delete i[o]:i[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,e))}return e}function Hc(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function a0(e){var t=e._init;return t(e._payload)}function Jb(e){function t(x,g){if(e){var b=x.deletions;b===null?(x.deletions=[g],x.flags|=16):b.push(g)}}function n(x,g){if(!e)return null;for(;g!==null;)t(x,g),g=g.sibling;return null}function r(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function s(x,g){return x=qs(x,g),x.index=0,x.sibling=null,x}function o(x,g,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<g?(x.flags|=2,g):b):(x.flags|=2,g)):(x.flags|=1048576,g)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function i(x,g,b,S){return g===null||g.tag!==6?(g=hh(b,x.mode,S),g.return=x,g):(g=s(g,b),g.return=x,g)}function c(x,g,b,S){var _=b.type;return _===Ca?d(x,g,b.props.children,S,b.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ss&&a0(_)===g.type)?(S=s(g,b.props),S.ref=Ui(x,g,b),S.return=x,S):(S=Su(b.type,b.key,b.props,null,x.mode,S),S.ref=Ui(x,g,b),S.return=x,S)}function u(x,g,b,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=ph(b,x.mode,S),g.return=x,g):(g=s(g,b.children||[]),g.return=x,g)}function d(x,g,b,S,_){return g===null||g.tag!==7?(g=Uo(b,x.mode,S,_),g.return=x,g):(g=s(g,b),g.return=x,g)}function h(x,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=hh(""+g,x.mode,b),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Oc:return b=Su(g.type,g.key,g.props,null,x.mode,b),b.ref=Ui(x,null,g),b.return=x,b;case Ea:return g=ph(g,x.mode,b),g.return=x,g;case Ss:var S=g._init;return h(x,S(g._payload),b)}if(Zi(g)||Mi(g))return g=Uo(g,x.mode,b,null),g.return=x,g;Hc(x,g)}return null}function p(x,g,b,S){var _=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:i(x,g,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Oc:return b.key===_?c(x,g,b,S):null;case Ea:return b.key===_?u(x,g,b,S):null;case Ss:return _=b._init,p(x,g,_(b._payload),S)}if(Zi(b)||Mi(b))return _!==null?null:d(x,g,b,S,null);Hc(x,b)}return null}function m(x,g,b,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(b)||null,i(g,x,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Oc:return x=x.get(S.key===null?b:S.key)||null,c(g,x,S,_);case Ea:return x=x.get(S.key===null?b:S.key)||null,u(g,x,S,_);case Ss:var C=S._init;return m(x,g,b,C(S._payload),_)}if(Zi(S)||Mi(S))return x=x.get(b)||null,d(g,x,S,_,null);Hc(g,S)}return null}function w(x,g,b,S){for(var _=null,C=null,N=g,T=g=0,L=null;N!==null&&T<b.length;T++){N.index>T?(L=N,N=null):L=N.sibling;var $=p(x,N,b[T],S);if($===null){N===null&&(N=L);break}e&&N&&$.alternate===null&&t(x,N),g=o($,g,T),C===null?_=$:C.sibling=$,C=$,N=L}if(T===b.length)return n(x,N),Xe&&wo(x,T),_;if(N===null){for(;T<b.length;T++)N=h(x,b[T],S),N!==null&&(g=o(N,g,T),C===null?_=N:C.sibling=N,C=N);return Xe&&wo(x,T),_}for(N=r(x,N);T<b.length;T++)L=m(N,x,T,b[T],S),L!==null&&(e&&L.alternate!==null&&N.delete(L.key===null?T:L.key),g=o(L,g,T),C===null?_=L:C.sibling=L,C=L);return e&&N.forEach(function(V){return t(x,V)}),Xe&&wo(x,T),_}function v(x,g,b,S){var _=Mi(b);if(typeof _!="function")throw Error(q(150));if(b=_.call(b),b==null)throw Error(q(151));for(var C=_=null,N=g,T=g=0,L=null,$=b.next();N!==null&&!$.done;T++,$=b.next()){N.index>T?(L=N,N=null):L=N.sibling;var V=p(x,N,$.value,S);if(V===null){N===null&&(N=L);break}e&&N&&V.alternate===null&&t(x,N),g=o(V,g,T),C===null?_=V:C.sibling=V,C=V,N=L}if($.done)return n(x,N),Xe&&wo(x,T),_;if(N===null){for(;!$.done;T++,$=b.next())$=h(x,$.value,S),$!==null&&(g=o($,g,T),C===null?_=$:C.sibling=$,C=$);return Xe&&wo(x,T),_}for(N=r(x,N);!$.done;T++,$=b.next())$=m(N,x,T,$.value,S),$!==null&&(e&&$.alternate!==null&&N.delete($.key===null?T:$.key),g=o($,g,T),C===null?_=$:C.sibling=$,C=$);return e&&N.forEach(function(F){return t(x,F)}),Xe&&wo(x,T),_}function y(x,g,b,S){if(typeof b=="object"&&b!==null&&b.type===Ca&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Oc:e:{for(var _=b.key,C=g;C!==null;){if(C.key===_){if(_=b.type,_===Ca){if(C.tag===7){n(x,C.sibling),g=s(C,b.props.children),g.return=x,x=g;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ss&&a0(_)===C.type){n(x,C.sibling),g=s(C,b.props),g.ref=Ui(x,C,b),g.return=x,x=g;break e}n(x,C);break}else t(x,C);C=C.sibling}b.type===Ca?(g=Uo(b.props.children,x.mode,S,b.key),g.return=x,x=g):(S=Su(b.type,b.key,b.props,null,x.mode,S),S.ref=Ui(x,g,b),S.return=x,x=S)}return a(x);case Ea:e:{for(C=b.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){n(x,g.sibling),g=s(g,b.children||[]),g.return=x,x=g;break e}else{n(x,g);break}else t(x,g);g=g.sibling}g=ph(b,x.mode,S),g.return=x,x=g}return a(x);case Ss:return C=b._init,y(x,g,C(b._payload),S)}if(Zi(b))return w(x,g,b,S);if(Mi(b))return v(x,g,b,S);Hc(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(n(x,g.sibling),g=s(g,b),g.return=x,x=g):(n(x,g),g=hh(b,x.mode,S),g.return=x,x=g),a(x)):n(x,g)}return y}var ii=Jb(!0),Xb=Jb(!1),Ku=so(null),Gu=null,Oa=null,bg=null;function Sg(){bg=Oa=Gu=null}function _g(e){var t=Ku.current;Je(Ku),e._currentValue=t}function Op(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ua(e,t){Gu=e,bg=Oa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(on=!0),e.firstContext=null)}function Fn(e){var t=e._currentValue;if(bg!==e)if(e={context:e,memoizedValue:t,next:null},Oa===null){if(Gu===null)throw Error(q(308));Oa=e,Gu.dependencies={lanes:0,firstContext:e}}else Oa=Oa.next=e;return t}var No=null;function Eg(e){No===null?No=[e]:No.push(e)}function Zb(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Eg(t)):(n.next=s.next,s.next=n),t.interleaved=n,ss(e,r)}function ss(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var _s=!1;function Cg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function es(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ys(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,De&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,ss(e,n)}return s=r.interleaved,s===null?(t.next=t,Eg(r)):(t.next=s.next,s.next=t),r.interleaved=t,ss(e,n)}function gu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ug(e,n)}}function i0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qu(e,t,n,r){var s=e.updateQueue;_s=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,i=d.lastBaseUpdate,i!==a&&(i===null?d.firstBaseUpdate=u:i.next=u,d.lastBaseUpdate=c))}if(o!==null){var h=s.baseState;a=0,d=u=c=null,i=o;do{var p=i.lane,m=i.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var w=e,v=i;switch(p=t,m=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){h=w.call(m,h,p);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,p=typeof w=="function"?w.call(m,h,p):w,p==null)break e;h=rt({},h,p);break e;case 2:_s=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[i]:p.push(i))}else m={eventTime:m,lane:p,tag:i.tag,payload:i.payload,callback:i.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,a|=p;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;p=i,i=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Vo|=a,e.lanes=a,e.memoizedState=h}}function l0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var ic={},Pr=so(ic),Al=so(ic),Ml=so(ic);function jo(e){if(e===ic)throw Error(q(174));return e}function kg(e,t){switch(Ke(Ml,t),Ke(Al,e),Ke(Pr,ic),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hp(t,e)}Je(Pr),Ke(Pr,t)}function li(){Je(Pr),Je(Al),Je(Ml)}function tS(e){jo(Ml.current);var t=jo(Pr.current),n=hp(t,e.type);t!==n&&(Ke(Al,e),Ke(Pr,n))}function Ng(e){Al.current===e&&(Je(Pr),Je(Al))}var tt=so(0);function Qu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ih=[];function jg(){for(var e=0;e<ih.length;e++)ih[e]._workInProgressVersionPrimary=null;ih.length=0}var vu=cs.ReactCurrentDispatcher,lh=cs.ReactCurrentBatchConfig,Ho=0,nt=null,gt=null,xt=null,Ju=!1,dl=!1,Dl=0,VT=0;function Tt(){throw Error(q(321))}function Pg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rr(e[n],t[n]))return!1;return!0}function Tg(e,t,n,r,s,o){if(Ho=o,nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vu.current=e===null||e.memoizedState===null?qT:QT,e=n(r,s),dl){o=0;do{if(dl=!1,Dl=0,25<=o)throw Error(q(301));o+=1,xt=gt=null,t.updateQueue=null,vu.current=JT,e=n(r,s)}while(dl)}if(vu.current=Xu,t=gt!==null&&gt.next!==null,Ho=0,xt=gt=nt=null,Ju=!1,t)throw Error(q(300));return e}function Rg(){var e=Dl!==0;return Dl=0,e}function xr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?nt.memoizedState=xt=e:xt=xt.next=e,xt}function Un(){if(gt===null){var e=nt.alternate;e=e!==null?e.memoizedState:null}else e=gt.next;var t=xt===null?nt.memoizedState:xt.next;if(t!==null)xt=t,gt=e;else{if(e===null)throw Error(q(310));gt=e,e={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},xt===null?nt.memoizedState=xt=e:xt=xt.next=e}return xt}function Ll(e,t){return typeof t=="function"?t(e):t}function ch(e){var t=Un(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=gt,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var i=a=null,c=null,u=o;do{var d=u.lane;if((Ho&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(i=c=h,a=r):c=c.next=h,nt.lanes|=d,Vo|=d}u=u.next}while(u!==null&&u!==o);c===null?a=r:c.next=i,rr(r,t.memoizedState)||(on=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,nt.lanes|=o,Vo|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function uh(e){var t=Un(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);rr(o,t.memoizedState)||(on=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function nS(){}function rS(e,t){var n=nt,r=Un(),s=t(),o=!rr(r.memoizedState,s);if(o&&(r.memoizedState=s,on=!0),r=r.queue,Ig(aS.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,$l(9,oS.bind(null,n,r,s,t),void 0,null),bt===null)throw Error(q(349));Ho&30||sS(n,t,s)}return s}function sS(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=nt.updateQueue,t===null?(t={lastEffect:null,stores:null},nt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function oS(e,t,n,r){t.value=n,t.getSnapshot=r,iS(t)&&lS(e)}function aS(e,t,n){return n(function(){iS(t)&&lS(e)})}function iS(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rr(e,n)}catch{return!0}}function lS(e){var t=ss(e,1);t!==null&&nr(t,e,1,-1)}function c0(e){var t=xr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:e},t.queue=e,e=e.dispatch=GT.bind(null,nt,e),[t.memoizedState,e]}function $l(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=nt.updateQueue,t===null?(t={lastEffect:null,stores:null},nt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function cS(){return Un().memoizedState}function yu(e,t,n,r){var s=xr();nt.flags|=e,s.memoizedState=$l(1|t,n,void 0,r===void 0?null:r)}function Vd(e,t,n,r){var s=Un();r=r===void 0?null:r;var o=void 0;if(gt!==null){var a=gt.memoizedState;if(o=a.destroy,r!==null&&Pg(r,a.deps)){s.memoizedState=$l(t,n,o,r);return}}nt.flags|=e,s.memoizedState=$l(1|t,n,o,r)}function u0(e,t){return yu(8390656,8,e,t)}function Ig(e,t){return Vd(2048,8,e,t)}function uS(e,t){return Vd(4,2,e,t)}function dS(e,t){return Vd(4,4,e,t)}function fS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hS(e,t,n){return n=n!=null?n.concat([e]):null,Vd(4,4,fS.bind(null,t,e),n)}function Og(){}function pS(e,t){var n=Un();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Pg(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function mS(e,t){var n=Un();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Pg(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function gS(e,t,n){return Ho&21?(rr(n,t)||(n=bb(),nt.lanes|=n,Vo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,on=!0),e.memoizedState=n)}function YT(e,t){var n=ze;ze=n!==0&&4>n?n:4,e(!0);var r=lh.transition;lh.transition={};try{e(!1),t()}finally{ze=n,lh.transition=r}}function vS(){return Un().memoizedState}function KT(e,t,n){var r=Gs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yS(e))wS(t,n);else if(n=Zb(e,t,n,r),n!==null){var s=Ht();nr(n,e,r,s),xS(n,t,r)}}function GT(e,t,n){var r=Gs(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yS(e))wS(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,i=o(a,n);if(s.hasEagerState=!0,s.eagerState=i,rr(i,a)){var c=t.interleaved;c===null?(s.next=s,Eg(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Zb(e,t,s,r),n!==null&&(s=Ht(),nr(n,e,r,s),xS(n,t,r))}}function yS(e){var t=e.alternate;return e===nt||t!==null&&t===nt}function wS(e,t){dl=Ju=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function xS(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ug(e,n)}}var Xu={readContext:Fn,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},qT={readContext:Fn,useCallback:function(e,t){return xr().memoizedState=[e,t===void 0?null:t],e},useContext:Fn,useEffect:u0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,yu(4194308,4,fS.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yu(4194308,4,e,t)},useInsertionEffect:function(e,t){return yu(4,2,e,t)},useMemo:function(e,t){var n=xr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=KT.bind(null,nt,e),[r.memoizedState,e]},useRef:function(e){var t=xr();return e={current:e},t.memoizedState=e},useState:c0,useDebugValue:Og,useDeferredValue:function(e){return xr().memoizedState=e},useTransition:function(){var e=c0(!1),t=e[0];return e=YT.bind(null,e[1]),xr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=nt,s=xr();if(Xe){if(n===void 0)throw Error(q(407));n=n()}else{if(n=t(),bt===null)throw Error(q(349));Ho&30||sS(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,u0(aS.bind(null,r,o,e),[e]),r.flags|=2048,$l(9,oS.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=xr(),t=bt.identifierPrefix;if(Xe){var n=Qr,r=qr;n=(r&~(1<<32-tr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Dl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=VT++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},QT={readContext:Fn,useCallback:pS,useContext:Fn,useEffect:Ig,useImperativeHandle:hS,useInsertionEffect:uS,useLayoutEffect:dS,useMemo:mS,useReducer:ch,useRef:cS,useState:function(){return ch(Ll)},useDebugValue:Og,useDeferredValue:function(e){var t=Un();return gS(t,gt.memoizedState,e)},useTransition:function(){var e=ch(Ll)[0],t=Un().memoizedState;return[e,t]},useMutableSource:nS,useSyncExternalStore:rS,useId:vS,unstable_isNewReconciler:!1},JT={readContext:Fn,useCallback:pS,useContext:Fn,useEffect:Ig,useImperativeHandle:hS,useInsertionEffect:uS,useLayoutEffect:dS,useMemo:mS,useReducer:uh,useRef:cS,useState:function(){return uh(Ll)},useDebugValue:Og,useDeferredValue:function(e){var t=Un();return gt===null?t.memoizedState=e:gS(t,gt.memoizedState,e)},useTransition:function(){var e=uh(Ll)[0],t=Un().memoizedState;return[e,t]},useMutableSource:nS,useSyncExternalStore:rS,useId:vS,unstable_isNewReconciler:!1};function Gn(e,t){if(e&&e.defaultProps){t=rt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ap(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:rt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Yd={isMounted:function(e){return(e=e._reactInternals)?ra(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ht(),s=Gs(e),o=es(r,s);o.payload=t,n!=null&&(o.callback=n),t=Ys(e,o,s),t!==null&&(nr(t,e,s,r),gu(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ht(),s=Gs(e),o=es(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ys(e,o,s),t!==null&&(nr(t,e,s,r),gu(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ht(),r=Gs(e),s=es(n,r);s.tag=2,t!=null&&(s.callback=t),t=Ys(e,s,r),t!==null&&(nr(t,e,r,n),gu(t,e,r))}};function d0(e,t,n,r,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Tl(n,r)||!Tl(s,o):!0}function bS(e,t,n){var r=!1,s=Zs,o=t.contextType;return typeof o=="object"&&o!==null?o=Fn(o):(s=cn(t)?Wo:Mt.current,r=t.contextTypes,o=(r=r!=null)?oi(e,s):Zs),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Yd,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function f0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Yd.enqueueReplaceState(t,t.state,null)}function Mp(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Cg(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Fn(o):(o=cn(t)?Wo:Mt.current,s.context=oi(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Ap(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Yd.enqueueReplaceState(s,s.state,null),qu(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ci(e,t){try{var n="",r=t;do n+=CP(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function dh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Dp(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var XT=typeof WeakMap=="function"?WeakMap:Map;function SS(e,t,n){n=es(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ed||(ed=!0,Yp=r),Dp(e,t)},n}function _S(e,t,n){n=es(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Dp(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Dp(e,t),typeof r!="function"&&(Ks===null?Ks=new Set([this]):Ks.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function h0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new XT;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=fR.bind(null,e,t,n),t.then(e,e))}function p0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function m0(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=es(-1,1),t.tag=2,Ys(n,t,1))),n.lanes|=1),e)}var ZT=cs.ReactCurrentOwner,on=!1;function Bt(e,t,n,r){t.child=e===null?Xb(t,null,n,r):ii(t,e.child,n,r)}function g0(e,t,n,r,s){n=n.render;var o=t.ref;return Ua(t,s),r=Tg(e,t,n,r,o,s),n=Rg(),e!==null&&!on?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,os(e,t,s)):(Xe&&n&&yg(t),t.flags|=1,Bt(e,t,r,s),t.child)}function v0(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!Bg(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,ES(e,t,o,r,s)):(e=Su(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Tl,n(a,r)&&e.ref===t.ref)return os(e,t,s)}return t.flags|=1,e=qs(o,r),e.ref=t.ref,e.return=t,t.child=e}function ES(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Tl(o,r)&&e.ref===t.ref)if(on=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(on=!0);else return t.lanes=e.lanes,os(e,t,s)}return Lp(e,t,n,r,s)}function CS(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Ma,yn),yn|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ke(Ma,yn),yn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ke(Ma,yn),yn|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ke(Ma,yn),yn|=r;return Bt(e,t,s,n),t.child}function kS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Lp(e,t,n,r,s){var o=cn(n)?Wo:Mt.current;return o=oi(t,o),Ua(t,s),n=Tg(e,t,n,r,o,s),r=Rg(),e!==null&&!on?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,os(e,t,s)):(Xe&&r&&yg(t),t.flags|=1,Bt(e,t,n,s),t.child)}function y0(e,t,n,r,s){if(cn(n)){var o=!0;Hu(t)}else o=!1;if(Ua(t,s),t.stateNode===null)wu(e,t),bS(t,n,r),Mp(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Fn(u):(u=cn(n)?Wo:Mt.current,u=oi(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==u)&&f0(t,a,r,u),_s=!1;var p=t.memoizedState;a.state=p,qu(t,r,a,s),c=t.memoizedState,i!==r||p!==c||ln.current||_s?(typeof d=="function"&&(Ap(t,n,d,r),c=t.memoizedState),(i=_s||d0(t,n,i,r,p,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,eS(e,t),i=t.memoizedProps,u=t.type===t.elementType?i:Gn(t.type,i),a.props=u,h=t.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Fn(c):(c=cn(n)?Wo:Mt.current,c=oi(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==h||p!==c)&&f0(t,a,r,c),_s=!1,p=t.memoizedState,a.state=p,qu(t,r,a,s);var w=t.memoizedState;i!==h||p!==w||ln.current||_s?(typeof m=="function"&&(Ap(t,n,m,r),w=t.memoizedState),(u=_s||d0(t,n,u,r,p,w,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),a.props=r,a.state=w,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return $p(e,t,n,r,o,s)}function $p(e,t,n,r,s,o){kS(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&r0(t,n,!1),os(e,t,o);r=t.stateNode,ZT.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ii(t,e.child,null,o),t.child=ii(t,null,i,o)):Bt(e,t,i,o),t.memoizedState=r.state,s&&r0(t,n,!0),t.child}function NS(e){var t=e.stateNode;t.pendingContext?n0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&n0(e,t.context,!1),kg(e,t.containerInfo)}function w0(e,t,n,r,s){return ai(),xg(s),t.flags|=256,Bt(e,t,n,r),t.child}var Fp={dehydrated:null,treeContext:null,retryLane:0};function Up(e){return{baseLanes:e,cachePool:null,transitions:null}}function jS(e,t,n){var r=t.pendingProps,s=tt.current,o=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ke(tt,s&1),e===null)return Ip(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=qd(a,r,0,null),e=Uo(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Up(n),t.memoizedState=Fp,e):Ag(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return eR(e,t,a,r,i,s,n);if(o){o=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=qs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?o=qs(i,o):(o=Uo(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?Up(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Fp,r}return o=e.child,e=o.sibling,r=qs(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ag(e,t){return t=qd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vc(e,t,n,r){return r!==null&&xg(r),ii(t,e.child,null,n),e=Ag(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function eR(e,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=dh(Error(q(422))),Vc(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=qd({mode:"visible",children:r.children},s,0,null),o=Uo(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&ii(t,e.child,null,a),t.child.memoizedState=Up(a),t.memoizedState=Fp,o);if(!(t.mode&1))return Vc(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,o=Error(q(419)),r=dh(o,r,void 0),Vc(e,t,a,r)}if(i=(a&e.childLanes)!==0,on||i){if(r=bt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,ss(e,s),nr(r,e,s,-1))}return Ug(),r=dh(Error(q(421))),Vc(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=hR.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,xn=Vs(s.nextSibling),bn=t,Xe=!0,Zn=null,e!==null&&(In[On++]=qr,In[On++]=Qr,In[On++]=zo,qr=e.id,Qr=e.overflow,zo=t),t=Ag(t,r.children),t.flags|=4096,t)}function x0(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Op(e.return,t,n)}function fh(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function PS(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(Bt(e,t,r.children,n),r=tt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&x0(e,n,t);else if(e.tag===19)x0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ke(tt,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Qu(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),fh(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Qu(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}fh(t,!0,n,null,o);break;case"together":fh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function os(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Vo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,n=qs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=qs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function tR(e,t,n){switch(t.tag){case 3:NS(t),ai();break;case 5:tS(t);break;case 1:cn(t.type)&&Hu(t);break;case 4:kg(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ke(Ku,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ke(tt,tt.current&1),t.flags|=128,null):n&t.child.childLanes?jS(e,t,n):(Ke(tt,tt.current&1),e=os(e,t,n),e!==null?e.sibling:null);Ke(tt,tt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return PS(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ke(tt,tt.current),r)break;return null;case 22:case 23:return t.lanes=0,CS(e,t,n)}return os(e,t,n)}var TS,Bp,RS,IS;TS=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bp=function(){};RS=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,jo(Pr.current);var o=null;switch(n){case"input":s=cp(e,s),r=cp(e,r),o=[];break;case"select":s=rt({},s,{value:void 0}),r=rt({},r,{value:void 0}),o=[];break;case"textarea":s=fp(e,s),r=fp(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Wu)}pp(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var i=s[u];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_l.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(i=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==i&&(c!=null||i!=null))if(u==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_l.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Qe("scroll",e),o||i===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};IS=function(e,t,n,r){n!==r&&(t.flags|=4)};function Bi(e,t){if(!Xe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function nR(e,t,n){var r=t.pendingProps;switch(wg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(t),null;case 1:return cn(t.type)&&zu(),Rt(t),null;case 3:return r=t.stateNode,li(),Je(ln),Je(Mt),jg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(zc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zn!==null&&(qp(Zn),Zn=null))),Bp(e,t),Rt(t),null;case 5:Ng(t);var s=jo(Ml.current);if(n=t.type,e!==null&&t.stateNode!=null)RS(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(q(166));return Rt(t),null}if(e=jo(Pr.current),zc(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Cr]=t,r[Ol]=o,e=(t.mode&1)!==0,n){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(s=0;s<tl.length;s++)Qe(tl[s],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":Py(r,o),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Qe("invalid",r);break;case"textarea":Ry(r,o),Qe("invalid",r)}pp(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var i=o[a];a==="children"?typeof i=="string"?r.textContent!==i&&(o.suppressHydrationWarning!==!0&&Wc(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(o.suppressHydrationWarning!==!0&&Wc(r.textContent,i,e),s=["children",""+i]):_l.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Qe("scroll",r)}switch(n){case"input":Ac(r),Ty(r,o,!0);break;case"textarea":Ac(r),Iy(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Wu)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ab(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Cr]=t,e[Ol]=r,TS(e,t,!1,!1),t.stateNode=e;e:{switch(a=mp(n,r),n){case"dialog":Qe("cancel",e),Qe("close",e),s=r;break;case"iframe":case"object":case"embed":Qe("load",e),s=r;break;case"video":case"audio":for(s=0;s<tl.length;s++)Qe(tl[s],e);s=r;break;case"source":Qe("error",e),s=r;break;case"img":case"image":case"link":Qe("error",e),Qe("load",e),s=r;break;case"details":Qe("toggle",e),s=r;break;case"input":Py(e,r),s=cp(e,r),Qe("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=rt({},r,{value:void 0}),Qe("invalid",e);break;case"textarea":Ry(e,r),s=fp(e,r),Qe("invalid",e);break;default:s=r}pp(n,s),i=s;for(o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="style"?cb(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ib(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&El(e,c):typeof c=="number"&&El(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(_l.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Qe("scroll",e):c!=null&&sg(e,o,c,a))}switch(n){case"input":Ac(e),Ty(e,r,!1);break;case"textarea":Ac(e),Iy(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Xs(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Da(e,!!r.multiple,o,!1):r.defaultValue!=null&&Da(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Wu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Rt(t),null;case 6:if(e&&t.stateNode!=null)IS(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(q(166));if(n=jo(Ml.current),jo(Pr.current),zc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Cr]=t,(o=r.nodeValue!==n)&&(e=bn,e!==null))switch(e.tag){case 3:Wc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wc(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cr]=t,t.stateNode=r}return Rt(t),null;case 13:if(Je(tt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Xe&&xn!==null&&t.mode&1&&!(t.flags&128))Qb(),ai(),t.flags|=98560,o=!1;else if(o=zc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(q(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(q(317));o[Cr]=t}else ai(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Rt(t),o=!1}else Zn!==null&&(qp(Zn),Zn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||tt.current&1?yt===0&&(yt=3):Ug())),t.updateQueue!==null&&(t.flags|=4),Rt(t),null);case 4:return li(),Bp(e,t),e===null&&Rl(t.stateNode.containerInfo),Rt(t),null;case 10:return _g(t.type._context),Rt(t),null;case 17:return cn(t.type)&&zu(),Rt(t),null;case 19:if(Je(tt),o=t.memoizedState,o===null)return Rt(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)Bi(o,!1);else{if(yt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Qu(e),a!==null){for(t.flags|=128,Bi(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ke(tt,tt.current&1|2),t.child}e=e.sibling}o.tail!==null&&lt()>ui&&(t.flags|=128,r=!0,Bi(o,!1),t.lanes=4194304)}else{if(!r)if(e=Qu(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Bi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Xe)return Rt(t),null}else 2*lt()-o.renderingStartTime>ui&&n!==1073741824&&(t.flags|=128,r=!0,Bi(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=lt(),t.sibling=null,n=tt.current,Ke(tt,r?n&1|2:n&1),t):(Rt(t),null);case 22:case 23:return Fg(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?yn&1073741824&&(Rt(t),t.subtreeFlags&6&&(t.flags|=8192)):Rt(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function rR(e,t){switch(wg(t),t.tag){case 1:return cn(t.type)&&zu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return li(),Je(ln),Je(Mt),jg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ng(t),null;case 13:if(Je(tt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));ai()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Je(tt),null;case 4:return li(),null;case 10:return _g(t.type._context),null;case 22:case 23:return Fg(),null;case 24:return null;default:return null}}var Yc=!1,Ot=!1,sR=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Aa(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){at(e,t,r)}else n.current=null}function Wp(e,t,n){try{n()}catch(r){at(e,t,r)}}var b0=!1;function oR(e,t){if(Cp=Fu,e=Lb(),vg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,i=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(i=a+s),h!==o||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++u===s&&(i=a),p===o&&++d===r&&(c=a),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(kp={focusedElem:e,selectionRange:n},Fu=!1,ae=t;ae!==null;)if(t=ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ae=e;else for(;ae!==null;){t=ae;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,y=w.memoizedState,x=t.stateNode,g=x.getSnapshotBeforeUpdate(t.elementType===t.type?v:Gn(t.type,v),y);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(S){at(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,ae=e;break}ae=t.return}return w=b0,b0=!1,w}function fl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Wp(t,n,o)}s=s.next}while(s!==r)}}function Kd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function zp(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function OS(e){var t=e.alternate;t!==null&&(e.alternate=null,OS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Cr],delete t[Ol],delete t[Pp],delete t[BT],delete t[WT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function AS(e){return e.tag===5||e.tag===3||e.tag===4}function S0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||AS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Wu));else if(r!==4&&(e=e.child,e!==null))for(Hp(e,t,n),e=e.sibling;e!==null;)Hp(e,t,n),e=e.sibling}function Vp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Vp(e,t,n),e=e.sibling;e!==null;)Vp(e,t,n),e=e.sibling}var Et=null,Jn=!1;function ps(e,t,n){for(n=n.child;n!==null;)MS(e,t,n),n=n.sibling}function MS(e,t,n){if(jr&&typeof jr.onCommitFiberUnmount=="function")try{jr.onCommitFiberUnmount(Fd,n)}catch{}switch(n.tag){case 5:Ot||Aa(n,t);case 6:var r=Et,s=Jn;Et=null,ps(e,t,n),Et=r,Jn=s,Et!==null&&(Jn?(e=Et,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Et.removeChild(n.stateNode));break;case 18:Et!==null&&(Jn?(e=Et,n=n.stateNode,e.nodeType===8?oh(e.parentNode,n):e.nodeType===1&&oh(e,n),jl(e)):oh(Et,n.stateNode));break;case 4:r=Et,s=Jn,Et=n.stateNode.containerInfo,Jn=!0,ps(e,t,n),Et=r,Jn=s;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Wp(n,t,a),s=s.next}while(s!==r)}ps(e,t,n);break;case 1:if(!Ot&&(Aa(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){at(n,t,i)}ps(e,t,n);break;case 21:ps(e,t,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,ps(e,t,n),Ot=r):ps(e,t,n);break;default:ps(e,t,n)}}function _0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new sR),t.forEach(function(r){var s=pR.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Hn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:Et=i.stateNode,Jn=!1;break e;case 3:Et=i.stateNode.containerInfo,Jn=!0;break e;case 4:Et=i.stateNode.containerInfo,Jn=!0;break e}i=i.return}if(Et===null)throw Error(q(160));MS(o,a,s),Et=null,Jn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){at(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)DS(t,e),t=t.sibling}function DS(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Hn(t,e),yr(e),r&4){try{fl(3,e,e.return),Kd(3,e)}catch(v){at(e,e.return,v)}try{fl(5,e,e.return)}catch(v){at(e,e.return,v)}}break;case 1:Hn(t,e),yr(e),r&512&&n!==null&&Aa(n,n.return);break;case 5:if(Hn(t,e),yr(e),r&512&&n!==null&&Aa(n,n.return),e.flags&32){var s=e.stateNode;try{El(s,"")}catch(v){at(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&o.type==="radio"&&o.name!=null&&sb(s,o),mp(i,a);var u=mp(i,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?cb(s,h):d==="dangerouslySetInnerHTML"?ib(s,h):d==="children"?El(s,h):sg(s,d,h,u)}switch(i){case"input":up(s,o);break;case"textarea":ob(s,o);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?Da(s,!!o.multiple,m,!1):p!==!!o.multiple&&(o.defaultValue!=null?Da(s,!!o.multiple,o.defaultValue,!0):Da(s,!!o.multiple,o.multiple?[]:"",!1))}s[Ol]=o}catch(v){at(e,e.return,v)}}break;case 6:if(Hn(t,e),yr(e),r&4){if(e.stateNode===null)throw Error(q(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(v){at(e,e.return,v)}}break;case 3:if(Hn(t,e),yr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{jl(t.containerInfo)}catch(v){at(e,e.return,v)}break;case 4:Hn(t,e),yr(e);break;case 13:Hn(t,e),yr(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Lg=lt())),r&4&&_0(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Ot=(u=Ot)||d,Hn(t,e),Ot=u):Hn(t,e),yr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ae=e,d=e.child;d!==null;){for(h=ae=d;ae!==null;){switch(p=ae,m=p.child,p.tag){case 0:case 11:case 14:case 15:fl(4,p,p.return);break;case 1:Aa(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(v){at(r,n,v)}}break;case 5:Aa(p,p.return);break;case 22:if(p.memoizedState!==null){C0(h);continue}}m!==null?(m.return=p,ae=m):C0(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(i=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=lb("display",a))}catch(v){at(e,e.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){at(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Hn(t,e),yr(e),r&4&&_0(e);break;case 21:break;default:Hn(t,e),yr(e)}}function yr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(AS(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(El(s,""),r.flags&=-33);var o=S0(e);Vp(e,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=S0(e);Hp(e,i,a);break;default:throw Error(q(161))}}catch(c){at(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function aR(e,t,n){ae=e,LS(e)}function LS(e,t,n){for(var r=(e.mode&1)!==0;ae!==null;){var s=ae,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Yc;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||Ot;i=Yc;var u=Ot;if(Yc=a,(Ot=c)&&!u)for(ae=s;ae!==null;)a=ae,c=a.child,a.tag===22&&a.memoizedState!==null?k0(s):c!==null?(c.return=a,ae=c):k0(s);for(;o!==null;)ae=o,LS(o),o=o.sibling;ae=s,Yc=i,Ot=u}E0(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ae=o):E0(e)}}function E0(e){for(;ae!==null;){var t=ae;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ot||Kd(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Gn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&l0(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}l0(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&jl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Ot||t.flags&512&&zp(t)}catch(p){at(t,t.return,p)}}if(t===e){ae=null;break}if(n=t.sibling,n!==null){n.return=t.return,ae=n;break}ae=t.return}}function C0(e){for(;ae!==null;){var t=ae;if(t===e){ae=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ae=n;break}ae=t.return}}function k0(e){for(;ae!==null;){var t=ae;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Kd(4,t)}catch(c){at(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){at(t,s,c)}}var o=t.return;try{zp(t)}catch(c){at(t,o,c)}break;case 5:var a=t.return;try{zp(t)}catch(c){at(t,a,c)}}}catch(c){at(t,t.return,c)}if(t===e){ae=null;break}var i=t.sibling;if(i!==null){i.return=t.return,ae=i;break}ae=t.return}}var iR=Math.ceil,Zu=cs.ReactCurrentDispatcher,Mg=cs.ReactCurrentOwner,Dn=cs.ReactCurrentBatchConfig,De=0,bt=null,ft=null,Ct=0,yn=0,Ma=so(0),yt=0,Fl=null,Vo=0,Gd=0,Dg=0,hl=null,rn=null,Lg=0,ui=1/0,Hr=null,ed=!1,Yp=null,Ks=null,Kc=!1,$s=null,td=0,pl=0,Kp=null,xu=-1,bu=0;function Ht(){return De&6?lt():xu!==-1?xu:xu=lt()}function Gs(e){return e.mode&1?De&2&&Ct!==0?Ct&-Ct:HT.transition!==null?(bu===0&&(bu=bb()),bu):(e=ze,e!==0||(e=window.event,e=e===void 0?16:jb(e.type)),e):1}function nr(e,t,n,r){if(50<pl)throw pl=0,Kp=null,Error(q(185));sc(e,n,r),(!(De&2)||e!==bt)&&(e===bt&&(!(De&2)&&(Gd|=n),yt===4&&Cs(e,Ct)),un(e,r),n===1&&De===0&&!(t.mode&1)&&(ui=lt()+500,Hd&&oo()))}function un(e,t){var n=e.callbackNode;HP(e,t);var r=$u(e,e===bt?Ct:0);if(r===0)n!==null&&My(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&My(n),t===1)e.tag===0?zT(N0.bind(null,e)):Kb(N0.bind(null,e)),FT(function(){!(De&6)&&oo()}),n=null;else{switch(Sb(r)){case 1:n=cg;break;case 4:n=wb;break;case 16:n=Lu;break;case 536870912:n=xb;break;default:n=Lu}n=VS(n,$S.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $S(e,t){if(xu=-1,bu=0,De&6)throw Error(q(327));var n=e.callbackNode;if(Ba()&&e.callbackNode!==n)return null;var r=$u(e,e===bt?Ct:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=nd(e,r);else{t=r;var s=De;De|=2;var o=US();(bt!==e||Ct!==t)&&(Hr=null,ui=lt()+500,Fo(e,t));do try{uR();break}catch(i){FS(e,i)}while(!0);Sg(),Zu.current=o,De=s,ft!==null?t=0:(bt=null,Ct=0,t=yt)}if(t!==0){if(t===2&&(s=xp(e),s!==0&&(r=s,t=Gp(e,s))),t===1)throw n=Fl,Fo(e,0),Cs(e,r),un(e,lt()),n;if(t===6)Cs(e,r);else{if(s=e.current.alternate,!(r&30)&&!lR(s)&&(t=nd(e,r),t===2&&(o=xp(e),o!==0&&(r=o,t=Gp(e,o))),t===1))throw n=Fl,Fo(e,0),Cs(e,r),un(e,lt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(q(345));case 2:xo(e,rn,Hr);break;case 3:if(Cs(e,r),(r&130023424)===r&&(t=Lg+500-lt(),10<t)){if($u(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ht(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=jp(xo.bind(null,e,rn,Hr),t);break}xo(e,rn,Hr);break;case 4:if(Cs(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-tr(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=lt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iR(r/1960))-r,10<r){e.timeoutHandle=jp(xo.bind(null,e,rn,Hr),r);break}xo(e,rn,Hr);break;case 5:xo(e,rn,Hr);break;default:throw Error(q(329))}}}return un(e,lt()),e.callbackNode===n?$S.bind(null,e):null}function Gp(e,t){var n=hl;return e.current.memoizedState.isDehydrated&&(Fo(e,t).flags|=256),e=nd(e,t),e!==2&&(t=rn,rn=n,t!==null&&qp(t)),e}function qp(e){rn===null?rn=e:rn.push.apply(rn,e)}function lR(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!rr(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cs(e,t){for(t&=~Dg,t&=~Gd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-tr(t),r=1<<n;e[n]=-1,t&=~r}}function N0(e){if(De&6)throw Error(q(327));Ba();var t=$u(e,0);if(!(t&1))return un(e,lt()),null;var n=nd(e,t);if(e.tag!==0&&n===2){var r=xp(e);r!==0&&(t=r,n=Gp(e,r))}if(n===1)throw n=Fl,Fo(e,0),Cs(e,t),un(e,lt()),n;if(n===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xo(e,rn,Hr),un(e,lt()),null}function $g(e,t){var n=De;De|=1;try{return e(t)}finally{De=n,De===0&&(ui=lt()+500,Hd&&oo())}}function Yo(e){$s!==null&&$s.tag===0&&!(De&6)&&Ba();var t=De;De|=1;var n=Dn.transition,r=ze;try{if(Dn.transition=null,ze=1,e)return e()}finally{ze=r,Dn.transition=n,De=t,!(De&6)&&oo()}}function Fg(){yn=Ma.current,Je(Ma)}function Fo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,$T(n)),ft!==null)for(n=ft.return;n!==null;){var r=n;switch(wg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zu();break;case 3:li(),Je(ln),Je(Mt),jg();break;case 5:Ng(r);break;case 4:li();break;case 13:Je(tt);break;case 19:Je(tt);break;case 10:_g(r.type._context);break;case 22:case 23:Fg()}n=n.return}if(bt=e,ft=e=qs(e.current,null),Ct=yn=t,yt=0,Fl=null,Dg=Gd=Vo=0,rn=hl=null,No!==null){for(t=0;t<No.length;t++)if(n=No[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}No=null}return e}function FS(e,t){do{var n=ft;try{if(Sg(),vu.current=Xu,Ju){for(var r=nt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ju=!1}if(Ho=0,xt=gt=nt=null,dl=!1,Dl=0,Mg.current=null,n===null||n.return===null){yt=1,Fl=t,ft=null;break}e:{var o=e,a=n.return,i=n,c=t;if(t=Ct,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=i,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=p0(a);if(m!==null){m.flags&=-257,m0(m,a,i,o,t),m.mode&1&&h0(o,u,t),t=m,c=u;var w=t.updateQueue;if(w===null){var v=new Set;v.add(c),t.updateQueue=v}else w.add(c);break e}else{if(!(t&1)){h0(o,u,t),Ug();break e}c=Error(q(426))}}else if(Xe&&i.mode&1){var y=p0(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),m0(y,a,i,o,t),xg(ci(c,i));break e}}o=c=ci(c,i),yt!==4&&(yt=2),hl===null?hl=[o]:hl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=SS(o,c,t);i0(o,x);break e;case 1:i=c;var g=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ks===null||!Ks.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=_S(o,i,t);i0(o,S);break e}}o=o.return}while(o!==null)}WS(n)}catch(_){t=_,ft===n&&n!==null&&(ft=n=n.return);continue}break}while(!0)}function US(){var e=Zu.current;return Zu.current=Xu,e===null?Xu:e}function Ug(){(yt===0||yt===3||yt===2)&&(yt=4),bt===null||!(Vo&268435455)&&!(Gd&268435455)||Cs(bt,Ct)}function nd(e,t){var n=De;De|=2;var r=US();(bt!==e||Ct!==t)&&(Hr=null,Fo(e,t));do try{cR();break}catch(s){FS(e,s)}while(!0);if(Sg(),De=n,Zu.current=r,ft!==null)throw Error(q(261));return bt=null,Ct=0,yt}function cR(){for(;ft!==null;)BS(ft)}function uR(){for(;ft!==null&&!MP();)BS(ft)}function BS(e){var t=HS(e.alternate,e,yn);e.memoizedProps=e.pendingProps,t===null?WS(e):ft=t,Mg.current=null}function WS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=rR(n,t),n!==null){n.flags&=32767,ft=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{yt=6,ft=null;return}}else if(n=nR(n,t,yn),n!==null){ft=n;return}if(t=t.sibling,t!==null){ft=t;return}ft=t=e}while(t!==null);yt===0&&(yt=5)}function xo(e,t,n){var r=ze,s=Dn.transition;try{Dn.transition=null,ze=1,dR(e,t,n,r)}finally{Dn.transition=s,ze=r}return null}function dR(e,t,n,r){do Ba();while($s!==null);if(De&6)throw Error(q(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(VP(e,o),e===bt&&(ft=bt=null,Ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Kc||(Kc=!0,VS(Lu,function(){return Ba(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Dn.transition,Dn.transition=null;var a=ze;ze=1;var i=De;De|=4,Mg.current=null,oR(e,n),DS(n,e),RT(kp),Fu=!!Cp,kp=Cp=null,e.current=n,aR(n),DP(),De=i,ze=a,Dn.transition=o}else e.current=n;if(Kc&&(Kc=!1,$s=e,td=s),o=e.pendingLanes,o===0&&(Ks=null),FP(n.stateNode),un(e,lt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ed)throw ed=!1,e=Yp,Yp=null,e;return td&1&&e.tag!==0&&Ba(),o=e.pendingLanes,o&1?e===Kp?pl++:(pl=0,Kp=e):pl=0,oo(),null}function Ba(){if($s!==null){var e=Sb(td),t=Dn.transition,n=ze;try{if(Dn.transition=null,ze=16>e?16:e,$s===null)var r=!1;else{if(e=$s,$s=null,td=0,De&6)throw Error(q(331));var s=De;for(De|=4,ae=e.current;ae!==null;){var o=ae,a=o.child;if(ae.flags&16){var i=o.deletions;if(i!==null){for(var c=0;c<i.length;c++){var u=i[c];for(ae=u;ae!==null;){var d=ae;switch(d.tag){case 0:case 11:case 15:fl(8,d,o)}var h=d.child;if(h!==null)h.return=d,ae=h;else for(;ae!==null;){d=ae;var p=d.sibling,m=d.return;if(OS(d),d===u){ae=null;break}if(p!==null){p.return=m,ae=p;break}ae=m}}}var w=o.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}ae=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ae=a;else e:for(;ae!==null;){if(o=ae,o.flags&2048)switch(o.tag){case 0:case 11:case 15:fl(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,ae=x;break e}ae=o.return}}var g=e.current;for(ae=g;ae!==null;){a=ae;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,ae=b;else e:for(a=g;ae!==null;){if(i=ae,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Kd(9,i)}}catch(_){at(i,i.return,_)}if(i===a){ae=null;break e}var S=i.sibling;if(S!==null){S.return=i.return,ae=S;break e}ae=i.return}}if(De=s,oo(),jr&&typeof jr.onPostCommitFiberRoot=="function")try{jr.onPostCommitFiberRoot(Fd,e)}catch{}r=!0}return r}finally{ze=n,Dn.transition=t}}return!1}function j0(e,t,n){t=ci(n,t),t=SS(e,t,1),e=Ys(e,t,1),t=Ht(),e!==null&&(sc(e,1,t),un(e,t))}function at(e,t,n){if(e.tag===3)j0(e,e,n);else for(;t!==null;){if(t.tag===3){j0(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ks===null||!Ks.has(r))){e=ci(n,e),e=_S(t,e,1),t=Ys(t,e,1),e=Ht(),t!==null&&(sc(t,1,e),un(t,e));break}}t=t.return}}function fR(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ht(),e.pingedLanes|=e.suspendedLanes&n,bt===e&&(Ct&n)===n&&(yt===4||yt===3&&(Ct&130023424)===Ct&&500>lt()-Lg?Fo(e,0):Dg|=n),un(e,t)}function zS(e,t){t===0&&(e.mode&1?(t=Lc,Lc<<=1,!(Lc&130023424)&&(Lc=4194304)):t=1);var n=Ht();e=ss(e,t),e!==null&&(sc(e,t,n),un(e,n))}function hR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),zS(e,n)}function pR(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(t),zS(e,n)}var HS;HS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ln.current)on=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return on=!1,tR(e,t,n);on=!!(e.flags&131072)}else on=!1,Xe&&t.flags&1048576&&Gb(t,Yu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;wu(e,t),e=t.pendingProps;var s=oi(t,Mt.current);Ua(t,n),s=Tg(null,t,r,e,s,n);var o=Rg();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,cn(r)?(o=!0,Hu(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Cg(t),s.updater=Yd,t.stateNode=s,s._reactInternals=t,Mp(t,r,e,n),t=$p(null,t,r,!0,o,n)):(t.tag=0,Xe&&o&&yg(t),Bt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(wu(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=gR(r),e=Gn(r,e),s){case 0:t=Lp(null,t,r,e,n);break e;case 1:t=y0(null,t,r,e,n);break e;case 11:t=g0(null,t,r,e,n);break e;case 14:t=v0(null,t,r,Gn(r.type,e),n);break e}throw Error(q(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Gn(r,s),Lp(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Gn(r,s),y0(e,t,r,s,n);case 3:e:{if(NS(t),e===null)throw Error(q(387));r=t.pendingProps,o=t.memoizedState,s=o.element,eS(e,t),qu(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=ci(Error(q(423)),t),t=w0(e,t,r,n,s);break e}else if(r!==s){s=ci(Error(q(424)),t),t=w0(e,t,r,n,s);break e}else for(xn=Vs(t.stateNode.containerInfo.firstChild),bn=t,Xe=!0,Zn=null,n=Xb(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ai(),r===s){t=os(e,t,n);break e}Bt(e,t,r,n)}t=t.child}return t;case 5:return tS(t),e===null&&Ip(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,Np(r,s)?a=null:o!==null&&Np(r,o)&&(t.flags|=32),kS(e,t),Bt(e,t,a,n),t.child;case 6:return e===null&&Ip(t),null;case 13:return jS(e,t,n);case 4:return kg(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ii(t,null,r,n):Bt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Gn(r,s),g0(e,t,r,s,n);case 7:return Bt(e,t,t.pendingProps,n),t.child;case 8:return Bt(e,t,t.pendingProps.children,n),t.child;case 12:return Bt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,Ke(Ku,r._currentValue),r._currentValue=a,o!==null)if(rr(o.value,a)){if(o.children===s.children&&!ln.current){t=os(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var i=o.dependencies;if(i!==null){a=o.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=es(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Op(o.return,n,t),i.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(q(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),Op(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Bt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ua(t,n),s=Fn(s),r=r(s),t.flags|=1,Bt(e,t,r,n),t.child;case 14:return r=t.type,s=Gn(r,t.pendingProps),s=Gn(r.type,s),v0(e,t,r,s,n);case 15:return ES(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Gn(r,s),wu(e,t),t.tag=1,cn(r)?(e=!0,Hu(t)):e=!1,Ua(t,n),bS(t,r,s),Mp(t,r,s,n),$p(null,t,r,!0,e,n);case 19:return PS(e,t,n);case 22:return CS(e,t,n)}throw Error(q(156,t.tag))};function VS(e,t){return yb(e,t)}function mR(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(e,t,n,r){return new mR(e,t,n,r)}function Bg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gR(e){if(typeof e=="function")return Bg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ag)return 11;if(e===ig)return 14}return 2}function qs(e,t){var n=e.alternate;return n===null?(n=An(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Su(e,t,n,r,s,o){var a=2;if(r=e,typeof e=="function")Bg(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ca:return Uo(n.children,s,o,t);case og:a=8,s|=8;break;case op:return e=An(12,n,t,s|2),e.elementType=op,e.lanes=o,e;case ap:return e=An(13,n,t,s),e.elementType=ap,e.lanes=o,e;case ip:return e=An(19,n,t,s),e.elementType=ip,e.lanes=o,e;case tb:return qd(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Zx:a=10;break e;case eb:a=9;break e;case ag:a=11;break e;case ig:a=14;break e;case Ss:a=16,r=null;break e}throw Error(q(130,e==null?e:typeof e,""))}return t=An(a,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Uo(e,t,n,r){return e=An(7,e,r,t),e.lanes=n,e}function qd(e,t,n,r){return e=An(22,e,r,t),e.elementType=tb,e.lanes=n,e.stateNode={isHidden:!1},e}function hh(e,t,n){return e=An(6,e,null,t),e.lanes=n,e}function ph(e,t,n){return t=An(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vR(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gf(0),this.expirationTimes=Gf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wg(e,t,n,r,s,o,a,i,c){return e=new vR(e,t,n,i,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=An(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cg(o),e}function yR(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ea,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function YS(e){if(!e)return Zs;e=e._reactInternals;e:{if(ra(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(cn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var n=e.type;if(cn(n))return Yb(e,n,t)}return t}function KS(e,t,n,r,s,o,a,i,c){return e=Wg(n,r,!0,e,s,o,a,i,c),e.context=YS(null),n=e.current,r=Ht(),s=Gs(n),o=es(r,s),o.callback=t??null,Ys(n,o,s),e.current.lanes=s,sc(e,s,r),un(e,r),e}function Qd(e,t,n,r){var s=t.current,o=Ht(),a=Gs(s);return n=YS(n),t.context===null?t.context=n:t.pendingContext=n,t=es(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ys(s,t,a),e!==null&&(nr(e,s,a,o),gu(e,s,a)),a}function rd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function P0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function zg(e,t){P0(e,t),(e=e.alternate)&&P0(e,t)}function wR(){return null}var GS=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hg(e){this._internalRoot=e}Jd.prototype.render=Hg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));Qd(e,t,null,null)};Jd.prototype.unmount=Hg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yo(function(){Qd(null,e,null,null)}),t[rs]=null}};function Jd(e){this._internalRoot=e}Jd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cb();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Es.length&&t!==0&&t<Es[n].priority;n++);Es.splice(n,0,e),n===0&&Nb(e)}};function Vg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function T0(){}function xR(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=rd(a);o.call(u)}}var a=KS(t,r,e,0,null,!1,!1,"",T0);return e._reactRootContainer=a,e[rs]=a.current,Rl(e.nodeType===8?e.parentNode:e),Yo(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var u=rd(c);i.call(u)}}var c=Wg(e,0,!1,null,null,!1,!1,"",T0);return e._reactRootContainer=c,e[rs]=c.current,Rl(e.nodeType===8?e.parentNode:e),Yo(function(){Qd(t,c,n,r)}),c}function Zd(e,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var i=s;s=function(){var c=rd(a);i.call(c)}}Qd(t,a,e,s)}else a=xR(n,t,e,s,r);return rd(a)}_b=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=el(t.pendingLanes);n!==0&&(ug(t,n|1),un(t,lt()),!(De&6)&&(ui=lt()+500,oo()))}break;case 13:Yo(function(){var r=ss(e,1);if(r!==null){var s=Ht();nr(r,e,1,s)}}),zg(e,1)}};dg=function(e){if(e.tag===13){var t=ss(e,134217728);if(t!==null){var n=Ht();nr(t,e,134217728,n)}zg(e,134217728)}};Eb=function(e){if(e.tag===13){var t=Gs(e),n=ss(e,t);if(n!==null){var r=Ht();nr(n,e,t,r)}zg(e,t)}};Cb=function(){return ze};kb=function(e,t){var n=ze;try{return ze=e,t()}finally{ze=n}};vp=function(e,t,n){switch(t){case"input":if(up(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=zd(r);if(!s)throw Error(q(90));rb(r),up(r,s)}}}break;case"textarea":ob(e,n);break;case"select":t=n.value,t!=null&&Da(e,!!n.multiple,t,!1)}};fb=$g;hb=Yo;var bR={usingClientEntryPoint:!1,Events:[ac,Pa,zd,ub,db,$g]},Wi={findFiberByHostInstance:ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SR={bundleType:Wi.bundleType,version:Wi.version,rendererPackageName:Wi.rendererPackageName,rendererConfig:Wi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gb(e),e===null?null:e.stateNode},findFiberByHostInstance:Wi.findFiberByHostInstance||wR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gc.isDisabled&&Gc.supportsFiber)try{Fd=Gc.inject(SR),jr=Gc}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bR;Cn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vg(t))throw Error(q(200));return yR(e,t,null,n)};Cn.createRoot=function(e,t){if(!Vg(e))throw Error(q(299));var n=!1,r="",s=GS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Wg(e,1,!1,null,null,n,!1,r,s),e[rs]=t.current,Rl(e.nodeType===8?e.parentNode:e),new Hg(t)};Cn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=gb(t),e=e===null?null:e.stateNode,e};Cn.flushSync=function(e){return Yo(e)};Cn.hydrate=function(e,t,n){if(!Xd(t))throw Error(q(200));return Zd(null,e,t,!0,n)};Cn.hydrateRoot=function(e,t,n){if(!Vg(e))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=GS;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=KS(t,null,e,1,n??null,s,!1,o,a),e[rs]=t.current,Rl(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Jd(t)};Cn.render=function(e,t,n){if(!Xd(t))throw Error(q(200));return Zd(null,e,t,!1,n)};Cn.unmountComponentAtNode=function(e){if(!Xd(e))throw Error(q(40));return e._reactRootContainer?(Yo(function(){Zd(null,null,e,!1,function(){e._reactRootContainer=null,e[rs]=null})}),!0):!1};Cn.unstable_batchedUpdates=$g;Cn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xd(n))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return Zd(e,t,n,!1,r)};Cn.version="18.3.1-next-f1338f8080-20240426";function qS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qS)}catch(e){console.error(e)}}qS(),qx.exports=Cn;var sa=qx.exports;const QS=Qm(sa);var JS,R0=sa;JS=R0.createRoot,R0.hydrateRoot;const _R=1,ER=1e6;let mh=0;function CR(){return mh=(mh+1)%Number.MAX_SAFE_INTEGER,mh.toString()}const gh=new Map,I0=e=>{if(gh.has(e))return;const t=setTimeout(()=>{gh.delete(e),ml({type:"REMOVE_TOAST",toastId:e})},ER);gh.set(e,t)},kR=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,_R)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?I0(n):e.toasts.forEach(r=>{I0(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},_u=[];let Eu={toasts:[]};function ml(e){Eu=kR(Eu,e),_u.forEach(t=>{t(Eu)})}function NR({...e}){const t=CR(),n=s=>ml({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>ml({type:"DISMISS_TOAST",toastId:t});return ml({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function Ar(){const[e,t]=f.useState(Eu);return f.useEffect(()=>(_u.push(t),()=>{const n=_u.indexOf(t);n>-1&&_u.splice(n,1)}),[e]),{...e,toast:NR,dismiss:n=>ml({type:"DISMISS_TOAST",toastId:n})}}function Q(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function O0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ef(...e){return t=>{let n=!1;const r=e.map(s=>{const o=O0(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():O0(e[s],null)}}}}function Ce(...e){return f.useCallback(ef(...e),e)}function jR(e,t){const n=f.createContext(t),r=o=>{const{children:a,...i}=o,c=f.useMemo(()=>i,Object.values(i));return l.jsx(n.Provider,{value:c,children:a})};r.displayName=e+"Provider";function s(o){const a=f.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[r,s]}function Kt(e,t=[]){let n=[];function r(o,a){const i=f.createContext(a),c=n.length;n=[...n,a];const u=h=>{var x;const{scope:p,children:m,...w}=h,v=((x=p==null?void 0:p[e])==null?void 0:x[c])||i,y=f.useMemo(()=>w,Object.values(w));return l.jsx(v.Provider,{value:y,children:m})};u.displayName=o+"Provider";function d(h,p){var v;const m=((v=p==null?void 0:p[e])==null?void 0:v[c])||i,w=f.useContext(m);if(w)return w;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[u,d]}const s=()=>{const o=n.map(a=>f.createContext(a));return function(i){const c=(i==null?void 0:i[e])||o;return f.useMemo(()=>({[`__scope${e}`]:{...i,[e]:c}}),[i,c])}};return s.scopeName=e,[r,PR(s,...t)]}function PR(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=r.reduce((i,{useScope:c,scopeName:u})=>{const h=c(o)[`__scope${u}`];return{...i,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function eo(e){const t=RR(e),n=f.forwardRef((r,s)=>{const{children:o,...a}=r,i=f.Children.toArray(o),c=i.find(OR);if(c){const u=c.props.children,d=i.map(h=>h===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:h);return l.jsx(t,{...a,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,d):null})}return l.jsx(t,{...a,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}var TR=eo("Slot");function RR(e){const t=f.forwardRef((n,r)=>{const{children:s,...o}=n;if(f.isValidElement(s)){const a=MR(s),i=AR(o,s.props);return s.type!==f.Fragment&&(i.ref=r?ef(r,a):a),f.cloneElement(s,i)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var XS=Symbol("radix.slottable");function IR(e){const t=({children:n})=>l.jsx(l.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=XS,t}function OR(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===XS}function AR(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...i)=>{const c=o(...i);return s(...i),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function MR(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function tf(e){const t=e+"CollectionProvider",[n,r]=Kt(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:y,children:x}=v,g=K.useRef(null),b=K.useRef(new Map).current;return l.jsx(s,{scope:y,itemMap:b,collectionRef:g,children:x})};a.displayName=t;const i=e+"CollectionSlot",c=eo(i),u=K.forwardRef((v,y)=>{const{scope:x,children:g}=v,b=o(i,x),S=Ce(y,b.collectionRef);return l.jsx(c,{ref:S,children:g})});u.displayName=i;const d=e+"CollectionItemSlot",h="data-radix-collection-item",p=eo(d),m=K.forwardRef((v,y)=>{const{scope:x,children:g,...b}=v,S=K.useRef(null),_=Ce(y,S),C=o(d,x);return K.useEffect(()=>(C.itemMap.set(S,{ref:S,...b}),()=>void C.itemMap.delete(S))),l.jsx(p,{[h]:"",ref:_,children:g})});m.displayName=d;function w(v){const y=o(e+"CollectionConsumer",v);return K.useCallback(()=>{const g=y.collectionRef.current;if(!g)return[];const b=Array.from(g.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((C,N)=>b.indexOf(C.ref.current)-b.indexOf(N.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:a,Slot:u,ItemSlot:m},w,r]}var DR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],fe=DR.reduce((e,t)=>{const n=eo(`Primitive.${t}`),r=f.forwardRef((s,o)=>{const{asChild:a,...i}=s,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...i,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Yg(e,t){e&&sa.flushSync(()=>e.dispatchEvent(t))}function it(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function LR(e,t=globalThis==null?void 0:globalThis.document){const n=it(e);f.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var $R="DismissableLayer",Qp="dismissableLayer.update",FR="dismissableLayer.pointerDownOutside",UR="dismissableLayer.focusOutside",A0,ZS=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),oa=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:i,...c}=e,u=f.useContext(ZS),[d,h]=f.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=f.useState({}),w=Ce(t,N=>h(N)),v=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(y),g=d?v.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,S=g>=x,_=WR(N=>{const T=N.target,L=[...u.branches].some($=>$.contains(T));!S||L||(s==null||s(N),a==null||a(N),N.defaultPrevented||i==null||i())},p),C=zR(N=>{const T=N.target;[...u.branches].some($=>$.contains(T))||(o==null||o(N),a==null||a(N),N.defaultPrevented||i==null||i())},p);return LR(N=>{g===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&i&&(N.preventDefault(),i()))},p),f.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(A0=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),M0(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=A0)}},[d,p,n,u]),f.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),M0())},[d,u]),f.useEffect(()=>{const N=()=>m({});return document.addEventListener(Qp,N),()=>document.removeEventListener(Qp,N)},[]),l.jsx(fe.div,{...c,ref:w,style:{pointerEvents:b?S?"auto":"none":void 0,...e.style},onFocusCapture:Q(e.onFocusCapture,C.onFocusCapture),onBlurCapture:Q(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Q(e.onPointerDownCapture,_.onPointerDownCapture)})});oa.displayName=$R;var BR="DismissableLayerBranch",e_=f.forwardRef((e,t)=>{const n=f.useContext(ZS),r=f.useRef(null),s=Ce(t,r);return f.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),l.jsx(fe.div,{...e,ref:s})});e_.displayName=BR;function WR(e,t=globalThis==null?void 0:globalThis.document){const n=it(e),r=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const o=i=>{if(i.target&&!r.current){let c=function(){t_(FR,n,u,{discrete:!0})};const u={originalEvent:i};i.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function zR(e,t=globalThis==null?void 0:globalThis.document){const n=it(e),r=f.useRef(!1);return f.useEffect(()=>{const s=o=>{o.target&&!r.current&&t_(UR,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function M0(){const e=new CustomEvent(Qp);document.dispatchEvent(e)}function t_(e,t,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Yg(s,o):s.dispatchEvent(o)}var HR=oa,VR=e_,ct=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},YR="Portal",bi=f.forwardRef((e,t)=>{var i;const{container:n,...r}=e,[s,o]=f.useState(!1);ct(()=>o(!0),[]);const a=n||s&&((i=globalThis==null?void 0:globalThis.document)==null?void 0:i.body);return a?QS.createPortal(l.jsx(fe.div,{...r,ref:t}),a):null});bi.displayName=YR;function KR(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var St=e=>{const{present:t,children:n}=e,r=GR(t),s=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),o=Ce(r.ref,qR(s));return typeof n=="function"||r.isPresent?f.cloneElement(s,{ref:o}):null};St.displayName="Presence";function GR(e){const[t,n]=f.useState(),r=f.useRef(null),s=f.useRef(e),o=f.useRef("none"),a=e?"mounted":"unmounted",[i,c]=KR(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=qc(r.current);o.current=i==="mounted"?u:"none"},[i]),ct(()=>{const u=r.current,d=s.current;if(d!==e){const p=o.current,m=qc(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),ct(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=m=>{const v=qc(r.current).includes(m.animationName);if(m.target===t&&v&&(c("ANIMATION_END"),!s.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},p=m=>{m.target===t&&(o.current=qc(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:f.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function qc(e){return(e==null?void 0:e.animationName)||"none"}function qR(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var QR=tg[" useInsertionEffect ".trim().toString()]||ct;function as({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,o,a]=JR({defaultProp:t,onChange:n}),i=e!==void 0,c=i?e:s;{const d=f.useRef(e!==void 0);f.useEffect(()=>{const h=d.current;h!==i&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=i},[i,r])}const u=f.useCallback(d=>{var h;if(i){const p=XR(d)?d(e):d;p!==e&&((h=a.current)==null||h.call(a,p))}else o(d)},[i,e,o,a]);return[c,u]}function JR({defaultProp:e,onChange:t}){const[n,r]=f.useState(e),s=f.useRef(n),o=f.useRef(t);return QR(()=>{o.current=t},[t]),f.useEffect(()=>{var a;s.current!==n&&((a=o.current)==null||a.call(o,n),s.current=n)},[n,s]),[n,r,o]}function XR(e){return typeof e=="function"}var n_=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ZR="VisuallyHidden",nf=f.forwardRef((e,t)=>l.jsx(fe.span,{...e,ref:t,style:{...n_,...e.style}}));nf.displayName=ZR;var eI=nf,Kg="ToastProvider",[Gg,tI,nI]=tf("Toast"),[r_,pz]=Kt("Toast",[nI]),[rI,rf]=r_(Kg),s_=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:a}=e,[i,c]=f.useState(null),[u,d]=f.useState(0),h=f.useRef(!1),p=f.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Kg}\`. Expected non-empty \`string\`.`),l.jsx(Gg.Provider,{scope:t,children:l.jsx(rI,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:i,onViewportChange:c,onToastAdd:f.useCallback(()=>d(m=>m+1),[]),onToastRemove:f.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:a})})};s_.displayName=Kg;var o_="ToastViewport",sI=["F8"],Jp="toast.viewportPause",Xp="toast.viewportResume",a_=f.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=sI,label:s="Notifications ({hotkey})",...o}=e,a=rf(o_,n),i=tI(n),c=f.useRef(null),u=f.useRef(null),d=f.useRef(null),h=f.useRef(null),p=Ce(t,h,a.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=a.toastCount>0;f.useEffect(()=>{const y=x=>{var b;r.length!==0&&r.every(S=>x[S]||x.code===S)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),f.useEffect(()=>{const y=c.current,x=h.current;if(w&&y&&x){const g=()=>{if(!a.isClosePausedRef.current){const C=new CustomEvent(Jp);x.dispatchEvent(C),a.isClosePausedRef.current=!0}},b=()=>{if(a.isClosePausedRef.current){const C=new CustomEvent(Xp);x.dispatchEvent(C),a.isClosePausedRef.current=!1}},S=C=>{!y.contains(C.relatedTarget)&&b()},_=()=>{y.contains(document.activeElement)||b()};return y.addEventListener("focusin",g),y.addEventListener("focusout",S),y.addEventListener("pointermove",g),y.addEventListener("pointerleave",_),window.addEventListener("blur",g),window.addEventListener("focus",b),()=>{y.removeEventListener("focusin",g),y.removeEventListener("focusout",S),y.removeEventListener("pointermove",g),y.removeEventListener("pointerleave",_),window.removeEventListener("blur",g),window.removeEventListener("focus",b)}}},[w,a.isClosePausedRef]);const v=f.useCallback(({tabbingDirection:y})=>{const g=i().map(b=>{const S=b.ref.current,_=[S,...vI(S)];return y==="forwards"?_:_.reverse()});return(y==="forwards"?g.reverse():g).flat()},[i]);return f.useEffect(()=>{const y=h.current;if(y){const x=g=>{var _,C,N;const b=g.altKey||g.ctrlKey||g.metaKey;if(g.key==="Tab"&&!b){const T=document.activeElement,L=g.shiftKey;if(g.target===y&&L){(_=u.current)==null||_.focus();return}const F=v({tabbingDirection:L?"backwards":"forwards"}),O=F.findIndex(j=>j===T);vh(F.slice(O+1))?g.preventDefault():L?(C=u.current)==null||C.focus():(N=d.current)==null||N.focus()}};return y.addEventListener("keydown",x),()=>y.removeEventListener("keydown",x)}},[i,v]),l.jsxs(VR,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&l.jsx(Zp,{ref:u,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"forwards"});vh(y)}}),l.jsx(Gg.Slot,{scope:n,children:l.jsx(fe.ol,{tabIndex:-1,...o,ref:p})}),w&&l.jsx(Zp,{ref:d,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"backwards"});vh(y)}})]})});a_.displayName=o_;var i_="ToastFocusProxy",Zp=f.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,o=rf(i_,n);return l.jsx(nf,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const i=a.relatedTarget;!((u=o.viewport)!=null&&u.contains(i))&&r()}})});Zp.displayName=i_;var lc="Toast",oI="toast.swipeStart",aI="toast.swipeMove",iI="toast.swipeCancel",lI="toast.swipeEnd",l_=f.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:o,...a}=e,[i,c]=as({prop:r,defaultProp:s??!0,onChange:o,caller:lc});return l.jsx(St,{present:n||i,children:l.jsx(dI,{open:i,...a,ref:t,onClose:()=>c(!1),onPause:it(e.onPause),onResume:it(e.onResume),onSwipeStart:Q(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Q(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Q(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Q(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});l_.displayName=lc;var[cI,uI]=r_(lc,{onClose(){}}),dI=f.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:o,onClose:a,onEscapeKeyDown:i,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:m,...w}=e,v=rf(lc,n),[y,x]=f.useState(null),g=Ce(t,j=>x(j)),b=f.useRef(null),S=f.useRef(null),_=s||v.duration,C=f.useRef(0),N=f.useRef(_),T=f.useRef(0),{onToastAdd:L,onToastRemove:$}=v,V=it(()=>{var z;(y==null?void 0:y.contains(document.activeElement))&&((z=v.viewport)==null||z.focus()),a()}),F=f.useCallback(j=>{!j||j===1/0||(window.clearTimeout(T.current),C.current=new Date().getTime(),T.current=window.setTimeout(V,j))},[V]);f.useEffect(()=>{const j=v.viewport;if(j){const z=()=>{F(N.current),u==null||u()},A=()=>{const M=new Date().getTime()-C.current;N.current=N.current-M,window.clearTimeout(T.current),c==null||c()};return j.addEventListener(Jp,A),j.addEventListener(Xp,z),()=>{j.removeEventListener(Jp,A),j.removeEventListener(Xp,z)}}},[v.viewport,_,c,u,F]),f.useEffect(()=>{o&&!v.isClosePausedRef.current&&F(_)},[o,_,v.isClosePausedRef,F]),f.useEffect(()=>(L(),()=>$()),[L,$]);const O=f.useMemo(()=>y?m_(y):null,[y]);return v.viewport?l.jsxs(l.Fragment,{children:[O&&l.jsx(fI,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:O}),l.jsx(cI,{scope:n,onClose:V,children:sa.createPortal(l.jsx(Gg.ItemSlot,{scope:n,children:l.jsx(HR,{asChild:!0,onEscapeKeyDown:Q(i,()=>{v.isFocusedToastEscapeKeyDownRef.current||V(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(fe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":v.swipeDirection,...w,ref:g,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Q(e.onKeyDown,j=>{j.key==="Escape"&&(i==null||i(j.nativeEvent),j.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,V()))}),onPointerDown:Q(e.onPointerDown,j=>{j.button===0&&(b.current={x:j.clientX,y:j.clientY})}),onPointerMove:Q(e.onPointerMove,j=>{if(!b.current)return;const z=j.clientX-b.current.x,A=j.clientY-b.current.y,M=!!S.current,E=["left","right"].includes(v.swipeDirection),R=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,W=E?R(0,z):0,J=E?0:R(0,A),Y=j.pointerType==="touch"?10:2,ue={x:W,y:J},B={originalEvent:j,delta:ue};M?(S.current=ue,Qc(aI,h,B,{discrete:!1})):D0(ue,v.swipeDirection,Y)?(S.current=ue,Qc(oI,d,B,{discrete:!1}),j.target.setPointerCapture(j.pointerId)):(Math.abs(z)>Y||Math.abs(A)>Y)&&(b.current=null)}),onPointerUp:Q(e.onPointerUp,j=>{const z=S.current,A=j.target;if(A.hasPointerCapture(j.pointerId)&&A.releasePointerCapture(j.pointerId),S.current=null,b.current=null,z){const M=j.currentTarget,E={originalEvent:j,delta:z};D0(z,v.swipeDirection,v.swipeThreshold)?Qc(lI,m,E,{discrete:!0}):Qc(iI,p,E,{discrete:!0}),M.addEventListener("click",R=>R.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),fI=e=>{const{__scopeToast:t,children:n,...r}=e,s=rf(lc,t),[o,a]=f.useState(!1),[i,c]=f.useState(!1);return mI(()=>a(!0)),f.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),i?null:l.jsx(bi,{asChild:!0,children:l.jsx(nf,{...r,children:o&&l.jsxs(l.Fragment,{children:[s.label," ",n]})})})},hI="ToastTitle",c_=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return l.jsx(fe.div,{...r,ref:t})});c_.displayName=hI;var pI="ToastDescription",u_=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return l.jsx(fe.div,{...r,ref:t})});u_.displayName=pI;var d_="ToastAction",f_=f.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?l.jsx(p_,{altText:n,asChild:!0,children:l.jsx(qg,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${d_}\`. Expected non-empty \`string\`.`),null)});f_.displayName=d_;var h_="ToastClose",qg=f.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=uI(h_,n);return l.jsx(p_,{asChild:!0,children:l.jsx(fe.button,{type:"button",...r,ref:t,onClick:Q(e.onClick,s.onClose)})})});qg.displayName=h_;var p_=f.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return l.jsx(fe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function m_(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),gI(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const a=r.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...m_(r))}}),t}function Qc(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Yg(s,o):s.dispatchEvent(o)}var D0=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),o=r>s;return t==="left"||t==="right"?o&&r>n:!o&&s>n};function mI(e=()=>{}){const t=it(e);ct(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function gI(e){return e.nodeType===e.ELEMENT_NODE}function vI(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function vh(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var yI=s_,g_=a_,v_=l_,y_=c_,w_=u_,x_=f_,b_=qg;function S_(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=S_(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function __(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=S_(e))&&(r&&(r+=" "),r+=t);return r}const L0=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,$0=__,sf=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return $0(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=t,a=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=o==null?void 0:o[u];if(d===null)return null;const p=L0(d)||L0(h);return s[u][p]}),i=n&&Object.entries(n).reduce((u,d)=>{let[h,p]=d;return p===void 0||(u[h]=p),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:p,...m}=d;return Object.entries(m).every(w=>{let[v,y]=w;return Array.isArray(y)?y.includes({...o,...i}[v]):{...o,...i}[v]===y})?[...u,h,p]:u},[]);return $0(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),E_=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...i},c)=>f.createElement("svg",{ref:c,...xI,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:E_("lucide",s),...i},[...a.map(([u,d])=>f.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=(e,t)=>{const n=f.forwardRef(({className:r,...s},o)=>f.createElement(bI,{ref:o,iconNode:t,className:E_(`lucide-${wI(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=Gt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=Gt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=Gt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=Gt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=Gt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=Gt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=Gt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=Gt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=Gt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=Gt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=Gt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=Gt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=Gt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=Gt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=Gt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ev="-",jI=e=>{const t=TI(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const i=a.split(ev);return i[0]===""&&i.length!==1&&i.shift(),j_(i,t)||PI(a)},getConflictingClassGroupIds:(a,i)=>{const c=n[a]||[];return i&&r[a]?[...c,...r[a]]:c}}},j_=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?j_(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(ev);return(a=t.validators.find(({validator:i})=>i(o)))==null?void 0:a.classGroupId},F0=/^\[(.+)\]$/,PI=e=>{if(F0.test(e)){const t=F0.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},TI=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return II(Object.entries(e.classGroups),n).forEach(([o,a])=>{em(a,r,o,t)}),r},em=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:U0(t,s);o.classGroupId=n;return}if(typeof s=="function"){if(RI(s)){em(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,a])=>{em(a,U0(t,o),n,r)})})},U0=(e,t)=>{let n=e;return t.split(ev).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},RI=e=>e.isThemeGetter,II=(e,t)=>t?e.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,i])=>[t+a,i])):o);return[n,s]}):e,OI=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(o,a)=>{n.set(o,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set(o,a){n.has(o)?n.set(o,a):s(o,a)}}},P_="!",AI=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],o=t.length,a=i=>{const c=[];let u=0,d=0,h;for(let y=0;y<i.length;y++){let x=i[y];if(u===0){if(x===s&&(r||i.slice(y,y+o)===t)){c.push(i.slice(d,y)),d=y+o;continue}if(x==="/"){h=y;continue}}x==="["?u++:x==="]"&&u--}const p=c.length===0?i:i.substring(d),m=p.startsWith(P_),w=m?p.substring(1):p,v=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:w,maybePostfixModifierPosition:v}};return n?i=>n({className:i,parseClassName:a}):a},MI=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},DI=e=>({cache:OI(e.cacheSize),parseClassName:AI(e),...jI(e)}),LI=/\s+/,$I=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,o=[],a=e.trim().split(LI);let i="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=n(u);let w=!!m,v=r(w?p.substring(0,m):p);if(!v){if(!w){i=u+(i.length>0?" "+i:i);continue}if(v=r(p),!v){i=u+(i.length>0?" "+i:i);continue}w=!1}const y=MI(d).join(":"),x=h?y+P_:y,g=x+v;if(o.includes(g))continue;o.push(g);const b=s(v,w);for(let S=0;S<b.length;++S){const _=b[S];o.push(x+_)}i=u+(i.length>0?" "+i:i)}return i};function FI(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=T_(t))&&(r&&(r+=" "),r+=n);return r}const T_=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=T_(e[r]))&&(n&&(n+=" "),n+=t);return n};function UI(e,...t){let n,r,s,o=a;function a(c){const u=t.reduce((d,h)=>h(d),e());return n=DI(u),r=n.cache.get,s=n.cache.set,o=i,i(c)}function i(c){const u=r(c);if(u)return u;const d=$I(c,n);return s(c,d),d}return function(){return o(FI.apply(null,arguments))}}const qe=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},R_=/^\[(?:([a-z-]+):)?(.+)\]$/i,BI=/^\d+\/\d+$/,WI=new Set(["px","full","screen"]),zI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,HI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,VI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,YI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,KI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Br=e=>Wa(e)||WI.has(e)||BI.test(e),ms=e=>Si(e,"length",tO),Wa=e=>!!e&&!Number.isNaN(Number(e)),yh=e=>Si(e,"number",Wa),zi=e=>!!e&&Number.isInteger(Number(e)),GI=e=>e.endsWith("%")&&Wa(e.slice(0,-1)),Ne=e=>R_.test(e),gs=e=>zI.test(e),qI=new Set(["length","size","percentage"]),QI=e=>Si(e,qI,I_),JI=e=>Si(e,"position",I_),XI=new Set(["image","url"]),ZI=e=>Si(e,XI,rO),eO=e=>Si(e,"",nO),Hi=()=>!0,Si=(e,t,n)=>{const r=R_.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},tO=e=>HI.test(e)&&!VI.test(e),I_=()=>!1,nO=e=>YI.test(e),rO=e=>KI.test(e),sO=()=>{const e=qe("colors"),t=qe("spacing"),n=qe("blur"),r=qe("brightness"),s=qe("borderColor"),o=qe("borderRadius"),a=qe("borderSpacing"),i=qe("borderWidth"),c=qe("contrast"),u=qe("grayscale"),d=qe("hueRotate"),h=qe("invert"),p=qe("gap"),m=qe("gradientColorStops"),w=qe("gradientColorStopPositions"),v=qe("inset"),y=qe("margin"),x=qe("opacity"),g=qe("padding"),b=qe("saturate"),S=qe("scale"),_=qe("sepia"),C=qe("skew"),N=qe("space"),T=qe("translate"),L=()=>["auto","contain","none"],$=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",Ne,t],F=()=>[Ne,t],O=()=>["",Br,ms],j=()=>["auto",Wa,Ne],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],A=()=>["solid","dashed","dotted","double","none"],M=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],E=()=>["start","end","center","between","around","evenly","stretch"],R=()=>["","0",Ne],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[Wa,Ne];return{cacheSize:500,separator:":",theme:{colors:[Hi],spacing:[Br,ms],blur:["none","",gs,Ne],brightness:J(),borderColor:[e],borderRadius:["none","","full",gs,Ne],borderSpacing:F(),borderWidth:O(),contrast:J(),grayscale:R(),hueRotate:J(),invert:R(),gap:F(),gradientColorStops:[e],gradientColorStopPositions:[GI,ms],inset:V(),margin:V(),opacity:J(),padding:F(),saturate:J(),scale:J(),sepia:R(),skew:J(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Ne]}],container:["container"],columns:[{columns:[gs]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),Ne]}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",zi,Ne]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ne]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",zi,Ne]}],"grid-cols":[{"grid-cols":[Hi]}],"col-start-end":[{col:["auto",{span:["full",zi,Ne]},Ne]}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":[Hi]}],"row-start-end":[{row:["auto",{span:[zi,Ne]},Ne]}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ne]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ne]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...E()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...E(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...E(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ne,t]}],"min-w":[{"min-w":[Ne,t,"min","max","fit"]}],"max-w":[{"max-w":[Ne,t,"none","full","min","max","fit","prose",{screen:[gs]},gs]}],h:[{h:[Ne,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ne,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ne,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ne,t,"auto","min","max","fit"]}],"font-size":[{text:["base",gs,ms]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",yh]}],"font-family":[{font:[Hi]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ne]}],"line-clamp":[{"line-clamp":["none",Wa,yh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Br,Ne]}],"list-image":[{"list-image":["none",Ne]}],"list-style-type":[{list:["none","disc","decimal",Ne]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...A(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Br,ms]}],"underline-offset":[{"underline-offset":["auto",Br,Ne]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ne]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ne]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),JI]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",QI]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ZI]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...A(),"hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:A()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...A()]}],"outline-offset":[{"outline-offset":[Br,Ne]}],"outline-w":[{outline:[Br,ms]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Br,ms]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",gs,eO]}],"shadow-color":[{shadow:[Hi]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...M(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",gs,Ne]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ne]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",Ne]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ne]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[zi,Ne]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ne]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ne]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ne]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Br,ms,yh]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},oO=UI(sO);function ge(...e){return oO(__(e))}const aO=yI,O_=f.forwardRef(({className:e,...t},n)=>l.jsx(g_,{ref:n,className:ge("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));O_.displayName=g_.displayName;const iO=sf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),A_=f.forwardRef(({className:e,variant:t,...n},r)=>l.jsx(v_,{ref:r,className:ge(iO({variant:t}),e),...n}));A_.displayName=v_.displayName;const lO=f.forwardRef(({className:e,...t},n)=>l.jsx(x_,{ref:n,className:ge("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));lO.displayName=x_.displayName;const M_=f.forwardRef(({className:e,...t},n)=>l.jsx(b_,{ref:n,className:ge("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:l.jsx(N_,{className:"h-4 w-4"})}));M_.displayName=b_.displayName;const D_=f.forwardRef(({className:e,...t},n)=>l.jsx(y_,{ref:n,className:ge("text-sm font-semibold",e),...t}));D_.displayName=y_.displayName;const L_=f.forwardRef(({className:e,...t},n)=>l.jsx(w_,{ref:n,className:ge("text-sm opacity-90",e),...t}));L_.displayName=w_.displayName;function cO(){const{toasts:e}=Ar();return l.jsxs(aO,{children:[e.map(function({id:t,title:n,description:r,action:s,...o}){return l.jsxs(A_,{...o,children:[l.jsxs("div",{className:"grid gap-1",children:[n&&l.jsx(D_,{children:n}),r&&l.jsx(L_,{children:r})]}),s,l.jsx(M_,{})]},t)}),l.jsx(O_,{})]})}var B0=["light","dark"],uO="(prefers-color-scheme: dark)",dO=f.createContext(void 0),fO={setTheme:e=>{},themes:[]},hO=()=>{var e;return(e=f.useContext(dO))!=null?e:fO};f.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:o,value:a,attrs:i,nonce:c})=>{let u=o==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${i.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?B0.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(w,v=!1,y=!0)=>{let x=a?a[w]:w,g=v?w+"|| ''":`'${x}'`,b="";return s&&y&&!v&&B0.includes(w)&&(b+=`d.style.colorScheme = '${w}';`),n==="class"?v||x?b+=`c.add(${g})`:b+="null":x&&(b+=`d[s](n,${g})`),b},m=e?`!function(){${d}${p(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${uO}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${p(a?"x[e]":"e",!0)}}${u?"":"else{"+p(o,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${p(a?"x[e]":"e",!0)}}else{${p(o,!1,!1)};}${h}}catch(t){}}();`;return f.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var pO=e=>{switch(e){case"success":return vO;case"info":return wO;case"warning":return yO;case"error":return xO;default:return null}},mO=Array(12).fill(0),gO=({visible:e,className:t})=>K.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},K.createElement("div",{className:"sonner-spinner"},mO.map((n,r)=>K.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),vO=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),yO=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),wO=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),xO=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),bO=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},K.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),K.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),SO=()=>{let[e,t]=K.useState(document.hidden);return K.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},tm=1,_O=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:tm++,o=this.toasts.find(i=>i.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(i=>i.id===s?(this.publish({...i,...e,id:s,title:n}),{...i,...e,id:s,dismissible:a,title:n}):i):this.addToast({title:n,...r,dismissible:a,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),s=n!==void 0,o,a=r.then(async c=>{if(o=["resolve",c],K.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(CO(c)&&!c.ok){s=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){s=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(o=["reject",c],t.error!==void 0){s=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),i=()=>new Promise((c,u)=>a.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:i}:Object.assign(n,{unwrap:i})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||tm++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},nn=new _O,EO=(e,t)=>{let n=(t==null?void 0:t.id)||tm++;return nn.addToast({title:e,...t,id:n}),n},CO=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",kO=EO,NO=()=>nn.toasts,jO=()=>nn.getActiveToasts();Object.assign(kO,{success:nn.success,info:nn.info,warning:nn.warning,error:nn.error,custom:nn.custom,message:nn.message,promise:nn.promise,dismiss:nn.dismiss,loading:nn.loading},{getHistory:NO,getToasts:jO});function PO(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}PO(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Jc(e){return e.label!==void 0}var TO=3,RO="32px",IO="16px",W0=4e3,OO=356,AO=14,MO=20,DO=200;function Vn(...e){return e.filter(Boolean).join(" ")}function LO(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var $O=e=>{var t,n,r,s,o,a,i,c,u,d,h;let{invert:p,toast:m,unstyled:w,interacting:v,setHeights:y,visibleToasts:x,heights:g,index:b,toasts:S,expanded:_,removeToast:C,defaultRichColors:N,closeButton:T,style:L,cancelButtonStyle:$,actionButtonStyle:V,className:F="",descriptionClassName:O="",duration:j,position:z,gap:A,loadingIcon:M,expandByDefault:E,classNames:R,icons:W,closeButtonAriaLabel:J="Close toast",pauseWhenPageIsHidden:Y}=e,[ue,B]=K.useState(null),[D,U]=K.useState(null),[H,ie]=K.useState(!1),[ye,he]=K.useState(!1),[be,le]=K.useState(!1),[I,G]=K.useState(!1),[ne,we]=K.useState(!1),[Ze,Dt]=K.useState(0),[pn,Lr]=K.useState(0),mn=K.useRef(m.duration||j||W0),Nt=K.useRef(null),Qt=K.useRef(null),us=b===0,ur=b+1<=x,Ve=m.type,Jt=m.dismissible!==!1,$r=m.className||"",Fr=m.descriptionClassName||"",wt=K.useMemo(()=>g.findIndex(re=>re.toastId===m.id)||0,[g,m.id]),Oi=K.useMemo(()=>{var re;return(re=m.closeButton)!=null?re:T},[m.closeButton,T]),ds=K.useMemo(()=>m.duration||j||W0,[m.duration,j]),Nn=K.useRef(0),dr=K.useRef(0),ua=K.useRef(0),zn=K.useRef(null),[fs,po]=z.split("-"),mo=K.useMemo(()=>g.reduce((re,se,_e)=>_e>=wt?re:re+se.height,0),[g,wt]),go=SO(),pe=m.invert||p,Ie=Ve==="loading";dr.current=K.useMemo(()=>wt*A+mo,[wt,mo]),K.useEffect(()=>{mn.current=ds},[ds]),K.useEffect(()=>{ie(!0)},[]),K.useEffect(()=>{let re=Qt.current;if(re){let se=re.getBoundingClientRect().height;return Lr(se),y(_e=>[{toastId:m.id,height:se,position:m.position},..._e]),()=>y(_e=>_e.filter(et=>et.toastId!==m.id))}},[y,m.id]),K.useLayoutEffect(()=>{if(!H)return;let re=Qt.current,se=re.style.height;re.style.height="auto";let _e=re.getBoundingClientRect().height;re.style.height=se,Lr(_e),y(et=>et.find(pt=>pt.toastId===m.id)?et.map(pt=>pt.toastId===m.id?{...pt,height:_e}:pt):[{toastId:m.id,height:_e,position:m.position},...et])},[H,m.title,m.description,y,m.id]);let Oe=K.useCallback(()=>{he(!0),Dt(dr.current),y(re=>re.filter(se=>se.toastId!==m.id)),setTimeout(()=>{C(m)},DO)},[m,C,y,dr]);K.useEffect(()=>{if(m.promise&&Ve==="loading"||m.duration===1/0||m.type==="loading")return;let re;return _||v||Y&&go?(()=>{if(ua.current<Nn.current){let se=new Date().getTime()-Nn.current;mn.current=mn.current-se}ua.current=new Date().getTime()})():mn.current!==1/0&&(Nn.current=new Date().getTime(),re=setTimeout(()=>{var se;(se=m.onAutoClose)==null||se.call(m,m),Oe()},mn.current)),()=>clearTimeout(re)},[_,v,m,Ve,Y,go,Oe]),K.useEffect(()=>{m.delete&&Oe()},[Oe,m.delete]);function te(){var re,se,_e;return W!=null&&W.loading?K.createElement("div",{className:Vn(R==null?void 0:R.loader,(re=m==null?void 0:m.classNames)==null?void 0:re.loader,"sonner-loader"),"data-visible":Ve==="loading"},W.loading):M?K.createElement("div",{className:Vn(R==null?void 0:R.loader,(se=m==null?void 0:m.classNames)==null?void 0:se.loader,"sonner-loader"),"data-visible":Ve==="loading"},M):K.createElement(gO,{className:Vn(R==null?void 0:R.loader,(_e=m==null?void 0:m.classNames)==null?void 0:_e.loader),visible:Ve==="loading"})}return K.createElement("li",{tabIndex:0,ref:Qt,className:Vn(F,$r,R==null?void 0:R.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,R==null?void 0:R.default,R==null?void 0:R[Ve],(n=m==null?void 0:m.classNames)==null?void 0:n[Ve]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:N,"data-styled":!(m.jsx||m.unstyled||w),"data-mounted":H,"data-promise":!!m.promise,"data-swiped":ne,"data-removed":ye,"data-visible":ur,"data-y-position":fs,"data-x-position":po,"data-index":b,"data-front":us,"data-swiping":be,"data-dismissible":Jt,"data-type":Ve,"data-invert":pe,"data-swipe-out":I,"data-swipe-direction":D,"data-expanded":!!(_||E&&H),style:{"--index":b,"--toasts-before":b,"--z-index":S.length-b,"--offset":`${ye?Ze:dr.current}px`,"--initial-height":E?"auto":`${pn}px`,...L,...m.style},onDragEnd:()=>{le(!1),B(null),zn.current=null},onPointerDown:re=>{Ie||!Jt||(Nt.current=new Date,Dt(dr.current),re.target.setPointerCapture(re.pointerId),re.target.tagName!=="BUTTON"&&(le(!0),zn.current={x:re.clientX,y:re.clientY}))},onPointerUp:()=>{var re,se,_e,et;if(I||!Jt)return;zn.current=null;let pt=Number(((re=Qt.current)==null?void 0:re.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),jt=Number(((se=Qt.current)==null?void 0:se.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),fr=new Date().getTime()-((_e=Nt.current)==null?void 0:_e.getTime()),Lt=ue==="x"?pt:jt,_t=Math.abs(Lt)/fr;if(Math.abs(Lt)>=MO||_t>.11){Dt(dr.current),(et=m.onDismiss)==null||et.call(m,m),U(ue==="x"?pt>0?"right":"left":jt>0?"down":"up"),Oe(),G(!0),we(!1);return}le(!1),B(null)},onPointerMove:re=>{var se,_e,et,pt;if(!zn.current||!Jt||((se=window.getSelection())==null?void 0:se.toString().length)>0)return;let jt=re.clientY-zn.current.y,fr=re.clientX-zn.current.x,Lt=(_e=e.swipeDirections)!=null?_e:LO(z);!ue&&(Math.abs(fr)>1||Math.abs(jt)>1)&&B(Math.abs(fr)>Math.abs(jt)?"x":"y");let _t={x:0,y:0};ue==="y"?(Lt.includes("top")||Lt.includes("bottom"))&&(Lt.includes("top")&&jt<0||Lt.includes("bottom")&&jt>0)&&(_t.y=jt):ue==="x"&&(Lt.includes("left")||Lt.includes("right"))&&(Lt.includes("left")&&fr<0||Lt.includes("right")&&fr>0)&&(_t.x=fr),(Math.abs(_t.x)>0||Math.abs(_t.y)>0)&&we(!0),(et=Qt.current)==null||et.style.setProperty("--swipe-amount-x",`${_t.x}px`),(pt=Qt.current)==null||pt.style.setProperty("--swipe-amount-y",`${_t.y}px`)}},Oi&&!m.jsx?K.createElement("button",{"aria-label":J,"data-disabled":Ie,"data-close-button":!0,onClick:Ie||!Jt?()=>{}:()=>{var re;Oe(),(re=m.onDismiss)==null||re.call(m,m)},className:Vn(R==null?void 0:R.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(o=W==null?void 0:W.close)!=null?o:bO):null,m.jsx||f.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:K.createElement(K.Fragment,null,Ve||m.icon||m.promise?K.createElement("div",{"data-icon":"",className:Vn(R==null?void 0:R.icon,(a=m==null?void 0:m.classNames)==null?void 0:a.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||te():null,m.type!=="loading"?m.icon||(W==null?void 0:W[Ve])||pO(Ve):null):null,K.createElement("div",{"data-content":"",className:Vn(R==null?void 0:R.content,(i=m==null?void 0:m.classNames)==null?void 0:i.content)},K.createElement("div",{"data-title":"",className:Vn(R==null?void 0:R.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?K.createElement("div",{"data-description":"",className:Vn(O,Fr,R==null?void 0:R.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),f.isValidElement(m.cancel)?m.cancel:m.cancel&&Jc(m.cancel)?K.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||$,onClick:re=>{var se,_e;Jc(m.cancel)&&Jt&&((_e=(se=m.cancel).onClick)==null||_e.call(se,re),Oe())},className:Vn(R==null?void 0:R.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,f.isValidElement(m.action)?m.action:m.action&&Jc(m.action)?K.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||V,onClick:re=>{var se,_e;Jc(m.action)&&((_e=(se=m.action).onClick)==null||_e.call(se,re),!re.defaultPrevented&&Oe())},className:Vn(R==null?void 0:R.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function z0(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function FO(e,t){let n={};return[e,t].forEach((r,s)=>{let o=s===1,a=o?"--mobile-offset":"--offset",i=o?IO:RO;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${a}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${a}-${u}`]=i:n[`${a}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(i)}),n}var UO=f.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:o,closeButton:a,className:i,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:p,style:m,visibleToasts:w=TO,toastOptions:v,dir:y=z0(),gap:x=AO,loadingIcon:g,icons:b,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:_}=e,[C,N]=K.useState([]),T=K.useMemo(()=>Array.from(new Set([r].concat(C.filter(Y=>Y.position).map(Y=>Y.position)))),[C,r]),[L,$]=K.useState([]),[V,F]=K.useState(!1),[O,j]=K.useState(!1),[z,A]=K.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),M=K.useRef(null),E=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=K.useRef(null),W=K.useRef(!1),J=K.useCallback(Y=>{N(ue=>{var B;return(B=ue.find(D=>D.id===Y.id))!=null&&B.delete||nn.dismiss(Y.id),ue.filter(({id:D})=>D!==Y.id)})},[]);return K.useEffect(()=>nn.subscribe(Y=>{if(Y.dismiss){N(ue=>ue.map(B=>B.id===Y.id?{...B,delete:!0}:B));return}setTimeout(()=>{QS.flushSync(()=>{N(ue=>{let B=ue.findIndex(D=>D.id===Y.id);return B!==-1?[...ue.slice(0,B),{...ue[B],...Y},...ue.slice(B+1)]:[Y,...ue]})})})}),[]),K.useEffect(()=>{if(d!=="system"){A(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?A("dark"):A("light")),typeof window>"u")return;let Y=window.matchMedia("(prefers-color-scheme: dark)");try{Y.addEventListener("change",({matches:ue})=>{A(ue?"dark":"light")})}catch{Y.addListener(({matches:B})=>{try{A(B?"dark":"light")}catch(D){console.error(D)}})}},[d]),K.useEffect(()=>{C.length<=1&&F(!1)},[C]),K.useEffect(()=>{let Y=ue=>{var B,D;s.every(U=>ue[U]||ue.code===U)&&(F(!0),(B=M.current)==null||B.focus()),ue.code==="Escape"&&(document.activeElement===M.current||(D=M.current)!=null&&D.contains(document.activeElement))&&F(!1)};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[s]),K.useEffect(()=>{if(M.current)return()=>{R.current&&(R.current.focus({preventScroll:!0}),R.current=null,W.current=!1)}},[M.current]),K.createElement("section",{ref:t,"aria-label":`${S} ${E}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((Y,ue)=>{var B;let[D,U]=Y.split("-");return C.length?K.createElement("ol",{key:Y,dir:y==="auto"?z0():y,tabIndex:-1,ref:M,className:i,"data-sonner-toaster":!0,"data-theme":z,"data-y-position":D,"data-lifted":V&&C.length>1&&!o,"data-x-position":U,style:{"--front-toast-height":`${((B=L[0])==null?void 0:B.height)||0}px`,"--width":`${OO}px`,"--gap":`${x}px`,...m,...FO(c,u)},onBlur:H=>{W.current&&!H.currentTarget.contains(H.relatedTarget)&&(W.current=!1,R.current&&(R.current.focus({preventScroll:!0}),R.current=null))},onFocus:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||W.current||(W.current=!0,R.current=H.relatedTarget)},onMouseEnter:()=>F(!0),onMouseMove:()=>F(!0),onMouseLeave:()=>{O||F(!1)},onDragEnd:()=>F(!1),onPointerDown:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||j(!0)},onPointerUp:()=>j(!1)},C.filter(H=>!H.position&&ue===0||H.position===Y).map((H,ie)=>{var ye,he;return K.createElement($O,{key:H.id,icons:b,index:ie,toast:H,defaultRichColors:h,duration:(ye=v==null?void 0:v.duration)!=null?ye:p,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:w,closeButton:(he=v==null?void 0:v.closeButton)!=null?he:a,interacting:O,position:Y,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:J,toasts:C.filter(be=>be.position==H.position),heights:L.filter(be=>be.position==H.position),setHeights:$,expandByDefault:o,gap:x,loadingIcon:g,expanded:V,pauseWhenPageIsHidden:_,swipeDirections:e.swipeDirections})})):null}))});const BO=({...e})=>{const{theme:t="system"}=hO();return l.jsx(UO,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var WO=tg[" useId ".trim().toString()]||(()=>{}),zO=0;function Tr(e){const[t,n]=f.useState(WO());return ct(()=>{n(r=>r??String(zO++))},[e]),t?`radix-${t}`:""}const HO=["top","right","bottom","left"],to=Math.min,wn=Math.max,od=Math.round,Xc=Math.floor,Rr=e=>({x:e,y:e}),VO={left:"right",right:"left",bottom:"top",top:"bottom"},YO={start:"end",end:"start"};function nm(e,t,n){return wn(e,to(t,n))}function is(e,t){return typeof e=="function"?e(t):e}function ls(e){return e.split("-")[0]}function _i(e){return e.split("-")[1]}function tv(e){return e==="x"?"y":"x"}function nv(e){return e==="y"?"height":"width"}const KO=new Set(["top","bottom"]);function Nr(e){return KO.has(ls(e))?"y":"x"}function rv(e){return tv(Nr(e))}function GO(e,t,n){n===void 0&&(n=!1);const r=_i(e),s=rv(e),o=nv(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=ad(a)),[a,ad(a)]}function qO(e){const t=ad(e);return[rm(e),t,rm(t)]}function rm(e){return e.replace(/start|end/g,t=>YO[t])}const H0=["left","right"],V0=["right","left"],QO=["top","bottom"],JO=["bottom","top"];function XO(e,t,n){switch(e){case"top":case"bottom":return n?t?V0:H0:t?H0:V0;case"left":case"right":return t?QO:JO;default:return[]}}function ZO(e,t,n,r){const s=_i(e);let o=XO(ls(e),n==="start",r);return s&&(o=o.map(a=>a+"-"+s),t&&(o=o.concat(o.map(rm)))),o}function ad(e){return e.replace(/left|right|bottom|top/g,t=>VO[t])}function eA(e){return{top:0,right:0,bottom:0,left:0,...e}}function $_(e){return typeof e!="number"?eA(e):{top:e,right:e,bottom:e,left:e}}function id(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function Y0(e,t,n){let{reference:r,floating:s}=e;const o=Nr(t),a=rv(t),i=nv(a),c=ls(t),u=o==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[i]/2-s[i]/2;let m;switch(c){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(_i(t)){case"start":m[a]-=p*(n&&u?-1:1);break;case"end":m[a]+=p*(n&&u?-1:1);break}return m}const tA=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a}=n,i=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:h}=Y0(u,r,c),p=r,m={},w=0;for(let v=0;v<i.length;v++){const{name:y,fn:x}=i[v],{x:g,y:b,data:S,reset:_}=await x({x:d,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:u,platform:a,elements:{reference:e,floating:t}});d=g??d,h=b??h,m={...m,[y]:{...m[y],...S}},_&&w<=50&&(w++,typeof _=="object"&&(_.placement&&(p=_.placement),_.rects&&(u=_.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):_.rects),{x:d,y:h}=Y0(u,p,c)),v=-1)}return{x:d,y:h,placement:p,strategy:s,middlewareData:m}};async function Ul(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:a,elements:i,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=is(t,e),w=$_(m),y=i[p?h==="floating"?"reference":"floating":h],x=id(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(y)))==null||n?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(i.floating)),boundary:u,rootBoundary:d,strategy:c})),g=h==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(i.floating)),S=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},_=id(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:g,offsetParent:b,strategy:c}):g);return{top:(x.top-_.top+w.top)/S.y,bottom:(_.bottom-x.bottom+w.bottom)/S.y,left:(x.left-_.left+w.left)/S.x,right:(_.right-x.right+w.right)/S.x}}const nA=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:a,elements:i,middlewareData:c}=t,{element:u,padding:d=0}=is(e,t)||{};if(u==null)return{};const h=$_(d),p={x:n,y:r},m=rv(s),w=nv(m),v=await a.getDimensions(u),y=m==="y",x=y?"top":"left",g=y?"bottom":"right",b=y?"clientHeight":"clientWidth",S=o.reference[w]+o.reference[m]-p[m]-o.floating[w],_=p[m]-o.reference[m],C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let N=C?C[b]:0;(!N||!await(a.isElement==null?void 0:a.isElement(C)))&&(N=i.floating[b]||o.floating[w]);const T=S/2-_/2,L=N/2-v[w]/2-1,$=to(h[x],L),V=to(h[g],L),F=$,O=N-v[w]-V,j=N/2-v[w]/2+T,z=nm(F,j,O),A=!c.arrow&&_i(s)!=null&&j!==z&&o.reference[w]/2-(j<F?$:V)-v[w]/2<0,M=A?j<F?j-F:j-O:0;return{[m]:p[m]+M,data:{[m]:z,centerOffset:j-z-M,...A&&{alignmentOffset:M}},reset:A}}}),rA=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:a,initialPlacement:i,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:v=!0,...y}=is(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const x=ls(s),g=Nr(i),b=ls(i)===i,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),_=p||(b||!v?[ad(i)]:qO(i)),C=w!=="none";!p&&C&&_.push(...ZO(i,v,w,S));const N=[i,..._],T=await Ul(t,y),L=[];let $=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&L.push(T[x]),h){const j=GO(s,a,S);L.push(T[j[0]],T[j[1]])}if($=[...$,{placement:s,overflows:L}],!L.every(j=>j<=0)){var V,F;const j=(((V=o.flip)==null?void 0:V.index)||0)+1,z=N[j];if(z&&(!(h==="alignment"?g!==Nr(z):!1)||$.every(E=>E.overflows[0]>0&&Nr(E.placement)===g)))return{data:{index:j,overflows:$},reset:{placement:z}};let A=(F=$.filter(M=>M.overflows[0]<=0).sort((M,E)=>M.overflows[1]-E.overflows[1])[0])==null?void 0:F.placement;if(!A)switch(m){case"bestFit":{var O;const M=(O=$.filter(E=>{if(C){const R=Nr(E.placement);return R===g||R==="y"}return!0}).map(E=>[E.placement,E.overflows.filter(R=>R>0).reduce((R,W)=>R+W,0)]).sort((E,R)=>E[1]-R[1])[0])==null?void 0:O[0];M&&(A=M);break}case"initialPlacement":A=i;break}if(s!==A)return{reset:{placement:A}}}return{}}}};function K0(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function G0(e){return HO.some(t=>e[t]>=0)}const sA=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=is(e,t);switch(r){case"referenceHidden":{const o=await Ul(t,{...s,elementContext:"reference"}),a=K0(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:G0(a)}}}case"escaped":{const o=await Ul(t,{...s,altBoundary:!0}),a=K0(o,n.floating);return{data:{escapedOffsets:a,escaped:G0(a)}}}default:return{}}}}},F_=new Set(["left","top"]);async function oA(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=ls(n),i=_i(n),c=Nr(n)==="y",u=F_.has(a)?-1:1,d=o&&c?-1:1,h=is(t,e);let{mainAxis:p,crossAxis:m,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return i&&typeof w=="number"&&(m=i==="end"?w*-1:w),c?{x:m*d,y:p*u}:{x:p*u,y:m*d}}const aA=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:a,middlewareData:i}=t,c=await oA(t,e);return a===((n=i.offset)==null?void 0:n.placement)&&(r=i.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:a}}}}},iA=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:i={fn:y=>{let{x,y:g}=y;return{x,y:g}}},...c}=is(e,t),u={x:n,y:r},d=await Ul(t,c),h=Nr(ls(s)),p=tv(h);let m=u[p],w=u[h];if(o){const y=p==="y"?"top":"left",x=p==="y"?"bottom":"right",g=m+d[y],b=m-d[x];m=nm(g,m,b)}if(a){const y=h==="y"?"top":"left",x=h==="y"?"bottom":"right",g=w+d[y],b=w-d[x];w=nm(g,w,b)}const v=i.fn({...t,[p]:m,[h]:w});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[p]:o,[h]:a}}}}}},lA=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:a}=t,{offset:i=0,mainAxis:c=!0,crossAxis:u=!0}=is(e,t),d={x:n,y:r},h=Nr(s),p=tv(h);let m=d[p],w=d[h];const v=is(i,t),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const b=p==="y"?"height":"width",S=o.reference[p]-o.floating[b]+y.mainAxis,_=o.reference[p]+o.reference[b]-y.mainAxis;m<S?m=S:m>_&&(m=_)}if(u){var x,g;const b=p==="y"?"width":"height",S=F_.has(ls(s)),_=o.reference[h]-o.floating[b]+(S&&((x=a.offset)==null?void 0:x[h])||0)+(S?0:y.crossAxis),C=o.reference[h]+o.reference[b]+(S?0:((g=a.offset)==null?void 0:g[h])||0)-(S?y.crossAxis:0);w<_?w=_:w>C&&(w=C)}return{[p]:m,[h]:w}}}},cA=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:a,elements:i}=t,{apply:c=()=>{},...u}=is(e,t),d=await Ul(t,u),h=ls(s),p=_i(s),m=Nr(s)==="y",{width:w,height:v}=o.floating;let y,x;h==="top"||h==="bottom"?(y=h,x=p===(await(a.isRTL==null?void 0:a.isRTL(i.floating))?"start":"end")?"left":"right"):(x=h,y=p==="end"?"top":"bottom");const g=v-d.top-d.bottom,b=w-d.left-d.right,S=to(v-d[y],g),_=to(w-d[x],b),C=!t.middlewareData.shift;let N=S,T=_;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(T=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(N=g),C&&!p){const $=wn(d.left,0),V=wn(d.right,0),F=wn(d.top,0),O=wn(d.bottom,0);m?T=w-2*($!==0||V!==0?$+V:wn(d.left,d.right)):N=v-2*(F!==0||O!==0?F+O:wn(d.top,d.bottom))}await c({...t,availableWidth:T,availableHeight:N});const L=await a.getDimensions(i.floating);return w!==L.width||v!==L.height?{reset:{rects:!0}}:{}}}};function af(){return typeof window<"u"}function Ei(e){return U_(e)?(e.nodeName||"").toLowerCase():"#document"}function Sn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Mr(e){var t;return(t=(U_(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function U_(e){return af()?e instanceof Node||e instanceof Sn(e).Node:!1}function sr(e){return af()?e instanceof Element||e instanceof Sn(e).Element:!1}function Ir(e){return af()?e instanceof HTMLElement||e instanceof Sn(e).HTMLElement:!1}function q0(e){return!af()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Sn(e).ShadowRoot}const uA=new Set(["inline","contents"]);function cc(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=or(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!uA.has(s)}const dA=new Set(["table","td","th"]);function fA(e){return dA.has(Ei(e))}const hA=[":popover-open",":modal"];function lf(e){return hA.some(t=>{try{return e.matches(t)}catch{return!1}})}const pA=["transform","translate","scale","rotate","perspective"],mA=["transform","translate","scale","rotate","perspective","filter"],gA=["paint","layout","strict","content"];function sv(e){const t=ov(),n=sr(e)?or(e):e;return pA.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||mA.some(r=>(n.willChange||"").includes(r))||gA.some(r=>(n.contain||"").includes(r))}function vA(e){let t=no(e);for(;Ir(t)&&!di(t);){if(sv(t))return t;if(lf(t))return null;t=no(t)}return null}function ov(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const yA=new Set(["html","body","#document"]);function di(e){return yA.has(Ei(e))}function or(e){return Sn(e).getComputedStyle(e)}function cf(e){return sr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function no(e){if(Ei(e)==="html")return e;const t=e.assignedSlot||e.parentNode||q0(e)&&e.host||Mr(e);return q0(t)?t.host:t}function B_(e){const t=no(e);return di(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ir(t)&&cc(t)?t:B_(t)}function Bl(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=B_(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),a=Sn(s);if(o){const i=sm(a);return t.concat(a,a.visualViewport||[],cc(s)?s:[],i&&n?Bl(i):[])}return t.concat(s,Bl(s,[],n))}function sm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function W_(e){const t=or(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Ir(e),o=s?e.offsetWidth:n,a=s?e.offsetHeight:r,i=od(n)!==o||od(r)!==a;return i&&(n=o,r=a),{width:n,height:r,$:i}}function av(e){return sr(e)?e:e.contextElement}function za(e){const t=av(e);if(!Ir(t))return Rr(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=W_(t);let a=(o?od(n.width):n.width)/r,i=(o?od(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!i||!Number.isFinite(i))&&(i=1),{x:a,y:i}}const wA=Rr(0);function z_(e){const t=Sn(e);return!ov()||!t.visualViewport?wA:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function xA(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Sn(e)?!1:t}function Ko(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=av(e);let a=Rr(1);t&&(r?sr(r)&&(a=za(r)):a=za(e));const i=xA(o,n,r)?z_(o):Rr(0);let c=(s.left+i.x)/a.x,u=(s.top+i.y)/a.y,d=s.width/a.x,h=s.height/a.y;if(o){const p=Sn(o),m=r&&sr(r)?Sn(r):r;let w=p,v=sm(w);for(;v&&r&&m!==w;){const y=za(v),x=v.getBoundingClientRect(),g=or(v),b=x.left+(v.clientLeft+parseFloat(g.paddingLeft))*y.x,S=x.top+(v.clientTop+parseFloat(g.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,h*=y.y,c+=b,u+=S,w=Sn(v),v=sm(w)}}return id({width:d,height:h,x:c,y:u})}function iv(e,t){const n=cf(e).scrollLeft;return t?t.left+n:Ko(Mr(e)).left+n}function H_(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:iv(e,r)),o=r.top+t.scrollTop;return{x:s,y:o}}function bA(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",a=Mr(r),i=t?lf(t.floating):!1;if(r===a||i&&o)return n;let c={scrollLeft:0,scrollTop:0},u=Rr(1);const d=Rr(0),h=Ir(r);if((h||!h&&!o)&&((Ei(r)!=="body"||cc(a))&&(c=cf(r)),Ir(r))){const m=Ko(r);u=za(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const p=a&&!h&&!o?H_(a,c,!0):Rr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-c.scrollTop*u.y+d.y+p.y}}function SA(e){return Array.from(e.getClientRects())}function _A(e){const t=Mr(e),n=cf(e),r=e.ownerDocument.body,s=wn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=wn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+iv(e);const i=-n.scrollTop;return or(r).direction==="rtl"&&(a+=wn(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:a,y:i}}function EA(e,t){const n=Sn(e),r=Mr(e),s=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,i=0,c=0;if(s){o=s.width,a=s.height;const u=ov();(!u||u&&t==="fixed")&&(i=s.offsetLeft,c=s.offsetTop)}return{width:o,height:a,x:i,y:c}}const CA=new Set(["absolute","fixed"]);function kA(e,t){const n=Ko(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=Ir(e)?za(e):Rr(1),a=e.clientWidth*o.x,i=e.clientHeight*o.y,c=s*o.x,u=r*o.y;return{width:a,height:i,x:c,y:u}}function Q0(e,t,n){let r;if(t==="viewport")r=EA(e,n);else if(t==="document")r=_A(Mr(e));else if(sr(t))r=kA(t,n);else{const s=z_(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return id(r)}function V_(e,t){const n=no(e);return n===t||!sr(n)||di(n)?!1:or(n).position==="fixed"||V_(n,t)}function NA(e,t){const n=t.get(e);if(n)return n;let r=Bl(e,[],!1).filter(i=>sr(i)&&Ei(i)!=="body"),s=null;const o=or(e).position==="fixed";let a=o?no(e):e;for(;sr(a)&&!di(a);){const i=or(a),c=sv(a);!c&&i.position==="fixed"&&(s=null),(o?!c&&!s:!c&&i.position==="static"&&!!s&&CA.has(s.position)||cc(a)&&!c&&V_(e,a))?r=r.filter(d=>d!==a):s=i,a=no(a)}return t.set(e,r),r}function jA(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[...n==="clippingAncestors"?lf(t)?[]:NA(t,this._c):[].concat(n),r],i=a[0],c=a.reduce((u,d)=>{const h=Q0(t,d,s);return u.top=wn(h.top,u.top),u.right=to(h.right,u.right),u.bottom=to(h.bottom,u.bottom),u.left=wn(h.left,u.left),u},Q0(t,i,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function PA(e){const{width:t,height:n}=W_(e);return{width:t,height:n}}function TA(e,t,n){const r=Ir(t),s=Mr(t),o=n==="fixed",a=Ko(e,!0,o,t);let i={scrollLeft:0,scrollTop:0};const c=Rr(0);function u(){c.x=iv(s)}if(r||!r&&!o)if((Ei(t)!=="body"||cc(s))&&(i=cf(t)),r){const m=Ko(t,!0,o,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else s&&u();o&&!r&&s&&u();const d=s&&!r&&!o?H_(s,i):Rr(0),h=a.left+i.scrollLeft-c.x-d.x,p=a.top+i.scrollTop-c.y-d.y;return{x:h,y:p,width:a.width,height:a.height}}function wh(e){return or(e).position==="static"}function J0(e,t){if(!Ir(e)||or(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Mr(e)===n&&(n=n.ownerDocument.body),n}function Y_(e,t){const n=Sn(e);if(lf(e))return n;if(!Ir(e)){let s=no(e);for(;s&&!di(s);){if(sr(s)&&!wh(s))return s;s=no(s)}return n}let r=J0(e,t);for(;r&&fA(r)&&wh(r);)r=J0(r,t);return r&&di(r)&&wh(r)&&!sv(r)?n:r||vA(e)||n}const RA=async function(e){const t=this.getOffsetParent||Y_,n=this.getDimensions,r=await n(e.floating);return{reference:TA(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function IA(e){return or(e).direction==="rtl"}const OA={convertOffsetParentRelativeRectToViewportRelativeRect:bA,getDocumentElement:Mr,getClippingRect:jA,getOffsetParent:Y_,getElementRects:RA,getClientRects:SA,getDimensions:PA,getScale:za,isElement:sr,isRTL:IA};function K_(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function AA(e,t){let n=null,r;const s=Mr(e);function o(){var i;clearTimeout(r),(i=n)==null||i.disconnect(),n=null}function a(i,c){i===void 0&&(i=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:d,top:h,width:p,height:m}=u;if(i||t(),!p||!m)return;const w=Xc(h),v=Xc(s.clientWidth-(d+p)),y=Xc(s.clientHeight-(h+m)),x=Xc(d),b={rootMargin:-w+"px "+-v+"px "+-y+"px "+-x+"px",threshold:wn(0,to(1,c))||1};let S=!0;function _(C){const N=C[0].intersectionRatio;if(N!==c){if(!S)return a();N?a(!1,N):r=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!K_(u,e.getBoundingClientRect())&&a(),S=!1}try{n=new IntersectionObserver(_,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(_,b)}n.observe(e)}return a(!0),o}function MA(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:i=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=av(e),d=s||o?[...u?Bl(u):[],...Bl(t)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),o&&x.addEventListener("resize",n)});const h=u&&i?AA(u,n):null;let p=-1,m=null;a&&(m=new ResizeObserver(x=>{let[g]=x;g&&g.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(t)})),n()}),u&&!c&&m.observe(u),m.observe(t));let w,v=c?Ko(e):null;c&&y();function y(){const x=Ko(e);v&&!K_(v,x)&&n(),v=x,w=requestAnimationFrame(y)}return n(),()=>{var x;d.forEach(g=>{s&&g.removeEventListener("scroll",n),o&&g.removeEventListener("resize",n)}),h==null||h(),(x=m)==null||x.disconnect(),m=null,c&&cancelAnimationFrame(w)}}const DA=aA,LA=iA,$A=rA,FA=cA,UA=sA,X0=nA,BA=lA,WA=(e,t,n)=>{const r=new Map,s={platform:OA,...n},o={...s.platform,_c:r};return tA(e,t,{...s,platform:o})};var zA=typeof document<"u",HA=function(){},Cu=zA?f.useLayoutEffect:HA;function ld(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!ld(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!ld(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function G_(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Z0(e,t){const n=G_(e);return Math.round(t*n)/n}function xh(e){const t=f.useRef(e);return Cu(()=>{t.current=e}),t}function VA(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:a}={},transform:i=!0,whileElementsMounted:c,open:u}=e,[d,h]=f.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=f.useState(r);ld(p,r)||m(r);const[w,v]=f.useState(null),[y,x]=f.useState(null),g=f.useCallback(E=>{E!==C.current&&(C.current=E,v(E))},[]),b=f.useCallback(E=>{E!==N.current&&(N.current=E,x(E))},[]),S=o||w,_=a||y,C=f.useRef(null),N=f.useRef(null),T=f.useRef(d),L=c!=null,$=xh(c),V=xh(s),F=xh(u),O=f.useCallback(()=>{if(!C.current||!N.current)return;const E={placement:t,strategy:n,middleware:p};V.current&&(E.platform=V.current),WA(C.current,N.current,E).then(R=>{const W={...R,isPositioned:F.current!==!1};j.current&&!ld(T.current,W)&&(T.current=W,sa.flushSync(()=>{h(W)}))})},[p,t,n,V,F]);Cu(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(E=>({...E,isPositioned:!1})))},[u]);const j=f.useRef(!1);Cu(()=>(j.current=!0,()=>{j.current=!1}),[]),Cu(()=>{if(S&&(C.current=S),_&&(N.current=_),S&&_){if($.current)return $.current(S,_,O);O()}},[S,_,O,$,L]);const z=f.useMemo(()=>({reference:C,floating:N,setReference:g,setFloating:b}),[g,b]),A=f.useMemo(()=>({reference:S,floating:_}),[S,_]),M=f.useMemo(()=>{const E={position:n,left:0,top:0};if(!A.floating)return E;const R=Z0(A.floating,d.x),W=Z0(A.floating,d.y);return i?{...E,transform:"translate("+R+"px, "+W+"px)",...G_(A.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:R,top:W}},[n,i,A.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:O,refs:z,elements:A,floatingStyles:M}),[d,O,z,A,M])}const YA=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?X0({element:r.current,padding:s}).fn(n):{}:r?X0({element:r,padding:s}).fn(n):{}}}},KA=(e,t)=>({...DA(e),options:[e,t]}),GA=(e,t)=>({...LA(e),options:[e,t]}),qA=(e,t)=>({...BA(e),options:[e,t]}),QA=(e,t)=>({...$A(e),options:[e,t]}),JA=(e,t)=>({...FA(e),options:[e,t]}),XA=(e,t)=>({...UA(e),options:[e,t]}),ZA=(e,t)=>({...YA(e),options:[e,t]});var eM="Arrow",q_=f.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...o}=e;return l.jsx(fe.svg,{...o,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});q_.displayName=eM;var tM=q_;function lv(e){const[t,n]=f.useState(void 0);return ct(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,i;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,i=u.blockSize}else a=e.offsetWidth,i=e.offsetHeight;n({width:a,height:i})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var cv="Popper",[Q_,ao]=Kt(cv),[nM,J_]=Q_(cv),X_=e=>{const{__scopePopper:t,children:n}=e,[r,s]=f.useState(null);return l.jsx(nM,{scope:t,anchor:r,onAnchorChange:s,children:n})};X_.displayName=cv;var Z_="PopperAnchor",e1=f.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,o=J_(Z_,n),a=f.useRef(null),i=Ce(t,a);return f.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:l.jsx(fe.div,{...s,ref:i})});e1.displayName=Z_;var uv="PopperContent",[rM,sM]=Q_(uv),t1=f.forwardRef((e,t)=>{var H,ie,ye,he,be,le;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:i=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:w,...v}=e,y=J_(uv,n),[x,g]=f.useState(null),b=Ce(t,I=>g(I)),[S,_]=f.useState(null),C=lv(S),N=(C==null?void 0:C.width)??0,T=(C==null?void 0:C.height)??0,L=r+(o!=="center"?"-"+o:""),$=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},V=Array.isArray(u)?u:[u],F=V.length>0,O={padding:$,boundary:V.filter(aM),altBoundary:F},{refs:j,floatingStyles:z,placement:A,isPositioned:M,middlewareData:E}=VA({strategy:"fixed",placement:L,whileElementsMounted:(...I)=>MA(...I,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[KA({mainAxis:s+T,alignmentAxis:a}),c&&GA({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?qA():void 0,...O}),c&&QA({...O}),JA({...O,apply:({elements:I,rects:G,availableWidth:ne,availableHeight:we})=>{const{width:Ze,height:Dt}=G.reference,pn=I.floating.style;pn.setProperty("--radix-popper-available-width",`${ne}px`),pn.setProperty("--radix-popper-available-height",`${we}px`),pn.setProperty("--radix-popper-anchor-width",`${Ze}px`),pn.setProperty("--radix-popper-anchor-height",`${Dt}px`)}}),S&&ZA({element:S,padding:i}),iM({arrowWidth:N,arrowHeight:T}),p&&XA({strategy:"referenceHidden",...O})]}),[R,W]=s1(A),J=it(w);ct(()=>{M&&(J==null||J())},[M,J]);const Y=(H=E.arrow)==null?void 0:H.x,ue=(ie=E.arrow)==null?void 0:ie.y,B=((ye=E.arrow)==null?void 0:ye.centerOffset)!==0,[D,U]=f.useState();return ct(()=>{x&&U(window.getComputedStyle(x).zIndex)},[x]),l.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:M?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:D,"--radix-popper-transform-origin":[(he=E.transformOrigin)==null?void 0:he.x,(be=E.transformOrigin)==null?void 0:be.y].join(" "),...((le=E.hide)==null?void 0:le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:l.jsx(rM,{scope:n,placedSide:R,onArrowChange:_,arrowX:Y,arrowY:ue,shouldHideArrow:B,children:l.jsx(fe.div,{"data-side":R,"data-align":W,...v,ref:b,style:{...v.style,animation:M?void 0:"none"}})})})});t1.displayName=uv;var n1="PopperArrow",oM={top:"bottom",right:"left",bottom:"top",left:"right"},r1=f.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,o=sM(n1,r),a=oM[o.placedSide];return l.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:l.jsx(tM,{...s,ref:n,style:{...s.style,display:"block"}})})});r1.displayName=n1;function aM(e){return e!==null}var iM=e=>({name:"transformOrigin",options:e,fn(t){var y,x,g;const{placement:n,rects:r,middlewareData:s}=t,a=((y=s.arrow)==null?void 0:y.centerOffset)!==0,i=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,d]=s1(n),h={start:"0%",center:"50%",end:"100%"}[d],p=(((x=s.arrow)==null?void 0:x.x)??0)+i/2,m=(((g=s.arrow)==null?void 0:g.y)??0)+c/2;let w="",v="";return u==="bottom"?(w=a?h:`${p}px`,v=`${-c}px`):u==="top"?(w=a?h:`${p}px`,v=`${r.floating.height+c}px`):u==="right"?(w=`${-c}px`,v=a?h:`${m}px`):u==="left"&&(w=`${r.floating.width+c}px`,v=a?h:`${m}px`),{data:{x:w,y:v}}}});function s1(e){const[t,n="center"]=e.split("-");return[t,n]}var dv=X_,uc=e1,uf=t1,df=r1,[ff,mz]=Kt("Tooltip",[ao]),fv=ao(),o1="TooltipProvider",lM=700,ew="tooltip.open",[cM,a1]=ff(o1),i1=e=>{const{__scopeTooltip:t,delayDuration:n=lM,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=e,a=f.useRef(!0),i=f.useRef(!1),c=f.useRef(0);return f.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),l.jsx(cM,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:f.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:i,onPointerInTransitChange:f.useCallback(u=>{i.current=u},[]),disableHoverableContent:s,children:o})};i1.displayName=o1;var l1="Tooltip",[gz,hf]=ff(l1),om="TooltipTrigger",uM=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=hf(om,n),o=a1(om,n),a=fv(n),i=f.useRef(null),c=Ce(t,i,s.onTriggerChange),u=f.useRef(!1),d=f.useRef(!1),h=f.useCallback(()=>u.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),l.jsx(uc,{asChild:!0,...a,children:l.jsx(fe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Q(e.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Q(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Q(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Q(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:Q(e.onBlur,s.onClose),onClick:Q(e.onClick,s.onClose)})})});uM.displayName=om;var dM="TooltipPortal",[vz,fM]=ff(dM,{forceMount:void 0}),fi="TooltipContent",c1=f.forwardRef((e,t)=>{const n=fM(fi,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=e,a=hf(fi,e.__scopeTooltip);return l.jsx(St,{present:r||a.open,children:a.disableHoverableContent?l.jsx(u1,{side:s,...o,ref:t}):l.jsx(hM,{side:s,...o,ref:t})})}),hM=f.forwardRef((e,t)=>{const n=hf(fi,e.__scopeTooltip),r=a1(fi,e.__scopeTooltip),s=f.useRef(null),o=Ce(t,s),[a,i]=f.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:h}=r,p=f.useCallback(()=>{i(null),h(!1)},[h]),m=f.useCallback((w,v)=>{const y=w.currentTarget,x={x:w.clientX,y:w.clientY},g=yM(x,y.getBoundingClientRect()),b=wM(x,g),S=xM(v.getBoundingClientRect()),_=SM([...b,...S]);i(_),h(!0)},[h]);return f.useEffect(()=>()=>p(),[p]),f.useEffect(()=>{if(c&&d){const w=y=>m(y,d),v=y=>m(y,c);return c.addEventListener("pointerleave",w),d.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",w),d.removeEventListener("pointerleave",v)}}},[c,d,m,p]),f.useEffect(()=>{if(a){const w=v=>{const y=v.target,x={x:v.clientX,y:v.clientY},g=(c==null?void 0:c.contains(y))||(d==null?void 0:d.contains(y)),b=!bM(x,a);g?p():b&&(p(),u())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,d,a,u,p]),l.jsx(u1,{...e,ref:o})}),[pM,mM]=ff(l1,{isInside:!1}),gM=IR("TooltipContent"),u1=f.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:a,...i}=e,c=hf(fi,n),u=fv(n),{onClose:d}=c;return f.useEffect(()=>(document.addEventListener(ew,d),()=>document.removeEventListener(ew,d)),[d]),f.useEffect(()=>{if(c.trigger){const h=p=>{const m=p.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),l.jsx(oa,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:l.jsxs(uf,{"data-state":c.stateAttribute,...u,...i,ref:t,style:{...i.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(gM,{children:r}),l.jsx(pM,{scope:n,isInside:!0,children:l.jsx(eI,{id:c.contentId,role:"tooltip",children:s||r})})]})})});c1.displayName=fi;var d1="TooltipArrow",vM=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=fv(n);return mM(d1,n).isInside?null:l.jsx(df,{...s,...r,ref:t})});vM.displayName=d1;function yM(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function wM(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function xM(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function bM(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const i=t[o],c=t[a],u=i.x,d=i.y,h=c.x,p=c.y;d>r!=p>r&&n<(h-u)*(r-d)/(p-d)+u&&(s=!s)}return s}function SM(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),_M(t)}function _M(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const o=t[t.length-1],a=t[t.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var EM=i1,f1=c1;const CM=EM,kM=f.forwardRef(({className:e,sideOffset:t=4,...n},r)=>l.jsx(f1,{ref:r,sideOffset:t,className:ge("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));kM.displayName=f1.displayName;var Ci=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Go=typeof window>"u"||"Deno"in globalThis;function Wt(){}function NM(e,t){return typeof e=="function"?e(t):e}function am(e){return typeof e=="number"&&e>=0&&e!==1/0}function h1(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Qs(e,t){return typeof e=="function"?e(t):e}function Rn(e,t){return typeof e=="function"?e(t):e}function tw(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:a,stale:i}=e;if(a){if(r){if(t.queryHash!==hv(a,t.options))return!1}else if(!Wl(t.queryKey,a))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof i=="boolean"&&t.isStale()!==i||s&&s!==t.state.fetchStatus||o&&!o(t))}function nw(e,t){const{exact:n,status:r,predicate:s,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(qo(t.options.mutationKey)!==qo(o))return!1}else if(!Wl(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function hv(e,t){return((t==null?void 0:t.queryKeyHashFn)||qo)(e)}function qo(e){return JSON.stringify(e,(t,n)=>im(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Wl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Wl(e[n],t[n])):!1}function p1(e,t){if(e===t)return e;const n=rw(e)&&rw(t);if(n||im(e)&&im(t)){const r=n?e:Object.keys(e),s=r.length,o=n?t:Object.keys(t),a=o.length,i=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<a;d++){const h=n?d:o[d];(!n&&c.has(h)||n)&&e[h]===void 0&&t[h]===void 0?(i[h]=void 0,u++):(i[h]=p1(e[h],t[h]),i[h]===e[h]&&e[h]!==void 0&&u++)}return s===a&&u===s?e:i}return t}function cd(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function rw(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function im(e){if(!sw(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!sw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function sw(e){return Object.prototype.toString.call(e)==="[object Object]"}function jM(e){return new Promise(t=>{setTimeout(t,e)})}function lm(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?p1(e,t):t}function PM(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function TM(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var pv=Symbol();function m1(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===pv?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function g1(e,t){return typeof e=="function"?e(...t):!!e}var To,Ns,Ya,jx,RM=(jx=class extends Ci{constructor(){super();me(this,To);me(this,Ns);me(this,Ya);ee(this,Ya,t=>{if(!Go&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){k(this,Ns)||this.setEventListener(k(this,Ya))}onUnsubscribe(){var t;this.hasListeners()||((t=k(this,Ns))==null||t.call(this),ee(this,Ns,void 0))}setEventListener(t){var n;ee(this,Ya,t),(n=k(this,Ns))==null||n.call(this),ee(this,Ns,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){k(this,To)!==t&&(ee(this,To,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof k(this,To)=="boolean"?k(this,To):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},To=new WeakMap,Ns=new WeakMap,Ya=new WeakMap,jx),mv=new RM,Ka,js,Ga,Px,IM=(Px=class extends Ci{constructor(){super();me(this,Ka,!0);me(this,js);me(this,Ga);ee(this,Ga,t=>{if(!Go&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){k(this,js)||this.setEventListener(k(this,Ga))}onUnsubscribe(){var t;this.hasListeners()||((t=k(this,js))==null||t.call(this),ee(this,js,void 0))}setEventListener(t){var n;ee(this,Ga,t),(n=k(this,js))==null||n.call(this),ee(this,js,t(this.setOnline.bind(this)))}setOnline(t){k(this,Ka)!==t&&(ee(this,Ka,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return k(this,Ka)}},Ka=new WeakMap,js=new WeakMap,Ga=new WeakMap,Px),ud=new IM;function cm(){let e,t;const n=new Promise((s,o)=>{e=s,t=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function OM(e){return Math.min(1e3*2**e,3e4)}function v1(e){return(e??"online")==="online"?ud.isOnline():!0}var y1=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function bh(e){return e instanceof y1}function w1(e){let t=!1,n=0,r=!1,s;const o=cm(),a=v=>{var y;r||(p(new y1(v)),(y=e.abort)==null||y.call(e))},i=()=>{t=!0},c=()=>{t=!1},u=()=>mv.isFocused()&&(e.networkMode==="always"||ud.isOnline())&&e.canRun(),d=()=>v1(e.networkMode)&&e.canRun(),h=v=>{var y;r||(r=!0,(y=e.onSuccess)==null||y.call(e,v),s==null||s(),o.resolve(v))},p=v=>{var y;r||(r=!0,(y=e.onError)==null||y.call(e,v),s==null||s(),o.reject(v))},m=()=>new Promise(v=>{var y;s=x=>{(r||u())&&v(x)},(y=e.onPause)==null||y.call(e)}).then(()=>{var v;s=void 0,r||(v=e.onContinue)==null||v.call(e)}),w=()=>{if(r)return;let v;const y=n===0?e.initialPromise:void 0;try{v=y??e.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(h).catch(x=>{var C;if(r)return;const g=e.retry??(Go?0:3),b=e.retryDelay??OM,S=typeof b=="function"?b(n,x):b,_=g===!0||typeof g=="number"&&n<g||typeof g=="function"&&g(n,x);if(t||!_){p(x);return}n++,(C=e.onFail)==null||C.call(e,n,x),jM(S).then(()=>u()?void 0:m()).then(()=>{t?p(x):w()})})};return{promise:o,cancel:a,continue:()=>(s==null||s(),o),cancelRetry:i,continueRetry:c,canStart:d,start:()=>(d()?w():m().then(w),o)}}var AM=e=>setTimeout(e,0);function MM(){let e=[],t=0,n=i=>{i()},r=i=>{i()},s=AM;const o=i=>{t?e.push(i):s(()=>{n(i)})},a=()=>{const i=e;e=[],i.length&&s(()=>{r(()=>{i.forEach(c=>{n(c)})})})};return{batch:i=>{let c;t++;try{c=i()}finally{t--,t||a()}return c},batchCalls:i=>(...c)=>{o(()=>{i(...c)})},schedule:o,setNotifyFunction:i=>{n=i},setBatchNotifyFunction:i=>{r=i},setScheduler:i=>{s=i}}}var vt=MM(),Ro,Tx,x1=(Tx=class{constructor(){me(this,Ro)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),am(this.gcTime)&&ee(this,Ro,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Go?1/0:5*60*1e3))}clearGcTimeout(){k(this,Ro)&&(clearTimeout(k(this,Ro)),ee(this,Ro,void 0))}},Ro=new WeakMap,Tx),qa,Io,Tn,Oo,It,Zl,Ao,qn,zr,Rx,DM=(Rx=class extends x1{constructor(t){super();me(this,qn);me(this,qa);me(this,Io);me(this,Tn);me(this,Oo);me(this,It);me(this,Zl);me(this,Ao);ee(this,Ao,!1),ee(this,Zl,t.defaultOptions),this.setOptions(t.options),this.observers=[],ee(this,Oo,t.client),ee(this,Tn,k(this,Oo).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ee(this,qa,LM(this.options)),this.state=t.state??k(this,qa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=k(this,It))==null?void 0:t.promise}setOptions(t){this.options={...k(this,Zl),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&k(this,Tn).remove(this)}setData(t,n){const r=lm(this.state.data,t,this.options);return je(this,qn,zr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){je(this,qn,zr).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=k(this,It))==null?void 0:r.promise;return(s=k(this,It))==null||s.cancel(t),n?n.then(Wt).catch(Wt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(k(this,qa))}isActive(){return this.observers.some(t=>Rn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===pv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Qs(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!h1(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=k(this,It))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=k(this,It))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),k(this,Tn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(k(this,It)&&(k(this,Ao)?k(this,It).cancel({revert:!0}):k(this,It).cancelRetry()),this.scheduleGc()),k(this,Tn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||je(this,qn,zr).call(this,{type:"invalidate"})}fetch(t,n){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(k(this,It))return k(this,It).continueRetry(),k(this,It).promise}if(t&&this.setOptions(t),!this.options.queryFn){const p=this.observers.find(m=>m.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,s=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(ee(this,Ao,!0),r.signal)})},o=()=>{const p=m1(this.options,n),w=(()=>{const v={client:k(this,Oo),queryKey:this.queryKey,meta:this.meta};return s(v),v})();return ee(this,Ao,!1),this.options.persister?this.options.persister(p,w,this):p(w)},i=(()=>{const p={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:k(this,Oo),state:this.state,fetchFn:o};return s(p),p})();(u=this.options.behavior)==null||u.onFetch(i,this),ee(this,Io,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=i.fetchOptions)==null?void 0:d.meta))&&je(this,qn,zr).call(this,{type:"fetch",meta:(h=i.fetchOptions)==null?void 0:h.meta});const c=p=>{var m,w,v,y;bh(p)&&p.silent||je(this,qn,zr).call(this,{type:"error",error:p}),bh(p)||((w=(m=k(this,Tn).config).onError)==null||w.call(m,p,this),(y=(v=k(this,Tn).config).onSettled)==null||y.call(v,this.state.data,p,this)),this.scheduleGc()};return ee(this,It,w1({initialPromise:n==null?void 0:n.initialPromise,fn:i.fetchFn,abort:r.abort.bind(r),onSuccess:p=>{var m,w,v,y;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(x){c(x);return}(w=(m=k(this,Tn).config).onSuccess)==null||w.call(m,p,this),(y=(v=k(this,Tn).config).onSettled)==null||y.call(v,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,m)=>{je(this,qn,zr).call(this,{type:"failed",failureCount:p,error:m})},onPause:()=>{je(this,qn,zr).call(this,{type:"pause"})},onContinue:()=>{je(this,qn,zr).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),k(this,It).start()}},qa=new WeakMap,Io=new WeakMap,Tn=new WeakMap,Oo=new WeakMap,It=new WeakMap,Zl=new WeakMap,Ao=new WeakMap,qn=new WeakSet,zr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...b1(r.data,this.options),fetchMeta:t.meta??null};case"success":return ee(this,Io,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return bh(s)&&s.revert&&k(this,Io)?{...k(this,Io),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),vt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),k(this,Tn).notify({query:this,type:"updated",action:t})})},Rx);function b1(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:v1(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function LM(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Sr,Ix,$M=(Ix=class extends Ci{constructor(t={}){super();me(this,Sr);this.config=t,ee(this,Sr,new Map)}build(t,n,r){const s=n.queryKey,o=n.queryHash??hv(s,n);let a=this.get(o);return a||(a=new DM({client:t,queryKey:s,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){k(this,Sr).has(t.queryHash)||(k(this,Sr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=k(this,Sr).get(t.queryHash);n&&(t.destroy(),n===t&&k(this,Sr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){vt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return k(this,Sr).get(t)}getAll(){return[...k(this,Sr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>tw(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>tw(t,r)):n}notify(t){vt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){vt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){vt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Sr=new WeakMap,Ix),_r,Ft,Mo,Er,ws,Ox,FM=(Ox=class extends x1{constructor(t){super();me(this,Er);me(this,_r);me(this,Ft);me(this,Mo);this.mutationId=t.mutationId,ee(this,Ft,t.mutationCache),ee(this,_r,[]),this.state=t.state||S1(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){k(this,_r).includes(t)||(k(this,_r).push(t),this.clearGcTimeout(),k(this,Ft).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ee(this,_r,k(this,_r).filter(n=>n!==t)),this.scheduleGc(),k(this,Ft).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){k(this,_r).length||(this.state.status==="pending"?this.scheduleGc():k(this,Ft).remove(this))}continue(){var t;return((t=k(this,Mo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,a,i,c,u,d,h,p,m,w,v,y,x,g,b,S,_,C,N,T;const n=()=>{je(this,Er,ws).call(this,{type:"continue"})};ee(this,Mo,w1({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(L,$)=>{je(this,Er,ws).call(this,{type:"failed",failureCount:L,error:$})},onPause:()=>{je(this,Er,ws).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>k(this,Ft).canRun(this)}));const r=this.state.status==="pending",s=!k(this,Mo).canStart();try{if(r)n();else{je(this,Er,ws).call(this,{type:"pending",variables:t,isPaused:s}),await((a=(o=k(this,Ft).config).onMutate)==null?void 0:a.call(o,t,this));const $=await((c=(i=this.options).onMutate)==null?void 0:c.call(i,t));$!==this.state.context&&je(this,Er,ws).call(this,{type:"pending",context:$,variables:t,isPaused:s})}const L=await k(this,Mo).start();return await((d=(u=k(this,Ft).config).onSuccess)==null?void 0:d.call(u,L,t,this.state.context,this)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,L,t,this.state.context)),await((w=(m=k(this,Ft).config).onSettled)==null?void 0:w.call(m,L,null,this.state.variables,this.state.context,this)),await((y=(v=this.options).onSettled)==null?void 0:y.call(v,L,null,t,this.state.context)),je(this,Er,ws).call(this,{type:"success",data:L}),L}catch(L){try{throw await((g=(x=k(this,Ft).config).onError)==null?void 0:g.call(x,L,t,this.state.context,this)),await((S=(b=this.options).onError)==null?void 0:S.call(b,L,t,this.state.context)),await((C=(_=k(this,Ft).config).onSettled)==null?void 0:C.call(_,void 0,L,this.state.variables,this.state.context,this)),await((T=(N=this.options).onSettled)==null?void 0:T.call(N,void 0,L,t,this.state.context)),L}finally{je(this,Er,ws).call(this,{type:"error",error:L})}}finally{k(this,Ft).runNext(this)}}},_r=new WeakMap,Ft=new WeakMap,Mo=new WeakMap,Er=new WeakSet,ws=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),vt.batch(()=>{k(this,_r).forEach(r=>{r.onMutationUpdate(t)}),k(this,Ft).notify({mutation:this,type:"updated",action:t})})},Ox);function S1(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Kr,Qn,ec,Ax,UM=(Ax=class extends Ci{constructor(t={}){super();me(this,Kr);me(this,Qn);me(this,ec);this.config=t,ee(this,Kr,new Set),ee(this,Qn,new Map),ee(this,ec,0)}build(t,n,r){const s=new FM({mutationCache:this,mutationId:++Rc(this,ec)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){k(this,Kr).add(t);const n=Zc(t);if(typeof n=="string"){const r=k(this,Qn).get(n);r?r.push(t):k(this,Qn).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(k(this,Kr).delete(t)){const n=Zc(t);if(typeof n=="string"){const r=k(this,Qn).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&k(this,Qn).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Zc(t);if(typeof n=="string"){const r=k(this,Qn).get(n),s=r==null?void 0:r.find(o=>o.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Zc(t);if(typeof n=="string"){const s=(r=k(this,Qn).get(n))==null?void 0:r.find(o=>o!==t&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){vt.batch(()=>{k(this,Kr).forEach(t=>{this.notify({type:"removed",mutation:t})}),k(this,Kr).clear(),k(this,Qn).clear()})}getAll(){return Array.from(k(this,Kr))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>nw(n,r))}findAll(t={}){return this.getAll().filter(n=>nw(t,n))}notify(t){vt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return vt.batch(()=>Promise.all(t.map(n=>n.continue().catch(Wt))))}},Kr=new WeakMap,Qn=new WeakMap,ec=new WeakMap,Ax);function Zc(e){var t;return(t=e.options.scope)==null?void 0:t.id}function ow(e){return{onFetch:(t,n)=>{var d,h,p,m,w;const r=t.options,s=(p=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,o=((m=t.state.data)==null?void 0:m.pages)||[],a=((w=t.state.data)==null?void 0:w.pageParams)||[];let i={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},x=m1(t.options,t.fetchOptions),g=async(b,S,_)=>{if(v)return Promise.reject();if(S==null&&b.pages.length)return Promise.resolve(b);const N=(()=>{const V={client:t.client,queryKey:t.queryKey,pageParam:S,direction:_?"backward":"forward",meta:t.options.meta};return y(V),V})(),T=await x(N),{maxPages:L}=t.options,$=_?TM:PM;return{pages:$(b.pages,T,L),pageParams:$(b.pageParams,S,L)}};if(s&&o.length){const b=s==="backward",S=b?BM:aw,_={pages:o,pageParams:a},C=S(r,_);i=await g(_,C,b)}else{const b=e??o.length;do{const S=c===0?a[0]??r.initialPageParam:aw(r,i);if(c>0&&S==null)break;i=await g(i,S),c++}while(c<b)}return i};t.options.persister?t.fetchFn=()=>{var v,y;return(y=(v=t.options).persister)==null?void 0:y.call(v,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function aw(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function BM(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var ot,Ps,Ts,Qa,Ja,Rs,Xa,Za,Mx,WM=(Mx=class{constructor(e={}){me(this,ot);me(this,Ps);me(this,Ts);me(this,Qa);me(this,Ja);me(this,Rs);me(this,Xa);me(this,Za);ee(this,ot,e.queryCache||new $M),ee(this,Ps,e.mutationCache||new UM),ee(this,Ts,e.defaultOptions||{}),ee(this,Qa,new Map),ee(this,Ja,new Map),ee(this,Rs,0)}mount(){Rc(this,Rs)._++,k(this,Rs)===1&&(ee(this,Xa,mv.subscribe(async e=>{e&&(await this.resumePausedMutations(),k(this,ot).onFocus())})),ee(this,Za,ud.subscribe(async e=>{e&&(await this.resumePausedMutations(),k(this,ot).onOnline())})))}unmount(){var e,t;Rc(this,Rs)._--,k(this,Rs)===0&&((e=k(this,Xa))==null||e.call(this),ee(this,Xa,void 0),(t=k(this,Za))==null||t.call(this),ee(this,Za,void 0))}isFetching(e){return k(this,ot).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return k(this,Ps).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=k(this,ot).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=k(this,ot).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Qs(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return k(this,ot).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=k(this,ot).get(r.queryHash),o=s==null?void 0:s.state.data,a=NM(t,o);if(a!==void 0)return k(this,ot).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return vt.batch(()=>k(this,ot).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=k(this,ot).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=k(this,ot);vt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=k(this,ot);return vt.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=vt.batch(()=>k(this,ot).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Wt).catch(Wt)}invalidateQueries(e,t={}){return vt.batch(()=>(k(this,ot).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=vt.batch(()=>k(this,ot).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(Wt)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Wt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=k(this,ot).build(this,t);return n.isStaleByTime(Qs(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Wt).catch(Wt)}fetchInfiniteQuery(e){return e.behavior=ow(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Wt).catch(Wt)}ensureInfiniteQueryData(e){return e.behavior=ow(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ud.isOnline()?k(this,Ps).resumePausedMutations():Promise.resolve()}getQueryCache(){return k(this,ot)}getMutationCache(){return k(this,Ps)}getDefaultOptions(){return k(this,Ts)}setDefaultOptions(e){ee(this,Ts,e)}setQueryDefaults(e,t){k(this,Qa).set(qo(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...k(this,Qa).values()],n={};return t.forEach(r=>{Wl(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){k(this,Ja).set(qo(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...k(this,Ja).values()],n={};return t.forEach(r=>{Wl(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...k(this,Ts).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=hv(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===pv&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...k(this,Ts).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){k(this,ot).clear(),k(this,Ps).clear()}},ot=new WeakMap,Ps=new WeakMap,Ts=new WeakMap,Qa=new WeakMap,Ja=new WeakMap,Rs=new WeakMap,Xa=new WeakMap,Za=new WeakMap,Mx),en,Re,tc,Ut,Do,ei,Is,Os,nc,ti,ni,Lo,$o,As,ri,$e,nl,um,dm,fm,hm,pm,mm,gm,_1,Dx,zM=(Dx=class extends Ci{constructor(t,n){super();me(this,$e);me(this,en);me(this,Re);me(this,tc);me(this,Ut);me(this,Do);me(this,ei);me(this,Is);me(this,Os);me(this,nc);me(this,ti);me(this,ni);me(this,Lo);me(this,$o);me(this,As);me(this,ri,new Set);this.options=n,ee(this,en,t),ee(this,Os,null),ee(this,Is,cm()),this.options.experimental_prefetchInRender||k(this,Is).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(k(this,Re).addObserver(this),iw(k(this,Re),this.options)?je(this,$e,nl).call(this):this.updateResult(),je(this,$e,hm).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return vm(k(this,Re),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return vm(k(this,Re),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,je(this,$e,pm).call(this),je(this,$e,mm).call(this),k(this,Re).removeObserver(this)}setOptions(t){const n=this.options,r=k(this,Re);if(this.options=k(this,en).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Rn(this.options.enabled,k(this,Re))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");je(this,$e,gm).call(this),k(this,Re).setOptions(this.options),n._defaulted&&!cd(this.options,n)&&k(this,en).getQueryCache().notify({type:"observerOptionsUpdated",query:k(this,Re),observer:this});const s=this.hasListeners();s&&lw(k(this,Re),r,this.options,n)&&je(this,$e,nl).call(this),this.updateResult(),s&&(k(this,Re)!==r||Rn(this.options.enabled,k(this,Re))!==Rn(n.enabled,k(this,Re))||Qs(this.options.staleTime,k(this,Re))!==Qs(n.staleTime,k(this,Re)))&&je(this,$e,um).call(this);const o=je(this,$e,dm).call(this);s&&(k(this,Re)!==r||Rn(this.options.enabled,k(this,Re))!==Rn(n.enabled,k(this,Re))||o!==k(this,As))&&je(this,$e,fm).call(this,o)}getOptimisticResult(t){const n=k(this,en).getQueryCache().build(k(this,en),t),r=this.createResult(n,t);return VM(this,r)&&(ee(this,Ut,r),ee(this,ei,this.options),ee(this,Do,k(this,Re).state)),r}getCurrentResult(){return k(this,Ut)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(t){k(this,ri).add(t)}getCurrentQuery(){return k(this,Re)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=k(this,en).defaultQueryOptions(t),r=k(this,en).getQueryCache().build(k(this,en),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return je(this,$e,nl).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),k(this,Ut)))}createResult(t,n){var L;const r=k(this,Re),s=this.options,o=k(this,Ut),a=k(this,Do),i=k(this,ei),u=t!==r?t.state:k(this,tc),{state:d}=t;let h={...d},p=!1,m;if(n._optimisticResults){const $=this.hasListeners(),V=!$&&iw(t,n),F=$&&lw(t,r,n,s);(V||F)&&(h={...h,...b1(d.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:w,errorUpdatedAt:v,status:y}=h;m=h.data;let x=!1;if(n.placeholderData!==void 0&&m===void 0&&y==="pending"){let $;o!=null&&o.isPlaceholderData&&n.placeholderData===(i==null?void 0:i.placeholderData)?($=o.data,x=!0):$=typeof n.placeholderData=="function"?n.placeholderData((L=k(this,ni))==null?void 0:L.state.data,k(this,ni)):n.placeholderData,$!==void 0&&(y="success",m=lm(o==null?void 0:o.data,$,n),p=!0)}if(n.select&&m!==void 0&&!x)if(o&&m===(a==null?void 0:a.data)&&n.select===k(this,nc))m=k(this,ti);else try{ee(this,nc,n.select),m=n.select(m),m=lm(o==null?void 0:o.data,m,n),ee(this,ti,m),ee(this,Os,null)}catch($){ee(this,Os,$)}k(this,Os)&&(w=k(this,Os),m=k(this,ti),v=Date.now(),y="error");const g=h.fetchStatus==="fetching",b=y==="pending",S=y==="error",_=b&&g,C=m!==void 0,T={status:y,fetchStatus:h.fetchStatus,isPending:b,isSuccess:y==="success",isError:S,isInitialLoading:_,isLoading:_,data:m,dataUpdatedAt:h.dataUpdatedAt,error:w,errorUpdatedAt:v,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:g,isRefetching:g&&!b,isLoadingError:S&&!C,isPaused:h.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:S&&C,isStale:gv(t,n),refetch:this.refetch,promise:k(this,Is),isEnabled:Rn(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const $=O=>{T.status==="error"?O.reject(T.error):T.data!==void 0&&O.resolve(T.data)},V=()=>{const O=ee(this,Is,T.promise=cm());$(O)},F=k(this,Is);switch(F.status){case"pending":t.queryHash===r.queryHash&&$(F);break;case"fulfilled":(T.status==="error"||T.data!==F.value)&&V();break;case"rejected":(T.status!=="error"||T.error!==F.reason)&&V();break}}return T}updateResult(){const t=k(this,Ut),n=this.createResult(k(this,Re),this.options);if(ee(this,Do,k(this,Re).state),ee(this,ei,this.options),k(this,Do).data!==void 0&&ee(this,ni,k(this,Re)),cd(n,t))return;ee(this,Ut,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!k(this,ri).size)return!0;const a=new Set(o??k(this,ri));return this.options.throwOnError&&a.add("error"),Object.keys(k(this,Ut)).some(i=>{const c=i;return k(this,Ut)[c]!==t[c]&&a.has(c)})};je(this,$e,_1).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&je(this,$e,hm).call(this)}},en=new WeakMap,Re=new WeakMap,tc=new WeakMap,Ut=new WeakMap,Do=new WeakMap,ei=new WeakMap,Is=new WeakMap,Os=new WeakMap,nc=new WeakMap,ti=new WeakMap,ni=new WeakMap,Lo=new WeakMap,$o=new WeakMap,As=new WeakMap,ri=new WeakMap,$e=new WeakSet,nl=function(t){je(this,$e,gm).call(this);let n=k(this,Re).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Wt)),n},um=function(){je(this,$e,pm).call(this);const t=Qs(this.options.staleTime,k(this,Re));if(Go||k(this,Ut).isStale||!am(t))return;const r=h1(k(this,Ut).dataUpdatedAt,t)+1;ee(this,Lo,setTimeout(()=>{k(this,Ut).isStale||this.updateResult()},r))},dm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(k(this,Re)):this.options.refetchInterval)??!1},fm=function(t){je(this,$e,mm).call(this),ee(this,As,t),!(Go||Rn(this.options.enabled,k(this,Re))===!1||!am(k(this,As))||k(this,As)===0)&&ee(this,$o,setInterval(()=>{(this.options.refetchIntervalInBackground||mv.isFocused())&&je(this,$e,nl).call(this)},k(this,As)))},hm=function(){je(this,$e,um).call(this),je(this,$e,fm).call(this,je(this,$e,dm).call(this))},pm=function(){k(this,Lo)&&(clearTimeout(k(this,Lo)),ee(this,Lo,void 0))},mm=function(){k(this,$o)&&(clearInterval(k(this,$o)),ee(this,$o,void 0))},gm=function(){const t=k(this,en).getQueryCache().build(k(this,en),this.options);if(t===k(this,Re))return;const n=k(this,Re);ee(this,Re,t),ee(this,tc,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},_1=function(t){vt.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(k(this,Ut))}),k(this,en).getQueryCache().notify({query:k(this,Re),type:"observerResultsUpdated"})})},Dx);function HM(e,t){return Rn(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function iw(e,t){return HM(e,t)||e.state.data!==void 0&&vm(e,t,t.refetchOnMount)}function vm(e,t,n){if(Rn(t.enabled,e)!==!1&&Qs(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&gv(e,t)}return!1}function lw(e,t,n,r){return(e!==t||Rn(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&gv(e,n)}function gv(e,t){return Rn(t.enabled,e)!==!1&&e.isStaleByTime(Qs(t.staleTime,e))}function VM(e,t){return!cd(e.getCurrentResult(),t)}var Ms,Ds,tn,Gr,ts,ku,ym,Lx,YM=(Lx=class extends Ci{constructor(n,r){super();me(this,ts);me(this,Ms);me(this,Ds);me(this,tn);me(this,Gr);ee(this,Ms,n),this.setOptions(r),this.bindMethods(),je(this,ts,ku).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=k(this,Ms).defaultMutationOptions(n),cd(this.options,r)||k(this,Ms).getMutationCache().notify({type:"observerOptionsUpdated",mutation:k(this,tn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&qo(r.mutationKey)!==qo(this.options.mutationKey)?this.reset():((s=k(this,tn))==null?void 0:s.state.status)==="pending"&&k(this,tn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=k(this,tn))==null||n.removeObserver(this)}onMutationUpdate(n){je(this,ts,ku).call(this),je(this,ts,ym).call(this,n)}getCurrentResult(){return k(this,Ds)}reset(){var n;(n=k(this,tn))==null||n.removeObserver(this),ee(this,tn,void 0),je(this,ts,ku).call(this),je(this,ts,ym).call(this)}mutate(n,r){var s;return ee(this,Gr,r),(s=k(this,tn))==null||s.removeObserver(this),ee(this,tn,k(this,Ms).getMutationCache().build(k(this,Ms),this.options)),k(this,tn).addObserver(this),k(this,tn).execute(n)}},Ms=new WeakMap,Ds=new WeakMap,tn=new WeakMap,Gr=new WeakMap,ts=new WeakSet,ku=function(){var r;const n=((r=k(this,tn))==null?void 0:r.state)??S1();ee(this,Ds,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},ym=function(n){vt.batch(()=>{var r,s,o,a,i,c,u,d;if(k(this,Gr)&&this.hasListeners()){const h=k(this,Ds).variables,p=k(this,Ds).context;(n==null?void 0:n.type)==="success"?((s=(r=k(this,Gr)).onSuccess)==null||s.call(r,n.data,h,p),(a=(o=k(this,Gr)).onSettled)==null||a.call(o,n.data,null,h,p)):(n==null?void 0:n.type)==="error"&&((c=(i=k(this,Gr)).onError)==null||c.call(i,n.error,h,p),(d=(u=k(this,Gr)).onSettled)==null||d.call(u,void 0,n.error,h,p))}this.listeners.forEach(h=>{h(k(this,Ds))})})},Lx),E1=f.createContext(void 0),ki=e=>{const t=f.useContext(E1);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},KM=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),l.jsx(E1.Provider,{value:e,children:t})),C1=f.createContext(!1),GM=()=>f.useContext(C1);C1.Provider;function qM(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var QM=f.createContext(qM()),JM=()=>f.useContext(QM),XM=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},ZM=e=>{f.useEffect(()=>{e.clearReset()},[e])},eD=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||g1(n,[e.error,r])),tD=e=>{if(e.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...r)=>t(n(...r)):t(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},nD=(e,t)=>e.isLoading&&e.isFetching&&!t,rD=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,cw=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function sD(e,t,n){var h,p,m,w,v;const r=GM(),s=JM(),o=ki(),a=o.defaultQueryOptions(e);(p=(h=o.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||p.call(h,a),a._optimisticResults=r?"isRestoring":"optimistic",tD(a),XM(a,s),ZM(s);const i=!o.getQueryCache().get(a.queryHash),[c]=f.useState(()=>new t(o,a)),u=c.getOptimisticResult(a),d=!r&&e.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(y=>{const x=d?c.subscribe(vt.batchCalls(y)):Wt;return c.updateResult(),x},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(a)},[a,c]),rD(a,u))throw cw(a,c,s);if(eD({result:u,errorResetBoundary:s,throwOnError:a.throwOnError,query:o.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw u.error;if((w=(m=o.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||w.call(m,a,u),a.experimental_prefetchInRender&&!Go&&nD(u,r)){const y=i?cw(a,c,s):(v=o.getQueryCache().get(a.queryHash))==null?void 0:v.promise;y==null||y.catch(Wt).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?u:c.trackResult(u)}function gl(e,t){return sD(e,zM)}function vl(e,t){const n=ki(),[r]=f.useState(()=>new YM(n,e));f.useEffect(()=>{r.setOptions(e)},[r,e]);const s=f.useSyncExternalStore(f.useCallback(a=>r.subscribe(vt.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=f.useCallback((a,i)=>{r.mutate(a,i).catch(Wt)},[r]);if(s.error&&g1(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:o,mutateAsync:s.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zl.apply(this,arguments)}var Fs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Fs||(Fs={}));const uw="popstate";function oD(e){e===void 0&&(e={});function t(r,s){let{pathname:o,search:a,hash:i}=r.location;return wm("",{pathname:o,search:a,hash:i},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:N1(s)}return iD(t,n,null,e)}function ht(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function k1(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function aD(){return Math.random().toString(36).substr(2,8)}function dw(e,t){return{usr:e.state,key:e.key,idx:t}}function wm(e,t,n,r){return n===void 0&&(n=null),zl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ni(t):t,{state:n,key:t&&t.key||r||aD()})}function N1(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ni(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function iD(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,i=Fs.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(zl({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){i=Fs.Pop;let y=d(),x=y==null?null:y-u;u=y,c&&c({action:i,location:v.location,delta:x})}function p(y,x){i=Fs.Push;let g=wm(v.location,y,x);u=d()+1;let b=dw(g,u),S=v.createHref(g);try{a.pushState(b,"",S)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(S)}o&&c&&c({action:i,location:v.location,delta:1})}function m(y,x){i=Fs.Replace;let g=wm(v.location,y,x);u=d();let b=dw(g,u),S=v.createHref(g);a.replaceState(b,"",S),o&&c&&c({action:i,location:v.location,delta:0})}function w(y){let x=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof y=="string"?y:N1(y);return g=g.replace(/ $/,"%20"),ht(x,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,x)}let v={get action(){return i},get location(){return e(s,a)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(uw,h),c=y,()=>{s.removeEventListener(uw,h),c=null}},createHref(y){return t(s,y)},createURL:w,encodeLocation(y){let x=w(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:m,go(y){return a.go(y)}};return v}var fw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(fw||(fw={}));function lD(e,t,n){return n===void 0&&(n="/"),cD(e,t,n,!1)}function cD(e,t,n,r){let s=typeof t=="string"?Ni(t):t,o=T1(s.pathname||"/",n);if(o==null)return null;let a=j1(e);uD(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let u=bD(o);i=wD(a[c],u,r)}return i}function j1(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,i)=>{let c={relativePath:i===void 0?o.path||"":i,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(ht(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Bo([r,c.relativePath]),d=n.concat(c);o.children&&o.children.length>0&&(ht(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),j1(o.children,t,d,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:vD(u,o.index),routesMeta:d})};return e.forEach((o,a)=>{var i;if(o.path===""||!((i=o.path)!=null&&i.includes("?")))s(o,a);else for(let c of P1(o.path))s(o,a,c)}),t}function P1(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=P1(r.join("/")),i=[];return i.push(...a.map(c=>c===""?o:[o,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function uD(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:yD(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const dD=/^:[\w-]+$/,fD=3,hD=2,pD=1,mD=10,gD=-2,hw=e=>e==="*";function vD(e,t){let n=e.split("/"),r=n.length;return n.some(hw)&&(r+=gD),t&&(r+=hD),n.filter(s=>!hw(s)).reduce((s,o)=>s+(dD.test(o)?fD:o===""?pD:mD),r)}function yD(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function wD(e,t,n){let{routesMeta:r}=e,s={},o="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],u=i===r.length-1,d=o==="/"?t:t.slice(o.length)||"/",h=pw({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=pw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:Bo([o,h.pathname]),pathnameBase:CD(Bo([o,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(o=Bo([o,h.pathnameBase]))}return a}function pw(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=xD(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:p,isOptional:m}=d;if(p==="*"){let v=i[h]||"";a=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const w=i[h];return m&&!w?u[p]=void 0:u[p]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:a,pattern:e}}function xD(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),k1(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function bD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return k1(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function T1(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function SD(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Ni(e):e;return{pathname:n?n.startsWith("/")?n:_D(n,t):t,search:kD(r),hash:ND(s)}}function _D(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Sh(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ED(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function R1(e,t){let n=ED(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function I1(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Ni(e):(s=zl({},e),ht(!s.pathname||!s.pathname.includes("?"),Sh("?","pathname","search",s)),ht(!s.pathname||!s.pathname.includes("#"),Sh("#","pathname","hash",s)),ht(!s.search||!s.search.includes("#"),Sh("#","search","hash",s)));let o=e===""||s.pathname==="",a=o?"/":s.pathname,i;if(a==null)i=n;else{let h=t.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}i=h>=0?t[h]:"/"}let c=SD(s,i),u=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Bo=e=>e.join("/").replace(/\/\/+/g,"/"),CD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),kD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ND=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function jD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const O1=["post","put","patch","delete"];new Set(O1);const PD=["get",...O1];new Set(PD);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hl(){return Hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hl.apply(this,arguments)}const vv=f.createContext(null),TD=f.createContext(null),dc=f.createContext(null),pf=f.createContext(null),io=f.createContext({outlet:null,matches:[],isDataRoute:!1}),A1=f.createContext(null);function fc(){return f.useContext(pf)!=null}function aa(){return fc()||ht(!1),f.useContext(pf).location}function M1(e){f.useContext(dc).static||f.useLayoutEffect(e)}function lr(){let{isDataRoute:e}=f.useContext(io);return e?HD():RD()}function RD(){fc()||ht(!1);let e=f.useContext(vv),{basename:t,future:n,navigator:r}=f.useContext(dc),{matches:s}=f.useContext(io),{pathname:o}=aa(),a=JSON.stringify(R1(s,n.v7_relativeSplatPath)),i=f.useRef(!1);return M1(()=>{i.current=!0}),f.useCallback(function(u,d){if(d===void 0&&(d={}),!i.current)return;if(typeof u=="number"){r.go(u);return}let h=I1(u,JSON.parse(a),o,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Bo([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,a,o,e])}function ID(){let{matches:e}=f.useContext(io),t=e[e.length-1];return t?t.params:{}}function OD(e,t){return AD(e,t)}function AD(e,t,n,r){fc()||ht(!1);let{navigator:s}=f.useContext(dc),{matches:o}=f.useContext(io),a=o[o.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=aa(),d;if(t){var h;let y=typeof t=="string"?Ni(t):t;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||ht(!1),d=y}else d=u;let p=d.pathname||"/",m=p;if(c!=="/"){let y=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let w=lD(e,{pathname:m}),v=FD(w&&w.map(y=>Object.assign({},y,{params:Object.assign({},i,y.params),pathname:Bo([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Bo([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,n,r);return t&&v?f.createElement(pf.Provider,{value:{location:Hl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Fs.Pop}},v):v}function MD(){let e=zD(),t=jD(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),n?f.createElement("pre",{style:s},n):null,null)}const DD=f.createElement(MD,null);class LD extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?f.createElement(io.Provider,{value:this.props.routeContext},f.createElement(A1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $D(e){let{routeContext:t,match:n,children:r}=e,s=f.useContext(vv);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(io.Provider,{value:t},r)}function FD(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let d=a.findIndex(h=>h.route.id&&(i==null?void 0:i[h.route.id])!==void 0);d>=0||ht(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:p,errors:m}=n,w=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||w){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,p)=>{let m,w=!1,v=null,y=null;n&&(m=i&&h.route.id?i[h.route.id]:void 0,v=h.route.errorElement||DD,c&&(u<0&&p===0?(w=!0,y=null):u===p&&(w=!0,y=h.route.hydrateFallbackElement||null)));let x=t.concat(a.slice(0,p+1)),g=()=>{let b;return m?b=v:w?b=y:h.route.Component?b=f.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,f.createElement($D,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?f.createElement(LD,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:g(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):g()},null)}var D1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(D1||{}),dd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(dd||{});function UD(e){let t=f.useContext(vv);return t||ht(!1),t}function BD(e){let t=f.useContext(TD);return t||ht(!1),t}function WD(e){let t=f.useContext(io);return t||ht(!1),t}function L1(e){let t=WD(),n=t.matches[t.matches.length-1];return n.route.id||ht(!1),n.route.id}function zD(){var e;let t=f.useContext(A1),n=BD(dd.UseRouteError),r=L1(dd.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function HD(){let{router:e}=UD(D1.UseNavigateStable),t=L1(dd.UseNavigateStable),n=f.useRef(!1);return M1(()=>{n.current=!0}),f.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Hl({fromRouteId:t},o)))},[e,t])}function VD(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function YD(e){let{to:t,replace:n,state:r,relative:s}=e;fc()||ht(!1);let{future:o,static:a}=f.useContext(dc),{matches:i}=f.useContext(io),{pathname:c}=aa(),u=lr(),d=I1(t,R1(i,o.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return f.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function Zt(e){ht(!1)}function KD(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Fs.Pop,navigator:o,static:a=!1,future:i}=e;fc()&&ht(!1);let c=t.replace(/^\/*/,"/"),u=f.useMemo(()=>({basename:c,navigator:o,static:a,future:Hl({v7_relativeSplatPath:!1},i)}),[c,i,o,a]);typeof r=="string"&&(r=Ni(r));let{pathname:d="/",search:h="",hash:p="",state:m=null,key:w="default"}=r,v=f.useMemo(()=>{let y=T1(d,c);return y==null?null:{location:{pathname:y,search:h,hash:p,state:m,key:w},navigationType:s}},[c,d,h,p,m,w,s]);return v==null?null:f.createElement(dc.Provider,{value:u},f.createElement(pf.Provider,{children:n,value:v}))}function GD(e){let{children:t,location:n}=e;return OD(xm(t),n)}new Promise(()=>{});function xm(e,t){t===void 0&&(t=[]);let n=[];return f.Children.forEach(e,(r,s)=>{if(!f.isValidElement(r))return;let o=[...t,s];if(r.type===f.Fragment){n.push.apply(n,xm(r.props.children,o));return}r.type!==Zt&&ht(!1),!r.props.index||!r.props.children||ht(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=xm(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const qD="6";try{window.__reactRouterVersion=qD}catch{}const QD="startTransition",mw=tg[QD];function JD(e){let{basename:t,children:n,future:r,window:s}=e,o=f.useRef();o.current==null&&(o.current=oD({window:s,v5Compat:!0}));let a=o.current,[i,c]=f.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=f.useCallback(h=>{u&&mw?mw(()=>c(h)):c(h)},[c,u]);return f.useLayoutEffect(()=>a.listen(d),[a,d]),f.useEffect(()=>VD(r),[r]),f.createElement(KD,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}var gw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(gw||(gw={}));var vw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(vw||(vw={}));const XD=()=>{const e=aa();return f.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),l.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),l.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},ZD="modulepreload",e2=function(e){return"/"+e},yw={},lo=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),i=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=e2(c),c in yw)return;yw[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":ZD,u||(h.as="script"),h.crossOrigin="",h.href=c,i&&h.setAttribute("nonce",i),document.head.appendChild(h),u)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return s.then(a=>{for(const i of a||[])i.status==="rejected"&&o(i.reason);return t().catch(o)})},$1=f.createContext(void 0),Bn=()=>{const e=f.useContext($1);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},bm=sf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Se=f.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},o)=>{const a=r?TR:"button";return l.jsx(a,{className:ge(bm({variant:t,size:n,className:e})),ref:o,...s})});Se.displayName="Button";const Qo="/assets/couch1-BGAlCsaN.jpg",fd="/assets/couch2-2vc5v2hu.jpg",hd="/assets/couch3-CguXBYH7.jpg",pd="/assets/couch4-BALJ1tc6.jpg",md="/assets/couch5-BOhJO1Bo.jpg",gd="/assets/couch6-C3DYZNsN.jpg";function Ae(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function En(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function zt(e,t){const n=Ae(e);return isNaN(t)?En(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function ar(e,t){const n=Ae(e);if(isNaN(t))return En(e,NaN);if(!t)return n;const r=n.getDate(),s=En(e,n.getTime());s.setMonth(n.getMonth()+t+1,0);const o=s.getDate();return r>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const yv=6048e5,t2=864e5;let n2={};function hc(){return n2}function Or(e,t){var i,c,u,d;const n=hc(),r=(t==null?void 0:t.weekStartsOn)??((c=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Ae(e),o=s.getDay(),a=(o<r?7:0)+o-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Jo(e){return Or(e,{weekStartsOn:1})}function F1(e){const t=Ae(e),n=t.getFullYear(),r=En(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Jo(r),o=En(e,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const a=Jo(o);return t.getTime()>=s.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function At(e){const t=Ae(e);return t.setHours(0,0,0,0),t}function vd(e){const t=Ae(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Mn(e,t){const n=At(e),r=At(t),s=+n-vd(n),o=+r-vd(r);return Math.round((s-o)/t2)}function r2(e){const t=F1(e),n=En(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Jo(n)}function Sm(e,t){const n=t*7;return zt(e,n)}function s2(e,t){return ar(e,t*12)}function o2(e){let t;return e.forEach(function(n){const r=Ae(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function a2(e){let t;return e.forEach(n=>{const r=Ae(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function an(e,t){const n=At(e),r=At(t);return+n==+r}function wv(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function i2(e){if(!wv(e)&&typeof e!="number")return!1;const t=Ae(e);return!isNaN(Number(t))}function Vl(e,t){const n=Ae(e),r=Ae(t),s=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return s*12+o}function l2(e,t,n){const r=Or(e,n),s=Or(t,n),o=+r-vd(r),a=+s-vd(s);return Math.round((o-a)/yv)}function xv(e){const t=Ae(e);return t.setHours(23,59,59,999),t}function bv(e){const t=Ae(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function dn(e){const t=Ae(e);return t.setDate(1),t.setHours(0,0,0,0),t}function U1(e){const t=Ae(e),n=En(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Sv(e,t){var i,c,u,d;const n=hc(),r=(t==null?void 0:t.weekStartsOn)??((c=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Ae(e),o=s.getDay(),a=(o<r?-7:0)+6-(o-r);return s.setDate(s.getDate()+a),s.setHours(23,59,59,999),s}function B1(e){return Sv(e,{weekStartsOn:1})}const c2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},u2=(e,t,n)=>{let r;const s=c2[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function _h(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const d2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},f2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},h2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},p2={date:_h({formats:d2,defaultWidth:"full"}),time:_h({formats:f2,defaultWidth:"full"}),dateTime:_h({formats:h2,defaultWidth:"full"})},m2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},g2=(e,t,n,r)=>m2[e];function Vi(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,i=n!=null&&n.width?String(n.width):a;s=e.formattingValues[i]||e.formattingValues[a]}else{const a=e.defaultWidth,i=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[i]||e.values[a]}const o=e.argumentCallback?e.argumentCallback(t):t;return s[o]}}const v2={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},y2={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},w2={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},x2={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},b2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},S2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},_2=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},E2={ordinalNumber:_2,era:Vi({values:v2,defaultWidth:"wide"}),quarter:Vi({values:y2,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Vi({values:w2,defaultWidth:"wide"}),day:Vi({values:x2,defaultWidth:"wide"}),dayPeriod:Vi({values:b2,defaultWidth:"wide",formattingValues:S2,defaultFormattingWidth:"wide"})};function Yi(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const a=o[0],i=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(i)?k2(i,h=>h.test(a)):C2(i,h=>h.test(a));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(a.length);return{value:u,rest:d}}}function C2(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function k2(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function N2(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],o=t.match(e.parsePattern);if(!o)return null;let a=e.valueCallback?e.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;const i=t.slice(s.length);return{value:a,rest:i}}}const j2=/^(\d+)(th|st|nd|rd)?/i,P2=/\d+/i,T2={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},R2={any:[/^b/i,/^(a|c)/i]},I2={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},O2={any:[/1/i,/2/i,/3/i,/4/i]},A2={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},M2={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},D2={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},L2={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$2={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},F2={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},U2={ordinalNumber:N2({matchPattern:j2,parsePattern:P2,valueCallback:e=>parseInt(e,10)}),era:Yi({matchPatterns:T2,defaultMatchWidth:"wide",parsePatterns:R2,defaultParseWidth:"any"}),quarter:Yi({matchPatterns:I2,defaultMatchWidth:"wide",parsePatterns:O2,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Yi({matchPatterns:A2,defaultMatchWidth:"wide",parsePatterns:M2,defaultParseWidth:"any"}),day:Yi({matchPatterns:D2,defaultMatchWidth:"wide",parsePatterns:L2,defaultParseWidth:"any"}),dayPeriod:Yi({matchPatterns:$2,defaultMatchWidth:"any",parsePatterns:F2,defaultParseWidth:"any"})},W1={code:"en-US",formatDistance:u2,formatLong:p2,formatRelative:g2,localize:E2,match:U2,options:{weekStartsOn:0,firstWeekContainsDate:1}};function B2(e){const t=Ae(e);return Mn(t,U1(t))+1}function z1(e){const t=Ae(e),n=+Jo(t)-+r2(t);return Math.round(n/yv)+1}function H1(e,t){var d,h,p,m;const n=Ae(e),r=n.getFullYear(),s=hc(),o=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(p=s.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,a=En(e,0);a.setFullYear(r+1,0,o),a.setHours(0,0,0,0);const i=Or(a,t),c=En(e,0);c.setFullYear(r,0,o),c.setHours(0,0,0,0);const u=Or(c,t);return n.getTime()>=i.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function W2(e,t){var i,c,u,d;const n=hc(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=H1(e,t),o=En(e,0);return o.setFullYear(s,0,r),o.setHours(0,0,0,0),Or(o,t)}function V1(e,t){const n=Ae(e),r=+Or(n,t)-+W2(n,t);return Math.round(r/yv)+1}function Be(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const vs={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Be(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Be(n+1,2)},d(e,t){return Be(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Be(e.getHours()%12||12,t.length)},H(e,t){return Be(e.getHours(),t.length)},m(e,t){return Be(e.getMinutes(),t.length)},s(e,t){return Be(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Be(s,t.length)}},fa={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ww={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return vs.y(e,t)},Y:function(e,t,n,r){const s=H1(e,r),o=s>0?s:1-s;if(t==="YY"){const a=o%100;return Be(a,2)}return t==="Yo"?n.ordinalNumber(o,{unit:"year"}):Be(o,t.length)},R:function(e,t){const n=F1(e);return Be(n,t.length)},u:function(e,t){const n=e.getFullYear();return Be(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Be(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Be(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return vs.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Be(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=V1(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):Be(s,t.length)},I:function(e,t,n){const r=z1(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Be(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):vs.d(e,t)},D:function(e,t,n){const r=B2(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Be(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Be(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Be(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return Be(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=fa.noon:r===0?s=fa.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=fa.evening:r>=12?s=fa.afternoon:r>=4?s=fa.morning:s=fa.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return vs.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):vs.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Be(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Be(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):vs.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):vs.s(e,t)},S:function(e,t){return vs.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return bw(r);case"XXXX":case"XX":return bo(r);case"XXXXX":case"XXX":default:return bo(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return bw(r);case"xxxx":case"xx":return bo(r);case"xxxxx":case"xxx":default:return bo(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+xw(r,":");case"OOOO":default:return"GMT"+bo(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+xw(r,":");case"zzzz":default:return"GMT"+bo(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Be(r,t.length)},T:function(e,t,n){const r=e.getTime();return Be(r,t.length)}};function xw(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),o=r%60;return o===0?n+String(s):n+String(s)+t+Be(o,2)}function bw(e,t){return e%60===0?(e>0?"-":"+")+Be(Math.abs(e)/60,2):bo(e,t)}function bo(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Be(Math.trunc(r/60),2),o=Be(r%60,2);return n+s+t+o}const Sw=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Y1=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},z2=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Sw(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",Sw(r,t)).replace("{{time}}",Y1(s,t))},H2={p:Y1,P:z2},V2=/^D+$/,Y2=/^Y+$/,K2=["D","DD","YY","YYYY"];function G2(e){return V2.test(e)}function q2(e){return Y2.test(e)}function Q2(e,t,n){const r=J2(e,t,n);if(console.warn(r),K2.includes(e))throw new RangeError(r)}function J2(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const X2=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Z2=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,eL=/^'([^]*?)'?$/,tL=/''/g,nL=/[a-zA-Z]/;function Me(e,t,n){var d,h,p,m,w,v,y,x;const r=hc(),s=(n==null?void 0:n.locale)??r.locale??W1,o=(n==null?void 0:n.firstWeekContainsDate)??((h=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(p=r.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((v=(w=n==null?void 0:n.locale)==null?void 0:w.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((x=(y=r.locale)==null?void 0:y.options)==null?void 0:x.weekStartsOn)??0,i=Ae(e);if(!i2(i))throw new RangeError("Invalid time value");let c=t.match(Z2).map(g=>{const b=g[0];if(b==="p"||b==="P"){const S=H2[b];return S(g,s.formatLong)}return g}).join("").match(X2).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const b=g[0];if(b==="'")return{isToken:!1,value:rL(g)};if(ww[b])return{isToken:!0,value:g};if(b.match(nL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:g}});s.localize.preprocessor&&(c=s.localize.preprocessor(i,c));const u={firstWeekContainsDate:o,weekStartsOn:a,locale:s};return c.map(g=>{if(!g.isToken)return g.value;const b=g.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&q2(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&G2(b))&&Q2(b,t,String(e));const S=ww[b[0]];return S(i,b,s.localize,u)}).join("")}function rL(e){const t=e.match(eL);return t?t[1].replace(tL,"'"):e}function sL(e){const t=Ae(e),n=t.getFullYear(),r=t.getMonth(),s=En(e,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function oL(e){return Math.trunc(+Ae(e)/1e3)}function aL(e){const t=Ae(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function iL(e,t){return l2(aL(e),dn(e),t)+1}function Yl(e,t){const n=Ae(e),r=Ae(t);return n.getTime()>r.getTime()}function Xo(e,t){const n=Ae(e),r=Ae(t);return+n<+r}function _v(e,t){const n=Ae(e),r=Ae(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function lL(e,t){const n=Ae(e),r=Ae(t);return n.getFullYear()===r.getFullYear()}function Eh(e,t){return zt(e,-t)}function Ch(e,t){const n=Ae(e),r=n.getFullYear(),s=n.getDate(),o=En(e,0);o.setFullYear(r,t,15),o.setHours(0,0,0,0);const a=sL(o);return n.setMonth(t,Math.min(s,a)),n}function _w(e,t){const n=Ae(e);return isNaN(+n)?En(e,NaN):(n.setFullYear(t),n)}var xe=function(){return xe=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},xe.apply(this,arguments)};function cL(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function K1(e,t,n){for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function pc(e){return e.mode==="multiple"}function mc(e){return e.mode==="range"}function mf(e){return e.mode==="single"}var uL={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function dL(e,t){return Me(e,"LLLL y",t)}function fL(e,t){return Me(e,"d",t)}function hL(e,t){return Me(e,"LLLL",t)}function pL(e){return"".concat(e)}function mL(e,t){return Me(e,"cccccc",t)}function gL(e,t){return Me(e,"yyyy",t)}var vL=Object.freeze({__proto__:null,formatCaption:dL,formatDay:fL,formatMonthCaption:hL,formatWeekNumber:pL,formatWeekdayName:mL,formatYearCaption:gL}),yL=function(e,t,n){return Me(e,"do MMMM (EEEE)",n)},wL=function(){return"Month: "},xL=function(){return"Go to next month"},bL=function(){return"Go to previous month"},SL=function(e,t){return Me(e,"cccc",t)},_L=function(e){return"Week n. ".concat(e)},EL=function(){return"Year: "},CL=Object.freeze({__proto__:null,labelDay:yL,labelMonthDropdown:wL,labelNext:xL,labelPrevious:bL,labelWeekNumber:_L,labelWeekday:SL,labelYearDropdown:EL});function kL(){var e="buttons",t=uL,n=W1,r={},s={},o=1,a={},i=new Date;return{captionLayout:e,classNames:t,formatters:vL,labels:CL,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:o,styles:a,today:i,mode:"default"}}function NL(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,s=e.toMonth,o=e.fromDate,a=e.toDate;return r?o=dn(r):t&&(o=new Date(t,0,1)),s?a=bv(s):n&&(a=new Date(n,11,31)),{fromDate:o?At(o):void 0,toDate:a?At(a):void 0}}var G1=f.createContext(void 0);function jL(e){var t,n=e.initialProps,r=kL(),s=NL(n),o=s.fromDate,a=s.toDate,i=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;i!=="buttons"&&(!o||!a)&&(i="buttons");var c;(mf(n)||pc(n)||mc(n))&&(c=n.onSelect);var u=xe(xe(xe({},r),n),{captionLayout:i,classNames:xe(xe({},r.classNames),n.classNames),components:xe({},n.components),formatters:xe(xe({},r.formatters),n.formatters),fromDate:o,labels:xe(xe({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:xe(xe({},r.modifiers),n.modifiers),modifiersClassNames:xe(xe({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:xe(xe({},r.styles),n.styles),toDate:a});return l.jsx(G1.Provider,{value:u,children:e.children})}function Ge(){var e=f.useContext(G1);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function q1(e){var t=Ge(),n=t.locale,r=t.classNames,s=t.styles,o=t.formatters.formatCaption;return l.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:o(e.displayMonth,{locale:n})})}function PL(e){return l.jsx("svg",xe({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:l.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Q1(e){var t,n,r=e.onChange,s=e.value,o=e.children,a=e.caption,i=e.className,c=e.style,u=Ge(),d=(n=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:PL;return l.jsxs("div",{className:i,style:c,children:[l.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),l.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:r,children:o}),l.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[a,l.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function TL(e){var t,n=Ge(),r=n.fromDate,s=n.toDate,o=n.styles,a=n.locale,i=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return l.jsx(l.Fragment,{});if(!s)return l.jsx(l.Fragment,{});var h=[];if(lL(r,s))for(var p=dn(r),m=r.getMonth();m<=s.getMonth();m++)h.push(Ch(p,m));else for(var p=dn(new Date),m=0;m<=11;m++)h.push(Ch(p,m));var w=function(y){var x=Number(y.target.value),g=Ch(dn(e.displayMonth),x);e.onChange(g)},v=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:Q1;return l.jsx(v,{name:"months","aria-label":d(),className:c.dropdown_month,style:o.dropdown_month,onChange:w,value:e.displayMonth.getMonth(),caption:i(e.displayMonth,{locale:a}),children:h.map(function(y){return l.jsx("option",{value:y.getMonth(),children:i(y,{locale:a})},y.getMonth())})})}function RL(e){var t,n=e.displayMonth,r=Ge(),s=r.fromDate,o=r.toDate,a=r.locale,i=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,h=r.labels.labelYearDropdown,p=[];if(!s)return l.jsx(l.Fragment,{});if(!o)return l.jsx(l.Fragment,{});for(var m=s.getFullYear(),w=o.getFullYear(),v=m;v<=w;v++)p.push(_w(U1(new Date),v));var y=function(g){var b=_w(dn(n),Number(g.target.value));e.onChange(b)},x=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:Q1;return l.jsx(x,{name:"years","aria-label":h(),className:c.dropdown_year,style:i.dropdown_year,onChange:y,value:n.getFullYear(),caption:d(n,{locale:a}),children:p.map(function(g){return l.jsx("option",{value:g.getFullYear(),children:d(g,{locale:a})},g.getFullYear())})})}function IL(e,t){var n=f.useState(e),r=n[0],s=n[1],o=t===void 0?r:t;return[o,s]}function OL(e){var t=e.month,n=e.defaultMonth,r=e.today,s=t||n||r||new Date,o=e.toDate,a=e.fromDate,i=e.numberOfMonths,c=i===void 0?1:i;if(o&&Vl(o,s)<0){var u=-1*(c-1);s=ar(o,u)}return a&&Vl(s,a)<0&&(s=a),dn(s)}function AL(){var e=Ge(),t=OL(e),n=IL(t,e.month),r=n[0],s=n[1],o=function(a){var i;if(!e.disableNavigation){var c=dn(a);s(c),(i=e.onMonthChange)===null||i===void 0||i.call(e,c)}};return[r,o]}function ML(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,s=dn(e),o=dn(ar(s,r)),a=Vl(o,s),i=[],c=0;c<a;c++){var u=ar(s,c);i.push(u)}return n&&(i=i.reverse()),i}function DL(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,s=t.numberOfMonths,o=s===void 0?1:s,a=r?o:1,i=dn(e);if(!n)return ar(i,a);var c=Vl(n,e);if(!(c<o))return ar(i,a)}}function LL(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,s=t.numberOfMonths,o=s===void 0?1:s,a=r?o:1,i=dn(e);if(!n)return ar(i,-a);var c=Vl(i,n);if(!(c<=0))return ar(i,-a)}}var J1=f.createContext(void 0);function $L(e){var t=Ge(),n=AL(),r=n[0],s=n[1],o=ML(r,t),a=DL(r,t),i=LL(r,t),c=function(h){return o.some(function(p){return _v(h,p)})},u=function(h,p){c(h)||(p&&Xo(h,p)?s(ar(h,1+t.numberOfMonths*-1)):s(h))},d={currentMonth:r,displayMonths:o,goToMonth:s,goToDate:u,previousMonth:i,nextMonth:a,isDateDisplayed:c};return l.jsx(J1.Provider,{value:d,children:e.children})}function gc(){var e=f.useContext(J1);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function Ew(e){var t,n=Ge(),r=n.classNames,s=n.styles,o=n.components,a=gc().goToMonth,i=function(d){a(ar(d,e.displayIndex?-e.displayIndex:0))},c=(t=o==null?void 0:o.CaptionLabel)!==null&&t!==void 0?t:q1,u=l.jsx(c,{id:e.id,displayMonth:e.displayMonth});return l.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[l.jsx("div",{className:r.vhidden,children:u}),l.jsx(TL,{onChange:i,displayMonth:e.displayMonth}),l.jsx(RL,{onChange:i,displayMonth:e.displayMonth})]})}function FL(e){return l.jsx("svg",xe({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:l.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function UL(e){return l.jsx("svg",xe({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:l.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var yd=f.forwardRef(function(e,t){var n=Ge(),r=n.classNames,s=n.styles,o=[r.button_reset,r.button];e.className&&o.push(e.className);var a=o.join(" "),i=xe(xe({},s.button_reset),s.button);return e.style&&Object.assign(i,e.style),l.jsx("button",xe({},e,{ref:t,type:"button",className:a,style:i}))});function BL(e){var t,n,r=Ge(),s=r.dir,o=r.locale,a=r.classNames,i=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,h=r.components;if(!e.nextMonth&&!e.previousMonth)return l.jsx(l.Fragment,{});var p=u(e.previousMonth,{locale:o}),m=[a.nav_button,a.nav_button_previous].join(" "),w=d(e.nextMonth,{locale:o}),v=[a.nav_button,a.nav_button_next].join(" "),y=(t=h==null?void 0:h.IconRight)!==null&&t!==void 0?t:UL,x=(n=h==null?void 0:h.IconLeft)!==null&&n!==void 0?n:FL;return l.jsxs("div",{className:a.nav,style:i.nav,children:[!e.hidePrevious&&l.jsx(yd,{name:"previous-month","aria-label":p,className:m,style:i.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:s==="rtl"?l.jsx(y,{className:a.nav_icon,style:i.nav_icon}):l.jsx(x,{className:a.nav_icon,style:i.nav_icon})}),!e.hideNext&&l.jsx(yd,{name:"next-month","aria-label":w,className:v,style:i.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:s==="rtl"?l.jsx(x,{className:a.nav_icon,style:i.nav_icon}):l.jsx(y,{className:a.nav_icon,style:i.nav_icon})})]})}function Cw(e){var t=Ge().numberOfMonths,n=gc(),r=n.previousMonth,s=n.nextMonth,o=n.goToMonth,a=n.displayMonths,i=a.findIndex(function(w){return _v(e.displayMonth,w)}),c=i===0,u=i===a.length-1,d=t>1&&(c||!u),h=t>1&&(u||!c),p=function(){r&&o(r)},m=function(){s&&o(s)};return l.jsx(BL,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:h,nextMonth:s,previousMonth:r,onPreviousClick:p,onNextClick:m})}function WL(e){var t,n=Ge(),r=n.classNames,s=n.disableNavigation,o=n.styles,a=n.captionLayout,i=n.components,c=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:q1,u;return s?u=l.jsx(c,{id:e.id,displayMonth:e.displayMonth}):a==="dropdown"?u=l.jsx(Ew,{displayMonth:e.displayMonth,id:e.id}):a==="dropdown-buttons"?u=l.jsxs(l.Fragment,{children:[l.jsx(Ew,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),l.jsx(Cw,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=l.jsxs(l.Fragment,{children:[l.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),l.jsx(Cw,{displayMonth:e.displayMonth,id:e.id})]}),l.jsx("div",{className:r.caption,style:o.caption,children:u})}function zL(e){var t=Ge(),n=t.footer,r=t.styles,s=t.classNames.tfoot;return n?l.jsx("tfoot",{className:s,style:r.tfoot,children:l.jsx("tr",{children:l.jsx("td",{colSpan:8,children:n})})}):l.jsx(l.Fragment,{})}function HL(e,t,n){for(var r=n?Jo(new Date):Or(new Date,{locale:e,weekStartsOn:t}),s=[],o=0;o<7;o++){var a=zt(r,o);s.push(a)}return s}function VL(){var e=Ge(),t=e.classNames,n=e.styles,r=e.showWeekNumber,s=e.locale,o=e.weekStartsOn,a=e.ISOWeek,i=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=HL(s,o,a);return l.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&l.jsx("td",{style:n.head_cell,className:t.head_cell}),u.map(function(d,h){return l.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(d,{locale:s}),children:i(d,{locale:s})},h)})]})}function YL(){var e,t=Ge(),n=t.classNames,r=t.styles,s=t.components,o=(e=s==null?void 0:s.HeadRow)!==null&&e!==void 0?e:VL;return l.jsx("thead",{style:r.head,className:n.head,children:l.jsx(o,{})})}function KL(e){var t=Ge(),n=t.locale,r=t.formatters.formatDay;return l.jsx(l.Fragment,{children:r(e.date,{locale:n})})}var Ev=f.createContext(void 0);function GL(e){if(!pc(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return l.jsx(Ev.Provider,{value:t,children:e.children})}return l.jsx(qL,{initialProps:e.initialProps,children:e.children})}function qL(e){var t=e.initialProps,n=e.children,r=t.selected,s=t.min,o=t.max,a=function(u,d,h){var p,m;(p=t.onDayClick)===null||p===void 0||p.call(t,u,d,h);var w=!!(d.selected&&s&&(r==null?void 0:r.length)===s);if(!w){var v=!!(!d.selected&&o&&(r==null?void 0:r.length)===o);if(!v){var y=r?K1([],r):[];if(d.selected){var x=y.findIndex(function(g){return an(u,g)});y.splice(x,1)}else y.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,y,u,d,h)}}},i={disabled:[]};r&&i.disabled.push(function(u){var d=o&&r.length>o-1,h=r.some(function(p){return an(p,u)});return!!(d&&!h)});var c={selected:r,onDayClick:a,modifiers:i};return l.jsx(Ev.Provider,{value:c,children:n})}function Cv(){var e=f.useContext(Ev);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function QL(e,t){var n=t||{},r=n.from,s=n.to;return r&&s?an(s,e)&&an(r,e)?void 0:an(s,e)?{from:s,to:void 0}:an(r,e)?void 0:Yl(r,e)?{from:e,to:s}:{from:r,to:e}:s?Yl(e,s)?{from:s,to:e}:{from:e,to:s}:r?Xo(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var kv=f.createContext(void 0);function JL(e){if(!mc(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return l.jsx(kv.Provider,{value:t,children:e.children})}return l.jsx(XL,{initialProps:e.initialProps,children:e.children})}function XL(e){var t=e.initialProps,n=e.children,r=t.selected,s=r||{},o=s.from,a=s.to,i=t.min,c=t.max,u=function(m,w,v){var y,x;(y=t.onDayClick)===null||y===void 0||y.call(t,m,w,v);var g=QL(m,r);(x=t.onSelect)===null||x===void 0||x.call(t,g,m,w,v)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(d.range_start=[o],a?(d.range_end=[a],an(o,a)||(d.range_middle=[{after:o,before:a}])):d.range_end=[o]):a&&(d.range_start=[a],d.range_end=[a]),i&&(o&&!a&&d.disabled.push({after:Eh(o,i-1),before:zt(o,i-1)}),o&&a&&d.disabled.push({after:o,before:zt(o,i-1)}),!o&&a&&d.disabled.push({after:Eh(a,i-1),before:zt(a,i-1)})),c){if(o&&!a&&(d.disabled.push({before:zt(o,-c+1)}),d.disabled.push({after:zt(o,c-1)})),o&&a){var h=Mn(a,o)+1,p=c-h;d.disabled.push({before:Eh(o,p)}),d.disabled.push({after:zt(a,p)})}!o&&a&&(d.disabled.push({before:zt(a,-c+1)}),d.disabled.push({after:zt(a,c-1)}))}return l.jsx(kv.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function Nv(){var e=f.useContext(kv);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Nu(e){return Array.isArray(e)?K1([],e):e!==void 0?[e]:[]}function ZL(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],s=n[1];t[r]=Nu(s)}),t}var ir;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(ir||(ir={}));var e$=ir.Selected,Wr=ir.Disabled,t$=ir.Hidden,n$=ir.Today,kh=ir.RangeEnd,Nh=ir.RangeMiddle,jh=ir.RangeStart,r$=ir.Outside;function s$(e,t,n){var r,s=(r={},r[e$]=Nu(e.selected),r[Wr]=Nu(e.disabled),r[t$]=Nu(e.hidden),r[n$]=[e.today],r[kh]=[],r[Nh]=[],r[jh]=[],r[r$]=[],r);return e.fromDate&&s[Wr].push({before:e.fromDate}),e.toDate&&s[Wr].push({after:e.toDate}),pc(e)?s[Wr]=s[Wr].concat(t.modifiers[Wr]):mc(e)&&(s[Wr]=s[Wr].concat(n.modifiers[Wr]),s[jh]=n.modifiers[jh],s[Nh]=n.modifiers[Nh],s[kh]=n.modifiers[kh]),s}var X1=f.createContext(void 0);function o$(e){var t=Ge(),n=Cv(),r=Nv(),s=s$(t,n,r),o=ZL(t.modifiers),a=xe(xe({},s),o);return l.jsx(X1.Provider,{value:a,children:e.children})}function Z1(){var e=f.useContext(X1);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function a$(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function i$(e){return!!(e&&typeof e=="object"&&"from"in e)}function l$(e){return!!(e&&typeof e=="object"&&"after"in e)}function c$(e){return!!(e&&typeof e=="object"&&"before"in e)}function u$(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function d$(e,t){var n,r=t.from,s=t.to;if(r&&s){var o=Mn(s,r)<0;o&&(n=[s,r],r=n[0],s=n[1]);var a=Mn(e,r)>=0&&Mn(s,e)>=0;return a}return s?an(s,e):r?an(r,e):!1}function f$(e){return wv(e)}function h$(e){return Array.isArray(e)&&e.every(wv)}function p$(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(f$(n))return an(e,n);if(h$(n))return n.includes(e);if(i$(n))return d$(e,n);if(u$(n))return n.dayOfWeek.includes(e.getDay());if(a$(n)){var r=Mn(n.before,e),s=Mn(n.after,e),o=r>0,a=s<0,i=Yl(n.before,n.after);return i?a&&o:o||a}return l$(n)?Mn(e,n.after)>0:c$(n)?Mn(n.before,e)>0:typeof n=="function"?n(e):!1})}function jv(e,t,n){var r=Object.keys(t).reduce(function(o,a){var i=t[a];return p$(e,i)&&o.push(a),o},[]),s={};return r.forEach(function(o){return s[o]=!0}),n&&!_v(e,n)&&(s.outside=!0),s}function m$(e,t){for(var n=dn(e[0]),r=bv(e[e.length-1]),s,o,a=n;a<=r;){var i=jv(a,t),c=!i.disabled&&!i.hidden;if(!c){a=zt(a,1);continue}if(i.selected)return a;i.today&&!o&&(o=a),s||(s=a),a=zt(a,1)}return o||s}var g$=365;function eE(e,t){var n=t.moveBy,r=t.direction,s=t.context,o=t.modifiers,a=t.retry,i=a===void 0?{count:0,lastFocused:e}:a,c=s.weekStartsOn,u=s.fromDate,d=s.toDate,h=s.locale,p={day:zt,week:Sm,month:ar,year:s2,startOfWeek:function(y){return s.ISOWeek?Jo(y):Or(y,{locale:h,weekStartsOn:c})},endOfWeek:function(y){return s.ISOWeek?B1(y):Sv(y,{locale:h,weekStartsOn:c})}},m=p[n](e,r==="after"?1:-1);r==="before"&&u?m=o2([u,m]):r==="after"&&d&&(m=a2([d,m]));var w=!0;if(o){var v=jv(m,o);w=!v.disabled&&!v.hidden}return w?m:i.count>g$?i.lastFocused:eE(m,{moveBy:n,direction:r,context:s,modifiers:o,retry:xe(xe({},i),{count:i.count+1})})}var tE=f.createContext(void 0);function v$(e){var t=gc(),n=Z1(),r=f.useState(),s=r[0],o=r[1],a=f.useState(),i=a[0],c=a[1],u=m$(t.displayMonths,n),d=s??(i&&t.isDateDisplayed(i))?i:u,h=function(){c(s),o(void 0)},p=function(y){o(y)},m=Ge(),w=function(y,x){if(s){var g=eE(s,{moveBy:y,direction:x,context:m,modifiers:n});an(s,g)||(t.goToDate(g,s),p(g))}},v={focusedDay:s,focusTarget:d,blur:h,focus:p,focusDayAfter:function(){return w("day","after")},focusDayBefore:function(){return w("day","before")},focusWeekAfter:function(){return w("week","after")},focusWeekBefore:function(){return w("week","before")},focusMonthBefore:function(){return w("month","before")},focusMonthAfter:function(){return w("month","after")},focusYearBefore:function(){return w("year","before")},focusYearAfter:function(){return w("year","after")},focusStartOfWeek:function(){return w("startOfWeek","before")},focusEndOfWeek:function(){return w("endOfWeek","after")}};return l.jsx(tE.Provider,{value:v,children:e.children})}function Pv(){var e=f.useContext(tE);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function y$(e,t){var n=Z1(),r=jv(e,n,t);return r}var Tv=f.createContext(void 0);function w$(e){if(!mf(e.initialProps)){var t={selected:void 0};return l.jsx(Tv.Provider,{value:t,children:e.children})}return l.jsx(x$,{initialProps:e.initialProps,children:e.children})}function x$(e){var t=e.initialProps,n=e.children,r=function(o,a,i){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,o,a,i),a.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,o,a,i);return}(d=t.onSelect)===null||d===void 0||d.call(t,o,o,a,i)},s={selected:t.selected,onDayClick:r};return l.jsx(Tv.Provider,{value:s,children:n})}function nE(){var e=f.useContext(Tv);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function b$(e,t){var n=Ge(),r=nE(),s=Cv(),o=Nv(),a=Pv(),i=a.focusDayAfter,c=a.focusDayBefore,u=a.focusWeekAfter,d=a.focusWeekBefore,h=a.blur,p=a.focus,m=a.focusMonthBefore,w=a.focusMonthAfter,v=a.focusYearBefore,y=a.focusYearAfter,x=a.focusStartOfWeek,g=a.focusEndOfWeek,b=function(M){var E,R,W,J;mf(n)?(E=r.onDayClick)===null||E===void 0||E.call(r,e,t,M):pc(n)?(R=s.onDayClick)===null||R===void 0||R.call(s,e,t,M):mc(n)?(W=o.onDayClick)===null||W===void 0||W.call(o,e,t,M):(J=n.onDayClick)===null||J===void 0||J.call(n,e,t,M)},S=function(M){var E;p(e),(E=n.onDayFocus)===null||E===void 0||E.call(n,e,t,M)},_=function(M){var E;h(),(E=n.onDayBlur)===null||E===void 0||E.call(n,e,t,M)},C=function(M){var E;(E=n.onDayMouseEnter)===null||E===void 0||E.call(n,e,t,M)},N=function(M){var E;(E=n.onDayMouseLeave)===null||E===void 0||E.call(n,e,t,M)},T=function(M){var E;(E=n.onDayPointerEnter)===null||E===void 0||E.call(n,e,t,M)},L=function(M){var E;(E=n.onDayPointerLeave)===null||E===void 0||E.call(n,e,t,M)},$=function(M){var E;(E=n.onDayTouchCancel)===null||E===void 0||E.call(n,e,t,M)},V=function(M){var E;(E=n.onDayTouchEnd)===null||E===void 0||E.call(n,e,t,M)},F=function(M){var E;(E=n.onDayTouchMove)===null||E===void 0||E.call(n,e,t,M)},O=function(M){var E;(E=n.onDayTouchStart)===null||E===void 0||E.call(n,e,t,M)},j=function(M){var E;(E=n.onDayKeyUp)===null||E===void 0||E.call(n,e,t,M)},z=function(M){var E;switch(M.key){case"ArrowLeft":M.preventDefault(),M.stopPropagation(),n.dir==="rtl"?i():c();break;case"ArrowRight":M.preventDefault(),M.stopPropagation(),n.dir==="rtl"?c():i();break;case"ArrowDown":M.preventDefault(),M.stopPropagation(),u();break;case"ArrowUp":M.preventDefault(),M.stopPropagation(),d();break;case"PageUp":M.preventDefault(),M.stopPropagation(),M.shiftKey?v():m();break;case"PageDown":M.preventDefault(),M.stopPropagation(),M.shiftKey?y():w();break;case"Home":M.preventDefault(),M.stopPropagation(),x();break;case"End":M.preventDefault(),M.stopPropagation(),g();break}(E=n.onDayKeyDown)===null||E===void 0||E.call(n,e,t,M)},A={onClick:b,onFocus:S,onBlur:_,onKeyDown:z,onKeyUp:j,onMouseEnter:C,onMouseLeave:N,onPointerEnter:T,onPointerLeave:L,onTouchCancel:$,onTouchEnd:V,onTouchMove:F,onTouchStart:O};return A}function S$(){var e=Ge(),t=nE(),n=Cv(),r=Nv(),s=mf(e)?t.selected:pc(e)?n.selected:mc(e)?r.selected:void 0;return s}function _$(e){return Object.values(ir).includes(e)}function E$(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var s=e.modifiersClassNames[r];if(s)n.push(s);else if(_$(r)){var o=e.classNames["day_".concat(r)];o&&n.push(o)}}),n}function C$(e,t){var n=xe({},e.styles.day);return Object.keys(t).forEach(function(r){var s;n=xe(xe({},n),(s=e.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function k$(e,t,n){var r,s,o,a=Ge(),i=Pv(),c=y$(e,t),u=b$(e,c),d=S$(),h=!!(a.onDayClick||a.mode!=="default");f.useEffect(function(){var C;c.outside||i.focusedDay&&h&&an(i.focusedDay,e)&&((C=n.current)===null||C===void 0||C.focus())},[i.focusedDay,e,n,h,c.outside]);var p=E$(a,c).join(" "),m=C$(a,c),w=!!(c.outside&&!a.showOutsideDays||c.hidden),v=(o=(s=a.components)===null||s===void 0?void 0:s.DayContent)!==null&&o!==void 0?o:KL,y=l.jsx(v,{date:e,displayMonth:t,activeModifiers:c}),x={style:m,className:p,children:y,role:"gridcell"},g=i.focusTarget&&an(i.focusTarget,e)&&!c.outside,b=i.focusedDay&&an(i.focusedDay,e),S=xe(xe(xe({},x),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=b||g?0:-1,r)),u),_={isButton:h,isHidden:w,activeModifiers:c,selectedDays:d,buttonProps:S,divProps:x};return _}function N$(e){var t=f.useRef(null),n=k$(e.date,e.displayMonth,t);return n.isHidden?l.jsx("div",{role:"gridcell"}):n.isButton?l.jsx(yd,xe({name:"day",ref:t},n.buttonProps)):l.jsx("div",xe({},n.divProps))}function j$(e){var t=e.number,n=e.dates,r=Ge(),s=r.onWeekNumberClick,o=r.styles,a=r.classNames,i=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(t),{locale:i});if(!s)return l.jsx("span",{className:a.weeknumber,style:o.weeknumber,children:d});var h=c(Number(t),{locale:i}),p=function(m){s(t,n,m)};return l.jsx(yd,{name:"week-number","aria-label":h,className:a.weeknumber,style:o.weeknumber,onClick:p,children:d})}function P$(e){var t,n,r=Ge(),s=r.styles,o=r.classNames,a=r.showWeekNumber,i=r.components,c=(t=i==null?void 0:i.Day)!==null&&t!==void 0?t:N$,u=(n=i==null?void 0:i.WeekNumber)!==null&&n!==void 0?n:j$,d;return a&&(d=l.jsx("td",{className:o.cell,style:s.cell,children:l.jsx(u,{number:e.weekNumber,dates:e.dates})})),l.jsxs("tr",{className:o.row,style:s.row,children:[d,e.dates.map(function(h){return l.jsx("td",{className:o.cell,style:s.cell,role:"presentation",children:l.jsx(c,{displayMonth:e.displayMonth,date:h})},oL(h))})]})}function kw(e,t,n){for(var r=n!=null&&n.ISOWeek?B1(t):Sv(t,n),s=n!=null&&n.ISOWeek?Jo(e):Or(e,n),o=Mn(r,s),a=[],i=0;i<=o;i++)a.push(zt(s,i));var c=a.reduce(function(u,d){var h=n!=null&&n.ISOWeek?z1(d):V1(d,n),p=u.find(function(m){return m.weekNumber===h});return p?(p.dates.push(d),u):(u.push({weekNumber:h,dates:[d]}),u)},[]);return c}function T$(e,t){var n=kw(dn(e),bv(e),t);if(t!=null&&t.useFixedWeeks){var r=iL(e,t);if(r<6){var s=n[n.length-1],o=s.dates[s.dates.length-1],a=Sm(o,6-r),i=kw(Sm(o,1),a,t);n.push.apply(n,i)}}return n}function R$(e){var t,n,r,s=Ge(),o=s.locale,a=s.classNames,i=s.styles,c=s.hideHead,u=s.fixedWeeks,d=s.components,h=s.weekStartsOn,p=s.firstWeekContainsDate,m=s.ISOWeek,w=T$(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:o,weekStartsOn:h,firstWeekContainsDate:p}),v=(t=d==null?void 0:d.Head)!==null&&t!==void 0?t:YL,y=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:P$,x=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:zL;return l.jsxs("table",{id:e.id,className:a.table,style:i.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&l.jsx(v,{}),l.jsx("tbody",{className:a.tbody,style:i.tbody,children:w.map(function(g){return l.jsx(y,{displayMonth:e.displayMonth,dates:g.dates,weekNumber:g.weekNumber},g.weekNumber)})}),l.jsx(x,{displayMonth:e.displayMonth})]})}function I$(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var O$=I$()?f.useLayoutEffect:f.useEffect,Ph=!1,A$=0;function Nw(){return"react-day-picker-".concat(++A$)}function M$(e){var t,n=e??(Ph?Nw():null),r=f.useState(n),s=r[0],o=r[1];return O$(function(){s===null&&o(Nw())},[]),f.useEffect(function(){Ph===!1&&(Ph=!0)},[]),(t=e??s)!==null&&t!==void 0?t:void 0}function D$(e){var t,n,r=Ge(),s=r.dir,o=r.classNames,a=r.styles,i=r.components,c=gc().displayMonths,u=M$(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,h=[o.month],p=a.month,m=e.displayIndex===0,w=e.displayIndex===c.length-1,v=!m&&!w;s==="rtl"&&(t=[m,w],w=t[0],m=t[1]),m&&(h.push(o.caption_start),p=xe(xe({},p),a.caption_start)),w&&(h.push(o.caption_end),p=xe(xe({},p),a.caption_end)),v&&(h.push(o.caption_between),p=xe(xe({},p),a.caption_between));var y=(n=i==null?void 0:i.Caption)!==null&&n!==void 0?n:WL;return l.jsxs("div",{className:h.join(" "),style:p,children:[l.jsx(y,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),l.jsx(R$,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function L$(e){var t=Ge(),n=t.classNames,r=t.styles;return l.jsx("div",{className:n.months,style:r.months,children:e.children})}function $$(e){var t,n,r=e.initialProps,s=Ge(),o=Pv(),a=gc(),i=f.useState(!1),c=i[0],u=i[1];f.useEffect(function(){s.initialFocus&&o.focusTarget&&(c||(o.focus(o.focusTarget),u(!0)))},[s.initialFocus,c,o.focus,o.focusTarget,o]);var d=[s.classNames.root,s.className];s.numberOfMonths>1&&d.push(s.classNames.multiple_months),s.showWeekNumber&&d.push(s.classNames.with_weeknumber);var h=xe(xe({},s.styles.root),s.style),p=Object.keys(r).filter(function(w){return w.startsWith("data-")}).reduce(function(w,v){var y;return xe(xe({},w),(y={},y[v]=r[v],y))},{}),m=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:L$;return l.jsx("div",xe({className:d.join(" "),style:h,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},p,{children:l.jsx(m,{children:a.displayMonths.map(function(w,v){return l.jsx(D$,{displayIndex:v,displayMonth:w},v)})})}))}function F$(e){var t=e.children,n=cL(e,["children"]);return l.jsx(jL,{initialProps:n,children:l.jsx($L,{children:l.jsx(w$,{initialProps:n,children:l.jsx(GL,{initialProps:n,children:l.jsx(JL,{initialProps:n,children:l.jsx(o$,{children:l.jsx(v$,{children:t})})})})})})})}function U$(e){return l.jsx(F$,xe({},e,{children:l.jsx($$,{initialProps:e})}))}function wd({className:e,classNames:t,showOutsideDays:n=!0,...r}){return l.jsx(U$,{showOutsideDays:n,className:ge("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ge(bm({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:["h-9 w-9 text-center text-sm p-0 relative","[&:has([aria-selected].day-range-start)]:rounded-l-full","[&:has([aria-selected].day-range-end)]:rounded-r-full","[&:has([aria-selected].day-outside)]:bg-accent/50","[&:has([aria-selected])]:bg-accent","first:[&:has([aria-selected])]:rounded-l-full","last:[&:has([aria-selected])]:rounded-r-full","focus-within:relative focus-within:z-20"].join(" "),day:ge(bm({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...s})=>l.jsx(C_,{className:"h-4 w-4"}),IconRight:({...s})=>l.jsx(Xg,{className:"h-4 w-4"})},...r})}wd.displayName="Calendar";var Th=0;function gf(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??jw()),document.body.insertAdjacentElement("beforeend",e[1]??jw()),Th++,()=>{Th===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Th--}},[])}function jw(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Rh="focusScope.autoFocusOnMount",Ih="focusScope.autoFocusOnUnmount",Pw={bubbles:!1,cancelable:!0},B$="FocusScope",vc=f.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=e,[i,c]=f.useState(null),u=it(s),d=it(o),h=f.useRef(null),p=Ce(t,v=>c(v)),m=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let v=function(b){if(m.paused||!i)return;const S=b.target;i.contains(S)?h.current=S:xs(h.current,{select:!0})},y=function(b){if(m.paused||!i)return;const S=b.relatedTarget;S!==null&&(i.contains(S)||xs(h.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const _ of b)_.removedNodes.length>0&&xs(i)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const g=new MutationObserver(x);return i&&g.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),g.disconnect()}}},[r,i,m.paused]),f.useEffect(()=>{if(i){Rw.add(m);const v=document.activeElement;if(!i.contains(v)){const x=new CustomEvent(Rh,Pw);i.addEventListener(Rh,u),i.dispatchEvent(x),x.defaultPrevented||(W$(K$(rE(i)),{select:!0}),document.activeElement===v&&xs(i))}return()=>{i.removeEventListener(Rh,u),setTimeout(()=>{const x=new CustomEvent(Ih,Pw);i.addEventListener(Ih,d),i.dispatchEvent(x),x.defaultPrevented||xs(v??document.body,{select:!0}),i.removeEventListener(Ih,d),Rw.remove(m)},0)}}},[i,u,d,m]);const w=f.useCallback(v=>{if(!n&&!r||m.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(y&&x){const g=v.currentTarget,[b,S]=z$(g);b&&S?!v.shiftKey&&x===S?(v.preventDefault(),n&&xs(b,{select:!0})):v.shiftKey&&x===b&&(v.preventDefault(),n&&xs(S,{select:!0})):x===g&&v.preventDefault()}},[n,r,m.paused]);return l.jsx(fe.div,{tabIndex:-1,...a,ref:p,onKeyDown:w})});vc.displayName=B$;function W$(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(xs(r,{select:t}),document.activeElement!==n)return}function z$(e){const t=rE(e),n=Tw(t,e),r=Tw(t.reverse(),e);return[n,r]}function rE(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Tw(e,t){for(const n of e)if(!H$(n,{upTo:t}))return n}function H$(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function V$(e){return e instanceof HTMLInputElement&&"select"in e}function xs(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&V$(e)&&t&&e.select()}}var Rw=Y$();function Y$(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Iw(e,t),e.unshift(t)},remove(t){var n;e=Iw(e,t),(n=e[0])==null||n.resume()}}}function Iw(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function K$(e){return e.filter(t=>t.tagName!=="A")}var G$=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ha=new WeakMap,eu=new WeakMap,tu={},Oh=0,sE=function(e){return e&&(e.host||sE(e.parentNode))},q$=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=sE(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Q$=function(e,t,n,r){var s=q$(t,Array.isArray(e)?e:[e]);tu[n]||(tu[n]=new WeakMap);var o=tu[n],a=[],i=new Set,c=new Set(s),u=function(h){!h||i.has(h)||(i.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(p){if(i.has(p))d(p);else try{var m=p.getAttribute(r),w=m!==null&&m!=="false",v=(ha.get(p)||0)+1,y=(o.get(p)||0)+1;ha.set(p,v),o.set(p,y),a.push(p),v===1&&w&&eu.set(p,!0),y===1&&p.setAttribute(n,"true"),w||p.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",p,x)}})};return d(t),i.clear(),Oh++,function(){a.forEach(function(h){var p=ha.get(h)-1,m=o.get(h)-1;ha.set(h,p),o.set(h,m),p||(eu.has(h)||h.removeAttribute(r),eu.delete(h)),m||h.removeAttribute(n)}),Oh--,Oh||(ha=new WeakMap,ha=new WeakMap,eu=new WeakMap,tu={})}},vf=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=G$(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),Q$(r,s,n,"aria-hidden")):function(){return null}},kr=function(){return kr=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},kr.apply(this,arguments)};function oE(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function J$(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var ju="right-scroll-bar-position",Pu="width-before-scroll-bar",X$="with-scroll-bars-hidden",Z$="--removed-body-scroll-bar-size";function Ah(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function e4(e,t){var n=f.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var t4=typeof window<"u"?f.useLayoutEffect:f.useEffect,Ow=new WeakMap;function n4(e,t){var n=e4(null,function(r){return e.forEach(function(s){return Ah(s,r)})});return t4(function(){var r=Ow.get(n);if(r){var s=new Set(r),o=new Set(e),a=n.current;s.forEach(function(i){o.has(i)||Ah(i,null)}),o.forEach(function(i){s.has(i)||Ah(i,a)})}Ow.set(n,e)},[e]),n}function r4(e){return e}function s4(e,t){t===void 0&&(t=r4);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var a=t(o,r);return n.push(a),function(){n=n.filter(function(i){return i!==a})}},assignSyncMedium:function(o){for(r=!0;n.length;){var a=n;n=[],a.forEach(o)}n={push:function(i){return o(i)},filter:function(){return n}}},assignMedium:function(o){r=!0;var a=[];if(n.length){var i=n;n=[],i.forEach(o),a=n}var c=function(){var d=a;a=[],d.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),n}}}};return s}function o4(e){e===void 0&&(e={});var t=s4(null);return t.options=kr({async:!0,ssr:!1},e),t}var aE=function(e){var t=e.sideCar,n=oE(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,kr({},n))};aE.isSideCarExport=!0;function a4(e,t){return e.useMedium(t),aE}var iE=o4(),Mh=function(){},yf=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:Mh,onWheelCapture:Mh,onTouchMoveCapture:Mh}),s=r[0],o=r[1],a=e.forwardProps,i=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,p=e.sideCar,m=e.noRelative,w=e.noIsolation,v=e.inert,y=e.allowPinchZoom,x=e.as,g=x===void 0?"div":x,b=e.gapMode,S=oE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=p,C=n4([n,t]),N=kr(kr({},S),s);return f.createElement(f.Fragment,null,d&&f.createElement(_,{sideCar:iE,removeScrollBar:u,shards:h,noRelative:m,noIsolation:w,inert:v,setCallbacks:o,allowPinchZoom:!!y,lockRef:n,gapMode:b}),a?f.cloneElement(f.Children.only(i),kr(kr({},N),{ref:C})):f.createElement(g,kr({},N,{className:c,ref:C}),i))});yf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yf.classNames={fullWidth:Pu,zeroRight:ju};var i4=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function l4(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=i4();return t&&e.setAttribute("nonce",t),e}function c4(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function u4(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var d4=function(){var e=0,t=null;return{add:function(n){e==0&&(t=l4())&&(c4(t,n),u4(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},f4=function(){var e=d4();return function(t,n){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},lE=function(){var e=f4(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},h4={left:0,top:0,right:0,gap:0},Dh=function(e){return parseInt(e||"",10)||0},p4=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Dh(n),Dh(r),Dh(s)]},m4=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return h4;var t=p4(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},g4=lE(),Ha="data-scroll-locked",v4=function(e,t,n,r){var s=e.left,o=e.top,a=e.right,i=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(X$,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(i,"px ").concat(r,`;
  }
  body[`).concat(Ha,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(i,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ju,` {
    right: `).concat(i,"px ").concat(r,`;
  }
  
  .`).concat(Pu,` {
    margin-right: `).concat(i,"px ").concat(r,`;
  }
  
  .`).concat(ju," .").concat(ju,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Pu," .").concat(Pu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ha,`] {
    `).concat(Z$,": ").concat(i,`px;
  }
`)},Aw=function(){var e=parseInt(document.body.getAttribute(Ha)||"0",10);return isFinite(e)?e:0},y4=function(){f.useEffect(function(){return document.body.setAttribute(Ha,(Aw()+1).toString()),function(){var e=Aw()-1;e<=0?document.body.removeAttribute(Ha):document.body.setAttribute(Ha,e.toString())}},[])},w4=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;y4();var o=f.useMemo(function(){return m4(s)},[s]);return f.createElement(g4,{styles:v4(o,!t,s,n?"":"!important")})},_m=!1;if(typeof window<"u")try{var nu=Object.defineProperty({},"passive",{get:function(){return _m=!0,!0}});window.addEventListener("test",nu,nu),window.removeEventListener("test",nu,nu)}catch{_m=!1}var pa=_m?{passive:!1}:!1,x4=function(e){return e.tagName==="TEXTAREA"},cE=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!x4(e)&&n[t]==="visible")},b4=function(e){return cE(e,"overflowY")},S4=function(e){return cE(e,"overflowX")},Mw=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=uE(e,r);if(s){var o=dE(e,r),a=o[1],i=o[2];if(a>i)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},_4=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},E4=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},uE=function(e,t){return e==="v"?b4(t):S4(t)},dE=function(e,t){return e==="v"?_4(t):E4(t)},C4=function(e,t){return e==="h"&&t==="rtl"?-1:1},k4=function(e,t,n,r,s){var o=C4(e,window.getComputedStyle(t).direction),a=o*r,i=n.target,c=t.contains(i),u=!1,d=a>0,h=0,p=0;do{if(!i)break;var m=dE(e,i),w=m[0],v=m[1],y=m[2],x=v-y-o*w;(w||x)&&uE(e,i)&&(h+=x,p+=w);var g=i.parentNode;i=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!c&&i!==document.body||c&&(t.contains(i)||t===i));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(p)<1||!s))&&(u=!0),u},ru=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Dw=function(e){return[e.deltaX,e.deltaY]},Lw=function(e){return e&&"current"in e?e.current:e},N4=function(e,t){return e[0]===t[0]&&e[1]===t[1]},j4=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},P4=0,ma=[];function T4(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),s=f.useState(P4++)[0],o=f.useState(lE)[0],a=f.useRef(e);f.useEffect(function(){a.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var v=J$([e.lockRef.current],(e.shards||[]).map(Lw),!0).filter(Boolean);return v.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var i=f.useCallback(function(v,y){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var x=ru(v),g=n.current,b="deltaX"in v?v.deltaX:g[0]-x[0],S="deltaY"in v?v.deltaY:g[1]-x[1],_,C=v.target,N=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in v&&N==="h"&&C.type==="range")return!1;var T=Mw(N,C);if(!T)return!0;if(T?_=N:(_=N==="v"?"h":"v",T=Mw(N,C)),!T)return!1;if(!r.current&&"changedTouches"in v&&(b||S)&&(r.current=_),!_)return!0;var L=r.current||_;return k4(L,y,v,L==="h"?b:S,!0)},[]),c=f.useCallback(function(v){var y=v;if(!(!ma.length||ma[ma.length-1]!==o)){var x="deltaY"in y?Dw(y):ru(y),g=t.current.filter(function(_){return _.name===y.type&&(_.target===y.target||y.target===_.shadowParent)&&N4(_.delta,x)})[0];if(g&&g.should){y.cancelable&&y.preventDefault();return}if(!g){var b=(a.current.shards||[]).map(Lw).filter(Boolean).filter(function(_){return _.contains(y.target)}),S=b.length>0?i(y,b[0]):!a.current.noIsolation;S&&y.cancelable&&y.preventDefault()}}},[]),u=f.useCallback(function(v,y,x,g){var b={name:v,delta:y,target:x,should:g,shadowParent:R4(x)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(S){return S!==b})},1)},[]),d=f.useCallback(function(v){n.current=ru(v),r.current=void 0},[]),h=f.useCallback(function(v){u(v.type,Dw(v),v.target,i(v,e.lockRef.current))},[]),p=f.useCallback(function(v){u(v.type,ru(v),v.target,i(v,e.lockRef.current))},[]);f.useEffect(function(){return ma.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,pa),document.addEventListener("touchmove",c,pa),document.addEventListener("touchstart",d,pa),function(){ma=ma.filter(function(v){return v!==o}),document.removeEventListener("wheel",c,pa),document.removeEventListener("touchmove",c,pa),document.removeEventListener("touchstart",d,pa)}},[]);var m=e.removeScrollBar,w=e.inert;return f.createElement(f.Fragment,null,w?f.createElement(o,{styles:j4(s)}):null,m?f.createElement(w4,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function R4(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const I4=a4(iE,T4);var yc=f.forwardRef(function(e,t){return f.createElement(yf,kr({},e,{ref:t,sideCar:I4}))});yc.classNames=yf.classNames;var wf="Popover",[fE,wz]=Kt(wf,[ao]),wc=ao(),[O4,co]=fE(wf),hE=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:a=!1}=e,i=wc(t),c=f.useRef(null),[u,d]=f.useState(!1),[h,p]=as({prop:r,defaultProp:s??!1,onChange:o,caller:wf});return l.jsx(dv,{...i,children:l.jsx(O4,{scope:t,contentId:Tr(),triggerRef:c,open:h,onOpenChange:p,onOpenToggle:f.useCallback(()=>p(m=>!m),[p]),hasCustomAnchor:u,onCustomAnchorAdd:f.useCallback(()=>d(!0),[]),onCustomAnchorRemove:f.useCallback(()=>d(!1),[]),modal:a,children:n})})};hE.displayName=wf;var pE="PopoverAnchor",A4=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=co(pE,n),o=wc(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:i}=s;return f.useEffect(()=>(a(),()=>i()),[a,i]),l.jsx(uc,{...o,...r,ref:t})});A4.displayName=pE;var mE="PopoverTrigger",gE=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=co(mE,n),o=wc(n),a=Ce(t,s.triggerRef),i=l.jsx(fe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":bE(s.open),...r,ref:a,onClick:Q(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?i:l.jsx(uc,{asChild:!0,...o,children:i})});gE.displayName=mE;var Rv="PopoverPortal",[M4,D4]=fE(Rv,{forceMount:void 0}),vE=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,o=co(Rv,t);return l.jsx(M4,{scope:t,forceMount:n,children:l.jsx(St,{present:n||o.open,children:l.jsx(bi,{asChild:!0,container:s,children:r})})})};vE.displayName=Rv;var hi="PopoverContent",yE=f.forwardRef((e,t)=>{const n=D4(hi,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,o=co(hi,e.__scopePopover);return l.jsx(St,{present:r||o.open,children:o.modal?l.jsx($4,{...s,ref:t}):l.jsx(F4,{...s,ref:t})})});yE.displayName=hi;var L4=eo("PopoverContent.RemoveScroll"),$4=f.forwardRef((e,t)=>{const n=co(hi,e.__scopePopover),r=f.useRef(null),s=Ce(t,r),o=f.useRef(!1);return f.useEffect(()=>{const a=r.current;if(a)return vf(a)},[]),l.jsx(yc,{as:L4,allowPinchZoom:!0,children:l.jsx(wE,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Q(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),o.current||(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:Q(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,c=i.button===0&&i.ctrlKey===!0,u=i.button===2||c;o.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Q(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),F4=f.forwardRef((e,t)=>{const n=co(hi,e.__scopePopover),r=f.useRef(!1),s=f.useRef(!1);return l.jsx(wE,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,i;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(r.current||(i=n.triggerRef.current)==null||i.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),wE=f.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=e,p=co(hi,n),m=wc(n);return gf(),l.jsx(vc,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:l.jsx(oa,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:d,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:l.jsx(uf,{"data-state":bE(p.open),role:"dialog",id:p.contentId,...m,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),xE="PopoverClose",U4=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=co(xE,n);return l.jsx(fe.button,{type:"button",...r,ref:t,onClick:Q(e.onClick,()=>s.onOpenChange(!1))})});U4.displayName=xE;var B4="PopoverArrow",W4=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=wc(n);return l.jsx(df,{...s,...r,ref:t})});W4.displayName=B4;function bE(e){return e?"open":"closed"}var z4=hE,H4=gE,V4=vE,SE=yE;const _E=z4,EE=H4,Iv=f.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},s)=>l.jsx(V4,{children:l.jsx(SE,{ref:s,align:t,sideOffset:n,className:ge("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Iv.displayName=SE.displayName;const We=f.forwardRef(({className:e,type:t,...n},r)=>l.jsx("input",{type:t,className:ge("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));We.displayName="Input";const ji=f.forwardRef(({className:e,...t},n)=>l.jsx("textarea",{className:ge("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));ji.displayName="Textarea";var Y4="Label",CE=f.forwardRef((e,t)=>l.jsx(fe.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));CE.displayName=Y4;var kE=CE;const K4=sf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Te=f.forwardRef(({className:e,...t},n)=>l.jsx(kE,{ref:n,className:ge(K4(),e),...t}));Te.displayName=kE.displayName;const G4=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>lo(async()=>{const{default:r}=await Promise.resolve().then(()=>Pi);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Ov extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class $w extends Ov{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Fw extends Ov{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Uw extends Ov{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Em;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Em||(Em={}));var q4=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(i,c)}u((r=r.apply(e,t||[])).next())})};class Q4{constructor(t,{headers:n={},customFetch:r,region:s=Em.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=G4(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return q4(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:o,method:a,body:i,signal:c}=r;let u={},{region:d}=r;d||(d=this.region);const h=new URL(`${this.url}/${n}`);d&&d!=="any"&&(u["x-region"]=d,h.searchParams.set("forceFunctionRegion",d));let p;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",p=i):typeof i=="string"?(u["Content-Type"]="text/plain",p=i):typeof FormData<"u"&&i instanceof FormData?p=i:(u["Content-Type"]="application/json",p=JSON.stringify(i)));const m=yield this.fetch(h.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),o),body:p,signal:c}).catch(x=>{throw x.name==="AbortError"?x:new $w(x)}),w=m.headers.get("x-relay-error");if(w&&w==="true")throw new Fw(m);if(!m.ok)throw new Uw(m);let v=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),y;return v==="application/json"?y=yield m.json():v==="application/octet-stream"?y=yield m.blob():v==="text/event-stream"?y=m:v==="multipart/form-data"?y=yield m.formData():y=yield m.text(),{data:y,error:null,response:m}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new $w(o)}:{data:null,error:o,response:o instanceof Uw||o instanceof Fw?o.context:void 0}}})}}var sn={},Av={},xf={},xc={},bf={},Sf={},J4=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},pi=J4();const X4=pi.fetch,NE=pi.fetch.bind(pi),jE=pi.Headers,Z4=pi.Request,eF=pi.Response,Pi=Object.freeze(Object.defineProperty({__proto__:null,Headers:jE,Request:Z4,Response:eF,default:NE,fetch:X4},Symbol.toStringTag,{value:"Module"})),tF=Jj(Pi);var _f={};Object.defineProperty(_f,"__esModule",{value:!0});let nF=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};_f.default=nF;var PE=$n&&$n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sf,"__esModule",{value:!0});const rF=PE(tF),sF=PE(_f);let oF=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=rF.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var a,i,c,u;let d=null,h=null,p=null,m=o.status,w=o.statusText;if(o.ok){if(this.method!=="HEAD"){const g=await o.text();g===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?h=g:h=JSON.parse(g))}const y=(i=this.headers.get("Prefer"))===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),x=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");y&&x&&x.length>1&&(p=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,m=406,w="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const y=await o.text();try{d=JSON.parse(y),Array.isArray(d)&&o.status===404&&(h=[],d=null,m=200,w="OK")}catch{o.status===404&&y===""?(m=204,w="No Content"):d={message:y}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,m=200,w="OK"),d&&this.shouldThrowOnError)throw new sF.default(d)}return{error:d,data:h,count:p,status:m,statusText:w}});return this.shouldThrowOnError||(s=s.catch(o=>{var a,i,c;return{error:{message:`${(a=o==null?void 0:o.name)!==null&&a!==void 0?a:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(i=o==null?void 0:o.stack)!==null&&i!==void 0?i:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Sf.default=oF;var aF=$n&&$n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bf,"__esModule",{value:!0});const iF=aF(Sf);let lF=class extends iF.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.order`:"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${i?`${i},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const o=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:o=!1,format:a="text"}={}){var i;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),u=(i=this.headers.get("Accept"))!==null&&i!==void 0?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};bf.default=lF;var cF=$n&&$n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xc,"__esModule",{value:!0});const uF=cF(bf);let dF=class extends uF.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};xc.default=dF;var fF=$n&&$n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xf,"__esModule",{value:!0});const Ki=fF(xc);let hF=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(t,n){const{head:r=!1,count:s}=n??{},o=r?"HEAD":"GET";let a=!1;const i=(t??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",i),s&&this.headers.append("Prefer",`count=${s}`),new Ki.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;const o="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((i,c)=>i.concat(Object.keys(c)),[]);if(a.length>0){const i=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",i.join(","))}}return new Ki.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:o=!0}={}){var a;const i="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ki.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Ki.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Ki.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};xf.default=hF;var TE=$n&&$n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Av,"__esModule",{value:!0});const pF=TE(xf),mF=TE(xc);let gF=class RE{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new pF.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new RE(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:o}={}){var a;let i;const c=new URL(`${this.url}/rpc/${t}`);let u;r||s?(i=r?"HEAD":"GET",Object.entries(n).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{c.searchParams.append(h,p)})):(i="POST",u=n);const d=new Headers(this.headers);return o&&d.set("Prefer",`count=${o}`),new mF.default({method:i,url:c,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Av.default=gF;var Ti=$n&&$n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sn,"__esModule",{value:!0});sn.PostgrestError=sn.PostgrestBuilder=sn.PostgrestTransformBuilder=sn.PostgrestFilterBuilder=sn.PostgrestQueryBuilder=sn.PostgrestClient=void 0;const IE=Ti(Av);sn.PostgrestClient=IE.default;const OE=Ti(xf);sn.PostgrestQueryBuilder=OE.default;const AE=Ti(xc);sn.PostgrestFilterBuilder=AE.default;const ME=Ti(bf);sn.PostgrestTransformBuilder=ME.default;const DE=Ti(Sf);sn.PostgrestBuilder=DE.default;const LE=Ti(_f);sn.PostgrestError=LE.default;var vF=sn.default={PostgrestClient:IE.default,PostgrestQueryBuilder:OE.default,PostgrestFilterBuilder:AE.default,PostgrestTransformBuilder:ME.default,PostgrestBuilder:DE.default,PostgrestError:LE.default};const{PostgrestClient:yF,PostgrestQueryBuilder:Cz,PostgrestFilterBuilder:kz,PostgrestTransformBuilder:Nz,PostgrestBuilder:jz,PostgrestError:Pz}=vF;class wF{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const xF="2.75.0",bF=`realtime-js/${xF}`,SF="1.0.0",Cm=1e4,_F=1e3,EF=100;var yl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(yl||(yl={}));var mt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(mt||(mt={}));var Xn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Xn||(Xn={}));var km;(function(e){e.websocket="websocket"})(km||(km={}));var Eo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Eo||(Eo={}));class CF{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),o=n.getUint8(2);let a=this.HEADER_LENGTH+2;const i=r.decode(t.slice(a,a+s));a=a+s;const c=r.decode(t.slice(a,a+o));a=a+o;const u=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:i,event:c,payload:u}}}class $E{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ye;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ye||(Ye={}));const Bw=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,a)=>(o[a]=kF(a,e,t,s),o),{}):{}},kF=(e,t,n,r)=>{const s=t.find(i=>i.name===e),o=s==null?void 0:s.type,a=n[e];return o&&!r.includes(o)?FE(o,a):Nm(a)},FE=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return TF(t,n)}switch(e){case Ye.bool:return NF(t);case Ye.float4:case Ye.float8:case Ye.int2:case Ye.int4:case Ye.int8:case Ye.numeric:case Ye.oid:return jF(t);case Ye.json:case Ye.jsonb:return PF(t);case Ye.timestamp:return RF(t);case Ye.abstime:case Ye.date:case Ye.daterange:case Ye.int4range:case Ye.int8range:case Ye.money:case Ye.reltime:case Ye.text:case Ye.time:case Ye.timestamptz:case Ye.timetz:case Ye.tsrange:case Ye.tstzrange:return Nm(t);default:return Nm(t)}},Nm=e=>e,NF=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},jF=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},PF=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},TF=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const a=e.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(i=>FE(t,i))}return e},RF=e=>typeof e=="string"?e.replace(" ","T"):e,UE=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Lh{constructor(t,n,r={},s=Cm){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ww;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ww||(Ww={}));class wl{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:a,onSync:i}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wl.syncState(this.state,s,o,a),this.pendingDiffs.forEach(c=>{this.state=wl.syncDiff(this.state,c,o,a)}),this.pendingDiffs=[],i()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:a,onSync:i}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=wl.syncDiff(this.state,s,o,a),i())}),this.onJoin((s,o,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:a})}),this.onLeave((s,o,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const o=this.cloneDeep(t),a=this.transformState(n),i={},c={};return this.map(o,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=o[u];if(h){const p=d.map(y=>y.presence_ref),m=h.map(y=>y.presence_ref),w=d.filter(y=>m.indexOf(y.presence_ref)<0),v=h.filter(y=>p.indexOf(y.presence_ref)<0);w.length>0&&(i[u]=w),v.length>0&&(c[u]=v)}else i[u]=d}),this.syncDiff(o,{joins:i,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(i,c)=>{var u;const d=(u=t[i])!==null&&u!==void 0?u:[];if(t[i]=this.cloneDeep(c),d.length>0){const h=t[i].map(m=>m.presence_ref),p=d.filter(m=>h.indexOf(m.presence_ref)<0);t[i].unshift(...p)}r(i,d,c)}),this.map(a,(i,c)=>{let u=t[i];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[i]=u,s(i,u,c),u.length===0&&delete t[i]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zw;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(zw||(zw={}));var xl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(xl||(xl={}));var Vr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Vr||(Vr={}));class Mv{constructor(t,n={config:{}},r){var s,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=mt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Lh(this,Xn.join,this.params,this.timeout),this.rejoinTimer=new $E(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=mt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xn.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new wl(this),this.broadcastEndpointURL=UE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==mt.closed){const{config:{broadcast:a,presence:i,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[xl.PRESENCE]&&this.bindings[xl.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},p={broadcast:a,presence:Object.assign(Object.assign({},i),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Vr.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Vr.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var w;if(this.socket.setAuth(),m===void 0){t==null||t(Vr.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,y=(w=v==null?void 0:v.length)!==null&&w!==void 0?w:0,x=[];for(let g=0;g<y;g++){const b=v[g],{filter:{event:S,schema:_,table:C,filter:N}}=b,T=m&&m[g];if(T&&T.event===S&&T.schema===_&&T.table===C&&T.filter===N)x.push(Object.assign(Object.assign({},b),{id:T.id}));else{this.unsubscribe(),this.state=mt.errored,t==null||t(Vr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Vr.SUBSCRIBED);return}}).receive("error",m=>{this.state=mt.errored,t==null||t(Vr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Vr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===mt.joined&&t===xl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,i,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(i=(a=this.params)===null||a===void 0?void 0:a.config)===null||i===void 0?void 0:i.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=mt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Lh(this,Xn.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=mt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Lh(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>EF){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,o;const a=t.toLocaleLowerCase(),{close:i,error:c,leave:u,join:d}=Xn;if(r&&[i,c,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let p=this._onMessage(a,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var w,v,y;return((w=m.filter)===null||w===void 0?void 0:w.event)==="*"||((y=(v=m.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===a}).map(m=>m.callback(p,r)):(o=this.bindings[a])===null||o===void 0||o.filter(m=>{var w,v,y,x,g,b;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const S=m.id,_=(w=m.filter)===null||w===void 0?void 0:w.event;return S&&((v=n.ids)===null||v===void 0?void 0:v.includes(S))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const S=(g=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return S==="*"||S===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof p=="object"&&"ids"in p){const w=p.data,{schema:v,table:y,commit_timestamp:x,type:g,errors:b}=w;p=Object.assign(Object.assign({},{schema:v,table:y,commit_timestamp:x,eventType:g,new:{},old:{},errors:b}),this._getPayloadRecords(w))}m.callback(p,r)})}_isClosed(){return this.state===mt.closed}_isJoined(){return this.state===mt.joined}_isJoining(){return this.state===mt.joining}_isLeaving(){return this.state===mt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Mv.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Xn.close,{},t)}_onError(t){this._on(Xn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Bw(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Bw(t.columns,t.old_record)),n}}const $h=()=>{},su={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},IF=[1e3,2e3,5e3,1e4],OF=1e4,AF=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class MF{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Cm,this.transport=null,this.heartbeatIntervalMs=su.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$h,this.ref=0,this.reconnectTimer=null,this.logger=$h,this.conn=null,this.sendBuffer=[],this.serializer=new CF,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>lo(async()=>{const{default:i}=await Promise.resolve().then(()=>Pi);return{default:i}},void 0).then(({default:i})=>i(...a)).catch(i=>{throw new Error(`Failed to load @supabase/node-fetch: ${i.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...a)=>o(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${km.websocket}`,this.httpEndpoint=UE(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=wF.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:SF}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case yl.connecting:return Eo.Connecting;case yl.open:return Eo.Open;case yl.closing:return Eo.Closing;default:return Eo.Closed}}isConnected(){return this.connectionState()===Eo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(o=>o.topic===r);if(s)return s;{const o=new Mv(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:r,payload:s,ref:o}=t,a=()=>{this.encode(t,i=>{var c;(c=this.conn)===null||c===void 0||c.send(i)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(_F,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},su.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:o,ref:a}=n,i=a?`(${a})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${s} ${i}`.trim(),o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Xn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([AF],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:bF};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Xn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new $E(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},su.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,o,a,i,c,u,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Cm,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:su.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(i=t==null?void 0:t.heartbeatCallback)!==null&&i!==void 0?i:$h,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>IF[h-1]||OF,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,p)=>p(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Dv extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function dt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class DF extends Dv{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class jm extends Dv{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var LF=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(i,c)}u((r=r.apply(e,t||[])).next())})};const BE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>lo(async()=>{const{default:r}=await Promise.resolve().then(()=>Pi);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},$F=()=>LF(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield lo(()=>Promise.resolve().then(()=>Pi),void 0)).Response:Response}),Pm=e=>{if(Array.isArray(e))return e.map(n=>Pm(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[s]=Pm(r)}),t},FF=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var ia=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(i,c)}u((r=r.apply(e,t||[])).next())})};const Fh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),UF=(e,t,n)=>ia(void 0,void 0,void 0,function*(){const r=yield $F();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const o=e.status||500,a=(s==null?void 0:s.statusCode)||o+"";t(new DF(Fh(s),o,a))}).catch(s=>{t(new jm(Fh(s),s))}):t(new jm(Fh(e),e))}),BF=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(FF(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function bc(e,t,n,r,s,o){return ia(this,void 0,void 0,function*(){return new Promise((a,i)=>{e(n,BF(t,r,s,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>UF(c,i,r))})})}function xd(e,t,n,r){return ia(this,void 0,void 0,function*(){return bc(e,"GET",t,n,r)})}function br(e,t,n,r,s){return ia(this,void 0,void 0,function*(){return bc(e,"POST",t,r,s,n)})}function Tm(e,t,n,r,s){return ia(this,void 0,void 0,function*(){return bc(e,"PUT",t,r,s,n)})}function WF(e,t,n,r){return ia(this,void 0,void 0,function*(){return bc(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function WE(e,t,n,r,s){return ia(this,void 0,void 0,function*(){return bc(e,"DELETE",t,r,s,n)})}var zF=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(i,c)}u((r=r.apply(e,t||[])).next())})};class HF{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return zF(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}}var VF=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(i,c)}u((r=r.apply(e,t||[])).next())})};class YF{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new HF(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return VF(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}}var Xt=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(i,c)}u((r=r.apply(e,t||[])).next())})};const KF={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class GF{constructor(t,n={},r,s){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=BE(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,s){return Xt(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},Hw),s);let i=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,i["cache-control"]=`max-age=${a.cacheControl}`,i["content-type"]=a.contentType,c&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(i=Object.assign(Object.assign({},i),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(t=="PUT"?Tm:br)(this.fetch,`${this.url}/object/${d}`,o,Object.assign({headers:i},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(dt(o))return{data:null,error:o};throw o}})}upload(t,n,r){return Xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Xt(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),a=this._getFinalPath(o),i=new URL(this.url+`/object/upload/sign/${a}`);i.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:Hw.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Tm(this.fetch,i.toString(),c,{headers:d});return{data:{path:o,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(dt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Xt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const o=yield br(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+o.url),i=a.searchParams.get("token");if(!i)throw new Dv("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:i},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Xt(this,void 0,void 0,function*(){try{return{data:yield br(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(dt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Xt(this,void 0,void 0,function*(){try{return{data:{path:(yield br(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(dt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Xt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),o=yield br(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(dt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Xt(this,void 0,void 0,function*(){try{const s=yield br(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(dt(s))return{data:null,error:s};throw s}})}download(t,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=o?`?${o}`:"",i=this._getFinalPath(t),c=()=>xd(this.fetch,`${this.url}/${s}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new YF(c,this.shouldThrowOnError)}info(t){return Xt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield xd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Pm(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}})}exists(t){return Xt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield WF(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r)&&r instanceof jm){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const i=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${u}`)}}}remove(t){return Xt(this,void 0,void 0,function*(){try{return{data:yield WE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Xt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},KF),n),{prefix:t||""});return{data:yield br(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(dt(s))return{data:null,error:s};throw s}})}listV2(t,n){return Xt(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield br(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const qF="2.75.0",QF={"X-Client-Info":`storage-js/${qF}`};var ga=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(i,c)}u((r=r.apply(e,t||[])).next())})};class JF{constructor(t,n={},r,s){this.shouldThrowOnError=!1;const o=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},QF),n),this.fetch=BE(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ga(this,void 0,void 0,function*(){try{return{data:yield xd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(dt(t))return{data:null,error:t};throw t}})}getBucket(t){return ga(this,void 0,void 0,function*(){try{return{data:yield xd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}})}createBucket(t){return ga(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield br(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(dt(s))return{data:null,error:s};throw s}})}updateBucket(t,n){return ga(this,void 0,void 0,function*(){try{return{data:yield Tm(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return ga(this,void 0,void 0,function*(){try{return{data:yield br(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return ga(this,void 0,void 0,function*(){try{return{data:yield WE(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}})}}class XF extends JF{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new GF(this.url,this.headers,t,this.fetch)}}const ZF="2.75.0";let rl="";typeof Deno<"u"?rl="deno":typeof document<"u"?rl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?rl="react-native":rl="node";const eU={"X-Client-Info":`supabase-js-${rl}/${ZF}`},tU={headers:eU},nU={schema:"public"},rU={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sU={};var oU=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(i,c)}u((r=r.apply(e,t||[])).next())})};const aU=e=>{let t;return e?t=e:typeof fetch>"u"?t=NE:t=fetch,(...n)=>t(...n)},iU=()=>typeof Headers>"u"?jE:Headers,lU=(e,t,n)=>{const r=aU(n),s=iU();return(o,a)=>oU(void 0,void 0,void 0,function*(){var i;const c=(i=yield t())!==null&&i!==void 0?i:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},a),{headers:u}))})};var cU=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(i,c)}u((r=r.apply(e,t||[])).next())})};function uU(e){return e.endsWith("/")?e:e+"/"}function dU(e,t){var n,r;const{db:s,auth:o,realtime:a,global:i}=e,{db:c,auth:u,realtime:d,global:h}=t,p={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),i),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=i==null?void 0:i.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>cU(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function fU(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(uU(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const zE="2.75.0",Sa=30*1e3,Rm=3,Uh=Rm*Sa,hU="http://localhost:9999",pU="supabase.auth.token",mU={"X-Client-Info":`gotrue-js/${zE}`},Im="X-Supabase-Api-Version",HE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vU=10*60*1e3;class Kl extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ve(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class yU extends Kl{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function wU(e){return ve(e)&&e.name==="AuthApiError"}class Co extends Kl{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class uo extends Kl{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class bs extends uo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xU(e){return ve(e)&&e.name==="AuthSessionMissingError"}class va extends uo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ou extends uo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class au extends uo{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function bU(e){return ve(e)&&e.name==="AuthImplicitGrantRedirectError"}class Vw extends uo{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Om extends uo{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Bh(e){return ve(e)&&e.name==="AuthRetryableFetchError"}class Yw extends uo{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Am extends uo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const bd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Kw=` 	
\r=`.split(""),SU=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Kw.length;t+=1)e[Kw[t].charCodeAt(0)]=-2;for(let t=0;t<bd.length;t+=1)e[bd[t].charCodeAt(0)]=t;return e})();function Gw(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(bd[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(bd[r]),t.queuedBits-=6}}function VE(e,t,n){const r=SU[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function qw(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=a=>{CU(a,r,n)};for(let a=0;a<e.length;a+=1)VE(e.charCodeAt(a),s,o);return t.join("")}function _U(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function EU(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}_U(r,t)}}function CU(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Va(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)VE(e.charCodeAt(s),n,r);return new Uint8Array(t)}function kU(e){const t=[];return EU(e,n=>t.push(n)),new Uint8Array(t)}function Po(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Gw(s,n,r)),Gw(null,n,r),t.join("")}function NU(e){return Math.round(Date.now()/1e3)+e}function jU(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const vn=()=>typeof window<"u"&&typeof document<"u",vo={tested:!1,writable:!1},YE=()=>{if(!vn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vo.tested)return vo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),vo.tested=!0,vo.writable=!0}catch{vo.tested=!0,vo.writable=!1}return vo.writable};function PU(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{t[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const KE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>lo(async()=>{const{default:r}=await Promise.resolve().then(()=>Pi);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},TU=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",_a=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},yo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ys=async(e,t)=>{await e.removeItem(t)};class Ef{constructor(){this.promise=new Ef.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ef.promiseConstructor=Promise;function Wh(e){const t=e.split(".");if(t.length!==3)throw new Am("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!gU.test(t[r]))throw new Am("JWT not in base64url format");return{header:JSON.parse(qw(t[0])),payload:JSON.parse(qw(t[1])),signature:Va(t[2]),raw:{header:t[0],payload:t[1]}}}async function RU(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function IU(e,t){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await e(o);if(!t(o,null,a)){r(a);return}}catch(a){if(!t(o,a)){s(a);return}}})()})}function OU(e){return("0"+e.toString(16)).substr(-2)}function AU(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,OU).join("")}async function MU(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function DU(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await MU(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ya(e,t,n=!1){const r=AU();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await _a(e,`${t}-code-verifier`,s);const o=await DU(r);return[o,r===o?"plain":"s256"]}const LU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $U(e){const t=e.headers.get(Im);if(!t||!t.match(LU))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function FU(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function UU(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const BU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wa(e){if(!BU.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function zh(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Qw(e){return JSON.parse(JSON.stringify(e))}var WU=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const So=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),zU=[502,503,504];async function Jw(e){var t;if(!TU(e))throw new Om(So(e),0);if(zU.includes(e.status))throw new Om(So(e),e.status);let n;try{n=await e.json()}catch(o){throw new Co(So(o),o)}let r;const s=$U(e);if(s&&s.getTime()>=HE["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Yw(So(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new bs}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new Yw(So(n),e.status,n.weak_password.reasons);throw new yU(So(n),e.status||500,r)}const HU=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ee(e,t,n,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[Im]||(o[Im]=HE["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const i=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await VU(e,t,n+i,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function VU(e,t,n,r,s,o){const a=HU(t,r,s,o);let i;try{i=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new Om(So(c),0)}if(i.ok||await Jw(i),r!=null&&r.noResolveJson)return i;try{return await i.json()}catch(c){await Jw(c)}}function Yn(e){var t;let n=null;GU(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=NU(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Xw(e){const t=Yn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ks(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function YU(e){return{data:e,error:null}}function KU(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=e,a=WU(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),i={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},c=Object.assign({},a);return{data:{properties:i,user:c},error:null}}function Zw(e){return e}function GU(e){return e.access_token&&e.refresh_token&&e.expires_in}const Hh=["global","local","others"];var qU=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class QU{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=KE(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Hh[0]){if(Hh.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Hh.join(", ")}`);try{return await Ee(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ks})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=qU(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:KU,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ve(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ee(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ks})}catch(n){if(ve(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,o,a,i,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Zw});if(d.error)throw d.error;const h=await d.json(),p=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(i=d.headers.get("link"))===null||i===void 0?void 0:i.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(w=>{const v=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(w.split(";")[1].split("=")[1]);u[`${y}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ve(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){wa(t);try{return await Ee(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ks})}catch(n){if(ve(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){wa(t);try{return await Ee(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:ks})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){wa(t);try{return await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:ks})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){wa(t.userId);try{const{data:n,error:r}=await Ee(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _deleteFactor(t){wa(t.userId),wa(t.id);try{return{data:await Ee(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,o,a,i,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ee(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Zw});if(d.error)throw d.error;const h=await d.json(),p=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(i=d.headers.get("link"))===null||i===void 0?void 0:i.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(w=>{const v=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(w.split(";")[1].split("=")[1]);u[`${y}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ve(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Ee(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Ee(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ee(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Ee(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ve(n))return{data:null,error:n};throw n}}}function ex(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const xa={debug:!!(globalThis&&YE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class GE extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class JU extends GE{}async function XU(e,t,n){xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),xa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new JU(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xa.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function ZU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function qE(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function e5(e){return parseInt(e,16)}function t5(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function n5(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:o=new Date,nonce:a,notBefore:i,requestId:c,resources:u,scheme:d,uri:h,version:p}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=qE(e.address),w=d?`${d}://${r}`:r,v=e.statement?`${e.statement}
`:"",y=`${w} wants you to sign in with your Ethereum account:
${m}

${v}`;let x=`URI: ${h}
Version: ${p}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(s&&(x+=`
Expiration Time: ${s.toISOString()}`),i&&(x+=`
Not Before: ${i.toISOString()}`),c&&(x+=`
Request ID: ${c}`),u){let g=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);g+=`
- ${b}`}x+=g}return`${y}
${x}`}class ut extends Error{constructor({message:t,code:n,cause:r,name:s}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=s??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Sd extends ut{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function r5({error:e,options:t}){var n,r,s;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ut({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ut({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ut({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ut({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ut({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ut({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(i=>i.type==="public-key").length===0?new ut({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ut({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(JE(a)){if(o.rp.id!==a)return new ut({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new ut({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ut({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function s5({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ut({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ut({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(JE(r)){if(n.rpId!==r)return new ut({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ut({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var QE=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class o5{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const a5=new o5;function i5(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=QE(e,["challenge","user","excludeCredentials"]),o=Va(t).buffer,a=Object.assign(Object.assign({},n),{id:Va(n.id).buffer}),i=Object.assign(Object.assign({},s),{challenge:o,user:a});if(r&&r.length>0){i.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];i.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Va(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return i}function l5(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=QE(e,["challenge","allowCredentials"]),s=Va(t).buffer,o=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const i=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},i),{id:Va(i.id).buffer,type:i.type||"public-key",transports:i.transports})}}return o}function c5(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Po(new Uint8Array(e.response.attestationObject)),clientDataJSON:Po(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function u5(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Po(new Uint8Array(s.authenticatorData)),clientDataJSON:Po(new Uint8Array(s.clientDataJSON)),signature:Po(new Uint8Array(s.signature)),userHandle:s.userHandle?Po(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function JE(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function tx(){var e,t;return!!(vn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function d5(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Sd("Browser returned unexpected credential type",t)}:{data:null,error:new Sd("Empty credential response",t)}}catch(t){return{data:null,error:r5({error:t,options:e})}}}async function f5(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Sd("Browser returned unexpected credential type",t)}:{data:null,error:new Sd("Empty credential response",t)}}catch(t){return{data:null,error:s5({error:t,options:e})}}}const h5={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},p5={userVerification:"preferred",hints:["security-key"]};function _d(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const o in s){const a=s[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(t(a)){const i=r[o];t(i)?r[o]=_d(i,a):r[o]=_d(a)}else r[o]=a}return r}function m5(e,t){return _d(h5,e,t||{})}function g5(e,t){return _d(p5,e,t||{})}class v5{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},o){try{const{data:a,error:i}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:i};const c=s??a5.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=m5(a.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:d,error:h}=await d5({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=g5(a.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:d,error:h}=await f5(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return ve(a)?{data:null,error:a}:{data:null,error:new Co("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},o){if(!n)return{data:null,error:new Kl("rpId is required for WebAuthn authentication")};try{if(!tx())return{data:null,error:new Co("Browser does not support WebAuthn",null)};const{data:a,error:i}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:o});if(!a)return{data:null,error:i};const{webauthn:c}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(a){return ve(a)?{data:null,error:a}:{data:null,error:new Co("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},o){if(!n)return{data:null,error:new Kl("rpId is required for WebAuthn registration")};try{if(!tx())return{data:null,error:new Co("Browser does not support WebAuthn",null)};const{data:a,error:i}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:i};const{data:c,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:o});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(a){return ve(a)?{data:null,error:a}:{data:null,error:new Co("Unexpected error in register",a)}}}}ZU();const y5={url:hU,storageKey:pU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function nx(e,t,n){return await n()}const ba={};class Gl{get jwks(){var t,n;return(n=(t=ba[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){ba[this.storageKey]=Object.assign(Object.assign({},ba[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=ba[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ba[this.storageKey]=Object.assign(Object.assign({},ba[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Gl.nextInstanceID,Gl.nextInstanceID+=1,this.instanceID>0&&vn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},y5),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new QU({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=KE(s.fetch),this.lock=s.lock||nx,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:vn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=XU:this.lock=nx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new v5(this)},this.persistSession?(s.storage?this.storage=s.storage:YE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ex(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=ex(this.memoryStorage)),vn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${zE}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=PU(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),vn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),bU(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ve(n)?{error:n}:{error:new Co("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const o=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Yn}),{data:a,error:i}=o;if(i||!a)return{data:{user:null,session:null},error:i};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(ve(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var n,r,s;try{let o;if("email"in t){const{email:d,password:h,options:p}=t;let m=null,w=null;this.flowType==="pkce"&&([m,w]=await ya(this.storage,this.storageKey)),o=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:w},xform:Yn})}else if("phone"in t){const{phone:d,password:h,options:p}=t;o=await Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Yn})}else throw new ou("You must provide either an email or phone number and a password");const{data:a,error:i}=o;if(i||!a)return{data:{user:null,session:null},error:i};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(ve(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:a,options:i}=t;n=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Xw})}else if("phone"in t){const{phone:o,password:a,options:i}=t;n=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Xw})}else throw new ou("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new va}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(ve(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,o,a,i,c,u,d,h,p;let m,w;if("message"in t)m=t.message,w=t.signature;else{const{chain:v,wallet:y,statement:x,options:g}=t;let b;if(vn())if(typeof y=="object")b=y;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")b=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=y}const S=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),_=await b.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=qE(_[0]);let N=(r=g==null?void 0:g.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!N){const L=await b.request({method:"eth_chainId"});N=e5(L)}const T={domain:S.host,address:C,statement:x,uri:S.href,version:"1",chainId:N,nonce:(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(o=g==null?void 0:g.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.expirationTime,notBefore:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=n5(T),w=await b.request({method:"personal_sign",params:[t5(m),C]})}try{const{data:v,error:y}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:w},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Yn});if(y)throw y;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new va}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:y})}catch(v){if(ve(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(t){var n,r,s,o,a,i,c,u,d,h,p,m;let w,v;if("message"in t)w=t.message,v=t.signature;else{const{chain:y,wallet:x,statement:g,options:b}=t;let S;if(vn())if(typeof x=="object")S=x;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))S=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=x}const _=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const C=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),g?{statement:g}:null));let N;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")N=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)N=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)w=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),v=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${_.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const C=await S.signMessage(new TextEncoder().encode(w),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=C}}try{const{data:y,error:x}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Po(v)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Yn});if(x)throw x;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new va}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:x})}catch(y){if(ve(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(t){const n=await yo(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:o,error:a}=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Yn});if(await ys(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new va}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(ve(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:o,nonce:a}=t,i=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Yn}),{data:c,error:u}=i;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new va}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(ve(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,o,a;try{if("email"in t){const{email:i,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ya(this.storage,this.storageKey));const{error:h}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:i,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:i,options:c}=t,{data:u,error:d}=await Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:i,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new ou("You must provide either an email or phone number.")}catch(i){if(ve(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(t){var n,r;try{let s,o;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:i}=await Ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Yn});if(i)throw i;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(ve(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=await ya(this.storage,this.storageKey)),await Ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:YU})}catch(o){if(ve(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new bs;const{error:s}=await Ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(ve(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:o}=t,{error:a}=await Ee(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:s,options:o}=t,{data:a,error:i}=await Ee(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:i}}throw new ou("You must provide either an email or phone number and a type")}catch(n){if(ve(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await yo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Uh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const a=await yo(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=zh()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{data:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ks}):await this._useSession(async n=>{var r,s,o;const{data:a,error:i}=n;if(i)throw i;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bs}:await Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:ks})})}catch(n){if(ve(n))return xU(n)&&(await this._removeSession(),await ys(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new bs;const a=s.session;let i=null,c=null;this.flowType==="pkce"&&t.email!=null&&([i,c]=await ya(this.storage,this.storageKey));const{data:u,error:d}=await Ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:i,code_challenge_method:c}),jwt:a.access_token,xform:ks});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new bs;const n=Date.now()/1e3;let r=n,s=!0,o=null;const{payload:a}=Wh(t.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{data:i,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!i)return{data:{user:null,session:null},error:null};o=i}else{const{data:i,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:i.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(ve(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:i}=n;if(i)throw i;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new bs;const{data:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ve(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!vn())throw new au("No browser detected.");if(t.error||t.error_description||t.error_code)throw new au(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Vw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new au("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Vw("No code detected.");const{data:g,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:i,expires_at:c,token_type:u}=t;if(!o||!i||!a||!u)throw new au("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(i);let p=d+h;c&&(p=parseInt(c));const m=p-d;m*1e3<=Sa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const w=p-h;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,p,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,p,d);const{data:v,error:y}=await this._getUser(o);if(y)throw y;const x={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:h,expires_at:p,refresh_token:a,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(r){if(ve(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await yo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{error:o};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:i}=await this.admin.signOut(a,t);if(i&&!(wU(i)&&(i.status===404||i.status===401||i.status===403)))return{error:i}}return t!=="others"&&(await this._removeSession(),await ys(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=jU(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await ya(this.storage,this.storageKey,!0));try{return await Ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(ve(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var a,i,c,u,d;const{data:h,error:p}=o;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ee(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return vn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ve(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:o}}=n;if(s)throw s;const{options:a,provider:i,token:c,access_token:u,nonce:d}=t,h=await Ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:i,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Yn}),{data:p,error:m}=h;return m?{data:{user:null,session:null},error:m}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new va}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),{data:p,error:m})}catch(s){if(ve(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:o,error:a}=n;if(a)throw a;return await Ee(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await IU(async s=>(s>0&&await RU(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Yn})),(s,o)=>{const a=200*Math.pow(2,s);return o&&Bh(o)&&Date.now()+a-r<Sa})}catch(r){if(this._debug(n,"error",r),ve(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),vn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await yo(this.storage,this.storageKey);if(s&&this.userStorage){let a=await yo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await _a(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:zh()}else if(s&&!s.user&&!s.user){const a=await yo(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await ys(this.storage,this.storageKey+"-user"),await _a(this.storage,this.storageKey,s)):s.user=zh()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const o=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Uh;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Uh}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Bh(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:i}=await this._getUser(s.access_token);!i&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new bs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ef;const{data:o,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new bs;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const i={data:o.session,error:null};return this.refreshingDeferred.resolve(i),i}catch(o){if(this._debug(s,"error",o),ve(o)){const a={data:null,error:o};return Bh(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async i=>{try{await i.callback(t,n)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let i=0;i<o.length;i+=1)console.error(o[i]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await _a(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const o=Qw(s);await _a(this.storage,this.storageKey,o)}else{const s=Qw(n);await _a(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await ys(this.storage,this.storageKey),await ys(this.storage,this.storageKey+"-code-verifier"),await ys(this.storage,this.storageKey+"-user"),this.userStorage&&await ys(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&vn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Sa);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Sa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Sa}ms, refresh threshold is ${Rm} ticks`),s<=Rm&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof GE)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!vn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await ya(this.storage,this.storageKey),i=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(i.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Ee(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:o,error:a}=n;if(a)return{data:null,error:a};const i=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Ee(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?c5(t.webauthn.credential_response):u5(t.webauthn.credential_response)})}:{code:t.code}),{data:i,error:c}=await Ee(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:c})})}catch(n){if(ve(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=await Ee(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:i}=a;if(i.type!=="webauthn")return{data:i,error:null};switch(i.webauthn.type){case"create":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:i5(i.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:l5(i.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ve(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:o}=t;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Wh(s.access_token);let i=null;a.aal&&(i=a.aal);let c=i;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:i,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(i=>i.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(i=>i.kid===t),r&&this.jwks_cached_at+vU>s)return r;const{data:o,error:a}=await Ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,r=o.keys.find(i=>i.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:w}=await this.getSession();if(w||!m.session)return{data:null,error:w};r=m.session.access_token}const{header:s,payload:o,signature:a,raw:{header:i,payload:c}}=Wh(r);n!=null&&n.allowExpired||FU(o.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:o,header:s,signature:a},error:null}}const d=UU(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,kU(`${i}.${c}`)))throw new Am("Invalid JWT signature");return{data:{claims:o,header:s,signature:a},error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}}}Gl.nextInstanceID=0;const w5=Gl;class x5 extends w5{constructor(t){super(t)}}var b5=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(i,c)}u((r=r.apply(e,t||[])).next())})};class S5{constructor(t,n,r){var s,o,a;this.supabaseUrl=t,this.supabaseKey=n;const i=fU(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const c=`sb-${i.hostname.split(".")[0]}-auth-token`,u={db:nU,realtime:sU,auth:Object.assign(Object.assign({},rU),{storageKey:c}),global:tU},d=dU(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=d.global.headers)!==null&&o!==void 0?o:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=lU(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new yF(new URL("rest/v1",i).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new XF(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Q4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return b5(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:o,storageKey:a,flowType:i,lock:c,debug:u},d,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new x5({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:a,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:o,flowType:i,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new MF(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const XE=(e,t,n)=>new S5(e,t,n);function _5(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}_5()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const E5="https://mmrmjmgezsuanxccjkgv.supabase.co",C5="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1tcm1qbWdlenN1YW54Y2Nqa2d2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1Mjk1OTEsImV4cCI6MjA3NTEwNTU5MX0.EqnbVp3o2DV1DT7yGiGZNEnjUiHyDxuyJLxWh-2oXxQ",ce=XE(E5,C5),bl="user_wishlist",ZE=e=>{var n;const t={...e.snapshot,id:((n=e.snapshot)==null?void 0:n.id)??e.couch_id};return{id:e.id,userKey:e.user_key,couchId:t.id,storageId:e.couch_id,snapshot:t,createdAt:e.created_at}},eC=e=>e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)?e:null,k5=e=>{const t=typeof TextEncoder<"u"?new TextEncoder:null,n=t?Array.from(t.encode(e)):Array.from(e).map(o=>o.charCodeAt(0)&255);if(!n.length)return"00000000-0000-0000-0000-000000000000";const r=n.map(o=>o.toString(16).padStart(2,"0")).join(""),s=(r.length>=32?r.slice(0,32):r.padEnd(32,"0")).toLowerCase();return`${s.slice(0,8)}-${s.slice(8,12)}-${s.slice(12,16)}-${s.slice(16,20)}-${s.slice(20,32)}`},Lv=e=>{const t=eC(e);return t||k5(e)},Ed=Lv,N5=20,$v=(e,t)=>{var s,o;const n=((s=t==null?void 0:t.user)==null?void 0:s.id)??(e==null?void 0:e.id)??null,r=eC(n);return r||(((o=t==null?void 0:t.user)==null?void 0:o.email)??(e==null?void 0:e.email)??null)},Cd=async e=>{if(!e)return[];try{const{data:t,error:n}=await ce.from(bl).select("*").eq("user_key",e).order("created_at",{ascending:!1});if(n)throw n;return(t??[]).map(ZE)}catch(t){throw console.error("Failed to fetch wishlist from Supabase",t),t}},tC=async(e,t,n)=>{if(!e)return null;const r=Lv(t),{data:s,error:o}=await ce.from(bl).select("*").eq("user_key",e).eq("couch_id",r).maybeSingle();if(o)throw o;if(s)throw new Error("This couch is already in your wishlist.");const{count:a,error:i}=await ce.from(bl).select("id",{count:"exact",head:!0}).eq("user_key",e);if(i)throw console.error("Failed to count wishlist items",i),i;if((a??0)>=N5)throw new Error("You can save up to 20 couches. Remove one to add more.");const c={user_key:e,couch_id:r,snapshot:n};try{const{data:u,error:d}=await ce.from(bl).insert(c).select("*").single();if(d)throw d;const h=ZE(u);return h.snapshot.id||(h.snapshot.id=t),h.couchId=h.snapshot.id,typeof window<"u"&&window.dispatchEvent(new Event("wishlist-updated")),h}catch(u){throw console.error("Supabase wishlist upsert failed",u),u}},Fv=async(e,t)=>{if(!e)return;const n=Lv(t);try{const{error:r}=await ce.from(bl).delete().eq("user_key",e).eq("couch_id",n);if(r)throw r}catch(r){throw console.error("Supabase wishlist remove failed",r),r}typeof window<"u"&&window.dispatchEvent(new Event("wishlist-updated"))},Tu=new Map,nC="geocode:",j5=(e,t)=>{try{if(typeof window>"u")return;window.localStorage.setItem(nC+e,JSON.stringify(t))}catch(n){console.warn("Unable to persist geocode cache",n)}},P5=e=>{if(Tu.has(e))return Tu.get(e)??null;try{if(typeof window>"u")return null;const t=window.localStorage.getItem(nC+e);if(!t)return null;const n=JSON.parse(t);if(n&&typeof n.lat=="number"&&typeof n.lng=="number"&&typeof n.displayName=="string")return Tu.set(e,n),n}catch(t){console.warn("Unable to read geocode cache",t)}return null},T5=e=>e.trim().toLowerCase(),rC=async(e,t)=>{const n=await fetch(e,{headers:{"Accept-Language":"en","User-Agent":"student-couch-app/1.0 (support@studentcouch.example)"},...t});if(!n.ok)throw new Error(`Geocoding request failed (${n.status})`);return n.json()},R5=async e=>{if(!(e!=null&&e.trim()))return null;const t=T5(e),n=P5(t);if(n)return n;const r=new URLSearchParams({q:e,format:"json",addressdetails:"1",limit:"1"}),s=await rC(`https://nominatim.openstreetmap.org/search?${r.toString()}`);if(!Array.isArray(s)||s.length===0)return null;const o=s[0],a=Number.parseFloat(o.lat),i=Number.parseFloat(o.lon);if(Number.isNaN(a)||Number.isNaN(i))return null;const c={lat:a,lng:i,displayName:o.display_name};return Tu.set(t,c),j5(t,c),c},I5=async(e,{signal:t}={})=>{const n=e.trim();if(!n)return[];const r=new URLSearchParams({q:n,format:"json",addressdetails:"1",limit:"5",autocomplete:"1"}),s=await rC(`https://nominatim.openstreetmap.org/search?${r.toString()}`,{signal:t});return Array.isArray(s)?s.map(o=>{const a=Number.parseFloat(o.lat),i=Number.parseFloat(o.lon);return Number.isNaN(a)||Number.isNaN(i)?null:{lat:a,lng:i,displayName:o.display_name}}).filter(o=>!!o):[]},O5="https://mmrmjmgezsuanxccjkgv.supabase.co",A5="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1tcm1qbWdlenN1YW54Y2Nqa2d2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1Mjk1OTEsImV4cCI6MjA3NTEwNTU5MX0.EqnbVp3o2DV1DT7yGiGZNEnjUiHyDxuyJLxWh-2oXxQ",sC=XE(O5,A5,{auth:{persistSession:!1,autoRefreshToken:!1}}),Jr=e=>{var t,n;return{id:e.id,hostId:e.host_id,hostName:((t=e.availability_json)==null?void 0:t.hostName)??null,hostEmail:((n=e.availability_json)==null?void 0:n.hostEmail)??null,title:e.title??"New Listing",image:e.image_url,price:e.price_per_night,location:e.location,description:e.description,availability:e.availability_json??null,createdAt:e.created_at}},rx=e=>{if(!e)return!1;const t=e.trim();return t?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t):!1},iu=()=>sC.from("user_listings").select("*").order("created_at",{ascending:!1}),Vh=e=>{if(!e)return null;const t=e.trim();return t.length?t:null},M5=async()=>{const{data:e,error:t}=await sC.from("user_listings").select("*").order("created_at",{ascending:!1});if(t)throw t;return(e??[]).map(Jr)},D5=async e=>{const{data:t,error:n}=await ce.from("user_listings").select("*").eq("id",e).maybeSingle();if(n)throw n;return t?Jr(t):null},Yh=async({listingId:e,hostEmail:t,hostName:n})=>{const r=Vh(e),s=Vh(t),o=Vh(n);if(r&&rx(r)){const a=await D5(r);if(a)return a}if(r&&!rx(r))try{const{data:a,error:i}=await iu().eq("id",r).limit(1).maybeSingle();if(i)throw i;if(a)return Jr(a)}catch(a){console.warn("Failed to fetch listing by non-uuid id",a)}if(s){const a=await iu().eq("availability_json->>hostEmail",s).limit(1).maybeSingle();if(a.error)throw a.error;if(a.data)return Jr(a.data);const i=await iu().ilike("availability_json->>hostEmail",`%${s}%`).limit(1).maybeSingle();if(i.error)throw i.error;if(i.data)return Jr(i.data)}if(o){const{data:a,error:i}=await iu().ilike("availability_json->>hostName",`%${o}%`).limit(1).maybeSingle();if(i)throw i;if(a)return Jr(a)}return null},L5=async e=>{const{data:t,error:n}=await ce.from("user_listings").select("*").eq("host_id",e).order("created_at",{ascending:!1});if(n)throw n;return(t??[]).map(Jr)},Mm=async e=>{const t={id:e.id,host_id:e.hostId,title:e.title,image_url:e.imageUrl,price_per_night:e.pricePerNight,location:e.location,description:e.description,availability_json:{...e.availability,hostName:e.hostName,hostEmail:e.hostEmail}},{data:n,error:r}=await ce.from("user_listings").upsert(t,{onConflict:"id"}).select("*").single();if(r)throw r;return Jr(n)},$5=async(e,t)=>{const{data:n,error:r}=await ce.from("user_listings").select("*").eq("id",e).single();if(r)throw r;if(!n)throw new Error("Listing not found.");const s={...n.availability_json??{},published:t},{data:o,error:a}=await ce.from("user_listings").update({availability_json:s}).eq("id",e).select("*").single();if(a)throw a;return Jr(o)},Gi={countries:["Switzerland"],citiesByCountry:{Switzerland:["Zurich","Geneva","Lausanne","Basel","Bern","Winterthur","Lucerne","St. Gallen","Lugano","Biel/Bienne","Thun","La Chaux-de-Fonds"]}},F5={lausanne:["lausanne","renens","crissier","ecublens","epalinges","pully","lutry","morges","prilly","romanel","savigny","bussigny","oreges","st-sulpice"]};function Dm(e,[t,n]){return Math.min(n,Math.max(t,e))}var U5=f.createContext(void 0);function Sc(e){const t=f.useContext(U5);return e||t||"ltr"}function Uv(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var B5=[" ","Enter","ArrowUp","ArrowDown"],W5=[" ","Enter"],Zo="Select",[Cf,kf,z5]=tf(Zo),[Ri,Tz]=Kt(Zo,[z5,ao]),Nf=ao(),[H5,fo]=Ri(Zo),[V5,Y5]=Ri(Zo),oC=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:o,value:a,defaultValue:i,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:p,required:m,form:w}=e,v=Nf(t),[y,x]=f.useState(null),[g,b]=f.useState(null),[S,_]=f.useState(!1),C=Sc(u),[N,T]=as({prop:r,defaultProp:s??!1,onChange:o,caller:Zo}),[L,$]=as({prop:a,defaultProp:i,onChange:c,caller:Zo}),V=f.useRef(null),F=y?w||!!y.closest("form"):!0,[O,j]=f.useState(new Set),z=Array.from(O).map(A=>A.props.value).join(";");return l.jsx(dv,{...v,children:l.jsxs(H5,{required:m,scope:t,trigger:y,onTriggerChange:x,valueNode:g,onValueNodeChange:b,valueNodeHasChildren:S,onValueNodeHasChildrenChange:_,contentId:Tr(),value:L,onValueChange:$,open:N,onOpenChange:T,dir:C,triggerPointerDownPosRef:V,disabled:p,children:[l.jsx(Cf.Provider,{scope:t,children:l.jsx(V5,{scope:e.__scopeSelect,onNativeOptionAdd:f.useCallback(A=>{j(M=>new Set(M).add(A))},[]),onNativeOptionRemove:f.useCallback(A=>{j(M=>{const E=new Set(M);return E.delete(A),E})},[]),children:n})}),F?l.jsxs(PC,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:L,onChange:A=>$(A.target.value),disabled:p,form:w,children:[L===void 0?l.jsx("option",{value:""}):null,Array.from(O)]},z):null]})})};oC.displayName=Zo;var aC="SelectTrigger",iC=f.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,o=Nf(n),a=fo(aC,n),i=a.disabled||r,c=Ce(t,a.onTriggerChange),u=kf(n),d=f.useRef("touch"),[h,p,m]=RC(v=>{const y=u().filter(b=>!b.disabled),x=y.find(b=>b.value===a.value),g=IC(y,v,x);g!==void 0&&a.onValueChange(g.value)}),w=v=>{i||(a.onOpenChange(!0),m()),v&&(a.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return l.jsx(uc,{asChild:!0,...o,children:l.jsx(fe.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":TC(a.value)?"":void 0,...s,ref:c,onClick:Q(s.onClick,v=>{v.currentTarget.focus(),d.current!=="mouse"&&w(v)}),onPointerDown:Q(s.onPointerDown,v=>{d.current=v.pointerType;const y=v.target;y.hasPointerCapture(v.pointerId)&&y.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(w(v),v.preventDefault())}),onKeyDown:Q(s.onKeyDown,v=>{const y=h.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&p(v.key),!(y&&v.key===" ")&&B5.includes(v.key)&&(w(),v.preventDefault())})})})});iC.displayName=aC;var lC="SelectValue",cC=f.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:a="",...i}=e,c=fo(lC,n),{onValueNodeHasChildrenChange:u}=c,d=o!==void 0,h=Ce(t,c.onValueNodeChange);return ct(()=>{u(d)},[u,d]),l.jsx(fe.span,{...i,ref:h,style:{pointerEvents:"none"},children:TC(c.value)?l.jsx(l.Fragment,{children:a}):o})});cC.displayName=lC;var K5="SelectIcon",uC=f.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return l.jsx(fe.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});uC.displayName=K5;var G5="SelectPortal",dC=e=>l.jsx(bi,{asChild:!0,...e});dC.displayName=G5;var ea="SelectContent",fC=f.forwardRef((e,t)=>{const n=fo(ea,e.__scopeSelect),[r,s]=f.useState();if(ct(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?sa.createPortal(l.jsx(hC,{scope:e.__scopeSelect,children:l.jsx(Cf.Slot,{scope:e.__scopeSelect,children:l.jsx("div",{children:e.children})})}),o):null}return l.jsx(pC,{...e,ref:t})});fC.displayName=ea;var Kn=10,[hC,ho]=Ri(ea),q5="SelectContentImpl",Q5=eo("SelectContent.RemoveScroll"),pC=f.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:i,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:w,hideWhenDetached:v,avoidCollisions:y,...x}=e,g=fo(ea,n),[b,S]=f.useState(null),[_,C]=f.useState(null),N=Ce(t,H=>S(H)),[T,L]=f.useState(null),[$,V]=f.useState(null),F=kf(n),[O,j]=f.useState(!1),z=f.useRef(!1);f.useEffect(()=>{if(b)return vf(b)},[b]),gf();const A=f.useCallback(H=>{const[ie,...ye]=F().map(le=>le.ref.current),[he]=ye.slice(-1),be=document.activeElement;for(const le of H)if(le===be||(le==null||le.scrollIntoView({block:"nearest"}),le===ie&&_&&(_.scrollTop=0),le===he&&_&&(_.scrollTop=_.scrollHeight),le==null||le.focus(),document.activeElement!==be))return},[F,_]),M=f.useCallback(()=>A([T,b]),[A,T,b]);f.useEffect(()=>{O&&M()},[O,M]);const{onOpenChange:E,triggerPointerDownPosRef:R}=g;f.useEffect(()=>{if(b){let H={x:0,y:0};const ie=he=>{var be,le;H={x:Math.abs(Math.round(he.pageX)-(((be=R.current)==null?void 0:be.x)??0)),y:Math.abs(Math.round(he.pageY)-(((le=R.current)==null?void 0:le.y)??0))}},ye=he=>{H.x<=10&&H.y<=10?he.preventDefault():b.contains(he.target)||E(!1),document.removeEventListener("pointermove",ie),R.current=null};return R.current!==null&&(document.addEventListener("pointermove",ie),document.addEventListener("pointerup",ye,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",ye,{capture:!0})}}},[b,E,R]),f.useEffect(()=>{const H=()=>E(!1);return window.addEventListener("blur",H),window.addEventListener("resize",H),()=>{window.removeEventListener("blur",H),window.removeEventListener("resize",H)}},[E]);const[W,J]=RC(H=>{const ie=F().filter(be=>!be.disabled),ye=ie.find(be=>be.ref.current===document.activeElement),he=IC(ie,H,ye);he&&setTimeout(()=>he.ref.current.focus())}),Y=f.useCallback((H,ie,ye)=>{const he=!z.current&&!ye;(g.value!==void 0&&g.value===ie||he)&&(L(H),he&&(z.current=!0))},[g.value]),ue=f.useCallback(()=>b==null?void 0:b.focus(),[b]),B=f.useCallback((H,ie,ye)=>{const he=!z.current&&!ye;(g.value!==void 0&&g.value===ie||he)&&V(H)},[g.value]),D=r==="popper"?Lm:mC,U=D===Lm?{side:i,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:w,hideWhenDetached:v,avoidCollisions:y}:{};return l.jsx(hC,{scope:n,content:b,viewport:_,onViewportChange:C,itemRefCallback:Y,selectedItem:T,onItemLeave:ue,itemTextRefCallback:B,focusSelectedItem:M,selectedItemText:$,position:r,isPositioned:O,searchRef:W,children:l.jsx(yc,{as:Q5,allowPinchZoom:!0,children:l.jsx(vc,{asChild:!0,trapped:g.open,onMountAutoFocus:H=>{H.preventDefault()},onUnmountAutoFocus:Q(s,H=>{var ie;(ie=g.trigger)==null||ie.focus({preventScroll:!0}),H.preventDefault()}),children:l.jsx(oa,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:H=>H.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:l.jsx(D,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:H=>H.preventDefault(),...x,...U,onPlaced:()=>j(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Q(x.onKeyDown,H=>{const ie=H.ctrlKey||H.altKey||H.metaKey;if(H.key==="Tab"&&H.preventDefault(),!ie&&H.key.length===1&&J(H.key),["ArrowUp","ArrowDown","Home","End"].includes(H.key)){let he=F().filter(be=>!be.disabled).map(be=>be.ref.current);if(["ArrowUp","End"].includes(H.key)&&(he=he.slice().reverse()),["ArrowUp","ArrowDown"].includes(H.key)){const be=H.target,le=he.indexOf(be);he=he.slice(le+1)}setTimeout(()=>A(he)),H.preventDefault()}})})})})})})});pC.displayName=q5;var J5="SelectItemAlignedPosition",mC=f.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,o=fo(ea,n),a=ho(ea,n),[i,c]=f.useState(null),[u,d]=f.useState(null),h=Ce(t,N=>d(N)),p=kf(n),m=f.useRef(!1),w=f.useRef(!0),{viewport:v,selectedItem:y,selectedItemText:x,focusSelectedItem:g}=a,b=f.useCallback(()=>{if(o.trigger&&o.valueNode&&i&&u&&v&&y&&x){const N=o.trigger.getBoundingClientRect(),T=u.getBoundingClientRect(),L=o.valueNode.getBoundingClientRect(),$=x.getBoundingClientRect();if(o.dir!=="rtl"){const be=$.left-T.left,le=L.left-be,I=N.left-le,G=N.width+I,ne=Math.max(G,T.width),we=window.innerWidth-Kn,Ze=Dm(le,[Kn,Math.max(Kn,we-ne)]);i.style.minWidth=G+"px",i.style.left=Ze+"px"}else{const be=T.right-$.right,le=window.innerWidth-L.right-be,I=window.innerWidth-N.right-le,G=N.width+I,ne=Math.max(G,T.width),we=window.innerWidth-Kn,Ze=Dm(le,[Kn,Math.max(Kn,we-ne)]);i.style.minWidth=G+"px",i.style.right=Ze+"px"}const V=p(),F=window.innerHeight-Kn*2,O=v.scrollHeight,j=window.getComputedStyle(u),z=parseInt(j.borderTopWidth,10),A=parseInt(j.paddingTop,10),M=parseInt(j.borderBottomWidth,10),E=parseInt(j.paddingBottom,10),R=z+A+O+E+M,W=Math.min(y.offsetHeight*5,R),J=window.getComputedStyle(v),Y=parseInt(J.paddingTop,10),ue=parseInt(J.paddingBottom,10),B=N.top+N.height/2-Kn,D=F-B,U=y.offsetHeight/2,H=y.offsetTop+U,ie=z+A+H,ye=R-ie;if(ie<=B){const be=V.length>0&&y===V[V.length-1].ref.current;i.style.bottom="0px";const le=u.clientHeight-v.offsetTop-v.offsetHeight,I=Math.max(D,U+(be?ue:0)+le+M),G=ie+I;i.style.height=G+"px"}else{const be=V.length>0&&y===V[0].ref.current;i.style.top="0px";const I=Math.max(B,z+v.offsetTop+(be?Y:0)+U)+ye;i.style.height=I+"px",v.scrollTop=ie-B+v.offsetTop}i.style.margin=`${Kn}px 0`,i.style.minHeight=W+"px",i.style.maxHeight=F+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[p,o.trigger,o.valueNode,i,u,v,y,x,o.dir,r]);ct(()=>b(),[b]);const[S,_]=f.useState();ct(()=>{u&&_(window.getComputedStyle(u).zIndex)},[u]);const C=f.useCallback(N=>{N&&w.current===!0&&(b(),g==null||g(),w.current=!1)},[b,g]);return l.jsx(Z5,{scope:n,contentWrapper:i,shouldExpandOnScrollRef:m,onScrollButtonChange:C,children:l.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:l.jsx(fe.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});mC.displayName=J5;var X5="SelectPopperPosition",Lm=f.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Kn,...o}=e,a=Nf(n);return l.jsx(uf,{...a,...o,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Lm.displayName=X5;var[Z5,Bv]=Ri(ea,{}),$m="SelectViewport",gC=f.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,o=ho($m,n),a=Bv($m,n),i=Ce(t,o.onViewportChange),c=f.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(Cf.Slot,{scope:n,children:l.jsx(fe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Q(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&h){const m=Math.abs(c.current-d.scrollTop);if(m>0){const w=window.innerHeight-Kn*2,v=parseFloat(h.style.minHeight),y=parseFloat(h.style.height),x=Math.max(v,y);if(x<w){const g=x+m,b=Math.min(w,g),S=g-b;h.style.height=b+"px",h.style.bottom==="0px"&&(d.scrollTop=S>0?S:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});gC.displayName=$m;var vC="SelectGroup",[e3,t3]=Ri(vC),n3=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Tr();return l.jsx(e3,{scope:n,id:s,children:l.jsx(fe.div,{role:"group","aria-labelledby":s,...r,ref:t})})});n3.displayName=vC;var yC="SelectLabel",wC=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=t3(yC,n);return l.jsx(fe.div,{id:s.id,...r,ref:t})});wC.displayName=yC;var kd="SelectItem",[r3,xC]=Ri(kd),bC=f.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...a}=e,i=fo(kd,n),c=ho(kd,n),u=i.value===r,[d,h]=f.useState(o??""),[p,m]=f.useState(!1),w=Ce(t,g=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,g,r,s)}),v=Tr(),y=f.useRef("touch"),x=()=>{s||(i.onValueChange(r),i.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(r3,{scope:n,value:r,disabled:s,textId:v,isSelected:u,onItemTextChange:f.useCallback(g=>{h(b=>b||((g==null?void 0:g.textContent)??"").trim())},[]),children:l.jsx(Cf.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:l.jsx(fe.div,{role:"option","aria-labelledby":v,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:w,onFocus:Q(a.onFocus,()=>m(!0)),onBlur:Q(a.onBlur,()=>m(!1)),onClick:Q(a.onClick,()=>{y.current!=="mouse"&&x()}),onPointerUp:Q(a.onPointerUp,()=>{y.current==="mouse"&&x()}),onPointerDown:Q(a.onPointerDown,g=>{y.current=g.pointerType}),onPointerMove:Q(a.onPointerMove,g=>{var b;y.current=g.pointerType,s?(b=c.onItemLeave)==null||b.call(c):y.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Q(a.onPointerLeave,g=>{var b;g.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:Q(a.onKeyDown,g=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&g.key===" "||(W5.includes(g.key)&&x(),g.key===" "&&g.preventDefault())})})})})});bC.displayName=kd;var sl="SelectItemText",SC=f.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...o}=e,a=fo(sl,n),i=ho(sl,n),c=xC(sl,n),u=Y5(sl,n),[d,h]=f.useState(null),p=Ce(t,x=>h(x),c.onItemTextChange,x=>{var g;return(g=i.itemTextRefCallback)==null?void 0:g.call(i,x,c.value,c.disabled)}),m=d==null?void 0:d.textContent,w=f.useMemo(()=>l.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:y}=u;return ct(()=>(v(w),()=>y(w)),[v,y,w]),l.jsxs(l.Fragment,{children:[l.jsx(fe.span,{id:c.textId,...o,ref:p}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?sa.createPortal(o.children,a.valueNode):null]})});SC.displayName=sl;var _C="SelectItemIndicator",EC=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return xC(_C,n).isSelected?l.jsx(fe.span,{"aria-hidden":!0,...r,ref:t}):null});EC.displayName=_C;var Fm="SelectScrollUpButton",CC=f.forwardRef((e,t)=>{const n=ho(Fm,e.__scopeSelect),r=Bv(Fm,e.__scopeSelect),[s,o]=f.useState(!1),a=Ce(t,r.onScrollButtonChange);return ct(()=>{if(n.viewport&&n.isPositioned){let i=function(){const u=c.scrollTop>0;o(u)};const c=n.viewport;return i(),c.addEventListener("scroll",i),()=>c.removeEventListener("scroll",i)}},[n.viewport,n.isPositioned]),s?l.jsx(NC,{...e,ref:a,onAutoScroll:()=>{const{viewport:i,selectedItem:c}=n;i&&c&&(i.scrollTop=i.scrollTop-c.offsetHeight)}}):null});CC.displayName=Fm;var Um="SelectScrollDownButton",kC=f.forwardRef((e,t)=>{const n=ho(Um,e.__scopeSelect),r=Bv(Um,e.__scopeSelect),[s,o]=f.useState(!1),a=Ce(t,r.onScrollButtonChange);return ct(()=>{if(n.viewport&&n.isPositioned){let i=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;o(d)};const c=n.viewport;return i(),c.addEventListener("scroll",i),()=>c.removeEventListener("scroll",i)}},[n.viewport,n.isPositioned]),s?l.jsx(NC,{...e,ref:a,onAutoScroll:()=>{const{viewport:i,selectedItem:c}=n;i&&c&&(i.scrollTop=i.scrollTop+c.offsetHeight)}}):null});kC.displayName=Um;var NC=f.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,o=ho("SelectScrollButton",n),a=f.useRef(null),i=kf(n),c=f.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),ct(()=>{var d;const u=i().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[i]),l.jsx(fe.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:Q(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Q(s.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Q(s.onPointerLeave,()=>{c()})})}),s3="SelectSeparator",jC=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return l.jsx(fe.div,{"aria-hidden":!0,...r,ref:t})});jC.displayName=s3;var Bm="SelectArrow",o3=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Nf(n),o=fo(Bm,n),a=ho(Bm,n);return o.open&&a.position==="popper"?l.jsx(df,{...s,...r,ref:t}):null});o3.displayName=Bm;var a3="SelectBubbleInput",PC=f.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=f.useRef(null),o=Ce(r,s),a=Uv(t);return f.useEffect(()=>{const i=s.current;if(!i)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==t&&d){const h=new Event("change",{bubbles:!0});d.call(i,t),i.dispatchEvent(h)}},[a,t]),l.jsx(fe.select,{...n,style:{...n_,...n.style},ref:o,defaultValue:t})});PC.displayName=a3;function TC(e){return e===""||e===void 0}function RC(e){const t=it(e),n=f.useRef(""),r=f.useRef(0),s=f.useCallback(a=>{const i=n.current+a;t(i),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(i)},[t]),o=f.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function IC(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=i3(e,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function i3(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var l3=oC,OC=iC,c3=cC,u3=uC,d3=dC,AC=fC,f3=gC,MC=wC,DC=bC,h3=SC,p3=EC,LC=CC,$C=kC,FC=jC;const Us=l3,Bs=c3,Xr=f.forwardRef(({className:e,children:t,...n},r)=>l.jsxs(OC,{ref:r,className:ge("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,l.jsx(u3,{asChild:!0,children:l.jsx(of,{className:"h-4 w-4 opacity-50"})})]}));Xr.displayName=OC.displayName;const UC=f.forwardRef(({className:e,...t},n)=>l.jsx(LC,{ref:n,className:ge("flex cursor-default items-center justify-center py-1",e),...t,children:l.jsx(EI,{className:"h-4 w-4"})}));UC.displayName=LC.displayName;const BC=f.forwardRef(({className:e,...t},n)=>l.jsx($C,{ref:n,className:ge("flex cursor-default items-center justify-center py-1",e),...t,children:l.jsx(of,{className:"h-4 w-4"})}));BC.displayName=$C.displayName;const Zr=f.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>l.jsx(d3,{children:l.jsxs(AC,{ref:s,className:ge("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[l.jsx(UC,{}),l.jsx(f3,{className:ge("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),l.jsx(BC,{})]})}));Zr.displayName=AC.displayName;const m3=f.forwardRef(({className:e,...t},n)=>l.jsx(MC,{ref:n,className:ge("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));m3.displayName=MC.displayName;const er=f.forwardRef(({className:e,children:t,...n},r)=>l.jsxs(DC,{ref:r,className:ge("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(p3,{children:l.jsx(Jg,{className:"h-4 w-4"})})}),l.jsx(h3,{children:t})]}));er.displayName=DC.displayName;const g3=f.forwardRef(({className:e,...t},n)=>l.jsx(FC,{ref:n,className:ge("-mx-1 my-1 h-px bg-muted",e),...t}));g3.displayName=FC.displayName;const WC=e=>({id:e.id,image:e.image,price:e.price,title:e.title,host:e.host,hostEmail:e.hostEmail??null,location:e.location,availableDates:e.availableDates,description:e.description,hostId:e.hostId??null,availability:e.availability??null,coordinates:e.coordinates??null});var jf="Dialog",[zC,Rz]=Kt(jf),[v3,cr]=zC(jf),HC=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=e,i=f.useRef(null),c=f.useRef(null),[u,d]=as({prop:r,defaultProp:s??!1,onChange:o,caller:jf});return l.jsx(v3,{scope:t,triggerRef:i,contentRef:c,contentId:Tr(),titleId:Tr(),descriptionId:Tr(),open:u,onOpenChange:d,onOpenToggle:f.useCallback(()=>d(h=>!h),[d]),modal:a,children:n})};HC.displayName=jf;var VC="DialogTrigger",y3=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=cr(VC,n),o=Ce(t,s.triggerRef);return l.jsx(fe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Hv(s.open),...r,ref:o,onClick:Q(e.onClick,s.onOpenToggle)})});y3.displayName=VC;var Wv="DialogPortal",[w3,YC]=zC(Wv,{forceMount:void 0}),KC=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,o=cr(Wv,t);return l.jsx(w3,{scope:t,forceMount:n,children:f.Children.map(r,a=>l.jsx(St,{present:n||o.open,children:l.jsx(bi,{asChild:!0,container:s,children:a})}))})};KC.displayName=Wv;var Nd="DialogOverlay",GC=f.forwardRef((e,t)=>{const n=YC(Nd,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=cr(Nd,e.__scopeDialog);return o.modal?l.jsx(St,{present:r||o.open,children:l.jsx(b3,{...s,ref:t})}):null});GC.displayName=Nd;var x3=eo("DialogOverlay.RemoveScroll"),b3=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=cr(Nd,n);return l.jsx(yc,{as:x3,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(fe.div,{"data-state":Hv(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),ta="DialogContent",qC=f.forwardRef((e,t)=>{const n=YC(ta,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=cr(ta,e.__scopeDialog);return l.jsx(St,{present:r||o.open,children:o.modal?l.jsx(S3,{...s,ref:t}):l.jsx(_3,{...s,ref:t})})});qC.displayName=ta;var S3=f.forwardRef((e,t)=>{const n=cr(ta,e.__scopeDialog),r=f.useRef(null),s=Ce(t,n.contentRef,r);return f.useEffect(()=>{const o=r.current;if(o)return vf(o)},[]),l.jsx(QC,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Q(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Q(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,i=a.button===0&&a.ctrlKey===!0;(a.button===2||i)&&o.preventDefault()}),onFocusOutside:Q(e.onFocusOutside,o=>o.preventDefault())})}),_3=f.forwardRef((e,t)=>{const n=cr(ta,e.__scopeDialog),r=f.useRef(!1),s=f.useRef(!1);return l.jsx(QC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,i;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(r.current||(i=n.triggerRef.current)==null||i.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),QC=f.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=e,i=cr(ta,n),c=f.useRef(null),u=Ce(t,c);return gf(),l.jsxs(l.Fragment,{children:[l.jsx(vc,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:l.jsx(oa,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":Hv(i.open),...a,ref:u,onDismiss:()=>i.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(E3,{titleId:i.titleId}),l.jsx(k3,{contentRef:c,descriptionId:i.descriptionId})]})]})}),zv="DialogTitle",JC=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=cr(zv,n);return l.jsx(fe.h2,{id:s.titleId,...r,ref:t})});JC.displayName=zv;var XC="DialogDescription",ZC=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=cr(XC,n);return l.jsx(fe.p,{id:s.descriptionId,...r,ref:t})});ZC.displayName=XC;var ek="DialogClose",tk=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=cr(ek,n);return l.jsx(fe.button,{type:"button",...r,ref:t,onClick:Q(e.onClick,()=>s.onOpenChange(!1))})});tk.displayName=ek;function Hv(e){return e?"open":"closed"}var nk="DialogTitleWarning",[Iz,rk]=jR(nk,{contentName:ta,titleName:zv,docsSlug:"dialog"}),E3=({titleId:e})=>{const t=rk(nk),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},C3="DialogDescriptionWarning",k3=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${rk(C3).contentName}}.`;return f.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},N3=HC,j3=KC,sk=GC,ok=qC,ak=JC,ik=ZC,P3=tk;const Pf=N3,T3=j3,lk=f.forwardRef(({className:e,...t},n)=>l.jsx(sk,{ref:n,className:ge("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));lk.displayName=sk.displayName;const _c=f.forwardRef(({className:e,children:t,...n},r)=>l.jsxs(T3,{children:[l.jsx(lk,{}),l.jsxs(ok,{ref:r,className:ge("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg max-h-[90vh] overflow-y-auto overscroll-contain",e),...n,children:[t,l.jsxs(P3,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[l.jsx(N_,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_c.displayName=ok.displayName;const Ec=({className:e,...t})=>l.jsx("div",{className:ge("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Ec.displayName="DialogHeader";const Vv=({className:e,...t})=>l.jsx("div",{className:ge("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Vv.displayName="DialogFooter";const Cc=f.forwardRef(({className:e,...t},n)=>l.jsx(ak,{ref:n,className:ge("text-lg font-semibold leading-none tracking-tight",e),...t}));Cc.displayName=ak.displayName;const Tf=f.forwardRef(({className:e,...t},n)=>l.jsx(ik,{ref:n,className:ge("text-sm text-muted-foreground",e),...t}));Tf.displayName=ik.displayName;const R3=async e=>{const{data:t,error:n}=await ce.from("user_profiles").select("id, email, avatar_url, full_name, user_role, bio, university, program_name, program_year, program_type").eq("id",e).maybeSingle();if(n)throw n;return t??null},ck=async e=>{if(!e.length)return[];const{data:t,error:n}=await ce.from("user_profiles").select("id, email, avatar_url, full_name, user_role, bio, university, program_name, program_year, program_type").in("id",e);if(n)throw n;return t??[]},I3=f.lazy(()=>lo(()=>import("./ListingsMap-DXBzhxz4.js"),__vite__mapDeps([0,1]))),sx=e=>{var r,s;const t=(r=e.city)==null?void 0:r.trim(),n=(s=e.country)==null?void 0:s.trim();return t&&n?`${t}, ${n}`:t||n||e.location},_o=e=>{if(!(e!=null&&e.start)||!(e!=null&&e.end))return"Flexible availability";const t=new Date(e.start),n=new Date(e.end);if(Number.isNaN(t.getTime())||Number.isNaN(n.getTime()))return"Flexible availability";const r=t.getMonth()===n.getMonth(),s=Me(t,"MMM d"),o=r?Me(n,"d"):Me(n,"MMM d");return`${s}-${o}`},uk=70,O3=(e,t=uk)=>{if(!e)return"";const n=e.trim();return n.length<=t?n:`${n.slice(0,t).trimEnd()}`},Sl="e.g. Left street 15",jd="Calm neighborhood",Pd="Cozy couch and a kitchen to share",ql="30",ox=e=>{var n,r;if((n=e.gallery)!=null&&n.length)return e.gallery;const t=(r=e.availability)==null?void 0:r.photos;return Array.isArray(t)&&t.length?t:e.image?[e.image]:[]},A3={bsc:"Bachelor (BSc)",msc:"Master (MSc)",phd:"Doctorate (PhD)",other:"Other program"},M3=[{id:"static-1",image:Qo,gallery:[Qo],price:"$25",title:"Leather Corner Couch",host:"Sarah M.",hostEmail:null,location:"Downtown Campus",country:"Latvia",city:"Riga",addressLine:"Downtown Campus",coordinates:{lat:56.9496,lng:24.1052},availability:{start:"2024-10-15T00:00:00.000Z",end:"2024-10-25T23:59:59.000Z"},availableDates:_o({start:"2024-10-15T00:00:00.000Z",end:"2024-10-25T23:59:59.000Z"}),description:"Comfortable leather couch with plants and natural lighting. Perfect for studying or relaxing near campus.",hostId:null},{id:"static-2",image:fd,gallery:[fd],price:"$18",title:"Cozy Beige Sectional",host:"Mike T.",hostEmail:null,location:"North Dorms",country:"Latvia",city:"Riga",addressLine:"North Dorms",coordinates:{lat:56.9578,lng:24.1173},availability:{start:"2024-10-20T00:00:00.000Z",end:"2024-10-30T23:59:59.000Z"},availableDates:_o({start:"2024-10-20T00:00:00.000Z",end:"2024-10-30T23:59:59.000Z"}),description:"Spacious sectional with great natural light. Great for overnight stays during exam week.",hostId:null},{id:"static-3",image:hd,gallery:[hd],price:"$22",title:"Modern Grey Sectional",host:"Emma K.",hostEmail:null,location:"Library District",country:"Latvia",city:"Riga",addressLine:"Library District",coordinates:{lat:56.9461,lng:24.1177},availability:{start:"2024-10-18T00:00:00.000Z",end:"2024-10-28T23:59:59.000Z"},availableDates:_o({start:"2024-10-18T00:00:00.000Z",end:"2024-10-28T23:59:59.000Z"}),description:"Perfect spot for late night study sessions. Close to the library and quiet.",hostId:null},{id:"static-4",image:pd,gallery:[pd],price:"$28",title:"Green Corduroy Sectional",host:"Alex R.",hostEmail:null,location:"Student Village",country:"Latvia",city:"Riga",addressLine:"Student Village",coordinates:{lat:56.9423,lng:24.0998},availability:{start:"2024-10-16T00:00:00.000Z",end:"2024-10-26T23:59:59.000Z"},availableDates:_o({start:"2024-10-16T00:00:00.000Z",end:"2024-10-26T23:59:59.000Z"}),description:"Unique green sectional with plants and cozy vibes. Great for extended stays.",hostId:null},{id:"static-5",image:md,gallery:[md],price:"$32",title:"Modular Beige Sofa",host:"Jamie L.",hostEmail:null,location:"Arts Quarter",country:"Latvia",city:"Riga",addressLine:"Arts Quarter",coordinates:{lat:56.9521,lng:24.108},availability:{start:"2024-10-22T00:00:00.000Z",end:"2024-11-01T23:59:59.000Z"},availableDates:_o({start:"2024-10-22T00:00:00.000Z",end:"2024-11-01T23:59:59.000Z"}),description:"Spacious modular sofa in bright apartment. Perfect for creative students.",hostId:null},{id:"static-6",image:gd,gallery:[gd],price:"$35",title:"Designer Grey Sectional",host:"Taylor B.",hostEmail:null,location:"Campus Heights",country:"Latvia",city:"Riga",addressLine:"Campus Heights",coordinates:{lat:56.9448,lng:24.1312},availability:{start:"2024-10-19T00:00:00.000Z",end:"2024-10-29T23:59:59.000Z"},availableDates:_o({start:"2024-10-19T00:00:00.000Z",end:"2024-10-29T23:59:59.000Z"}),description:"Modern designer couch in beautiful apartment with exposed beams. Premium comfort.",hostId:null}],ax="couch-photos",D3=e=>{const t=e.name.split(".").pop();return`${typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2)}`}${t?`.${t}`:""}`},L3=async(e,t)=>{const n=D3(e),r=`${t}/${n}`,{error:s}=await ce.storage.from(ax).upload(r,e,{cacheControl:"3600",upsert:!0});if(s)throw new Error(s.message??"Failed to upload listing photo.");const{data:o}=ce.storage.from(ax).getPublicUrl(r);if(!(o!=null&&o.publicUrl))throw new Error("Unable to fetch uploaded listing photo URL.");return o.publicUrl},ix=()=>({title:"",price:ql,description:Pd,location:jd,country:"Switzerland",city:"",addressLine:Sl,checkInTime:""}),$3=e=>{var t,n,r,s;return{title:e.title??"",price:(e.price??`$${ql}`).replace(/[^0-9.]/g,"")||ql,description:e.description??Pd,location:e.location??jd,country:e.country??((t=e.availability)==null?void 0:t.country)??"Switzerland",city:e.city??((n=e.availability)==null?void 0:n.city)??"",addressLine:e.addressLine??((r=e.availability)==null?void 0:r.addressLine)??Sl,checkInTime:((s=e.availability)==null?void 0:s.checkInTime)??""}},Kh=e=>{if(!e)return"$0";const t=e.trim();return t?t.startsWith("$")?t:`$${t}`:"$0"},F3=e=>{const t=Number(e.replace(/[^0-9.]/g,""));return Number.isFinite(t)?t:0},U3=e=>e.reduce((t,n)=>{t[n.couchId]=n,n.storageId&&(t[n.storageId]=n);const r=Ed(n.couchId);return t[r]=n,t},{}),B3=()=>{const e=lr(),n=aa().state??null,{signOut:r,profile:s,session:o}=Bn(),{toast:a}=Ar(),i=$v(s,o),c=(s==null?void 0:s.user_role)==="host",[u,d]=f.useState({}),h=f.useMemo(()=>new Set(Object.keys(u)),[u]),[p,m]=f.useState([]),[w,v]=f.useState(!1),[y,x]=f.useState("list"),[g,b]=f.useState(null),[S,_]=f.useState(!1),[C,N]=f.useState(""),[T,L]=f.useState("all"),[$,V]=f.useState("all"),[F,O]=f.useState(""),[j,z]=f.useState(""),[A,M]=f.useState(),[E,R]=f.useState("all"),[W,J]=f.useState(!1),[Y,ue]=f.useState(null),[B,D]=f.useState([]),[U,H]=f.useState([]),[ie,ye]=f.useState(!1),[he,be]=f.useState(!1),[le,I]=f.useState(()=>ix()),[G,ne]=f.useState({}),[we,Ze]=f.useState({}),[Dt,pn]=f.useState({}),[Lr,mn]=f.useState({}),[Nt,Qt]=f.useState(""),[us,ur]=f.useState([]),[Ve,Jt]=f.useState(null),[$r,Fr]=f.useState(!1),wt=f.useMemo(()=>A!=null&&A.from&&(A!=null&&A.to)?`${Me(A.from,"MMM d")} - ${Me(A.to,"MMM d")}`:A!=null&&A.from?`Starting ${Me(A.from,"MMM d")}`:"Select date range",[A]),Oi=C.trim().length>0||T!=="all"||$!=="all"||F.trim().length>0||j.trim().length>0||!!(A!=null&&A.from||A!=null&&A.to),ds=E==="mine";f.useEffect(()=>{n!=null&&n.listingScope&&E!==n.listingScope&&R(n.listingScope)},[E,n==null?void 0:n.listingScope]),f.useEffect(()=>{E==="mine"&&y!=="list"&&x("list")},[E,y]);const Nn=f.useCallback((P,Z)=>{I(oe=>({...oe,[P]:Z}))},[]),dr=f.useCallback(P=>{I(Z=>({...Z,country:P,city:Z.city&&(Gi.citiesByCountry[P]??[]).includes(Z.city)?Z.city:""}))},[]),ua=f.useCallback(P=>{ne(Z=>({...Z,[P]:!Z[P]}))},[]),zn=f.useCallback((P,Z)=>{Ze(oe=>({...oe,[P]:Z}))},[]),fs=f.useCallback(()=>{J(!1),ue(null),D([]),H([]),ye(!1),I(ix()),Qt(""),Jt(null),ur([])},[]),po=f.useCallback(P=>{if(!P||P.length===0){H([]);return}const Z=Math.max(0,7-B.length);if(Z<=0){a({title:"Gallery is full",description:"You can upload up to 7 photos.",variant:"destructive"});return}const oe=Array.from(P).slice(0,Z);if(oe.length===0){a({title:"Too many photos",description:"You can only have up to 7 photos total.",variant:"destructive"});return}H(oe)},[B.length,a]),mo=f.useCallback(P=>{D(Z=>Z.filter(oe=>oe!==P))},[]),go=f.useCallback(P=>{P.preventDefault(),po(P.dataTransfer.files)},[po]),pe=f.useCallback(P=>{var Z;if(!(s!=null&&s.id)){a({title:"Sign in to edit",description:"Hosts must be signed in to update a listing.",variant:"destructive"});return}if(P.hostId&&P.hostId!==s.id){a({title:"Can't edit this listing",description:"Switch to My listing to edit your space.",variant:"destructive"});return}ue(P),D(((Z=P.gallery)==null?void 0:Z.slice(0,3))??(P.image?[P.image]:[])),H([]),I($3(P)),Qt(P.addressLine??P.location??Sl),Jt(null),ur([]),J(!0)},[s==null?void 0:s.id,a]),Ie=f.useCallback(async P=>{var X,Fe,de,ke,Ue,hr,pr,hs,mr;if(P.preventDefault(),!Y)return;if(!(s!=null&&s.id)){a({title:"Sign in to edit",description:"Hosts must be signed in to update a listing.",variant:"destructive"});return}if(Y.hostId&&Y.hostId!==s.id){a({title:"Can't edit this listing",description:"Switch to My listing to edit your space.",variant:"destructive"});return}const Z=le.title.trim();if(!Z){a({title:"Add a title",description:"Give your listing a short name before saving.",variant:"destructive"});return}let oe=le.location.trim();if(oe||(oe=jd),!oe){a({title:"Add your location",description:"Let renters know where they'll be staying.",variant:"destructive"});return}if(!B.length&&!U.length){a({title:"Add a photo",description:"Upload at least one photo of your couch.",variant:"destructive"});return}ye(!0);try{let st=[...B];if(U.length){const by=Math.max(0,7-st.length),Pc=U.slice(0,by);for(const Tc of Pc){const qj=await L3(Tc,s.id);st.push(qj)}}if(!st.length)throw new Error("At least one photo is required.");st=st.slice(0,7);const gr=st[0]??Y.image,Pt=Kh(le.price.trim()||Y.price||ql),jn=le.description.trim()||Y.description||Pd,Pn=le.city.trim(),gn=(le.country.trim()||"Switzerland").trim(),Ur=Nt.trim()||Y.addressLine||((X=Y.availability)==null?void 0:X.addressLine)||Sl,Le=le.checkInTime.trim(),vr={start:((Fe=Y.availability)==null?void 0:Fe.start)??null,end:((de=Y.availability)==null?void 0:de.end)??null,checkInTime:(Le||((ke=Y.availability)==null?void 0:ke.checkInTime))??null,country:gn||Y.country||((Ue=Y.availability)==null?void 0:Ue.country)||null,city:Pn||Y.city||((hr=Y.availability)==null?void 0:hr.city)||null,addressLine:Ur||Y.addressLine||((pr=Y.availability)==null?void 0:pr.addressLine)||null,coordinates:Ve??((hs=Y.availability)==null?void 0:hs.coordinates)??(Y.coordinates?{lat:Y.coordinates.lat,lng:Y.coordinates.lng}:null),photos:st,published:typeof((mr=Y.availability)==null?void 0:mr.published)=="boolean"?Y.availability.published:Y.isPublished??!1};await Mm({id:Y.id,hostId:s.id,hostName:s.full_name??s.email??Y.host??"Host",hostEmail:s.email??(o==null?void 0:o.user.email)??Y.hostEmail??null,title:Z,imageUrl:gr,pricePerNight:Pt,location:oe,description:jn,availability:vr}),a({title:"Listing updated",description:"Your couch details have been saved."}),window.dispatchEvent(new Event("listings-updated")),fs()}catch(st){console.error("Failed to update listing",st),a({title:"Unable to update listing",description:st instanceof Error?st.message:"Please try again in a moment.",variant:"destructive"})}finally{ye(!1)}},[fs,le,B,U,Y,s,o,a]),Oe=()=>{N(""),L("all"),V("all"),O(""),z(""),M(void 0)},te=f.useCallback(async()=>{if(!i){d({});return}try{const P=await Cd(i);d(U3(P))}catch(P){console.warn("Failed to load wishlist",P)}},[i]);f.useEffect(()=>{te()},[te]),f.useEffect(()=>{if(typeof window>"u")return;const P=()=>te();return window.addEventListener("wishlist-updated",P),()=>window.removeEventListener("wishlist-updated",P)},[te]);const re=f.useCallback(P=>{L(P),P==="all"&&V("all")},[]),se=f.useCallback(P=>{V(P)},[]),_e=f.useCallback((P,Z)=>{Z!=null&&Z.defaultPrevented||e(`/couch/${P.id}`,{state:{couch:P}})},[e]),et=f.useCallback(async(P,Z)=>{if(P.stopPropagation(),P.preventDefault(),!i){a({title:"Sign in to save couches",description:"Create an account or sign in to build your wishlist.",variant:"destructive"});return}const oe=Ed(Z.id),X=u[Z.id]??u[oe];try{if(X){await Fv(i,Z.id),d(ke=>{const Ue={...ke};return delete Ue[Z.id],delete Ue[oe],Ue}),a({title:"Removed from wishlist",description:`${Z.title} is no longer saved.`});return}const Fe=WC(Z),de=await tC(i,Z.id,Fe);de&&(d(ke=>({...ke,[de.couchId]:de,[de.storageId]:de,[Ed(de.couchId)]:de})),a({title:"Saved to wishlist",description:`${Z.title} was added for later.`}))}catch(Fe){console.error("Wishlist toggle failed",Fe),a({title:"Unable to update wishlist",description:"Please try again in a moment.",variant:"destructive"})}},[a,i,u]),pt=f.useRef(new Set),jt=f.useRef(!1),fr=f.useRef(new Set),Lt=f.useRef({}),_t=f.useCallback(async()=>{try{v(!0);const P=await M5(),Z=[Qo,fd,hd,pd,md,gd],oe=P.map((X,Fe)=>{var jn,Pn,gn,Ur;const de=X.availability?{start:X.availability.start??null,end:X.availability.end??null,checkInTime:X.availability.checkInTime??null,published:typeof X.availability.published=="boolean"?X.availability.published:null,country:X.availability.country??null,city:X.availability.city??null,addressLine:X.availability.addressLine??null,photos:Array.isArray(X.availability.photos)?X.availability.photos.filter(Le=>typeof Le=="string"&&Le.trim().length>0):null,coordinates:X.availability.coordinates&&typeof X.availability.coordinates.lat=="number"&&typeof X.availability.coordinates.lng=="number"?{lat:X.availability.coordinates.lat,lng:X.availability.coordinates.lng,displayName:X.availability.coordinates.displayName??null}:null}:null,ke=(de==null?void 0:de.start)&&(de==null?void 0:de.end),Ue=typeof(de==null?void 0:de.published)=="boolean"?de.published:!1,hr=Array.isArray(de==null?void 0:de.photos)?de.photos:[],pr=X.image??hr[0]??Z[Fe%Z.length],hs=((jn=de==null?void 0:de.country)==null?void 0:jn.trim())||null,mr=((Pn=de==null?void 0:de.city)==null?void 0:Pn.trim())||null,st=((gn=de==null?void 0:de.addressLine)==null?void 0:gn.trim())||((Ur=X.location)==null?void 0:Ur.trim())||null,gr=de!=null&&de.coordinates&&typeof de.coordinates.lat=="number"&&typeof de.coordinates.lng=="number"?{lat:de.coordinates.lat,lng:de.coordinates.lng}:null,Pt=ke?_o(de):de!=null&&de.checkInTime?`Check-in after ${de.checkInTime}`:"Flexible availability";return{id:X.id,image:pr,price:Kh(X.price??"0"),title:X.title??`Community couch ${Fe+1}`,host:X.hostName??"Community host",hostEmail:X.hostEmail??null,location:X.location??"Address shared after booking",country:hs,city:mr,addressLine:st,availableDates:Pt,description:X.description??(X.createdAt?`Listing published on ${new Date(X.createdAt).toLocaleDateString()}`:"Listing added by our host community."),hostId:X.hostId,availability:de,coordinates:gr,gallery:hr.length?hr:pr?[pr]:[],hostBio:null,isPublished:Ue}});m(oe)}catch(P){console.error("Failed to fetch listings",P)}finally{v(!1)}},[]);f.useEffect(()=>{typeof window>"u"||!("geolocation"in navigator)||navigator.geolocation.getCurrentPosition(P=>{b({lat:P.coords.latitude,lng:P.coords.longitude})},P=>{jt.current||(console.warn("Unable to determine user location",P),jt.current=!0)},{enableHighAccuracy:!1,timeout:5e3})},[]),f.useEffect(()=>{_t()},[_t]),f.useEffect(()=>{const P=Nt.trim();if(!P||P.length<3){ur([]),Fr(!1);return}if(Ve&&Ve.displayName===P){ur([]),Fr(!1);return}const Z=new AbortController;Fr(!0);const oe=setTimeout(async()=>{try{const X=await I5(P,{signal:Z.signal});ur(X)}catch(X){X instanceof DOMException&&X.name==="AbortError"||console.warn("Address lookup failed",X)}finally{Fr(!1)}},250);return()=>{Z.abort(),clearTimeout(oe)}},[Nt,Ve]);const Yj=f.useCallback(async(P,Z)=>{if(P.id){mn(oe=>({...oe,[P.id]:!0}));try{await $5(P.id,Z),m(oe=>oe.map(X=>X.id===P.id?{...X,isPublished:Z,availability:{...X.availability,published:Z}}:X)),await _t(),a({title:Z?"Listing published":"Listing unpublished",description:Z?"Your listing is live and visible to renters.":"Your listing is hidden until you publish it again."}),Z&&E==="all"&&R("all")}catch(oe){console.error("Failed to toggle listing visibility",oe),a({title:"Unable to update listing",description:oe instanceof Error?oe.message:"Please try again in a moment.",variant:"destructive"})}finally{mn(oe=>{const X={...oe};return delete X[P.id],X})}}},[_t,a]),Kj=f.useCallback(async()=>{if(!(s!=null&&s.id)){a({title:"Sign in required",description:"Hosts need to sign in before creating a listing.",variant:"destructive"});return}be(!0);try{const P=typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${s.id}-${Date.now()}`;await Mm({id:P,hostId:s.id,hostName:s.full_name??s.email??"Host",hostEmail:s.email??(o==null?void 0:o.user.email)??null,title:s.full_name?`${s.full_name}'s couch`:"Hosted couch",imageUrl:null,pricePerNight:Kh(ql),location:jd,description:Pd,availability:{start:null,end:null,checkInTime:null,country:null,city:null,addressLine:Sl,coordinates:null,published:!1}}),await _t(),R("mine"),a({title:"Listing created",description:"Open Edit listing to add your address, couch photos, and description."})}catch(P){console.error("Failed to create placeholder listing",P),a({title:"Unable to create listing",description:P instanceof Error?P.message:"Please try again in a moment.",variant:"destructive"})}finally{be(!1)}},[_t,s==null?void 0:s.email,s==null?void 0:s.full_name,s==null?void 0:s.id,o==null?void 0:o.user.email,a]);f.useEffect(()=>{const P=p.map(X=>X.hostId).filter(X=>!!X&&!fr.current.has(X));if(!P.length)return;let Z=!1;return(async()=>{try{const X=await ck(Array.from(new Set(P)));if(Z)return;pn(Fe=>{const de={...Fe};return X.forEach(ke=>{fr.current.add(ke.id),de[ke.id]={bio:ke.bio??null,university:ke.university??null,programName:ke.program_name??null,programYear:ke.program_year??null,programType:ke.program_type??null,avatarUrl:ke.avatar_url??null}}),de})}catch(X){console.warn("Failed to load host bios",X)}})(),()=>{Z=!0}},[p]),f.useEffect(()=>{Ze(P=>{let Z=!1;const oe={...P};return p.forEach(X=>{const Fe=ox(X);if(!Fe.length){X.id in oe&&(delete oe[X.id],Z=!0);return}(oe[X.id]??0)>=Fe.length&&(oe[X.id]=0,Z=!0)}),Z?oe:P})},[p]),f.useEffect(()=>{if(typeof window>"u")return;const P=()=>{_t()};return window.addEventListener("listings-updated",P),()=>window.removeEventListener("listings-updated",P)},[_t]),f.useEffect(()=>{const P=p.filter(X=>!X.coordinates&&!!X.location&&!pt.current.has(X.id));if(!P.length){_(!1);return}let Z=!1;return _(!0),(async()=>{for(const X of P){pt.current.add(X.id);try{const Fe=await R5(X.location);if(!Fe||Z)continue;m(de=>de.map(ke=>ke.id===X.id?{...ke,coordinates:Fe}:ke))}catch(Fe){console.warn("Unable to geocode address",Fe)}}Z||_(!1)})(),()=>{Z=!0}},[p]);const my=f.useMemo(()=>p.length>0?p:M3,[p]),gy=f.useMemo(()=>s!=null&&s.id?p.filter(P=>P.hostId===s.id):[],[s==null?void 0:s.id,p]),vy=f.useMemo(()=>E==="mine"?gy:my,[my,E,gy]),yy=Gi.countries,Gj=f.useMemo(()=>T==="all"?[]:Gi.citiesByCountry[T]??[],[T]),Bf=f.useMemo(()=>{const P=le.country.trim()||"Switzerland";return Gi.citiesByCountry[P]??[]},[le.country]);f.useEffect(()=>{if(T==="all"){V("all");return}const P=Gi.citiesByCountry[T]??[];$!=="all"&&(P.includes($)||V("all"))},[$,T]);const Ai=f.useMemo(()=>{const P=C.trim().toLowerCase(),Z=T==="all"?null:T.toLowerCase(),oe=$==="all"?null:$.toLowerCase(),X=F.trim()?Number(F):null,Fe=j.trim()?Number(j):null,de=X!==null&&Number.isFinite(X),ke=Fe!==null&&Number.isFinite(Fe);return vy.filter(Ue=>{const hr=P?[Ue.title,Ue.location,Ue.host,Ue.city,Ue.country,Ue.addressLine].filter(Boolean).some(Pt=>Pt.toLowerCase().includes(P)):!0,pr=E==="mine"?!0:Ue.isPublished!==!1,hs=(()=>{const Pt=F3(Ue.price);return!(de&&Pt<X||ke&&Pt>Fe)})(),mr=!0,st=(()=>{var Pn,gn;if(!Z)return!0;const Pt=(Pn=Ue.country)==null?void 0:Pn.trim().toLowerCase();return Pt?Pt===Z:(((gn=Ue.location)==null?void 0:gn.toLowerCase())??"").includes(Z)})(),gr=(()=>{var gn;if(!oe)return!0;const Pt=(gn=Ue.city)==null?void 0:gn.trim().toLowerCase();if(Pt&&Pt===oe)return!0;const jn=[Ue.city,Ue.addressLine,Ue.location].filter(Boolean).join(" ").toLowerCase();if(jn.includes(oe))return!0;const Pn=F5[oe]??[];return Pn.length&&jn?Pn.some(Ur=>jn.includes(Ur)):!1})();return hr&&pr&&hs&&mr&&st&&gr})},[vy,$,T,A,j,F,C,E]),wy=f.useMemo(()=>Ai.filter(P=>!!P.coordinates),[Ai]),xy=f.useMemo(()=>wy.map(P=>({id:P.id,title:P.title,price:P.price,coordinates:P.coordinates,location:sx(P),host:P.host,image:P.image})),[wy]);return l.jsxs("div",{className:"relative min-h-screen overflow-hidden dreamy-bg text-slate-900",children:[l.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[l.jsx("div",{className:"absolute -top-32 right-0 h-72 w-72 rounded-full bg-blue-200/40 blur-[140px]"}),l.jsx("div",{className:"absolute bottom-0 left-[-10%] h-80 w-80 rounded-full bg-indigo-200/30 blur-[160px]"})]}),l.jsxs("main",{className:"relative z-10 mx-auto w-full max-w-6xl px-4 py-12 sm:px-6 lg:px-8",children:[l.jsxs("header",{className:"mb-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-slate-500",children:"Welcome back"}),l.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:ds?"Manage your listing":"Find calming couches near campus"}),l.jsx("p",{className:"text-sm text-slate-500",children:ds?"Preview how your space appears to renters and edit the details below.":"Browse calming couches and use the filters below to find the right match."})]}),l.jsx("div",{className:"flex flex-wrap items-center gap-3 text-sm text-slate-500",children:l.jsxs("span",{children:["Signed in as ",l.jsx("span",{className:"font-semibold text-slate-800",children:(s==null?void 0:s.full_name)??"student"})]})})]}),!ds&&l.jsxs("section",{className:"mb-8 space-y-4 rounded-[2rem] border border-white/50 bg-white/85 p-5 shadow-2xl backdrop-blur-xl",children:[l.jsx("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center",children:l.jsxs("div",{className:"flex flex-1 items-center gap-3 rounded-full border border-slate-100 bg-white px-4 py-2 shadow-sm",children:[l.jsx(kI,{className:"h-5 w-5 text-slate-400"}),l.jsx("input",{type:"search",value:C,onChange:P=>N(P.target.value),placeholder:"Search by host, city, or address",className:"w-full bg-transparent text-sm text-slate-900 placeholder:text-slate-400 focus:outline-none"})]})}),l.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[l.jsx("div",{className:"w-full",children:l.jsxs(Us,{value:T,onValueChange:re,children:[l.jsx(Xr,{className:"w-full rounded-full border border-slate-100 bg-white px-4 py-2 text-left text-sm font-medium text-slate-600",children:l.jsx(Bs,{placeholder:"Country"})}),l.jsxs(Zr,{children:[l.jsx(er,{value:"all",children:"All countries"}),yy.map(P=>l.jsx(er,{value:P,children:P},P))]})]})}),l.jsx("div",{className:"w-full",children:l.jsxs(Us,{value:$,onValueChange:se,disabled:T==="all",children:[l.jsx(Xr,{className:"w-full rounded-full border border-slate-100 bg-white px-4 py-2 text-left text-sm font-medium text-slate-600",disabled:T==="all",children:l.jsx(Bs,{placeholder:T==="all"?"Choose Switzerland first":"City"})}),l.jsxs(Zr,{children:[l.jsx(er,{value:"all",children:"All cities in Switzerland"}),Gj.map(P=>l.jsx(er,{value:P,children:P},P))]})]})})]}),l.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[l.jsxs("div",{className:"grid w-full gap-3 sm:grid-cols-2",children:[l.jsxs("div",{className:"w-full rounded-[1.5rem] border border-slate-100 bg-white/90 p-4 shadow-sm",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Price range"}),l.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[l.jsx(We,{type:"number",inputMode:"numeric",min:"0",placeholder:"Min",value:F,onChange:P=>O(P.target.value),className:"rounded-full border-slate-200 bg-slate-50 text-sm"}),l.jsx("span",{className:"text-xs text-slate-400",children:"to"}),l.jsx(We,{type:"number",inputMode:"numeric",min:"0",placeholder:"Max",value:j,onChange:P=>z(P.target.value),className:"rounded-full border-slate-200 bg-slate-50 text-sm"})]}),l.jsx("p",{className:"mt-2 text-xs text-slate-400",children:"Set any minimum or maximum nightly rate."})]}),l.jsxs("div",{className:"w-full rounded-[1.5rem] border border-slate-100 bg-white/90 p-4 shadow-sm",children:[l.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Stay dates"}),l.jsxs(_E,{children:[l.jsx(EE,{asChild:!0,children:l.jsxs("button",{type:"button",className:"mt-3 flex w-full items-center justify-between rounded-full border border-slate-200 bg-slate-50 px-4 py-2 text-left text-sm font-medium text-slate-600 transition hover:border-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-200",children:[l.jsx("span",{children:wt}),l.jsx(Qg,{className:"h-4 w-4 text-slate-400"})]})}),l.jsxs(Iv,{className:"w-auto rounded-2xl border bg-white p-4 shadow-xl",align:"start",children:[l.jsx(wd,{mode:"range",numberOfMonths:2,selected:A,onSelect:P=>M(P),initialFocus:!0}),l.jsxs("div",{className:"mt-3 flex justify-between border-t pt-3",children:[l.jsx("p",{className:"text-xs text-slate-400",children:"Select a start and end date."}),l.jsx(Se,{type:"button",variant:"ghost",size:"sm",className:"text-xs text-slate-600",onClick:()=>M(void 0),children:"Clear"})]})]})]})]})]}),l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[Oi&&l.jsx("button",{type:"button",onClick:Oe,className:"text-xs font-medium text-slate-500 underline underline-offset-4",children:"Clear filters"}),l.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-slate-200 bg-white/80 p-1 text-sm font-medium text-slate-600",children:[l.jsx("button",{type:"button",onClick:()=>x("list"),className:`rounded-full px-4 py-1.5 transition ${y==="list"?"bg-slate-900 text-white shadow":"text-slate-500"}`,children:"List view"}),l.jsx("button",{type:"button",onClick:()=>x("map"),className:`rounded-full px-4 py-1.5 transition ${y==="map"?"bg-slate-900 text-white shadow":"text-slate-500"}`,children:"Map view"})]})]})]})]}),y==="map"?xy.length>0?l.jsx(f.Suspense,{children:l.jsx(I3,{listings:xy,userLocation:g,isLoading:S||w,onSelect:P=>{const Z=Ai.find(oe=>oe.id===P);Z&&_e(Z)}})}):l.jsx("div",{className:"rounded-[2rem] border border-dashed border-slate-200 bg-white/70 p-8 text-center text-sm text-slate-500",children:S||w?"Locating calming couches near you":"No plotted couches for the current filters. Try switching back to the list view or clearing filters."}):l.jsxs("section",{className:"space-y-6",children:[(w||S)&&l.jsx("p",{className:"text-center text-sm text-slate-500",children:w?"Loading the latest couches":"Pinning couch locations"}),!Ai.length&&!(w||S)?E==="mine"?l.jsxs("div",{className:"rounded-[2rem] border border-dashed border-slate-200 bg-white/80 p-10 text-center space-y-3",children:[l.jsx("p",{className:"text-base font-semibold text-slate-900",children:"You haven't published a listing yet."}),l.jsx("p",{className:"text-sm text-slate-500",children:"Create your listing shell and then use Edit listing to add your address, couch photos, and description."}),l.jsx(Se,{className:"rounded-full",disabled:he,onClick:Kj,children:he?"Creating...":"Create my listing"})]}):l.jsxs("div",{className:"rounded-[2rem] border border-dashed border-slate-200 bg-white/80 p-10 text-center",children:[l.jsx("p",{className:"text-base font-semibold text-slate-900",children:"No calming stays match that search"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Try clearing filters or searching a nearby neighborhood."})]}):l.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:Ai.map(P=>{var gn,Ur;const Z=sx(P),oe=P.addressLine&&P.addressLine!==Z?P.addressLine:null,X=G[P.id]??!1,Fe=!!oe&&oe.length>uk,de=X||!oe?oe:O3(oe),ke=P.hostId?Dt[P.hostId]??null:null,Ue=((gn=ke==null?void 0:ke.university)==null?void 0:gn.trim())||null,hr=((Ur=ke==null?void 0:ke.programName)==null?void 0:Ur.trim())||null,pr=ke!=null&&ke.programType?A3[ke.programType]??ke.programType:null,hs=ke!=null&&ke.programYear?`Year ${ke.programYear}`:null,mr=[hr,pr,hs].filter(Boolean).join("  "),st=ox(P),gr=we[P.id]??0,Pt=st[gr]??P.image,jn=st.length>1,Pn=Le=>{if(!jn)return;const vr=Le==="prev"?(gr-1+st.length)%st.length:(gr+1)%st.length;zn(P.id,vr)};return l.jsxs("article",{role:"button",tabIndex:0,onClick:Le=>_e(P,Le),onKeyDown:Le=>{(Le.key==="Enter"||Le.key===" ")&&(Le.preventDefault(),_e(P,Le))},className:"group cursor-pointer rounded-[1.75rem] border border-white/60 bg-white/80 shadow-xl shadow-blue-100/60 backdrop-blur transition duration-300 hover:-translate-y-1.5 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-300",children:[l.jsxs("div",{className:"relative h-64 overflow-hidden rounded-[1.5rem]",onTouchStart:Le=>{var vr;Lt.current[P.id]=((vr=Le.touches[0])==null?void 0:vr.clientX)??0},onTouchEnd:Le=>{var Tc;const vr=Lt.current[P.id];if(typeof vr!="number")return;const Pc=(((Tc=Le.changedTouches[0])==null?void 0:Tc.clientX)??vr)-vr;Math.abs(Pc)>40&&(Le.stopPropagation(),Pn(Pc>0?"prev":"next")),delete Lt.current[P.id]},children:[i&&l.jsx("button",{className:`absolute right-4 top-4 z-10 rounded-full bg-white/90 p-2 text-slate-600 shadow transition hover:scale-105 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-400 ${h.has(P.id)?"text-rose-500":""}`,"aria-label":h.has(P.id)?"Remove from wishlist":"Save to wishlist",onClick:Le=>et(Le,P),children:l.jsx(sd,{className:`h-5 w-5 ${h.has(P.id)?"fill-rose-500":""}`})}),l.jsx("img",{src:Pt??P.image,alt:P.title,className:"h-full w-full object-cover"}),jn&&l.jsxs("div",{className:"absolute bottom-4 left-1/2 hidden -translate-x-1/2 rounded-full bg-black/50 px-3 py-1 text-xs font-semibold text-white sm:flex",children:["Photo ",gr+1," / ",st.length]}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/70 via-slate-900/10"}),l.jsxs("div",{className:"absolute bottom-4 left-4 right-4 flex items-center justify-between text-white",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-lg font-semibold",children:P.price}),l.jsx("p",{className:"text-xs text-white/80",children:"per night"})]}),l.jsxs("p",{className:"text-xs text-white/80",children:["Hosted by ",P.host]})]})]}),l.jsxs("div",{className:"space-y-3 p-5",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:P.title}),l.jsx("span",{className:"text-sm font-semibold text-slate-700",children:P.price})]}),c&&E==="mine"&&P.hostId===(s==null?void 0:s.id)&&l.jsx("p",{className:`text-xs font-semibold uppercase tracking-wide ${P.isPublished===!1?"text-amber-600":"text-emerald-600"}`,children:P.isPublished===!1?"Draft  Not published":"Published"}),(Ue||mr)&&l.jsxs("div",{className:"space-y-0.5 text-xs text-slate-500",children:[Ue&&l.jsx("p",{className:"font-semibold text-slate-700",children:Ue}),mr&&l.jsx("p",{children:mr})]}),l.jsxs("p",{className:"flex items-center gap-2 text-sm text-slate-500",children:[l.jsx(Zg,{className:"h-4 w-4"}),l.jsxs("span",{className:"flex flex-wrap items-center gap-1",children:[Z,oe&&l.jsxs("span",{className:"ml-1 text-xs text-slate-400",children:[" ",de,Fe&&l.jsx("button",{type:"button",className:"ml-1 rounded-full px-2 py-0.5 text-[10px] font-semibold text-blue-600 hover:underline",onClick:Le=>{Le.stopPropagation(),Le.preventDefault(),ua(P.id)},children:X?"Hide":"Full address"})]})]})]}),l.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[c&&E==="mine"&&P.hostId===(s==null?void 0:s.id)&&l.jsx(Se,{size:"sm",className:"rounded-full bg-blue-600 text-xs text-white shadow hover:bg-blue-500",onClick:Le=>{Le.stopPropagation(),pe(P)},children:"Edit listing"}),c&&E==="mine"&&P.hostId===(s==null?void 0:s.id)&&l.jsx(Se,{size:"sm",variant:P.isPublished!==!1?"outline":"default",className:"rounded-full text-xs",disabled:!!Lr[P.id],onClick:Le=>{Le.stopPropagation(),Yj(P,P.isPublished===!1)},children:Lr[P.id]?"Saving...":P.isPublished===!1?"Publish listing":"Unpublish"}),l.jsx(Se,{variant:"ghost",size:"sm",className:"rounded-full bg-slate-800 text-white hover:bg-slate-700",onClick:Le=>{Le.stopPropagation(),_e(P,Le)},children:"View stay"})]})})]})]},P.id)})})]})]}),l.jsx(Pf,{open:W,onOpenChange:P=>{P||fs()},children:l.jsxs(_c,{className:"max-w-2xl",children:[l.jsxs(Ec,{children:[l.jsx(Cc,{children:"Edit listing"}),l.jsx(Tf,{children:"Fine-tune your couch details. Updates go live immediately."})]}),Y?l.jsxs("form",{onSubmit:Ie,className:"space-y-5",children:[l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"edit-title",children:"Listing title"}),l.jsx(We,{id:"edit-title",value:le.title,onChange:P=>Nn("title",P.target.value),disabled:ie})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"edit-price",children:"Price per night"}),l.jsx(We,{id:"edit-price",value:le.price,onChange:P=>Nn("price",P.target.value),placeholder:"25",disabled:ie})]})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{children:"Country"}),l.jsxs(Us,{value:le.country||"Switzerland",onValueChange:dr,disabled:ie,children:[l.jsx(Xr,{className:"rounded-2xl border-slate-200 bg-white",children:l.jsx(Bs,{placeholder:"Select country"})}),l.jsx(Zr,{children:yy.map(P=>l.jsx(er,{value:P,children:P},P))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{children:"City"}),l.jsxs(Us,{value:le.city||void 0,onValueChange:P=>Nn("city",P),disabled:ie||!Bf.length,children:[l.jsx(Xr,{className:"rounded-2xl border-slate-200 bg-white",children:l.jsx(Bs,{placeholder:Bf.length?"Select city":"Choose country first"})}),l.jsx(Zr,{children:Bf.map(P=>l.jsx(er,{value:P,children:P},P))})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"edit-address",children:"Street address"}),l.jsx(We,{id:"edit-address",value:Nt,onChange:P=>{Qt(P.target.value),Jt(null)},placeholder:"Enter your street",disabled:ie}),l.jsx("p",{className:"text-xs text-slate-500",children:"Exact details stay private until you approve a booking."}),Nt.trim().length>=3&&($r||us.length>0||!Ve)?l.jsxs("div",{className:"max-h-36 overflow-y-auto rounded-2xl border border-slate-200 bg-white",children:[$r&&l.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"Searching addresses"}),!$r&&us.length===0&&!Ve&&l.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches yet. Keep typing."}),us.map(oe=>l.jsx("button",{type:"button",className:`block w-full px-3 py-2 text-left text-sm transition hover:bg-blue-50 ${(Ve==null?void 0:Ve.displayName)===oe.displayName?"bg-blue-50":""}`,onClick:()=>{Jt(oe),Qt(oe.displayName),ur([])},children:oe.displayName},`${oe.lat}-${oe.lng}`))]}):null,Ve&&l.jsx("p",{className:"text-xs font-medium text-emerald-600",children:"Address confirmed "})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"edit-location",children:"Location description"}),l.jsx(We,{id:"edit-location",value:le.location,onChange:P=>Nn("location",P.target.value),placeholder:"Near Downtown Campus",disabled:ie})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"edit-description",children:"Description"}),l.jsx(ji,{id:"edit-description",value:le.description,onChange:P=>Nn("description",P.target.value),rows:4,disabled:ie})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"edit-checkin",children:"Check-in time"}),l.jsx(We,{id:"edit-checkin",type:"time",value:le.checkInTime,onChange:P=>Nn("checkInTime",P.target.value),disabled:ie})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(Te,{children:"Photos (up to 7)"}),l.jsxs("span",{className:"text-xs text-slate-500",children:[B.length,"/7 uploaded"]})]}),l.jsxs("div",{className:"flex flex-wrap gap-3",children:[B.length===0&&l.jsx("p",{className:"text-xs text-slate-500",children:"Add at least one photo so renters can see your couch."}),l.jsx("div",{className:"grid grid-cols-3 gap-3",children:B.map((P,Z)=>l.jsxs("div",{className:"relative h-20 w-full cursor-move overflow-hidden rounded-xl border",draggable:!0,onDragStart:oe=>{oe.dataTransfer.setData("text/plain",Z.toString())},onDragOver:oe=>oe.preventDefault(),onDrop:oe=>{oe.preventDefault();const X=Number(oe.dataTransfer.getData("text/plain")),Fe=Z;Number.isNaN(X)||Number.isNaN(Fe)||X===Fe||D(de=>{const ke=[...de],[Ue]=ke.splice(X,1);return ke.splice(Fe,0,Ue),ke})},children:[l.jsx("img",{src:P,alt:"Listing gallery",className:"h-full w-full object-cover"}),l.jsx("button",{type:"button",className:"absolute right-1 top-1 rounded-full bg-white/90 px-2 text-[10px] font-semibold text-slate-700 shadow",onClick:()=>mo(P),disabled:ie,children:"Remove"})]},P))})]}),l.jsxs("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-slate-50/80 p-4 text-center",onDragOver:P=>P.preventDefault(),onDrop:go,children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Drag and drop photos here"}),l.jsx("p",{className:"text-xs text-slate-500",children:"or click to browse files (PNG/JPG)"}),l.jsx(We,{id:"edit-photos",type:"file",accept:"image/*",multiple:!0,className:"mt-2 cursor-pointer",disabled:ie||B.length>=7,onChange:P=>po(P.target.files)})]}),U.length>0&&l.jsxs("p",{className:"text-xs text-slate-500",children:["Ready to upload: ",U.map(P=>P.name).join(", ")]}),l.jsx("p",{className:"text-xs text-slate-500",children:"Upload up to 7 photos. Drag tiles to reorder; the first one becomes your cover image."})]}),l.jsxs(Vv,{children:[l.jsx(Se,{type:"button",variant:"ghost",onClick:fs,disabled:ie,children:"Cancel"}),l.jsx(Se,{type:"submit",disabled:ie,children:ie?"Saving...":"Save changes"})]})]}):l.jsx("p",{className:"text-sm text-slate-500",children:"Select a listing to edit."})]})})]})};var dk={exports:{}},fk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mi=f;function W3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var z3=typeof Object.is=="function"?Object.is:W3,H3=mi.useState,V3=mi.useEffect,Y3=mi.useLayoutEffect,K3=mi.useDebugValue;function G3(e,t){var n=t(),r=H3({inst:{value:n,getSnapshot:t}}),s=r[0].inst,o=r[1];return Y3(function(){s.value=n,s.getSnapshot=t,Gh(s)&&o({inst:s})},[e,n,t]),V3(function(){return Gh(s)&&o({inst:s}),e(function(){Gh(s)&&o({inst:s})})},[e]),K3(n),n}function Gh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!z3(e,n)}catch{return!0}}function q3(e,t){return t()}var Q3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?q3:G3;fk.useSyncExternalStore=mi.useSyncExternalStore!==void 0?mi.useSyncExternalStore:Q3;dk.exports=fk;var J3=dk.exports;function X3(){return J3.useSyncExternalStore(Z3,()=>!0,()=>!1)}function Z3(){return()=>{}}var Yv="Avatar",[eB,Oz]=Kt(Yv),[tB,hk]=eB(Yv),pk=f.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,o]=f.useState("idle");return l.jsx(tB,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:l.jsx(fe.span,{...r,ref:t})})});pk.displayName=Yv;var mk="AvatarImage",gk=f.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...o}=e,a=hk(mk,n),i=nB(r,o),c=it(u=>{s(u),a.onImageLoadingStatusChange(u)});return ct(()=>{i!=="idle"&&c(i)},[i,c]),i==="loaded"?l.jsx(fe.img,{...o,ref:t,src:r}):null});gk.displayName=mk;var vk="AvatarFallback",yk=f.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,o=hk(vk,n),[a,i]=f.useState(r===void 0);return f.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>i(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&o.imageLoadingStatus!=="loaded"?l.jsx(fe.span,{...s,ref:t}):null});yk.displayName=vk;function lx(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function nB(e,{referrerPolicy:t,crossOrigin:n}){const r=X3(),s=f.useRef(null),o=r?(s.current||(s.current=new window.Image),s.current):null,[a,i]=f.useState(()=>lx(o,e));return ct(()=>{i(lx(o,e))},[o,e]),ct(()=>{const c=h=>()=>{i(h)};if(!o)return;const u=c("loaded"),d=c("error");return o.addEventListener("load",u),o.addEventListener("error",d),t&&(o.referrerPolicy=t),typeof n=="string"&&(o.crossOrigin=n),()=>{o.removeEventListener("load",u),o.removeEventListener("error",d)}},[o,n,t]),a}var wk=pk,xk=gk,bk=yk;const Sk=f.forwardRef(({className:e,...t},n)=>l.jsx(wk,{ref:n,className:ge("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Sk.displayName=wk.displayName;const _k=f.forwardRef(({className:e,...t},n)=>l.jsx(xk,{ref:n,className:ge("aspect-square h-full w-full",e),...t}));_k.displayName=xk.displayName;const Ek=f.forwardRef(({className:e,...t},n)=>l.jsx(bk,{ref:n,className:ge("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Ek.displayName=bk.displayName;const rB=8,Ii=e=>({id:e.id,couchId:e.couch_id,couchTitle:e.couch_title,hostId:e.host_id,hostName:e.host_name,renterId:e.renter_id,renterName:e.renter_name,stayStart:e.stay_start,stayEnd:e.stay_end,nights:e.nights,pricePerNight:e.price_per_night,status:e.status??"pending",createdAt:e.created_at,paymentStatus:e.payment_status,paymentDueAt:e.payment_due_at,paymentIntentId:e.payment_intent_id,paymentClientSecret:e.payment_client_secret,hasCheckInPhoto:!!e.has_checkin_photo,payoutStatus:e.payout_status,payoutReleasedAt:e.payout_released_at}),Ql=e=>e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)?e:null,Ck=e=>{if(!e)return[];const t=new Set;return e.forEach(n=>{if(!n)return;const r=n.trim();r&&t.add(r)}),Array.from(t)},Wm=e=>e.replace(/[%_]/g,t=>`\\${t}`).replace(/,/g,"\\,"),sB=e=>{if(!e)return[];const t=new Set;return e.forEach(n=>{if(!n)return;const r=n.trim();r&&t.add(r)}),Array.from(t)},oB=24*60*60*1e3,zm=e=>{const t=new Date(e);if(Number.isNaN(t.getTime())){const n=new Date;return new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime()}return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()},cx=(e,t)=>{const n=zm(e);return n>t?n:t+oB},kk=async e=>{const t={couch_id:e.couchId,couch_title:e.couchTitle,host_id:Ql(e.hostId),host_name:e.hostEmail??e.hostName,renter_id:Ql(e.renterId),renter_name:e.renterName,stay_start:e.stayStart,stay_end:e.stayEnd,nights:e.nights,price_per_night:e.pricePerNight,status:e.status??"pending"};e.createdAt&&(t.created_at=e.createdAt);const{data:n,error:r}=await ce.from("booking_requests").insert(t).select("*").single();if(r)throw r;return Ii(n)},Rf=async(e,t)=>{const n=Ql(e),r=Ck(t);if(!n&&!r.length)return[];let s=ce.from("booking_requests").select("*").order("created_at",{ascending:!1});const o=[];n&&o.push(`renter_id.eq.${n}`),r.forEach(c=>{o.push(`renter_name.ilike.%${Wm(c)}%`)}),o.length===1&&o[0].startsWith("renter_id.eq.")?s=s.eq("renter_id",n):o.length>0&&(s=s.or(o.join(",")));const{data:a,error:i}=await s;if(i)throw i;return(a??[]).map(Ii)},aB=async(e,t,n)=>{const r=Ql(e),s=Ck(t),o=sB(n);if(!r&&!s.length&&!o.length)return[];let a=ce.from("booking_requests").select("*").order("created_at",{ascending:!1});const i=[];r&&i.push(`host_id.eq.${r}`),s.forEach(d=>{i.push(`host_name.ilike.%${Wm(d)}%`)}),o.forEach(d=>{i.push(`couch_id.eq.${Wm(d)}`)}),i.length===1&&i[0].startsWith("host_id.eq.")?a=a.eq("host_id",r):i.length>0&&(a=a.or(i.join(",")));const{data:c,error:u}=await a;if(u)throw u;return(c??[]).map(Ii)},iB=async(e,t)=>{const{data:n,error:r}=await ce.from("booking_requests").select("*").eq("id",e).single();if(r)throw r;if(!n)throw new Error("Booking request not found.");if(t==="approved"&&n.couch_id&&n.stay_start&&n.stay_end){const{data:i,error:c}=await ce.from("booking_requests").select("id, stay_start, stay_end").eq("couch_id",n.couch_id).eq("status","approved").neq("id",e);if(c)throw c;const u=zm(n.stay_start),d=cx(n.stay_end,u);if((i??[]).some(p=>{const m=zm(p.stay_start),w=cx(p.stay_end,m);return u<w&&d>m}))throw new Error("Another booking has already been approved for this listing during the selected dates.")}const s={status:t};if(t==="approved"){const i=new Date(Date.now()+rB*60*60*1e3).toISOString();s.payment_status="pending",s.payment_due_at=i}else n.payment_status!=="paid"&&(s.payment_status=null,s.payment_due_at=null);const{data:o,error:a}=await ce.from("booking_requests").update(s).eq("id",e).select("*").single();if(a)throw a;return Ii(o)},lB=async(e,t)=>{if(!Ql(t))throw new Error("Sign in to cancel your booking request.");const{data:r,error:s}=await ce.functions.invoke("cancel-booking",{body:{requestId:e}});if(s)throw s;if(!(r!=null&&r.booking))throw new Error("Unable to cancel booking request.");return Ii(r.booking)},Nk=async(e,t)=>{const{data:n,error:r}=await ce.from("direct_messages").select("id, sender_id, receiver_id, content, created_at").or(`and(sender_id.eq.${e},receiver_id.eq.${t}),and(sender_id.eq.${t},receiver_id.eq.${e})`).order("created_at",{ascending:!0});if(r)throw r;return n??[]},jk=async(e,t,n)=>{const{data:r,error:s}=await ce.from("direct_messages").insert({sender_id:e,receiver_id:t,content:n}).select().single();if(s)throw s;return r??null},cB=async e=>{const{data:t,error:n}=await ce.from("direct_messages").select("id, sender_id, receiver_id, content, created_at").or(`sender_id.eq.${e},receiver_id.eq.${e}`).order("created_at",{ascending:!1}).limit(200);if(n)throw n;const r=new Map;return(t??[]).forEach(s=>{const o=s.sender_id===e?s.receiver_id:s.sender_id;r.has(o)||r.set(o,s)}),Array.from(r.entries()).map(([s,o])=>({otherUserId:s,lastMessage:o}))},uB={bsc:"Bachelor (BSc)",msc:"Master (MSc)",phd:"Doctorate (PhD)",other:"Other program"},dB=e=>{if(!(e!=null&&e.start)||!(e!=null&&e.end))return null;const t=At(new Date(e.start)),n=xv(new Date(e.end));return Number.isNaN(t.getTime())||Number.isNaN(n.getTime())?null:{start:t,end:n}},ux=(e,t)=>{if(!(e!=null&&e.from)||!(e!=null&&e.to))return!1;const n=At(new Date),r=At(e.from),s=xv(e.to);return Xo(r,n)?!1:t?!Xo(r,t.start)&&!Yl(s,t.end):!0},dx=(e,t)=>{const n=At(e),r=At(new Date);return Xo(n,r)?!0:t?Xo(n,t.start)||Yl(n,t.end):!1},fB=[Qo,fd,hd,pd,md,gd],hB=e=>{if(!(e!=null&&e.start)||!(e!=null&&e.end))return"Flexible availability";const t=new Date(e.start),n=new Date(e.end);if(Number.isNaN(t.getTime())||Number.isNaN(n.getTime()))return"Flexible availability";const r=t.getMonth()===n.getMonth(),s=Me(t,"MMM d"),o=r?Me(n,"d"):Me(n,"MMM d");return`${s}-${o}`},pB=e=>{if(!e)return"$0";const t=e.trim();return t?t.startsWith("$")?t:`$${t}`:"$0"},qh=e=>e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)?e:null,mB=()=>{var mo,go;const e=lr(),t=aa(),n=ID(),r=(mo=t.state)==null?void 0:mo.couch,{toast:s}=Ar(),{profile:o,session:a}=Bn(),i=$v(o,a),[c,u]=f.useState(),[d,h]=f.useState(!1),[p,m]=f.useState(r??null),[w,v]=f.useState(!r),[y,x]=f.useState(null),[g,b]=f.useState(null),[S,_]=f.useState(null),[C,N]=f.useState([]),[T,L]=f.useState(!1),[$,V]=f.useState(null),[F,O]=f.useState(""),[j,z]=f.useState(!1),[A,M]=f.useState(!1),[E,R]=f.useState(!1),[W,J]=f.useState(!1),[Y,ue]=f.useState(!1),[B,D]=f.useState(0),U=p,H=U?dB(U.availability):null,ie=(c==null?void 0:c.from)&&(c==null?void 0:c.to),ye=ie?ux(c,H):!1,he=ie?Math.max(1,Mn(At(c.to),At(c.from))):0,be=f.useCallback(async()=>{if(g!=null&&g.hostId)return g;if(!U)throw new Error("Listing details are not available yet.");const pe=U.host??"Host",Ie=U.hostEmail??null,Oe=qh(U.hostId??null);if(Oe)return{hostId:Oe,hostName:pe,hostEmail:Ie};const te=await Yh({listingId:U.id,hostEmail:Ie,hostName:pe});if(te!=null&&te.hostId){const re=qh(te.hostId);if(re)return{hostId:re,hostName:te.hostName??pe,hostEmail:te.hostEmail??Ie}}throw new Error("Unable to determine host details for this listing.")},[U,g]);if(f.useEffect(()=>{if(r){m(r),v(!1);return}const pe=n.id;if(!pe){x("Missing listing identifier."),v(!1);return}let Ie=!0;return(async()=>{try{v(!0);const{data:te,error:re}=await ce.from("listings").select("id, user_id, host_name, host_email, address, property_type, price_per_night, check_in_time, availability_start, availability_end, photos, documents, created_at").eq("id",pe).maybeSingle();if(re)throw re;if(!te)throw new Error("Listing not found.");const se=te.availability_start&&te.availability_end?{start:te.availability_start,end:te.availability_end}:null,_e=Array.isArray(te.photos)?te.photos:[],et=_e[0]??fB[0],pt=te.property_type?`${te.property_type==="house"?"House":"Flat"} couch`:"Community couch",jt={id:te.id,image:et,price:pB(te.price_per_night?String(te.price_per_night):"$0"),title:pt,host:te.host_name??"Community host",hostEmail:te.host_email??null,location:te.address??"Address shared after booking",country:null,city:null,addressLine:te.address??null,availableDates:se?hB(se):te.check_in_time?`Check-in after ${te.check_in_time}`:"Flexible availability",description:te.created_at?`Listing published on ${new Date(te.created_at).toLocaleDateString()}`:"Listing added by our host community.",hostId:te.user_id??null,availability:se,coordinates:null,gallery:_e.length?_e:et?[et]:[]};Ie&&(m(jt),x(null))}catch(te){if(!Ie)return;const re=te instanceof Error?te.message:"Unable to load listing.";x(re),m(null)}finally{Ie&&v(!1)}})(),()=>{Ie=!1}},[r,n.id]),f.useEffect(()=>{y&&s({title:"Listing unavailable",description:y,variant:"destructive"})},[y,s]),f.useEffect(()=>{if(typeof window>"u")return;let pe=!0;const Ie=async()=>{if(!i||!(U!=null&&U.id)){pe&&M(!1);return}R(!0);try{const te=await Cd(i);if(!pe)return;const re=Ed(U.id),se=te.some(_e=>_e.couchId===U.id||_e.storageId===re);M(se)}catch(te){pe&&(console.warn("Unable to sync wishlist state",te),M(!1))}finally{pe&&R(!1)}};Ie();const Oe=()=>Ie();return window.addEventListener("wishlist-updated",Oe),()=>{pe=!1,window.removeEventListener("wishlist-updated",Oe)}},[U==null?void 0:U.id,i]),f.useEffect(()=>{if(!U)return;let pe=!0;return(async()=>{var Oe;try{const te=await be();if(!pe)return;b(te);try{const se=await R3(te.hostId);if(!pe)return;_({name:(Oe=se==null?void 0:se.full_name)!=null&&Oe.trim()?se.full_name:(se==null?void 0:se.email)??te.hostName,role:(se==null?void 0:se.user_role)??null,university:(se==null?void 0:se.university)??null,programName:(se==null?void 0:se.program_name)??null,programType:(se==null?void 0:se.program_type)??null,programYear:(se==null?void 0:se.program_year)??null,avatarUrl:(se==null?void 0:se.avatar_url)??null})}catch(se){console.warn("Failed to fetch host profile",se),pe&&_({name:te.hostName,role:null,university:null,programName:null,programType:null,programYear:null,avatarUrl:null})}if(!(o!=null&&o.id))return;L(!0);const re=await Nk(o.id,te.hostId);if(!pe)return;N(re),V(null)}catch(te){if(!pe)return;const re=te instanceof Error?te.message:"Unable to load conversation.";V(re)}finally{pe&&L(!1)}})(),()=>{pe=!1}},[U,o==null?void 0:o.id,be]),f.useEffect(()=>{if(!(o!=null&&o.id)||!(g!=null&&g.hostId))return;const pe=ce.channel(`direct-messages-${o.id}-${g.hostId}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"direct_messages"},Ie=>{const Oe=Ie.new;(Oe.sender_id===o.id&&Oe.receiver_id===g.hostId||Oe.sender_id===g.hostId&&Oe.receiver_id===o.id)&&N(te=>te.some(re=>re.id===Oe.id)?te:[...te,Oe])}).subscribe();return()=>{ce.removeChannel(pe)}},[o==null?void 0:o.id,g==null?void 0:g.hostId]),w)return l.jsx("main",{className:"min-h-screen flex items-center justify-center bg-background",children:l.jsx("p",{className:"text-muted-foreground",children:"Loading listing"})});if(!U)return l.jsx("main",{className:"min-h-screen flex items-center justify-center bg-background",children:l.jsxs("div",{className:"text-center space-y-3",children:[l.jsx("h1",{className:"text-2xl font-semibold",children:"Listing not available"}),l.jsx("p",{className:"text-muted-foreground text-sm",children:y??"We couldn't find that couch."}),l.jsx(Se,{variant:"outline",onClick:()=>e("/listings",{replace:!0}),children:"Back to listings"})]})});const le=80,I=U.location.length>le,G=I&&!Y?`${U.location.slice(0,le).trimEnd()}`:U.location,ne=pe=>{if(!I)return null;const Ie=pe==="light"?"text-xs font-semibold text-white underline underline-offset-4":"text-xs font-semibold text-sketch-blue underline underline-offset-4";return l.jsx("button",{type:"button",className:`ml-2 ${Ie}`,onClick:()=>ue(Oe=>!Oe),children:Y?"Hide full address":"Show full address"})},we=async()=>{var re,se;if(!(c!=null&&c.from)||!(c!=null&&c.to)){s({title:"Select stay dates",description:"Pick your check-in and check-out dates before requesting a booking.",variant:"destructive"});return}if(!ux(c,H)){s({title:"Dates unavailable",description:"Please choose dates within the host's availability window.",variant:"destructive"});return}if(!(o!=null&&o.id)){s({title:"Sign in required",description:"Sign in to request a booking.",variant:"destructive"});return}const pe=At(new Date),Ie=At(c.from);if(Xo(Ie,pe)){s({title:"Choose future dates",description:"Bookings can only be requested for future stays.",variant:"destructive"});return}h(!0);const Oe=At(c.from).toISOString(),te=xv(c.to).toISOString();try{const _e=g??await Yh({listingId:U.id,hostEmail:U.hostEmail??null,hostName:U.host});if(!_e||!_e.hostId)throw new Error("We couldn't find a host for this listing. Try refreshing the listings page.");const et=g??{hostId:_e.hostId,hostName:_e.hostName??U.host??"Host",hostEmail:_e.hostEmail??U.hostEmail??null},pt=(re=o.id)==null?void 0:re.trim(),jt=(se=et.hostId)==null?void 0:se.trim();if(pt&&jt&&pt===jt){s({title:"This is your couch",description:"Hosts can't request bookings for their own listings.",variant:"destructive"});return}g||b(et),await kk({couchId:U.id,couchTitle:U.title,hostId:et.hostId,hostName:et.hostName,hostEmail:et.hostEmail??void 0,renterId:qh(o.id),renterName:o.full_name??o.email??"Guest renter",stayStart:Oe,stayEnd:te,nights:he,pricePerNight:U.price,status:"pending",createdAt:new Date().toISOString()}),s({title:"Booking request sent",description:"We'll share your booking request with the host."}),u(void 0)}catch(_e){console.error("Failed to create booking request",_e),s({title:"Request failed",description:_e instanceof Error?_e.message:"We couldn't share your request. Please try again.",variant:"destructive"})}finally{h(!1)}},Ze=async pe=>{if(pe.preventDefault(),!(o!=null&&o.id)){V("Sign in to message the host.");return}let Ie=g;if(!Ie){const te=await Yh({listingId:U.id,hostEmail:U.hostEmail??null,hostName:U.host});if(!te||!te.hostId){V("Unable to load host details.");return}Ie={hostId:te.hostId,hostName:te.hostName??U.host??"Host",hostEmail:te.hostEmail??U.hostEmail??null},b(Ie)}if(!Ie)return;if(o.id===Ie.hostId){V("You cannot message yourself as the host.");return}const Oe=F.trim();if(!Oe){V("Please enter a message.");return}z(!0),V(null);try{const te=await jk(o.id,Ie.hostId,Oe);te&&N(re=>[...re,te]),O("")}catch(te){const re=te instanceof Error?te.message:"Failed to send message.";V(re)}finally{z(!1)}},Dt=ie?`${Me(c.from,"MMM d, yyyy")}  ${Me(c.to,"MMM d, yyyy")}`:"Select stay dates",pn=c!=null&&c.from?Me(c.from,"EEE, MMM d"):"Pick a start date",Lr=c!=null&&c.to?Me(c.to,"EEE, MMM d"):c!=null&&c.from?"Select an end date":"Pick an end date",mn=ye?`${he}`:"",Nt=(go=S==null?void 0:S.name)!=null&&go.trim()?S.name:U.host,Qt=Nt?Nt.charAt(0).toUpperCase():"H",us=(S==null?void 0:S.role)??"Community host",ur=(S==null?void 0:S.avatarUrl)??null,Ve=(S==null?void 0:S.university)??null,Jt=(S==null?void 0:S.programName)??null,$r=S!=null&&S.programType?uB[S.programType]??S.programType:null,Fr=S!=null&&S.programYear?`Year ${S.programYear}`:null;U.availability;const wt=f.useMemo(()=>{var Ie;if(!U)return[];if(Array.isArray(U.gallery)&&U.gallery.length)return U.gallery;const pe=(Ie=U.availability)==null?void 0:Ie.photos;return Array.isArray(pe)&&pe.length?pe:U.image?[U.image]:[]},[U]),Oi=wt.length>1,ds=wt[B]??(U==null?void 0:U.image)??Qo;f.useEffect(()=>{D(0)},[U==null?void 0:U.id,wt.length]);const Nn=f.useCallback(()=>{D(pe=>wt.length?(pe-1+wt.length)%wt.length:0)},[wt.length]),dr=f.useCallback(()=>{D(pe=>wt.length?(pe+1)%wt.length:0)},[wt.length]),ua=!!(g!=null&&g.hostId&&(o!=null&&o.id)&&o.id!==g.hostId),zn=!!(g!=null&&g.hostId&&(o!=null&&o.id)&&o.id===g.hostId),fs=()=>u(void 0),po=async()=>{if(U){if(!i){s({title:"Sign in to save couches",description:"Create an account or sign in to keep a wishlist.",variant:"destructive"});return}J(!0);try{A?(await Fv(i,U.id),M(!1),s({title:"Removed from wishlist",description:`${U.title} is no longer saved.`})):(await tC(i,U.id,WC(U)),M(!0),s({title:"Saved to wishlist",description:`${U.title} was added for later.`}))}catch(pe){console.error("Wishlist update failed",pe),s({title:"Unable to update wishlist",description:"Please try again shortly.",variant:"destructive"})}finally{J(!1)}}};return l.jsxs("main",{className:"dreamy-bg min-h-screen",children:[l.jsx("header",{className:"border-b border-sketch/70 bg-white/90 backdrop-blur-sm",children:l.jsxs("div",{className:"mx-auto flex max-w-6xl items-center gap-3 px-4 py-3",children:[l.jsxs(Se,{variant:"ghost",size:"icon",onClick:()=>e("/listings"),className:"rounded-full border border-transparent hover:border-sketch/70",children:[l.jsx(SI,{className:"h-5 w-5 text-sketch-blue"}),l.jsx("span",{className:"sr-only",children:"Back to listings"})]}),l.jsx("p",{className:"hidden text-sm text-muted-foreground sm:block",children:"Browse more community couches"})]})}),l.jsxs("div",{className:"mx-auto max-w-6xl space-y-10 px-4 py-8",children:[l.jsx("section",{className:"overflow-hidden rounded-[32px] border-2 border-sketch bg-white shadow-[0_25px_80px_rgba(30,64,175,0.12)]",children:l.jsxs("div",{className:"relative h-[260px] sm:h-[360px]",children:[l.jsx("img",{src:ds,alt:U.title,className:"h-full w-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/75 via-black/10 to-transparent"}),Oi&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{type:"button",onClick:Nn,className:"absolute left-4 top-1/2 hidden -translate-y-1/2 rounded-full border border-white/50 bg-white/70 p-2 text-slate-700 shadow-md transition hover:bg-white sm:flex",children:[l.jsx("span",{className:"sr-only",children:"Previous photo"}),l.jsx(C_,{className:"h-4 w-4"})]}),l.jsxs("button",{type:"button",onClick:dr,className:"absolute right-4 top-1/2 hidden -translate-y-1/2 rounded-full border border-white/50 bg-white/70 p-2 text-slate-700 shadow-md transition hover:bg-white sm:flex",children:[l.jsx("span",{className:"sr-only",children:"Next photo"}),l.jsx(Xg,{className:"h-4 w-4"})]}),l.jsxs("div",{className:"absolute bottom-4 left-1/2 flex -translate-x-1/2 gap-2 rounded-full bg-black/40 px-3 py-1 text-xs font-medium text-white",children:[l.jsxs("span",{children:["Photo ",B+1]}),l.jsxs("span",{className:"opacity-70",children:["/ ",wt.length]})]})]}),l.jsx("div",{className:"absolute right-5 top-5 flex gap-2",children:l.jsxs("button",{type:"button",onClick:po,disabled:W||E,className:`rounded-full border border-white/50 bg-black/30 p-3 text-white backdrop-blur transition hover:bg-black/50 ${A?"text-rose-400":""}`,children:[l.jsx(sd,{className:`h-5 w-5 ${A?"fill-rose-400":""}`}),l.jsx("span",{className:"sr-only",children:A?"Remove from wishlist":"Save to wishlist"})]})}),l.jsxs("div",{className:"absolute inset-x-0 bottom-0 space-y-6 px-6 pb-6 pt-10 text-white sm:px-10",children:[l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/70",children:"Community stay"}),l.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:U.title})]}),l.jsxs("div",{className:"text-4xl font-bold",children:[U.price,l.jsx("span",{className:"ml-1 text-sm font-normal text-white/80",children:"/night"})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-white/40 bg-white/10 px-4 py-1.5 font-medium backdrop-blur",children:[l.jsx(Zg,{className:"h-4 w-4"}),l.jsxs("span",{className:"flex items-center gap-2",children:[G,ne("light")]})]}),Nt&&l.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-white/40 bg-white/10 px-4 py-1.5 font-medium backdrop-blur",children:[l.jsx(NI,{className:"h-4 w-4"}),"Hosted by ",Nt]})]})]})]})}),l.jsxs("div",{className:"grid gap-8 lg:grid-cols-[1.7fr,1fr]",children:[l.jsxs("section",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-6 rounded-[28px] border-2 border-sketch bg-white/95 p-6 shadow-sm",children:[l.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(Sk,{className:"h-14 w-14 border border-sketch/30",children:[l.jsx(_k,{src:ur??void 0,alt:`${Nt} profile photo`,className:"h-full w-full object-cover"}),l.jsx(Ek,{className:"bg-sketch-blue/10 text-xl font-semibold text-sketch-blue",children:Qt})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Host"}),l.jsx("p",{className:"text-xl font-semibold text-sketch-dark",children:Nt}),us&&l.jsx("p",{className:"text-sm text-muted-foreground",children:us})]})]})}),l.jsxs("div",{className:"space-y-1 text-sm",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Location"}),l.jsxs("p",{className:"text-base font-semibold text-sketch-dark",children:[G,ne("dark")]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Exact address shared after booking"})]}),l.jsxs("div",{className:"rounded-2xl border border-dashed border-sketch/60 p-4",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Price"}),l.jsx("p",{className:"text-lg font-semibold text-sketch-dark",children:U.price}),l.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Per night"})]}),(Ve||Jt||$r)&&l.jsxs("div",{className:"rounded-2xl border border-dashed border-sketch/60 p-4",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Student profile"}),l.jsx("p",{className:"text-lg font-semibold text-sketch-dark",children:Ve??"University not shared yet"}),l.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:[Jt??"Program details coming soon",$r&&`  ${$r}`,Fr&&`  ${Fr}`]})]})]}),l.jsxs("div",{className:"rounded-[28px] border-2 border-sketch bg-white p-6 space-y-3",children:[l.jsx("h3",{className:"text-lg font-semibold text-sketch-dark",children:"About this couch"}),l.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:U.description})]})]}),l.jsxs("section",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-5 rounded-[28px] border-2 border-sketch bg-white p-6 shadow-lg shadow-sketch-blue/5",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Request a stay"}),l.jsx("h3",{className:"text-2xl font-semibold text-sketch-dark",children:"Plan your visit"})]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:ye&&ie?`${he} night${he===1?"":"s"}`:"Flexible"})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[l.jsx("p",{children:"Select a start and end date for your stay."}),ie&&l.jsx("button",{type:"button",onClick:fs,className:"text-xs font-medium uppercase tracking-wide text-sketch-blue hover:underline",children:"Clear"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"sm:hidden",children:l.jsxs(_E,{children:[l.jsx(EE,{asChild:!0,children:l.jsx(Se,{variant:"outline",className:"w-full justify-between text-left font-normal",children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(Qg,{className:"h-4 w-4"}),Dt]})})}),l.jsx(Iv,{align:"start",className:"p-0",children:l.jsx(wd,{initialFocus:!0,mode:"range",numberOfMonths:1,selected:c,onSelect:u,disabled:pe=>dx(pe,H)})})]})}),l.jsx("div",{className:"hidden rounded-2xl border border-dashed border-sketch/60 bg-muted/40 p-3 sm:block",children:l.jsx(wd,{initialFocus:!0,mode:"range",numberOfMonths:2,selected:c,onSelect:u,disabled:pe=>dx(pe,H)})})]}),l.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[l.jsxs("div",{className:"rounded-2xl border border-dashed border-sketch/60 p-4",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Check-in"}),l.jsx("p",{className:"text-base font-semibold text-sketch-dark",children:pn})]}),l.jsxs("div",{className:"rounded-2xl border border-dashed border-sketch/60 p-4",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Check-out"}),l.jsx("p",{className:"text-base font-semibold text-sketch-dark",children:Lr})]}),l.jsxs("div",{className:"rounded-2xl border border-dashed border-sketch/60 p-4",children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Nights"}),l.jsx("p",{className:"text-3xl font-semibold text-sketch-dark",children:mn})]})]}),ie&&ye&&l.jsxs("div",{className:"rounded-2xl bg-muted/40 px-4 py-2 text-sm text-muted-foreground",children:["You're requesting ",he," night",he===1?"":"s"," from ",Me(c.from,"MMM d")," to ",Me(c.to,"MMM d"),"."]}),ie&&!ye&&l.jsx("div",{className:"rounded-2xl border border-destructive/40 bg-destructive/10 px-4 py-2 text-sm text-destructive",children:"The selected dates are outside the host's availability."}),l.jsx(Se,{className:"w-full rounded-full text-base font-semibold",size:"lg",onClick:we,disabled:!ye||d,children:d?"Sending request...":"Request booking"})]}),l.jsxs("section",{className:"space-y-4 rounded-[28px] border-2 border-sketch bg-white p-6",children:[l.jsxs("header",{className:"space-y-1",children:[l.jsxs("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:["Chat with ",Nt]}),l.jsx("h3",{className:"text-xl font-semibold text-sketch-dark",children:"Coordinate details"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Start a direct conversation with the host to make sure the stay fits what you need."})]}),!(g!=null&&g.hostId)&&l.jsx("p",{className:"text-sm text-muted-foreground",children:"Messaging is unavailable for this listing."}),zn&&l.jsx("p",{className:"text-sm text-muted-foreground",children:"You are viewing your own listing. Guests will be able to message you here."}),ua&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"h-64 space-y-3 overflow-y-auto rounded-2xl border border-dashed border-sketch/60 bg-muted/40 p-3",children:[T&&l.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading conversation"}),!T&&C.length===0&&l.jsx("p",{className:"text-sm text-muted-foreground",children:"No messages yet. Say hello!"}),C.map(pe=>l.jsxs("div",{className:`max-w-[80%] rounded-2xl px-3 py-2 text-sm shadow-sm ${pe.sender_id===o.id?"ml-auto bg-primary text-primary-foreground":"mr-auto bg-card"}`,children:[l.jsx("p",{className:"whitespace-pre-line break-words",children:pe.content}),l.jsx("p",{className:"mt-1 text-[11px] opacity-70",children:Me(new Date(pe.created_at),"MMM d, yyyy  h:mm a")})]},pe.id))]}),l.jsxs("form",{onSubmit:Ze,className:"space-y-2",children:[l.jsx(ji,{value:F,onChange:pe=>{O(pe.target.value),$&&V(null)},placeholder:"Write a message to the host",rows:3}),$&&l.jsx("p",{className:"text-sm text-destructive",children:$}),l.jsx(Se,{type:"submit",disabled:j||!F.trim(),children:j?"Sending":"Send message"})]})]}),!(o!=null&&o.id)&&(g==null?void 0:g.hostId)&&!zn&&l.jsx("p",{className:"text-sm text-destructive",children:"Sign in to start a conversation with this host."})]})]})]})]})]})},Kv=f.forwardRef(({className:e,...t},n)=>l.jsx("div",{ref:n,className:ge("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Kv.displayName="Card";const Pk=f.forwardRef(({className:e,...t},n)=>l.jsx("div",{ref:n,className:ge("flex flex-col space-y-1.5 p-6",e),...t}));Pk.displayName="CardHeader";const Gv=f.forwardRef(({className:e,...t},n)=>l.jsx("h3",{ref:n,className:ge("text-2xl font-semibold leading-none tracking-tight",e),...t}));Gv.displayName="CardTitle";const qv=f.forwardRef(({className:e,...t},n)=>l.jsx("p",{ref:n,className:ge("text-sm text-muted-foreground",e),...t}));qv.displayName="CardDescription";const Tk=f.forwardRef(({className:e,...t},n)=>l.jsx("div",{ref:n,className:ge("p-6 pt-0",e),...t}));Tk.displayName="CardContent";const gB=f.forwardRef(({className:e,...t},n)=>l.jsx("div",{ref:n,className:ge("flex items-center p-6 pt-0",e),...t}));gB.displayName="CardFooter";var Qh="rovingFocusGroup.onEntryFocus",vB={bubbles:!1,cancelable:!0},kc="RovingFocusGroup",[Hm,Rk,yB]=tf(kc),[wB,If]=Kt(kc,[yB]),[xB,bB]=wB(kc),Ik=f.forwardRef((e,t)=>l.jsx(Hm.Provider,{scope:e.__scopeRovingFocusGroup,children:l.jsx(Hm.Slot,{scope:e.__scopeRovingFocusGroup,children:l.jsx(SB,{...e,ref:t})})}));Ik.displayName=kc;var SB=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,p=f.useRef(null),m=Ce(t,p),w=Sc(o),[v,y]=as({prop:a,defaultProp:i??null,onChange:c,caller:kc}),[x,g]=f.useState(!1),b=it(u),S=Rk(n),_=f.useRef(!1),[C,N]=f.useState(0);return f.useEffect(()=>{const T=p.current;if(T)return T.addEventListener(Qh,b),()=>T.removeEventListener(Qh,b)},[b]),l.jsx(xB,{scope:n,orientation:r,dir:w,loop:s,currentTabStopId:v,onItemFocus:f.useCallback(T=>y(T),[y]),onItemShiftTab:f.useCallback(()=>g(!0),[]),onFocusableItemAdd:f.useCallback(()=>N(T=>T+1),[]),onFocusableItemRemove:f.useCallback(()=>N(T=>T-1),[]),children:l.jsx(fe.div,{tabIndex:x||C===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:Q(e.onMouseDown,()=>{_.current=!0}),onFocus:Q(e.onFocus,T=>{const L=!_.current;if(T.target===T.currentTarget&&L&&!x){const $=new CustomEvent(Qh,vB);if(T.currentTarget.dispatchEvent($),!$.defaultPrevented){const V=S().filter(A=>A.focusable),F=V.find(A=>A.active),O=V.find(A=>A.id===v),z=[F,O,...V].filter(Boolean).map(A=>A.ref.current);Mk(z,d)}}_.current=!1}),onBlur:Q(e.onBlur,()=>g(!1))})})}),Ok="RovingFocusGroupItem",Ak=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,children:a,...i}=e,c=Tr(),u=o||c,d=bB(Ok,n),h=d.currentTabStopId===u,p=Rk(n),{onFocusableItemAdd:m,onFocusableItemRemove:w,currentTabStopId:v}=d;return f.useEffect(()=>{if(r)return m(),()=>w()},[r,m,w]),l.jsx(Hm.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:l.jsx(fe.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...i,ref:t,onMouseDown:Q(e.onMouseDown,y=>{r?d.onItemFocus(u):y.preventDefault()}),onFocus:Q(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Q(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const x=CB(y,d.orientation,d.dir);if(x!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let b=p().filter(S=>S.focusable).map(S=>S.ref.current);if(x==="last")b.reverse();else if(x==="prev"||x==="next"){x==="prev"&&b.reverse();const S=b.indexOf(y.currentTarget);b=d.loop?kB(b,S+1):b.slice(S+1)}setTimeout(()=>Mk(b))}}),children:typeof a=="function"?a({isCurrentTabStop:h,hasTabStop:v!=null}):a})})});Ak.displayName=Ok;var _B={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function EB(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function CB(e,t,n){const r=EB(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return _B[r]}function Mk(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function kB(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Dk=Ik,Lk=Ak,Qv="Radio",[NB,$k]=Kt(Qv),[jB,PB]=NB(Qv),Fk=f.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:o,disabled:a,value:i="on",onCheck:c,form:u,...d}=e,[h,p]=f.useState(null),m=Ce(t,y=>p(y)),w=f.useRef(!1),v=h?u||!!h.closest("form"):!0;return l.jsxs(jB,{scope:n,checked:s,disabled:a,children:[l.jsx(fe.button,{type:"button",role:"radio","aria-checked":s,"data-state":zk(s),"data-disabled":a?"":void 0,disabled:a,value:i,...d,ref:m,onClick:Q(e.onClick,y=>{s||c==null||c(),v&&(w.current=y.isPropagationStopped(),w.current||y.stopPropagation())})}),v&&l.jsx(Wk,{control:h,bubbles:!w.current,name:r,value:i,checked:s,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});Fk.displayName=Qv;var Uk="RadioIndicator",Bk=f.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,o=PB(Uk,n);return l.jsx(St,{present:r||o.checked,children:l.jsx(fe.span,{"data-state":zk(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:t})})});Bk.displayName=Uk;var TB="RadioBubbleInput",Wk=f.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},o)=>{const a=f.useRef(null),i=Ce(a,o),c=Uv(n),u=lv(t);return f.useEffect(()=>{const d=a.current;if(!d)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&m){const w=new Event("click",{bubbles:r});m.call(d,n),d.dispatchEvent(w)}},[c,n,r]),l.jsx(fe.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Wk.displayName=TB;function zk(e){return e?"checked":"unchecked"}var RB=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Of="RadioGroup",[IB,Az]=Kt(Of,[If,$k]),Hk=If(),Vk=$k(),[OB,AB]=IB(Of),Yk=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:o,required:a=!1,disabled:i=!1,orientation:c,dir:u,loop:d=!0,onValueChange:h,...p}=e,m=Hk(n),w=Sc(u),[v,y]=as({prop:o,defaultProp:s??null,onChange:h,caller:Of});return l.jsx(OB,{scope:n,name:r,required:a,disabled:i,value:v,onValueChange:y,children:l.jsx(Dk,{asChild:!0,...m,orientation:c,dir:w,loop:d,children:l.jsx(fe.div,{role:"radiogroup","aria-required":a,"aria-orientation":c,"data-disabled":i?"":void 0,dir:w,...p,ref:t})})})});Yk.displayName=Of;var Kk="RadioGroupItem",Gk=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,o=AB(Kk,n),a=o.disabled||r,i=Hk(n),c=Vk(n),u=f.useRef(null),d=Ce(t,u),h=o.value===s.value,p=f.useRef(!1);return f.useEffect(()=>{const m=v=>{RB.includes(v.key)&&(p.current=!0)},w=()=>p.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",w),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",w)}},[]),l.jsx(Lk,{asChild:!0,...i,focusable:!a,active:h,children:l.jsx(Fk,{disabled:a,required:o.required,checked:h,...c,...s,name:o.name,ref:d,onCheck:()=>o.onValueChange(s.value),onKeyDown:Q(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:Q(s.onFocus,()=>{var m;p.current&&((m=u.current)==null||m.click())})})})});Gk.displayName=Kk;var MB="RadioGroupIndicator",qk=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=Vk(n);return l.jsx(Bk,{...s,...r,ref:t})});qk.displayName=MB;var Qk=Yk,Jk=Gk,DB=qk;const Jv=f.forwardRef(({className:e,...t},n)=>l.jsx(Qk,{className:ge("grid gap-2",e),...t,ref:n}));Jv.displayName=Qk.displayName;const Td=f.forwardRef(({className:e,...t},n)=>l.jsx(Jk,{ref:n,className:ge("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:l.jsx(DB,{className:"flex items-center justify-center",children:l.jsx(k_,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Td.displayName=Jk.displayName;const Xk=f.createContext(void 0),Xv=()=>{const e=f.useContext(Xk);if(!e)throw new Error("useSession must be used within a SessionProvider");return e},Zk=e=>({id:e.id,email:e.email,full_name:e.full_name,user_role:e.user_role??"renter",avatar_url:e.avatar_url,bio:e.bio,student_id_url:e.student_id_url,university:e.university,program_name:e.program_name,program_year:e.program_year,program_type:e.program_type,payout_account_holder:e.payout_account_holder,payout_account_number:e.payout_account_number,payout_bank_name:e.payout_bank_name,payout_bank_country:e.payout_bank_country,created_at:e.created_at,updated_at:e.updated_at}),eN=async e=>{const{data:t,error:n}=await ce.from("user_profiles").select("*").eq("id",e).maybeSingle();if(n)throw n;return t?Zk(t):null},Zv=async e=>{const t={id:e.id,email:e.email,full_name:e.full_name??null,user_role:e.user_role??"renter",avatar_url:e.avatar_url??null,bio:e.bio??null,student_id_url:e.student_id_url??null,university:e.university??null,program_name:e.program_name??null,program_year:e.program_year??null,program_type:e.program_type??null,payout_account_holder:e.payout_account_holder??null,payout_account_number:e.payout_account_number??null,payout_bank_name:e.payout_bank_name??null,payout_bank_country:e.payout_bank_country??null,updated_at:new Date().toISOString()},{data:n,error:r}=await ce.from("user_profiles").upsert(t,{onConflict:"id"}).select("*").single();if(r)throw r;return Zk(n)},LB=["Harvard University","Stanford University","Massachusetts Institute of Technology","University of Cambridge","University of Oxford","Columbia University","University of California, Berkeley","University of Chicago","Princeton University","Yale University","University of Pennsylvania","California Institute of Technology","University of California, Los Angeles","Imperial College London","University College London","ETH Zrich","cole Polytechnique Fdrale de Lausanne","University of Toronto","McGill University","University of British Columbia","University of Melbourne","Australian National University","University of Sydney","University of New South Wales","National University of Singapore","Nanyang Technological University","Peking University","Tsinghua University","University of Tokyo","Kyoto University","Seoul National University","University of Hong Kong","University of Michigan","University of Washington","New York University","University of Illinois Urbana-Champaign","University of WisconsinMadison","University of Texas at Austin","Duke University","Johns Hopkins University","Cornell University","Carnegie Mellon University","Georgia Institute of Technology","University of Edinburgh","University of Manchester","University of Bristol","University of Glasgow","University of Warwick","University of Leeds","Trinity College Dublin","University of Copenhagen","University of Helsinki","University of Oslo","University of Stockholm","University of Amsterdam","Leiden University","University of Groningen","KU Leuven","Ghent University","Ludwig Maximilian University of Munich","Technical University of Munich","University of Heidelberg","University of Freiburg","University of Bonn","Sorbonne University","Universit PSL","cole Polytechnique","University of Barcelona","University of Madrid (Complutense)","University of Lisbon","University of Porto","University of So Paulo","Pontifical Catholic University of Chile","University of Buenos Aires","University of Cape Town","American University in Cairo","King Saud University","University of Zurich","University of Geneva","University of Bern","University of St. Gallen","University of Basel","University of Lausanne","University of Fribourg","University of Neuchtel"],tN=(e,t=6)=>{const n=e.trim().toLowerCase();return n?LB.filter(r=>r.toLowerCase().includes(n)).slice(0,t):[]},Rd="profile-photos",$B="student-ids",FB="selfies",nN=e=>{const t=e.name.split(".").pop();return`${typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(36).slice(2)}${t?`.${t}`:""}`},rN=async(e,t)=>{const n=nN(t),r=`${e}/${$B}/${n}`,{error:s}=await ce.storage.from(Rd).upload(r,t,{cacheControl:"3600",upsert:!0});if(s)throw new Error(s.message??"Failed to upload student ID.");const{data:o}=ce.storage.from(Rd).getPublicUrl(r);if(!(o!=null&&o.publicUrl))throw new Error("Unable to fetch uploaded student ID URL.");return o.publicUrl},UB=async(e,t)=>{const n=nN(t),r=`${e}/${FB}/${n}`,{error:s}=await ce.storage.from(Rd).upload(r,t,{cacheControl:"3600",upsert:!0});if(s)throw new Error(s.message??"Failed to upload selfie.");const{data:o}=ce.storage.from(Rd).getPublicUrl(r);if(!(o!=null&&o.publicUrl))throw new Error("Unable to fetch uploaded selfie URL.");return o.publicUrl};var Af="Checkbox",[BB,Mz]=Kt(Af),[WB,ey]=BB(Af);function zB(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:o,form:a,name:i,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[p,m]=as({prop:n,defaultProp:s??!1,onChange:c,caller:Af}),[w,v]=f.useState(null),[y,x]=f.useState(null),g=f.useRef(!1),b=w?!!a||!!w.closest("form"):!0,S={checked:p,disabled:o,setChecked:m,control:w,setControl:v,name:i,form:a,value:d,hasConsumerStoppedPropagationRef:g,required:u,defaultChecked:Js(s)?!1:s,isFormControl:b,bubbleInput:y,setBubbleInput:x};return l.jsx(WB,{scope:t,...S,children:HB(h)?h(S):r})}var sN="CheckboxTrigger",oN=f.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:o,value:a,disabled:i,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:p,isFormControl:m,bubbleInput:w}=ey(sN,e),v=Ce(s,d),y=f.useRef(c);return f.useEffect(()=>{const x=o==null?void 0:o.form;if(x){const g=()=>h(y.current);return x.addEventListener("reset",g),()=>x.removeEventListener("reset",g)}},[o,h]),l.jsx(fe.button,{type:"button",role:"checkbox","aria-checked":Js(c)?"mixed":c,"aria-required":u,"data-state":uN(c),"data-disabled":i?"":void 0,disabled:i,value:a,...r,ref:v,onKeyDown:Q(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:Q(n,x=>{h(g=>Js(g)?!0:!g),w&&m&&(p.current=x.isPropagationStopped(),p.current||x.stopPropagation())})})});oN.displayName=sN;var ty=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:o,required:a,disabled:i,value:c,onCheckedChange:u,form:d,...h}=e;return l.jsx(zB,{__scopeCheckbox:n,checked:s,defaultChecked:o,disabled:i,required:a,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:p})=>l.jsxs(l.Fragment,{children:[l.jsx(oN,{...h,ref:t,__scopeCheckbox:n}),p&&l.jsx(cN,{__scopeCheckbox:n})]})})});ty.displayName=Af;var aN="CheckboxIndicator",iN=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,o=ey(aN,n);return l.jsx(St,{present:r||Js(o.checked)||o.checked===!0,children:l.jsx(fe.span,{"data-state":uN(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});iN.displayName=aN;var lN="CheckboxBubbleInput",cN=f.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:o,defaultChecked:a,required:i,disabled:c,name:u,value:d,form:h,bubbleInput:p,setBubbleInput:m}=ey(lN,e),w=Ce(n,m),v=Uv(o),y=lv(r);f.useEffect(()=>{const g=p;if(!g)return;const b=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(b,"checked").set,C=!s.current;if(v!==o&&_){const N=new Event("click",{bubbles:C});g.indeterminate=Js(o),_.call(g,Js(o)?!1:o),g.dispatchEvent(N)}},[p,v,o,s]);const x=f.useRef(Js(o)?!1:o);return l.jsx(fe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??x.current,required:i,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:w,style:{...t.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});cN.displayName=lN;function HB(e){return typeof e=="function"}function Js(e){return e==="indeterminate"}function uN(e){return Js(e)?"indeterminate":e?"checked":"unchecked"}const dN=f.forwardRef(({className:e,...t},n)=>l.jsx(ty,{ref:n,className:ge("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:l.jsx(iN,{className:ge("flex items-center justify-center text-current"),children:l.jsx(Jg,{className:"h-4 w-4"})})}));dN.displayName=ty.displayName;function VB(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var ny="ScrollArea",[fN,Dz]=Kt(ny),[YB,Wn]=fN(ny),hN=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:o=600,...a}=e,[i,c]=f.useState(null),[u,d]=f.useState(null),[h,p]=f.useState(null),[m,w]=f.useState(null),[v,y]=f.useState(null),[x,g]=f.useState(0),[b,S]=f.useState(0),[_,C]=f.useState(!1),[N,T]=f.useState(!1),L=Ce(t,V=>c(V)),$=Sc(s);return l.jsx(YB,{scope:n,type:r,dir:$,scrollHideDelay:o,scrollArea:i,viewport:u,onViewportChange:d,content:h,onContentChange:p,scrollbarX:m,onScrollbarXChange:w,scrollbarXEnabled:_,onScrollbarXEnabledChange:C,scrollbarY:v,onScrollbarYChange:y,scrollbarYEnabled:N,onScrollbarYEnabledChange:T,onCornerWidthChange:g,onCornerHeightChange:S,children:l.jsx(fe.div,{dir:$,...a,ref:L,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});hN.displayName=ny;var pN="ScrollAreaViewport",mN=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...o}=e,a=Wn(pN,n),i=f.useRef(null),c=Ce(t,i,a.onViewportChange);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),l.jsx(fe.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:l.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});mN.displayName=pN;var Dr="ScrollAreaScrollbar",ry=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Wn(Dr,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:a}=s,i=e.orientation==="horizontal";return f.useEffect(()=>(i?o(!0):a(!0),()=>{i?o(!1):a(!1)}),[i,o,a]),s.type==="hover"?l.jsx(KB,{...r,ref:t,forceMount:n}):s.type==="scroll"?l.jsx(GB,{...r,ref:t,forceMount:n}):s.type==="auto"?l.jsx(gN,{...r,ref:t,forceMount:n}):s.type==="always"?l.jsx(sy,{...r,ref:t}):null});ry.displayName=Dr;var KB=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Wn(Dr,e.__scopeScrollArea),[o,a]=f.useState(!1);return f.useEffect(()=>{const i=s.scrollArea;let c=0;if(i){const u=()=>{window.clearTimeout(c),a(!0)},d=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return i.addEventListener("pointerenter",u),i.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),i.removeEventListener("pointerenter",u),i.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),l.jsx(St,{present:n||o,children:l.jsx(gN,{"data-state":o?"visible":"hidden",...r,ref:t})})}),GB=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Wn(Dr,e.__scopeScrollArea),o=e.orientation==="horizontal",a=Df(()=>c("SCROLL_END"),100),[i,c]=VB("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(i==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[i,s.scrollHideDelay,c]),f.useEffect(()=>{const u=s.viewport,d=o?"scrollLeft":"scrollTop";if(u){let h=u[d];const p=()=>{const m=u[d];h!==m&&(c("SCROLL"),a()),h=m};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,o,c,a]),l.jsx(St,{present:n||i!=="hidden",children:l.jsx(sy,{"data-state":i==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Q(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Q(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),gN=f.forwardRef((e,t)=>{const n=Wn(Dr,e.__scopeScrollArea),{forceMount:r,...s}=e,[o,a]=f.useState(!1),i=e.orientation==="horizontal",c=Df(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;a(i?u:d)}},10);return gi(n.viewport,c),gi(n.content,c),l.jsx(St,{present:r||o,children:l.jsx(sy,{"data-state":o?"visible":"hidden",...s,ref:t})})}),sy=f.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=Wn(Dr,e.__scopeScrollArea),o=f.useRef(null),a=f.useRef(0),[i,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=bN(i.viewport,i.content),d={...r,sizes:i,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>o.current=p,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:p=>a.current=p};function h(p,m){return e6(p,a.current,i,m)}return n==="horizontal"?l.jsx(qB,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const p=s.viewport.scrollLeft,m=fx(p,i,s.dir);o.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=h(p,s.dir))}}):n==="vertical"?l.jsx(QB,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const p=s.viewport.scrollTop,m=fx(p,i);o.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=h(p))}}):null}),qB=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,o=Wn(Dr,e.__scopeScrollArea),[a,i]=f.useState(),c=f.useRef(null),u=Ce(t,c,o.onScrollbarXChange);return f.useEffect(()=>{c.current&&i(getComputedStyle(c.current))},[c]),l.jsx(yN,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Mf(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(o.viewport){const p=o.viewport.scrollLeft+d.deltaX;e.onWheelScroll(p),_N(p,h)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Od(a.paddingLeft),paddingEnd:Od(a.paddingRight)}})}})}),QB=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,o=Wn(Dr,e.__scopeScrollArea),[a,i]=f.useState(),c=f.useRef(null),u=Ce(t,c,o.onScrollbarYChange);return f.useEffect(()=>{c.current&&i(getComputedStyle(c.current))},[c]),l.jsx(yN,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Mf(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(o.viewport){const p=o.viewport.scrollTop+d.deltaY;e.onWheelScroll(p),_N(p,h)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Od(a.paddingTop),paddingEnd:Od(a.paddingBottom)}})}})}),[JB,vN]=fN(Dr),yN=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:a,onThumbPointerDown:i,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...p}=e,m=Wn(Dr,n),[w,v]=f.useState(null),y=Ce(t,L=>v(L)),x=f.useRef(null),g=f.useRef(""),b=m.viewport,S=r.content-r.viewport,_=it(d),C=it(c),N=Df(h,10);function T(L){if(x.current){const $=L.clientX-x.current.left,V=L.clientY-x.current.top;u({x:$,y:V})}}return f.useEffect(()=>{const L=$=>{const V=$.target;(w==null?void 0:w.contains(V))&&_($,S)};return document.addEventListener("wheel",L,{passive:!1}),()=>document.removeEventListener("wheel",L,{passive:!1})},[b,w,S,_]),f.useEffect(C,[r,C]),gi(w,N),gi(m.content,N),l.jsx(JB,{scope:n,scrollbar:w,hasThumb:s,onThumbChange:it(o),onThumbPointerUp:it(a),onThumbPositionChange:C,onThumbPointerDown:it(i),children:l.jsx(fe.div,{...p,ref:y,style:{position:"absolute",...p.style},onPointerDown:Q(e.onPointerDown,L=>{L.button===0&&(L.target.setPointerCapture(L.pointerId),x.current=w.getBoundingClientRect(),g.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),T(L))}),onPointerMove:Q(e.onPointerMove,T),onPointerUp:Q(e.onPointerUp,L=>{const $=L.target;$.hasPointerCapture(L.pointerId)&&$.releasePointerCapture(L.pointerId),document.body.style.webkitUserSelect=g.current,m.viewport&&(m.viewport.style.scrollBehavior=""),x.current=null})})})}),Id="ScrollAreaThumb",wN=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=vN(Id,e.__scopeScrollArea);return l.jsx(St,{present:n||s.hasThumb,children:l.jsx(XB,{ref:t,...r})})}),XB=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,o=Wn(Id,n),a=vN(Id,n),{onThumbPositionChange:i}=a,c=Ce(t,h=>a.onThumbChange(h)),u=f.useRef(void 0),d=Df(()=>{u.current&&(u.current(),u.current=void 0)},100);return f.useEffect(()=>{const h=o.viewport;if(h){const p=()=>{if(d(),!u.current){const m=t6(h,i);u.current=m,i()}};return i(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[o.viewport,d,i]),l.jsx(fe.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Q(e.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),w=h.clientX-m.left,v=h.clientY-m.top;a.onThumbPointerDown({x:w,y:v})}),onPointerUp:Q(e.onPointerUp,a.onThumbPointerUp)})});wN.displayName=Id;var oy="ScrollAreaCorner",xN=f.forwardRef((e,t)=>{const n=Wn(oy,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?l.jsx(ZB,{...e,ref:t}):null});xN.displayName=oy;var ZB=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=Wn(oy,n),[o,a]=f.useState(0),[i,c]=f.useState(0),u=!!(o&&i);return gi(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),gi(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),a(d)}),u?l.jsx(fe.div,{...r,ref:t,style:{width:o,height:i,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Od(e){return e?parseInt(e,10):0}function bN(e,t){const n=e/t;return isNaN(n)?0:n}function Mf(e){const t=bN(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function e6(e,t,n,r="ltr"){const s=Mf(n),o=s/2,a=t||o,i=s-a,c=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-i,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return SN([c,u],h)(e)}function fx(e,t,n="ltr"){const r=Mf(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-s,a=t.content-t.viewport,i=o-r,c=n==="ltr"?[0,a]:[a*-1,0],u=Dm(e,c);return SN([0,a],[0,i])(u)}function SN(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function _N(e,t){return e>0&&e<t}var t6=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const o={left:e.scrollLeft,top:e.scrollTop},a=n.left!==o.left,i=n.top!==o.top;(a||i)&&t(),n=o,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Df(e,t){const n=it(e),r=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),f.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function gi(e,t){const n=it(t);ct(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var EN=hN,n6=mN,r6=xN;const ay=f.forwardRef(({className:e,children:t,...n},r)=>l.jsxs(EN,{ref:r,className:ge("relative overflow-hidden",e),...n,children:[l.jsx(n6,{className:"h-full w-full rounded-[inherit]",children:t}),l.jsx(CN,{}),l.jsx(r6,{})]}));ay.displayName=EN.displayName;const CN=f.forwardRef(({className:e,orientation:t="vertical",...n},r)=>l.jsx(ry,{ref:r,orientation:t,className:ge("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:l.jsx(wN,{className:"relative flex-1 rounded-full bg-border"})}));CN.displayName=ry.displayName;const s6=`
Terms and Conditions for Couch-Share.com

Last updated: December 2025

Please read these terms and conditions carefully before using Couch-Share.com ("the Service"). By accessing or using the Service you agree to be bound by these Terms. If you disagree with any part of the Terms then you may not access the Service.

1. Overview
Couch-Share.com is an online platform that connects hosts and renters for temporary housing. Couch-Share.com acts solely as a neutral marketplace. Hosts and renters are independent parties and are solely responsible for the agreements they enter into and the experiences they provide or receive.

2. Eligibility
You must be at least 18 years old and legally able to enter into binding contracts to use Couch-Share.com. By registering you represent and warrant that the information you provide is accurate and truthful.

3. User Accounts
You must provide accurate, complete, and current information when creating your account. Your login credentials are personal and non-transferable. You are responsible for safeguarding your account and for any actions taken under your account. Couch-Share.com is not responsible for any loss or damage arising from unauthorized use of your credentials.

4. Listings and Reservations
Hosts are solely responsible for the accuracy of their listings, including availability, pricing, and applicable house rules. Renters are responsible for reviewing the listing details before submitting booking requests. By submitting a booking request the renter confirms they understand the price, dates, and house rules. Couch-Share.com does not guarantee that listings are accurate, safe, or suitable for any purpose.

5. Payments
All payments are processed by Stripe or another third-party payment provider. Couch-Share.com does not hold funds on behalf of users. Stripe processes the payment using the host's account and payouts are governed by Stripe's policies. Couch-Share.com is not responsible for payment failures or disputes. Refunds, cancellations, and disputes must be resolved directly between hosts and renters.

6. Identity Verification
Couch-Share.com requires users to upload identification and a selfie for verification purposes. However, Couch-Share.com makes no guarantees concerning the authenticity of documents provided by users. You are responsible for conducting your own due diligence and exercising caution when interacting with other users.

7. Conduct
Users agree not to:
 Violate any laws, rules, or regulations.
 Provide false or misleading information.
 Use the Service for any harmful or unlawful purpose.
 Discriminate against or harass other users.
 Damage property or engage in unsafe behavior during stays.

Couch-Share.com may suspend or terminate accounts that violate these Terms at its sole discretion.

8. Limitation of Liability
Couch-Share.com, including its owners, employees, and affiliates, is not liable for any direct, indirect, incidental, consequential, special, exemplary, or punitive damages arising from or relating to your use of the Service, including but not limited to personal injury, property damage, disputes between users, or legal claims. Couch-Share.com provides the platform "as is" without warranties of any kind.

9. Indemnification
You agree to indemnify and hold Couch-Share.com harmless from any claims, losses, liabilities, damages, costs, or expenses (including legal fees) arising from your use of the Service, your breach of these Terms, or your violation of any law or rights of a third party.

10. Dispute Resolution
Couch-Share.com is not a party to disputes between users. Hosts and renters must resolve disputes directly. Couch-Share.com may, at its sole discretion, facilitate communication between parties but has no obligation to mediate or resolve disputes.

11. Termination
We may terminate or suspend your account at any time, without prior notice or liability, for any reason whatsoever, including without limitation if you breach the Terms. Upon termination your right to use the Service will immediately cease.

12. Changes to Terms
We may modify these Terms at any time by posting an updated version on Couch-Share.com. Your continued use of the Service constitutes acceptance of the revised Terms.

13. Governing Law
These Terms are governed by the laws applicable to Couch-Share.com. Any legal action or proceeding arising under these Terms will be brought exclusively in the courts located in the jurisdiction of Couch-Share.com.

14. Contact Us
If you have any questions about these Terms, please contact Couch-Share.com using our support channels.`,o6=()=>{const[e,t]=f.useState(!1);return l.jsxs(Pf,{open:e,onOpenChange:t,children:[l.jsx("button",{type:"button",className:"text-xs font-semibold underline",onClick:()=>t(!0),children:"View terms and conditions"}),l.jsxs(_c,{className:"max-w-3xl",children:[l.jsx(Ec,{children:l.jsx(Cc,{children:"Terms & Conditions"})}),l.jsx(ay,{className:"max-h-[60vh] rounded-md border p-4",children:l.jsx("pre",{className:"whitespace-pre-wrap text-sm leading-6 text-slate-700",children:s6})})]})]})},hx=(e,t)=>typeof e.addEventListener=="function"?(e.addEventListener("change",t),()=>e.removeEventListener("change",t)):(e.addListener(t),()=>e.removeListener(t)),kN=()=>{const[e,t]=f.useState(!1);return f.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function"){t(!1);return}const n=window.matchMedia("(min-width: 640px)"),r=window.matchMedia("(prefers-reduced-motion: reduce)"),s=()=>{t(n.matches&&!r.matches)};s();const o=hx(n,s),a=hx(r,s);return()=>{o(),a()}},[]),e},px=f.lazy(()=>lo(()=>import("./Iridescence-BunyMf_H.js"),__vite__mapDeps([2,3]))),Jh="focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-900/40",a6=`
  @keyframes auroraFloat {
    0% { transform: translate3d(0,0,0) scale(1); }
    50% { transform: translate3d(0,-18px,0) scale(1.05); }
    100% { transform: translate3d(0,0,0) scale(1); }
  }

  @keyframes softDrift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
`,i6=[{top:"10%",left:"5%",size:220,opacity:.35,delay:"0s"},{top:"60%",left:"70%",size:260,opacity:.25,delay:"-3s"},{top:"75%",left:"20%",size:180,opacity:.3,delay:"-5s"}],l6=[{value:"bsc",label:"Bachelor (BSc)"},{value:"msc",label:"Master (MSc)"},{value:"phd",label:"Doctorate (PhD)"},{value:"other",label:"Other program"}],c6=["1","2","3","4","5"],u6=()=>{const e=lr(),{toast:t}=Ar(),{user:n,loading:r,signOut:s}=Xv(),{refreshUser:o}=Bn(),[a,i]=f.useState("signin"),[c,u]=f.useState(""),[d,h]=f.useState(""),[p,m]=f.useState(""),[w,v]=f.useState("renter"),[y,x]=f.useState(null),[g,b]=f.useState(null),[S,_]=f.useState(!1),[C,N]=f.useState(""),[T,L]=f.useState(""),[$,V]=f.useState(""),[F,O]=f.useState(""),[j,z]=f.useState(null),[A,M]=f.useState(null),[E,R]=f.useState(!1),W=kN(),J=f.useMemo(()=>a==="signup"?tN(C):[],[a,C]),Y=f.useMemo(()=>a==="signin"?"Welcome back":"",[a]),ue=async()=>{await s(),t({title:"Signed out"})},B=async D=>{D.preventDefault(),_(!0),x(null),b(null);try{if(a==="signup"){if(d.length<6){b("Password must be at least 6 characters long."),_(!1);return}if(!j){b("Upload your student ID to continue."),_(!1);return}if(!A){b("Upload an image of your face to continue."),_(!1);return}if(!E){b("Accept the terms and conditions to continue."),_(!1);return}const H=C.trim();if(!H){b("Add your university."),_(!1);return}const ie=T.trim();if(!ie){b("Enter your program name."),_(!1);return}if(!$){b("Select your program type."),_(!1);return}if(!F){b("Select your year in the program."),_(!1);return}const ye=Number(F),he=$;if(!Number.isFinite(ye)||ye<1||ye>5){b("Choose a valid program year."),_(!1);return}const{data:be,error:le}=await ce.auth.signUp({email:c,password:d,options:{data:{full_name:p,user_role:w}}});if(le)throw le;const I=be.user;if(I){const G=await rN(I.id,j),ne=await UB(I.id,A);await Zv({id:I.id,email:I.email??c,full_name:p||null,user_role:w,avatar_url:ne,bio:null,student_id_url:G,university:H,program_name:ie,program_year:ye,program_type:he})}await o(),x("Account created and signed in."),t({title:"Welcome!",description:"Your account is ready."}),e("/listings",{replace:!0});return}const{error:U}=await ce.auth.signInWithPassword({email:c,password:d});if(U)throw U;await o(),x("Signed in successfully."),t({title:"Signed in"}),e("/listings",{replace:!0})}catch(U){const H=U instanceof Error?U.message:"Authentication failed.";b(H)}finally{_(!1)}};return f.useEffect(()=>{!r&&n&&e("/listings",{replace:!0})},[r,n,e]),r?l.jsxs("div",{className:"relative min-h-screen flex items-center justify-center bg-gradient-to-br from-[#dbe8ff] to-white",children:[W&&l.jsx(f.Suspense,{fallback:null,children:l.jsx(px,{color:[1.2,1.35,1.5],mouseReact:!1,amplitude:.4,speed:1.2,className:"pointer-events-none"})}),l.jsx("p",{className:"text-sm text-slate-500",children:"Loading session"})]}):l.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-[#cfdcff] via-[#e0eafe] to-[#c5d8ff] text-slate-900",children:[l.jsx("style",{children:a6}),W&&l.jsx(f.Suspense,{fallback:null,children:l.jsx(px,{color:[1.4,1.15,1.65],mouseReact:!0,amplitude:.4,speed:1.2,className:"pointer-events-none opacity-70 mix-blend-screen"})}),l.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[l.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{background:"linear-gradient(130deg, rgba(147,197,253,0.35), rgba(219,234,254,0.45), rgba(191,219,254,0.35))",backgroundSize:"200% 200%",animation:"softDrift 36s ease-in-out infinite"}}),i6.map(D=>l.jsx("span",{className:"absolute rounded-full bg-gradient-to-br from-white/80 via-blue-50/70 to-blue-200/40",style:{top:D.top,left:D.left,width:D.size,height:D.size,opacity:D.opacity,animation:"auroraFloat 20s ease-in-out infinite",animationDelay:D.delay}},`${D.top}-${D.left}`))]}),l.jsx("main",{className:"relative z-10 mx-auto flex min-h-screen w-full max-w-3xl flex-col justify-center px-4 py-12 sm:px-6 lg:px-8",children:l.jsx("section",{className:"relative rounded-[2rem] border border-white/60 bg-white/95 p-6 shadow-2xl backdrop-blur-xl",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[Y&&l.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-500",children:Y}),l.jsx(Gv,{className:"text-3xl mt-1",children:a==="signin"?"Sign in":"Create account"}),l.jsx(qv,{className:"mt-1 text-sm",children:a==="signin"?"Enter your credentials to pick up where you left off.":"Complete the details below to create your account."})]}),l.jsx("div",{className:"flex gap-2",children:["signin","signup"].map(D=>l.jsx("button",{type:"button",onClick:()=>i(D),className:`rounded-full px-2.5 py-1 text-xs font-semibold transition sm:px-4 sm:py-2 sm:text-sm ${a===D?"bg-slate-900 text-white shadow-lg":"border border-slate-200 text-slate-500 hover:border-slate-400"} ${Jh}`,children:D==="signin"?"Sign in":"Sign up"},D))})]}),n?l.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-100 bg-slate-50/70 p-6",children:[l.jsxs("p",{className:"text-sm",children:["Signed in as ",l.jsx("span",{className:"font-semibold",children:n.email})]}),l.jsx(Se,{onClick:ue,variant:"destructive",className:`w-full ${Jh}`,children:"Sign out"})]}):l.jsxs("form",{onSubmit:B,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"email",children:"Email"}),l.jsx(We,{id:"email",type:"email",value:c,onChange:D=>u(D.target.value),placeholder:"you@example.com",required:!0,className:"h-11 rounded-2xl border-slate-200 bg-white/80"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"password",children:"Password"}),l.jsx(We,{id:"password",type:"password",value:d,onChange:D=>h(D.target.value),placeholder:"",required:!0,className:"h-11 rounded-2xl border-slate-200 bg-white/80"})]}),a==="signup"&&l.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-100 bg-blue-50/40 p-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"fullName",children:"Full name"}),l.jsx(We,{id:"fullName",value:p,onChange:D=>m(D.target.value),placeholder:"Jane Doe",className:"h-11 rounded-2xl border-slate-200 bg-white"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{children:"User role"}),l.jsx(Jv,{value:w,onValueChange:D=>v(D),className:"flex gap-3 rounded-full bg-white/70 p-1",children:[{id:"role-renter",label:"Renter",value:"renter"},{id:"role-host",label:"Host",value:"host"}].map(D=>l.jsxs("div",{className:"flex flex-1 items-center justify-center",children:[l.jsx(Td,{value:D.value,id:D.id,className:"peer sr-only","aria-label":D.label}),l.jsx("label",{htmlFor:D.id,className:`w-full cursor-pointer rounded-full px-3 py-2 text-center text-sm font-medium transition ${w===D.value?"bg-slate-900 text-white":"text-slate-500"}`,children:D.label})]},D.value))})]}),l.jsxs("div",{className:"space-y-3 rounded-2xl border border-slate-100 bg-white/80 p-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Student verification"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Every account must belong to an active student community."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"universitySignup",children:"University"}),l.jsx(We,{id:"universitySignup",value:C,onChange:D=>N(D.target.value),placeholder:"Start typing your university",autoComplete:"off",className:"h-11 rounded-2xl border-slate-200 bg-white"}),(()=>{const D=C.trim();return!D||!J.length||J.some(H=>H.toLowerCase()===D.toLowerCase())&&J.length===1?null:l.jsx("div",{className:"max-h-32 overflow-y-auto rounded-2xl border border-slate-200 bg-white",children:J.map(H=>l.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-sm transition hover:bg-blue-50",onClick:()=>N(H),children:H},H))})})()]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"programNameSignup",children:"Program"}),l.jsx(We,{id:"programNameSignup",value:T,onChange:D=>L(D.target.value),placeholder:"e.g. Computer Science",className:"h-11 rounded-2xl border-slate-200 bg-white"})]}),l.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{children:"Program type"}),l.jsxs(Us,{value:$,onValueChange:D=>V(D),children:[l.jsx(Xr,{className:"rounded-2xl border-slate-200 bg-white",children:l.jsx(Bs,{placeholder:"Select type"})}),l.jsx(Zr,{children:l6.map(D=>l.jsx(er,{value:D.value,children:D.label},D.value))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{children:"Program year"}),l.jsxs(Us,{value:F,onValueChange:D=>O(D),children:[l.jsx(Xr,{className:"rounded-2xl border-slate-200 bg-white",children:l.jsx(Bs,{placeholder:"Select year"})}),l.jsx(Zr,{children:c6.map(D=>l.jsxs(er,{value:D,children:["Year ",D]},D))})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Te,{htmlFor:"studentId",children:["Student ID ",l.jsx("span",{className:"text-destructive",children:"*"})]}),l.jsx(We,{id:"studentId",type:"file",accept:"image/*,.pdf",onChange:D=>{var U;return z(((U=D.target.files)==null?void 0:U[0])??null)},required:!0,className:"cursor-pointer rounded-2xl border-slate-200 bg-white"}),l.jsx("p",{className:"text-xs text-slate-500",children:"We only share this with adminsnever with other users."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Te,{htmlFor:"selfiePhoto",children:["Upload an image of your face ",l.jsx("span",{className:"text-destructive",children:"*"})]}),l.jsx(We,{id:"selfiePhoto",type:"file",accept:"image/*",onChange:D=>{var U;return M(((U=D.target.files)==null?void 0:U[0])??null)},required:!0,className:"cursor-pointer rounded-2xl border-slate-200 bg-white"}),l.jsx("p",{className:"text-xs text-slate-500",children:"We use this to verify your identity and retain the safety within the platform."})]})]})]}),a==="signup"&&l.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/80 p-4 text-xs text-slate-600 space-y-2",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(dN,{id:"terms",checked:E,onCheckedChange:D=>R(!!D)}),l.jsxs("label",{htmlFor:"terms",className:"text-xs",children:["I agree to the ",l.jsx("span",{className:"font-semibold",children:"Couch-Share.com Terms & Conditions"}),"."," ",l.jsx(o6,{})]})]})}),l.jsx(Se,{type:"submit",className:`w-full rounded-full py-2.5 text-sm sm:py-3 sm:text-base ${Jh}`,disabled:S,children:S?"Please wait":a==="signin"?"Sign in":"Create account"}),l.jsx("div",{className:"rounded-2xl border border-slate-100 bg-white/70 p-4 text-xs text-slate-500",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(CI,{className:"h-4 w-4"})," Encrypted authentication  No spam"]})}),y&&l.jsx("p",{className:"text-sm text-emerald-600 text-center",children:y}),g&&l.jsx("p",{className:"text-sm text-rose-500 text-center",children:g})]})]})})})]})},d6=async()=>{try{const{error:e}=await ce.from("notes").select("id",{count:"exact",head:!0});return e?`Supabase error: ${e.message}`:"Supabase connected & RLS OK"}catch(e){return`Supabase error: ${e instanceof Error?e.message:String(e)}`}},f6=f.lazy(()=>lo(()=>import("./Iridescence-BunyMf_H.js"),__vite__mapDeps([2,3]))),Xh="focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-400/60",h6=[{title:"Student exclusive",copy:"Access for students only"},{title:"Security",copy:"Users, hosts are verified students"},{title:"Student prices",copy:"A break from housing crisis"}],p6=`
  @keyframes floatyOrb {
    0% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-18px) scale(1.08); }
    100% { transform: translateY(0) scale(1); }
  }

  @keyframes auroraPulse {
    0% { opacity: 0.25; filter: blur(36px); }
    50% { opacity: 0.6; filter: blur(46px); }
    100% { opacity: 0.25; filter: blur(36px); }
  }

  @keyframes backgroundDrift {
    0% {
      background-position: 0% 50%;
      transform: translate3d(0,0,0);
    }
    50% {
      background-position: 100% 50%;
      transform: translate3d(0,-8px,0);
    }
    100% {
      background-position: 0% 50%;
      transform: translate3d(0,0,0);
    }
  }
`,m6=[{top:"15%",left:"10%",size:"220px",opacity:.35,delay:"0s"},{top:"45%",left:"75%",size:"260px",opacity:.25,delay:"-4s"},{top:"70%",left:"20%",size:"180px",opacity:.3,delay:"-2s"},{top:"30%",left:"55%",size:"150px",opacity:.2,delay:"-6s"}],g6=()=>{const e=lr(),{user:t,loading:n}=Bn(),[r,s]=f.useState(null),[o,a]=f.useState(!0),i=!n,c=i&&!t,u=kN();return f.useEffect(()=>{(async()=>{a(!0);const h=await d6();s(h),a(!1)})()},[]),l.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-[#cfdcff] via-[#dfe9ff] to-[#c5d8ff] text-slate-900",children:[l.jsx("style",{children:p6}),u&&l.jsx(f.Suspense,{fallback:null,children:l.jsx(f6,{color:[1.4,1.18,1.65],mouseReact:!0,amplitude:.45,speed:1.4,className:"pointer-events-none opacity-80 mix-blend-screen"})}),l.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[l.jsx("div",{"aria-hidden":!0,className:"absolute inset-0",style:{background:"linear-gradient(125deg, rgba(99,179,237,0.35), rgba(191,219,254,0.45), rgba(147,197,253,0.35))",backgroundSize:"200% 200%",animation:"backgroundDrift 45s ease-in-out infinite"}}),l.jsx("div",{className:"absolute inset-x-0 -top-32 h-72 bg-gradient-to-b from-[#7fb3ff]/40 via-transparent to-transparent blur-[80px]"}),l.jsx("div",{className:"absolute bottom-0 left-0 h-96 w-96 rounded-full bg-gradient-to-br from-[#60a5fa]/40 via-[#93c5fd]/30 to-transparent blur-[160px]"}),m6.map(d=>l.jsx("span",{className:"absolute rounded-full bg-gradient-to-br from-white/80 via-[#e0f2ff]/60 to-[#93c5fd]/40",style:{top:d.top,left:d.left,width:d.size,height:d.size,opacity:d.opacity,animation:"floatyOrb 18s ease-in-out infinite",animationDelay:d.delay}},`${d.top}-${d.left}`)),l.jsx("div",{className:"absolute top-1/3 right-10 h-48 w-48 rounded-full bg-gradient-to-br from-[#bfdbfe]/70 via-[#c7d2fe]/60 to-transparent",style:{animation:"auroraPulse 14s ease-in-out infinite"}})]}),l.jsx("header",{className:"relative z-10 border-b border-white/50 bg-gradient-to-r from-white/80 via-blue-50/70 to-white/80 backdrop-blur-2xl",children:l.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-5 flex flex-wrap items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-slate-500",children:"COUCH-SHARING"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Student-Student Exclusive"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[l.jsx("span",{className:"inline-flex h-2 w-2 rounded-full bg-emerald-400","aria-hidden":!0}),o?"Connecting to Supabase":r??"Supabase connected"]})]})}),l.jsx("main",{className:"relative z-10 px-4 sm:px-6 lg:px-8 py-16",children:l.jsxs("section",{className:"max-w-3xl mx-auto space-y-8 text-center",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.6em] text-slate-500",children:"Made in Switzerland"}),l.jsx("h1",{className:"text-4xl md:text-5xl font-semibold tracking-tight text-slate-900",children:"Housing built by students"}),l.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"Couch-share is a trusted, student-only platform where students help students find affordable places to stay  from couches and floor spots to entire rooms and apartments. Simple, safe, and made for student budgets."})]}),l.jsxs("div",{className:"rounded-[36px] border border-white/60 bg-gradient-to-br from-white/80 via-blue-50/70 to-white/70 px-12 py-8 text-left shadow-2xl backdrop-blur-2xl",children:[l.jsx("p",{className:"text-base uppercase tracking-[0.55em] text-slate-500",children:"What you get"}),l.jsx("ul",{className:"mt-4 space-y-4",children:h6.map(d=>l.jsxs("li",{className:"space-y-1 border-l border-blue-200/50 pl-4",children:[l.jsx("p",{className:"text-lg font-semibold text-slate-900",children:d.title}),l.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:d.copy})]},d.title))})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[l.jsx(Se,{className:`rounded-full bg-gradient-to-r from-[#2563eb] via-[#3b82f6] to-[#6366f1] px-6 py-2 text-sm font-semibold shadow-lg shadow-blue-500/30 transition hover:shadow-blue-500/50 sm:px-10 sm:py-3 sm:text-base ${Xh}`,disabled:n,onClick:()=>e(t?"/dashboard":"/auth"),children:t?"Enter CouchStay":"Sign in"}),c&&l.jsxs(Se,{variant:"outline",className:`rounded-full border-blue-200/70 bg-white/70 px-5 py-2 text-sm text-slate-600 shadow-inner shadow-blue-100 sm:px-8 sm:py-3 sm:text-base ${Xh}`,onClick:()=>e("/auth"),children:["Create account ",l.jsx(_I,{className:"ml-2 h-4 w-4"})]}),l.jsx(Se,{variant:"ghost",className:`rounded-full px-4 py-2 text-sm text-slate-600 sm:px-6 sm:py-3 sm:text-base ${Xh}`,onClick:()=>e("/listings"),children:"Browse listings"})]}),!i&&l.jsx("p",{className:"text-xs text-slate-500",children:"Checking your account"})]})})]})};var NN={exports:{}},v6="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",y6=v6,w6=y6;function jN(){}function PN(){}PN.resetWarningCache=jN;var x6=function(){function e(r,s,o,a,i,c){if(c!==w6){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:PN,resetWarningCache:jN};return n.PropTypes=n,n};NN.exports=x6();var b6=NN.exports;const He=Qm(b6);function mx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function gx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mx(Object(n),!0).forEach(function(r){TN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mx(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ru(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ru=function(t){return typeof t}:Ru=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru(e)}function TN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S6(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function _6(e,t){if(e==null)return{};var n=S6(e,t),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function RN(e,t){return E6(e)||C6(e,t)||k6(e,t)||N6()}function E6(e){if(Array.isArray(e))return e}function C6(e,t){var n=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(n!=null){var r=[],s=!0,o=!1,a,i;try{for(n=n.call(e);!(s=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));s=!0);}catch(c){o=!0,i=c}finally{try{!s&&n.return!=null&&n.return()}finally{if(o)throw i}}return r}}function k6(e,t){if(e){if(typeof e=="string")return vx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vx(e,t)}}function vx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $t=function(t,n,r){var s=!!r,o=K.useRef(r);K.useEffect(function(){o.current=r},[r]),K.useEffect(function(){if(!s||!t)return function(){};var a=function(){o.current&&o.current.apply(o,arguments)};return t.on(n,a),function(){t.off(n,a)}},[s,n,t,o])},Vm=function(t){var n=K.useRef(t);return K.useEffect(function(){n.current=t},[t]),n.current},vi=function(t){return t!==null&&Ru(t)==="object"},j6=function(t){return vi(t)&&typeof t.then=="function"},P6=function(t){return vi(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},yx="[object Object]",T6=function e(t,n){if(!vi(t)||!vi(n))return t===n;var r=Array.isArray(t),s=Array.isArray(n);if(r!==s)return!1;var o=Object.prototype.toString.call(t)===yx,a=Object.prototype.toString.call(n)===yx;if(o!==a)return!1;if(!o&&!r)return t===n;var i=Object.keys(t),c=Object.keys(n);if(i.length!==c.length)return!1;for(var u={},d=0;d<i.length;d+=1)u[i[d]]=!0;for(var h=0;h<c.length;h+=1)u[c[h]]=!0;var p=Object.keys(u);if(p.length!==i.length)return!1;var m=t,w=n,v=function(x){return e(m[x],w[x])};return p.every(v)},IN=function(t,n,r){return vi(t)?Object.keys(t).reduce(function(s,o){var a=!vi(n)||!T6(t[o],n[o]);return r.includes(o)?(a&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),s):a?gx(gx({},s||{}),{},TN({},o,t[o])):s},null):null},ON="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",wx=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ON;if(t===null||P6(t))return t;throw new Error(n)},R6=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ON;if(j6(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(s){return wx(s,n)})};var r=wx(t,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},I6=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"5.4.1"}),t.registerAppInfo({name:"react-stripe-js",version:"5.4.1",url:"https://stripe.com/docs/stripe-js/react"}))},Lf=K.createContext(null);Lf.displayName="ElementsContext";var AN=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t},MN=function(t){var n=t.stripe,r=t.options,s=t.children,o=K.useMemo(function(){return R6(n)},[n]),a=K.useState(function(){return{stripe:o.tag==="sync"?o.stripe:null,elements:o.tag==="sync"?o.stripe.elements(r):null}}),i=RN(a,2),c=i[0],u=i[1];K.useEffect(function(){var p=!0,m=function(v){u(function(y){return y.stripe?y:{stripe:v,elements:v.elements(r)}})};return o.tag==="async"&&!c.stripe?o.stripePromise.then(function(w){w&&p&&m(w)}):o.tag==="sync"&&!c.stripe&&m(o.stripe),function(){p=!1}},[o,c,r]);var d=Vm(n);K.useEffect(function(){d!==null&&d!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[d,n]);var h=Vm(r);return K.useEffect(function(){if(c.elements){var p=IN(r,h,["clientSecret","fonts"]);p&&c.elements.update(p)}},[r,h,c.elements]),K.useEffect(function(){I6(c.stripe)},[c.stripe]),K.createElement(Lf.Provider,{value:c},s)};MN.propTypes={stripe:He.any,options:He.object};var O6=function(t){var n=K.useContext(Lf);return AN(n,t)},A6=function(){var t=O6("calls useElements()"),n=t.elements;return n};He.func.isRequired;var DN=K.createContext(null);DN.displayName="CheckoutContext";He.any,He.shape({clientSecret:He.oneOfType([He.string,He.instanceOf(Promise)]).isRequired,elementsOptions:He.object}).isRequired;var Ym=function(t){var n=K.useContext(DN),r=K.useContext(Lf);if(n){if(r)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return n}else return AN(r,t)},M6=["mode"],D6=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},fn=function(t,n){var r="".concat(D6(t),"Element"),s=function(c){var u=c.id,d=c.className,h=c.options,p=h===void 0?{}:h,m=c.onBlur,w=c.onFocus,v=c.onReady,y=c.onChange,x=c.onEscape,g=c.onClick,b=c.onLoadError,S=c.onLoaderStart,_=c.onNetworksChange,C=c.onConfirm,N=c.onCancel,T=c.onShippingAddressChange,L=c.onShippingRateChange,$=c.onSavedPaymentMethodRemove,V=c.onSavedPaymentMethodUpdate,F=Ym("mounts <".concat(r,">")),O="elements"in F?F.elements:null,j="checkoutState"in F?F.checkoutState:null,z=(j==null?void 0:j.type)==="success"||(j==null?void 0:j.type)==="loading"?j.sdk:null,A=K.useState(null),M=RN(A,2),E=M[0],R=M[1],W=K.useRef(null),J=K.useRef(null);$t(E,"blur",m),$t(E,"focus",w),$t(E,"escape",x),$t(E,"click",g),$t(E,"loaderror",b),$t(E,"loaderstart",S),$t(E,"networkschange",_),$t(E,"confirm",C),$t(E,"cancel",N),$t(E,"shippingaddresschange",T),$t(E,"shippingratechange",L),$t(E,"savedpaymentmethodremove",$),$t(E,"savedpaymentmethodupdate",V),$t(E,"change",y);var Y;v&&(t==="expressCheckout"?Y=v:Y=function(){v(E)}),$t(E,"ready",Y),K.useLayoutEffect(function(){if(W.current===null&&J.current!==null&&(O||z)){var B=null;if(z)switch(t){case"paymentForm":B=z.createPaymentFormElement();break;case"payment":B=z.createPaymentElement(p);break;case"address":if("mode"in p){var D=p.mode,U=_6(p,M6);if(D==="shipping")B=z.createShippingAddressElement(U);else if(D==="billing")B=z.createBillingAddressElement(U);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":B=z.createExpressCheckoutElement(p);break;case"currencySelector":B=z.createCurrencySelectorElement();break;case"taxId":B=z.createTaxIdElement(p);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else O&&(B=O.create(t,p));W.current=B,R(B),B&&B.mount(J.current)}},[O,z,p]);var ue=Vm(p);return K.useEffect(function(){if(W.current){var B=IN(p,ue,["paymentRequest"]);B&&"update"in W.current&&W.current.update(B)}},[p,ue]),K.useLayoutEffect(function(){return function(){if(W.current&&typeof W.current.destroy=="function")try{W.current.destroy(),W.current=null}catch{}}},[]),K.createElement("div",{id:u,className:d,ref:J})},o=function(c){Ym("mounts <".concat(r,">"));var u=c.id,d=c.className;return K.createElement("div",{id:u,className:d})},a=n?o:s;return a.propTypes={id:He.string,className:He.string,onChange:He.func,onBlur:He.func,onFocus:He.func,onReady:He.func,onEscape:He.func,onClick:He.func,onLoadError:He.func,onLoaderStart:He.func,onNetworksChange:He.func,onConfirm:He.func,onCancel:He.func,onShippingAddressChange:He.func,onShippingRateChange:He.func,onSavedPaymentMethodRemove:He.func,onSavedPaymentMethodUpdate:He.func,options:He.object},a.displayName=r,a.__elementType=t,a},hn=typeof window>"u",L6=K.createContext(null);L6.displayName="EmbeddedCheckoutProviderContext";var $6=function(){var t=Ym("calls useStripe()"),n=t.stripe;return n};fn("auBankAccount",hn);fn("card",hn);fn("cardNumber",hn);fn("cardExpiry",hn);fn("cardCvc",hn);fn("iban",hn);var F6=fn("payment",hn);fn("expressCheckout",hn);fn("paymentRequestButton",hn);fn("linkAuthentication",hn);fn("address",hn);fn("shippingAddress",hn);fn("paymentMethodMessaging",hn);fn("taxId",hn);var LN="clover",U6=function(t){return t===3?"v3":t},$N="https://js.stripe.com",B6="".concat($N,"/").concat(LN,"/stripe.js"),W6=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,z6=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,xx="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",H6=function(t){return W6.test(t)||z6.test(t)},V6=function(){for(var t=document.querySelectorAll('script[src^="'.concat($N,'"]')),n=0;n<t.length;n++){var r=t[n];if(H6(r.src))return r}return null},bx=function(t){var n="",r=document.createElement("script");r.src="".concat(B6).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},Y6=function(t,n){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"8.5.3",startTime:n})},qi=null,lu=null,cu=null,K6=function(t){return function(n){t(new Error("Failed to load Stripe.js",{cause:n}))}},G6=function(t,n){return function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))}},q6=function(t){return qi!==null?qi:(qi=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&t&&console.warn(xx),window.Stripe){n(window.Stripe);return}try{var s=V6();if(s&&t)console.warn(xx);else if(!s)s=bx(t);else if(s&&cu!==null&&lu!==null){var o;s.removeEventListener("load",cu),s.removeEventListener("error",lu),(o=s.parentNode)===null||o===void 0||o.removeChild(s),s=bx(t)}cu=G6(n,r),lu=K6(r),s.addEventListener("load",cu),s.addEventListener("error",lu)}catch(a){r(a);return}}),qi.catch(function(n){return qi=null,Promise.reject(n)}))},Q6=function(t,n,r){if(t===null)return null;var s=n[0],o=s.match(/^pk_test/),a=U6(t.version),i=LN;o&&a!==i&&console.warn("Stripe.js@".concat(a," was loaded on the page, but @stripe/stripe-js@").concat("8.5.3"," expected Stripe.js@").concat(i,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=t.apply(void 0,n);return Y6(c,r),c},Qi,FN=!1,UN=function(){return Qi||(Qi=q6(null).catch(function(t){return Qi=null,Promise.reject(t)}),Qi)};Promise.resolve().then(function(){return UN()}).catch(function(e){FN||console.warn(e)});var J6=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];FN=!0;var s=Date.now();return UN().then(function(o){return Q6(o,n,s)})};const BN="pk_test_51SbObe1iaTLobM1h9AqE3AcfCfUEPeJvWO7ZreHNy6DIDXLDZMEF17qlduSZAzNouH393aUJQy9aU0Plix7p24a900ijJeqax6";let Zh=null;const X6=()=>typeof window>"u"?null:(Zh||(Zh=J6(BN)),Zh),Z6=!!BN,eW=({amountLabel:e,paymentDueLabel:t,onPaymentSuccess:n})=>{const r=$6(),s=A6(),[o,a]=f.useState(!1),[i,c]=f.useState(null),u=async d=>{var p;if(d.preventDefault(),!r||!s)return;a(!0),c(null);const h=typeof window<"u"?`${window.location.origin}/renter-dashboard`:void 0;try{const m=await r.confirmPayment({elements:s,confirmParams:h?{return_url:h}:void 0,redirect:"if_required"});m.error?c(m.error.message??"The payment could not be completed."):((p=m.paymentIntent)==null?void 0:p.status)==="succeeded"?(c("Payment successful! You're all set."),await(n==null?void 0:n())):c("Your payment is processing. We'll update you shortly.")}catch(m){const w=m instanceof Error?m.message:"Unexpected issue while confirming the payment.";c(w)}finally{a(!1)}};return l.jsxs("form",{onSubmit:u,className:"space-y-4",children:[l.jsxs("div",{className:"rounded-md border border-dashed border-muted-foreground/40 bg-muted/20 p-3 text-sm text-muted-foreground",children:[l.jsxs("p",{className:"font-semibold text-sketch-dark text-base text-left",children:["Total due: ",e]}),t&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["Pay before ",t," to keep your approved stay."]})]}),l.jsx(F6,{options:{layout:"tabs"}}),l.jsx(Se,{type:"submit",className:"w-full",disabled:!r||o,children:o?"Processing":`Pay ${e}`}),i&&l.jsx("p",{className:"text-sm text-muted-foreground text-center",children:i})]})},WN=({open:e,onOpenChange:t,booking:n,clientSecret:r,amountLabel:s,paymentDueAt:o,onPaymentSuccess:a})=>{const i=X6(),c=f.useMemo(()=>{if(!o)return null;const m=new Date(o);return Number.isNaN(m.getTime())?null:Me(m,"MMM d, yyyy HH:mm")},[o]),u=!!(e&&n&&r&&i),d=n?`Pay ${n.couchTitle??"for your stay"}`:"Complete payment";let h=null;Z6?e&&!r&&(h="We couldn't create a payment session. Close this window and try again."):h="Stripe is not configured in this environment. Add VITE_STRIPE_PUBLISHABLE_KEY to your environment variables.";const p=u?{clientSecret:r,appearance:{theme:"stripe",labels:"floating"}}:void 0;return l.jsx(Pf,{open:e,onOpenChange:m=>{t(m)},children:l.jsxs(_c,{className:"max-w-md",children:[l.jsxs(Ec,{children:[l.jsx(Cc,{children:d}),l.jsx(Tf,{children:"Complete payment to confirm your approved stay. We only charge after the host accepts your request."})]}),!u||h?l.jsx("div",{className:"rounded-md border border-dashed border-muted-foreground/40 bg-muted/30 p-4 text-sm text-muted-foreground",children:h??"Preparing checkout"}):l.jsx(MN,{stripe:i,options:p,children:l.jsx(eW,{amountLabel:s,paymentDueLabel:c,onPaymentSuccess:a})},r)]})})},zN=async e=>{if(!e.bookingId)throw new Error("Booking request is missing");const t=Number(e.amount);if(!Number.isFinite(t)||t<=0)throw new Error("A positive payment amount is required");const{data:n,error:r}=await ce.functions.invoke("create-payment-intent",{body:{bookingId:e.bookingId,amount:t,renterEmail:e.renterEmail??void 0}});if(r)throw r;if(!(n!=null&&n.clientSecret))throw new Error("We couldn't start checkout. Please try again.");return n},ep="CHF",tW=e=>{if(!e)return null;const t=e.trim();if(!t)return null;const n=t.replace(/[^0-9.,-]/g,"");if(!n)return null;const r=n.includes(","),s=n.includes(".");let o=n;r&&s?o=o.replace(/,/g,""):r&&!s&&(o=o.replace(/,/g,"."));const a=Number(o);return!Number.isFinite(a)||a<=0?null:a},nW=e=>{if(!e)return ep;const t=e.trim();if(!t)return ep;const n=t.match(/^[^0-9-]+/),r=n?n[0].trim():"";return r||(t.startsWith("$")?"$":ep)},rW=(e,t)=>{const n=nW(e),r=/[A-Za-z]/.test(n)&&n.length>1;return`${n?`${n}${r?" ":""}`:""}${t.toFixed(2)}`},Ad=(e,t)=>{const n=tW(e);if(!n)return null;const r=typeof t=="number"?t:Number(t??0),s=Math.max(1,Number.isFinite(r)?r:1),o=n*s;return{nightlyRate:n,nights:s,totalDue:o,amountLabel:rW(e,o)}},sW=(e,t)=>{const n={text:e??"",senderRole:"renter",senderName:t.renterName??t.hostName??null,senderId:null,hostName:t.hostName??null,hostEmail:null,renterName:t.renterName??null,renterEmail:null};if(!e)return{...n,rawBody:""};try{const r=JSON.parse(e);if(typeof r!="object"||r===null)return{...n,rawBody:e};const s=typeof r.text=="string"?r.text:n.text,o=r.senderRole==="host"?"host":"renter",a=typeof r.senderName=="string"?r.senderName:n.senderName,i=typeof r.senderId=="string"?r.senderId:null,c=typeof r.hostName=="string"?r.hostName:n.hostName,u=typeof r.hostEmail=="string"?r.hostEmail:null,d=typeof r.renterName=="string"?r.renterName:n.renterName,h=typeof r.renterEmail=="string"?r.renterEmail:null;return{text:s,senderRole:o,senderName:a,senderId:i,hostName:c,hostEmail:u,renterName:d,renterEmail:h,rawBody:e}}catch{return{...n,rawBody:e}}},iy=e=>{const t=sW(e.body,{hostName:e.host_name,renterName:e.renter_name});return{id:e.id,couchId:e.couch_id,hostId:e.host_id,hostName:t.hostName,hostEmail:t.hostEmail,renterId:e.renter_id,renterName:t.renterName,renterEmail:t.renterEmail,text:t.text,rawBody:t.rawBody??e.body??"",senderRole:t.senderRole,senderName:t.senderName,senderId:t.senderId,sentAt:e.sent_at??e.created_at??new Date().toISOString()}},Iu=e=>e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)?e:null,oW=e=>{if(!e)return[];const t=new Set;return e.forEach(n=>{if(!n)return;const r=n.trim();r&&t.add(r)}),Array.from(t)},aW=e=>e.replace(/[%_]/g,t=>`\\${t}`).replace(/,/g,"\\,"),HN=async e=>{var c;const t=e.senderRole??"renter",n=e.senderName??(t==="host"?e.hostEmail??e.hostName:e.renterName),r=Iu(e.senderId),s={version:1,text:e.body,senderRole:t,senderName:n,senderId:r,hostName:e.hostEmail??e.hostName,hostEmail:e.hostEmail??null,renterName:e.renterName,renterEmail:e.renterEmail??((c=e.renterName)!=null&&c.includes("@")?e.renterName:null)},o={couch_id:e.couchId,host_id:Iu(e.hostId),host_name:e.hostEmail??e.hostName,renter_id:Iu(e.renterId),renter_name:e.renterName,body:JSON.stringify(s),sent_at:e.sentAt??new Date().toISOString()},{data:a,error:i}=await ce.from("messages").insert(o).select().single();if(i)throw i;return iy(a)},VN=async(e,t)=>{const n=Iu(e),r=oW(t),s=[];if(n&&s.push(`renter_id.eq.${n}`),r.forEach(c=>{s.push(`renter_name.ilike.%${aW(c)}%`)}),s.length===0)return[];let o=ce.from("messages").select("*").order("sent_at",{ascending:!0});s.length===1&&s[0].startsWith("renter_id.eq.")?o=o.eq("renter_id",n):o=o.or(s.join(","));const{data:a,error:i}=await o;if(i)throw i;return(a??[]).map(iy)},iW=({open:e,onOpenChange:t,thread:n,currentUserRole:r,onSendMessage:s,sending:o=!1})=>{const[a,i]=f.useState(""),c=f.useMemo(()=>n?[...n.messages].sort((h,p)=>new Date(h.sentAt).getTime()-new Date(p.sentAt).getTime()):[],[n]),u=async()=>{a.trim()&&(await s(a.trim()),i(""))},d=f.useMemo(()=>n?`Chat with ${r==="host"?n.renterName??"Guest":n.hostName??"Host"}`:"Conversation",[n,r]);return l.jsx(Pf,{open:e,onOpenChange:h=>{i(""),t(h)},children:l.jsxs(_c,{className:"max-w-lg",children:[l.jsxs(Ec,{children:[l.jsx(Cc,{children:d}),(n==null?void 0:n.couchId)&&l.jsxs(Tf,{className:"text-xs text-muted-foreground",children:["Couch reference: ",n.couchId]})]}),l.jsx(ay,{className:"max-h-80 rounded-md border border-sketch p-3 bg-background/50",children:l.jsxs("div",{className:"space-y-3",children:[c.map(h=>{const p=h.senderRole===r;return l.jsxs("div",{className:`flex flex-col ${p?"items-end":"items-start"}`,children:[l.jsx("div",{className:`max-w-[85%] rounded-lg px-3 py-2 text-sm shadow-sm ${p?"bg-sketch-blue text-white":"bg-muted"}`,children:l.jsx("p",{className:"whitespace-pre-line leading-relaxed",children:h.text})}),l.jsxs("span",{className:"mt-1 text-[10px] uppercase tracking-wide text-muted-foreground",children:[p?"You":h.senderName??(p?"You":"Partner")," "," ",Me(new Date(h.sentAt),"MMM d, yyyy HH:mm")]})]},h.id)}),!c.length&&l.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Start the conversation by sending a message."})]})}),l.jsxs(Vv,{className:"flex flex-col gap-3 sm:flex-col",children:[l.jsx(ji,{value:a,onChange:h=>i(h.target.value),placeholder:"Type your message...",rows:3}),l.jsx(Se,{onClick:u,disabled:o||!a.trim(),children:o?"Sending...":"Send message"})]})]})})},lW=({queryKey:e,matcher:t})=>{const n=ki(),r=JSON.stringify(e);f.useEffect(()=>{const s=`messages-${r}-${Math.random().toString(36).slice(2)}`,o=ce.channel(s),a=i=>{const c=i.new;if(!c)return;const u=iy(c);t(u)&&n.invalidateQueries({queryKey:e})};return o.on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},a).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages"},a).subscribe(),()=>{ce.removeChannel(o)}},[r,t,n,e])},Km=({queryKey:e,matcher:t})=>{const n=ki(),r=JSON.stringify(e);f.useEffect(()=>{const s=`booking-requests-${r}-${Math.random().toString(36).slice(2)}`,o=ce.channel(s),a=i=>{if(!i.new)return;const c=Ii(i.new);t(c)&&n.invalidateQueries({queryKey:e})};return o.on("postgres_changes",{event:"INSERT",schema:"public",table:"booking_requests"},a).on("postgres_changes",{event:"UPDATE",schema:"public",table:"booking_requests"},a).subscribe(),()=>{ce.removeChannel(o)}},[r,t,n,e])},cW=()=>{const{profile:e}=Bn(),t=lr(),n=ki(),{toast:r}=Ar(),s=(e==null?void 0:e.id)??null,o=f.useMemo(()=>{const O=new Set,j=z=>{if(!z)return;const A=z.trim();A&&O.add(A)};return j(e==null?void 0:e.full_name),e!=null&&e.full_name&&j(e.full_name.split(" ")[0]),j(e==null?void 0:e.email),e!=null&&e.email&&j(e.email.split("@")[0]),Array.from(O)},[e==null?void 0:e.full_name,e==null?void 0:e.email]),a=o.join("|"),i=f.useMemo(()=>o.map(O=>O.toLowerCase()),[o]),c=f.useCallback(O=>{const j=s&&O.renterId&&O.renterId===s,z=(O.renterName??"").toLowerCase(),A=(O.renterEmail??"").toLowerCase(),M=i.some(E=>z.includes(E)||A.includes(E));return!!(j||M)},[s,i]),u=f.useCallback(O=>{const j=s&&O.renterId&&O.renterId===s,z=(O.renterName??"").toLowerCase(),A=i.some(M=>z.includes(M));return!!(j||A)},[s,i]),d=gl({queryKey:["booking-requests",s,a],queryFn:()=>Rf(s,o),enabled:!!(s||o.length)}),h=gl({queryKey:["messages",s,a],queryFn:()=>VN(s,o),enabled:!!(s||o.length)});lW({queryKey:["messages",s,a],matcher:c}),Km({queryKey:["booking-requests",s,a],matcher:u});const[p,m]=f.useState(null),[w,v]=f.useState(!1),[y,x]=f.useState(!1),[g,b]=f.useState({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null}),S=vl({mutationFn:async({thread:O,text:j})=>{const z=O.hostName??"Host",A=(e==null?void 0:e.full_name)??(e==null?void 0:e.email)??O.renterName??"You";await HN({couchId:O.couchId??`thread-${O.threadKey}`,hostId:O.hostId,hostName:z,hostEmail:O.hostEmail??null,renterId:e==null?void 0:e.id,renterName:A,renterEmail:(e==null?void 0:e.email)??null,body:j,senderRole:"renter",senderId:e==null?void 0:e.id,senderName:A})},onSuccess:()=>{n.invalidateQueries({queryKey:["messages",s,a]})},onError:O=>{console.error("Failed to send message",O),r({title:"Unable to send",description:"We couldn't deliver your message. Please try again.",variant:"destructive"})}}),_=vl({mutationFn:async({request:O,summary:j})=>{if(O.paymentStatus==="paid")throw new Error("This stay has already been paid for.");return O.paymentClientSecret&&O.paymentStatus!=="expired"?{clientSecret:O.paymentClientSecret,paymentDue:O.paymentDueAt??void 0}:zN({bookingId:O.id,amount:j.totalDue,renterEmail:(e==null?void 0:e.email)??null})},onSuccess:(O,j)=>{b({booking:j.request,clientSecret:O.clientSecret,amountLabel:j.summary.amountLabel,paymentDueAt:O.paymentDue??j.request.paymentDueAt??null}),x(!0),n.invalidateQueries({queryKey:["booking-requests",s,a]})},onError:O=>{const j=O instanceof Error?O.message:"We couldn't start checkout.";r({title:"Payment unavailable",description:j,variant:"destructive"})}}),C=f.useMemo(()=>d.data??[],[d.data]),N=f.useMemo(()=>h.data??[],[h.data]),T=f.useMemo(()=>{const O=new Map;return N.forEach(j=>{const z=j.hostName??"Host",A=j.renterName??(e==null?void 0:e.full_name)??"You",E=[j.couchId??"general",z??"host",A??"you"].join("::"),R=O.get(E);R?R.messages.push(j):O.set(E,{threadKey:E,couchId:j.couchId,hostId:j.hostId,hostName:z,hostEmail:j.hostEmail,renterId:(e==null?void 0:e.id)??j.renterId,renterName:A,renterEmail:j.renterEmail??(e==null?void 0:e.email)??null,messages:[j]})}),Array.from(O.values()).sort((j,z)=>{const A=j.messages[j.messages.length-1],M=z.messages[z.messages.length-1];return new Date(M.sentAt).getTime()-new Date(A.sentAt).getTime()})},[N,e==null?void 0:e.full_name,e==null?void 0:e.email,e==null?void 0:e.id]),L=O=>{m(O),v(!0)},$=async O=>{p&&await S.mutateAsync({thread:p,text:O})},V=f.useCallback(O=>{if(O.status!=="approved"){r({title:"Host approval pending",description:"Your host needs to approve the stay before you can pay."});return}if(O.paymentStatus==="paid"){r({title:"Already paid",description:"Thanks! We've already received payment for this stay."});return}if(O.paymentStatus==="expired"){r({title:"Payment window expired",description:"Ask your host to re-approve the booking to reopen payment.",variant:"destructive"});return}const j=Ad(O.pricePerNight??null,O.nights);if(!j){r({title:"Payment unavailable",description:"We couldn't calculate the total for this stay yet. Please check with your host.",variant:"destructive"});return}_.mutate({request:O,summary:j})},[_,r]),F=(O,j)=>{const z=O?new Date(O):null;return!z||Number.isNaN(z.getTime())?"Unknown date":Me(z,j)};return l.jsxs("main",{className:"dreamy-bg min-h-screen px-4 py-6",children:[l.jsxs("header",{className:"mb-8 flex items-center justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-sketch-dark",children:"Your dashboard"}),l.jsx("p",{className:"text-muted-foreground text-sm",children:"Track booking status and keep conversations going with hosts."})]}),l.jsx("div",{className:"flex gap-2",children:l.jsx(Se,{variant:"outline",size:"sm",onClick:()=>t("/listings"),children:"Back to listings"})})]}),!s&&l.jsx("div",{className:"sketch-card p-4 text-center text-sm text-muted-foreground",children:"Sign in as a renter to view your requests and messages."}),s&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("section",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-sketch-dark",children:"Booking requests"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending stays you've requested from hosts."})]}),d.isLoading&&l.jsx("div",{className:"sketch-card p-4 text-sm text-muted-foreground",children:"Loading your booking requests..."}),d.isError&&l.jsx("div",{className:"sketch-card p-4 text-sm text-destructive",children:"Unable to load booking requests right now. Please refresh the page."}),!d.isLoading&&!d.isError&&C.length===0&&l.jsx("div",{className:"sketch-card p-4 text-sm text-muted-foreground",children:"You haven't sent any booking requests yet."}),!d.isLoading&&!d.isError&&C.length>0&&l.jsx("div",{className:"space-y-3",children:C.map(O=>{var J;const j=Ad(O.pricePerNight??null,O.nights),z=O.paymentDueAt?F(O.paymentDueAt,"MMM d, yyyy HH:mm"):null,A=O.paymentStatus,M=_.isPending&&((J=_.variables)==null?void 0:J.request.id)===O.id,E=A==="paid",R=O.status==="approved"&&!E,W=A==="paid"?"Payment received. You're all set!":A==="failed"?"Your last payment attempt failed. Try again when you're ready.":A==="pending"?z?`Finish payment by ${z} to keep this reservation.`:"Finish payment to confirm your stay.":A==="expired"?"Payment window expired. Ask your host to reopen it.":"Complete payment to confirm your approved stay.";return l.jsxs("div",{className:"sketch-card p-4 grid gap-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-base font-semibold text-sketch-dark",children:O.couchTitle??"Couch request"}),l.jsx("span",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:O.status})]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:O.hostName?`Host: ${O.hostName}`:"Host details pending"}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[F(O.stayStart,"MMM d, yyyy"),"  ",F(O.stayEnd,"MMM d, yyyy"),"  ",O.nights??"?"," night",O.nights===1?"":"s"]}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:["Requested on ",F(O.createdAt,"MMM d, yyyy")]}),(R||E)&&l.jsxs("div",{className:"rounded-xl border border-emerald-200/70 bg-emerald-50/40 p-4 space-y-3",children:[l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-emerald-900",children:E?"Payment complete":"Payment required"}),l.jsx("p",{className:"text-xs text-emerald-800",children:W}),E&&l.jsxs("p",{className:"text-xs font-medium text-emerald-900",children:["Reserved for ",F(O.stayStart,"MMM d, yyyy"),"  Arrival ",F(O.stayStart,"HH:mm")]})]}),j&&l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-base font-semibold text-emerald-900",children:j.amountLabel}),l.jsxs("p",{className:"text-xs text-emerald-800",children:[j.nights," night",j.nights===1?"":"s"," at ",O.pricePerNight??""]})]})]}),R&&j&&l.jsx("div",{className:"flex flex-wrap gap-2",children:l.jsx(Se,{size:"sm",className:"rounded-full",disabled:M,onClick:()=>V(O),children:M?"Preparing checkout":"Pay now"})}),!j&&l.jsx("p",{className:"text-xs text-emerald-800",children:"The host hasn't set a nightly rate yet, so we can't calculate the total."}),A==="expired"&&l.jsx("p",{className:"text-xs text-rose-700",children:"Payment window expired. Ask the host to re-approve the request to try again."}),A==="failed"&&l.jsx("p",{className:"text-xs text-rose-700",children:"Payment failed. Double-check your card or try another method."})]})]},O.id)})})]}),l.jsxs("section",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-semibold text-sketch-dark",children:"Conversations"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Chat with hosts in real time."})]}),h.isLoading&&l.jsx("div",{className:"sketch-card p-4 text-sm text-muted-foreground",children:"Loading your messages..."}),h.isError&&l.jsx("div",{className:"sketch-card p-4 text-sm text-destructive",children:"Unable to load your messages right now. Please refresh the page."}),!h.isLoading&&!h.isError&&T.length===0&&l.jsx("div",{className:"sketch-card p-4 text-sm text-muted-foreground",children:"Send a note from a couch detail page to start a conversation."}),!h.isLoading&&!h.isError&&T.length>0&&l.jsx("div",{className:"space-y-3",children:T.map(O=>{const j=O.messages[O.messages.length-1],z=j.senderRole==="renter"?"You:":`${O.hostName??"Host"}:`;return l.jsx("button",{onClick:()=>L(O),className:"w-full text-left sketch-card p-4 hover:bg-sketch-light transition",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-sketch-dark text-sm",children:O.hostName??"Host"}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[z," ",j.text]})]}),l.jsx("span",{className:"text-xs text-muted-foreground",children:Me(new Date(j.sentAt),"MMM d, HH:mm")})]})},O.threadKey)})})]})]}),l.jsx(iW,{open:w,onOpenChange:O=>{v(O),O||m(null)},thread:p,currentUserRole:"renter",onSendMessage:$,sending:S.isPending}),l.jsx(WN,{open:y,onOpenChange:O=>{x(O),O||b({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null})},booking:g.booking,clientSecret:g.clientSecret,amountLabel:g.amountLabel,paymentDueAt:g.paymentDueAt,onPaymentSuccess:async()=>{var j;const O=(j=g.booking)==null?void 0:j.id;if(O){const z=A=>Array.isArray(A)?A.map(M=>M.id===O?{...M,paymentStatus:"paid",status:"approved"}:M):A;n.setQueryData(["booking-requests",s,a],z),n.setQueryData(["host-manage-renter",s,a],z)}r({title:"Payment successful",description:"Your stay is confirmedcheck your email for the receipt."}),x(!1),b({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null})}})]})},uW=[{value:"bsc",label:"Bachelor (BSc)"},{value:"msc",label:"Master (MSc)"},{value:"phd",label:"Doctorate (PhD)"},{value:"other",label:"Other program"}],dW={bsc:"Bachelor (BSc)",msc:"Master (MSc)",phd:"Doctorate (PhD)",other:"Other program"},fW=["1","2","3","4","5"],Sx="couch-photos",hW=e=>{const t=e.name.split(".").pop();return`${typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(36).slice(2)}${t?`.${t}`:""}`},pW=async(e,t)=>{const n=hW(t),r=`avatars/${e}/${n}`,{error:s}=await ce.storage.from(Sx).upload(r,t,{cacheControl:"3600",upsert:!0});if(s)throw new Error(s.message??"Failed to upload profile photo.");const{data:o}=ce.storage.from(Sx).getPublicUrl(r);if(!(o!=null&&o.publicUrl))throw new Error("Unable to fetch uploaded profile photo URL.");return o.publicUrl},mW=()=>{var R,W,J,Y,ue;const{profile:e,refreshUser:t}=Bn(),n=lr(),{toast:r}=Ar(),[s,o]=f.useState({fullName:"",userRole:"renter",avatarUrl:"",bio:"",university:"",programName:"",programYear:"",programType:"",studentIdUrl:"",payoutAccountHolder:"",payoutAccountNumber:"",payoutBankName:"",payoutBankCountry:""}),[a,i]=f.useState(!0),[c,u]=f.useState(!1),[d,h]=f.useState(null),[p,m]=f.useState(null),[w,v]=f.useState(""),y=f.useRef(null),x=(e==null?void 0:e.email)??"",g=!!(e!=null&&e.user_role);f.useEffect(()=>{(async()=>{if(!(e!=null&&e.id)){i(!1);return}try{const D=await eN(e.id).catch(()=>null),U=(D==null?void 0:D.program_year)??e.program_year??null,H={fullName:(D==null?void 0:D.full_name)??e.full_name??"",userRole:(D==null?void 0:D.user_role)??e.user_role??"renter",avatarUrl:(D==null?void 0:D.avatar_url)??e.avatar_url??"",bio:(D==null?void 0:D.bio)??"",university:(D==null?void 0:D.university)??e.university??"",programName:(D==null?void 0:D.program_name)??e.program_name??"",programYear:U?String(U):"",programType:(D==null?void 0:D.program_type)??e.program_type??"",studentIdUrl:(D==null?void 0:D.student_id_url)??e.student_id_url??"",payoutAccountHolder:(D==null?void 0:D.payout_account_holder)??e.payout_account_holder??"",payoutAccountNumber:(D==null?void 0:D.payout_account_number)??e.payout_account_number??"",payoutBankName:(D==null?void 0:D.payout_bank_name)??e.payout_bank_name??"",payoutBankCountry:(D==null?void 0:D.payout_bank_country)??e.payout_bank_country??""};o(H),v(H.avatarUrl??""),h(null),y.current&&(URL.revokeObjectURL(y.current),y.current=null)}catch(D){console.warn("Failed to fetch profile",D),(e.full_name||e.avatar_url)&&(o({fullName:e.full_name??"",userRole:e.user_role??"renter",avatarUrl:e.avatar_url??"",bio:e.bio??"",university:e.university??"",programName:e.program_name??"",programYear:e.program_year?String(e.program_year):"",programType:e.program_type??"",studentIdUrl:e.student_id_url??"",payoutAccountHolder:e.payout_account_holder??"",payoutAccountNumber:e.payout_account_number??"",payoutBankName:e.payout_bank_name??"",payoutBankCountry:e.payout_bank_country??""}),v(e.avatar_url??""),h(null))}finally{i(!1)}})()},[e==null?void 0:e.avatar_url,e==null?void 0:e.bio,e==null?void 0:e.full_name,e==null?void 0:e.id,e==null?void 0:e.user_role]),f.useEffect(()=>()=>{y.current&&URL.revokeObjectURL(y.current)},[]);const b=f.useMemo(()=>e?(s.fullName??"")!==(e.full_name??"")||s.userRole!==(e.user_role??"renter")||(s.avatarUrl??"")!==(e.avatar_url??"")||(s.bio??"")!==(e.bio??"")||(s.university??"")!==(e.university??"")||(s.programName??"")!==(e.program_name??"")||(s.programYear??"")!==(e.program_year?String(e.program_year):"")||(s.programType??"")!==(e.program_type??"")||(s.studentIdUrl??"")!==(e.student_id_url??"")||(s.payoutAccountHolder??"")!==(e.payout_account_holder??"")||(s.payoutAccountNumber??"")!==(e.payout_account_number??"")||(s.payoutBankName??"")!==(e.payout_bank_name??"")||(s.payoutBankCountry??"")!==(e.payout_bank_country??"")||!!d||!!p:!0,[s,e,d,p]),S=(B,D)=>{o(U=>({...U,[B]:D}))},_=async B=>{if(B.preventDefault(),!!e){u(!0);try{let D=s.avatarUrl;d&&(D=await pW(e.id,d));let U=s.studentIdUrl;p&&(U=await rN(e.id,p));const H=g?e.user_role??s.userRole:s.userRole,ie=s.programYear?Number(s.programYear):null,ye=ie&&Number.isFinite(ie)?ie:null,he=s.university.trim(),be=s.programName.trim(),le=s.payoutAccountHolder.trim(),I=s.payoutAccountNumber.trim(),G=s.payoutBankName.trim(),ne=s.payoutBankCountry.trim();if(H==="host"&&(!le||!I||!G||!ne)){r({title:"Add payout details",description:"Hosts need to provide all payout fields to receive Stripe transfers.",variant:"destructive"}),u(!1);return}const we=await Zv({id:e.id,email:e.email,full_name:s.fullName||null,user_role:H,avatar_url:D||null,bio:s.bio?s.bio.slice(0,100):null,student_id_url:U||null,university:he||null,program_name:be||null,program_year:ye??null,program_type:s.programType||null,payout_account_holder:le||null,payout_account_number:I||null,payout_bank_name:G||null,payout_bank_country:ne||null});o({fullName:we.full_name??"",userRole:we.user_role,avatarUrl:we.avatar_url??"",bio:we.bio??"",university:we.university??"",programName:we.program_name??"",programYear:we.program_year?String(we.program_year):"",programType:we.program_type??"",studentIdUrl:we.student_id_url??"",payoutAccountHolder:we.payout_account_holder??"",payoutAccountNumber:we.payout_account_number??"",payoutBankName:we.payout_bank_name??"",payoutBankCountry:we.payout_bank_country??""}),h(null),m(null),y.current&&(URL.revokeObjectURL(y.current),y.current=null),v(we.avatar_url??""),await t(),r({title:"Profile updated",description:"Your information is now up to date."})}catch(D){console.error("Failed to update profile",D),r({title:"Update failed",description:"We couldn't save your changes. Please try again.",variant:"destructive"})}finally{u(!1)}}},C=B=>{var H;const D=(H=B.target.files)==null?void 0:H[0];if(!D)return;h(D),y.current&&(URL.revokeObjectURL(y.current),y.current=null);const U=URL.createObjectURL(D);y.current=U,v(U)},N=B=>{var U;const D=((U=B.target.files)==null?void 0:U[0])??null;m(D)},T=()=>{m(null)},L=()=>{y.current&&(URL.revokeObjectURL(y.current),y.current=null),h(null),v(s.avatarUrl||(e==null?void 0:e.avatar_url)||"")},$=g?(e==null?void 0:e.user_role)??s.userRole:s.userRole,V=$==="host"?"Host":"Renter",F=(((R=s.fullName)==null?void 0:R.trim())||((W=e==null?void 0:e.full_name)==null?void 0:W.trim())||x||"Student").trim(),O=F.charAt(0).toUpperCase()||"S",j=[!!((J=s.fullName)!=null&&J.trim()),!!w,!!((Y=s.bio)!=null&&Y.trim()),!!((ue=s.university)!=null&&ue.trim())],z=Math.round(j.filter(Boolean).length/j.length*100),A=f.useMemo(()=>tN(s.university),[s.university]),M=s.programType?dW[s.programType]:"Add your program",E=s.programYear?`Year ${s.programYear}`:"Add your year";return e?l.jsx("main",{className:"dreamy-bg min-h-screen px-4 py-10",children:l.jsxs("div",{className:"mx-auto flex w-full max-w-5xl flex-col gap-6",children:[l.jsx(Se,{variant:"ghost",className:"w-fit rounded-full bg-white/70 px-4 py-2 text-sm text-slate-600 shadow-sm",onClick:()=>n(-1),children:" Back to dashboard"}),l.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr,1.5fr]",children:[l.jsxs("div",{className:"rounded-[2rem] border border-white/60 bg-white/85 p-6 shadow-2xl shadow-blue-100/50 backdrop-blur",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"h-16 w-16 overflow-hidden rounded-full border-4 border-white shadow-lg shadow-blue-100",children:w?l.jsx("img",{src:w,alt:"Profile",className:"h-full w-full object-cover",onError:()=>v("")}):l.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gradient-to-br from-blue-200 to-indigo-300 text-2xl font-semibold text-white",children:O})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Profile overview"}),l.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:F}),l.jsx("p",{className:"text-sm text-slate-500",children:x})]})]}),l.jsxs("div",{className:"mt-6 rounded-[1.5rem] border border-slate-100 bg-slate-50/80 p-4",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm font-medium text-slate-600",children:[l.jsx("span",{children:"Profile completeness"}),l.jsxs("span",{children:[z,"%"]})]}),l.jsx("div",{className:"mt-2 h-2 rounded-full bg-white/70",children:l.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-500 to-indigo-500",style:{width:`${z}%`}})}),l.jsx("p",{className:"mt-2 text-xs text-slate-400",children:"Finish your name, photo, and bio to help students recognize you faster."})]}),l.jsxs("dl",{className:"mt-6 grid gap-4 text-sm text-slate-600",children:[l.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-100 bg-white/70 px-4 py-3",children:[l.jsxs("div",{children:[l.jsx("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"User role"}),l.jsx("dd",{className:"text-base font-semibold text-slate-900",children:V})]}),l.jsx("span",{className:"rounded-full bg-indigo-50 px-3 py-1 text-xs font-semibold text-indigo-500",children:V==="Host"?"Hosting couches":"Seeking couches"})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white/70 px-4 py-3",children:[l.jsx("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"University"}),l.jsx("dd",{className:"mt-1 text-base font-semibold text-slate-900",children:s.university.trim()||"Add your university"})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white/70 px-4 py-3",children:[l.jsx("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Program"}),l.jsxs("dd",{className:"mt-1 space-y-1 text-sm text-slate-600",children:[l.jsx("p",{className:"font-semibold text-slate-900",children:s.programName.trim()||"Add your program"}),l.jsxs("p",{className:"text-xs text-slate-500",children:[s.programType?M:"Choose program type","  ",s.programYear?E:"Select your year"]})]})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white/70 px-4 py-3",children:[l.jsx("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Student ID"}),l.jsxs("dd",{className:"mt-1 flex items-center justify-between text-sm text-slate-600",children:[l.jsx("span",{children:s.studentIdUrl?"Uploaded":"Waiting for upload"}),s.studentIdUrl&&l.jsx("a",{href:s.studentIdUrl,target:"_blank",rel:"noreferrer",className:"text-xs font-semibold text-indigo-600 underline",children:"View"})]})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white/70 px-4 py-3",children:[l.jsx("dt",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Tips"}),l.jsxs("dd",{className:"mt-2 space-y-2 text-sm",children:[l.jsx("p",{children:" Add a friendly bio so hosts know how to welcome you."}),l.jsx("p",{children:" Upload a clear profile photo to build trust."})]})]})]})]}),l.jsxs(Kv,{className:"rounded-[2rem] border border-white/70 bg-white/95 shadow-2xl shadow-blue-100/60",children:[l.jsxs(Pk,{className:"pb-4",children:[l.jsx(Gv,{className:"text-2xl font-semibold text-slate-900",children:"Edit your profile"}),l.jsx(qv,{className:"text-sm text-slate-500",children:"Update how other students see you. Your email stays the same for sign in."})]}),l.jsx(Tk,{children:a?l.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading your profile"}):l.jsxs("form",{className:"space-y-8",onSubmit:_,children:[l.jsxs("section",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Account"}),l.jsx("p",{className:"text-sm text-slate-500",children:"We use this info to keep your account secure."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"email",children:"Email"}),l.jsx(We,{id:"email",value:x,disabled:!0,className:"bg-slate-50 text-slate-500"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Email can't be changed."})]})]}),$==="host"&&l.jsxs("section",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Payout information"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Payment information stays private and is never shown to the public."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"payoutAccountHolder",children:"Account holder name"}),l.jsx(We,{id:"payoutAccountHolder",value:s.payoutAccountHolder,onChange:B=>S("payoutAccountHolder",B.target.value),placeholder:"Name on bank account"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"payoutAccountNumber",children:"IBAN or account number"}),l.jsx(We,{id:"payoutAccountNumber",value:s.payoutAccountNumber,onChange:B=>S("payoutAccountNumber",B.target.value),placeholder:"e.g. CH12 1234 5678 9012 3456 7"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"payoutBankName",children:"Bank name"}),l.jsx(We,{id:"payoutBankName",value:s.payoutBankName,onChange:B=>S("payoutBankName",B.target.value),placeholder:"Bank where you receive payouts"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"payoutBankCountry",children:"Bank country"}),l.jsx(We,{id:"payoutBankCountry",value:s.payoutBankCountry,onChange:B=>S("payoutBankCountry",B.target.value),placeholder:"Country where your bank is located"}),l.jsx("p",{className:"text-xs text-slate-500",children:"This helps Stripe route payouts to the right region."})]})]}),l.jsxs("section",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Public profile"}),l.jsx("p",{className:"text-sm text-slate-500",children:"These details are visible when students connect with you."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"fullName",children:"Full name"}),l.jsx(We,{id:"fullName",value:s.fullName,placeholder:"Your full name",onChange:B=>S("fullName",B.target.value)})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{children:"User type"}),g?l.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-slate-50/80 px-4 py-3 text-sm text-slate-600",children:[l.jsx("p",{className:"font-semibold text-slate-900",children:V}),l.jsx("p",{className:"text-xs text-slate-500",children:"Contact support if you need to change this later."})]}):l.jsxs(Jv,{value:s.userRole,onValueChange:B=>S("userRole",B),className:"flex flex-wrap gap-4 rounded-2xl border border-slate-100 bg-slate-50/80 p-3",children:[l.jsxs("div",{className:"flex items-center space-x-2 rounded-full bg-white px-3 py-2 shadow-sm",children:[l.jsx(Td,{id:"role-renter",value:"renter"}),l.jsx(Te,{htmlFor:"role-renter",className:"text-sm",children:"Renter"})]}),l.jsxs("div",{className:"flex items-center space-x-2 rounded-full bg-white px-3 py-2 shadow-sm",children:[l.jsx(Td,{id:"role-host",value:"host"}),l.jsx(Te,{htmlFor:"role-host",className:"text-sm",children:"Host"})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(Te,{htmlFor:"profilePhoto",children:"Profile photo"}),l.jsxs("div",{className:"flex flex-col gap-4 rounded-2xl border border-slate-100 bg-slate-50/80 p-4 sm:flex-row sm:items-center",children:[l.jsx("div",{className:"h-16 w-16 overflow-hidden rounded-full border border-white shadow",children:w?l.jsx("img",{src:w,alt:"Profile preview",className:"h-full w-full object-cover"}):l.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gradient-to-br from-blue-200 to-indigo-300 text-xl font-semibold text-white",children:O})}),l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsx(We,{id:"profilePhoto",type:"file",accept:"image/*",onChange:C,className:"cursor-pointer bg-white"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Upload a clear square image (PNG or JPG)."}),d&&l.jsx(Se,{type:"button",variant:"ghost",size:"sm",className:"px-0 text-xs text-slate-600",onClick:L,children:"Remove selected photo"})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Student verification"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Add your university details so hosts know you're an active student."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"university",children:"University"}),l.jsx(We,{id:"university",value:s.university,onChange:B=>S("university",B.target.value),placeholder:"Start typing your university name",autoComplete:"off",className:"h-11 rounded-2xl border-slate-200 bg-white"}),(()=>{const B=s.university.trim();return!B||!A.length||A.some(U=>U.toLowerCase()===B.toLowerCase())&&A.length===1?null:l.jsx("div",{className:"max-h-36 overflow-y-auto rounded-2xl border border-slate-200 bg-white",children:A.map(U=>l.jsx("button",{type:"button",className:"block w-full px-3 py-2 text-left text-sm transition hover:bg-blue-50",onClick:()=>S("university",U),children:U},U))})})()]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"programName",children:"Program name"}),l.jsx(We,{id:"programName",value:s.programName,onChange:B=>S("programName",B.target.value),placeholder:"e.g. Computer Science",className:"h-11 rounded-2xl border-slate-200 bg-white"})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{children:"Program type"}),l.jsxs(Us,{value:s.programType,onValueChange:B=>S("programType",B),children:[l.jsx(Xr,{className:"rounded-2xl border-slate-200 bg-white",children:l.jsx(Bs,{placeholder:"Select type"})}),l.jsx(Zr,{children:uW.map(B=>l.jsx(er,{value:B.value,children:B.label},B.value))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{children:"Year in program"}),l.jsxs(Us,{value:s.programYear,onValueChange:B=>S("programYear",B),children:[l.jsx(Xr,{className:"rounded-2xl border-slate-200 bg-white",children:l.jsx(Bs,{placeholder:"Select year"})}),l.jsx(Zr,{children:fW.map(B=>l.jsxs(er,{value:B,children:["Year ",B]},B))})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"studentIdUpload",children:"Student ID"}),l.jsxs("div",{className:"space-y-2 rounded-2xl border border-slate-100 bg-slate-50/80 p-4",children:[l.jsx(We,{id:"studentIdUpload",type:"file",accept:"image/*,.pdf",onChange:N,className:"cursor-pointer bg-white"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Upload updated, new student ID."}),p&&l.jsx(Se,{type:"button",variant:"ghost",size:"sm",className:"px-0 text-xs text-slate-600",onClick:T,children:"Remove selected document"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Te,{htmlFor:"bio",children:"Bio"}),l.jsx(ji,{id:"bio",rows:4,value:s.bio,placeholder:"Share a bit about yourself",maxLength:100,onChange:B=>S("bio",B.target.value),className:"rounded-2xl"}),l.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[l.jsx("p",{children:"Keep it friendlyother students will see this when they interact with you."}),l.jsxs("span",{children:[s.bio.length,"/100"]})]})]})]}),l.jsxs("div",{className:"flex flex-col gap-3 border-t border-slate-100 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsx(Se,{type:"button",variant:"outline",onClick:()=>n(-1),className:"rounded-full px-6",children:"Cancel"}),l.jsx(Se,{type:"submit",disabled:c||!b,className:"rounded-full px-6",children:c?"Saving":"Save changes"})]})]})})]})]})]})}):l.jsxs("main",{className:"min-h-screen flex flex-col items-center justify-center gap-4",children:[l.jsx("p",{className:"text-muted-foreground",children:"Sign in to edit your profile."}),l.jsx(Se,{onClick:()=>n("/auth"),children:"Go to sign in"})]})},gW=()=>{const{profile:e,session:t}=Bn(),n=lr(),{toast:r}=Ar(),s=$v(e,t),[o,a]=f.useState([]),[i,c]=f.useState(!0);f.useEffect(()=>{(async()=>{c(!0);try{const v=await Cd(s);a(v)}finally{c(!1)}})()},[s]),f.useEffect(()=>{if(typeof window>"u")return;const w=()=>{s&&Cd(s).then(a).catch(()=>{})};return window.addEventListener("wishlist-updated",w),()=>window.removeEventListener("wishlist-updated",w)},[s]);const u=async w=>{if(s){a(v=>v.filter(y=>y.couchId!==w.couchId));try{await Fv(s,w.couchId)}catch(v){console.error("Failed to remove wishlist item",v),r({title:"Couldn't remove",description:"Please try again.",variant:"destructive"}),a(y=>[w,...y])}}},d=f.useMemo(()=>o.map(w=>{const v=w.snapshot??{id:w.couchId,image:Qo,price:"$0",title:"Saved couch",host:"Community host",hostEmail:null,location:"Location shared after booking",availableDates:"Flexible availability",description:"",hostId:null,availability:null,coordinates:null};return{...w,snapshot:{...v,id:v.id??w.couchId,image:v.image||Qo,title:v.title||"Saved couch",price:v.price||"$0",host:v.host||"Community host",location:v.location||"Location shared after booking",availableDates:v.availableDates||"Flexible availability",description:v.description??""}}}).filter(w=>{var v;return!!((v=w.snapshot)!=null&&v.id)}),[o]),h=f.useMemo(()=>!i&&d.length===0,[i,d]);if(!s)return l.jsxs("main",{className:"min-h-screen flex flex-col items-center justify-center gap-3",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Sign in to build your wishlist."}),l.jsx(Se,{onClick:()=>n("/auth"),children:"Go to sign in"})]});const p=()=>l.jsx("div",{className:"grid gap-6 sm:grid-cols-2",children:Array.from({length:4}).map((w,v)=>l.jsxs("div",{className:"animate-pulse rounded-[2rem] border border-white/70 bg-white/60 p-4 shadow-lg shadow-blue-100/30",children:[l.jsx("div",{className:"h-48 rounded-2xl bg-slate-200"}),l.jsx("div",{className:"mt-4 h-4 rounded bg-slate-200"}),l.jsx("div",{className:"mt-2 h-3 rounded bg-slate-200"})]},`wishlist-skeleton-${v}`))}),m=()=>l.jsxs("div",{className:"rounded-[2.5rem] border border-dashed border-white/70 bg-white/70 p-10 text-center shadow-xl shadow-blue-100/50",children:[l.jsx("div",{className:"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-blue-50 text-blue-500",children:l.jsx(sd,{className:"h-8 w-8"})}),l.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Start building your wishlist"}),l.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Tap the heart icon on any couch to keep it handy. Well sync them across all your devices."}),l.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-3",children:[l.jsx(Se,{className:"rounded-full px-6",onClick:()=>n("/listings"),children:"Browse calming couches"}),l.jsx(Se,{variant:"outline",className:"rounded-full px-6",onClick:()=>n("/profile"),children:"Update profile"})]})]});return l.jsx("main",{className:"dreamy-bg min-h-screen px-4 py-10",children:l.jsxs("div",{className:"mx-auto flex w-full max-w-5xl flex-col gap-8",children:[l.jsxs("section",{className:"rounded-[2.5rem] border border-white/60 bg-white/85 p-6 backdrop-blur-lg shadow-2xl shadow-blue-100/50",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-slate-500",children:"Collection"}),l.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Your wishlist"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Save cozy couches as you browse. You can come back anytime to compare and decide."})]}),l.jsx("div",{className:"mt-6",children:l.jsx(Se,{variant:"outline",className:"rounded-full border-white/70 bg-white/90",onClick:()=>n("/profile"),children:"Update profile"})})]}),i&&p(),h&&!i&&m(),!i&&d.length>0&&l.jsx("div",{className:"grid gap-6 sm:grid-cols-2",children:d.map(w=>l.jsxs(Kv,{className:"group relative overflow-hidden rounded-[2.5rem] border border-white/70 bg-white/95 shadow-2xl shadow-blue-100/40 transition hover:-translate-y-1.5",children:[l.jsxs("button",{type:"button",onClick:()=>u(w),className:"absolute right-4 top-4 z-10 rounded-full bg-white/90 p-2 text-rose-500 shadow",children:[l.jsx(sd,{className:"h-5 w-5 fill-rose-500"}),l.jsx("span",{className:"sr-only",children:"Remove from wishlist"})]}),l.jsxs("div",{className:"relative h-48 overflow-hidden",children:[l.jsx("img",{src:w.snapshot.image,alt:w.snapshot.title,className:"h-full w-full object-cover transition duration-500 group-hover:scale-105"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/0"}),l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex items-center justify-between px-5 pb-4 text-white",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-lg font-semibold",children:w.snapshot.price}),l.jsx("p",{className:"text-xs text-white/70",children:w.snapshot.host})]}),l.jsx("span",{className:"rounded-full bg-white/90 px-3 py-1 text-xs font-semibold text-slate-800",children:"Saved couch"})]})]}),l.jsxs("div",{className:"space-y-4 p-5",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:w.snapshot.title}),l.jsxs("p",{className:"mt-1 flex items-center gap-2 text-sm text-slate-500",children:[l.jsx(Zg,{className:"h-4 w-4"}),w.snapshot.location]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 text-xs font-medium text-slate-600",children:[l.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 px-3 py-1",children:[l.jsx(Qg,{className:"h-3 w-3"})," ",w.snapshot.availableDates]}),w.snapshot.description&&l.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 px-3 py-1",children:[w.snapshot.description.slice(0,32),w.snapshot.description.length>32?"":""]})]}),l.jsx(Se,{className:"flex-1 rounded-full",onClick:()=>n(`/couch/${w.snapshot.id}`,{state:{couch:w.snapshot}}),children:"View details"})]})]},w.id))})]})})},vW=sf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function YN({className:e,variant:t,...n}){return l.jsx("div",{className:ge(vW({variant:t}),e),...n})}const Md="couch-photos",KN="checkins",GN=(e,t)=>`${KN}/${e}/${t}`,qN=async(e,t)=>{const n=(()=>{const i=t.name.split("."),c=i.length>1?i.pop():null;return c?c.toLowerCase():"jpg"})(),r=`${Date.now()}-${Math.random().toString(36).slice(2)}.${n}`,s=GN(e,r),{error:o}=await ce.storage.from(Md).upload(s,t,{cacheControl:"3600",upsert:!1,contentType:t.type||"image/jpeg"});if(o)throw o;const{data:a}=ce.storage.from(Md).getPublicUrl(s);if(!(a!=null&&a.publicUrl))throw new Error("Unable to resolve uploaded photo URL.");return await ce.from("booking_requests").update({has_checkin_photo:!0}).eq("id",e),a.publicUrl},yW=async e=>{const t=`${KN}/${e}`,{data:n,error:r}=await ce.storage.from(Md).list(t,{limit:50,offset:0,sortBy:{column:"created_at",order:"desc"}});if(r){if(r.status===404)return[];throw r}return(n??[]).filter(s=>s.name).map(s=>ce.storage.from(Md).getPublicUrl(GN(e,s.name)).data.publicUrl).filter(s=>!!s)},wW=[{label:"All",value:"all"},{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Declined",value:"declined"},{label:"Cancelled",value:"cancelled"}],xW={pending:"bg-amber-100 text-amber-700",approved:"bg-emerald-100 text-emerald-700",declined:"bg-rose-100 text-rose-700",cancelled:"bg-slate-100 text-slate-500"},uu=4,bW=()=>{var be,le;const{profile:e,session:t}=Bn(),n=lr(),r=ki(),{toast:s}=Ar(),o=((be=t==null?void 0:t.user)==null?void 0:be.id)??(e==null?void 0:e.id)??null,a=((le=t==null?void 0:t.user)==null?void 0:le.id)??(e==null?void 0:e.id)??null,i=gl({queryKey:["host-requests-listings",o],queryFn:()=>o?L5(o):[],enabled:!!o,staleTime:1e3*30}),c=f.useMemo(()=>i.data??[],[i.data]),u=f.useMemo(()=>{const I=new Set,G=ne=>{if(!ne)return;const we=ne.trim();we&&I.add(we)};return G(e==null?void 0:e.full_name),e!=null&&e.full_name&&G(e.full_name.split(" ")[0]),G(e==null?void 0:e.email),e!=null&&e.email&&G(e.email.split("@")[0]),c.forEach(ne=>{G(ne.hostName),G(ne.hostEmail)}),Array.from(I)},[c,e==null?void 0:e.email,e==null?void 0:e.full_name]),d=f.useMemo(()=>{const I=new Set;return c.forEach(G=>{G.id&&I.add(G.id)}),Array.from(I)},[c]),h=u.join("|"),p=d.join("|"),m=f.useMemo(()=>u.map(I=>I.toLowerCase()),[u]),w=f.useMemo(()=>new Set(d.filter(Boolean)),[d]),v=f.useMemo(()=>{const I=new Set,G=ne=>{if(!ne)return;const we=ne.trim();we&&I.add(we)};return G(e==null?void 0:e.full_name),e!=null&&e.full_name&&G(e.full_name.split(" ")[0]),G(e==null?void 0:e.email),e!=null&&e.email&&G(e.email.split("@")[0]),Array.from(I)},[e==null?void 0:e.email,e==null?void 0:e.full_name]),y=v.join("|"),x=f.useMemo(()=>v.map(I=>I.toLowerCase()),[v]),g=gl({queryKey:["host-manage-requests",o,h,p],queryFn:()=>aB(o,u,d),enabled:!!(o||u.length||d.length)}),b=gl({queryKey:["host-manage-renter",a,y],queryFn:()=>Rf(a,v),enabled:!!(a||v.length)}),S=f.useCallback(I=>{const G=o&&I.hostId&&I.hostId===o,ne=(I.hostName??"").toLowerCase(),we=m.some(Dt=>ne.includes(Dt)),Ze=I.couchId?w.has(I.couchId):!1;return!!(G||we||Ze)},[o,m,w]),_=f.useCallback(I=>{const G=a&&I.renterId&&I.renterId===a,ne=(I.renterName??"").toLowerCase(),we=x.some(Ze=>ne.includes(Ze));return!!(G||we)},[a,x]);Km({queryKey:["host-manage-requests",o,h,p],matcher:S}),Km({queryKey:["host-manage-renter",a,y],matcher:_});const C=vl({mutationFn:({id:I,status:G})=>iB(I,G),onSuccess:(I,G)=>{r.invalidateQueries({queryKey:["host-manage-requests",o,h,p]}),s({title:"Request updated",description:`Marked request as ${G.status}.`})},onError:I=>{console.error("Failed to update booking request",I);const G=I instanceof Error&&/approved for this listing during the selected dates/i.test(I.message);s({title:G?"Booking dates overlap":"Update failed",description:G?"Another reservation has already been approved for these dates. Choose a different request or adjust the stay.":"We couldn't change that booking request. Please try again.",variant:"destructive"})}}),N=vl({mutationFn:I=>lB(I,a),onSuccess:I=>{r.setQueryData(["host-manage-renter",a,y],G=>Array.isArray(G)?G.map(ne=>ne.id===I.id?I:ne):G),r.setQueryData(["host-manage-requests",o,h,p],G=>Array.isArray(G)?G.map(ne=>ne.id===I.id?I:ne):G),s({title:"Request cancelled",description:"This booking request was cancelled."})},onError:I=>{console.error("Failed to cancel booking request",I),s({title:"Unable to cancel",description:"We couldn't cancel that request. Please refresh and try again.",variant:"destructive"})}}),T=vl({mutationFn:async({request:I,summary:G})=>{if(I.paymentStatus==="paid")throw new Error("This stay has already been paid for.");return I.paymentClientSecret&&I.paymentStatus!=="expired"?{clientSecret:I.paymentClientSecret,paymentDue:I.paymentDueAt??void 0}:zN({bookingId:I.id,amount:G.totalDue,renterEmail:(e==null?void 0:e.email)??null})},onSuccess:(I,G)=>{R({booking:G.request,clientSecret:I.clientSecret,amountLabel:G.summary.amountLabel,paymentDueAt:I.paymentDue??G.request.paymentDueAt??null}),M(!0),r.invalidateQueries({queryKey:["host-manage-renter",a,y]}),r.invalidateQueries({queryKey:["booking-requests",a,y]})},onError:I=>{const G=I instanceof Error?I.message:"We couldn't start checkout.";s({title:"Payment unavailable",description:G,variant:"destructive"})}}),[L,$]=f.useState("pending"),V=!!o&&(e==null?void 0:e.user_role)==="host",[F,O]=f.useState(V?"host":"renter"),[j,z]=f.useState({host:uu,renter:uu}),[A,M]=f.useState(!1),[E,R]=f.useState({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null}),[W,J]=f.useState({});f.useEffect(()=>{V||O("renter")},[V]);const Y=V?[{label:"Received",value:"host"},{label:"Sent",value:"renter"}]:[{label:"Your requests",value:"renter"}],ue=f.useMemo(()=>g.data??[],[g.data]),B=f.useMemo(()=>ue.filter(I=>{const G=o&&I.hostId===o,ne=I.couchId?w.has(I.couchId):!1;return!!(G||ne)}),[ue,w,o]),D=f.useMemo(()=>b.data??[],[b.data]);f.useEffect(()=>{z(I=>({...I,[F]:uu}))},[F,L,B.length,D.length]);const U=f.useMemo(()=>{const I=F==="host"?B:D;return L==="all"?I:I.filter(G=>G.status===L)},[B,D,L,F]),H=f.useCallback((I,G)=>{if(F!=="host"){if(G!=="cancelled"||I.status==="cancelled"||N.isPending)return;N.mutate(I.id);return}if(I.status==="declined"&&G==="approved"){s({title:"Can't approve a declined request",description:"Declined bookings stay closed. Ask the renter to submit a new request if plans change."});return}const ne=I.status==="approved"&&G==="declined"?"cancelled":G;I.status!==ne&&C.mutate({id:I.id,status:ne})},[N,s,C,F]),ie=f.useCallback(I=>{if(I.status!=="approved"){s({title:"Host approval pending",description:"Your host needs to approve the stay before you can pay."});return}if(I.paymentStatus==="paid"){s({title:"Already paid",description:"Thanks! We've already received payment for this stay."});return}if(I.paymentStatus==="expired"){s({title:"Payment window expired",description:"Ask your host to re-approve the booking to reopen payment.",variant:"destructive"});return}const G=Ad(I.pricePerNight??null,I.nights);if(!G){s({title:"Payment unavailable",description:"We couldn't calculate the total for this stay yet. Please check with your host.",variant:"destructive"});return}T.mutate({request:I,summary:G})},[T,s]),ye=f.useCallback(async(I,G)=>{if(G){J(ne=>({...ne,[I.id]:!0}));try{await qN(I.id,G),s({title:"Photo uploaded",description:"Check-in proof added."}),r.invalidateQueries({queryKey:["host-manage-requests",o,h,p]}),r.invalidateQueries({queryKey:["booking-requests",a,y]})}catch(ne){console.error("check-in upload failed",ne),s({title:"Upload failed",description:ne instanceof Error?ne.message:"Unable to upload check-in photo",variant:"destructive"})}finally{J(ne=>({...ne,[I.id]:!1}))}}},[p,o,h,r,a,y,s]),he=(I,G)=>{const ne=new Date(I);return Number.isNaN(ne.getTime())?"Unknown":Me(ne,G)};return o?l.jsxs("main",{className:"dreamy-bg min-h-screen px-4 py-10",children:[l.jsxs("div",{className:"mx-auto flex w-full max-w-5xl flex-col gap-6",children:[l.jsx("header",{className:"rounded-[2rem] border border-white/60 bg-white/85 p-6 shadow-lg shadow-blue-100/50",children:l.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-muted-foreground",children:"Manage"}),l.jsx("h1",{className:"text-3xl font-semibold text-sketch-dark",children:"Booking requests"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Review every booking in one place and respond when you're ready."})]})})}),l.jsxs("section",{className:"rounded-[2rem] border border-white/60 bg-white/80 p-6 shadow-xl shadow-blue-100/40 space-y-4",children:[l.jsx("div",{className:"flex flex-wrap gap-2",children:Y.map(I=>{const G=F===I.value;return l.jsx("button",{type:"button",onClick:()=>O(I.value),className:`rounded-full px-4 py-1.5 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-400 ${G?"bg-slate-900 text-white shadow-lg shadow-blue-200/60":"border border-slate-200/80 bg-white/80 text-slate-600"}`,children:I.label},I.value)})}),l.jsx("div",{className:"flex flex-wrap gap-2",children:wW.map(I=>{const G=L===I.value;return l.jsx("button",{type:"button",onClick:()=>$(I.value),className:`rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-wide transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-400 ${G?"bg-blue-600 text-white shadow":"border border-slate-200/70 bg-white/80 text-slate-500"}`,children:I.label},I.value)})})]}),!V&&l.jsx("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-5 text-sm text-slate-600 shadow",children:"Only approved hosts can manage booking requests from this page. If you need hosting enabled on your account, reach out to our team."}),V&&i.isSuccess&&c.length===0&&l.jsxs("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-5 text-sm text-slate-600 shadow space-y-3",children:[l.jsx("p",{children:"You haven't published a couch yet. Add one so renters can get in touch."}),l.jsx(Se,{variant:"outline",size:"sm",className:"rounded-full",onClick:()=>n("/listings",{state:{listingScope:"mine"}}),children:"Go to your listing"})]}),F==="host"&&g.isLoading&&l.jsx("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-5 text-sm text-slate-600 shadow",children:"Loading your booking requests"}),F==="renter"&&b.isLoading&&l.jsx("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-5 text-sm text-slate-600 shadow",children:"Loading your sent requests"}),F==="host"&&g.isError&&l.jsx("div",{className:"rounded-[1.75rem] border border-rose-200 bg-white/90 p-5 text-sm text-rose-600 shadow",children:"We couldn't load booking requests. Please refresh and try again."}),F==="renter"&&b.isError&&l.jsx("div",{className:"rounded-[1.75rem] border border-rose-200 bg-white/90 p-5 text-sm text-rose-600 shadow",children:"We couldn't load your reservations. Please refresh and try again."}),!g.isLoading&&!g.isError&&!b.isLoading&&!b.isError&&U.length===0&&l.jsx("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-5 text-sm text-slate-600 shadow",children:F==="host"?L==="pending"?"You're all caught up! New booking requests will appear here.":"No requests match this filter.":L==="pending"?"You haven't sent any booking requests yet.":"No sent requests match this filter."}),!g.isLoading&&!g.isError&&!b.isLoading&&!b.isError&&U.length>0&&l.jsxs("div",{className:"space-y-4",children:[U.slice(0,j[F]).map(I=>l.jsxs("div",{className:"rounded-[1.75rem] border border-white/60 bg-white/85 p-6 shadow-lg shadow-blue-100/40 space-y-4",children:[l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-muted-foreground",children:F==="host"?"Host booking":"Sent booking"}),l.jsx("h3",{className:"text-lg font-semibold text-sketch-dark",children:I.couchTitle??"Couch request"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:F==="host"?`Requested by ${I.renterName??"Unknown renter"}`:`Hosted by ${I.hostName??"Unknown host"}`})]}),l.jsx(YN,{className:`rounded-full px-3 py-1 text-xs uppercase tracking-wide ${xW[I.status]}`,children:I.status})]}),l.jsxs("div",{className:"grid gap-2 text-sm text-muted-foreground sm:grid-cols-2",children:[l.jsxs("span",{children:["Price per night: ",I.pricePerNight??""]}),l.jsxs("span",{children:["Submitted: ",he(I.createdAt,"MMM d, yyyy HH:mm")]}),l.jsxs("span",{children:["Stay: ",he(I.stayStart,"MMM d, yyyy"),"  ",he(I.stayEnd,"MMM d, yyyy"),I.nights?`  ${I.nights} night${I.nights===1?"":"s"}`:""]}),l.jsx("span",{children:F==="host"?`Host: ${I.hostName??"You"}`:`Host: ${I.hostName??"Unknown"}`}),F==="renter"&&l.jsxs("span",{children:["Renter: ",I.renterName??"You"]})]}),F==="host"&&I.status==="approved"&&l.jsxs("div",{className:"rounded-xl border border-dashed border-slate-200/70 bg-slate-50/60 p-4 space-y-2",children:[l.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Check-in photo"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Upload a photo when the renter arrives. Payment information stays private and is never shown to the public."}),l.jsx(We,{type:"file",accept:"image/*",disabled:W[I.id],onChange:G=>{var we;const ne=((we=G.target.files)==null?void 0:we[0])??null;ne&&ye(I,ne),G.target.value=""}}),W[I.id]&&l.jsx("p",{className:"text-xs text-slate-500",children:"Uploading photo"})]}),F==="renter"&&(()=>{var mn;const G=Ad(I.pricePerNight??null,I.nights),ne=I.paymentStatus,we=I.paymentDueAt?he(I.paymentDueAt,"MMM d, yyyy HH:mm"):null,Ze=T.isPending&&((mn=T.variables)==null?void 0:mn.request.id)===I.id,Dt=ne==="paid",pn=I.status==="approved"&&!Dt;if(!pn&&!Dt)return null;const Lr=ne==="paid"?"Payment received. You're all set!":ne==="failed"?"Your last payment attempt failed. Try again when you're ready.":ne==="pending"?we?`Finish payment by ${we} to keep this reservation.`:"Finish payment to confirm your stay.":ne==="expired"?"Payment window expired. Ask your host to reopen it.":"Complete payment to confirm your approved stay.";return l.jsxs("div",{className:"rounded-xl border border-emerald-200/70 bg-emerald-50/40 p-4 space-y-3",children:[l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-emerald-900",children:Dt?"Payment complete":"Payment required"}),l.jsx("p",{className:"text-xs text-emerald-800",children:Lr}),ne==="paid"&&l.jsxs("p",{className:"text-xs font-medium text-emerald-900",children:["Reserved for ",he(I.stayStart,"MMM d, yyyy"),"  Arrival ",he(I.stayStart,"HH:mm")]})]}),G&&l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-base font-semibold text-emerald-900",children:G.amountLabel}),l.jsxs("p",{className:"text-xs text-emerald-800",children:[G.nights," night",G.nights===1?"":"s"," at ",I.pricePerNight??""]})]})]}),pn&&G&&l.jsx("div",{className:"flex flex-wrap gap-2",children:l.jsx(Se,{size:"sm",className:"rounded-full",disabled:Ze,onClick:()=>ie(I),children:Ze?"Preparing checkout":"Pay now"})}),!G&&l.jsx("p",{className:"text-xs text-emerald-800",children:"The host hasn't set a nightly rate yet, so we can't calculate the total."}),ne==="expired"&&l.jsx("p",{className:"text-xs text-rose-700",children:"Payment window expired. Ask the host to re-approve the request to try again."}),ne==="failed"&&l.jsx("p",{className:"text-xs text-rose-700",children:"Payment failed. Double-check your card or try another method."})]})})(),F==="host"?l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx(Se,{size:"sm",className:"rounded-full",disabled:I.status==="approved"||I.status==="declined"||I.status==="cancelled"||C.isPending,onClick:()=>H(I,"approved"),children:"Approve"}),l.jsx(Se,{size:"sm",variant:"outline",className:"rounded-full",disabled:I.status==="declined"||I.status==="cancelled"||C.isPending,onClick:()=>H(I,"declined"),children:"Decline"})]}):l.jsx("div",{className:"flex flex-wrap gap-2",children:l.jsx(Se,{size:"sm",variant:"outline",className:"rounded-full",disabled:I.status!=="pending"||N.isPending,onClick:()=>H(I,"cancelled"),children:"Cancel request"})})]},I.id)),j[F]<U.length&&l.jsx("div",{className:"pt-2 text-center",children:l.jsx(Se,{variant:"outline",size:"sm",onClick:()=>z(I=>({...I,[F]:Math.min(I[F]+uu,U.length)})),children:"Show more"})})]})]}),l.jsx(WN,{open:A,onOpenChange:I=>{M(I),I||R({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null})},booking:E.booking,clientSecret:E.clientSecret,amountLabel:E.amountLabel,paymentDueAt:E.paymentDueAt,onPaymentSuccess:async()=>{var G;const I=(G=E.booking)==null?void 0:G.id;if(I){const ne=we=>Array.isArray(we)?we.map(Ze=>Ze.id===I?{...Ze,paymentStatus:"paid",status:"approved"}:Ze):we;r.setQueryData(["host-manage-renter",a,y],ne),r.setQueryData(["host-manage-requests",o,h,p],ne),r.setQueryData(["booking-requests",a,y],ne)}s({title:"Payment successful",description:"Your stay is confirmedcheck your email for the receipt."}),M(!1),R({booking:null,clientSecret:null,amountLabel:"",paymentDueAt:null})}})]}):l.jsxs("main",{className:"min-h-screen flex flex-col items-center justify-center gap-4",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Sign in to manage booking requests."}),l.jsx(Se,{onClick:()=>n("/auth"),children:"Go to sign in"})]})},SW=async e=>{const{data:t,error:n}=await ce.functions.invoke("transform-note",{body:{content:e}});if(n)throw n;return t},_W=()=>{const{user:e,loading:t}=Xv(),[n,r]=f.useState([]),[s,o]=f.useState(""),[a,i]=f.useState(null),[c,u]=f.useState(null),[d,h]=f.useState(null),[p,m]=f.useState(!1),[w,v]=f.useState(!1),y=f.useCallback(async()=>{if(!e){r([]);return}m(!0),i(null);const{data:b,error:S}=await ce.from("notes").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(20);S?(i(S.message),r([])):r(b??[]),m(!1)},[e]);f.useEffect(()=>{t||y()},[t,y]);const x=async b=>{if(b.preventDefault(),!e){u("You must be signed in to add a note.");return}const S=s.trim();if(!S){u("Please enter some text before adding a note.");return}v(!0),u(null),h(null);try{const _=await SW(S);h(_.message??"Note added successfully."),o(""),_.note?r(C=>[_.note,...C].slice(0,20)):await y()}catch(_){const C=_ instanceof Error?_.message:"Failed to add note";u(C)}v(!1)},g=f.useMemo(()=>n.map(b=>({...b,formattedDate:new Date(b.created_at).toLocaleString()})),[n]);return t?l.jsx("main",{className:"dreamy-bg min-h-screen flex items-center justify-center",children:l.jsx("p",{className:"text-muted-foreground",children:"Checking session"})}):e?l.jsx("main",{className:"dreamy-bg min-h-screen px-4 py-8",children:l.jsxs("div",{className:"mx-auto w-full max-w-2xl space-y-8",children:[l.jsxs("header",{className:"space-y-2",children:[l.jsx("h1",{className:"text-3xl font-bold text-sketch-dark",children:"Notes demo"}),l.jsx("p",{className:"text-muted-foreground text-sm",children:"Add personal notes stored in Supabase. Only you can see your entries."})]}),l.jsxs("form",{onSubmit:x,className:"space-y-3",children:[l.jsxs("div",{className:"flex gap-3",children:[l.jsx(We,{value:s,onChange:b=>o(b.target.value),placeholder:"Write a note",className:"flex-1"}),l.jsx(Se,{type:"submit",disabled:w,children:w?"Adding":"Add note"})]}),c&&l.jsx("p",{className:"text-sm text-destructive",children:c}),d&&l.jsx("p",{className:"text-sm text-emerald-600",children:d})]}),l.jsxs("section",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Latest notes"}),l.jsx(Se,{variant:"outline",size:"sm",onClick:y,disabled:p,children:p?"Refreshing":"Refresh"})]}),a&&l.jsx("p",{className:"text-sm text-destructive",children:a}),!a&&g.length===0&&l.jsx("p",{className:"text-sm text-muted-foreground",children:"No notes yet. Add your first one above!"}),l.jsx("ul",{className:"space-y-3",children:g.map(b=>l.jsxs("li",{className:"sketch-card p-4",children:[l.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:b.formattedDate}),l.jsx("p",{className:"text-base text-sketch-dark whitespace-pre-line break-words",children:b.content})]},b.id))})]})]})}):l.jsx("main",{className:"dreamy-bg min-h-screen flex items-center justify-center",children:l.jsxs("div",{className:"text-center space-y-3",children:[l.jsx("h1",{className:"text-2xl font-semibold",children:"Sign in required"}),l.jsx("p",{className:"text-muted-foreground text-sm",children:"Visit the sign-in page to receive a magic link, then return to test notes."})]})})},tp=e=>{if(!e)return"Member";if(e.name)return e.name;if(e.email){const[t]=e.email.split("@");return t||"Member"}return"Member"},EW=()=>{var O;const{user:e,loading:t}=Xv(),[n,r]=f.useState([]),[s,o]=f.useState({}),[a,i]=f.useState(!1),[c,u]=f.useState(null),[d,h]=f.useState(null),[p,m]=f.useState([]),[w,v]=f.useState(!1),[y,x]=f.useState(null),[g,b]=f.useState(""),[S,_]=f.useState(!1),[C,N]=f.useState(""),T=(e==null?void 0:e.id)??null,L=(d==null?void 0:d.otherUserId)??null;f.useEffect(()=>{if(!T){r([]),o({});return}let j=!0;return(async()=>{try{i(!0);const A=await cB(T);if(!j)return;r(A);const M=A.map(E=>E.otherUserId);if(M.length){const E=await ck(M);if(!j)return;o(E.reduce((R,W)=>(R[W.id]={id:W.id,name:W.full_name??"",role:W.user_role??null,email:W.email??null},R),{}))}h(E=>E??A[0]??null),u(null)}catch(A){const M=A instanceof Error?A.message:"Unable to load conversations.";u(M)}finally{j&&i(!1)}})(),()=>{j=!1}},[T]),f.useEffect(()=>{if(!T||!L){m([]);return}let j=!0;(async()=>{try{v(!0);const M=await Nk(T,L);if(!j)return;m(M),x(null)}catch(M){const E=M instanceof Error?M.message:"Unable to load messages.";j&&(x(E),m([]))}finally{j&&v(!1)}})();const A=ce.channel(`dm-center-${T}-${L}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"direct_messages"},M=>{const E=M.new;(E.sender_id===T&&E.receiver_id===L||E.sender_id===L&&E.receiver_id===T)&&m(R=>R.some(W=>W.id===E.id)?R:[...R,E])}).subscribe();return()=>{j=!1,ce.removeChannel(A)}},[L,T]);const $=f.useMemo(()=>{const j=C.trim().toLowerCase();return j?n.filter(z=>{var R;const A=s[z.otherUserId];if(!A)return!1;const M=tp(A).toLowerCase(),E=((R=A.role)==null?void 0:R.toLowerCase())??"";return M.includes(j)||E.includes(j)}):n},[n,s,C]),V=j=>{h(j),x(null),b("")},F=async j=>{if(j.preventDefault(),!e||!d)return;const z=g.trim();if(!z){x("Please enter a message.");return}_(!0),x(null);try{const A=await jk(e.id,d.otherUserId,z);A&&m(M=>[...M,A]),b("")}catch(A){const M=A instanceof Error?A.message:"Failed to send message.";x(M)}finally{_(!1)}};return t?l.jsx("main",{className:"min-h-screen flex items-center justify-center bg-background",children:l.jsx("p",{className:"text-muted-foreground",children:"Loading session"})}):e?l.jsx("main",{className:"dreamy-bg min-h-screen px-4 py-10",children:l.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-8",children:[l.jsxs("section",{className:"rounded-[2.5rem] border border-white/60 bg-white/85 p-6 backdrop-blur-lg shadow-2xl shadow-blue-100/50",children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-slate-500",children:"Conversations"}),l.jsx("h1",{className:"mt-2 text-3xl font-semibold text-slate-900",children:"Message center"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Keep calm chats organized. Search your hosts, continue planning, and never lose a thread."})]}),l.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row",children:[l.jsxs("aside",{className:"w-full rounded-[2rem] border border-white/70 bg-white/95 p-5 shadow-xl shadow-blue-100/40 lg:max-w-xs",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx(We,{value:C,onChange:j=>N(j.target.value),placeholder:"Search by name",className:"rounded-full bg-slate-50 text-sm"}),c&&l.jsx("p",{className:"text-sm text-destructive",children:c})]}),l.jsxs("ul",{className:"mt-4 space-y-2 overflow-y-auto pr-1",style:{maxHeight:"70vh"},children:[a&&l.jsx("li",{className:"text-sm text-muted-foreground",children:"Loading conversations"}),!a&&$.length===0&&l.jsx("li",{className:"text-sm text-muted-foreground",children:"No conversations yet."}),$.map(j=>{const z=s[j.otherUserId],A=j.lastMessage,M=A.content.length>60?`${A.content.slice(0,57)}`:A.content,E=Me(new Date(A.created_at),"MMM d, h:mm a"),R=(d==null?void 0:d.otherUserId)===j.otherUserId;return l.jsx("li",{children:l.jsxs("button",{type:"button",onClick:()=>V(j),className:`w-full rounded-2xl border px-4 py-3 text-left transition hover:border-blue-200 hover:bg-blue-50 ${R?"border-blue-400 bg-blue-50":"border-white/80 bg-white"}`,children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-900",children:tp(z)}),(z==null?void 0:z.role)&&l.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:z.role})]}),l.jsx("span",{className:"text-[11px] text-slate-400",children:E})]}),l.jsx("p",{className:"mt-1 text-xs text-slate-500",children:M})]})},j.otherUserId)})]})]}),l.jsx("section",{className:"flex-1",children:d?l.jsxs("div",{className:"flex h-full flex-col rounded-[2rem] border border-white/70 bg-white/95 p-6 shadow-2xl shadow-blue-100/40",children:[l.jsxs("header",{className:"mb-4 flex flex-wrap items-center justify-between gap-3 border-b pb-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400",children:"Chatting with"}),l.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:tp(s[d.otherUserId])}),l.jsx("p",{className:"text-sm text-slate-500",children:((O=s[d.otherUserId])==null?void 0:O.role)??"Community member"})]}),l.jsx("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-500",children:"Direct messages"})]}),l.jsxs("div",{className:"flex-1 space-y-3 overflow-y-auto pr-2",children:[w&&l.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading messages"}),!w&&p.length===0&&l.jsx("p",{className:"text-sm text-muted-foreground",children:"No messages yet. Start the conversation!"}),p.map(j=>l.jsxs("div",{className:`max-w-[75%] rounded-2xl px-4 py-2 text-sm shadow-sm ${j.sender_id===e.id?"ml-auto bg-blue-600 text-white":"mr-auto bg-slate-100 text-slate-800"}`,children:[l.jsx("p",{className:"whitespace-pre-line break-words",children:j.content}),l.jsx("p",{className:"mt-1 text-[11px] opacity-70",children:Me(new Date(j.created_at),"MMM d, yyyy  h:mm a")})]},j.id))]}),l.jsxs("form",{onSubmit:F,className:"mt-4 space-y-2",children:[l.jsx(ji,{value:g,onChange:j=>{b(j.target.value),y&&x(null)},placeholder:"Write your message",rows:3,className:"rounded-2xl"}),y&&l.jsx("p",{className:"text-sm text-destructive",children:y}),l.jsx(Se,{type:"submit",disabled:S||!g.trim(),className:"rounded-full px-6",children:S?"Sending":"Send message"})]})]}):l.jsx("div",{className:"flex h-full items-center justify-center rounded-[2rem] border border-dashed border-white/70 bg-white/80 p-10 text-center shadow-2xl shadow-blue-100/30",children:l.jsx("p",{className:"text-sm text-slate-500",children:"Select a conversation on the left to view messages."})})})]})]})}):l.jsx("main",{className:"min-h-screen flex items-center justify-center bg-background",children:l.jsxs("div",{className:"text-center space-y-3",children:[l.jsx("h1",{className:"text-2xl font-semibold",children:"Sign in required"}),l.jsx("p",{className:"text-muted-foreground text-sm",children:"Visit the sign-in page to view your conversations."})]})})},CW={pending:"bg-amber-100 text-amber-700",approved:"bg-emerald-100 text-emerald-700",declined:"bg-rose-100 text-rose-700",cancelled:"bg-muted text-muted-foreground"},kW=e=>{const[t,n]=f.useState([]),[r,s]=f.useState(!1),o=f.useCallback(async()=>{if(e){s(!0);try{const a=await yW(e);n(a)}catch(a){console.warn("Failed to load check-in photos",a)}finally{s(!1)}}},[e]);return f.useEffect(()=>{o()},[o]),{photos:t,loading:r,refresh:o}},_x=({photos:e,loading:t,emptyLabel:n})=>l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-sm font-medium text-sketch-dark",children:"Check-in photos"}),t?l.jsx("p",{className:"text-xs text-muted-foreground",children:"Loading check-in photos"}):e.length===0?l.jsx("p",{className:"text-xs text-muted-foreground",children:n}):l.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.map(r=>l.jsx("a",{href:r,target:"_blank",rel:"noreferrer",className:"block overflow-hidden rounded-md border",children:l.jsx("img",{src:r,alt:"Check-in",className:"h-32 w-full object-cover"})},r))})]}),NW=({request:e})=>{const{toast:t}=Ar(),{photos:n,loading:r,refresh:s}=kW(e.id),[o,a]=f.useState(!1),[i,c]=f.useState(!1),u=new Date(e.stayStart),d=new Date(e.stayEnd),h=e.status==="approved",p=f.useMemo(()=>{var y;const w=(y=e.hostName)==null?void 0:y.trim();if(!w)return"Community host";if(/\S+@\S+\.\S+/.test(w)){const x=w.split("@")[0].split(".")[0];return x.charAt(0).toUpperCase()+x.slice(1)}return w.split(" ")[0]},[e.hostName]),m=async w=>{var y;const v=(y=w.target.files)==null?void 0:y[0];if(v)try{a(!0),await qN(e.id,v),t({title:"Photo uploaded",description:"Thanks for checking in!"}),s()}catch(x){const g=x instanceof Error?x.message:"We couldn't upload that photo.";t({title:"Upload failed",description:g,variant:"destructive"})}finally{a(!1),w.target.value=""}};return l.jsxs("div",{className:"rounded-2xl border border-white/60 bg-gradient-to-br from-white/80 via-blue-50/80 to-white/70 p-4 shadow-sm shadow-blue-100/70 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-sketch-dark",children:e.couchTitle??"Couch request"}),l.jsx(YN,{className:CW[e.status],children:e.status.toUpperCase()})]}),l.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[l.jsxs("p",{children:["Host: ",p]}),l.jsxs("p",{children:["Stay: ",Me(u,"MMM d, yyyy"),"  ",Me(d,"MMM d, yyyy")]}),l.jsxs("p",{className:"text-xs",children:["Requested ",Me(new Date(e.createdAt),"MMM d, yyyy h:mm a")]})]}),l.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[l.jsx("p",{children:h?"Check-in photos available":"Waiting for host approval"}),l.jsxs("button",{type:"button",className:"flex items-center gap-1 rounded-full px-3 py-1 text-sm font-medium text-slate-600",onClick:()=>c(w=>!w),children:["Details",l.jsx(of,{className:`h-4 w-4 transition-transform ${i?"rotate-180":""}`})]})]}),i&&h&&l.jsxs("div",{className:"space-y-2 rounded-md border border-dashed border-muted-foreground/40 p-3",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-sm font-medium text-sketch-dark",children:"Upload a check-in photo"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Snap a quick photo once you're at the couch. Hosts will see it instantly."}),l.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:m,disabled:o}),o&&l.jsx("p",{className:"text-xs text-muted-foreground",children:"Uploading"})]}),l.jsx(_x,{photos:n,loading:r,emptyLabel:"No check-in photos uploaded yet."})]}),i&&!h&&l.jsx(_x,{photos:n,loading:r,emptyLabel:"Check-in photos become available once the host approves your stay."})]})},np=4,Ex=()=>{var x;const{profile:e,session:t}=Bn(),n=lr(),[r,s]=f.useState([]),[o,a]=f.useState(!1),[i,c]=f.useState(null),[u,d]=f.useState(np),h=((x=t==null?void 0:t.user)==null?void 0:x.id)??(e==null?void 0:e.id)??null,p=(e==null?void 0:e.user_role)==="host",m=f.useMemo(()=>[(e==null?void 0:e.full_name)??"",(e==null?void 0:e.email)??""],[e==null?void 0:e.full_name,e==null?void 0:e.email]),w=f.useCallback(async()=>{if(!h){s([]);return}a(!0);try{const g=await Rf(h,m);s(g),d(np),c(null)}catch(g){const b=g instanceof Error?g.message:"Unable to load requests.";c(b)}finally{a(!1)}},[m,h]);if(f.useEffect(()=>{w()},[w]),f.useEffect(()=>{p&&n("/host-requests",{replace:!0})},[p,n]),p)return null;const v=f.useMemo(()=>{if(!h)return l.jsx("p",{className:"text-sm text-muted-foreground",children:"Sign in as a renter to view your requests."});if(o)return l.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading your requests"});if(i)return l.jsx("p",{className:"text-sm text-destructive",children:i});if(!r.length)return l.jsx("p",{className:"text-sm text-muted-foreground",children:"You have not submitted any booking requests yet."});const g=r.slice(0,u),b=u<r.length;return l.jsxs("div",{className:"space-y-3",children:[g.map(S=>l.jsx(NW,{request:S},S.id)),b&&l.jsx("div",{className:"pt-2 text-center",children:l.jsx(Se,{variant:"outline",size:"sm",onClick:()=>d(S=>Math.min(S+np,r.length)),children:"Show more"})})]})},[i,o,h,r,u]);return l.jsx("main",{className:"dreamy-bg min-h-screen px-4 py-8",children:l.jsxs("div",{className:"mx-auto w-full max-w-4xl space-y-6",children:[l.jsx("header",{className:"space-y-4 rounded-2xl border bg-card/70 p-6 shadow-sm",children:l.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:l.jsxs("div",{children:[l.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-muted-foreground",children:"Welcome back"}),l.jsx("h1",{className:"text-2xl font-bold text-sketch-dark",children:"Reservations"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Track every request and know when hosts approve your stay."})]})})}),l.jsxs("section",{className:"rounded-xl border bg-card/60 p-4 shadow-sm",children:[l.jsx("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-2",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-sketch-dark",children:"Your bookings"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Track every request and share check-in photos with hosts."})]})}),v]})]})})},Ji="booking_requests",jW="messages_",QN="legacy-sync-v1",Cx="listing_",JN="legacy-listings-v1",PW=async()=>{const e=["booking_requests","messages","user_listings"],t=[];return await Promise.all(e.map(async n=>{const{error:r}=await ce.from(n).select("id").limit(1);r&&t.push({table:n,error:r.message??"Unknown error"})})),{ok:t.length===0,issues:t}},TW=e=>localStorage.getItem(`${QN}-${e}`)==="complete",RW=e=>{localStorage.setItem(`${QN}-${e}`,"complete")},IW=e=>localStorage.getItem(`${JN}-${e}`)==="complete",kx=e=>{localStorage.setItem(`${JN}-${e}`,"complete")},Ou=e=>{if(!e)return new Date().toISOString();const t=new Date(e);return Number.isNaN(t.getTime())?new Date().toISOString():t.toISOString()},OW=e=>new Set(e.map(t=>`${t.couchId??""}|${t.stayStart}|${t.stayEnd}|${t.status}`)),AW=e=>new Set(e.map(t=>`${t.hostId??""}|${t.sentAt}|${t.text}`)),MW=async e=>{const t=localStorage.getItem(Ji);if(!t)return 0;let n=[];try{const i=JSON.parse(t);n=Array.isArray(i)?i:[]}catch(i){return console.error("Failed to parse legacy booking requests",i),localStorage.removeItem(Ji),0}if(!Array.isArray(n)||n.length===0)return localStorage.removeItem(Ji),0;let r=[];try{r=await Rf(e.id,[e.full_name??void 0,e.email??void 0])}catch(i){console.warn("Unable to load existing booking requests from Supabase",i),r=[]}const s=OW(r);let o=0;const a=[];for(const i of n){if(i!=null&&i.renterId&&i.renterId!==e.id)continue;const c=Ou((i==null?void 0:i.stayStart)??(i==null?void 0:i.start)??(i==null?void 0:i.checkIn)),u=Ou((i==null?void 0:i.stayEnd)??(i==null?void 0:i.end)??(i==null?void 0:i.checkOut)??(i==null?void 0:i.checkout)),d=`${(i==null?void 0:i.couchId)??""}|${c}|${u}|${(i==null?void 0:i.status)??"pending"}`;if(s.has(d))continue;const h=(i==null?void 0:i.nights)??Math.max(1,Mn(new Date(u),new Date(c)));try{await kk({couchId:(i==null?void 0:i.couchId)??"legacy-couch",couchTitle:(i==null?void 0:i.couchTitle)??(i==null?void 0:i.title)??"Couch booking",hostId:(i==null?void 0:i.hostId)??null,hostName:(i==null?void 0:i.hostEmail)??(i==null?void 0:i.hostName)??"Community Host",hostEmail:(i==null?void 0:i.hostEmail)??null,renterId:e.id,renterName:(i==null?void 0:i.renterName)??e.full_name??e.email??"Renter",stayStart:c,stayEnd:u,nights:h,pricePerNight:(i==null?void 0:i.pricePerNight)??(i==null?void 0:i.price)??"$0",status:(i==null?void 0:i.status)??"pending",createdAt:Ou((i==null?void 0:i.createdAt)??(i==null?void 0:i.created_at)??(i==null?void 0:i.submittedAt))}),s.add(d),o+=1}catch(p){console.error("Failed to migrate legacy booking request",p),a.push(i)}}return a.length?localStorage.setItem(Ji,JSON.stringify(a)):localStorage.removeItem(Ji),o},DW=async e=>{const t=[];for(let o=0;o<localStorage.length;o++){const a=localStorage.key(o);a&&a.startsWith(jW)&&t.push(a)}if(!t.length)return 0;const n=await VN(e.id,[e.full_name??void 0,e.email??void 0]),r=AW(n);let s=0;for(const o of t){const a=localStorage.getItem(o);if(!a)continue;let i=[];try{const u=JSON.parse(a);i=Array.isArray(u)?u:[]}catch(u){console.error("Failed to parse legacy messages",u),localStorage.removeItem(o);continue}if(!Array.isArray(i)||i.length===0){localStorage.removeItem(o);continue}const c=[];for(const u of i){if(u!=null&&u.renterId&&u.renterId!==e.id){c.push(u);continue}const d=Ou((u==null?void 0:u.sentAt)??(u==null?void 0:u.sent_at)??(u==null?void 0:u.created_at)),h=`${(u==null?void 0:u.hostId)??""}|${d}|${(u==null?void 0:u.text)??(u==null?void 0:u.body)??""}`;if(!r.has(h))try{await HN({couchId:(u==null?void 0:u.couchId)??"legacy-couch",hostId:(u==null?void 0:u.hostId)??null,hostName:(u==null?void 0:u.hostEmail)??(u==null?void 0:u.hostName)??"Community Host",hostEmail:(u==null?void 0:u.hostEmail)??null,renterId:e.id,renterName:(u==null?void 0:u.renterName)??e.full_name??e.email??"Renter",body:(u==null?void 0:u.text)??(u==null?void 0:u.body)??"",sentAt:d,senderRole:(u==null?void 0:u.senderRole)??"renter",senderId:(u==null?void 0:u.senderId)??e.id,senderName:(u==null?void 0:u.senderName)??((u==null?void 0:u.senderRole)==="host"?(u==null?void 0:u.hostName)??"Host":(u==null?void 0:u.renterName)??e.full_name??e.email??"Renter")}),r.add(h),s+=1}catch(p){console.error("Failed to migrate legacy message",p)}}c.length?localStorage.setItem(o,JSON.stringify(c)):localStorage.removeItem(o)}return s},LW=async e=>{if(typeof window>"u")return{bookings:0,messages:0};if(TW(e.id))return{bookings:0,messages:0};let t=0,n=0,r=!0;try{t=await MW(e)}catch(s){r=!1,console.error("Legacy booking migration failed",s)}try{n=await DW(e)}catch(s){r=!1,console.error("Legacy message migration failed",s)}return r&&RW(e.id),{bookings:t,messages:n}},$W=e=>{if(!e)return"$0";const t=e.toString().trim();return t?t.startsWith("$")?t:`$${t}`:"$0"},FW=(e,t)=>{var c,u,d;const n=t.propertyType==="house"?"House":"Flat",r=e.full_name?`${e.full_name.split(" ")[0]||"Host"}'s ${n} couch`:`${n} couch`,s=t.title??(t.address?`${n} couch at ${t.address}`:null),o=t.uploadedAt?`Listing added on ${new Date(t.uploadedAt).toLocaleDateString()}`:null,a=t.checkInTime??((c=t.availability)==null?void 0:c.checkInTime)??null,i=a?`${e.full_name??"Your host"} welcomes you. Check-in after ${a}.`:`${e.full_name??"Your host"} welcomes you.`;return{id:t.listingId&&typeof t.listingId=="string"?t.listingId:void 0,hostId:e.id,hostName:e.full_name,hostEmail:e.email,title:s??r,imageUrl:t.imageUrl??null,pricePerNight:$W(t.pricePerNight??t.price),location:t.address??t.location??"Address shared after booking",description:t.description??o??i,availability:{start:((u=t.availability)==null?void 0:u.start)??null,end:((d=t.availability)==null?void 0:d.end)??null,checkInTime:a,country:t.country??null,city:t.city??null,addressLine:t.address??t.location??null}}},UW=async e=>{if(typeof window>"u")return{listings:0};if(!e.id)return{listings:0};if(IW(e.id))return{listings:0};const t=[];for(let s=0;s<localStorage.length;s++){const o=localStorage.key(s);o&&o.startsWith(Cx)&&t.push(o)}if(!t.length)return kx(e.id),{listings:0};let n=0,r=!0;for(const s of t)try{const o=localStorage.getItem(s);if(!o)continue;const a=JSON.parse(o);if(!a||typeof a!="object")continue;const i=a,c=(i==null?void 0:i.userId)??s.replace(Cx,"");if(c&&c!==e.id)continue;const u=FW(e,i??{});await Mm(u)&&(n+=1,localStorage.removeItem(s))}catch(o){r=!1,console.error("Failed to migrate legacy listing",{key:s,error:o})}return r&&kx(e.id),typeof window<"u"&&n>0&&window.dispatchEvent(new Event("listings-updated")),{listings:n}},BW=()=>{const{profile:e}=Bn(),{toast:t}=Ar(),n=f.useRef(null);return f.useEffect(()=>{if(typeof window>"u")return;if(!(e!=null&&e.id)){n.current=null;return}if(n.current===e.id)return;n.current=e.id;let r=!0;return(async()=>{try{const o=await PW();if(!o.ok){if(!r)return;t({title:"Supabase setup required",description:o.issues.map(c=>`${c.table}: ${c.error}`).join(`
`),variant:"destructive"}),console.warn("Supabase table verification issues",o.issues);return}const a=await LW({id:e.id,full_name:e.full_name,email:e.email});if(!r)return;if(a.bookings||a.messages){const c=[];a.bookings&&c.push(`${a.bookings} booking request${a.bookings===1?"":"s"}`),a.messages&&c.push(`${a.messages} message${a.messages===1?"":"s"}`),t({title:"Legacy requests synced",description:`Moved ${c.join(" and ")} into Supabase.`})}const i=await UW({id:e.id,full_name:e.full_name,email:e.email});if(!r)return;i.listings&&t({title:"Legacy listing published",description:`Moved ${i.listings} offline listing${i.listings===1?"":"s"} into Supabase.`})}catch(o){if(!r)return;console.error("Legacy data sync failed",o),t({title:"Legacy sync failed",description:"We couldn't move your past data into Supabase. Please retry later.",variant:"destructive"})}})(),()=>{r=!1}},[e==null?void 0:e.id,e==null?void 0:e.full_name,e==null?void 0:e.email,e==null?void 0:e.user_role,t]),null},rp=async(e,t=15e3,n="Request timed out")=>{let r;const s=new Promise((o,a)=>{r=setTimeout(()=>a(new Error(n)),t)});try{return await Promise.race([e,s])}finally{clearTimeout(r)}},WW=({children:e})=>{const[t,n]=f.useState(null),[r,s]=f.useState(null),[o,a]=f.useState(!0),[i,c]=f.useState(null),u=async m=>{var w,v;if(!(m!=null&&m.user)){s(null),c(null),a(!1);return}try{a(!0),c(null);const y=await rp(eN(m.user.id),12e3,"Timed out loading profile");if(y)s(y);else{const x=await Zv({id:m.user.id,email:m.user.email??"",full_name:((w=m.user.user_metadata)==null?void 0:w.full_name)??null,user_role:((v=m.user.user_metadata)==null?void 0:v.user_role)??"renter",avatar_url:null,bio:null,student_id_url:null,university:null,program_name:null,program_year:null,program_type:null});s(x)}}catch(y){console.error("Failed to load profile",y),s(null),c(y instanceof Error?y.message:"Unable to load profile.")}finally{a(!1)}};f.useEffect(()=>{let m=null,w=!0;return(async()=>{var y;try{const{data:x,error:g}=await rp(ce.auth.getSession(),15e3,"Timed out loading auth session");if(!w)return;if(g)throw g;n(x.session??null),await u(x.session??null),m=((y=ce.auth.onAuthStateChange((S,_)=>{w&&(n(_),u(_))}).data)==null?void 0:y.subscription)??null}catch(x){console.error("Failed to initialise auth session",x),w&&(n(null),s(null),c(x instanceof Error?x.message:"Unable to connect to Supabase."),a(!1))}})(),()=>{w=!1,m==null||m.unsubscribe()}},[]);const p={user:r,session:t,profile:r,loading:o,authError:i,signOut:async()=>{await ce.auth.signOut(),n(null),s(null),c(null)},refreshUser:async()=>{const{data:m}=await rp(ce.auth.getSession(),15e3,"Timed out refreshing auth session");n(m.session??null),await u(m.session??null)}};return l.jsx($1.Provider,{value:p,children:e})},zW=async(e,t=5e3,n="Request timed out")=>{let r;const s=new Promise((o,a)=>{r=setTimeout(()=>a(new Error(n)),t)});try{return await Promise.race([e,s])}finally{clearTimeout(r)}},HW=({children:e})=>{const[t,n]=f.useState(null),[r,s]=f.useState(!0);f.useEffect(()=>{let a=!0;(async()=>{try{const{data:u,error:d}=await zW(ce.auth.getSession(),6e3,"Timed out loading session");if(!a)return;if(d)throw d;n(u.session??null)}catch(u){console.error("Failed to load Supabase session",u),a&&n(null)}finally{a&&s(!1)}})();const{data:c}=ce.auth.onAuthStateChange((u,d)=>{a&&(n(d),s(!1))});return()=>{a=!1,c.subscription.unsubscribe()}},[]);const o=f.useMemo(()=>({session:t,user:(t==null?void 0:t.user)??null,loading:r,signOut:()=>ce.auth.signOut()}),[t,r]);return l.jsx(Xk.Provider,{value:o,children:e})},wr=({children:e})=>{const{user:t,loading:n,authError:r}=Bn();return n?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 to-secondary/10 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),l.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})}):r?l.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-primary/10 to-secondary/10 px-4 text-center",children:l.jsxs("div",{className:"max-w-md space-y-3 rounded-3xl border border-white/50 bg-white/90 p-6 shadow-lg",children:[l.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"Unable to reach Supabase"}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[r,l.jsx("br",{}),"Check that ",l.jsx("code",{className:"font-mono",children:"VITE_SUPABASE_URL"})," and ",l.jsx("code",{className:"font-mono",children:"VITE_SUPABASE_ANON_KEY"})," are set in your ",l.jsx("code",{children:".env"})," file or that the Supabase service is reachable, then refresh the page."]})]})}):t?l.jsx(l.Fragment,{children:e}):l.jsx(YD,{to:"/auth",replace:!0})};var Gm=["Enter"," "],VW=["ArrowDown","PageUp","Home"],XN=["ArrowUp","PageDown","End"],YW=[...VW,...XN],KW={ltr:[...Gm,"ArrowRight"],rtl:[...Gm,"ArrowLeft"]},GW={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Nc="Menu",[Jl,qW,QW]=tf(Nc),[la,ZN]=Kt(Nc,[QW,ao,If]),$f=ao(),ej=If(),[JW,ca]=la(Nc),[XW,jc]=la(Nc),tj=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:o,modal:a=!0}=e,i=$f(t),[c,u]=f.useState(null),d=f.useRef(!1),h=it(o),p=Sc(s);return f.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),l.jsx(dv,{...i,children:l.jsx(JW,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:u,children:l.jsx(XW,{scope:t,onClose:f.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:p,modal:a,children:r})})})};tj.displayName=Nc;var ZW="MenuAnchor",ly=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=$f(n);return l.jsx(uc,{...s,...r,ref:t})});ly.displayName=ZW;var cy="MenuPortal",[e8,nj]=la(cy,{forceMount:void 0}),rj=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,o=ca(cy,t);return l.jsx(e8,{scope:t,forceMount:n,children:l.jsx(St,{present:n||o.open,children:l.jsx(bi,{asChild:!0,container:s,children:r})})})};rj.displayName=cy;var Ln="MenuContent",[t8,uy]=la(Ln),sj=f.forwardRef((e,t)=>{const n=nj(Ln,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,o=ca(Ln,e.__scopeMenu),a=jc(Ln,e.__scopeMenu);return l.jsx(Jl.Provider,{scope:e.__scopeMenu,children:l.jsx(St,{present:r||o.open,children:l.jsx(Jl.Slot,{scope:e.__scopeMenu,children:a.modal?l.jsx(n8,{...s,ref:t}):l.jsx(r8,{...s,ref:t})})})})}),n8=f.forwardRef((e,t)=>{const n=ca(Ln,e.__scopeMenu),r=f.useRef(null),s=Ce(t,r);return f.useEffect(()=>{const o=r.current;if(o)return vf(o)},[]),l.jsx(dy,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Q(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),r8=f.forwardRef((e,t)=>{const n=ca(Ln,e.__scopeMenu);return l.jsx(dy,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),s8=eo("MenuContent.ScrollLock"),dy=f.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:m,disableOutsideScroll:w,...v}=e,y=ca(Ln,n),x=jc(Ln,n),g=$f(n),b=ej(n),S=qW(n),[_,C]=f.useState(null),N=f.useRef(null),T=Ce(t,N,y.onContentChange),L=f.useRef(0),$=f.useRef(""),V=f.useRef(0),F=f.useRef(null),O=f.useRef("right"),j=f.useRef(0),z=w?yc:f.Fragment,A=w?{as:s8,allowPinchZoom:!0}:void 0,M=R=>{var H,ie;const W=$.current+R,J=S().filter(ye=>!ye.disabled),Y=document.activeElement,ue=(H=J.find(ye=>ye.ref.current===Y))==null?void 0:H.textValue,B=J.map(ye=>ye.textValue),D=g8(B,W,ue),U=(ie=J.find(ye=>ye.textValue===D))==null?void 0:ie.ref.current;(function ye(he){$.current=he,window.clearTimeout(L.current),he!==""&&(L.current=window.setTimeout(()=>ye(""),1e3))})(W),U&&setTimeout(()=>U.focus())};f.useEffect(()=>()=>window.clearTimeout(L.current),[]),gf();const E=f.useCallback(R=>{var J,Y;return O.current===((J=F.current)==null?void 0:J.side)&&y8(R,(Y=F.current)==null?void 0:Y.area)},[]);return l.jsx(t8,{scope:n,searchRef:$,onItemEnter:f.useCallback(R=>{E(R)&&R.preventDefault()},[E]),onItemLeave:f.useCallback(R=>{var W;E(R)||((W=N.current)==null||W.focus(),C(null))},[E]),onTriggerLeave:f.useCallback(R=>{E(R)&&R.preventDefault()},[E]),pointerGraceTimerRef:V,onPointerGraceIntentChange:f.useCallback(R=>{F.current=R},[]),children:l.jsx(z,{...A,children:l.jsx(vc,{asChild:!0,trapped:s,onMountAutoFocus:Q(o,R=>{var W;R.preventDefault(),(W=N.current)==null||W.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:l.jsx(oa,{asChild:!0,disableOutsidePointerEvents:i,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:m,children:l.jsx(Dk,{asChild:!0,...b,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:_,onCurrentTabStopIdChange:C,onEntryFocus:Q(c,R=>{x.isUsingKeyboardRef.current||R.preventDefault()}),preventScrollOnEntryFocus:!0,children:l.jsx(uf,{role:"menu","aria-orientation":"vertical","data-state":xj(y.open),"data-radix-menu-content":"",dir:x.dir,...g,...v,ref:T,style:{outline:"none",...v.style},onKeyDown:Q(v.onKeyDown,R=>{const J=R.target.closest("[data-radix-menu-content]")===R.currentTarget,Y=R.ctrlKey||R.altKey||R.metaKey,ue=R.key.length===1;J&&(R.key==="Tab"&&R.preventDefault(),!Y&&ue&&M(R.key));const B=N.current;if(R.target!==B||!YW.includes(R.key))return;R.preventDefault();const U=S().filter(H=>!H.disabled).map(H=>H.ref.current);XN.includes(R.key)&&U.reverse(),p8(U)}),onBlur:Q(e.onBlur,R=>{R.currentTarget.contains(R.target)||(window.clearTimeout(L.current),$.current="")}),onPointerMove:Q(e.onPointerMove,Xl(R=>{const W=R.target,J=j.current!==R.clientX;if(R.currentTarget.contains(W)&&J){const Y=R.clientX>j.current?"right":"left";O.current=Y,j.current=R.clientX}}))})})})})})})});sj.displayName=Ln;var o8="MenuGroup",fy=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return l.jsx(fe.div,{role:"group",...r,ref:t})});fy.displayName=o8;var a8="MenuLabel",oj=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return l.jsx(fe.div,{...r,ref:t})});oj.displayName=a8;var Dd="MenuItem",Nx="menu.itemSelect",Ff=f.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,o=f.useRef(null),a=jc(Dd,e.__scopeMenu),i=uy(Dd,e.__scopeMenu),c=Ce(t,o),u=f.useRef(!1),d=()=>{const h=o.current;if(!n&&h){const p=new CustomEvent(Nx,{bubbles:!0,cancelable:!0});h.addEventListener(Nx,m=>r==null?void 0:r(m),{once:!0}),Yg(h,p),p.defaultPrevented?u.current=!1:a.onClose()}};return l.jsx(aj,{...s,ref:c,disabled:n,onClick:Q(e.onClick,d),onPointerDown:h=>{var p;(p=e.onPointerDown)==null||p.call(e,h),u.current=!0},onPointerUp:Q(e.onPointerUp,h=>{var p;u.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:Q(e.onKeyDown,h=>{const p=i.searchRef.current!=="";n||p&&h.key===" "||Gm.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Ff.displayName=Dd;var aj=f.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...o}=e,a=uy(Dd,n),i=ej(n),c=f.useRef(null),u=Ce(t,c),[d,h]=f.useState(!1),[p,m]=f.useState("");return f.useEffect(()=>{const w=c.current;w&&m((w.textContent??"").trim())},[o.children]),l.jsx(Jl.ItemSlot,{scope:n,disabled:r,textValue:s??p,children:l.jsx(Lk,{asChild:!0,...i,focusable:!r,children:l.jsx(fe.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:u,onPointerMove:Q(e.onPointerMove,Xl(w=>{r?a.onItemLeave(w):(a.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Q(e.onPointerLeave,Xl(w=>a.onItemLeave(w))),onFocus:Q(e.onFocus,()=>h(!0)),onBlur:Q(e.onBlur,()=>h(!1))})})})}),i8="MenuCheckboxItem",ij=f.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return l.jsx(fj,{scope:e.__scopeMenu,checked:n,children:l.jsx(Ff,{role:"menuitemcheckbox","aria-checked":Ld(n)?"mixed":n,...s,ref:t,"data-state":py(n),onSelect:Q(s.onSelect,()=>r==null?void 0:r(Ld(n)?!0:!n),{checkForDefaultPrevented:!1})})})});ij.displayName=i8;var lj="MenuRadioGroup",[l8,c8]=la(lj,{value:void 0,onValueChange:()=>{}}),cj=f.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,o=it(r);return l.jsx(l8,{scope:e.__scopeMenu,value:n,onValueChange:o,children:l.jsx(fy,{...s,ref:t})})});cj.displayName=lj;var uj="MenuRadioItem",dj=f.forwardRef((e,t)=>{const{value:n,...r}=e,s=c8(uj,e.__scopeMenu),o=n===s.value;return l.jsx(fj,{scope:e.__scopeMenu,checked:o,children:l.jsx(Ff,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":py(o),onSelect:Q(r.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,n)},{checkForDefaultPrevented:!1})})})});dj.displayName=uj;var hy="MenuItemIndicator",[fj,u8]=la(hy,{checked:!1}),hj=f.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,o=u8(hy,n);return l.jsx(St,{present:r||Ld(o.checked)||o.checked===!0,children:l.jsx(fe.span,{...s,ref:t,"data-state":py(o.checked)})})});hj.displayName=hy;var d8="MenuSeparator",pj=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return l.jsx(fe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});pj.displayName=d8;var f8="MenuArrow",mj=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=$f(n);return l.jsx(df,{...s,...r,ref:t})});mj.displayName=f8;var h8="MenuSub",[Lz,gj]=la(h8),ol="MenuSubTrigger",vj=f.forwardRef((e,t)=>{const n=ca(ol,e.__scopeMenu),r=jc(ol,e.__scopeMenu),s=gj(ol,e.__scopeMenu),o=uy(ol,e.__scopeMenu),a=f.useRef(null),{pointerGraceTimerRef:i,onPointerGraceIntentChange:c}=o,u={__scopeMenu:e.__scopeMenu},d=f.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return f.useEffect(()=>d,[d]),f.useEffect(()=>{const h=i.current;return()=>{window.clearTimeout(h),c(null)}},[i,c]),l.jsx(ly,{asChild:!0,...u,children:l.jsx(aj,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":xj(n.open),...e,ref:ef(t,s.onTriggerChange),onClick:h=>{var p;(p=e.onClick)==null||p.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Q(e.onPointerMove,Xl(h=>{o.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!a.current&&(o.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Q(e.onPointerLeave,Xl(h=>{var m,w;d();const p=(m=n.content)==null?void 0:m.getBoundingClientRect();if(p){const v=(w=n.content)==null?void 0:w.dataset.side,y=v==="right",x=y?-5:5,g=p[y?"left":"right"],b=p[y?"right":"left"];o.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:g,y:p.top},{x:b,y:p.top},{x:b,y:p.bottom},{x:g,y:p.bottom}],side:v}),window.clearTimeout(i.current),i.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(h),h.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Q(e.onKeyDown,h=>{var m;const p=o.searchRef.current!=="";e.disabled||p&&h.key===" "||KW[r.dir].includes(h.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),h.preventDefault())})})})});vj.displayName=ol;var yj="MenuSubContent",wj=f.forwardRef((e,t)=>{const n=nj(Ln,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,o=ca(Ln,e.__scopeMenu),a=jc(Ln,e.__scopeMenu),i=gj(yj,e.__scopeMenu),c=f.useRef(null),u=Ce(t,c);return l.jsx(Jl.Provider,{scope:e.__scopeMenu,children:l.jsx(St,{present:r||o.open,children:l.jsx(Jl.Slot,{scope:e.__scopeMenu,children:l.jsx(dy,{id:i.contentId,"aria-labelledby":i.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;a.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Q(e.onFocusOutside,d=>{d.target!==i.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Q(e.onEscapeKeyDown,d=>{a.onClose(),d.preventDefault()}),onKeyDown:Q(e.onKeyDown,d=>{var m;const h=d.currentTarget.contains(d.target),p=GW[a.dir].includes(d.key);h&&p&&(o.onOpenChange(!1),(m=i.trigger)==null||m.focus(),d.preventDefault())})})})})})});wj.displayName=yj;function xj(e){return e?"open":"closed"}function Ld(e){return e==="indeterminate"}function py(e){return Ld(e)?"indeterminate":e?"checked":"unchecked"}function p8(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function m8(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function g8(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=m8(e,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function v8(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const i=t[o],c=t[a],u=i.x,d=i.y,h=c.x,p=c.y;d>r!=p>r&&n<(h-u)*(r-d)/(p-d)+u&&(s=!s)}return s}function y8(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return v8(n,t)}function Xl(e){return t=>t.pointerType==="mouse"?e(t):void 0}var w8=tj,x8=ly,b8=rj,S8=sj,_8=fy,E8=oj,C8=Ff,k8=ij,N8=cj,j8=dj,P8=hj,T8=pj,R8=mj,I8=vj,O8=wj,Uf="DropdownMenu",[A8,$z]=Kt(Uf,[ZN]),qt=ZN(),[M8,bj]=A8(Uf),Sj=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:o,onOpenChange:a,modal:i=!0}=e,c=qt(t),u=f.useRef(null),[d,h]=as({prop:s,defaultProp:o??!1,onChange:a,caller:Uf});return l.jsx(M8,{scope:t,triggerId:Tr(),triggerRef:u,contentId:Tr(),open:d,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(p=>!p),[h]),modal:i,children:l.jsx(w8,{...c,open:d,onOpenChange:h,dir:r,modal:i,children:n})})};Sj.displayName=Uf;var _j="DropdownMenuTrigger",Ej=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,o=bj(_j,n),a=qt(n);return l.jsx(x8,{asChild:!0,...a,children:l.jsx(fe.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:ef(t,o.triggerRef),onPointerDown:Q(e.onPointerDown,i=>{!r&&i.button===0&&i.ctrlKey===!1&&(o.onOpenToggle(),o.open||i.preventDefault())}),onKeyDown:Q(e.onKeyDown,i=>{r||(["Enter"," "].includes(i.key)&&o.onOpenToggle(),i.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(i.key)&&i.preventDefault())})})})});Ej.displayName=_j;var D8="DropdownMenuPortal",Cj=e=>{const{__scopeDropdownMenu:t,...n}=e,r=qt(t);return l.jsx(b8,{...r,...n})};Cj.displayName=D8;var kj="DropdownMenuContent",Nj=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=bj(kj,n),o=qt(n),a=f.useRef(!1);return l.jsx(S8,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:t,onCloseAutoFocus:Q(e.onCloseAutoFocus,i=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,i.preventDefault()}),onInteractOutside:Q(e.onInteractOutside,i=>{const c=i.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Nj.displayName=kj;var L8="DropdownMenuGroup",$8=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=qt(n);return l.jsx(_8,{...s,...r,ref:t})});$8.displayName=L8;var F8="DropdownMenuLabel",jj=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=qt(n);return l.jsx(E8,{...s,...r,ref:t})});jj.displayName=F8;var U8="DropdownMenuItem",Pj=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=qt(n);return l.jsx(C8,{...s,...r,ref:t})});Pj.displayName=U8;var B8="DropdownMenuCheckboxItem",Tj=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=qt(n);return l.jsx(k8,{...s,...r,ref:t})});Tj.displayName=B8;var W8="DropdownMenuRadioGroup",z8=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=qt(n);return l.jsx(N8,{...s,...r,ref:t})});z8.displayName=W8;var H8="DropdownMenuRadioItem",Rj=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=qt(n);return l.jsx(j8,{...s,...r,ref:t})});Rj.displayName=H8;var V8="DropdownMenuItemIndicator",Ij=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=qt(n);return l.jsx(P8,{...s,...r,ref:t})});Ij.displayName=V8;var Y8="DropdownMenuSeparator",Oj=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=qt(n);return l.jsx(T8,{...s,...r,ref:t})});Oj.displayName=Y8;var K8="DropdownMenuArrow",G8=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=qt(n);return l.jsx(R8,{...s,...r,ref:t})});G8.displayName=K8;var q8="DropdownMenuSubTrigger",Aj=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=qt(n);return l.jsx(I8,{...s,...r,ref:t})});Aj.displayName=q8;var Q8="DropdownMenuSubContent",Mj=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=qt(n);return l.jsx(O8,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Mj.displayName=Q8;var J8=Sj,X8=Ej,Z8=Cj,Dj=Nj,Lj=jj,$j=Pj,Fj=Tj,Uj=Rj,Bj=Ij,Wj=Oj,zj=Aj,Hj=Mj;const ez=J8,tz=X8,nz=f.forwardRef(({className:e,inset:t,children:n,...r},s)=>l.jsxs(zj,{ref:s,className:ge("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...r,children:[n,l.jsx(Xg,{className:"ml-auto h-4 w-4"})]}));nz.displayName=zj.displayName;const rz=f.forwardRef(({className:e,...t},n)=>l.jsx(Hj,{ref:n,className:ge("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));rz.displayName=Hj.displayName;const Vj=f.forwardRef(({className:e,sideOffset:t=4,...n},r)=>l.jsx(Z8,{children:l.jsx(Dj,{ref:r,sideOffset:t,className:ge("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Vj.displayName=Dj.displayName;const qm=f.forwardRef(({className:e,inset:t,...n},r)=>l.jsx($j,{ref:r,className:ge("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...n}));qm.displayName=$j.displayName;const sz=f.forwardRef(({className:e,children:t,checked:n,...r},s)=>l.jsxs(Fj,{ref:s,className:ge("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:n,...r,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(Bj,{children:l.jsx(Jg,{className:"h-4 w-4"})})}),t]}));sz.displayName=Fj.displayName;const oz=f.forwardRef(({className:e,children:t,...n},r)=>l.jsxs(Uj,{ref:r,className:ge("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(Bj,{children:l.jsx(k_,{className:"h-2 w-2 fill-current"})})}),t]}));oz.displayName=Uj.displayName;const az=f.forwardRef(({className:e,inset:t,...n},r)=>l.jsx(Lj,{ref:r,className:ge("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));az.displayName=Lj.displayName;const iz=f.forwardRef(({className:e,...t},n)=>l.jsx(Wj,{ref:n,className:ge("-mx-1 my-1 h-px bg-muted",e),...t}));iz.displayName=Wj.displayName;const lz=[{label:"Reservations",path:"/dashboard"},{label:"Listings",path:"/listings"},{label:"Wishlist",path:"/wishlist"},{label:"Messages",path:"/messages"},{label:"Profile",path:"/profile"}],cz=()=>{const e=lr(),t=aa(),{signOut:n,profile:r}=Bn(),s=(r==null?void 0:r.user_role)==="host",o=(a,i)=>{e("/listings",{state:{listingScope:a,triggerEdit:!1}})};return t.pathname==="/auth"||t.pathname==="/"?null:l.jsxs("div",{className:"pointer-events-none fixed right-4 top-4 z-40 flex flex-col items-end gap-3",children:[l.jsx("div",{className:"pointer-events-auto flex flex-wrap justify-end gap-2",children:lz.map(a=>a.path==="/listings"&&s?l.jsxs(ez,{children:[l.jsx(tz,{asChild:!0,children:l.jsxs(Se,{size:"sm",variant:t.pathname.startsWith(a.path)?"default":"outline",className:"rounded-full border-white/70 bg-white/90 text-slate-700 shadow",children:["Listings",l.jsx(of,{className:"ml-2 h-4 w-4"})]})}),l.jsxs(Vj,{align:"end",className:"min-w-[10rem]",children:[l.jsx(qm,{onSelect:()=>o("all"),children:"All listings"}),l.jsx(qm,{onSelect:()=>o("mine"),children:"Edit my listing"})]})]},`${a.path}-dropdown`):l.jsx(Se,{size:"sm",variant:t.pathname.startsWith(a.path)?"default":"outline",className:"rounded-full border-white/70 bg-white/90 text-slate-700 shadow",onClick:()=>e(a.path),children:a.label},a.path))}),l.jsx(Se,{onClick:()=>n(),variant:"destructive",size:"sm",className:"pointer-events-auto rounded-full bg-red-600 text-white shadow hover:bg-red-500",children:"Sign out"})]})},uz=new WM,dz=()=>l.jsx(KM,{client:uz,children:l.jsx(HW,{children:l.jsxs(WW,{children:[l.jsx(BW,{}),l.jsxs(CM,{children:[l.jsx(cO,{}),l.jsx(BO,{}),l.jsxs(JD,{children:[l.jsx(cz,{}),l.jsxs(GD,{children:[l.jsx(Zt,{path:"/",element:l.jsx(g6,{})}),l.jsx(Zt,{path:"/auth",element:l.jsx(u6,{})}),l.jsx(Zt,{path:"/listings",element:l.jsx(wr,{children:l.jsx(B3,{})})}),l.jsx(Zt,{path:"/couch/:id",element:l.jsx(wr,{children:l.jsx(mB,{})})}),l.jsx(Zt,{path:"/renter-dashboard",element:l.jsx(wr,{children:l.jsx(cW,{})})}),l.jsx(Zt,{path:"/host-requests",element:l.jsx(wr,{children:l.jsx(bW,{})})}),l.jsx(Zt,{path:"/wishlist",element:l.jsx(wr,{children:l.jsx(gW,{})})}),l.jsx(Zt,{path:"/profile",element:l.jsx(wr,{children:l.jsx(mW,{})})}),l.jsx(Zt,{path:"/notes",element:l.jsx(wr,{children:l.jsx(_W,{})})}),l.jsx(Zt,{path:"/messages",element:l.jsx(wr,{children:l.jsx(EW,{})})}),l.jsx(Zt,{path:"/dashboard",element:l.jsx(wr,{children:l.jsx(Ex,{})})}),l.jsx(Zt,{path:"/bookings",element:l.jsx(wr,{children:l.jsx(Ex,{})})}),l.jsx(Zt,{path:"*",element:l.jsx(XD,{})})]})]})]})]})})});JS(document.getElementById("root")).render(l.jsx(dz,{}));export{Se as B,K as R,sa as a,Qo as b,$n as c,Qm as g,l as j,f as r};
